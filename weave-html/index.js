(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrapTable=t(require("react"),require("react-dom")):e.ReactBootstrapTable=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=n(o),a=r(40),s=n(a),l=r(34);"undefined"!=typeof window&&(window.BootstrapTable=i["default"],window.TableHeaderColumn=s["default"],window.TableDataSet=l.TableDataSet),t["default"]={BootstrapTable:i["default"],TableHeaderColumn:s["default"],TableDataSet:l.TableDataSet},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=r(4),f=n(p),h=r(5),v=n(h),y=r(9),m=n(y),g=r(30),b=n(g),w=r(32),E=n(w),_=r(33),P=n(_),T=r(34),S=r(36),O=n(S),C=function(e){function t(e){var r=this;o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._scrollHeader=function(e){r.refs.header.refs.container.scrollLeft=e.currentTarget.scrollLeft},this._adjustHeaderWidth=function(){var e=r.refs.header.refs.container.childNodes[0],t=r.refs.body.refs.container.childNodes[0];e.offsetWidth!==t.offsetWidth&&(e.style.width=t.offsetWidth+"px");var n=r.refs.body.getBodyHeaderDomProp();r.refs.header.fitHeader(n,r.refs.body.refs.container.scrollHeight>r.refs.body.refs.container.clientHeight)},this._attachCellEditFunc(),Array.isArray(this.props.data)?this.store=new T.TableDataStore(this.props.data):(this.store=new T.TableDataStore(this.props.data.getData()),this.props.data.clear(),this.props.data.on("change",function(e){r.store.setData(e),r.setState({data:r.getTableData(r.props)})})),this.initTable(this.props),this.props.selectRow&&this.props.selectRow.selected&&this.store.setSelectedRowKey(this.props.selectRow.selected),this.state={data:this.getTableData(this.props),selectedRowKeys:this.store.getSelectedRowKeys()}}return i(t,e),a(t,[{key:"initTable",value:function(e){var t=e.keyField,r={};if("string"==typeof t&&t.length||u["default"].Children.forEach(e.children,function(e){if(e.props.isKey){if(null!=t)throw"Error. Multiple key column be detected in TableHeaderColumn.";t=e.props.dataField}},this),u["default"].Children.forEach(e.children,function(e){e.props.sortFunc&&(r[e.props.dataField]=e.props.sortFunc)},this),null==t)throw"Error. No any key column defined in TableHeaderColumn.Use 'isKey={true}' to specify an unique column after version 0.5.4.";this.store.setProps({isPagination:e.pagination,keyField:t,customSortFuncMap:r,multiColumnSearch:e.multiColumnSearch,remote:this.isRemoteDataSource()})}},{key:"getTableData",value:function(e){var t=[];if(e.pagination){var r=e.options.page,n=e.options.sizePerPage;r||(r=this.refs.pagination?this.refs.pagination.getCurrentPage():1),n||(n=this.refs.pagination?this.refs.pagination.getSizePerPage():f["default"].SIZE_PER_PAGE),r>=e.data.length/n&&(r=1),t=this.store.page(r,n).get()}else t=this.store.get();return t}},{key:"componentWillReceiveProps",value:function(e){if(this.initTable(e),Array.isArray(e.data)){this.store.setData(e.data);var t=this.getTableData(e);this.setState({data:t})}e.selectRow&&e.selectRow.selected&&(this.store.setSelectedRowKey(e.selectRow.selected),this.setState({selectedRowKeys:e.selectRow.selected}))}},{key:"componentDidMount",value:function(){this._adjustHeaderWidth(),window.addEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.addEventListener("scroll",this._scrollHeader)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.removeEventListener("scroll",this._scrollHeader)}},{key:"componentDidUpdate",value:function(){this._adjustHeaderWidth(),this._attachCellEditFunc(),this.props.options.afterTableComplete&&this.props.options.afterTableComplete()}},{key:"_attachCellEditFunc",value:function(){this.props.cellEdit&&(this.props.cellEdit.__onCompleteEdit__=this.handleEditCell.bind(this),this.props.cellEdit.mode!==f["default"].CELL_EDIT_NONE&&(this.props.selectRow.clickToSelect=!1))}},{key:"isRemoteDataSource",value:function(e){return(e||this.props).remote}},{key:"render",value:function(){var e=((0,d["default"])("react-bs-table"),this.props.children),t={height:this.props.height,maxHeight:this.props.maxHeight};Array.isArray(this.props.children)||(e=[this.props.children]);var r=e.map(function(e,t){return{name:e.props.dataField,align:e.props.dataAlign,sort:e.props.dataSort,format:e.props.dataFormat,editable:e.props.editable,hidden:e.props.hidden,className:e.props.columnClassName,width:e.props.width,text:e.props.children,index:t}},this),n=this.renderPagination(),o=this.renderToolBar(),i=this.renderTableFilter(r),a=this.isSelectAll();return u["default"].createElement("div",{className:"react-bs-container",ref:"table"},o,u["default"].createElement("div",{className:"react-bs-table-container",style:t},u["default"].createElement(v["default"],{ref:"header",rowSelectType:this.props.selectRow.mode,hideSelectColumn:this.props.selectRow.hideSelectColumn,sortName:this.props.options.sortName,sortOrder:this.props.options.sortOrder,onSort:this.handleSort.bind(this),onSelectAllRow:this.handleSelectAllRow.bind(this),bordered:this.props.bordered,condensed:this.props.condensed,isSelectAll:a},this.props.children),u["default"].createElement(m["default"],{height:this.props.height,maxHeight:this.props.maxHeight,ref:"body",data:this.state.data,columns:r,trClassName:this.props.trClassName,striped:this.props.striped,bordered:this.props.bordered,hover:this.props.hover,keyField:this.store.getKeyField(),condensed:this.props.condensed,selectRow:this.props.selectRow,cellEdit:this.props.cellEdit,selectedRowKeys:this.state.selectedRowKeys,onRowClick:this.handleRowClick.bind(this),onSelectRow:this.handleSelectRow.bind(this),noDataText:this.props.options.noDataText})),i,n)}},{key:"isSelectAll",value:function(){var e=this.store.getSelectedRowKeys(),t=this.store.getAllRowkey();return e.length!==t.length?0===e.length?!1:"indeterminate":!0}},{key:"handleSort",value:function(e,t){if(this.props.options.onSortChange&&this.props.options.onSortChange(t,e,this.props),!this.isRemoteDataSource()){var r=this.store.sort(e,t).get();this.setState({data:r})}}},{key:"handlePaginationData",value:function(e,t){var r=this.props.options.onPageChange;if(r&&r(e,t),!this.isRemoteDataSource()){var n=this.store.page(e,t).get();this.setState({data:n})}}},{key:"handleRowClick",value:function(e){this.props.options.onRowClick&&this.props.options.onRowClick(e)}},{key:"handleSelectAllRow",value:function(e){var t=e.currentTarget.checked,r=[],n=!0;this.props.selectRow.onSelectAll&&(n=this.props.selectRow.onSelectAll(t,t?this.store.get():[])),("undefined"==typeof n||n!==!1)&&(t&&(r=this.store.getAllRowkey()),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleSelectRow",value:function(e,t){var r=this.store.getSelectedRowKeys(),n=e[this.store.getKeyField()],o=!0;this.props.selectRow.onSelect&&(o=this.props.selectRow.onSelect(e,t)),("undefined"==typeof o||o!==!1)&&(this.props.selectRow.mode===f["default"].ROW_SELECT_SINGLE?r=t?[n]:[]:t?r.push(n):r=r.filter(function(e){return n!==e}),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleEditCell",value:function(e,t,r){var n=void 0;u["default"].Children.forEach(this.props.children,function(e,t){return t==r?(n=e.props.dataField,!1):void 0});var o=this.store.edit(e,t,n).get();this.setState({data:o}),this.props.cellEdit.afterSaveCell&&this.props.cellEdit.afterSaveCell(this.state.data[t],n,e)}},{key:"handleAddRowBegin",value:function(){this.refs.body}},{key:"handleAddRow",value:function(e){var t=void 0;try{this.store.add(e)}catch(r){return r}if(this.props.pagination){var n=this.refs.pagination.getSizePerPage(),o=Math.ceil(this.store.getDataNum()/n);t=this.store.page(o,n).get(),this.setState({data:t}),this.refs.pagination.changePage(o)}else t=this.store.get(),this.setState({data:t});this.props.options.afterInsertRow&&this.props.options.afterInsertRow(e)}},{key:"getSizePerPage",value:function(){return this.props.pagination?this.refs.pagination.getSizePerPage():void 0}},{key:"getCurrentPage",value:function(){return this.props.pagination?this.refs.pagination.getCurrentPage():void 0}},{key:"handleDropRow",value:function(e){var t=this,r=e?e:this.store.getSelectedRowKeys();r&&r.length>0&&(this.props.options.handleConfirmDeleteRow?this.props.options.handleConfirmDeleteRow(function(){t.deleteRow(r)}):confirm("Are you sure want delete?")&&this.deleteRow(r))}},{key:"deleteRow",value:function(e){var t=void 0;if(this.store.remove(e),this.store.setSelectedRowKey([]),this.props.pagination){var r=this.refs.pagination.getSizePerPage(),n=Math.ceil(this.store.getDataNum()/r),o=this.refs.pagination.getCurrentPage();o>n&&(o=n),t=this.store.page(o,r).get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys()}),this.refs.pagination.changePage(o)}else t=this.store.get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys()});this.props.options.afterDeleteRow&&this.props.options.afterDeleteRow(e)}},{key:"handleFilterData",value:function(e){this.store.filter(e);var t=void 0;if(this.props.pagination){var r=this.refs.pagination.getSizePerPage();t=this.store.page(1,r).get(),this.refs.pagination.changePage(1)}else t=this.store.get();this.props.options.afterColumnFilter&&this.props.options.afterColumnFilter(e,this.store.getDataIgnoringPagination()),this.setState({data:t})}},{key:"handleExportCSV",value:function(){var e=this.store.getDataIgnoringPagination(),t=[];this.props.children.map(function(e){e.props.hidden===!1&&t.push(e.props.dataField)}),(0,O["default"])(e,t,this.props.csvFileName)}},{key:"handleSearch",value:function(e){this.store.search(e);var t=void 0;if(this.props.pagination){var r=this.refs.pagination.getSizePerPage();t=this.store.page(1,r).get(),this.refs.pagination.changePage(1)}else t=this.store.get();this.props.options.afterSearch&&this.props.options.afterSearch(e,this.store.getDataIgnoringPagination()),this.setState({data:t})}},{key:"renderPagination",value:function(){if(this.props.pagination){var e=void 0;return e=this.isRemoteDataSource()?this.props.fetchInfo.dataTotalSize:this.store.getDataNum(),u["default"].createElement("div",null,u["default"].createElement(b["default"],{ref:"pagination",currPage:this.props.options.page||1,changePage:this.handlePaginationData.bind(this),sizePerPage:this.props.options.sizePerPage||f["default"].SIZE_PER_PAGE_LIST[0],sizePerPageList:this.props.options.sizePerPageList||f["default"].SIZE_PER_PAGE_LIST,paginationSize:this.props.options.paginationSize||f["default"].PAGINATION_SIZE,remote:this.isRemoteDataSource(),dataSize:e,onSizePerPageList:this.props.options.onSizePerPageList}))}return null}},{key:"renderToolBar",value:function(){var e=void 0;return e=Array.isArray(this.props.children)?this.props.children.map(function(e){var t=e.props;return{name:t.children,field:t.dataField,autoValue:t.autoValue||!1,editable:t.editable&&"function"==typeof t.editable?t.editable():t.editable,format:t.format?format:!1}}):[{name:this.props.children.props.children,field:this.props.children.props.dataField,editable:this.props.children.props.editable}],this.props.insertRow||this.props.deleteRow||this.props.search||this.props.exportCSV?u["default"].createElement("div",{className:"tool-bar"},u["default"].createElement(E["default"],{enableInsert:this.props.insertRow,enableDelete:this.props.deleteRow,enableSearch:this.props.search,enableExportCSV:this.props.exportCSV,columns:e,searchPlaceholder:this.props.searchPlaceholder,onAddRow:this.handleAddRow.bind(this),onAddRowBegin:this.handleAddRowBegin.bind(this),onDropRow:this.handleDropRow.bind(this),onSearch:this.handleSearch.bind(this),onExportCSV:this.handleExportCSV.bind(this)})):null}},{key:"renderTableFilter",value:function(e){return this.props.columnFilter?u["default"].createElement(P["default"],{columns:e,rowSelectType:this.props.selectRow.mode,onFilter:this.handleFilterData.bind(this)}):null}}]),t}(u["default"].Component);C.propTypes={keyField:u["default"].PropTypes.string,height:u["default"].PropTypes.string,maxHeight:u["default"].PropTypes.string,data:u["default"].PropTypes.oneOfType([u["default"].PropTypes.array,u["default"].PropTypes.object]),remote:u["default"].PropTypes.bool,striped:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,hover:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,pagination:u["default"].PropTypes.bool,searchPlaceholder:u["default"].PropTypes.string,selectRow:u["default"].PropTypes.shape({mode:u["default"].PropTypes.string,bgColor:u["default"].PropTypes.string,selected:u["default"].PropTypes.array,onSelect:u["default"].PropTypes.func,onSelectAll:u["default"].PropTypes.func,clickToSelect:u["default"].PropTypes.bool,hideSelectColumn:u["default"].PropTypes.bool,clickToSelectAndEditCell:u["default"].PropTypes.bool}),cellEdit:u["default"].PropTypes.shape({mode:u["default"].PropTypes.string,blurToSave:u["default"].PropTypes.bool,afterSaveCell:u["default"].PropTypes.func}),insertRow:u["default"].PropTypes.bool,deleteRow:u["default"].PropTypes.bool,search:u["default"].PropTypes.bool,columnFilter:u["default"].PropTypes.bool,trClassName:u["default"].PropTypes.any,options:u["default"].PropTypes.shape({sortName:u["default"].PropTypes.string,sortOrder:u["default"].PropTypes.string,afterTableComplete:u["default"].PropTypes.func,afterDeleteRow:u["default"].PropTypes.func,afterInsertRow:u["default"].PropTypes.func,afterSearch:u["default"].PropTypes.func,afterColumnFilter:u["default"].PropTypes.func,onRowClick:u["default"].PropTypes.func,page:u["default"].PropTypes.number,sizePerPageList:u["default"].PropTypes.array,sizePerPage:u["default"].PropTypes.number,paginationSize:u["default"].PropTypes.number,onSortChange:u["default"].PropTypes.func,onPageChange:u["default"].PropTypes.func,onSizePerPageList:u["default"].PropTypes.func,noDataText:u["default"].PropTypes.string,handleConfirmDeleteRow:u["default"].PropTypes.func}),fetchInfo:u["default"].PropTypes.shape({dataTotalSize:u["default"].PropTypes.number}),exportCSV:u["default"].PropTypes.bool,csvFileName:u["default"].PropTypes.string},C.defaultProps={height:"100%",maxHeight:void 0,striped:!1,bordered:!0,hover:!1,condensed:!1,pagination:!1,searchPlaceholder:void 0,selectRow:{mode:f["default"].ROW_SELECT_NONE,bgColor:f["default"].ROW_SELECT_BG_COLOR,selected:[],onSelect:void 0,onSelectAll:void 0,clickToSelect:!1,hideSelectColumn:!1,clickToSelectAndEditCell:!1},cellEdit:{mode:f["default"].CELL_EDIT_NONE,blurToSave:!1,afterSaveCell:void 0},insertRow:!1,deleteRow:!1,search:!1,multiColumnSearch:!1,columnFilter:!1,trClassName:"",options:{sortName:void 0,sortOrder:f["default"].SORT_DESC,afterTableComplete:void 0,afterDeleteRow:void 0,afterInsertRow:void 0,afterSearch:void 0,afterColumnFilter:void 0,onRowClick:void 0,page:void 0,sizePerPageList:f["default"].SIZE_PER_PAGE_LIST,sizePerPage:void 0,paginationSize:f["default"].PAGINATION_SIZE,onSizePerPageList:void 0,noDataText:void 0,handleConfirmDeleteRow:void 0},fetchInfo:{dataTotalSize:0},exportCSV:!1,csvFileName:void 0},t["default"]=C,e.exports=t["default"]},function(t,r){t.exports=e},function(e,t,r){var n,o;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(r.apply(null,n));else if("object"===o)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=r:(n=[],o=function(){return r}.apply(t,n),!(void 0!==o&&(e.exports=o)))}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={SORT_DESC:"desc",SORT_ASC:"asc",SIZE_PER_PAGE:10,NEXT_PAGE:">",LAST_PAGE:">>",PRE_PAGE:"<",FIRST_PAGE:"<<",ROW_SELECT_BG_COLOR:"",ROW_SELECT_NONE:"none",ROW_SELECT_SINGLE:"radio",ROW_SELECT_MULTI:"checkbox",CELL_EDIT_NONE:"none",CELL_EDIT_CLICK:"click",CELL_EDIT_DBCLICK:"dbclick",SIZE_PER_PAGE_LIST:[10,25,30,50],PAGINATION_SIZE:5,NO_DATA_TEXT:"There is no data to display"},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(6),d=n(c),p=r(4),f=n(p),h=r(7),v=n(h),y=r(3),m=n(y),g=r(8),b=n(g),w=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.update(this.props.checked)}},{key:"componentWillReceiveProps",value:function(e){this.update(e.checked)}},{key:"update",value:function(e){d["default"].findDOMNode(this).indeterminate="indeterminate"===e}},{key:"render",value:function(){return u["default"].createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.props.onChange})}}]),t}(u["default"].Component),E=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.selectRowColumnWidth=null}return i(t,e),a(t,[{key:"clearSortCaret",value:function(e,t){for(var r=this.refs.header,n=0;n<r.childElementCount;n++){var o=r.childNodes[n].childNodes[0];o.getElementsByClassName("order").length>0&&o.removeChild(o.getElementsByClassName("order")[0])}this.props.onSort(e,t)}},{key:"componentDidMount",value:function(){if(this.props.sortName){this.clearSortCaret(this.props.sortOrder,this.props.sortName);for(var e=this.refs.header,t=0;t<e.childElementCount;t++){var r=e.childNodes[t].childNodes[0];if(r.getAttribute("data-field")===this.props.sortName){r.appendChild(v["default"].renderSortCaret(this.props.sortOrder));break}}}}},{key:"render",value:function(){var e=(0,m["default"])("table-header"),t=(0,m["default"])("table","table-hover",{"table-bordered":this.props.bordered,"table-condensed":this.props.condensed}),r=this.props.hideSelectColumn?null:this.renderSelectRowHeader();return this._attachClearSortCaretFunc(),u["default"].createElement("div",{ref:"container",className:e},u["default"].createElement("table",{className:t},u["default"].createElement("thead",null,u["default"].createElement("tr",{ref:"header"},r,this.props.children))))}},{key:"renderSelectRowHeader",value:function(){return this.props.rowSelectType==f["default"].ROW_SELECT_SINGLE?u["default"].createElement(b["default"],{width:this.selectRowColumnWidth}):this.props.rowSelectType==f["default"].ROW_SELECT_MULTI?u["default"].createElement(b["default"],{width:this.selectRowColumnWidth},u["default"].createElement(w,{onChange:this.props.onSelectAllRow,checked:this.props.isSelectAll})):null}},{key:"_attachClearSortCaretFunc",value:function(){if(Array.isArray(this.props.children))for(var e=0;e<this.props.children.length;e++)this.props.children[e]=u["default"].cloneElement(this.props.children[e],{key:e,clearSortCaret:this.clearSortCaret.bind(this)});else this.props.children=u["default"].cloneElement(this.props.children,{key:0,clearSortCaret:this.clearSortCaret.bind(this)})}},{key:"fitHeader",value:function(e,t){if(Array.isArray(this.props.children)){var r=this.props.rowSelectType!=f["default"].ROW_SELECT_SINGLE&&this.props.rowSelectType!=f["default"].ROW_SELECT_MULTI||this.props.hideSelectColumn?0:1;1==r&&(this.selectRowColumnWidth=e[0].width);for(var n=0;n<this.props.children.length;n++)this.props.children[n]=u["default"].cloneElement(this.props.children[n],{width:e[n+r].width+"px"})}else this.props.children=u["default"].cloneElement(this.props.children,{width:e[0].width+"px"});this.props.condensed&&(this.refs.container.style.height="36px"),this.forceUpdate(),t&&(this.refs.container.style.marginRight=v["default"].getScrollBarWidth()+"px")}}]),t}(u["default"].Component);E.propTypes={rowSelectType:u["default"].PropTypes.string,onSort:u["default"].PropTypes.func,onSelectAllRow:u["default"].PropTypes.func,sortName:u["default"].PropTypes.string,sortOrder:u["default"].PropTypes.string,hideSelectColumn:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,isSelectAll:u["default"].PropTypes.oneOf([!0,"indeterminate",!1])},E.defaultProps={},t["default"]=E,e.exports=t["default"]},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),a=r(4),s=n(a),l=r(3),u=n(l);t["default"]={renderSortCaret:function(e){var t=document.createElement("span");t.className="order",e==s["default"].SORT_ASC&&(t.className+=" dropup");var r=document.createElement("span");return r.className="caret",r.style.margin="10px 5px",t.appendChild(r),t},renderReactSortCaret:function(e){var t=(0,u["default"])("order",{dropup:e==s["default"].SORT_ASC});return i["default"].createElement("span",{className:t},i["default"].createElement("span",{className:"caret",style:{margin:"10px 5px"}}))},getScrollBarWidth:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return r==n&&(n=t.clientWidth),document.body.removeChild(t),r-n}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=(n(c),r(4)),p=(n(d),function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"render",value:function(){var e={width:parseInt(this.props.width)?this.props.width:35};return u["default"].createElement("th",{style:e},u["default"].createElement("div",{className:"th-inner table-header-column"},this.props.children))}}]),t}(u["default"].Component));t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=n(c),p=r(7),f=n(p),h=r(10),v=n(h),y=r(11),m=n(y),g=r(12),b=n(g),w=r(3),E=n(w),_=function(e){return e&&"function"==typeof e},P=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currEditCell:null},this.editing=!1}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.adjustBody()}},{key:"componentDidUpdate",value:function(){this.adjustBody()}},{key:"render",value:function(){var e=(0,E["default"])("table-container"),t=(0,E["default"])("table",{"table-striped":this.props.striped,"table-bordered":this.props.bordered,"table-hover":this.props.hover,"table-condensed":this.props.condensed}),r=this._isSelectRowDefined(),n=this.renderTableHeader(r),o=this.props.data.map(function(e,t){var n=this.props.columns.map(function(r,n){var o=e[r.name];if(this.editing&&r.name!==this.props.keyField&&r.editable&&null!=this.state.currEditCell&&this.state.currEditCell.rid==t&&this.state.currEditCell.cid==n){var i=r.format?function(t){return r.format(t,e).replace(/<.*?>/g,"")}:!1;return u["default"].createElement(b["default"],{completeEdit:this.handleCompleteEditCell.bind(this),editable:_(r.editable)?r.editable(o,e,t,n):r.editable,format:r.format?i:!1,key:n,blurToSave:this.props.cellEdit.blurToSave,rowIndex:t,colIndex:n},o)}var a=_(r.className)?r.className(o,e,t,n):r.className;if("undefined"!=typeof r.format){var s=r.format(o,e);return u["default"].isValidElement(s)||(s=u["default"].createElement("div",{dangerouslySetInnerHTML:{__html:s}})),u["default"].createElement(m["default"],{dataAlign:r.align,key:n,className:a,cellEdit:this.props.cellEdit,onEdit:this.handleEditCell.bind(this),width:r.width},s)}return u["default"].createElement(m["default"],{dataAlign:r.align,key:n,className:a,cellEdit:this.props.cellEdit,hidden:r.hidden,onEdit:this.handleEditCell.bind(this),width:r.width},o)},this),o=-1!=this.props.selectedRowKeys.indexOf(e[this.props.keyField]),i=r&&!this.props.selectRow.hideSelectColumn?this.renderSelectRowColumn(o):null,a=_(this.props.trClassName)?this.props.trClassName(e,t):this.props.trClassName;return u["default"].createElement(v["default"],{isSelected:o,key:t,className:a,selectRow:r?this.props.selectRow:void 0,enableCellEdit:this.props.cellEdit.mode!==d["default"].CELL_EDIT_NONE,onRowClick:this.handleRowClick.bind(this),onSelectRow:this.handleSelectRow.bind(this)},i,n)},this);0===o.length&&o.push(u["default"].createElement(v["default"],{key:"##table-empty##"},u["default"].createElement("td",{colSpan:this.props.columns.length+(r?1:0),style:{textAlign:"center"}},this.props.noDataText||d["default"].NO_DATA_TEXT))),this.editing=!1;var i=this.calculateContainerHeight().toString();return u["default"].createElement("div",{ref:"container",className:e,style:{height:i}},u["default"].createElement("table",{ref:"body",className:t},n,u["default"].createElement("tbody",null,o)))}},{key:"renderTableHeader",value:function(e){var t=null;if(e){var r={width:35,minWidth:35};t=this.props.selectRow.hideSelectColumn?null:u["default"].createElement("th",{style:r,key:-1})}var n=this.props.columns.map(function(e,t){var r=null==e.width?e.width:parseInt(e.width),n={display:e.hidden?"none":null,width:r,maxWidth:r},o=e.sort?f["default"].renderReactSortCaret(d["default"].SORT_DESC):null;return u["default"].createElement("th",{style:n,key:t,className:e.className},e.text,o)});return u["default"].createElement("thead",{ref:"header"},u["default"].createElement("tr",null,t,n))}},{key:"handleRowClick",value:function(e){var t,r;this.props.data.forEach(function(n,o){o==e-1&&(t=n[this.props.keyField],r=n)},this),this.props.onRowClick(r)}},{key:"handleSelectRow",value:function(e,t){var r,n;this.props.data.forEach(function(t,o){o==e-1&&(r=t[this.props.keyField],n=t)},this),this.props.onSelectRow(n,t)}},{key:"handleSelectRowColumChange",value:function(e){this.props.selectRow.clickToSelect&&this.props.selectRow.clickToSelectAndEditCell||this.handleSelectRow(e.currentTarget.parentElement.parentElement.rowIndex,e.currentTarget.checked)}},{key:"handleEditCell",value:function(e,t){this.editing=!0,this._isSelectRowDefined()&&(t--,this.props.selectRow.hideSelectColumn&&t++),e--;var r={currEditCell:{rid:e,cid:t}};if(this.props.selectRow.clickToSelectAndEditCell){var n=-1!=this.props.selectedRowKeys.indexOf(this.props.data[e][this.props.keyField]);this.handleSelectRow(e+1,!n)}this.setState(r)}},{key:"cancelEdit",value:function(){var e=this.state.currEditCell;e&&this.handleCompleteEditCell(null,e.rid,e.cid)}},{key:"handleCompleteEditCell",value:function(e,t,r){this.setState({currEditCell:null}),null!=e&&this.props.cellEdit.__onCompleteEdit__(e,t,r)}},{key:"renderSelectRowColumn",value:function(e){return this.props.selectRow.mode==d["default"].ROW_SELECT_SINGLE?u["default"].createElement(m["default"],null,u["default"].createElement("input",{type:"radio",name:"selection",checked:e,onChange:this.handleSelectRowColumChange.bind(this)})):u["default"].createElement(m["default"],null,u["default"].createElement("input",{type:"checkbox",checked:e,onChange:this.handleSelectRowColumChange.bind(this)}))}},{key:"getBodyHeaderDomProp",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=[],r=0;r<e.length;r++)t.push({width:e[r].offsetWidth});return t}},{key:"adjustBody",value:function(){this.hardFixHeaderWidth(),this.props.condensed&&(this.refs.body.style.marginTop="-36px"),this.props.maxHeight&&parseInt(this.props.maxHeight)<this.refs.container.offsetHeight&&(this.refs.container.style.height=this.props.maxHeight-42+"px")}},{key:"hardFixHeaderWidth",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=0;t<e.length;t++)e[t].style.width=e[t].offsetWidth+"px"}},{key:"calculateContainerHeight",value:function(){return"100%"==this.props.height?this.props.height:parseInt(this.props.height)-42}},{key:"_isSelectRowDefined",value:function(){return this.props.selectRow.mode==d["default"].ROW_SELECT_SINGLE||this.props.selectRow.mode==d["default"].ROW_SELECT_MULTI}}]),t}(u["default"].Component);P.propTypes={height:u["default"].PropTypes.string,data:u["default"].PropTypes.array,columns:u["default"].PropTypes.array,striped:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,hover:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,keyField:u["default"].PropTypes.string,selectedRowKeys:u["default"].PropTypes.array,onRowClick:u["default"].PropTypes.func,onSelectRow:u["default"].PropTypes.func,noDataText:u["default"].PropTypes.string},t["default"]=P,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(2),c=n(u),d=r(4),p=(n(d),function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"rowClick",value:function(e){"INPUT"!==e.target.tagName&&(this.props.selectRow&&this.props.selectRow.clickToSelect&&this.props.onSelectRow(e.currentTarget.rowIndex,!this.props.isSelected),this.props.onRowClick&&this.props.onRowClick(e.currentTarget.rowIndex))}},{key:"render",value:function(){var e={style:{backgroundColor:this.props.isSelected?this.props.selectRow.bgColor:null},className:(this.props.isSelected&&this.props.selectRow.className?this.props.selectRow.className:"")+(this.props.className||"")};return this.props.selectRow&&!this.props.enableCellEdit&&(this.props.selectRow.clickToSelect||this.props.selectRow.clickToSelectAndEditCell)||this.props.onRowClick?c["default"].createElement("tr",a({},e,{onClick:this.rowClick.bind(this)}),this.props.children):c["default"].createElement("tr",e,this.props.children)}}]),t}(c["default"].Component));p.propTypes={isSelected:c["default"].PropTypes.bool,enableCellEdit:c["default"].PropTypes.bool,onRowClick:c["default"].PropTypes.func,onSelectRow:c["default"].PropTypes.func},p.defaultProps={onRowClick:void 0},t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(2),c=n(u),d=r(4),p=n(d),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),s(t,[{key:"handleCellEdit",value:function(e){if(this.props.cellEdit.mode==p["default"].CELL_EDIT_DBCLICK)if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();t.removeAllRanges()}this.props.onEdit(e.currentTarget.parentElement.rowIndex,e.currentTarget.cellIndex)}},{key:"render",value:function(){var e=null==this.props.width?this.props.width:parseInt(this.props.width),t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.className;this.props.width&&(r+=" col-md-"+e);var n={};return this.props.cellEdit&&(this.props.cellEdit.mode==p["default"].CELL_EDIT_CLICK?n.onClick=this.handleCellEdit.bind(this):this.props.cellEdit.mode==p["default"].CELL_EDIT_DBCLICK&&(n.onDoubleClick=this.handleCellEdit.bind(this))),c["default"].createElement("td",a({style:t,className:r},n),this.props.children)}}]),t}(c["default"].Component);f.propTypes={dataAlign:c["default"].PropTypes.string,hidden:c["default"].PropTypes.bool,className:c["default"].PropTypes.string},f.defaultProps={dataAlign:"left",hidden:!1,className:""},t["default"]=f,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=(n(c),r(13)),p=n(d),f=r(14),h=n(f),v=r(3),y=n(v),m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.timeouteClear=0,this.state={shakeEditor:!1}}return i(t,e),a(t,[{key:"handleKeyPress",value:function(e){if(13==e.keyCode){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}else 27==e.keyCode&&this.props.completeEdit(null,this.props.rowIndex,this.props.colIndex)}},{key:"handleBlur",value:function(e){if(this.props.blurToSave){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}}},{key:"validator",value:function(e){var t=this;if(t.props.editable.validator){var r=t.props.editable.validator(e);if(r!==!0){t.refs.notifier.notice("error",r,"Pressed ESC can cancel");var n=t.refs.inputRef;return t.clearTimeout(),t.setState({shakeEditor:!0}),t.timeouteClear=setTimeout(function(){t.setState({shakeEditor:!1})},300),n.focus(),!1}}return!0}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){0!=this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"componentDidMount",value:function(){var e=this.refs.inputRef;e.focus()}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var e=this.props.editable,t=this.props.format,r={ref:"inputRef",onKeyDown:this.handleKeyPress.bind(this),onBlur:this.handleBlur.bind(this)};e.placeholder&&(r.placeholder=e.placeholder);var n=(0,y["default"])({animated:this.state.shakeEditor,shake:this.state.shakeEditor});return u["default"].createElement("td",{ref:"td",style:{position:"relative"}},(0,p["default"])(e,r,t,n,this.props.children||""),u["default"].createElement(h["default"],{ref:"notifier"}))}},{key:"_getCheckBoxValue",value:function(e){var t="",r=e.currentTarget.value.split(":");return t=e.currentTarget.checked?r[0]:r[1]}}]),t}(u["default"].Component);m.propTypes={completeEdit:u["default"].PropTypes.func,rowIndex:u["default"].PropTypes.number,colIndex:u["default"].PropTypes.number,blurToSave:u["default"].PropTypes.bool},t["default"]=m,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(2),a=n(i),s=function(e,t,r,n,i){if(e===!0||"string"==typeof e){var s=e===!0?"text":e;return a["default"].createElement("input",o({},t,{type:s,defaultValue:i,className:(n||"")+" form-control editor edit-text"}))}if(!e){var s=e===!0?"text":e;return a["default"].createElement("input",o({},t,{type:s,defaultValue:i,disabled:"disabled",className:(n||"")+" form-control editor edit-text"}))}if(e.type){if(e.style&&(t.style=e.style),t.className=(n||"")+" form-control editor edit-"+e.type+(e.className?" "+e.className:""),"select"===e.type){var l=[],u=e.options.values;if(Array.isArray(u)){var c;l=u.map(function(e,t){return c=r?r(e):e,a["default"].createElement("option",{key:"option"+t,value:e},c)})}return a["default"].createElement("select",o({},t,{defaultValue:i}),l)}if("textarea"===e.type){e.cols&&(t.cols=e.cols),e.rows&&(t.rows=e.rows);var d=t.onKeyDown,p=null;return d&&(t.onKeyDown=function(e){13!=e.keyCode&&d(e)},p=a["default"].createElement("butto",{className:"btn btn-info btn-xs textarea-save-btn",onClick:d},"save")),a["default"].createElement("div",null,a["default"].createElement("textarea",o({},t,{defaultValue:i})),p)}if("checkbox"===e.type){var f="true:false";e.options&&e.options.values&&(f=e.options.values),t.className=t.className.replace("form-control",""),t.className+=" checkbox pull-right";var h=i&&i.toString()==f.split(":")[0]?!0:!1;return a["default"].createElement("input",o({},t,{type:"checkbox",value:f,defaultChecked:h}))}return a["default"].createElement("input",o({},t,{type:s,defaultValue:i}))}return a["default"].createElement("input",o({},t,{type:"text",className:(n||"")+" form-control editor edit-text"}))};t["default"]=s,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=(n(c),r(15)),p=n(d),f=p["default"].ToastContainer,h=u["default"].createFactory(p["default"].ToastMessage.animation),v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"notice",value:function(e,t,r){this.refs.toastr[e](t,r,{mode:"single",timeOut:5e3,extendedTimeOut:1e3,showAnimation:"animated  bounceIn",hideAnimation:"animated bounceOut"})}},{key:"render",value:function(){return u["default"].createElement(f,{ref:"toastr",toastMessageFactory:h,id:"toast-container",className:"toast-top-right"})}}]),t}(u["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,r){"use strict";t.ToastContainer=r(16),t.ToastMessage=r(23)},function(e,t,r){"use strict";function n(){}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(2),a=r(17),s=i.createFactory(r(23));e.exports=i.createClass({displayName:"ToastContainer",error:function(e,t,r){this._notify(this.props.toastType.error,e,t,r)},info:function(e,t,r){this._notify(this.props.toastType.info,e,t,r)},success:function(e,t,r){this._notify(this.props.toastType.success,e,t,r)},warning:function(e,t,r){this._notify(this.props.toastType.warning,e,t,r)},clear:function(){var e,t=this.refs;for(e in t)t[e].hideToast(!1)},getDefaultProps:function(){return{toastType:{error:"error",info:"info",success:"success",warning:"warning"},id:"toast-container",toastMessageFactory:s,preventDuplicates:!1,newestOnTop:!0,onClick:n}},getInitialState:function(){return{toasts:[],toastId:0,previousMessage:null}},render:function(){return this._render(this.props,this.state)},_notify:function(e,t,r){var n=this,o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],i=this.props,s=this.state;if(!i.preventDuplicates||s.previousMessage!==t){var l=s.toastId++,u=l,c=a(o,{$merge:{type:e,title:r,message:t,toastId:u,key:l,ref:"toasts__"+l,handleOnClick:function(e){return"function"==typeof o.handleOnClick&&o.handleOnClick(),n._handle_toast_on_click(e)},handleRemove:this._handle_toast_remove}}),d={};d[""+(i.newestOnTop?"$unshift":"$push")]=[c];var p=a(s,{toasts:d,previousMessage:{$set:t}});this.setState(p)}},_handle_toast_on_click:function(e){this.props.onClick(e),e.defaultPrevented||(e.preventDefault(),e.stopPropagation())},_handle_toast_remove:function(e){var t=this,r=this.state;r.toasts[""+(this.props.newestOnTop?"reduceRight":"reduce")](function(n,o,i){return n||o.toastId!==e?!1:(t.setState(a(r,{toasts:{$splice:[[i,1]]}})),!0)},!1)},_render:function(e,t){return i.createElement("div",o({},e,{"aria-live":"polite",role:"alert"}),t.toasts.map(function(t){return e.toastMessageFactory(t)}))}})},function(e,t,r){e.exports=r(18)},function(e,t,r){(function(t){"use strict";function n(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?a(new e.constructor,e):e}function o(e,r,n){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected target of %s to be an array; got %s.",n,e):l(!1);var o=r[n];Array.isArray(o)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,o):l(!1)}function i(e,r){if("object"!=typeof r?"production"!==t.env.NODE_ENV?l(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",y.join(", "),f):l(!1):void 0,u.call(r,f))return 1!==Object.keys(r).length?"production"!==t.env.NODE_ENV?l(!1,"Cannot have more than one key in an object with %s",f):l(!1):void 0,r[f];var s=n(e);if(u.call(r,h)){var g=r[h];g&&"object"==typeof g?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): %s expects a spec of type 'object'; got %s",h,g):l(!1),s&&"object"==typeof s?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): %s expects a target of type 'object'; got %s",h,s):l(!1),
a(s,r[h])}u.call(r,c)&&(o(e,r,c),r[c].forEach(function(e){s.push(e)})),u.call(r,d)&&(o(e,r,d),r[d].forEach(function(e){s.unshift(e)})),u.call(r,p)&&(Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"Expected %s target to be an array; got %s",p,e):l(!1),Array.isArray(r[p])?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,r[p]):l(!1),r[p].forEach(function(e){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,r[p]):l(!1),s.splice.apply(s,e)})),u.call(r,v)&&("function"!=typeof r[v]?"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be a function; got %s.",v,r[v]):l(!1):void 0,s=r[v](s));for(var b in r)m.hasOwnProperty(b)&&m[b]||(s[b]=i(e[b],r[b]));return s}var a=r(20),s=r(21),l=r(22),u={}.hasOwnProperty,c=s({$push:null}),d=s({$unshift:null}),p=s({$splice:null}),f=s({$set:null}),h=s({$merge:null}),v=s({$apply:null}),y=[c,d,p,f,h,v],m={};y.forEach(function(e){m[e]=!0}),e.exports=i}).call(t,r(19))},function(e,t){function r(){u=!1,a.length?l=a.concat(l):c=-1,l.length&&n()}function n(){if(!u){var e=setTimeout(r);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s=e.exports={},l=[],u=!1,c=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new o(e,t)),1!==l.length||u||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var r=Object(e),n=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i){var a=Object(i);for(var s in a)n.call(a,s)&&(r[s]=a[s])}}return r}e.exports=r},function(e,t){"use strict";var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=r},function(e,t,r){(function(t){"use strict";function r(e,r,n,o,i,a,s,l){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,a,s,l],d=0;u=new Error(r.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r}).call(t,r(19))},function(e,t,r){"use strict";function n(){}var o=r(2),i=r(17),a=r(3),s={displayName:"ToastMessage",getDefaultProps:function(){var e={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"};return{className:"toast",iconClassNames:e,titleClassName:"toast-title",messageClassName:"toast-message",tapToDismiss:!0,closeButton:!1}},handleOnClick:function(e){var t=this.props;t.handleOnClick(e),t.tapToDismiss&&this.hideToast(!0)},_handle_close_button_click:function(e){e.stopPropagation(),this.hideToast(!0)},_handle_remove:function(){var e=this.props;e.handleRemove(e.toastId)},_render_close_button:function(e){return e.closeButton?o.createElement("button",{className:"toast-close-button",role:"button",onClick:this._handle_close_button_click,dangerouslySetInnerHTML:{__html:"&times;"}}):!1},_render_title_element:function(e){return e.title?o.createElement("div",{className:e.titleClassName},e.title):!1},_render_message_element:function(e){return e.message?o.createElement("div",{className:e.messageClassName},e.message):!1},render:function(){var e=this.props,t=e.iconClassName||e.iconClassNames[e.type],r={};return r[e.className]=!0,r[t]=!0,o.createElement("div",{className:a(r),style:e.style||{},onClick:this.handleOnClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this._render_close_button(e),this._render_title_element(e),this._render_message_element(e))}},l=o.createClass(i(s,{displayName:{$set:"ToastMessage.animation"},mixins:{$set:[r(24)]}})),u=o.createClass(i(s,{displayName:{$set:"ToastMessage.jQuery"},mixins:{$set:[r(29)]}}));s.handleMouseEnter=n,s.handleMouseLeave=n,s.hideToast=n;var c=e.exports=o.createClass(s);c.animation=l,c.jQuery=u},function(e,t,r){"use strict";var n=r(25),o=r(27),i=r(6),a=17,s=Object.prototype.toString;e.exports={getDefaultProps:function(){return{transition:null,showAnimation:"animated bounceIn",hideAnimation:"animated bounceOut",timeOut:5e3,extendedTimeOut:1e3}},componentWillMount:function(){this.classNameQueue=[],this.isHiding=!1,this.intervalId=null},componentDidMount:function(){var e=this,t=this.props;this._show(t);var r=function a(){e.isHiding&&(e._set_is_hiding(!1),o.removeEndEventListener(n,a),e._handle_remove())},n=i.findDOMNode(this);o.addEndEventListener(n,r),0<t.timeOut&&this._set_interval_id(setTimeout(this.hideToast,t.timeOut))},componentWillUnmount:function(){this.intervalId&&clearTimeout(this.intervalId)},_set_transition:function(e){var t=e?"leave":"enter",r=i.findDOMNode(this),a=this.props.transition+"-"+t,s=a+"-active",l=function u(e){e&&e.target!==r||(n.removeClass(r,a),n.removeClass(r,s),o.removeEndEventListener(r,u))};o.addEndEventListener(r,l),n.addClass(r,a),this._queue_class(s)},_clear_transition:function(e){var t=i.findDOMNode(this),r=e?"leave":"enter",o=this.props.transition+"-"+r,a=o+"-active";n.removeClass(t,o),n.removeClass(t,a)},_set_animation:function(e){var t=i.findDOMNode(this),r=this._get_animation_classes(e),a=function s(e){e&&e.target!==t||(r.forEach(function(e){n.removeClass(t,e)}),o.removeEndEventListener(t,s))};o.addEndEventListener(t,a),r.forEach(function(e){n.addClass(t,e)})},_get_animation_classes:function(e){var t=this.props,r=e?t.hideAnimation:t.showAnimation;return"[object Array]"===s.call(r)?r:"string"==typeof r?r.split(" "):void 0},_clear_animation:function(e){var t=this,r=this._get_animation_classes(e);r.forEach(function(e){n.removeClass(i.findDOMNode(t),e)})},_queue_class:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this._flush_class_name_queue,a))},_flush_class_name_queue:function(){this.isMounted()&&this.classNameQueue.forEach(n.addClass.bind(n,i.findDOMNode(this))),this.classNameQueue.length=0,this.timeout=null},_show:function(){var e=this.props;e.transition?this._set_transition():e.showAnimation&&this._set_animation()},handleMouseEnter:function(){if(clearTimeout(this.intervalId),this._set_interval_id(null),this.isHiding){this._set_is_hiding(!1);var e=this.props;e.hideAnimation?this._clear_animation(!0):e.transition&&this._clear_transition(!0)}},handleMouseLeave:function(){var e=this.props;!this.isHiding&&(0<e.timeOut||0<e.extendedTimeOut)&&this._set_interval_id(setTimeout(this.hideToast,e.extendedTimeOut))},hideToast:function(e){var t=this.props;this.isHiding||null==this.intervalId&&!e||(this._set_is_hiding(!0),t.transition?this._set_transition(!0):t.hideAnimation?this._set_animation(!0):this._handle_remove())},_set_interval_id:function(e){this.intervalId=e},_set_is_hiding:function(e){this.isHiding=e}}},function(e,t,r){(function(t){"use strict";var n=r(26),o={addClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',r):n(!1):void 0,r&&(e.classList?e.classList.add(r):o.hasClass(e,r)||(e.className=e.className+" "+r)),e},removeClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',r):n(!1):void 0,r&&(e.classList?e.classList.remove(r):o.hasClass(e,r)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,r){return(r?o.addClass:o.removeClass)(e,t)},hasClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,"CSS.hasClass takes only a single class name."):n(!1):void 0,e.classList?!!r&&e.classList.contains(r):(" "+e.className+" ").indexOf(" "+r+" ")>-1}};e.exports=o}).call(t,r(19))},function(e,t,r){(function(t){"use strict";function r(e,r,n,o,i,a,s,l){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,a,s,l],d=0;u=new Error(r.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r}).call(t,r(19))},function(e,t,r){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition;for(var r in s){var n=s[r];for(var o in n)if(o in t){l.push(n[o]);break}}}function o(e,t,r){e.addEventListener(t,r,!1)}function i(e,t,r){e.removeEventListener(t,r,!1)}var a=r(28),s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},l=[];a.canUseDOM&&n();var u={addEndEventListener:function(e,t){return 0===l.length?void window.setTimeout(t,0):void l.forEach(function(r){o(e,r,t)})},removeEndEventListener:function(e,t){0!==l.length&&l.forEach(function(r){i(e,r,t)})}};e.exports=u},function(e,t){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e[t.showMethod]({duration:t.showDuration,easing:t.showEasing})}var i=r(6),a=n(i);e.exports={getDefaultProps:function(){return{style:{display:"none"},showMethod:"fadeIn",showDuration:300,showEasing:"swing",hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",timeOut:5e3,extendedTimeOut:1e3}},getInitialState:function(){return{intervalId:null,isHiding:!1}},componentDidMount:function(){var e=this.props;o(this._get_$_node(),e),0<e.timeOut&&this._set_interval_id(setTimeout(this.hideToast,e.timeOut))},handleMouseEnter:function(){clearTimeout(this.state.intervalId),this._set_interval_id(null),this._set_is_hiding(!1),o(this._get_$_node().stop(!0,!0),this.props)},handleMouseLeave:function(){var e=this.props;!this.state.isHiding&&(0<e.timeOut||0<e.extendedTimeOut)&&this._set_interval_id(setTimeout(this.hideToast,e.extendedTimeOut))},hideToast:function(e){var t=this.state,r=this.props;t.isHiding||null==t.intervalId&&!e||(this.setState({isHiding:!0}),this._get_$_node()[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:this._handle_remove}))},_get_$_node:function(){return jQuery(a["default"].findDOMNode(this))},_set_interval_id:function(e){this.setState({intervalId:e})},_set_is_hiding:function(e){this.setState({isHiding:e})}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(31),d=n(c),p=r(4),f=n(p),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currPage,sizePerPage:this.props.sizePerPage}}return i(t,e),a(t,[{key:"changePage",value:function(e){e=e==f["default"].PRE_PAGE?this.state.currentPage-1<1?1:this.state.currentPage-1:e==f["default"].NEXT_PAGE?this.state.currentPage+1>this.totalPages?this.totalPages:this.state.currentPage+1:e==f["default"].LAST_PAGE?this.totalPages:e==f["default"].FIRST_PAGE?1:parseInt(e),e!=this.state.currentPage&&(this.setState({currentPage:e}),this.props.changePage(e,this.state.sizePerPage))}},{key:"componentWillReceiveProps",value:function(e){this.props.remote&&(e.currPage||e.sizePerPage)&&this.setState({currentPage:e.currPage,sizePerPage:e.sizePerPage})}},{key:"changeSizePerPage",value:function(e){e.preventDefault();var t=parseInt(e.currentTarget.text);t!=this.state.sizePerPage&&(this.totalPages=Math.ceil(this.props.dataSize/t),this.state.currentPage>this.totalPages&&(this.state.currentPage=this.totalPages),this.setState({sizePerPage:t,currentPage:this.state.currentPage}),this.props.changePage(this.state.currentPage,t),this.props.onSizePerPageList&&this.props.onSizePerPageList(t))}},{key:"render",value:function(){var e=this;this.totalPages=Math.ceil(this.props.dataSize/this.state.sizePerPage);var t=this.makePage(),r={"float":"right",marginTop:"0px"},n=this.props.sizePerPageList.map(function(t){return u["default"].createElement("li",{key:t,role:"presentation"},u["default"].createElement("a",{role:"menuitem",tabIndex:"-1",href:"#",onClick:e.changeSizePerPage.bind(e)},t))});return u["default"].createElement("div",{className:"row",style:{marginTop:15}},u["default"].createElement("div",{className:"col-md-6"},this.props.sizePerPageList.length>1?u["default"].createElement("div",{className:"dropdown"},u["default"].createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:"pageDropDown","data-toggle":"dropdown","aria-expanded":"true"},this.state.sizePerPage,u["default"].createElement("span",null," ",u["default"].createElement("span",{className:"caret"}))),u["default"].createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"pageDropDown"},n)):""),u["default"].createElement("div",{className:"col-md-6"},u["default"].createElement("ul",{className:"pagination",style:r},t)))}},{key:"makePage",value:function(){var e=this.getPages();return e.map(function(e){var t=e===this.state.currentPage,r=!1;return 1!=this.state.currentPage||e!==f["default"].FIRST_PAGE&&e!==f["default"].PRE_PAGE||(r=!0),this.state.currentPage!=this.totalPages||e!==f["default"].NEXT_PAGE&&e!==f["default"].LAST_PAGE||(r=!0),u["default"].createElement(d["default"],{changePage:this.changePage.bind(this),active:t,disable:r,key:e},e)},this)}},{key:"getPages",value:function(){var e=1,t=this.totalPages;e=Math.max(this.state.currentPage-Math.floor(this.props.paginationSize/2),1),t=e+this.props.paginationSize-1,t>this.totalPages&&(t=this.totalPages,e=t-this.props.paginationSize+1);for(var r=[f["default"].FIRST_PAGE,f["default"].PRE_PAGE],n=e;t>=n;n++)n>0&&r.push(n);return r.push(f["default"].NEXT_PAGE),r.push(f["default"].LAST_PAGE),r}},{key:"getCurrentPage",value:function(){return this.state.currentPage}},{key:"getSizePerPage",value:function(){return this.state.sizePerPage}}]),t}(u["default"].Component);h.propTypes={currPage:u["default"].PropTypes.number,sizePerPage:u["default"].PropTypes.number,dataSize:u["default"].PropTypes.number,changePage:u["default"].PropTypes.func,sizePerPageList:u["default"].PropTypes.array,paginationSize:u["default"].PropTypes.number,remote:u["default"].PropTypes.bool,onSizePerPageList:u["default"].PropTypes.func},h.defaultProps={sizePerPage:f["default"].SIZE_PER_PAGE},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),a(t,[{key:"pageBtnClick",value:function(e){e.preventDefault(),this.props.changePage(e.currentTarget.text)}},{key:"render",value:function(){var e=(0,d["default"])({active:this.props.active,disabled:this.props.disable});return u["default"].createElement("li",{className:e},u["default"].createElement("a",{href:"#",onClick:this.pageBtnClick.bind(this)},this.props.children))}}]),t}(u["default"].Component);p.propTypes={changePage:u["default"].PropTypes.func,active:u["default"].PropTypes.bool,disable:u["default"].PropTypes.bool},t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=r(4),f=(n(p),r(13)),h=n(f),v=r(14),y=n(v),m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.timeouteClear=0,this.state={isInsertRowTrigger:!0,validateState:null,shakeEditor:!1}}return i(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"checkAndParseForm",value:function(){var e,t,r=this,n={},o=!0,i={};return this.props.columns.forEach(function(r,a){if(r.autoValue)e="function"==typeof r.autoValue?r.autoValue():"autovalue-"+(new Date).getTime();else{var s=this.refs[r.field+a];if(e=s.value,r.editable&&"checkbox"==r.editable.type){var l=s.value.split(":");e=s.checked?l[0]:l[1]}r.editable&&r.editable.validator&&(t=r.editable.validator(e),t!==!0&&(o=!1,i[r.field]=t))}n[r.field]=e},this),o?n:(r.clearTimeout(),this.setState({validateState:i,shakeEditor:!0}),r.refs.notifier.notice("error","Form validate errors, please checking!","Pressed ESC can cancel"),r.timeouteClear=setTimeout(function(){r.setState({shakeEditor:!1})},300),null)}},{key:"handleSaveBtnClick",value:function(e){var t=this.checkAndParseForm();if(t){var r=this.props.onAddRow(t);if(r){var n=this;n.refs.notifier.notice("error",r,"Pressed ESC can cancel"),n.clearTimeout(),n.setState({shakeEditor:!0,validateState:"this is hack for prevent bootstrap modal hide"}),n.timeouteClear=setTimeout(function(){n.setState({shakeEditor:!1})},300)}else this.setState({validateState:null,shakeEditor:!1}),this.refs.form.reset()}}},{key:"handleDropRowBtnClick",value:function(e){this.props.onDropRow()}},{key:"handleCloseBtn",value:function(e){this.refs.warning.style.display="none"}},{key:"handleKeyUp",value:function(e){this.props.onSearch(e.currentTarget.value)}},{key:"handleExportCSV",value:function(){this.props.onExportCSV()}},{key:"render",value:function(){var e="bs-table-modal-sm"+(new Date).getTime(),t=this.props.enableInsert?u["default"].createElement("button",{type:"button",onClick:this.props.onAddRowBegin,className:"btn btn-info","data-toggle":"modal","data-target":"."+e},u["default"].createElement("i",{className:"glyphicon glyphicon-plus"})," New"):null,r=this.props.enableDelete?u["default"].createElement("button",{type:"button",className:"btn btn-warning","data-toggle":"tooltip","data-placement":"right",title:"Drop selected row",onClick:this.handleDropRowBtnClick.bind(this)},u["default"].createElement("i",{className:"glyphicon glyphicon-trash"})," Delete"):null,n=this.props.enableSearch?u["default"].createElement("div",{className:"form-group form-group-sm"},u["default"].createElement("input",{className:"form-control",type:"text",placeholder:this.props.searchPlaceholder?this.props.searchPlaceholder:"Search",onKeyUp:this.handleKeyUp.bind(this)})):null,o=this.props.enableInsert?this.renderInsertRowModal(e):null,i=this.props.enableExportCSV?u["default"].createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleExportCSV.bind(this)},u["default"].createElement("i",{className:"glyphicon glyphicon-export"})," Export to CSV"):null;return u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-xs-9"},u["default"].createElement("div",{className:"btn-group btn-group-sm",role:"group"},i,t,r)),u["default"].createElement("div",{className:"col-xs-3"},n),u["default"].createElement(y["default"],{ref:"notifier"}),o)}},{key:"renderInsertRowModal",value:function(e){var t=this.state.validateState||{},r=this.props.columns.map(function(e,r){var n=e.editable,o=e.format,i={ref:e.field+r,placeholder:n.placeholder?n.placeholder:e.name};if(e.autoValue)return null;var a=t[e.field]?u["default"].createElement("span",{className:"help-block bg-danger"},t[e.field]):null;return u["default"].createElement("div",{className:"form-group",key:e.field},u["default"].createElement("label",null,e.name),(0,h["default"])(n,i,o,""),a)}),n=(0,d["default"])("modal","fade",e,{"in":this.state.shakeEditor||this.state.validateState}),o=(0,d["default"])("modal-dialog","modal-sm",{animated:this.state.shakeEditor,shake:this.state.shakeEditor});return u["default"].createElement("div",{ref:"modal",className:n,tabIndex:"-1",role:"dialog"},u["default"].createElement("div",{className:o},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},"New Record")),u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("form",{ref:"form"},r)),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),u["default"].createElement("button",{type:"button",className:"btn btn-info",onClick:this.handleSaveBtnClick.bind(this)},"Save")))))}}]),t}(u["default"].Component);m.propTypes={onAddRow:u["default"].PropTypes.func,onDropRow:u["default"].PropTypes.func,enableInsert:u["default"].PropTypes.bool,enableDelete:u["default"].PropTypes.bool,enableSearch:u["default"].PropTypes.bool,columns:u["default"].PropTypes.array,searchPlaceholder:u["default"].PropTypes.string},m.defaultProps={enableInsert:!1,enableDelete:!1,enableSearch:!1},t["default"]=m,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=n(c),p=r(3),f=n(p),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filterObj={}}return i(t,e),a(t,[{key:"handleKeyUp",value:function(e){""===e.currentTarget.value.trim()?delete this.filterObj[e.currentTarget.name]:this.filterObj[e.currentTarget.name]=e.currentTarget.value,this.props.onFilter(this.filterObj)}},{key:"render",value:function(){var e=(0,f["default"])("table",{"table-striped":this.props.striped,"table-condensed":this.props.condensed}),t=null;if(this.props.rowSelectType==d["default"].ROW_SELECT_SINGLE||this.props.rowSelectType==d["default"].ROW_SELECT_MULTI){var r={width:35,paddingLeft:0,paddingRight:0};t=u["default"].createElement("th",{style:r,key:-1},"Filter")}var n=this.props.columns.map(function(e){var t={display:e.hidden?"none":null,width:e.width};return u["default"].createElement("th",{key:e.name,style:t},u["default"].createElement("div",{className:"th-inner table-header-column"},u["default"].createElement("input",{size:"10",type:"text",placeholder:e.name,name:e.name,onKeyUp:this.handleKeyUp.bind(this)})))},this);return u["default"].createElement("table",{className:e,style:{marginTop:5}},u["default"].createElement("thead",null,u["default"].createElement("tr",{style:{borderBottomStyle:"hidden"}},t,n)))}}]),t}(u["default"].Component);h.propTypes={columns:u["default"].PropTypes.array,rowSelectType:u["default"].PropTypes.string,onFilter:u["default"].PropTypes.func},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,n){return r=r.toLowerCase(),e.sort(function(e,o){return n?n(e,o,r):r==c["default"].SORT_DESC?e[t]>o[t]?-1:e[t]<o[t]?1:0:e[t]<o[t]?-1:e[t]>o[t]?1:0}),e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(4),c=n(u),d=r(35).EventEmitter,p=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.data=e}return i(t,e),s(t,[{key:"setData",value:function(e){this.emit("change",e)}},{key:"clear",value:function(){this.data=null}},{key:"getData",value:function(){return this.data}}]),t}(d);t.TableDataSet=p;var f=function(){function e(t){o(this,e),this.data=t,this.customSortFuncMap=null,this.filteredData=null,this.isOnFilter=!1,this.filterObj=null,this.searchText=null,this.sortObj=null,this.pageObj={},this.selected=[],this.multiColumnSearch=!1,this.remote=!1}return s(e,[{key:"setProps",value:function(e){this.keyField=e.keyField,this.enablePagination=e.isPagination,this.customSortFuncMap=e.customSortFuncMap,this.remote=e.remote,this.multiColumnSearch=e.multiColumnSearch}},{key:"setData",value:function(e){this.data=e,this.isOnFilter&&(null!==this.filterObj&&this.filter(this.filterObj),null!==this.searchText&&this.search(this.searchText)),this.sortObj&&this.sort(this.sortObj.order,this.sortObj.sortField)}},{key:"setSelectedRowKey",value:function(e){this.selected=e}},{key:"getSelectedRowKeys",value:function(){return this.selected}},{key:"getCurrentDisplayData",value:function(){return this.isOnFilter?this.filteredData:this.data}},{key:"sort",value:function(e,t){this.sortObj={order:e,sortField:t};var r=this.getCurrentDisplayData(),n=this.customSortFuncMap[t];return r=a(r,t,e,n),this}},{key:"page",value:function(e,t){return this.pageObj.end=e*t-1,this.pageObj.start=this.pageObj.end-(t-1),this}},{key:"edit",value:function(e,t,r){var n=this.getCurrentDisplayData(),o=void 0;return this.enablePagination?(n[this.pageObj.start+t][r]=e,o=n[this.pageObj.start+t][this.keyField]):(n[t][r]=e,o=n[t][this.keyField]),this.isOnFilter&&this.data.forEach(function(t){t[this.keyField]===o&&(t[r]=e)},this),this}},{key:"add",value:function(e){if(!e[this.keyField]||""===e[this.keyField].toString())throw this.keyField+" can't be empty value.";var t=this.getCurrentDisplayData();t.forEach(function(t){if(t[this.keyField].toString()===e[this.keyField].toString())throw this.keyField+" "+e[this.keyField]+" already exists"},this),t.push(e),this.isOnFilter&&this.data.push(e)}},{key:"remove",value:function(e){var t=this.getCurrentDisplayData(),r=t.filter(function(t){return-1==e.indexOf(t[this.keyField])},this);this.isOnFilter?(this.data=this.data.filter(function(t){return-1==e.indexOf(t[this.keyField])},this),this.filteredData=r):this.data=r}},{key:"filter",value:function(e){0==Object.keys(e).length?(this.filteredData=null,this.isOnFilter=!1,this.filterObj=null):(this.filterObj=e,this.filteredData=this.data.filter(function(t){var r=!0;for(var n in e)if(-1==t[n].toString().toLowerCase().indexOf(e[n].toLowerCase())){r=!1;break}return r}),this.isOnFilter=!0);
}},{key:"search",value:function(e){if(""===e.trim())this.filteredData=null,this.isOnFilter=!1,this.searchText=null;else{this.searchText=e;var t=[];this.filteredData=this.data.filter(function(r){var n=!1;this.multiColumnSearch?t=e.split(" "):t.push(e);for(var o in r)if(r[o]&&(t.forEach(function(e){-1!==r[o].toString().toLowerCase().indexOf(e.toLowerCase())&&(n=!0)}),n))break;return n},this),this.isOnFilter=!0}}},{key:"getDataIgnoringPagination",value:function(){var e=this.getCurrentDisplayData();return e}},{key:"get",value:function(){var e=this.getCurrentDisplayData();if(0==e.length)return e;if(this.remote||!this.enablePagination)return e;for(var t=[],r=this.pageObj.start;r<=this.pageObj.end&&(t.push(e[r]),r+1!=e.length);r++);return t}},{key:"getKeyField",value:function(){return this.keyField}},{key:"getDataNum",value:function(){return this.getCurrentDisplayData().length}},{key:"isChangedPage",value:function(){return this.pageObj.start&&this.pageObj.end?!0:!1}},{key:"getAllRowkey",value:function(){return this.data.map(function(e){return e[this.keyField]},this)}}]),e}();t.TableDataStore=f},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),o=u.length,l=0;o>l;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function n(e,t){var r="";return 0===e.length?r:(r+=t.join(",")+"\n",e.map(function(e){t.map(function(t){var n=e[t]?'"'+e[t]+'"':"";r+=n+","}),r+="\n"}),r)}if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof window)var o=r(37),i=o.saveAs;var a=function(e,t,r){var o=n(e,t);"undefined"!=typeof window&&i(new Blob([o],{type:"text/plain;charset=utf-8"}),r||"spreadsheet.csv")};t["default"]=a,e.exports=t["default"]},function(e,t,r){var n,o,i=i||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=e.webkitRequestFileSystem,l=e.requestFileSystem||s||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",d=0,p=500,f=function(t){var n=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};e.chrome?n():setTimeout(n,p)},h=function(e,t,r){t=[].concat(t);for(var n=t.length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,r||e)}catch(i){u(i)}}},v=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},y=function(t,u,p){p||(t=v(t));var y,m,g,b=this,w=t.type,E=!1,_=function(){h(b,"writestart progress write writeend".split(" "))},P=function(){if(m&&a&&"undefined"!=typeof FileReader){var n=new FileReader;return n.onloadend=function(){var e=n.result;m.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),b.readyState=b.DONE,_()},n.readAsDataURL(t),void(b.readyState=b.INIT)}if((E||!y)&&(y=r().createObjectURL(t)),m)m.location.href=y;else{var o=e.open(y,"_blank");void 0==o&&a&&(e.location.href=y)}b.readyState=b.DONE,_(),f(y)},T=function(e){return function(){return b.readyState!==b.DONE?e.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return b.readyState=b.INIT,u||(u="download"),o?(y=r().createObjectURL(t),n.href=y,n.download=u,void setTimeout(function(){i(n),_(),f(y),b.readyState=b.DONE})):(e.chrome&&w&&w!==c&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,c),E=!0),s&&"download"!==u&&(u+=".download"),(w===c||s)&&(m=e),l?(d+=t.size,void l(e.TEMPORARY,d,T(function(e){e.root.getDirectory("saved",S,T(function(e){var r=function(){e.getFile(u,S,T(function(e){e.createWriter(T(function(r){r.onwriteend=function(t){m.location.href=e.toURL(),b.readyState=b.DONE,h(b,"writeend",t),f(e)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&P()},"writestart progress write abort".split(" ").forEach(function(e){r["on"+e]=b["on"+e]}),r.write(t),b.abort=function(){r.abort(),b.readyState=b.DONE},b.readyState=b.WRITING}),P)}),P)};e.getFile(u,{create:!1},T(function(e){e.remove(),r()}),T(function(e){e.code===e.NOT_FOUND_ERR?r():P()}))}),P)}),P)):void P())},m=y.prototype,g=function(e,t,r){return new y(e,t,r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return r||(e=v(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(m.abort=function(){var e=this;e.readyState=e.DONE,h(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=i:null!==r(38)&&null!=r(39)&&(n=[],o=function(){return i}.apply(t,n),!(void 0!==o&&(e.exports=o)))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=(n(c),r(4)),p=n(d),f=r(7),h=n(f),v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"handleColumnClick",value:function(e){if(this.props.dataSort){var t=this.refs.innerDiv;this.order=this.order==p["default"].SORT_DESC?p["default"].SORT_ASC:p["default"].SORT_DESC,this.props.clearSortCaret(this.order,this.props.dataField),t.appendChild(h["default"].renderSortCaret(this.order))}}},{key:"componentDidMount",value:function(){this.refs.innerDiv.setAttribute("data-field",this.props.dataField)}},{key:"render",value:function(){var e=null!==this.props.width?parseInt(this.props.width):null,t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.className+" "+(this.props.dataSort?"sort-column":"");return u["default"].createElement("th",{className:r,style:t},u["default"].createElement("div",{ref:"innerDiv",className:"th-inner table-header-column",onClick:this.handleColumnClick.bind(this)},this.props.children))}}]),t}(u["default"].Component);v.propTypes={dataField:u["default"].PropTypes.string,dataAlign:u["default"].PropTypes.string,dataSort:u["default"].PropTypes.bool,clearSortCaret:u["default"].PropTypes.func,dataFormat:u["default"].PropTypes.func,isKey:u["default"].PropTypes.bool,editable:u["default"].PropTypes.any,hidden:u["default"].PropTypes.bool,className:u["default"].PropTypes.string,width:u["default"].PropTypes.string,sortFunc:u["default"].PropTypes.func,columnClassName:u["default"].PropTypes.any},v.defaultProps={dataAlign:"left",dataSort:!1,dataFormat:void 0,isKey:!1,editable:!0,clearSortCaret:void 0,hidden:!1,className:"",width:null,sortFunc:void 0,columnClassName:""},t["default"]=v,e.exports=t["default"]}])});
},{"react":"react","react-dom":"react-dom"}],2:[function(require,module,exports){
'use strict';

var React = require('react');
var moment = require('moment');
var assign = require('object-assign');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var toMoment = require('./toMoment');
var onEnter = require('./onEnter');
var assign = require('object-assign');

var TODAY;

function emptyFn() {}

var DecadeView = React.createClass({

    displayName: 'DecadeView',

    getDefaultProps: function getDefaultProps() {
        return asConfig();
    },

    /**
     * Returns all the years in the decade of the given value
     *
     * @param  {Moment/Date/Number} value
     * @return {Moment[]}
     */
    getYearsInDecade: function getYearsInDecade(value) {
        var year = moment(value).get('year');
        var offset = year % 10;

        year = year - offset - 1;

        var result = [];
        var i = 0;

        var start = moment(year, 'YYYY').startOf('year');

        for (; i < 12; i++) {
            result.push(moment(start));
            start.add(1, 'year');
        }

        return result;
    },

    render: function render() {

        TODAY = +moment().startOf('day');

        var props = assign({}, this.props);

        var viewMoment = props.viewMoment = moment(this.props.viewDate);

        if (props.date) {
            props.moment = moment(props.date).startOf('year');
        }

        var yearsInView = this.getYearsInDecade(viewMoment);

        return React.createElement(
            'div',
            { className: 'dp-table dp-decade-view' },
            this.renderYears(props, yearsInView)
        );
    },

    /**
     * Render the given array of days
     * @param  {Moment[]} days
     * @return {React.DOM}
     */
    renderYears: function renderYears(props, days) {
        var nodes = days.map(function (date, index, arr) {
            return this.renderYear(props, date, index, arr);
        }, this);
        var len = days.length;
        var buckets = [];
        var bucketsLen = Math.ceil(len / 4);

        var i = 0;

        for (; i < bucketsLen; i++) {
            buckets.push(nodes.slice(i * 4, (i + 1) * 4));
        }

        return buckets.map(function (bucket, i) {
            return React.createElement(
                'div',
                { key: "row" + i, className: 'dp-row' },
                bucket
            );
        });
    },

    renderYear: function renderYear(props, date, index, arr) {
        var yearText = FORMAT.year(date, props.yearFormat);
        var classes = ["dp-cell dp-year"];

        var dateTimestamp = +date;

        if (dateTimestamp == props.moment) {
            classes.push('dp-value');
        }

        if (!index) {
            classes.push('dp-prev');
        }

        if (index == arr.length - 1) {
            classes.push('dp-next');
        }

        var onClick = this.handleClick.bind(this, props, date);

        return React.createElement(
            'div',
            {
                role: 'link',
                tabIndex: '1',
                key: yearText,
                className: classes.join(' '),
                onClick: onClick,
                onKeyUp: onEnter(onClick)
            },
            yearText
        );
    },

    handleClick: function handleClick(props, date, event) {
        event.target.value = date;(props.onSelect || emptyFn)(date, event);
    }
});

DecadeView.getHeaderText = function (value, props) {
    var year = moment(value).get('year');
    var offset = year % 10;

    year = year - offset - 1;

    return year + ' - ' + (year + 11);
};

module.exports = DecadeView;
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],3:[function(require,module,exports){
'use strict';

var React = require('react');
var P = React.PropTypes;
var onEnter = require('./onEnter');

module.exports = React.createClass({

  displayName: 'DatePickerHeader',

  propTypes: {
    onChange: P.func,
    onPrev: P.func,
    onNext: P.func,
    colspan: P.number,
    children: P.node
  },

  render: function render() {

    var props = this.props;

    return React.createElement(
      'div',
      { className: 'dp-header' },
      React.createElement(
        'div',
        { className: 'dp-nav-table' },
        React.createElement(
          'div',
          { className: 'dp-row' },
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-prev-nav dp-nav-cell dp-cell',
              onClick: props.onPrev,
              onKeyUp: onEnter(props.onPrev)
            },
            props.prevText
          ),
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-nav-view dp-cell',
              colSpan: props.colspan,
              onClick: props.onChange,
              onKeyUp: onEnter(props.onChange)
            },
            props.children
          ),
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-next-nav dp-nav-cell dp-cell',
              onClick: props.onNext,
              onKeyUp: onEnter(props.onNext)
            },
            props.nextText
          )
        )
      )
    );
  }

});
},{"./onEnter":8,"react":"react"}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var React = require('react');
var moment = require('moment');
var assign = require('object-assign');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var onEnter = require('./onEnter');
var toMoment = require('./toMoment');

var TODAY;

function emptyFn() {}

var MonthView = React.createClass({

  displayName: 'MonthView',

  /**
   * Formats the given date in the specified format.
   * @method format
   *
   * @param  {Date/String/Moment} value
   * @param  {String} [format] If none specified, #dateFormat will be used
   *
   * @return {String}
   */

  formatAsDay: function formatAsDay(moment, dayDisplayFormat) {
    return moment.format(dayDisplayFormat || 'D');
  },

  getDefaultProps: function getDefaultProps() {
    return asConfig();
  },

  getWeekStartMoment: function getWeekStartMoment(value) {
    var weekStartDay = this.weekStartDay;
    var clone = this.toMoment(value).day(weekStartDay);

    return clone;
  },

  /**
   * Returns all the days in the specified month.
   *
   * @param  {Moment/Date/Number} value
   * @return {Moment[]}
   */
  getDaysInMonth: function getDaysInMonth(value) {
    var first = this.toMoment(value).startOf('month');
    var beforeFirst = this.toMoment(value).startOf('month').add(-1, 'days');
    var start = this.getWeekStartMoment(first);
    var result = [];
    var i = 0;

    if (beforeFirst.isBefore(start)
    // and it doen't start with a full week before and the week has at least 1 day from current month (default)
     && (this.props.alwaysShowPrevWeek || !start.isSame(first))) {
      start.add(-1, 'weeks');
    }

    for (; i < 42; i++) {
      result.push(this.toMoment(start));
      start.add(1, 'days');
    }

    return result;
  },

  render: function render() {

    var props = assign({}, this.props);

    this.toMoment = function (value, dateFormat) {
      return toMoment(value, dateFormat || props.dateFormat, { locale: props.locale });
    };

    TODAY = +this.toMoment().startOf('day');

    var dateFormat = props.dateFormat;
    var viewMoment = props.viewMoment = this.toMoment(props.viewDate, dateFormat);

    var weekStartDay = props.weekStartDay;

    if (weekStartDay == null) {
      weekStartDay = props.localeData._week ? props.localeData._week.dow : null;
    }

    this.weekStartDay = props.weekStartDay = weekStartDay;

    if (props.minDate && moment.isMoment(props.minDate)) {
      props.minDate.startOf('day');
    }

    props.minDate && (props.minDate = +this.toMoment(props.minDate, dateFormat));
    props.maxDate && (props.maxDate = +this.toMoment(props.maxDate, dateFormat));

    this.monthFirst = this.toMoment(viewMoment).startOf('month');
    this.monthLast = this.toMoment(viewMoment).endOf('month');

    if (props.date) {
      props.moment = this.toMoment(props.date).startOf('day');
    }

    var daysInView = this.getDaysInMonth(viewMoment);

    return React.createElement(
      'div',
      { className: 'dp-table dp-month-view' },
      this.renderWeekDayNames(),
      this.renderDays(props, daysInView)
    );
  },

  /**
   * Render the given array of days
   * @param  {Moment[]} days
   * @return {React.DOM}
   */
  renderDays: function renderDays(props, days) {
    var nodes = days.map(function (date) {
      return this.renderDay(props, date);
    }, this);

    var len = days.length;
    var buckets = [];
    var bucketsLen = Math.ceil(len / 7);

    var i = 0;

    for (; i < bucketsLen; i++) {
      buckets.push(nodes.slice(i * 7, (i + 1) * 7));
    }

    return buckets.map(function (bucket, i) {
      return React.createElement(
        'div',
        { key: "row" + i, className: 'dp-week dp-row' },
        bucket
      );
    });
  },

  renderDay: function renderDay(props, date) {
    var dayText = FORMAT.day(date, props.dayFormat);
    var classes = ["dp-cell dp-day"];

    var dateTimestamp = +date;

    if (dateTimestamp == TODAY) {
      classes.push('dp-current');
    } else if (dateTimestamp < this.monthFirst) {
      classes.push('dp-prev');
    } else if (dateTimestamp > this.monthLast) {
      classes.push('dp-next');
    }

    var beforeMinDate;

    if (props.minDate && date < props.minDate) {
      classes.push('dp-disabled dp-before-min');
      beforeMinDate = true;
    }

    var afterMaxDate;
    if (props.maxDate && date > props.maxDate) {
      classes.push('dp-disabled dp-after-max');
      afterMaxDate = true;
    }

    if (dateTimestamp == props.moment) {
      classes.push('dp-value');
    }

    var mom = this.toMoment(date);
    var onClick = this.handleClick.bind(this, props, date, dateTimestamp);

    var renderDayProps = {
      role: 'link',
      tabIndex: 1,
      key: dayText,
      text: dayText,
      date: mom,
      moment: mom,
      className: classes.join(' '),
      style: {},
      onClick: onClick,
      onKeyUp: onEnter(onClick),
      children: dayText
    };

    if (beforeMinDate) {
      renderDayProps.isDisabled = true;
      renderDayProps.beforeMinDate = true;
    }
    if (afterMaxDate) {
      renderDayProps.isDisabled = true;
      renderDayProps.afterMaxDate = true;
    }

    if (typeof props.onRenderDay === 'function') {
      renderDayProps = props.onRenderDay(renderDayProps);
    }

    var defaultRenderFunction = React.DOM.div;
    var renderFunction = props.renderDay || defaultRenderFunction;

    var result = renderFunction(renderDayProps);

    if (result === undefined) {
      result = defaultRenderFunction(renderDayProps);
    }

    return result;
  },

  getWeekDayNames: function getWeekDayNames(props) {
    props = props || this.props;

    var names = props.weekDayNames;
    var weekStartDay = this.weekStartDay;

    if (typeof names == 'function') {
      names = names(weekStartDay, props.locale);
    } else if (Array.isArray(names)) {

      names = [].concat(names);

      var index = weekStartDay;

      while (index > 0) {
        names.push(names.shift());
        index--;
      }
    }

    return names;
  },

  renderWeekDayNames: function renderWeekDayNames() {
    var names = this.getWeekDayNames();

    return React.createElement(
      'div',
      { className: 'dp-row dp-week-day-names' },
      names.map(function (name, index) {
        return React.createElement(
          'div',
          { key: index, className: 'dp-cell dp-week-day-name' },
          name
        );
      })
    );
  },

  handleClick: function handleClick(props, date, timestamp, event) {
    if (props.minDate && timestamp < props.minDate) {
      return;
    }
    if (props.maxDate && timestamp > props.maxDate) {
      return;
    }

    event.target.value = date;(props.onChange || emptyFn)(date, event);
  }
});

MonthView.getHeaderText = function (moment, props) {
  return toMoment(moment, null, { locale: props.locale }).format('MMMM YYYY');
};

exports['default'] = MonthView;
module.exports = exports['default'];
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],5:[function(require,module,exports){
'use strict';

var React = require('react');
var moment = require('moment');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var toMoment = require('./toMoment');
var onEnter = require('./onEnter');
var assign = require('object-assign');

var TODAY;

function emptyFn() {}

var YearView = React.createClass({

    displayName: 'YearView',

    getDefaultProps: function getDefaultProps() {

        return asConfig();
    },

    /**
     * Returns all the days in the specified month.
     *
     * @param  {Moment/Date/Number} value
     * @return {Moment[]}
     */
    getMonthsInYear: function getMonthsInYear(value) {
        var start = moment(value).startOf('year');
        var result = [];
        var i = 0;

        for (; i < 12; i++) {
            result.push(moment(start));
            start.add(1, 'month');
        }

        return result;
    },

    render: function render() {

        TODAY = +moment().startOf('day');

        var props = assign({}, this.props);

        var viewMoment = props.viewMoment = moment(this.props.viewDate);

        if (props.date) {
            props.moment = moment(props.date).startOf('month');
        }

        var monthsInView = this.getMonthsInYear(viewMoment);

        return React.createElement(
            'div',
            { className: 'dp-table dp-year-view' },
            this.renderMonths(props, monthsInView)
        );
    },

    /**
     * Render the given array of days
     * @param  {Moment[]} days
     * @return {React.DOM}
     */
    renderMonths: function renderMonths(props, days) {
        var nodes = days.map(function (date) {
            return this.renderMonth(props, date);
        }, this);
        var len = days.length;
        var buckets = [];
        var bucketsLen = Math.ceil(len / 4);

        var i = 0;

        for (; i < bucketsLen; i++) {
            buckets.push(nodes.slice(i * 4, (i + 1) * 4));
        }

        return buckets.map(function (bucket, i) {
            return React.createElement(
                'div',
                { key: "row" + i, className: 'dp-row' },
                bucket
            );
        });
    },

    renderMonth: function renderMonth(props, date) {
        var monthText = FORMAT.month(date, props.monthFormat);
        var classes = ["dp-cell dp-month"];

        var dateTimestamp = +date;

        if (dateTimestamp == props.moment) {
            classes.push('dp-value');
        }

        var onClick = this.handleClick.bind(this, props, date);

        return React.createElement(
            'div',
            {
                tabIndex: '1',
                role: 'link',
                key: monthText,
                className: classes.join(' '),
                onClick: onClick,
                onKeyUp: onEnter(onClick)
            },
            monthText
        );
    },

    handleClick: function handleClick(props, date, event) {
        event.target.value = date;(props.onSelect || emptyFn)(date, event);
    }
});

YearView.getHeaderText = function (moment, props) {
    return toMoment(moment, null, { locale: props.locale }).format('YYYY');
};

module.exports = YearView;
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],6:[function(require,module,exports){
'use strict';

var getWeekDayNames = require('./utils/getWeekDayNames');

// console.log(getWeekDayNames())

module.exports = {

    //the names of week days to be displayed in month view - first should be sunday
    weekDayNames: getWeekDayNames,

    //the day to display as first day of week. defaults to 0, which is sunday
    weekStartDay: null,

    locale: null,

    //the format in which days should be displayed in month view
    dayFormat: 'D',

    //the format in which months should be displayed in year view
    monthFormat: 'MMMM',

    //the format in which years should be displayed in decade view
    yearFormat: 'YYYY',

    //text for navigating to prev period
    navPrev: '‹',

    //text for navigating to next period
    navNext: '›',

    //the view to render initially. Possible values are: 'month', 'year', 'decade'
    view: null,

    //the date to mark as selected in the date picker.
    //Can be a Date object, a moment object or a string.
    //If it's a string, it will be parsed using dateFormat
    date: null,

    minDate: null,

    maxDate: null,

    //the date where to open the picker. defaults to today if no date and no viewDate specified
    viewDate: null,

    //if the date property is given as string, it will be parsed using this format
    dateFormat: 'YYYY-MM-DD',

    onRenderDay: null,
    renderDay: null,

    alwaysShowPrevWeek: false
};
},{"./utils/getWeekDayNames":12}],7:[function(require,module,exports){
'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var React = require('react');

var moment = require('moment');
var assign = require('object-assign');
var asConfig = require('./utils/asConfig');

var MonthView = require('./MonthView');
var YearView = require('./YearView');
var DecadeView = require('./DecadeView');
var Header = require('./Header');

var toMoment = require('./toMoment');

var hasOwn = function hasOwn(obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
};

var onEnter = require('./onEnter');

var Views = {
    month: MonthView,
    year: YearView,
    decade: DecadeView
};

function emptyFn() {}

var DatePicker = React.createClass({

    displayName: 'DatePicker',

    propTypes: {
        todayText: React.PropTypes.string,
        gotoSelectedText: React.PropTypes.string,

        renderFooter: React.PropTypes.func,
        onChange: React.PropTypes.func,

        date: React.PropTypes.any,
        viewDate: React.PropTypes.any
    },

    getViewOrder: function getViewOrder() {
        return this.props.viewOrder || ['month', 'year', 'decade'];
    },

    getDefaultProps: function getDefaultProps() {
        var props = assign({}, asConfig(), {
            isDatePicker: true,
            navOnDateClick: true,
            defaultStyle: {
                boxSizing: 'border-box'
            }
        });

        delete props.viewDate;
        delete props.date;

        return props;
    },

    getInitialState: function getInitialState() {
        return {
            view: this.props.defaultView,
            viewDate: this.props.defaultViewDate,
            defaultDate: this.props.defaultDate
        };
    },

    getViewName: function getViewName() {
        var view = this.props.view != null ? this.props.view : this.state.view;

        return view || 'month';
    },

    addViewIndex: function addViewIndex(amount) {
        var viewName = this.getViewName();

        var order = this.getViewOrder();
        var index = order.indexOf(viewName);

        index += amount;

        return index % order.length;
    },

    getNextViewName: function getNextViewName() {
        return this.getViewOrder()[this.addViewIndex(1)];
    },

    getPrevViewName: function getPrevViewName() {
        return this.getViewOrder()[this.addViewIndex(-1)];
    },

    getView: function getView() {
        var views = this.props.views || Views;
        return views[this.getViewName()] || views.month;
    },

    getViewFactory: function getViewFactory() {
        var view = this.getView();

        if (React.createFactory && view && view.prototype && typeof view.prototype.render == 'function') {
            view.__factory = view.__factory || React.createFactory(view);
            view = view.__factory;
        }

        return view;
    },

    getViewDate: function getViewDate() {
        var date = hasOwn(this.props, 'viewDate') ? this.props.viewDate : this.state.viewDate;

        date = date || this.viewMoment || this.getDate() || new Date();

        if (moment.isMoment(date)) {
            //in order to strip the locale - the date picker may have had its locale changed
            //between two render calls. If we don't strip this, moment(mom) returns a new moment
            //with the locale of mom, which is not what we want
            date = +date;
        }

        date = this.toMoment(date);

        return date;
    },

    getDate: function getDate() {
        var date;

        if (hasOwn(this.props, 'date')) {
            date = this.props.date;
        } else {
            date = this.state.defaultDate;
        }

        return date ? this.toMoment(date) : null;
    },

    render: function render() {

        var props = assign({}, this.props);

        this.toMoment = function (value, dateFormat) {
            return toMoment(value, dateFormat || props.dateFormat, { locale: props.locale });
        };

        var view = this.getViewFactory();

        props.date = this.getDate();

        var dateString = props.date == null ? '' : props.date.format(this.props.dateFormat);

        props.viewDate = this.viewMoment = this.getViewDate();
        props.locale = this.props.locale;
        props.localeData = moment.localeData(props.locale);

        props.renderDay = this.props.renderDay;
        props.onRenderDay = this.props.onRenderDay;

        // props.onChange  = this.handleChange
        // props.onSelect  = this.handleSelect

        var className = (this.props.className || '') + ' date-picker';

        props.style = this.prepareStyle(props);

        var viewProps = props;
        var viewProps = asConfig(props);

        viewProps.dateString = dateString;
        viewProps.localeData = props.localeData;
        viewProps.onSelect = this.handleSelect;
        viewProps.onChange = this.handleChange;

        return React.createElement(
            'div',
            _extends({}, this.props, { className: className, style: props.style }),
            this.renderHeader(view, props),
            React.createElement(
                'div',
                { className: 'dp-body', style: { flex: 1 } },
                view(viewProps)
            ),
            this.renderFooter(props)
        );
    },

    prepareStyle: function prepareStyle(props) {
        return assign({}, props.defaultStyle, props.style);
    },

    renderFooter: function renderFooter(props) {
        if (this.props.hideFooter) {
            return;
        }

        if (this.props.today) {
            console.warn('Please use "todayText" prop instead of "today"!');
        }
        if (this.props.gotoSelected) {
            console.warn('Please use "gotoSelectedText" prop instead of "gotoSelected"!');
        }

        var todayText = this.props.todayText || 'Today';
        var gotoSelectedText = this.props.gotoSelectedText || 'Go to selected';

        var footerProps = {
            todayText: todayText,
            gotoSelectedText: gotoSelectedText,
            gotoToday: this.gotoNow,
            gotoSelected: this.gotoSelected.bind(this, props),
            date: props.date,
            viewDate: props.viewDate
        };

        var result;
        if (typeof this.props.footerFactory == 'function') {
            result = this.props.footerFactory(footerProps);
        }

        if (result !== undefined) {
            return result;
        }

        return React.createElement(
            'div',
            { className: 'dp-footer' },
            React.createElement(
                'div',
                {
                    tabIndex: '1',
                    role: 'link',
                    className: 'dp-footer-today',
                    onClick: footerProps.gotoToday,
                    onKeyUp: onEnter(footerProps.gotoToday)
                },
                todayText
            ),
            React.createElement(
                'div',
                {
                    tabIndex: '1',
                    role: 'link',
                    className: 'dp-footer-selected',
                    onClick: footerProps.gotoSelected,
                    onKeyUp: onEnter(footerProps.gotoSelected)
                },
                gotoSelectedText
            )
        );
    },

    gotoNow: function gotoNow() {
        this.gotoDate(+new Date());
    },

    gotoSelected: function gotoSelected(props) {
        this.gotoDate(props.date || +new Date());
    },

    gotoDate: function gotoDate(value) {

        this.setView('month');

        this.setViewDate(value);
    },

    getViewColspan: function getViewColspan() {
        var map = {
            month: 5,
            year: 2,
            decade: 2
        };

        return map[this.getViewName()];
    },

    renderHeader: function renderHeader(view, props) {

        if (this.props.hideHeader) {
            return;
        }

        props = props || this.props;

        var viewDate = this.getViewDate();
        var headerText = this.getView().getHeaderText(viewDate, props);

        var colspan = this.getViewColspan();
        var prev = this.props.navPrev;
        var next = this.props.navNext;

        return React.createElement(
            Header,
            {
                prevText: prev,
                nextText: next,
                colspan: colspan,
                onPrev: this.handleNavPrev,
                onNext: this.handleNavNext,
                onChange: this.handleViewChange
            },
            headerText
        );
    },

    handleRenderDay: function handleRenderDay(date) {
        return (this.props.renderDay || emptyFn)(date) || [];
    },

    handleViewChange: function handleViewChange() {
        this.setView(this.getNextViewName());
    },

    /**
     * Use this method to set the view.
     *
     * @param {String} view 'month'/'year'/'decade'
     *
     * It calls onViewChange, and if the view is uncontrolled, also sets it is state,
     * so the datepicker gets re-rendered view the new view
     *
     */
    setView: function setView(view) {

        if (typeof this.props.onViewChange == 'function') {
            this.props.onViewChange(view);
        }

        if (this.props.view == null) {
            this.setState({
                view: view
            });
        }
    },

    setViewDate: function setViewDate(moment) {

        moment = this.toMoment(moment);

        var fn = this.props.onViewDateChange;

        if (typeof fn == 'function') {

            var text = moment.format(this.props.dateFormat);
            var view = this.getViewName();

            fn(text, moment, view);
        }

        if (!hasOwn(this.props, 'viewDate')) {
            this.setState({
                viewDate: moment
            });
        }
    },

    getNext: function getNext() {
        var current = this.getViewDate();
        var toMoment = this.toMoment;

        return ({
            month: function month() {
                return toMoment(current).add(1, 'month');
            },
            year: function year() {
                return toMoment(current).add(1, 'year');
            },
            decade: function decade() {
                return toMoment(current).add(10, 'year');
            }
        })[this.getViewName()]();
    },

    getPrev: function getPrev() {
        var current = this.getViewDate();
        var toMoment = this.toMoment;

        return ({
            month: function month() {
                return toMoment(current).add(-1, 'month');
            },
            year: function year() {
                return toMoment(current).add(-1, 'year');
            },
            decade: function decade() {
                return toMoment(current).add(-10, 'year');
            }
        })[this.getViewName()]();
    },

    handleNavigation: function handleNavigation(direction, event) {
        var viewMoment = direction == -1 ? this.getPrev() : this.getNext();

        this.setViewDate(viewMoment);

        if (typeof this.props.onNav === 'function') {
            var text = viewMoment.format(this.props.dateFormat);
            var view = this.getViewName();

            this.props.onNav(text, viewMoment, view, direction, event);
        }
    },

    handleNavPrev: function handleNavPrev(event) {
        this.handleNavigation(-1, event);
    },

    handleNavNext: function handleNavNext(event) {
        this.handleNavigation(1, event);
    },

    handleChange: function handleChange(date, event) {
        date = this.toMoment(date);

        if (this.props.navOnDateClick) {
            var viewDate = this.toMoment(this.getViewDate());

            //it's not enough to compare months, since the year can change as well
            //
            //also it's ok to hardcode the format here
            var viewMonth = viewDate.format('YYYY-MM');
            var dateMonth = date.format('YYYY-MM');

            if (dateMonth > viewMonth) {
                this.handleNavNext(event);
            } else if (dateMonth < viewMonth) {
                this.handleNavPrev(event);
            }
        }

        var text = date.format(this.props.dateFormat);

        if (!hasOwn(this.props, 'date')) {
            this.setState({
                defaultDate: text
            });
        }

        ;(this.props.onChange || emptyFn)(text, date, event);
    },

    handleSelect: function handleSelect(date, event) {
        var viewName = this.getViewName();

        var property = ({
            decade: 'year',
            year: 'month'
        })[viewName];

        var value = date.get(property);
        var viewMoment = this.toMoment(this.getViewDate()).set(property, value);
        var view = this.getPrevViewName();

        this.setViewDate(viewMoment);

        this.setView(view);

        if (typeof this.props.onSelect === 'function') {
            var text = viewMoment.format(this.props.dateFormat);
            this.props.onSelect(text, viewMoment, view, event);
        }
    }

});

DatePicker.views = Views;

var PT = React.PropTypes;

DatePicker.propTypes = {

    /**
     * Function to be called when user selects a date.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {Event} event
     *
     * @type {Function}
     */
    onChange: PT.func,

    /**
     * Function to be called when the user navigates to the next/prev month/year/decade
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view The name of the current view (eg: "month")
     * @param {Number} direction 1 or -1. 1 if the right arrow, to nav to next period was pressed. -1 if the left arrow, to nav to the prev period was pressed.
     * @param {Event} event
     *
     * @type {Function}
     */
    onNav: PT.func,

    /**
     * Function to be called when the user selects a year/month.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view The name of the view displayed after following the selection. For now, either "year" or "month"
     *
     * @type {Function}
     */
    onSelect: PT.func,

    /**
     * A function that should return a React DOM for the day cell. The first param is the props object.
     * You can use this to have full control over what gets rendered for a day.
     *
     * @param {Object} dayProps The props object passed to day rendering
     *
     * @type {Function}
     */
    renderDay: PT.func,

    /**
     * A function that can manipulate the props object for a day, and SHOULD return a props object (a new one, or the same).
     * Use this for CUSTOM DAY STYLING.
     * You can use this to take full control over the styles/css classes/attributes applied to the day cell in the month view.
     *
     * @param {Object} dayProps
     * @return {Object} dayProps
     *
     * @type {Function}
     */
    onRenderDay: PT.func,

    /******************************************/
    /********** VIEW-related props ************/
    /******************************************/

    /**
     * The default view to show in the picker. This is an uncontrolled prop.
     * If none specified, the default view will be "month"
     *
     * @type {String}
     */
    defaultView: PT.string,

    /**
     * The view to show in the picker. This is a CONTROLLED prop!
     *
     * When using this controlled prop, make sure you update it when `onViewChange` function is called
     * if you want to navigate to another view, as expected.
     *
     * @type {String}
     */
    view: PT.string,

    /**
     * A function to be called when navigating to another view date.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view the name of the view displayed after the navigation occurs.
     *
     * @type {Function}
     */
    onViewDateChange: PT.func,

    /**
     * A function to be called when the view is changed.
     * If you're using the controlled `view` prop, make sure you update the `view` prop in this function if you want to navigate to another view, as expected.
     *
     * @param {String} nextView One of "month", "year", "decade"
     *
     * @type {Function}
     */
    onViewChange: PT.func,

    /**
     * Defaults to true. If specified as false, will not navigate to the date that was clicked, even if that date is in the prev/next month
     * @type {Boolean}
     */
    navOnDateClick: PT.bool
};

module.exports = DatePicker;
},{"./DecadeView":2,"./Header":3,"./MonthView":4,"./YearView":5,"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"moment":13,"object-assign":14,"react":"react"}],8:[function(require,module,exports){
'use strict';

module.exports = function onKeyUp(fn) {
  return function (event) {
    if (event.key == 'Enter') {
      fn(event);
    }
  };
};
},{}],9:[function(require,module,exports){
'use strict';

var moment = require('moment');
var CONFIG = require('./config');

/**
 * This function will be used to convert a date to a moment.
 *
 * It accepts input as sring, date or moment
 *
 * @param  {String/Date/Moment} value
 * @param  {String} [dateFormat] if value is string, it will be parsed to a moment using this format
 * @param  {Object} [config]
 * @param  {Boolean} [config.strict] whether to perform strict parsing on strings
 * @return {Moment}
 */
module.exports = function (value, dateFormat, config) {
    var strict = !!(config && config.strict);
    var locale = config && config.locale;

    dateFormat = dateFormat || CONFIG.dateFormat;

    if (typeof value == 'string') {
        return moment(value, dateFormat, locale, strict);
    }

    // return moment.isMoment(value)?
    // 			value:
    return moment(value == null ? new Date() : value, undefined, locale, strict);
};
},{"./config":6,"moment":13}],10:[function(require,module,exports){
'use strict';

var assign = require('object-assign');

var CONFIG = require('../config');
var KEYS = Object.keys(CONFIG);

function copyList(src, target, list) {
    if (src) {
        list.forEach(function (key) {
            target[key] = src[key];
        });
    }

    return target;
}

/**
 * Returns an object that copies from given source object
 * on the resulting object only the properties also found in cfg.
 *
 * If no cfg specified, CONFIG is assumed
 *
 * @param  {object} source
 * @param  {Object} [cfg] If not specied, CONFIG will be used
 *
 * @return {Object}
 */
module.exports = function asConfig(source, cfg) {

    var keys = KEYS;

    if (cfg) {
        keys = Object.keys(cfg);
    }

    cfg = cfg || CONFIG;

    if (!source) {
        return assign({}, cfg);
    }

    return copyList(source, assign({}, cfg), keys);
};
},{"../config":6,"object-assign":14}],11:[function(require,module,exports){
'use strict';

var CONFIG = require('../config');
var toMoment = require('../toMoment');

function f(mom, format) {
    return toMoment(mom).format(format);
}

module.exports = {
    day: function day(mom, format) {
        return f(mom, format || CONFIG.dayFormat);
    },

    month: function month(mom, format) {
        return f(mom, format || CONFIG.monthFormat);
    },

    year: function year(mom, format) {
        return f(mom, format || CONFIG.yearFormat);
    }
};
},{"../config":6,"../toMoment":9}],12:[function(require,module,exports){
'use strict';

var moment = require('moment');

var DEFAULT_WEEK_START_DAY = moment().startOf('week').format('d') * 1;

module.exports = function getWeekDayNames(startDay, locale) {

	var weekDays;

	if (locale) {
		var data = moment.localeData(locale);

		weekDays = data && data._weekdaysShort ? data._weekdaysShort : weekDays;
	}

	weekDays = (weekDays || moment.weekdaysShort()).concat();

	var names = weekDays;
	var index = startDay == null ? DEFAULT_WEEK_START_DAY : startDay;

	while (index > 0) {
		names.push(names.shift());
		index--;
	}

	return names;
};
},{"moment":13}],13:[function(require,module,exports){
//! moment.js
//! version : 2.11.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

;(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    global.moment = factory()
}(this, function () { 'use strict';

    var hookCallback;

    function utils_hooks__hooks () {
        return hookCallback.apply(null, arguments);
    }

    // This is done to register the method called with moment()
    // without creating circular dependencies.
    function setHookCallback (callback) {
        hookCallback = callback;
    }

    function isArray(input) {
        return Object.prototype.toString.call(input) === '[object Array]';
    }

    function isDate(input) {
        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
    }

    function map(arr, fn) {
        var res = [], i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function hasOwnProp(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }

    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function create_utc__createUTC (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, true).utc();
    }

    function defaultParsingFlags() {
        // We need to deep clone this object.
        return {
            empty           : false,
            unusedTokens    : [],
            unusedInput     : [],
            overflow        : -2,
            charsLeftOver   : 0,
            nullInput       : false,
            invalidMonth    : null,
            invalidFormat   : false,
            userInvalidated : false,
            iso             : false
        };
    }

    function getParsingFlags(m) {
        if (m._pf == null) {
            m._pf = defaultParsingFlags();
        }
        return m._pf;
    }

    function valid__isValid(m) {
        if (m._isValid == null) {
            var flags = getParsingFlags(m);
            m._isValid = !isNaN(m._d.getTime()) &&
                flags.overflow < 0 &&
                !flags.empty &&
                !flags.invalidMonth &&
                !flags.invalidWeekday &&
                !flags.nullInput &&
                !flags.invalidFormat &&
                !flags.userInvalidated;

            if (m._strict) {
                m._isValid = m._isValid &&
                    flags.charsLeftOver === 0 &&
                    flags.unusedTokens.length === 0 &&
                    flags.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function valid__createInvalid (flags) {
        var m = create_utc__createUTC(NaN);
        if (flags != null) {
            extend(getParsingFlags(m), flags);
        }
        else {
            getParsingFlags(m).userInvalidated = true;
        }

        return m;
    }

    function isUndefined(input) {
        return input === void 0;
    }

    // Plugins that add properties should also add the key here (null value),
    // so we can properly clone ourselves.
    var momentProperties = utils_hooks__hooks.momentProperties = [];

    function copyConfig(to, from) {
        var i, prop, val;

        if (!isUndefined(from._isAMomentObject)) {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (!isUndefined(from._i)) {
            to._i = from._i;
        }
        if (!isUndefined(from._f)) {
            to._f = from._f;
        }
        if (!isUndefined(from._l)) {
            to._l = from._l;
        }
        if (!isUndefined(from._strict)) {
            to._strict = from._strict;
        }
        if (!isUndefined(from._tzm)) {
            to._tzm = from._tzm;
        }
        if (!isUndefined(from._isUTC)) {
            to._isUTC = from._isUTC;
        }
        if (!isUndefined(from._offset)) {
            to._offset = from._offset;
        }
        if (!isUndefined(from._pf)) {
            to._pf = getParsingFlags(from);
        }
        if (!isUndefined(from._locale)) {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (!isUndefined(val)) {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    var updateInProgress = false;

    // Moment prototype object
    function Moment(config) {
        copyConfig(this, config);
        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            utils_hooks__hooks.updateOffset(this);
            updateInProgress = false;
        }
    }

    function isMoment (obj) {
        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
    }

    function absFloor (number) {
        if (number < 0) {
            return Math.ceil(number);
        } else {
            return Math.floor(number);
        }
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            value = absFloor(coercedNumber);
        }

        return value;
    }

    // compare two arrays, return the number of differences
    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function Locale() {
    }

    // internal storage for locale config files
    var locales = {};
    var globalLocale;

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0, j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        // TODO: Find a better way to register and load all the locales in Node
        if (!locales[name] && !isUndefined(module) &&
                module && module.exports) {
            try {
                oldLocale = globalLocale._abbr;
                require('./locale/' + name);
                // because defineLocale currently also sets the global locale, we
                // want to undo that for lazy loaded locales
                locale_locales__getSetGlobalLocale(oldLocale);
            } catch (e) { }
        }
        return locales[name];
    }

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    function locale_locales__getSetGlobalLocale (key, values) {
        var data;
        if (key) {
            if (isUndefined(values)) {
                data = locale_locales__getLocale(key);
            }
            else {
                data = defineLocale(key, values);
            }

            if (data) {
                // moment.duration._locale = moment._locale = data;
                globalLocale = data;
            }
        }

        return globalLocale._abbr;
    }

    function defineLocale (name, values) {
        if (values !== null) {
            values.abbr = name;
            locales[name] = locales[name] || new Locale();
            locales[name].set(values);

            // backwards compat for now: also set the locale
            locale_locales__getSetGlobalLocale(name);

            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    }

    // returns locale data
    function locale_locales__getLocale (key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return globalLocale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    }

    var aliases = {};

    function addUnitAlias (unit, shorthand) {
        var lowerCase = unit.toLowerCase();
        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
    }

    function normalizeUnits(units) {
        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    function isFunction(input) {
        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
    }

    function makeGetSet (unit, keepTime) {
        return function (value) {
            if (value != null) {
                get_set__set(this, unit, value);
                utils_hooks__hooks.updateOffset(this, keepTime);
                return this;
            } else {
                return get_set__get(this, unit);
            }
        };
    }

    function get_set__get (mom, unit) {
        return mom.isValid() ?
            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
    }

    function get_set__set (mom, unit, value) {
        if (mom.isValid()) {
            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }

    // MOMENTS

    function getSet (units, value) {
        var unit;
        if (typeof units === 'object') {
            for (unit in units) {
                this.set(unit, units[unit]);
            }
        } else {
            units = normalizeUnits(units);
            if (isFunction(this[units])) {
                return this[units](value);
            }
        }
        return this;
    }

    function zeroFill(number, targetLength, forceSign) {
        var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
        return (sign ? (forceSign ? '+' : '') : '-') +
            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
    }

    var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;

    var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;

    var formatFunctions = {};

    var formatTokenFunctions = {};

    // token:    'M'
    // padded:   ['MM', 2]
    // ordinal:  'Mo'
    // callback: function () { this.month() + 1 }
    function addFormatToken (token, padded, ordinal, callback) {
        var func = callback;
        if (typeof callback === 'string') {
            func = function () {
                return this[callback]();
            };
        }
        if (token) {
            formatTokenFunctions[token] = func;
        }
        if (padded) {
            formatTokenFunctions[padded[0]] = function () {
                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            };
        }
        if (ordinal) {
            formatTokenFunctions[ordinal] = function () {
                return this.localeData().ordinal(func.apply(this, arguments), token);
            };
        }
    }

    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens), i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function (mom) {
            var output = '';
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());
        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }

    var match1         = /\d/;            //       0 - 9
    var match2         = /\d\d/;          //      00 - 99
    var match3         = /\d{3}/;         //     000 - 999
    var match4         = /\d{4}/;         //    0000 - 9999
    var match6         = /[+-]?\d{6}/;    // -999999 - 999999
    var match1to2      = /\d\d?/;         //       0 - 99
    var match3to4      = /\d\d\d\d?/;     //     999 - 9999
    var match5to6      = /\d\d\d\d\d\d?/; //   99999 - 999999
    var match1to3      = /\d{1,3}/;       //       0 - 999
    var match1to4      = /\d{1,4}/;       //       0 - 9999
    var match1to6      = /[+-]?\d{1,6}/;  // -999999 - 999999

    var matchUnsigned  = /\d+/;           //       0 - inf
    var matchSigned    = /[+-]?\d+/;      //    -inf - inf

    var matchOffset    = /Z|[+-]\d\d:?\d\d/gi; // +00:00 -00:00 +0000 -0000 or Z
    var matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z

    var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/; // 123456789 123456789.123

    // any word (or two) characters or numbers including two/three word month in arabic.
    // includes scottish gaelic two word and hyphenated months
    var matchWord = /[0-9]*(a[mn]\s?)?['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;


    var regexes = {};

    function addRegexToken (token, regex, strictRegex) {
        regexes[token] = isFunction(regex) ? regex : function (isStrict) {
            return (isStrict && strictRegex) ? strictRegex : regex;
        };
    }

    function getParseRegexForToken (token, config) {
        if (!hasOwnProp(regexes, token)) {
            return new RegExp(unescapeFormat(token));
        }

        return regexes[token](config._strict, config._locale);
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function unescapeFormat(s) {
        return s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        }).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    var tokens = {};

    function addParseToken (token, callback) {
        var i, func = callback;
        if (typeof token === 'string') {
            token = [token];
        }
        if (typeof callback === 'number') {
            func = function (input, array) {
                array[callback] = toInt(input);
            };
        }
        for (i = 0; i < token.length; i++) {
            tokens[token[i]] = func;
        }
    }

    function addWeekParseToken (token, callback) {
        addParseToken(token, function (input, array, config, token) {
            config._w = config._w || {};
            callback(input, config._w, config, token);
        });
    }

    function addTimeToArrayFromToken(token, input, config) {
        if (input != null && hasOwnProp(tokens, token)) {
            tokens[token](input, config._a, config, token);
        }
    }

    var YEAR = 0;
    var MONTH = 1;
    var DATE = 2;
    var HOUR = 3;
    var MINUTE = 4;
    var SECOND = 5;
    var MILLISECOND = 6;
    var WEEK = 7;
    var WEEKDAY = 8;

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }

    // FORMATTING

    addFormatToken('M', ['MM', 2], 'Mo', function () {
        return this.month() + 1;
    });

    addFormatToken('MMM', 0, 0, function (format) {
        return this.localeData().monthsShort(this, format);
    });

    addFormatToken('MMMM', 0, 0, function (format) {
        return this.localeData().months(this, format);
    });

    // ALIASES

    addUnitAlias('month', 'M');

    // PARSING

    addRegexToken('M',    match1to2);
    addRegexToken('MM',   match1to2, match2);
    addRegexToken('MMM',  matchWord);
    addRegexToken('MMMM', matchWord);

    addParseToken(['M', 'MM'], function (input, array) {
        array[MONTH] = toInt(input) - 1;
    });

    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
        var month = config._locale.monthsParse(input, token, config._strict);
        // if we didn't find a month name, mark the date as invalid.
        if (month != null) {
            array[MONTH] = month;
        } else {
            getParsingFlags(config).invalidMonth = input;
        }
    });

    // LOCALES

    var MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;
    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');
    function localeMonths (m, format) {
        return isArray(this._months) ? this._months[m.month()] :
            this._months[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sept_Oct_Nov_Dec'.split('_');
    function localeMonthsShort (m, format) {
        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :
            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    function localeMonthsParse (monthName, format, strict) {
        var i, mom, regex;

        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
        }

        for (i = 0; i < 12; i++) {
            // make the regex if we don't have it already
            mom = create_utc__createUTC([2000, i]);
            if (strict && !this._longMonthsParse[i]) {
                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
            }
            if (!strict && !this._monthsParse[i]) {
                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                return i;
            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                return i;
            } else if (!strict && this._monthsParse[i].test(monthName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function setMonth (mom, value) {
        var dayOfMonth;

        if (!mom.isValid()) {
            // No op
            return mom;
        }

        // TODO: Move this out of here!
        if (typeof value === 'string') {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (typeof value !== 'number') {
                return mom;
            }
        }

        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function getSetMonth (value) {
        if (value != null) {
            setMonth(this, value);
            utils_hooks__hooks.updateOffset(this, true);
            return this;
        } else {
            return get_set__get(this, 'Month');
        }
    }

    function getDaysInMonth () {
        return daysInMonth(this.year(), this.month());
    }

    function checkOverflow (m) {
        var overflow;
        var a = m._a;

        if (a && getParsingFlags(m).overflow === -2) {
            overflow =
                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :
                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :
                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :
                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :
                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :
                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }
            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
                overflow = WEEK;
            }
            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
                overflow = WEEKDAY;
            }

            getParsingFlags(m).overflow = overflow;
        }

        return m;
    }

    function warn(msg) {
        if (utils_hooks__hooks.suppressDeprecationWarnings === false && !isUndefined(console) && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;

        return extend(function () {
            if (firstTime) {
                warn(msg + '\nArguments: ' + Array.prototype.slice.call(arguments).join(', ') + '\n' + (new Error()).stack);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    var deprecations = {};

    function deprecateSimple(name, msg) {
        if (!deprecations[name]) {
            warn(msg);
            deprecations[name] = true;
        }
    }

    utils_hooks__hooks.suppressDeprecationWarnings = false;

    // iso 8601 regex
    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
    var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
    var basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;

    var tzRegex = /Z|[+-]\d\d(?::?\d\d)?/;

    var isoDates = [
        ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
        ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
        ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
        ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
        ['YYYY-DDD', /\d{4}-\d{3}/],
        ['YYYY-MM', /\d{4}-\d\d/, false],
        ['YYYYYYMMDD', /[+-]\d{10}/],
        ['YYYYMMDD', /\d{8}/],
        // YYYYMM is NOT allowed by the standard
        ['GGGG[W]WWE', /\d{4}W\d{3}/],
        ['GGGG[W]WW', /\d{4}W\d{2}/, false],
        ['YYYYDDD', /\d{7}/]
    ];

    // iso time formats and regexes
    var isoTimes = [
        ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
        ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
        ['HH:mm:ss', /\d\d:\d\d:\d\d/],
        ['HH:mm', /\d\d:\d\d/],
        ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
        ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
        ['HHmmss', /\d\d\d\d\d\d/],
        ['HHmm', /\d\d\d\d/],
        ['HH', /\d\d/]
    ];

    var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

    // date from iso format
    function configFromISO(config) {
        var i, l,
            string = config._i,
            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
            allowTime, dateFormat, timeFormat, tzFormat;

        if (match) {
            getParsingFlags(config).iso = true;

            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(match[1])) {
                    dateFormat = isoDates[i][0];
                    allowTime = isoDates[i][2] !== false;
                    break;
                }
            }
            if (dateFormat == null) {
                config._isValid = false;
                return;
            }
            if (match[3]) {
                for (i = 0, l = isoTimes.length; i < l; i++) {
                    if (isoTimes[i][1].exec(match[3])) {
                        // match[2] should be 'T' or space
                        timeFormat = (match[2] || ' ') + isoTimes[i][0];
                        break;
                    }
                }
                if (timeFormat == null) {
                    config._isValid = false;
                    return;
                }
            }
            if (!allowTime && timeFormat != null) {
                config._isValid = false;
                return;
            }
            if (match[4]) {
                if (tzRegex.exec(match[4])) {
                    tzFormat = 'Z';
                } else {
                    config._isValid = false;
                    return;
                }
            }
            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
            configFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function configFromString(config) {
        var matched = aspNetJsonRegex.exec(config._i);

        if (matched !== null) {
            config._d = new Date(+matched[1]);
            return;
        }

        configFromISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    utils_hooks__hooks.createFromInputFallback = deprecate(
        'moment construction falls back to js Date. This is ' +
        'discouraged and will be removed in upcoming major ' +
        'release. Please refer to ' +
        'https://github.com/moment/moment/issues/1407 for more info.',
        function (config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    function createDate (y, m, d, h, M, s, ms) {
        //can't just apply() to create a date:
        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
        var date = new Date(y, m, d, h, M, s, ms);

        //the date constructor remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {
            date.setFullYear(y);
        }
        return date;
    }

    function createUTCDate (y) {
        var date = new Date(Date.UTC.apply(null, arguments));

        //the Date.UTC function remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    // FORMATTING

    addFormatToken(0, ['YY', 2], 0, function () {
        return this.year() % 100;
    });

    addFormatToken(0, ['YYYY',   4],       0, 'year');
    addFormatToken(0, ['YYYYY',  5],       0, 'year');
    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

    // ALIASES

    addUnitAlias('year', 'y');

    // PARSING

    addRegexToken('Y',      matchSigned);
    addRegexToken('YY',     match1to2, match2);
    addRegexToken('YYYY',   match1to4, match4);
    addRegexToken('YYYYY',  match1to6, match6);
    addRegexToken('YYYYYY', match1to6, match6);

    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
    addParseToken('YYYY', function (input, array) {
        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);
    });
    addParseToken('YY', function (input, array) {
        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // HELPERS

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    // HOOKS

    utils_hooks__hooks.parseTwoDigitYear = function (input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    // MOMENTS

    var getSetYear = makeGetSet('FullYear', false);

    function getIsLeapYear () {
        return isLeapYear(this.year());
    }

    // start-of-first-week - start-of-year
    function firstWeekOffset(year, dow, doy) {
        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)
            fwd = 7 + dow - doy,
            // first-week day local weekday -- which local weekday is fwd
            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;

        return -fwdlw + fwd - 1;
    }

    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
        var localWeekday = (7 + weekday - dow) % 7,
            weekOffset = firstWeekOffset(year, dow, doy),
            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
            resYear, resDayOfYear;

        if (dayOfYear <= 0) {
            resYear = year - 1;
            resDayOfYear = daysInYear(resYear) + dayOfYear;
        } else if (dayOfYear > daysInYear(year)) {
            resYear = year + 1;
            resDayOfYear = dayOfYear - daysInYear(year);
        } else {
            resYear = year;
            resDayOfYear = dayOfYear;
        }

        return {
            year: resYear,
            dayOfYear: resDayOfYear
        };
    }

    function weekOfYear(mom, dow, doy) {
        var weekOffset = firstWeekOffset(mom.year(), dow, doy),
            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
            resWeek, resYear;

        if (week < 1) {
            resYear = mom.year() - 1;
            resWeek = week + weeksInYear(resYear, dow, doy);
        } else if (week > weeksInYear(mom.year(), dow, doy)) {
            resWeek = week - weeksInYear(mom.year(), dow, doy);
            resYear = mom.year() + 1;
        } else {
            resYear = mom.year();
            resWeek = week;
        }

        return {
            week: resWeek,
            year: resYear
        };
    }

    function weeksInYear(year, dow, doy) {
        var weekOffset = firstWeekOffset(year, dow, doy),
            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
    }

    // Pick the first defined of two or three arguments.
    function defaults(a, b, c) {
        if (a != null) {
            return a;
        }
        if (b != null) {
            return b;
        }
        return c;
    }

    function currentDateArray(config) {
        // hooks is actually the exported moment object
        var nowValue = new Date(utils_hooks__hooks.now());
        if (config._useUTC) {
            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
        }
        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function configFromArray (config) {
        var i, date, input = [], currentDate, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear) {
            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse)) {
                getParsingFlags(config)._overflowDayOfYear = true;
            }

            date = createUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
                config._a[MINUTE] === 0 &&
                config._a[SECOND] === 0 &&
                config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);
            week = defaults(w.W, 1);
            weekday = defaults(w.E, 1);
            if (weekday < 1 || weekday > 7) {
                weekdayOverflow = true;
            }
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);
            week = defaults(w.w, 1);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < 0 || weekday > 6) {
                    weekdayOverflow = true;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from begining of week
                weekday = w.e + dow;
                if (w.e < 0 || w.e > 6) {
                    weekdayOverflow = true;
                }
            } else {
                // default to begining of week
                weekday = dow;
            }
        }
        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
            getParsingFlags(config)._overflowWeeks = true;
        } else if (weekdayOverflow != null) {
            getParsingFlags(config)._overflowWeekday = true;
        } else {
            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
            config._a[YEAR] = temp.year;
            config._dayOfYear = temp.dayOfYear;
        }
    }

    // constant that refers to the ISO standard
    utils_hooks__hooks.ISO_8601 = function () {};

    // date from string and format string
    function configFromStringAndFormat(config) {
        // TODO: Move this to another part of the creation flow to prevent circular deps
        if (config._f === utils_hooks__hooks.ISO_8601) {
            configFromISO(config);
            return;
        }

        config._a = [];
        getParsingFlags(config).empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    getParsingFlags(config).unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    getParsingFlags(config).empty = false;
                }
                else {
                    getParsingFlags(config).unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            else if (config._strict && !parsedInput) {
                getParsingFlags(config).unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            getParsingFlags(config).unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (getParsingFlags(config).bigHour === true &&
                config._a[HOUR] <= 12 &&
                config._a[HOUR] > 0) {
            getParsingFlags(config).bigHour = undefined;
        }
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);

        configFromArray(config);
        checkOverflow(config);
    }


    function meridiemFixWrap (locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // this is not supposed to happen
            return hour;
        }
    }

    // date from string and array of format strings
    function configFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            getParsingFlags(config).invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._f = config._f[i];
            configFromStringAndFormat(tempConfig);

            if (!valid__isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += getParsingFlags(tempConfig).charsLeftOver;

            //or tokens
            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

            getParsingFlags(tempConfig).score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    function configFromObject(config) {
        if (config._d) {
            return;
        }

        var i = normalizeObjectUnits(config._i);
        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {
            return obj && parseInt(obj, 10);
        });

        configFromArray(config);
    }

    function createFromConfig (config) {
        var res = new Moment(checkOverflow(prepareConfig(config)));
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    function prepareConfig (config) {
        var input = config._i,
            format = config._f;

        config._locale = config._locale || locale_locales__getLocale(config._l);

        if (input === null || (format === undefined && input === '')) {
            return valid__createInvalid({nullInput: true});
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (isMoment(input)) {
            return new Moment(checkOverflow(input));
        } else if (isArray(format)) {
            configFromStringAndArray(config);
        } else if (format) {
            configFromStringAndFormat(config);
        } else if (isDate(input)) {
            config._d = input;
        } else {
            configFromInput(config);
        }

        if (!valid__isValid(config)) {
            config._d = null;
        }

        return config;
    }

    function configFromInput(config) {
        var input = config._i;
        if (input === undefined) {
            config._d = new Date(utils_hooks__hooks.now());
        } else if (isDate(input)) {
            config._d = new Date(+input);
        } else if (typeof input === 'string') {
            configFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function (obj) {
                return parseInt(obj, 10);
            });
            configFromArray(config);
        } else if (typeof(input) === 'object') {
            configFromObject(config);
        } else if (typeof(input) === 'number') {
            // from milliseconds
            config._d = new Date(input);
        } else {
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    function createLocalOrUTC (input, format, locale, strict, isUTC) {
        var c = {};

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c._isAMomentObject = true;
        c._useUTC = c._isUTC = isUTC;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;

        return createFromConfig(c);
    }

    function local__createLocal (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, false);
    }

    var prototypeMin = deprecate(
         'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',
         function () {
             var other = local__createLocal.apply(null, arguments);
             if (this.isValid() && other.isValid()) {
                 return other < this ? this : other;
             } else {
                 return valid__createInvalid();
             }
         }
     );

    var prototypeMax = deprecate(
        'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',
        function () {
            var other = local__createLocal.apply(null, arguments);
            if (this.isValid() && other.isValid()) {
                return other > this ? this : other;
            } else {
                return valid__createInvalid();
            }
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return local__createLocal();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (!moments[i].isValid() || moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    // TODO: Use [].sort instead?
    function min () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    }

    function max () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    }

    var now = Date.now || function () {
        return +(new Date());
    };

    function Duration (duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 36e5; // 1000 * 60 * 60
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = locale_locales__getLocale();

        this._bubble();
    }

    function isDuration (obj) {
        return obj instanceof Duration;
    }

    // FORMATTING

    function offset (token, separator) {
        addFormatToken(token, 0, 0, function () {
            var offset = this.utcOffset();
            var sign = '+';
            if (offset < 0) {
                offset = -offset;
                sign = '-';
            }
            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
        });
    }

    offset('Z', ':');
    offset('ZZ', '');

    // PARSING

    addRegexToken('Z',  matchShortOffset);
    addRegexToken('ZZ', matchShortOffset);
    addParseToken(['Z', 'ZZ'], function (input, array, config) {
        config._useUTC = true;
        config._tzm = offsetFromString(matchShortOffset, input);
    });

    // HELPERS

    // timezone chunker
    // '+10:00' > ['10',  '00']
    // '-1530'  > ['-15', '30']
    var chunkOffset = /([\+\-]|\d\d)/gi;

    function offsetFromString(matcher, string) {
        var matches = ((string || '').match(matcher) || []);
        var chunk   = matches[matches.length - 1] || [];
        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];
        var minutes = +(parts[1] * 60) + toInt(parts[2]);

        return parts[0] === '+' ? minutes : -minutes;
    }

    // Return a moment from input, that is local/utc/zone equivalent to model.
    function cloneWithOffset(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (isMoment(input) || isDate(input) ? +input : +local__createLocal(input)) - (+res);
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(+res._d + diff);
            utils_hooks__hooks.updateOffset(res, false);
            return res;
        } else {
            return local__createLocal(input).local();
        }
    }

    function getDateOffset (m) {
        // On Firefox.24 Date#getTimezoneOffset returns a floating point.
        // https://github.com/moment/moment/pull/1871
        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
    }

    // HOOKS

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    utils_hooks__hooks.updateOffset = function () {};

    // MOMENTS

    // keepLocalTime = true means only change the timezone, without
    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
    // +0200, so we adjust the time as needed, to be valid.
    //
    // Keeping the time actually adds/subtracts (one hour)
    // from the actual represented time. That is why we call updateOffset
    // a second time. In case it wants us to change the offset again
    // _changeInProgress == true case, then we have to adjust, because
    // there is no such time in the given timezone.
    function getSetOffset (input, keepLocalTime) {
        var offset = this._offset || 0,
            localAdjust;
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        if (input != null) {
            if (typeof input === 'string') {
                input = offsetFromString(matchShortOffset, input);
            } else if (Math.abs(input) < 16) {
                input = input * 60;
            }
            if (!this._isUTC && keepLocalTime) {
                localAdjust = getDateOffset(this);
            }
            this._offset = input;
            this._isUTC = true;
            if (localAdjust != null) {
                this.add(localAdjust, 'm');
            }
            if (offset !== input) {
                if (!keepLocalTime || this._changeInProgress) {
                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);
                } else if (!this._changeInProgress) {
                    this._changeInProgress = true;
                    utils_hooks__hooks.updateOffset(this, true);
                    this._changeInProgress = null;
                }
            }
            return this;
        } else {
            return this._isUTC ? offset : getDateOffset(this);
        }
    }

    function getSetZone (input, keepLocalTime) {
        if (input != null) {
            if (typeof input !== 'string') {
                input = -input;
            }

            this.utcOffset(input, keepLocalTime);

            return this;
        } else {
            return -this.utcOffset();
        }
    }

    function setOffsetToUTC (keepLocalTime) {
        return this.utcOffset(0, keepLocalTime);
    }

    function setOffsetToLocal (keepLocalTime) {
        if (this._isUTC) {
            this.utcOffset(0, keepLocalTime);
            this._isUTC = false;

            if (keepLocalTime) {
                this.subtract(getDateOffset(this), 'm');
            }
        }
        return this;
    }

    function setOffsetToParsedOffset () {
        if (this._tzm) {
            this.utcOffset(this._tzm);
        } else if (typeof this._i === 'string') {
            this.utcOffset(offsetFromString(matchOffset, this._i));
        }
        return this;
    }

    function hasAlignedHourOffset (input) {
        if (!this.isValid()) {
            return false;
        }
        input = input ? local__createLocal(input).utcOffset() : 0;

        return (this.utcOffset() - input) % 60 === 0;
    }

    function isDaylightSavingTime () {
        return (
            this.utcOffset() > this.clone().month(0).utcOffset() ||
            this.utcOffset() > this.clone().month(5).utcOffset()
        );
    }

    function isDaylightSavingTimeShifted () {
        if (!isUndefined(this._isDSTShifted)) {
            return this._isDSTShifted;
        }

        var c = {};

        copyConfig(c, this);
        c = prepareConfig(c);

        if (c._a) {
            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);
            this._isDSTShifted = this.isValid() &&
                compareArrays(c._a, other.toArray()) > 0;
        } else {
            this._isDSTShifted = false;
        }

        return this._isDSTShifted;
    }

    function isLocal () {
        return this.isValid() ? !this._isUTC : false;
    }

    function isUtcOffset () {
        return this.isValid() ? this._isUTC : false;
    }

    function isUtc () {
        return this.isValid() ? this._isUTC && this._offset === 0 : false;
    }

    // ASP.NET json date format regex
    var aspNetRegex = /(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;

    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
    var isoRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;

    function create__createDuration (input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            diffRes;

        if (isDuration(input)) {
            duration = {
                ms : input._milliseconds,
                d  : input._days,
                M  : input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y  : 0,
                d  : toInt(match[DATE])        * sign,
                h  : toInt(match[HOUR])        * sign,
                m  : toInt(match[MINUTE])      * sign,
                s  : toInt(match[SECOND])      * sign,
                ms : toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = isoRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y : parseIso(match[2], sign),
                M : parseIso(match[3], sign),
                d : parseIso(match[4], sign),
                h : parseIso(match[5], sign),
                m : parseIso(match[6], sign),
                s : parseIso(match[7], sign),
                w : parseIso(match[8], sign)
            };
        } else if (duration == null) {// checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    }

    create__createDuration.fn = Duration.prototype;

    function parseIso (inp, sign) {
        // We'd normally use ~~inp for this, but unfortunately it also
        // converts floats to ints.
        // inp may be undefined, so careful calling replace on it.
        var res = inp && parseFloat(inp.replace(',', '.'));
        // apply sign while we're at it
        return (isNaN(res) ? 0 : res) * sign;
    }

    function positiveMomentsDifference(base, other) {
        var res = {milliseconds: 0, months: 0};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        if (!(base.isValid() && other.isValid())) {
            return {milliseconds: 0, months: 0};
        }

        other = cloneWithOffset(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    // TODO: remove 'name' arg after deprecation is removed
    function createAdder(direction, name) {
        return function (val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');
                tmp = val; val = period; period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = create__createDuration(val, period);
            add_subtract__addSubtract(this, dur, direction);
            return this;
        };
    }

    function add_subtract__addSubtract (mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;

        if (!mom.isValid()) {
            // No op
            return;
        }

        updateOffset = updateOffset == null ? true : updateOffset;

        if (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        if (days) {
            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);
        }
        if (months) {
            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            utils_hooks__hooks.updateOffset(mom, days || months);
        }
    }

    var add_subtract__add      = createAdder(1, 'add');
    var add_subtract__subtract = createAdder(-1, 'subtract');

    function moment_calendar__calendar (time, formats) {
        // We want to compare the start of today, vs this.
        // Getting start-of-today depends on whether we're local/utc/offset or not.
        var now = time || local__createLocal(),
            sod = cloneWithOffset(now, this).startOf('day'),
            diff = this.diff(sod, 'days', true),
            format = diff < -6 ? 'sameElse' :
                diff < -1 ? 'lastWeek' :
                diff < 0 ? 'lastDay' :
                diff < 1 ? 'sameDay' :
                diff < 2 ? 'nextDay' :
                diff < 7 ? 'nextWeek' : 'sameElse';

        var output = formats && (isFunction(formats[format]) ? formats[format]() : formats[format]);

        return this.format(output || this.localeData().calendar(format, this, local__createLocal(now)));
    }

    function clone () {
        return new Moment(this);
    }

    function isAfter (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return +this > +localInput;
        } else {
            return +localInput < +this.clone().startOf(units);
        }
    }

    function isBefore (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return +this < +localInput;
        } else {
            return +this.clone().endOf(units) < +localInput;
        }
    }

    function isBetween (from, to, units) {
        return this.isAfter(from, units) && this.isBefore(to, units);
    }

    function isSame (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input),
            inputMs;
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units || 'millisecond');
        if (units === 'millisecond') {
            return +this === +localInput;
        } else {
            inputMs = +localInput;
            return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));
        }
    }

    function isSameOrAfter (input, units) {
        return this.isSame(input, units) || this.isAfter(input,units);
    }

    function isSameOrBefore (input, units) {
        return this.isSame(input, units) || this.isBefore(input,units);
    }

    function diff (input, units, asFloat) {
        var that,
            zoneDelta,
            delta, output;

        if (!this.isValid()) {
            return NaN;
        }

        that = cloneWithOffset(input, this);

        if (!that.isValid()) {
            return NaN;
        }

        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;

        units = normalizeUnits(units);

        if (units === 'year' || units === 'month' || units === 'quarter') {
            output = monthDiff(this, that);
            if (units === 'quarter') {
                output = output / 3;
            } else if (units === 'year') {
                output = output / 12;
            }
        } else {
            delta = this - that;
            output = units === 'second' ? delta / 1e3 : // 1000
                units === 'minute' ? delta / 6e4 : // 1000 * 60
                units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60
                units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst
                units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst
                delta;
        }
        return asFloat ? output : absFloor(output);
    }

    function monthDiff (a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        return -(wholeMonthDiff + adjust);
    }

    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';

    function toString () {
        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
    }

    function moment_format__toISOString () {
        var m = this.clone().utc();
        if (0 < m.year() && m.year() <= 9999) {
            if (isFunction(Date.prototype.toISOString)) {
                // native implementation is ~50x faster, use it when we can
                return this.toDate().toISOString();
            } else {
                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        } else {
            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
        }
    }

    function format (inputString) {
        var output = formatMoment(this, inputString || utils_hooks__hooks.defaultFormat);
        return this.localeData().postformat(output);
    }

    function from (time, withoutSuffix) {
        if (this.isValid() &&
                ((isMoment(time) && time.isValid()) ||
                 local__createLocal(time).isValid())) {
            return create__createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function fromNow (withoutSuffix) {
        return this.from(local__createLocal(), withoutSuffix);
    }

    function to (time, withoutSuffix) {
        if (this.isValid() &&
                ((isMoment(time) && time.isValid()) ||
                 local__createLocal(time).isValid())) {
            return create__createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function toNow (withoutSuffix) {
        return this.to(local__createLocal(), withoutSuffix);
    }

    // If passed a locale key, it will set the locale for this
    // instance.  Otherwise, it will return the locale configuration
    // variables for this instance.
    function locale (key) {
        var newLocaleData;

        if (key === undefined) {
            return this._locale._abbr;
        } else {
            newLocaleData = locale_locales__getLocale(key);
            if (newLocaleData != null) {
                this._locale = newLocaleData;
            }
            return this;
        }
    }

    var lang = deprecate(
        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
        function (key) {
            if (key === undefined) {
                return this.localeData();
            } else {
                return this.locale(key);
            }
        }
    );

    function localeData () {
        return this._locale;
    }

    function startOf (units) {
        units = normalizeUnits(units);
        // the following switch intentionally omits break keywords
        // to utilize falling through the cases.
        switch (units) {
        case 'year':
            this.month(0);
            /* falls through */
        case 'quarter':
        case 'month':
            this.date(1);
            /* falls through */
        case 'week':
        case 'isoWeek':
        case 'day':
            this.hours(0);
            /* falls through */
        case 'hour':
            this.minutes(0);
            /* falls through */
        case 'minute':
            this.seconds(0);
            /* falls through */
        case 'second':
            this.milliseconds(0);
        }

        // weeks are a special case
        if (units === 'week') {
            this.weekday(0);
        }
        if (units === 'isoWeek') {
            this.isoWeekday(1);
        }

        // quarters are also special
        if (units === 'quarter') {
            this.month(Math.floor(this.month() / 3) * 3);
        }

        return this;
    }

    function endOf (units) {
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond') {
            return this;
        }
        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
    }

    function to_type__valueOf () {
        return +this._d - ((this._offset || 0) * 60000);
    }

    function unix () {
        return Math.floor(+this / 1000);
    }

    function toDate () {
        return this._offset ? new Date(+this) : this._d;
    }

    function toArray () {
        var m = this;
        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
    }

    function toObject () {
        var m = this;
        return {
            years: m.year(),
            months: m.month(),
            date: m.date(),
            hours: m.hours(),
            minutes: m.minutes(),
            seconds: m.seconds(),
            milliseconds: m.milliseconds()
        };
    }

    function toJSON () {
        // JSON.stringify(new Date(NaN)) === 'null'
        return this.isValid() ? this.toISOString() : 'null';
    }

    function moment_valid__isValid () {
        return valid__isValid(this);
    }

    function parsingFlags () {
        return extend({}, getParsingFlags(this));
    }

    function invalidAt () {
        return getParsingFlags(this).overflow;
    }

    function creationData() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }

    // FORMATTING

    addFormatToken(0, ['gg', 2], 0, function () {
        return this.weekYear() % 100;
    });

    addFormatToken(0, ['GG', 2], 0, function () {
        return this.isoWeekYear() % 100;
    });

    function addWeekYearFormatToken (token, getter) {
        addFormatToken(0, [token, token.length], 0, getter);
    }

    addWeekYearFormatToken('gggg',     'weekYear');
    addWeekYearFormatToken('ggggg',    'weekYear');
    addWeekYearFormatToken('GGGG',  'isoWeekYear');
    addWeekYearFormatToken('GGGGG', 'isoWeekYear');

    // ALIASES

    addUnitAlias('weekYear', 'gg');
    addUnitAlias('isoWeekYear', 'GG');

    // PARSING

    addRegexToken('G',      matchSigned);
    addRegexToken('g',      matchSigned);
    addRegexToken('GG',     match1to2, match2);
    addRegexToken('gg',     match1to2, match2);
    addRegexToken('GGGG',   match1to4, match4);
    addRegexToken('gggg',   match1to4, match4);
    addRegexToken('GGGGG',  match1to6, match6);
    addRegexToken('ggggg',  match1to6, match6);

    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
        week[token.substr(0, 2)] = toInt(input);
    });

    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // MOMENTS

    function getSetWeekYear (input) {
        return getSetWeekYearHelper.call(this,
                input,
                this.week(),
                this.weekday(),
                this.localeData()._week.dow,
                this.localeData()._week.doy);
    }

    function getSetISOWeekYear (input) {
        return getSetWeekYearHelper.call(this,
                input, this.isoWeek(), this.isoWeekday(), 1, 4);
    }

    function getISOWeeksInYear () {
        return weeksInYear(this.year(), 1, 4);
    }

    function getWeeksInYear () {
        var weekInfo = this.localeData()._week;
        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
    }

    function getSetWeekYearHelper(input, week, weekday, dow, doy) {
        var weeksTarget;
        if (input == null) {
            return weekOfYear(this, dow, doy).year;
        } else {
            weeksTarget = weeksInYear(input, dow, doy);
            if (week > weeksTarget) {
                week = weeksTarget;
            }
            return setWeekAll.call(this, input, week, weekday, dow, doy);
        }
    }

    function setWeekAll(weekYear, week, weekday, dow, doy) {
        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);

        // console.log("got", weekYear, week, weekday, "set", date.toISOString());
        this.year(date.getUTCFullYear());
        this.month(date.getUTCMonth());
        this.date(date.getUTCDate());
        return this;
    }

    // FORMATTING

    addFormatToken('Q', 0, 'Qo', 'quarter');

    // ALIASES

    addUnitAlias('quarter', 'Q');

    // PARSING

    addRegexToken('Q', match1);
    addParseToken('Q', function (input, array) {
        array[MONTH] = (toInt(input) - 1) * 3;
    });

    // MOMENTS

    function getSetQuarter (input) {
        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
    }

    // FORMATTING

    addFormatToken('w', ['ww', 2], 'wo', 'week');
    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

    // ALIASES

    addUnitAlias('week', 'w');
    addUnitAlias('isoWeek', 'W');

    // PARSING

    addRegexToken('w',  match1to2);
    addRegexToken('ww', match1to2, match2);
    addRegexToken('W',  match1to2);
    addRegexToken('WW', match1to2, match2);

    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    });

    // HELPERS

    // LOCALES

    function localeWeek (mom) {
        return weekOfYear(mom, this._week.dow, this._week.doy).week;
    }

    var defaultLocaleWeek = {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    };

    function localeFirstDayOfWeek () {
        return this._week.dow;
    }

    function localeFirstDayOfYear () {
        return this._week.doy;
    }

    // MOMENTS

    function getSetWeek (input) {
        var week = this.localeData().week(this);
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    function getSetISOWeek (input) {
        var week = weekOfYear(this, 1, 4).week;
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    // FORMATTING

    addFormatToken('D', ['DD', 2], 'Do', 'date');

    // ALIASES

    addUnitAlias('date', 'D');

    // PARSING

    addRegexToken('D',  match1to2);
    addRegexToken('DD', match1to2, match2);
    addRegexToken('Do', function (isStrict, locale) {
        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;
    });

    addParseToken(['D', 'DD'], DATE);
    addParseToken('Do', function (input, array) {
        array[DATE] = toInt(input.match(match1to2)[0], 10);
    });

    // MOMENTS

    var getSetDayOfMonth = makeGetSet('Date', true);

    // FORMATTING

    addFormatToken('d', 0, 'do', 'day');

    addFormatToken('dd', 0, 0, function (format) {
        return this.localeData().weekdaysMin(this, format);
    });

    addFormatToken('ddd', 0, 0, function (format) {
        return this.localeData().weekdaysShort(this, format);
    });

    addFormatToken('dddd', 0, 0, function (format) {
        return this.localeData().weekdays(this, format);
    });

    addFormatToken('e', 0, 0, 'weekday');
    addFormatToken('E', 0, 0, 'isoWeekday');

    // ALIASES

    addUnitAlias('day', 'd');
    addUnitAlias('weekday', 'e');
    addUnitAlias('isoWeekday', 'E');

    // PARSING

    addRegexToken('d',    match1to2);
    addRegexToken('e',    match1to2);
    addRegexToken('E',    match1to2);
    addRegexToken('dd',   matchWord);
    addRegexToken('ddd',  matchWord);
    addRegexToken('dddd', matchWord);

    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
        var weekday = config._locale.weekdaysParse(input, token, config._strict);
        // if we didn't get a weekday name, mark the date as invalid
        if (weekday != null) {
            week.d = weekday;
        } else {
            getParsingFlags(config).invalidWeekday = input;
        }
    });

    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
        week[token] = toInt(input);
    });

    // HELPERS

    function parseWeekday(input, locale) {
        if (typeof input !== 'string') {
            return input;
        }

        if (!isNaN(input)) {
            return parseInt(input, 10);
        }

        input = locale.weekdaysParse(input);
        if (typeof input === 'number') {
            return input;
        }

        return null;
    }

    // LOCALES

    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');
    function localeWeekdays (m, format) {
        return isArray(this._weekdays) ? this._weekdays[m.day()] :
            this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];
    }

    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');
    function localeWeekdaysShort (m) {
        return this._weekdaysShort[m.day()];
    }

    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');
    function localeWeekdaysMin (m) {
        return this._weekdaysMin[m.day()];
    }

    function localeWeekdaysParse (weekdayName, format, strict) {
        var i, mom, regex;

        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._minWeekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._fullWeekdaysParse = [];
        }

        for (i = 0; i < 7; i++) {
            // make the regex if we don't have it already

            mom = local__createLocal([2000, 1]).day(i);
            if (strict && !this._fullWeekdaysParse[i]) {
                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\.?') + '$', 'i');
                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\.?') + '$', 'i');
                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\.?') + '$', 'i');
            }
            if (!this._weekdaysParse[i]) {
                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function getSetDayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (input != null) {
            input = parseWeekday(input, this.localeData());
            return this.add(input - day, 'd');
        } else {
            return day;
        }
    }

    function getSetLocaleDayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return input == null ? weekday : this.add(input - weekday, 'd');
    }

    function getSetISODayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        // behaves the same as moment#day except
        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
        // as a setter, sunday should belong to the previous week.
        return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);
    }

    // FORMATTING

    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

    // ALIASES

    addUnitAlias('dayOfYear', 'DDD');

    // PARSING

    addRegexToken('DDD',  match1to3);
    addRegexToken('DDDD', match3);
    addParseToken(['DDD', 'DDDD'], function (input, array, config) {
        config._dayOfYear = toInt(input);
    });

    // HELPERS

    // MOMENTS

    function getSetDayOfYear (input) {
        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
    }

    // FORMATTING

    function hFormat() {
        return this.hours() % 12 || 12;
    }

    addFormatToken('H', ['HH', 2], 0, 'hour');
    addFormatToken('h', ['hh', 2], 0, hFormat);

    addFormatToken('hmm', 0, 0, function () {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
    });

    addFormatToken('hmmss', 0, 0, function () {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    addFormatToken('Hmm', 0, 0, function () {
        return '' + this.hours() + zeroFill(this.minutes(), 2);
    });

    addFormatToken('Hmmss', 0, 0, function () {
        return '' + this.hours() + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    function meridiem (token, lowercase) {
        addFormatToken(token, 0, 0, function () {
            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
        });
    }

    meridiem('a', true);
    meridiem('A', false);

    // ALIASES

    addUnitAlias('hour', 'h');

    // PARSING

    function matchMeridiem (isStrict, locale) {
        return locale._meridiemParse;
    }

    addRegexToken('a',  matchMeridiem);
    addRegexToken('A',  matchMeridiem);
    addRegexToken('H',  match1to2);
    addRegexToken('h',  match1to2);
    addRegexToken('HH', match1to2, match2);
    addRegexToken('hh', match1to2, match2);

    addRegexToken('hmm', match3to4);
    addRegexToken('hmmss', match5to6);
    addRegexToken('Hmm', match3to4);
    addRegexToken('Hmmss', match5to6);

    addParseToken(['H', 'HH'], HOUR);
    addParseToken(['a', 'A'], function (input, array, config) {
        config._isPm = config._locale.isPM(input);
        config._meridiem = input;
    });
    addParseToken(['h', 'hh'], function (input, array, config) {
        array[HOUR] = toInt(input);
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmm', function (input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmmss', function (input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('Hmm', function (input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
    });
    addParseToken('Hmmss', function (input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
    });

    // LOCALES

    function localeIsPM (input) {
        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
        // Using charAt should be more compatible.
        return ((input + '').toLowerCase().charAt(0) === 'p');
    }

    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;
    function localeMeridiem (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    }


    // MOMENTS

    // Setting the hour should keep the time, because the user explicitly
    // specified which hour he wants. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    var getSetHour = makeGetSet('Hours', true);

    // FORMATTING

    addFormatToken('m', ['mm', 2], 0, 'minute');

    // ALIASES

    addUnitAlias('minute', 'm');

    // PARSING

    addRegexToken('m',  match1to2);
    addRegexToken('mm', match1to2, match2);
    addParseToken(['m', 'mm'], MINUTE);

    // MOMENTS

    var getSetMinute = makeGetSet('Minutes', false);

    // FORMATTING

    addFormatToken('s', ['ss', 2], 0, 'second');

    // ALIASES

    addUnitAlias('second', 's');

    // PARSING

    addRegexToken('s',  match1to2);
    addRegexToken('ss', match1to2, match2);
    addParseToken(['s', 'ss'], SECOND);

    // MOMENTS

    var getSetSecond = makeGetSet('Seconds', false);

    // FORMATTING

    addFormatToken('S', 0, 0, function () {
        return ~~(this.millisecond() / 100);
    });

    addFormatToken(0, ['SS', 2], 0, function () {
        return ~~(this.millisecond() / 10);
    });

    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
    addFormatToken(0, ['SSSS', 4], 0, function () {
        return this.millisecond() * 10;
    });
    addFormatToken(0, ['SSSSS', 5], 0, function () {
        return this.millisecond() * 100;
    });
    addFormatToken(0, ['SSSSSS', 6], 0, function () {
        return this.millisecond() * 1000;
    });
    addFormatToken(0, ['SSSSSSS', 7], 0, function () {
        return this.millisecond() * 10000;
    });
    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
        return this.millisecond() * 100000;
    });
    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
        return this.millisecond() * 1000000;
    });


    // ALIASES

    addUnitAlias('millisecond', 'ms');

    // PARSING

    addRegexToken('S',    match1to3, match1);
    addRegexToken('SS',   match1to3, match2);
    addRegexToken('SSS',  match1to3, match3);

    var token;
    for (token = 'SSSS'; token.length <= 9; token += 'S') {
        addRegexToken(token, matchUnsigned);
    }

    function parseMs(input, array) {
        array[MILLISECOND] = toInt(('0.' + input) * 1000);
    }

    for (token = 'S'; token.length <= 9; token += 'S') {
        addParseToken(token, parseMs);
    }
    // MOMENTS

    var getSetMillisecond = makeGetSet('Milliseconds', false);

    // FORMATTING

    addFormatToken('z',  0, 0, 'zoneAbbr');
    addFormatToken('zz', 0, 0, 'zoneName');

    // MOMENTS

    function getZoneAbbr () {
        return this._isUTC ? 'UTC' : '';
    }

    function getZoneName () {
        return this._isUTC ? 'Coordinated Universal Time' : '';
    }

    var momentPrototype__proto = Moment.prototype;

    momentPrototype__proto.add               = add_subtract__add;
    momentPrototype__proto.calendar          = moment_calendar__calendar;
    momentPrototype__proto.clone             = clone;
    momentPrototype__proto.diff              = diff;
    momentPrototype__proto.endOf             = endOf;
    momentPrototype__proto.format            = format;
    momentPrototype__proto.from              = from;
    momentPrototype__proto.fromNow           = fromNow;
    momentPrototype__proto.to                = to;
    momentPrototype__proto.toNow             = toNow;
    momentPrototype__proto.get               = getSet;
    momentPrototype__proto.invalidAt         = invalidAt;
    momentPrototype__proto.isAfter           = isAfter;
    momentPrototype__proto.isBefore          = isBefore;
    momentPrototype__proto.isBetween         = isBetween;
    momentPrototype__proto.isSame            = isSame;
    momentPrototype__proto.isSameOrAfter     = isSameOrAfter;
    momentPrototype__proto.isSameOrBefore    = isSameOrBefore;
    momentPrototype__proto.isValid           = moment_valid__isValid;
    momentPrototype__proto.lang              = lang;
    momentPrototype__proto.locale            = locale;
    momentPrototype__proto.localeData        = localeData;
    momentPrototype__proto.max               = prototypeMax;
    momentPrototype__proto.min               = prototypeMin;
    momentPrototype__proto.parsingFlags      = parsingFlags;
    momentPrototype__proto.set               = getSet;
    momentPrototype__proto.startOf           = startOf;
    momentPrototype__proto.subtract          = add_subtract__subtract;
    momentPrototype__proto.toArray           = toArray;
    momentPrototype__proto.toObject          = toObject;
    momentPrototype__proto.toDate            = toDate;
    momentPrototype__proto.toISOString       = moment_format__toISOString;
    momentPrototype__proto.toJSON            = toJSON;
    momentPrototype__proto.toString          = toString;
    momentPrototype__proto.unix              = unix;
    momentPrototype__proto.valueOf           = to_type__valueOf;
    momentPrototype__proto.creationData      = creationData;

    // Year
    momentPrototype__proto.year       = getSetYear;
    momentPrototype__proto.isLeapYear = getIsLeapYear;

    // Week Year
    momentPrototype__proto.weekYear    = getSetWeekYear;
    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;

    // Quarter
    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;

    // Month
    momentPrototype__proto.month       = getSetMonth;
    momentPrototype__proto.daysInMonth = getDaysInMonth;

    // Week
    momentPrototype__proto.week           = momentPrototype__proto.weeks        = getSetWeek;
    momentPrototype__proto.isoWeek        = momentPrototype__proto.isoWeeks     = getSetISOWeek;
    momentPrototype__proto.weeksInYear    = getWeeksInYear;
    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;

    // Day
    momentPrototype__proto.date       = getSetDayOfMonth;
    momentPrototype__proto.day        = momentPrototype__proto.days             = getSetDayOfWeek;
    momentPrototype__proto.weekday    = getSetLocaleDayOfWeek;
    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;
    momentPrototype__proto.dayOfYear  = getSetDayOfYear;

    // Hour
    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;

    // Minute
    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;

    // Second
    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;

    // Millisecond
    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;

    // Offset
    momentPrototype__proto.utcOffset            = getSetOffset;
    momentPrototype__proto.utc                  = setOffsetToUTC;
    momentPrototype__proto.local                = setOffsetToLocal;
    momentPrototype__proto.parseZone            = setOffsetToParsedOffset;
    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;
    momentPrototype__proto.isDST                = isDaylightSavingTime;
    momentPrototype__proto.isDSTShifted         = isDaylightSavingTimeShifted;
    momentPrototype__proto.isLocal              = isLocal;
    momentPrototype__proto.isUtcOffset          = isUtcOffset;
    momentPrototype__proto.isUtc                = isUtc;
    momentPrototype__proto.isUTC                = isUtc;

    // Timezone
    momentPrototype__proto.zoneAbbr = getZoneAbbr;
    momentPrototype__proto.zoneName = getZoneName;

    // Deprecations
    momentPrototype__proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
    momentPrototype__proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);
    momentPrototype__proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779', getSetZone);

    var momentPrototype = momentPrototype__proto;

    function moment__createUnix (input) {
        return local__createLocal(input * 1000);
    }

    function moment__createInZone () {
        return local__createLocal.apply(null, arguments).parseZone();
    }

    var defaultCalendar = {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    };

    function locale_calendar__calendar (key, mom, now) {
        var output = this._calendar[key];
        return isFunction(output) ? output.call(mom, now) : output;
    }

    var defaultLongDateFormat = {
        LTS  : 'h:mm:ss A',
        LT   : 'h:mm A',
        L    : 'MM/DD/YYYY',
        LL   : 'MMMM D, YYYY',
        LLL  : 'MMMM D, YYYY h:mm A',
        LLLL : 'dddd, MMMM D, YYYY h:mm A'
    };

    function longDateFormat (key) {
        var format = this._longDateFormat[key],
            formatUpper = this._longDateFormat[key.toUpperCase()];

        if (format || !formatUpper) {
            return format;
        }

        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {
            return val.slice(1);
        });

        return this._longDateFormat[key];
    }

    var defaultInvalidDate = 'Invalid date';

    function invalidDate () {
        return this._invalidDate;
    }

    var defaultOrdinal = '%d';
    var defaultOrdinalParse = /\d{1,2}/;

    function ordinal (number) {
        return this._ordinal.replace('%d', number);
    }

    function preParsePostFormat (string) {
        return string;
    }

    var defaultRelativeTime = {
        future : 'in %s',
        past   : '%s ago',
        s  : 'a few seconds',
        m  : 'a minute',
        mm : '%d minutes',
        h  : 'an hour',
        hh : '%d hours',
        d  : 'a day',
        dd : '%d days',
        M  : 'a month',
        MM : '%d months',
        y  : 'a year',
        yy : '%d years'
    };

    function relative__relativeTime (number, withoutSuffix, string, isFuture) {
        var output = this._relativeTime[string];
        return (isFunction(output)) ?
            output(number, withoutSuffix, string, isFuture) :
            output.replace(/%d/i, number);
    }

    function pastFuture (diff, output) {
        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
        return isFunction(format) ? format(output) : format.replace(/%s/i, output);
    }

    function locale_set__set (config) {
        var prop, i;
        for (i in config) {
            prop = config[i];
            if (isFunction(prop)) {
                this[i] = prop;
            } else {
                this['_' + i] = prop;
            }
        }
        // Lenient ordinal parsing accepts just a number in addition to
        // number + (possibly) stuff coming from _ordinalParseLenient.
        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\d{1,2}/).source);
    }

    var prototype__proto = Locale.prototype;

    prototype__proto._calendar       = defaultCalendar;
    prototype__proto.calendar        = locale_calendar__calendar;
    prototype__proto._longDateFormat = defaultLongDateFormat;
    prototype__proto.longDateFormat  = longDateFormat;
    prototype__proto._invalidDate    = defaultInvalidDate;
    prototype__proto.invalidDate     = invalidDate;
    prototype__proto._ordinal        = defaultOrdinal;
    prototype__proto.ordinal         = ordinal;
    prototype__proto._ordinalParse   = defaultOrdinalParse;
    prototype__proto.preparse        = preParsePostFormat;
    prototype__proto.postformat      = preParsePostFormat;
    prototype__proto._relativeTime   = defaultRelativeTime;
    prototype__proto.relativeTime    = relative__relativeTime;
    prototype__proto.pastFuture      = pastFuture;
    prototype__proto.set             = locale_set__set;

    // Month
    prototype__proto.months       =        localeMonths;
    prototype__proto._months      = defaultLocaleMonths;
    prototype__proto.monthsShort  =        localeMonthsShort;
    prototype__proto._monthsShort = defaultLocaleMonthsShort;
    prototype__proto.monthsParse  =        localeMonthsParse;

    // Week
    prototype__proto.week = localeWeek;
    prototype__proto._week = defaultLocaleWeek;
    prototype__proto.firstDayOfYear = localeFirstDayOfYear;
    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;

    // Day of Week
    prototype__proto.weekdays       =        localeWeekdays;
    prototype__proto._weekdays      = defaultLocaleWeekdays;
    prototype__proto.weekdaysMin    =        localeWeekdaysMin;
    prototype__proto._weekdaysMin   = defaultLocaleWeekdaysMin;
    prototype__proto.weekdaysShort  =        localeWeekdaysShort;
    prototype__proto._weekdaysShort = defaultLocaleWeekdaysShort;
    prototype__proto.weekdaysParse  =        localeWeekdaysParse;

    // Hours
    prototype__proto.isPM = localeIsPM;
    prototype__proto._meridiemParse = defaultLocaleMeridiemParse;
    prototype__proto.meridiem = localeMeridiem;

    function lists__get (format, index, field, setter) {
        var locale = locale_locales__getLocale();
        var utc = create_utc__createUTC().set(setter, index);
        return locale[field](utc, format);
    }

    function list (format, index, field, count, setter) {
        if (typeof format === 'number') {
            index = format;
            format = undefined;
        }

        format = format || '';

        if (index != null) {
            return lists__get(format, index, field, setter);
        }

        var i;
        var out = [];
        for (i = 0; i < count; i++) {
            out[i] = lists__get(format, i, field, setter);
        }
        return out;
    }

    function lists__listMonths (format, index) {
        return list(format, index, 'months', 12, 'month');
    }

    function lists__listMonthsShort (format, index) {
        return list(format, index, 'monthsShort', 12, 'month');
    }

    function lists__listWeekdays (format, index) {
        return list(format, index, 'weekdays', 7, 'day');
    }

    function lists__listWeekdaysShort (format, index) {
        return list(format, index, 'weekdaysShort', 7, 'day');
    }

    function lists__listWeekdaysMin (format, index) {
        return list(format, index, 'weekdaysMin', 7, 'day');
    }

    locale_locales__getSetGlobalLocale('en', {
        monthsParse : [/^jan/i, /^feb/i, /^mar/i, /^apr/i, /^may/i, /^jun/i, /^jul/i, /^aug/i, /^sep/i, /^oct/i, /^nov/i, /^dec/i],
        longMonthsParse : [/^january$/i, /^february$/i, /^march$/i, /^april$/i, /^may$/i, /^june$/i, /^july$/i, /^august$/i, /^september$/i, /^october$/i, /^november$/i, /^december$/i],
        shortMonthsParse : [/^jan$/i, /^feb$/i, /^mar$/i, /^apr$/i, /^may$/i, /^jun$/i, /^jul$/i, /^aug/i, /^sept?$/i, /^oct$/i, /^nov$/i, /^dec$/i],
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    // Side effect imports
    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);
    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);

    var mathAbs = Math.abs;

    function duration_abs__abs () {
        var data           = this._data;

        this._milliseconds = mathAbs(this._milliseconds);
        this._days         = mathAbs(this._days);
        this._months       = mathAbs(this._months);

        data.milliseconds  = mathAbs(data.milliseconds);
        data.seconds       = mathAbs(data.seconds);
        data.minutes       = mathAbs(data.minutes);
        data.hours         = mathAbs(data.hours);
        data.months        = mathAbs(data.months);
        data.years         = mathAbs(data.years);

        return this;
    }

    function duration_add_subtract__addSubtract (duration, input, value, direction) {
        var other = create__createDuration(input, value);

        duration._milliseconds += direction * other._milliseconds;
        duration._days         += direction * other._days;
        duration._months       += direction * other._months;

        return duration._bubble();
    }

    // supports only 2.0-style add(1, 's') or add(duration)
    function duration_add_subtract__add (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, 1);
    }

    // supports only 2.0-style subtract(1, 's') or subtract(duration)
    function duration_add_subtract__subtract (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, -1);
    }

    function absCeil (number) {
        if (number < 0) {
            return Math.floor(number);
        } else {
            return Math.ceil(number);
        }
    }

    function bubble () {
        var milliseconds = this._milliseconds;
        var days         = this._days;
        var months       = this._months;
        var data         = this._data;
        var seconds, minutes, hours, years, monthsFromDays;

        // if we have a mix of positive and negative values, bubble down first
        // check: https://github.com/moment/moment/issues/2166
        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||
                (milliseconds <= 0 && days <= 0 && months <= 0))) {
            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
            days = 0;
            months = 0;
        }

        // The following code bubbles up values, see the tests for
        // examples of what that means.
        data.milliseconds = milliseconds % 1000;

        seconds           = absFloor(milliseconds / 1000);
        data.seconds      = seconds % 60;

        minutes           = absFloor(seconds / 60);
        data.minutes      = minutes % 60;

        hours             = absFloor(minutes / 60);
        data.hours        = hours % 24;

        days += absFloor(hours / 24);

        // convert days to months
        monthsFromDays = absFloor(daysToMonths(days));
        months += monthsFromDays;
        days -= absCeil(monthsToDays(monthsFromDays));

        // 12 months -> 1 year
        years = absFloor(months / 12);
        months %= 12;

        data.days   = days;
        data.months = months;
        data.years  = years;

        return this;
    }

    function daysToMonths (days) {
        // 400 years have 146097 days (taking into account leap year rules)
        // 400 years have 12 months === 4800
        return days * 4800 / 146097;
    }

    function monthsToDays (months) {
        // the reverse of daysToMonths
        return months * 146097 / 4800;
    }

    function as (units) {
        var days;
        var months;
        var milliseconds = this._milliseconds;

        units = normalizeUnits(units);

        if (units === 'month' || units === 'year') {
            days   = this._days   + milliseconds / 864e5;
            months = this._months + daysToMonths(days);
            return units === 'month' ? months : months / 12;
        } else {
            // handle milliseconds separately because of floating point math errors (issue #1867)
            days = this._days + Math.round(monthsToDays(this._months));
            switch (units) {
                case 'week'   : return days / 7     + milliseconds / 6048e5;
                case 'day'    : return days         + milliseconds / 864e5;
                case 'hour'   : return days * 24    + milliseconds / 36e5;
                case 'minute' : return days * 1440  + milliseconds / 6e4;
                case 'second' : return days * 86400 + milliseconds / 1000;
                // Math.floor prevents floating point math errors here
                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;
                default: throw new Error('Unknown unit ' + units);
            }
        }
    }

    // TODO: Use this.as('ms')?
    function duration_as__valueOf () {
        return (
            this._milliseconds +
            this._days * 864e5 +
            (this._months % 12) * 2592e6 +
            toInt(this._months / 12) * 31536e6
        );
    }

    function makeAs (alias) {
        return function () {
            return this.as(alias);
        };
    }

    var asMilliseconds = makeAs('ms');
    var asSeconds      = makeAs('s');
    var asMinutes      = makeAs('m');
    var asHours        = makeAs('h');
    var asDays         = makeAs('d');
    var asWeeks        = makeAs('w');
    var asMonths       = makeAs('M');
    var asYears        = makeAs('y');

    function duration_get__get (units) {
        units = normalizeUnits(units);
        return this[units + 's']();
    }

    function makeGetter(name) {
        return function () {
            return this._data[name];
        };
    }

    var milliseconds = makeGetter('milliseconds');
    var seconds      = makeGetter('seconds');
    var minutes      = makeGetter('minutes');
    var hours        = makeGetter('hours');
    var days         = makeGetter('days');
    var months       = makeGetter('months');
    var years        = makeGetter('years');

    function weeks () {
        return absFloor(this.days() / 7);
    }

    var round = Math.round;
    var thresholds = {
        s: 45,  // seconds to minute
        m: 45,  // minutes to hour
        h: 22,  // hours to day
        d: 26,  // days to month
        M: 11   // months to year
    };

    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function duration_humanize__relativeTime (posNegDuration, withoutSuffix, locale) {
        var duration = create__createDuration(posNegDuration).abs();
        var seconds  = round(duration.as('s'));
        var minutes  = round(duration.as('m'));
        var hours    = round(duration.as('h'));
        var days     = round(duration.as('d'));
        var months   = round(duration.as('M'));
        var years    = round(duration.as('y'));

        var a = seconds < thresholds.s && ['s', seconds]  ||
                minutes <= 1           && ['m']           ||
                minutes < thresholds.m && ['mm', minutes] ||
                hours   <= 1           && ['h']           ||
                hours   < thresholds.h && ['hh', hours]   ||
                days    <= 1           && ['d']           ||
                days    < thresholds.d && ['dd', days]    ||
                months  <= 1           && ['M']           ||
                months  < thresholds.M && ['MM', months]  ||
                years   <= 1           && ['y']           || ['yy', years];

        a[2] = withoutSuffix;
        a[3] = +posNegDuration > 0;
        a[4] = locale;
        return substituteTimeAgo.apply(null, a);
    }

    // This function allows you to set a threshold for relative time strings
    function duration_humanize__getSetRelativeTimeThreshold (threshold, limit) {
        if (thresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return thresholds[threshold];
        }
        thresholds[threshold] = limit;
        return true;
    }

    function humanize (withSuffix) {
        var locale = this.localeData();
        var output = duration_humanize__relativeTime(this, !withSuffix, locale);

        if (withSuffix) {
            output = locale.pastFuture(+this, output);
        }

        return locale.postformat(output);
    }

    var iso_string__abs = Math.abs;

    function iso_string__toISOString() {
        // for ISO strings we do not use the normal bubbling rules:
        //  * milliseconds bubble up until they become hours
        //  * days do not bubble at all
        //  * months bubble up until they become years
        // This is because there is no context-free conversion between hours and days
        // (think of clock changes)
        // and also not between days and months (28-31 days per month)
        var seconds = iso_string__abs(this._milliseconds) / 1000;
        var days         = iso_string__abs(this._days);
        var months       = iso_string__abs(this._months);
        var minutes, hours, years;

        // 3600 seconds -> 60 minutes -> 1 hour
        minutes           = absFloor(seconds / 60);
        hours             = absFloor(minutes / 60);
        seconds %= 60;
        minutes %= 60;

        // 12 months -> 1 year
        years  = absFloor(months / 12);
        months %= 12;


        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
        var Y = years;
        var M = months;
        var D = days;
        var h = hours;
        var m = minutes;
        var s = seconds;
        var total = this.asSeconds();

        if (!total) {
            // this is the same as C#'s (Noda) and python (isodate)...
            // but not other JS (goog.date)
            return 'P0D';
        }

        return (total < 0 ? '-' : '') +
            'P' +
            (Y ? Y + 'Y' : '') +
            (M ? M + 'M' : '') +
            (D ? D + 'D' : '') +
            ((h || m || s) ? 'T' : '') +
            (h ? h + 'H' : '') +
            (m ? m + 'M' : '') +
            (s ? s + 'S' : '');
    }

    var duration_prototype__proto = Duration.prototype;

    duration_prototype__proto.abs            = duration_abs__abs;
    duration_prototype__proto.add            = duration_add_subtract__add;
    duration_prototype__proto.subtract       = duration_add_subtract__subtract;
    duration_prototype__proto.as             = as;
    duration_prototype__proto.asMilliseconds = asMilliseconds;
    duration_prototype__proto.asSeconds      = asSeconds;
    duration_prototype__proto.asMinutes      = asMinutes;
    duration_prototype__proto.asHours        = asHours;
    duration_prototype__proto.asDays         = asDays;
    duration_prototype__proto.asWeeks        = asWeeks;
    duration_prototype__proto.asMonths       = asMonths;
    duration_prototype__proto.asYears        = asYears;
    duration_prototype__proto.valueOf        = duration_as__valueOf;
    duration_prototype__proto._bubble        = bubble;
    duration_prototype__proto.get            = duration_get__get;
    duration_prototype__proto.milliseconds   = milliseconds;
    duration_prototype__proto.seconds        = seconds;
    duration_prototype__proto.minutes        = minutes;
    duration_prototype__proto.hours          = hours;
    duration_prototype__proto.days           = days;
    duration_prototype__proto.weeks          = weeks;
    duration_prototype__proto.months         = months;
    duration_prototype__proto.years          = years;
    duration_prototype__proto.humanize       = humanize;
    duration_prototype__proto.toISOString    = iso_string__toISOString;
    duration_prototype__proto.toString       = iso_string__toISOString;
    duration_prototype__proto.toJSON         = iso_string__toISOString;
    duration_prototype__proto.locale         = locale;
    duration_prototype__proto.localeData     = localeData;

    // Deprecations
    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);
    duration_prototype__proto.lang = lang;

    // Side effect imports

    // FORMATTING

    addFormatToken('X', 0, 0, 'unix');
    addFormatToken('x', 0, 0, 'valueOf');

    // PARSING

    addRegexToken('x', matchSigned);
    addRegexToken('X', matchTimestamp);
    addParseToken('X', function (input, array, config) {
        config._d = new Date(parseFloat(input, 10) * 1000);
    });
    addParseToken('x', function (input, array, config) {
        config._d = new Date(toInt(input));
    });

    // Side effect imports


    utils_hooks__hooks.version = '2.11.0';

    setHookCallback(local__createLocal);

    utils_hooks__hooks.fn                    = momentPrototype;
    utils_hooks__hooks.min                   = min;
    utils_hooks__hooks.max                   = max;
    utils_hooks__hooks.now                   = now;
    utils_hooks__hooks.utc                   = create_utc__createUTC;
    utils_hooks__hooks.unix                  = moment__createUnix;
    utils_hooks__hooks.months                = lists__listMonths;
    utils_hooks__hooks.isDate                = isDate;
    utils_hooks__hooks.locale                = locale_locales__getSetGlobalLocale;
    utils_hooks__hooks.invalid               = valid__createInvalid;
    utils_hooks__hooks.duration              = create__createDuration;
    utils_hooks__hooks.isMoment              = isMoment;
    utils_hooks__hooks.weekdays              = lists__listWeekdays;
    utils_hooks__hooks.parseZone             = moment__createInZone;
    utils_hooks__hooks.localeData            = locale_locales__getLocale;
    utils_hooks__hooks.isDuration            = isDuration;
    utils_hooks__hooks.monthsShort           = lists__listMonthsShort;
    utils_hooks__hooks.weekdaysMin           = lists__listWeekdaysMin;
    utils_hooks__hooks.defineLocale          = defineLocale;
    utils_hooks__hooks.weekdaysShort         = lists__listWeekdaysShort;
    utils_hooks__hooks.normalizeUnits        = normalizeUnits;
    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;
    utils_hooks__hooks.prototype             = momentPrototype;

    var _moment = utils_hooks__hooks;

    return _moment;

}));
},{}],14:[function(require,module,exports){
/* eslint-disable no-unused-vars */
'use strict';
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

module.exports = Object.assign || function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],15:[function(require,module,exports){
module.exports=function(n){function t(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t){"use strict";function e(n){return a.js+n[0].toUpperCase()+n.substr(1)}function i(n){return Object.keys(n).reduce(function(t,i){return-1!==s.indexOf(i)?t[e(i)]=n[i]:t[i]=n[i],t},{})}function r(n){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("safari")&&-1===t.indexOf("chrome")?!function(){var t=function(n,t,e){n[e]=n[t],delete n[t]};"flex"===n.display&&(n.display="-webkit-flex"),["alignItems","justifyContent","flexDirection","flex","flexWrap"].forEach(function(i){t(n,i,e(i))})}():-1!==navigator.appVersion.indexOf("MSIE 10")&&"flex"===n.display&&(n.display="-ms-flexbox"),n}function o(n){return Object.keys(n).reduce(function(t,e){return t[e]=r(i(n[e])),t},{})}var a=function(){var n=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||""===n.OLink&&["","o"])[1];return{dom:"ms"===t?"MS":t,lowercase:t,css:"-"+t+"-",js:"ms"===t?t:t[0].toUpperCase()+t.substr(1)}}(),s=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appearance","backfaceVisibility","backgroundClip","borderImage","borderImageSlice","boxSizing","boxShadow","contentColumns","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","perspective","perspectiveOrigin","userSelect"];t.prefix=o}]);
},{}],16:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../typings/react/react.d.ts"/>

var toolOverlayStyle = {
    background: "#000",
    opacity: .2,
    zIndex: 3,
    boxSizing: "border-box",
    backgroundClip: "padding",
    position: "absolute",
    visibility: "hidden",
    pointerEvents: "none"
};

var ToolOverlay = function (_React$Component) {
    _inherits(ToolOverlay, _React$Component);

    function ToolOverlay(props) {
        _classCallCheck(this, ToolOverlay);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ToolOverlay).call(this, props));

        _this.state = {
            style: toolOverlayStyle
        };
        return _this;
    }

    _createClass(ToolOverlay, [{
        key: "render",
        value: function render() {
            return React.createElement("div", { style: this.state.style });
        }
    }]);

    return ToolOverlay;
}(React.Component);

exports.default = ToolOverlay;

},{"react":"react"}],17:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WeaveTool = undefined;
exports.registerToolImplementation = registerToolImplementation;
exports.getToolImplementation = getToolImplementation;

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

var _ui = require("./react-ui/ui");

var _ui2 = _interopRequireDefault(_ui);

var _StandardLib = require("./utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../typings/react/react.d.ts"/>
///<reference path="../typings/react/react-dom.d.ts"/>
///<reference path="../typings/lodash/lodash.d.ts"/>
///<reference path="../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>
///<reference path="../typings/react-bootstrap/react-bootstrap.d.ts"/>

var toolRegistry = {};
var grabberStyle = {
    width: "16",
    height: "16",
    cursor: "move",
    background: "url(http://placehold.it/32x32)"
};
function registerToolImplementation(asClassName, jsClass) {
    toolRegistry[asClassName] = jsClass;
}
function getToolImplementation(asClassName) {
    return toolRegistry[asClassName];
}

var WeaveTool = exports.WeaveTool = function (_React$Component) {
    _inherits(WeaveTool, _React$Component);

    function WeaveTool(props) {
        _classCallCheck(this, WeaveTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveTool).call(this, props));

        _this.toolPath = _this.props.toolPath;
        _this.toolProps = _this.props.toolProps;
        _this.state = {
            showControls: false
        };
        var toolType = _this.toolPath ? _this.toolPath.getType() : _this.props.toolClass;
        if (toolType === "weave.visualization.tools::ExternalTool" && _this.toolPath.getType("toolClass")) {
            toolType = _this.toolPath.getState("toolClass");
        }
        if (toolType === "weavejs.core.LinkableHashMap" && _this.toolPath.getType("class")) toolType = _this.toolPath.getState("class");
        _this.ToolClass = getToolImplementation(toolType);
        return _this;
    }

    _createClass(WeaveTool, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.element = ReactDOM.findDOMNode(this.refs["toolDiv"]);
            if (React.Component.isPrototypeOf(this.ToolClass)) {
                this.tool = this.refs["tool"];
            } else {
                this.tool = new this.ToolClass(_.merge({ element: ReactDOM.findDOMNode(this.refs["toolDiv"]), toolPath: this.toolPath }, this.toolProps));
            }
            if (this.toolPath) {
                this.toolPath.addCallback(this, this.forceUpdate);
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            if (this.tool.destroy) {
                this.tool.destroy();
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (this.tool && this.tool.resize) {
                this.tool.resize();
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var windowBar = {
                width: "100%",
                height: 25,
                backgroundColor: this.state.showControls ? "#f8f8f8" : ""
            };
            var titleStyle = {
                cursor: "move",
                height: 25,
                textAlign: "center",
                overflow: "hidden",
                whiteSpace: "nowrap",
                flex: 1,
                textOverflow: "ellipsis"
            };
            var transitions = {
                visibility: this.state.showControls ? "visible" : "hidden",
                opacity: this.state.showControls ? 0.7 : 0,
                transition: this.state.showControls ? "visibiliy 0s 0.1s, opacity 0.1s linear" : "visibility 0s 0.1s, opacity 0.1s linear"
            };
            var leftControls = {
                marginLeft: 5,
                marginTop: 2,
                width: 20
            };
            var rightControls = {
                marginTop: 2,
                width: 38
            };
            _StandardLib2.default.merge(leftControls, transitions);
            _StandardLib2.default.merge(rightControls, transitions);
            var toolHeight = this.props.style ? this.props.style.height - 25 : 320;
            var toolWidth = this.props.style ? this.props.style.width : 320;
            var reactTool;
            if (React.Component.isPrototypeOf(this.ToolClass)) {
                reactTool = React.createElement(this.ToolClass, _.merge({ key: "tool", ref: "tool", toolPath: this.toolPath, style: { height: toolHeight, width: toolWidth } }, this.toolProps));
            }
            return React.createElement(
                _ui2.default.VBox,
                { style: this.props.style, onMouseEnter: function onMouseEnter() {
                        _this2.setState({ showControls: true });
                    }, onMouseLeave: function onMouseLeave() {
                        _this2.setState({ showControls: false });
                    }, onDragOver: this.props.onDragOver, onDragEnd: this.props.onDragEnd },
                React.createElement(
                    _ui2.default.HBox,
                    { ref: "header", style: windowBar, draggable: true, onDragStart: this.props.onDragStart },
                    React.createElement(
                        "p",
                        { style: titleStyle },
                        this.title
                    )
                ),
                reactTool ? reactTool : React.createElement("div", { ref: "toolDiv", style: { width: toolWidth, height: toolHeight } })
            );
        }
    }, {
        key: "title",
        get: function get() {
            if (this.toolPath) {
                return this.toolPath.getValue("this.hasOwnProperty('title') ? this.title : ''") || (this.toolPath.getType('title') ? this.toolPath.getState('title') : '') || this.toolPath.getPath().pop();
            } else {
                return this.tool ? this.tool.title : "";
            }
        }
    }]);

    return WeaveTool;
}(React.Component);

},{"./react-ui/ui":23,"./utils/StandardLib":31,"lodash":"lodash","react":"react","react-dom":"react-dom"}],18:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _Resizer = require("./Resizer");

var _Resizer2 = _interopRequireDefault(_Resizer);

var _ResizerOverlay = require("./ResizerOverlay");

var _ResizerOverlay2 = _interopRequireDefault(_ResizerOverlay);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react/react-dom.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>

var RESIZEROVERLAY = "resizer";
var HORIZONTAL = "horizontal";

var Layout = function (_React$Component) {
    _inherits(Layout, _React$Component);

    function Layout(props, state) {
        _classCallCheck(this, Layout);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Layout).call(this, props, state));

        _this.panelDragging = false;
        var ps = props.state || {};
        _this.state = { id: ps.id, direction: ps.direction, children: ps.children, flex: ps.flex };
        _this.minSize = 16;
        _this.dragging = false;
        return _this;
    }

    _createClass(Layout, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            document.addEventListener("mouseup", this.boundMouseUp = this.onMouseUp.bind(this));
            document.addEventListener("mousedown", this.boundMouseDown = this.onMouseDown.bind(this));
            document.addEventListener("mousemove", this.boundMouseMove = this.onMouseMove.bind(this));
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this.setState(_StandardLib2.default.includeMissingPropertyPlaceholders(this.state, nextProps.state));
        }
    }, {
        key: "compoenentWillUnmount",
        value: function compoenentWillUnmount() {
            document.removeEventListener("mousedown", this.boundMouseDown);
            document.removeEventListener("mouseup", this.boundMouseUp);
            document.removeEventListener("mouseMove", this.boundMouseMove);
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !_.isEqual(this.state, nextState) || !_.isEqual(this.state, nextProps.state);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (this.props.onStateChange && this.state) {
                this.props.onStateChange(this.state);
            }
        }
    }, {
        key: "getDOMNodeFromId",
        value: function getDOMNodeFromId(id) {
            var component = this.getComponentFromId(id);
            if (component) {
                return component.element;
            }
        }
    }, {
        key: "getComponentFromId",
        value: function getComponentFromId(id) {
            if (this.state.id && _.isEqual(this.state.id, id)) {
                return this;
            } else {
                for (var i = 0; i < this.childNames.length; i++) {
                    var component = this.refs[this.childNames[i]].getComponentFromId(id);
                    if (component) {
                        return component;
                    }
                }
            }
        }
    }, {
        key: "onMouseDown",
        value: function onMouseDown(event) {
            var _this2 = this;

            this.resizerNames.forEach(function (resizerName) {
                var resizer = _this2.refs[resizerName];
                if (resizer && resizer.state && resizer.state.active) {
                    var overlayRange = _this2.getResizerRange(resizer);
                    overlayRange[0] += _this2.minSize;
                    overlayRange[1] -= _this2.minSize;
                    _this2.refs[RESIZEROVERLAY].setState({
                        active: true,
                        range: overlayRange
                    });
                }
            });
        }
    }, {
        key: "onMouseMove",
        value: function onMouseMove(event) {}
    }, {
        key: "getResizerRange",
        value: function getResizerRange(resizer) {
            var direction = resizer.props.direction;
            var pane1 = this.refs[resizer.props.pane1];
            var pane2 = this.refs[resizer.props.pane2];
            var element1 = ReactDOM.findDOMNode(pane1);
            var element2 = ReactDOM.findDOMNode(pane2);
            var rect = this.element.getBoundingClientRect();
            var pageLeft = window.pageXOffset + rect.left;
            var pageTop = window.pageYOffset + rect.top;
            if (direction === HORIZONTAL) {
                return [element1.offsetLeft + pageLeft, element2.offsetLeft + element2.clientWidth + pageLeft];
            } else {
                return [element1.offsetTop + pageTop, element2.offsetTop + element2.clientHeight + pageTop];
            }
        }
    }, {
        key: "onMouseUp",
        value: function onMouseUp(event) {
            var _this3 = this;

            var newState = _.cloneDeep(this.state);
            this.resizerNames.forEach(function (resizerName) {
                var resizer = _this3.refs[resizerName];
                var resizerOverlay = _this3.refs[RESIZEROVERLAY];
                if (resizer && resizer.state && resizer.state.active) {
                    var range = _this3.getResizerRange(resizer);
                    var begin = range[0];
                    var end = range[1];
                    var mousePos = _this3.state.direction === HORIZONTAL ? event.pageX : event.pageY;
                    var size = _this3.state.direction === HORIZONTAL ? _this3.element.clientWidth : _this3.element.clientHeight;
                    mousePos = Math.max(begin + _this3.minSize, Math.min(mousePos, end - _this3.minSize));
                    var ref1 = resizer.props.pane1;
                    var ref2 = resizer.props.pane2;
                    var pane1 = _this3.refs[ref1];
                    var pane2 = _this3.refs[ref2];
                    var index1 = _this3.childNames.indexOf(ref1);
                    var index2 = _this3.childNames.indexOf(ref2);
                    var flex1 = (mousePos - begin) / size;
                    var flex2 = (end - mousePos) / size;
                    newState.children[index1].flex = flex1;
                    newState.children[index2].flex = flex2;
                    pane1.setState({
                        flex: flex1
                    });
                    pane2.setState({
                        flex: flex2
                    });
                    resizer.setState({
                        active: false
                    });
                    resizerOverlay.setState({
                        active: false
                    });
                    _this3.setState(newState);
                }
            });
            this.panelDragging = false;
        }
    }, {
        key: "handleStateChange",
        value: function handleStateChange(childRef, newState) {
            var stateCopy = _.cloneDeep(this.state);
            var index = this.childNames.indexOf(childRef);
            stateCopy.children[index] = newState;
            this.setState(stateCopy);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            this.childNames = [];
            this.resizerNames = [];
            var style = {
                display: "flex",
                flex: this.state.flex,
                position: "relative",
                outline: "none",
                overflow: "hidden",
                userSelect: "none",
                flexDirection: this.state.direction === HORIZONTAL ? "row" : "column"
            };
            if (this.state.direction === HORIZONTAL) {
                style.height = "100%";
            } else {
                style.width = "100%";
            }
            if (this.state.children && this.state.children.length > 0) {
                var newChildren = new Array(this.state.children.length * 2 - 1);
                this.state.children.forEach(function (childState, i) {
                    var ref = "child" + i;
                    _this4.childNames[i] = ref;
                    newChildren[i * 2] = React.createElement(Layout, { onStateChange: _this4.handleStateChange.bind(_this4, ref), ref: ref, state: childState, key: i * 2 });
                });
                var i;
                for (i = 1; i < newChildren.length - 1; i += 2) {
                    var resizerName = "resizer" + i / 2;
                    this.resizerNames.push(resizerName);
                    var resizer = React.createElement(_Resizer2.default, { ref: resizerName, key: i, direction: this.state.direction, pane1: newChildren[i - 1].ref, pane2: newChildren[i + 1].ref });
                    newChildren[i] = resizer;
                }
            }
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement(
                "div",
                { ref: function ref(elt) {
                        _this4.element = elt;
                    }, style: prefixed.styles },
                newChildren,
                React.createElement(_ResizerOverlay2.default, { ref: RESIZEROVERLAY, key: RESIZEROVERLAY, direction: this.state.direction })
            );
        }
    }]);

    return Layout;
}(React.Component);

exports.default = Layout;

},{"../utils/StandardLib":31,"./Resizer":19,"./ResizerOverlay":20,"lodash":"lodash","react":"react","react-dom":"react-dom","react-vendor-prefix":15}],19:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react/react-dom.d.ts"/>
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>

var HORIZONTAL = "horizontal";
var resizerStyle = {};
resizerStyle.basic = {
    background: "#000",
    opacity: .1,
    zIndex: 1,
    boxSizing: "border-box",
    backgroundClip: "padding"
};
resizerStyle.vertical = {
    height: "4px",
    cursor: "row-resize",
    width: "100%"
};
resizerStyle.horizontal = {
    width: "4px",
    cursor: "col-resize",
    height: "100%"
};

var Resizer = function (_React$Component) {
    _inherits(Resizer, _React$Component);

    function Resizer(props) {
        _classCallCheck(this, Resizer);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Resizer).call(this, props));

        _this.state = {
            active: false
        };
        return _this;
    }

    _createClass(Resizer, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.element.addEventListener("mousedown", this.boundMouseDown = this.onMouseDown.bind(this));
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.element.removeEventListener("mousedown", this.boundMouseDown);
        }
    }, {
        key: "onMouseDown",
        value: function onMouseDown() {
            this.setState({
                active: true
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var direction = this.props.direction;
            var style = resizerStyle.basic;
            _StandardLib2.default.merge(style, resizerStyle[direction]);
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement("span", { ref: function ref(elt) {
                    _this2.element = elt;
                }, style: prefixed.styles });
        }
    }]);

    return Resizer;
}(React.Component);

exports.default = Resizer;

},{"../utils/StandardLib":31,"react":"react","react-vendor-prefix":15}],20:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>
/// <reference path="../../typings/react/react-dom.d.ts"/>

var HORIZONTAL = "horizontal";
var mouseevents = ["mouseover", "mouseout", "mouseleave"];
var resizerStyle = {};
resizerStyle.basic = {
    background: "#000",
    opacity: .3,
    zIndex: 1,
    boxSizing: "border-box",
    backgroundClip: "padding",
    position: "absolute"
};
resizerStyle.vertical = {
    height: "4px",
    cursor: "row-resize",
    width: "100%"
};
resizerStyle.horizontal = {
    width: "4px",
    cursor: "col-resize",
    height: "100%"
};
;

var ResizerOverlay = function (_React$Component) {
    _inherits(ResizerOverlay, _React$Component);

    function ResizerOverlay(props) {
        _classCallCheck(this, ResizerOverlay);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ResizerOverlay).call(this, props));

        _this.state = {
            active: false,
            range: [],
            x: NaN,
            y: NaN
        };
        return _this;
    }

    _createClass(ResizerOverlay, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            document.addEventListener("mousemove", this._onMouseMove = this.onMouseMove.bind(this), true);
            mouseevents.forEach(function (mouseevent) {
                return document.addEventListener(mouseevent, _this2._stopEventPropagation = _this2.stopEventPropagation.bind(_this2), true);
            });
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            var _this3 = this;

            document.removeEventListener("mousemove", this._onMouseMove);
            mouseevents.forEach(function (mouseevent) {
                return document.removeEventListener(mouseevent, _this3._stopEventPropagation);
            });
        }
    }, {
        key: "stopEventPropagation",
        value: function stopEventPropagation(event) {
            if (this.state.active) {
                event.stopImmediatePropagation();
            }
        }
    }, {
        key: "onMouseMove",
        value: function onMouseMove(event) {
            if (this.state.active) {
                event.stopImmediatePropagation();
                var container = this.element.parentNode;
                var rect = container.getBoundingClientRect();
                var left = window.pageXOffset + rect.left;
                var top = window.pageYOffset + rect.top;
                var mousePos = this.props.direction === HORIZONTAL ? event.pageX : event.pageY;
                mousePos = Math.max(this.state.range[0], Math.min(mousePos, this.state.range[1]));
                if (this.props.direction === HORIZONTAL) {
                    this.setState({
                        x: mousePos - left,
                        y: NaN
                    });
                } else {
                    this.setState({
                        x: NaN,
                        y: mousePos - top
                    });
                }
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var direction = this.props.direction;
            var style = {};
            _StandardLib2.default.merge(style, resizerStyle.basic);
            _StandardLib2.default.merge(style, resizerStyle[direction]);
            if (this.state.active) {
                style.visibility = "visible";
                style.left = this.state.x;
                style.top = this.state.y;
            } else {
                style.visibility = "hidden";
            }
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement("span", { ref: function ref(elt) {
                    _this4.element = elt;
                }, style: prefixed.styles });
        }
    }]);

    return ResizerOverlay;
}(React.Component);

exports.default = ResizerOverlay;

},{"../utils/StandardLib":31,"react":"react","react-vendor-prefix":15}],21:[function(require,module,exports){
"use strict";

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts"/>

var HBox = function (_React$Component) {
    _inherits(HBox, _React$Component);

    function HBox(props, state) {
        _classCallCheck(this, HBox);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(HBox).call(this, props));
    }

    _createClass(HBox, [{
        key: "render",
        value: function render() {
            var style = this.props.style || {};
            var otherProps = {};
            for (var key in this.props) {
                if (key !== "style") {
                    otherProps[key] = this.props[key];
                }
            }
            style = style || {};
            style.display = "flex";
            style.flexDirection = "row";
            return React.createElement(
                "div",
                _extends({ style: style }, otherProps),
                this.props.children
            );
        }
    }]);

    return HBox;
}(React.Component);

exports.default = HBox;

},{"react":"react"}],22:[function(require,module,exports){
"use strict";

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts"/>

var VBox = function (_React$Component) {
    _inherits(VBox, _React$Component);

    function VBox(props, state) {
        _classCallCheck(this, VBox);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(VBox).call(this, props));
    }

    _createClass(VBox, [{
        key: "render",
        value: function render() {
            var style = this.props.style || {};
            var otherProps = {};
            for (var key in this.props) {
                if (key !== "style") {
                    otherProps[key] = this.props[key];
                }
            }
            style.display = "flex";
            style.flexDirection = "column";
            return React.createElement(
                "div",
                _extends({ style: style }, otherProps),
                this.props.children
            );
        }
    }]);

    return VBox;
}(React.Component);

exports.default = VBox;

},{"react":"react"}],23:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _HBox = require("./HBox");

var _HBox2 = _interopRequireDefault(_HBox);

var _VBox = require("./VBox");

var _VBox2 = _interopRequireDefault(_VBox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
    HBox: _HBox2.default,
    VBox: _VBox2.default
};

},{"./HBox":21,"./VBox":22}],24:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/react/react-dom.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>

var AbstractWeaveTool = function (_React$Component) {
    _inherits(AbstractWeaveTool, _React$Component);

    function AbstractWeaveTool(props) {
        _classCallCheck(this, AbstractWeaveTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AbstractWeaveTool).call(this, props));

        _this.toolPath = props.toolPath;
        _this.paths = {};
        return _this;
    }

    _createClass(AbstractWeaveTool, [{
        key: "getElementSize",
        value: function getElementSize() {
            return {
                width: this.wrapper.clientWidth,
                height: this.wrapper.clientHeight
            };
        }
        // this function accepts an arry of path configurations
        // a path config is an object with a path object name, the weave path and an
        // optional callback or array of callbacks

    }, {
        key: "initializePaths",
        value: function initializePaths(properties) {
            var _this2 = this;

            properties.forEach(function (pathConf) {
                _this2.paths[pathConf.name] = pathConf.path;
                if (pathConf.callbacks) {
                    var callbacks = Array.isArray(pathConf.callbacks) ? pathConf.callbacks : [pathConf.callbacks];
                    callbacks.forEach(function (callback) {
                        _this2.paths[pathConf.name].addCallback(_this2, callback, true);
                    });
                }
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {}
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {}
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {}
    }, {
        key: "handleClick",
        value: function handleClick(event) {}
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            return React.createElement(
                "div",
                { ref: function ref(elt) {
                        _this3.wrapper = elt;
                    }, style: this.props.style },
                React.createElement("div", { ref: function ref(elt) {
                        _this3.element = elt;
                    }, onClick: this.handleClick.bind(this), style: { width: "100%", height: "100%", maxHeight: "100%" } })
            );
        }
    }, {
        key: "customStyle",
        value: function customStyle(array, type, filter, style) {
            var _this4 = this;

            array.forEach(function (index) {
                d3.select(d3.select(_this4.element).selectAll(type).filter(filter)[0][index]).style(style);
            });
        }
    }]);

    return AbstractWeaveTool;
}(React.Component);

exports.default = AbstractWeaveTool;

},{"d3":"d3","react":"react"}],25:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _c = require("c3");

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../utils/StandardLib.ts"/>

var WeaveC3Barchart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3Barchart, _AbstractWeaveTool);

    function WeaveC3Barchart(props) {
        _classCallCheck(this, WeaveC3Barchart);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3Barchart).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        _this.xAxisValueToLabel = {};
        _this.c3Config = {
            //size: this.getElementSize(),
            padding: {
                top: 20,
                bottom: 20,
                right: 30
            },
            data: {
                json: [],
                type: "bar",
                xSort: false,
                selection: {
                    enabled: true,
                    multiple: true,
                    draggable: true
                },
                labels: {
                    format: function format(v, id, i, j) {
                        if (_this.showValueLabels) {
                            return v;
                        } else {
                            return "";
                        }
                    }
                },
                order: null,
                color: function color(_color, d) {
                    if (_this.heightColumnNames.length === 1 && d.hasOwnProperty("index")) {
                        // find the corresponding index of numericRecords in stringRecords
                        var id = _this.indexToKey[d.index];
                        var index = _.pluck(_this.stringRecords, "id").indexOf(id);
                        return _this.stringRecords[index] ? _this.stringRecords[index]["color"] : "#C0CDD1";
                    } else {
                        return _color || "#C0CDD1";
                    }
                },
                onclick: function onclick(d) {
                    if (!_this.keyDown && d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.setKeys([_this.indexToKey[d.index]]);
                    }
                },
                onselected: function onselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.addKeys([_this.indexToKey[d.index]]);
                    }
                },
                onunselected: function onunselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.removeKeys([_this.indexToKey[d.index]]);
                    }
                },
                onmouseover: function onmouseover(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([_this.indexToKey[d.index]]);
                    }
                },
                onmouseout: function onmouseout(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([]);
                    }
                }
            },
            axis: {
                x: {
                    type: "category",
                    label: {
                        text: "",
                        position: "outer-center"
                    },
                    tick: {
                        fit: false,
                        multiline: true,
                        format: function format(num) {
                            if (_this.stringRecords && _this.stringRecords[num]) {
                                return _this.stringRecords[num]["xLabel"];
                            } else {
                                return "";
                            }
                        }
                    }
                },
                y: {
                    label: {
                        text: "",
                        position: "outer-middle"
                    },
                    tick: {
                        fit: false,
                        multiline: false,
                        format: function format(num) {
                            if (_this.yLabelColumnPath && _this.yLabelColumnDataType !== "number") {
                                return _this.yAxisValueToLabel[num] || "";
                            } else if (_this.groupingMode === "percentStack") {
                                return d3.format(".0%")(num);
                            } else {
                                return String(_FormatUtils2.default.defaultNumberFormatting(num));
                            }
                        }
                    }
                }
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            },
            bindto: null,
            bar: {
                width: {
                    ratio: 0.8
                }
            },
            legend: {
                show: false
            },
            onrendered: function onrendered() {
                _this.busy = false;
            }
        };
        return _this;
    }

    _createClass(WeaveC3Barchart, [{
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {
            var _this2 = this;

            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedIndices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, selectedIndices, true);
            } else {
                this.customStyle(indices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, [], true);
            }
        }
    }, {
        key: "probedKeysChanged",
        value: function probedKeysChanged() {
            var _this3 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this.selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "rotateAxes",
        value: function rotateAxes() {
            // this.c3Config.axis.rotated = this.paths.horizontalMode.getState();
            // setTimeout(() => {
            //   this.busy = true;
            //   c3.generate(this.c3Config);
            // }, 10);
        }
    }, {
        key: "_axisChanged",
        value: function _axisChanged() {
            if (!this.chart) return;
            if (this.busy) {
                setTimeout(this._axisChanged, 20);
                return;
            }
            var xLabel = this.paths.xAxis.push("overrideAxisName").getState() || "Sorted by " + this.paths.sortColumn.getObject().getMetadata('title');
            var yLabel = this.paths.yAxis.push("overrideAxisName").getState() || (this.heightColumnsLabels ? this.heightColumnsLabels.join(", ") : "");
            this.chart.axis.labels({
                x: xLabel,
                y: yLabel
            });
            this.c3Config.axis.x.label = { text: xLabel, position: "outer-center" };
            this.c3Config.axis.y.label = { text: yLabel, position: "outer-middle" };
        }
    }, {
        key: "handleShowValueLabels",
        value: function handleShowValueLabels() {
            this.showValueLabels = this.paths.showValueLabels.getState();
            this.chart.flush();
        }
    }, {
        key: "_updateColumns",
        value: function _updateColumns() {
            this.heightColumnNames = [];
            this.heightColumnsLabels = [];
            var heightColumns = this.paths.heightColumns.getChildren();
            for (var idx in heightColumns) {
                var column = heightColumns[idx];
                var title = column.getValue("this.getMetadata('title')");
                var name = column.getPath().pop();
                this.heightColumnsLabels.push(title);
                this.heightColumnNames.push(name);
            }
        }
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this4 = this;

            if (!this.chart) {
                return;
            }
            if (this.busy) {
                return;
            }
            this._updateColumns();
            var heightColumns = this.paths.heightColumns.getChildren();
            var numericMapping = {
                sort: this.paths.sortColumn,
                xLabel: this.paths.labelColumn
            };
            var stringMapping = {
                sort: this.paths.sortColumn,
                color: this.paths.colorColumn,
                xLabel: this.paths.labelColumn
            };
            heightColumns.forEach(function (column, idx) {
                var name = column.getPath().pop();
                numericMapping[name] = column; // all height columns as numeric value for the chart
                if (idx === 0) {
                    _this4.yLabelColumnPath = column;
                    stringMapping["yLabel"] = column; // only using the first column to label the y axis
                    numericMapping["yLabel"] = column;
                }
            });
            this.yLabelColumnDataType = this.yLabelColumnPath.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            if (!this.numericRecords.length) return;
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.records = _.zip(this.numericRecords, this.stringRecords);
            this.records = _.sortByAll(this.records, [[0, "sort"], [0, "id"]]);
            if (this.records.length) {
                ;

                var _$unzip = _.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.yAxisValueToLabel = {};
            this.xAxisValueToLabel = {};
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                if (record) {
                    _this4.keyToIndex[record["id"]] = index;
                    _this4.indexToKey[index] = record["id"];
                }
            });
            this.stringRecords.forEach(function (record, index) {
                var numericRecord = _this4.numericRecords[index];
                if (numericRecord) {
                    _this4.yAxisValueToLabel[numericRecord["yLabel"]] = record["yLabel"];
                    _this4.xAxisValueToLabel[numericRecord["xLabel"]] = record["xLabel"];
                }
            });
            this.groupingMode = this.paths.groupingMode.getState();
            //var horizontalMode = this.paths.plotter.push("horizontalMode").getState();
            // set axis rotation mode
            //this.chart.load({axes: { rotated: horizontalMode }});
            if (this.groupingMode === "stack") {
                this.chart.groups([this.heightColumnNames]);
            } else if (this.groupingMode === "group") {
                this.chart.groups([]);
            } else if (this.groupingMode === "percentStack") {
                this.chart.groups([this.heightColumnNames]);
            }
            if (this.groupingMode === "percentStack" && this.heightColumnNames.length > 1) {
                // normalize the height columns to be percentages.
                var newValues = this.numericRecords.map(function (record) {
                    var heights;
                    if (record) {
                        heights = _.pick(record, _this4.heightColumnNames);
                        var sum = 0;
                        _.keys(heights).forEach(function (key) {
                            sum += heights[key];
                        });
                        _.keys(heights).forEach(function (key) {
                            heights[key] = heights[key] / sum;
                        });
                    }
                    return heights;
                });
                this.numericRecords = newValues;
            }
            ;
            var keys = { x: "", value: [] };
            // if label column is specified
            if (this.paths.labelColumn.getState().length) {
                keys.x = "xLabel";
            }
            keys.value = this.heightColumnNames;
            var colors = {};
            if (this.heightColumnNames.length > 1) {
                this.colorRamp = this.paths.chartColors.getState();
                this.heightColumnNames.map(function (name, index) {
                    var color = _StandardLib2.default.interpolateColor(index / (_this4.heightColumnNames.length - 1), _this4.colorRamp);
                    colors[name] = "#" + _StandardLib2.default.decimalToHex(color);
                });
                colors = {};
            }
            var data = _.cloneDeep(this.c3Config.data);
            data.json = this.numericRecords;
            data.colors = colors;
            data.keys = keys;
            data.unload = true;
            data.done = function () {
                _this4.busy = false;
            };
            this.c3Config.data = data;
            this.busy = true;
            this.chart.load(data);
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {}
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentDidUpdate", this).call(this);
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            this.chart.destroy();
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentWillUnmount", this).call(this);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = _.debounce(this._axisChanged.bind(this), 100);
            var dataChanged = _.debounce(this._dataChanged.bind(this), 100);
            var handleShowValueLabels = _.debounce(this.handleShowValueLabels.bind(this), 10);
            var selectionKeySetChanged = this.selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this.probedKeysChanged.bind(this), 100);
            var rotateAxes = _.debounce(this.rotateAxes.bind(this), 10);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "heightColumns", path: plotterPath.push("heightColumns"), callbacks: [dataChanged, axisChanged] }, { name: "labelColumn", path: plotterPath.push("labelColumn"), callbacks: [dataChanged, axisChanged] }, { name: "sortColumn", path: plotterPath.push("sortColumn"), callbacks: [dataChanged, axisChanged] }, { name: "colorColumn", path: plotterPath.push("colorColumn"), callbacks: dataChanged }, { name: "chartColors", path: plotterPath.push("chartColors"), callbacks: dataChanged }, { name: "groupingMode", path: plotterPath.push("groupingMode"), callbacks: dataChanged }, { name: "horizontalMode", path: plotterPath.push("horizontalMode"), callbacks: rotateAxes }, { name: "showValueLabels", path: plotterPath.push("showValueLabels"), callbacks: handleShowValueLabels }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config.bindto = this.element;
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3Barchart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3Barchart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::CompoundBarChartTool", WeaveC3Barchart);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"c3":"c3","d3":"d3","lodash":"lodash"}],26:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _ui = require("../react-ui/ui");

var _ui2 = _interopRequireDefault(_ui);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/d3/d3.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
/// <reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../react-ui/ui.tsx"/>
///<reference path="../../typings/react/react-dom.d.ts"/>

var SHAPE_TYPE_CIRCLE = "circle";
var SHAPE_TYPE_SQUARE = "square";
var SHAPE_TYPE_LINE = "line";

var WeaveC3ColorLegend = function (_AbstractWeaveTool) {
    _inherits(WeaveC3ColorLegend, _AbstractWeaveTool);

    function WeaveC3ColorLegend(props) {
        _classCallCheck(this, WeaveC3ColorLegend);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3ColorLegend).call(this, props));
    }

    _createClass(WeaveC3ColorLegend, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            var elementSize = this.element ? this.getElementSize() : null;
            ReactDOM.render(React.createElement(ColorLegend, { toolPath: this.toolPath, width: elementSize.width, height: elementSize.height }), this.element);
        }
    }]);

    return WeaveC3ColorLegend;
}(_AbstractWeaveTool3.default);

var ColorLegend = function (_React$Component) {
    _inherits(ColorLegend, _React$Component);

    function ColorLegend(props) {
        _classCallCheck(this, ColorLegend);

        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(ColorLegend).call(this, props));

        console.log(React);
        _this2.toolPath = props.toolPath;
        _this2.plotterPath = _this2.toolPath.pushPlotter("plot");
        _this2.dynamicColorColumnPath = _this2.plotterPath.push("dynamicColorColumn", null);
        _this2.binningDefinition = _this2.dynamicColorColumnPath.push("internalDynamicColumn").push(null).push("binningDefinition").push(null);
        _this2.binnedColumnPath = _this2.dynamicColorColumnPath.push("internalDynamicColumn", null);
        return _this2;
    }

    _createClass(ColorLegend, [{
        key: "setupCallbacks",
        value: function setupCallbacks() {
            this.dynamicColorColumnPath.addCallback(this, this.forceUpdate);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.setupCallbacks();
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {}
    }, {
        key: "drawContinuousPlot",
        value: function drawContinuousPlot() {}
        //drawBinnedPlot(numberOfBins:number) {
        //    // clear the svg and rerender everything
        //    this.svg.selectAll("*").remove();
        //
        //    var width:number = this.element.clientWidth;
        //    var height:number = this.element.clientHeight;
        //
        //    var shapeSize:number = this.plotterPath.getState("shapeSize");
        //    var shapeType:string = this.plotterPath.getState("shapeType");
        //
        //    var ramp:any[] = this.dynamicColorColumnPath.getState("ramp");
        //
        //    var yScale:Function = d3.scale.linear().domain([0, numberOfBins + 1]).range([0, height]);
        //
        //    var yMap:Function = (d:number):number => { return yScale(d); };
        //
        //    if(width && height && numberOfBins) {
        //        this.svg.attr("width", width).attr("height", height);
        //    }
        //
        //    this.svg.append("text")
        //            .attr("y", yMap(0.5))
        //            .attr("x", 10)
        //            .text(this.dynamicColorColumnPath.getValue("this.getMetadata('title')"))
        //             .attr("font-family", "sans-serif")
        //             .attr("font-size", "12px");
        //
        //    shapeSize = _.max([1, _.min([shapeSize, height / numberOfBins])]);
        //
        //    let r:number = (shapeSize / 100 * height / numberOfBins) / 2;
        //
        //    var textLabelFunction:Function = this.binnedColumnPath.getValue("this.deriveStringFromNumber.bind(this)            ");
        //
        //    for(var i = 0; i < numberOfBins; i++) {
        //        switch(shapeType) {
        //            case SHAPE_TYPE_CIRCLE :
        //                this.svg.append("circle")
        //                         .attr("cx", 25)
        //                         .attr("cy", yMap(i + 1))
        //                         .attr("r", r)
        //                         .style("fill", "#" + StandardLib.decimalToHex(StandardLib.interpolateColor(StandardLib.normalize(i, 0, numberOfBins - 1), ramp)))
        //                         .style("stroke", "black")
        //                         .style("stroke-opacity", 0.5);
        //                this.svg.append("text")
        //                         .attr("x", 50)
        //                         .attr("y", yMap(i + 1) + r / 2)
        //                         .text(textLabelFunction(i))
        //                         .attr("font-family", "sans-serif")
        //                         .attr("font-size", "12px");
        //                break;
        //            case SHAPE_TYPE_SQUARE :
        //                break;
        //
        //            case SHAPE_TYPE_LINE :
        //                break;
        //        }
        //    }
        //}

    }, {
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {}
    }, {
        key: "visualizationChanged",
        value: function visualizationChanged() {}
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {}
    }, {
        key: "render",
        value: function render() {
            this.numberOfBins = this.binnedColumnPath.getValue("this.numberOfBins");
            if (this.numberOfBins) {
                //Binned plot case
                var width = this.props.width;
                var height = this.props.height;
                var shapeSize = this.plotterPath.getState("shapeSize");
                var shapeType = this.plotterPath.getState("shapeType");
                var ramp = this.dynamicColorColumnPath.getState("ramp");
                var yScale = d3.scale.linear().domain([0, this.numberOfBins + 1]).range([0, height]);
                var yMap = function yMap(d) {
                    return yScale(d);
                };
                shapeSize = _.max([1, _.min([shapeSize, height / this.numberOfBins])]);
                var r = shapeSize / 100 * height / this.numberOfBins / 2;
                var textLabelFunction = this.binnedColumnPath.getValue("this.deriveStringFromNumber.bind(this)            ");
                var elements = [];
                for (var i = 0; i < this.numberOfBins; i++) {
                    switch (shapeType) {
                        case SHAPE_TYPE_CIRCLE:
                            {
                                elements.push(React.createElement(
                                    _ui2.default.HBox,
                                    { key: i, style: { width: "100%", flex: 1.0 } },
                                    React.createElement(
                                        _ui2.default.HBox,
                                        { style: { width: "100%", flex: 0.2, position: "relative", padding: "0px 0px 0px 0px", minWidth: "10px" } },
                                        React.createElement(
                                            "svg",
                                            { style: { position: "absolute" }, viewBox: "0 0 100 100", width: "100%", height: "100%" },
                                            React.createElement("circle", { cx: "50%", cy: "50%", r: "45%", style: { fill: "#" + _StandardLib2.default.decimalToHex(_StandardLib2.default.interpolateColor(_StandardLib2.default.normalize(i, 0, this.numberOfBins - 1), ramp)), stroke: "black", strokeOpacity: 0.5 } })
                                        )
                                    ),
                                    React.createElement(
                                        _ui2.default.HBox,
                                        { style: { width: "100%", flex: 0.8 } },
                                        React.createElement(
                                            "span",
                                            { style: { textAlign: "left", verticalAlign: "middle", overflow: "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis" } },
                                            textLabelFunction(i)
                                        )
                                    )
                                ));
                            }
                            break;
                        case SHAPE_TYPE_SQUARE:
                            break;
                        case SHAPE_TYPE_LINE:
                            break;
                    }
                }
                return React.createElement(
                    "div",
                    { style: { width: "100%", height: "100%" } },
                    React.createElement(
                        _ui2.default.VBox,
                        { style: { height: "100%", flex: 1.0 } },
                        React.createElement(
                            _ui2.default.HBox,
                            { style: { width: "100%", flex: 0.1 } },
                            React.createElement(
                                "svg",
                                { width: "100%", height: "100%" },
                                React.createElement(
                                    "text",
                                    { y: yMap(0.5), x: 10, fontFamily: "sans-serif", fontSize: "12px" },
                                    this.dynamicColorColumnPath.getValue("this.getMetadata('title')")
                                )
                            )
                        ),
                        React.createElement(
                            _ui2.default.HBox,
                            { style: { width: "100%", flex: 0.9 } },
                            React.createElement(
                                _ui2.default.VBox,
                                { style: { flex: 1.0 } },
                                " ",
                                elements
                            )
                        )
                    )
                );
            } else {
                //Continuous plot case
                return React.createElement("svg", null);
            }
        }
    }]);

    return ColorLegend;
}(React.Component);

exports.default = WeaveC3ColorLegend;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::ColorBinLegendTool", WeaveC3ColorLegend);

},{"../WeaveTool":17,"../react-ui/ui":23,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"d3":"d3","lodash":"lodash","react":"react","react-dom":"react-dom"}],27:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _c = require("c3");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>

var WeaveC3Histogram = function (_AbstractWeaveTool) {
    _inherits(WeaveC3Histogram, _AbstractWeaveTool);

    function WeaveC3Histogram(props) {
        _classCallCheck(this, WeaveC3Histogram);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3Histogram).call(this, props));

        _this.busy = false;
        _this.idToRecord = {};
        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.c3Config = {
            //size: this.getElementSize(),
            padding: {
                top: 20,
                bottom: 20,
                right: 30
            },
            data: {
                columns: [],
                selection: {
                    enabled: true,
                    multiple: true,
                    draggable: true
                },
                type: "bar",
                color: function color(_color, d) {
                    if (d && d.hasOwnProperty("index")) {
                        var decColor = _this.paths.fillStyle.push("color").push("internalDynamicColumn", null).getValue("this.getColorFromDataValue.bind(this)")(d.index).toString(16);
                        return "#" + _StandardLib2.default.decimalToHex(decColor);
                    }
                    return "#C0CDD1";
                },
                onclick: function onclick(d) {
                    if (!_this.keyDown && d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.setKeys(selectedIds);
                    }
                },
                onselected: function onselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.addKeys(selectedIds);
                    }
                },
                onunselected: function onunselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        var unSelectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.removeKeys(unSelectedIds);
                    }
                },
                onmouseover: function onmouseover(d) {
                    if (d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.probe_keyset.setKeys(selectedIds);
                    }
                },
                onmouseout: function onmouseout(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([]);
                    }
                }
            },
            bindto: _this.element,
            legend: {
                show: false
            },
            axis: {
                x: {
                    type: "category",
                    label: {
                        text: "",
                        position: "outer-center"
                    },
                    tick: {
                        multiline: false,
                        format: function format(num) {
                            return _this.paths.binnedColumn.getValue("this.deriveStringFromNumber.bind(this)")(num);
                        }
                    }
                },
                y: {
                    label: {
                        text: "",
                        position: "outer-middle"
                    },
                    tick: {
                        fit: false,
                        format: function format(num) {
                            return String(_FormatUtils2.default.defaultNumberFormatting(num));
                        }
                    }
                },
                rotated: false
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            },
            bar: {
                width: {
                    ratio: 0.95
                }
            },
            onrendered: _this._updateStyle.bind(_this)
        };
        return _this;
    }

    _createClass(WeaveC3Histogram, [{
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedRecords = _.filter(this.numericRecords, function (record) {
                return _.includes(selectedKeys, record["id"]);
            });
            var selectedBinIndices = _.pluck(_.uniq(selectedRecords, 'binnedColumn'), 'binnedColumn');
            var binIndices = _.pluck(_.uniq(this.numericRecords, 'binnedColumn'), 'binnedColumn');
            var unselectedBinIndices = _.difference(binIndices, selectedBinIndices);
            if (selectedBinIndices.length) {
                this.customStyle(unselectedBinIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedBinIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this.customStyle(binIndices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedRecords = _.filter(this.numericRecords, function (record) {
                return _.includes(selectedKeys, record["id"]);
            });
            var selectedBinIndices = _.pluck(_.uniq(selectedRecords, 'binnedColumn'), 'binnedColumn');
            var binIndices = _.pluck(_.uniq(this.numericRecords, 'binnedColumn'), 'binnedColumn');
            var unselectedBinIndices = _.difference(binIndices, selectedBinIndices);
            if (selectedBinIndices.length) {
                this.customStyle(unselectedBinIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedBinIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "rotateAxes",
        value: function rotateAxes() {
            //this.c3Config.axis.rotated = true;
            //this.forceUpdate();
        }
    }, {
        key: "_axisChanged",
        value: function _axisChanged() {
            if (!this.chart) return;
            if (this.busy) return;
            this.chart.axis.labels({
                x: this.paths.xAxis.push("overrideAxisName").getState() || this.paths.binnedColumn.getValue("this.getMetadata('title')"),
                y: function () {
                    var overrideAxisName = this.paths.yAxis.push("overrideAxisName").getState();
                    if (overrideAxisName) {
                        return overrideAxisName;
                    } else {
                        if (this.paths.columnToAggregate.getState().length) {
                            switch (this.paths.aggregationMethod.getState()) {
                                case "count":
                                    return "Number of records";
                                case "sum":
                                    return "Sum of " + this.paths.columnToAggregate.getValue("this.getMetadata('title')");
                                case "mean":
                                    return "Mean of " + this.paths.columnToAggregate.getValue("this.getMetadata('title')");
                            }
                        } else {
                            return "Number of records";
                        }
                    }
                }.bind(this)()
            });
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {}
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this2 = this;

            if (!this.chart) return;
            if (this.busy) {
                return;
            }
            var numericMapping = {
                binnedColumn: this.paths.binnedColumn,
                columnToAggregate: this.paths.columnToAggregate
            };
            var stringMapping = {
                binnedColumn: this.paths.binnedColumn
            };
            this.binnedColumnDataType = this.paths.binnedColumn.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.idToRecord = {};
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.idToRecord[record["id"]] = record;
                _this2.keyToIndex[record["id"]] = index;
                _this2.indexToKey[index] = record["id"];
            });
            this.numberOfBins = this.paths.binnedColumn.getValue("this.numberOfBins");
            this.histData = [];
            // this._columnToAggregatePath.getValue("this.getInternalColumn()");
            var columnToAggregateNameIsDefined = this.paths.columnToAggregate.getState().length > 0;
            for (var iBin = 0; iBin < this.numberOfBins; iBin++) {
                var recordsInBin = _.filter(this.numericRecords, { binnedColumn: iBin });
                if (recordsInBin) {
                    var obj = { height: 0 };
                    if (columnToAggregateNameIsDefined) {
                        obj.height = this.getAggregateValue(recordsInBin, "columnToAggregate", this.paths.aggregationMethod.getState());
                        this.histData.push(obj);
                    } else {
                        obj.height = this.getAggregateValue(recordsInBin, "binnedColumn", "count");
                        this.histData.push(obj);
                    }
                }
            }
            var keys = { value: ["height"] };
            this._axisChanged();
            this.busy = true;
            this.chart.load({ json: this.histData, keys: keys, unload: true, done: function done() {
                    _this2.busy = false;
                } });
        }
    }, {
        key: "getAggregateValue",
        value: function getAggregateValue(records, columnToAggregateName, aggregationMethod) {
            var count = 0;
            var sum = 0;
            if (!Array.isArray(records)) {
                return 0;
            }
            records.forEach(function (record) {
                count++;
                sum += record[columnToAggregateName];
            });
            if (aggregationMethod === "mean") {
                return sum / count; // convert sum to mean
            }
            if (aggregationMethod === "count") {
                return count; // use count of finite values
            }
            // sum
            return sum;
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentDidUpdate", this).call(this);
            //console.log("component did update");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
            //console.log(end - start);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = _.debounce(this._axisChanged.bind(this), 100);
            var dataChanged = _.debounce(this._dataChanged.bind(this), 100);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this._probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "binnedColumn", path: plotterPath.push("binnedColumn"), callbacks: [dataChanged, axisChanged] }, { name: "columnToAggregate", path: plotterPath.push("columnToAggregate"), callbacks: dataChanged }, { name: "aggregationMethod", path: plotterPath.push("aggregationMethod"), callbacks: [dataChanged, axisChanged] }, { name: "fillStyle", path: plotterPath.push("fillStyle"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("lineStyle"), callbacks: dataChanged }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config.bindto = this.element;
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3Histogram;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3Histogram;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::HistogramTool", WeaveC3Histogram);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"c3":"c3","lodash":"lodash"}],28:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _c = require("c3");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/c3/c3.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
/// <reference path="../../typings/d3/d3.d.ts"/>
/// <reference path="../../typings/react/react.d.ts"/>
/// <reference path="../../typings/weave/WeavePath.d.ts"/>

;

var WeaveC3PieChart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3PieChart, _AbstractWeaveTool);

    function WeaveC3PieChart(props) {
        _classCallCheck(this, WeaveC3PieChart);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3PieChart).call(this, props));
    }

    _createClass(WeaveC3PieChart, [{
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {
            if (!this.chart) return;
            var keys = this.toolPath.selection_keyset.getKeys();
            if (keys.length) {
                this.chart.focus(keys);
            } else {
                this.chart.focus();
            }
        }
    }, {
        key: "probedKeysChanged",
        value: function probedKeysChanged() {
            var keys = this.toolPath.probe_keyset.getKeys();
            if (keys.length) {
                this.chart.focus(keys);
            } else {
                this.selectionKeysChanged();
            }
        }
    }, {
        key: "updateStyle",
        value: function updateStyle() {}
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "dataChanged",
        value: function dataChanged() {
            var _this2 = this;

            if (!this.chart) return;
            var numericMapping = {
                data: this.paths.data
            };
            var stringMapping = {
                fill: {
                    color: this.paths.fillStyle.push("color")
                },
                line: {},
                label: this.paths.label
            };
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.indexToKey[index] = record["id"];
                _this2.keyToIndex[record["id"]] = index;
            });
            var columns = [];
            columns = this.numericRecords.map(function (record) {
                var tempArr = [record["id"], record["data"]];
                return tempArr;
            });
            var chartType = "pie";
            if (this.paths.plotter.getState("innerRadius") > 0) {
                chartType = "donut";
            }
            this.colors = {};
            this.stringRecords.forEach(function (record) {
                _this2.colors[record["id"]] = record["fill"]["color"] || "#C0CDD1";
            });
            this.chart.load({
                columns: columns,
                type: chartType,
                colors: this.colors,
                unload: true
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentDidUpdate", this).call(this);
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this3 = this;

            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var dataChanged = _.debounce(this.dataChanged.bind(this), 100);
            var selectionKeySetChanged = this.selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this.probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var manifest = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "data", path: plotterPath.push("data"), callbacks: dataChanged }, { name: "label", path: plotterPath.push("label"), callbacks: dataChanged }, { name: "fillStyle", path: plotterPath.push("fill"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("line"), callbacks: dataChanged }, { name: "innerRadius", path: plotterPath.push("innerRadius"), callbacks: dataChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(manifest);
            this.c3Config = {
                //size: this.getElementSize(),
                bindto: this.element,
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    columns: [],
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    type: "pie",
                    onclick: function onclick(d) {
                        if (!_this3.keyDown && d && d.hasOwnProperty("index")) {
                            _this3.toolPath.selection_keyset.setKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onselected: function onselected(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.selection_keyset.addKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        if (d && d.hasOwnProperty("data")) {
                            // d has a different structure than "onselected" argument
                            _this3.toolPath.selection_keyset.setKeys([]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.probe_keyset.setKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                pie: {
                    label: {
                        show: true,
                        format: function format(value, ratio, id) {
                            if (_this3.stringRecords && _this3.stringRecords.length) {
                                var record = _this3.stringRecords[_this3.keyToIndex[id]];
                                if (record && record["label"]) {
                                    return record["label"];
                                }
                                return String(value);
                            }
                        }
                    }
                },
                donut: {
                    label: {
                        show: true,
                        format: function format(value, ratio, id) {
                            if (_this3.stringRecords && _this3.stringRecords.length) {
                                var record = _this3.stringRecords[_this3.keyToIndex[id]];
                                if (record && record["label"]) {
                                    return record["label"];
                                }
                                return String(value);
                            }
                        }
                    }
                },
                legend: {
                    show: false
                },
                onrendered: this.updateStyle.bind(this)
            };
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3PieChart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3PieChart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::PieChartTool", WeaveC3PieChart);

},{"../WeaveTool":17,"./AbstractWeaveTool":24,"c3":"c3","lodash":"lodash"}],29:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _c = require("c3");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>

/* private
 * @param records array or records
 * @param attributes array of attributes to be normalized
 */

var WeaveC3ScatterPlot = function (_AbstractWeaveTool) {
    _inherits(WeaveC3ScatterPlot, _AbstractWeaveTool);

    function WeaveC3ScatterPlot(props) {
        _classCallCheck(this, WeaveC3ScatterPlot);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3ScatterPlot).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        _this.xAxisValueToLabel = {};
        return _this;
    }

    _createClass(WeaveC3ScatterPlot, [{
        key: "normalizeRecords",
        value: function normalizeRecords(records, attributes) {
            // to avoid computing the stats at each iteration.
            var columnStatsCache = {};
            attributes.forEach(function (attr) {
                columnStatsCache[attr] = {
                    min: _.min(_.pluck(records, attr)),
                    max: _.max(_.pluck(records, attr))
                };
            });
            return records.map(function (record) {
                var obj = {};
                attributes.forEach(function (attr) {
                    var min = columnStatsCache[attr].min;
                    var max = columnStatsCache[attr].max;
                    if (!min) min = 0;
                    if (max - min === 0) {
                        return 0;
                    }
                    if (record[attr]) {
                        // console.log( (record[attr] - min) / (max - min));
                        obj[attr] = (record[attr] - min) / (max - min);
                    } else {
                        // if any of the value above is null then
                        // we can't normalize
                        obj[attr] = null;
                    }
                });
                return obj;
            });
        }
    }, {
        key: "axisChanged",
        value: function axisChanged() {
            if (this.busy) {
                this.busy++;
                return;
            }
            this.chart.axis.labels({
                x: this.paths.xAxis.getState("overrideAxisName") || this.paths.dataX.getValue("this.getMetadata('title')"),
                y: this.paths.yAxis.getState("overrideAxisName") || this.paths.dataY.getValue("this.getMetadata('title')")
            });
        }
    }, {
        key: "dataChanged",
        value: function dataChanged() {
            var _this2 = this;

            if (this.busy) {
                this.busy++;
                return;
            }
            var numericMapping = {
                point: {
                    x: this.paths.dataX,
                    y: this.paths.dataY
                },
                size: this.paths.sizeBy
            };
            var stringMapping = {
                point: {
                    x: this.paths.dataX,
                    y: this.paths.dataY
                },
                fill: {
                    //alpha: this._fillStylePath.push("alpha"),
                    color: this.paths.fill.push("color")
                },
                line: {
                    //alpha: this._lineStylePath.push("alpha"),
                    color: this.paths.line.push("color")
                }
            };
            this.dataXType = this.paths.dataX.getValue("this.getMetadata('dataType')");
            this.dataYType = this.paths.dataY.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.records = _.zip(this.numericRecords, this.stringRecords);
            this.records = _.sortByOrder(this.records, ["size", "id"], ["desc", "asc"]);
            if (this.records.length) {
                ;

                var _$unzip = _.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.keyToIndex = {};
            this.indexToKey = {};
            this.yAxisValueToLabel = {};
            this.xAxisValueToLabel = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.keyToIndex[record["id"]] = index;
                _this2.indexToKey[index] = record["id"];
            });
            this.stringRecords.forEach(function (record, index) {
                _this2.xAxisValueToLabel[_this2.numericRecords[index]["point"]["x"]] = record["point"]["x"];
                _this2.yAxisValueToLabel[_this2.numericRecords[index]["point"]["y"]] = record["point"]["y"];
            });
            this.normalizedRecords = this.normalizeRecords(this.numericRecords, ["size"]);
            this.plotterState = this.paths.plotter.getUntypedState ? this.paths.plotter.getUntypedState() : this.paths.plotter.getState();
            this.normalizedPointSizes = this.normalizedRecords.map(function (normalizedRecord) {
                if (_this2.plotterState && _this2.plotterState.sizeBy.length) {
                    var minScreenRadius = _this2.plotterState.minScreenRadius;
                    var maxScreenRadius = _this2.plotterState.maxScreenRadius;
                    return (normalizedRecord && normalizedRecord["size"] ? minScreenRadius + normalizedRecord["size"] * (maxScreenRadius - minScreenRadius) : _this2.plotterState.defaultScreenRadius) || 3;
                } else {
                    return _this2.plotterState.defaultScreenRadius || 3;
                }
            });
            this.axisChanged();
            this.busy = 1;
            this.chart.load({ data: _.pluck(this.numericRecords, "point"), unload: true, done: function done() {
                    if (_this2.busy > 1) {
                        _this2.busy = 0;
                        _this2.dataChanged();
                    } else {
                        _this2.busy = 0;
                    }
                } });
        }
    }, {
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            var _this3 = this;

            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "circle", ".c3-shape", { opacity: 0.3, "stroke-opacity": 0.0 });
                this.customStyle(selectedIndices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 1.0 });
                this.chart.select(["y"], selectedIndices, true);
            } else {
                this.customStyle(indices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 0.0 });
                this.chart.select(["y"], [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var _this4 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this4.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this4.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "circle", ".c3-shape", { opacity: 0.3, "stroke-opacity": 0.0 });
                this.customStyle(selectedIndices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 0.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {
            d3.select(this.element).selectAll("circle").style("opacity", 1).style("stroke", "black").style("stroke-opacity", 0.0);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentDidUpdate", this).call(this);
            //console.log("resizing");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            this.chart.destroy();
            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentWillUnmount", this).call(this);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = this.axisChanged.bind(this);
            var dataChanged = this.dataChanged.bind(this);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = this._probedKeysChanged.bind(this);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: dataChanged }, { name: "dataX", path: plotterPath.push("dataX"), callbacks: [dataChanged, axisChanged] }, { name: "dataY", path: plotterPath.push("dataY"), callbacks: [dataChanged, axisChanged] }, { name: "sizeBy", path: plotterPath.push("sizeBy"), callbacks: dataChanged }, { name: "fill", path: plotterPath.push("fill"), callbacks: [dataChanged] }, { name: "line", path: plotterPath.push("line"), callbacks: dataChanged }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config = {
                bindto: this.element,
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    rows: [],
                    x: "x",
                    xSort: false,
                    type: "scatter",
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    color: function color(_color, d) {
                        if (_this5.stringRecords && d.hasOwnProperty("index")) {
                            // find the corresponding index of numericRecords in stringRecords
                            var id = _this5.indexToKey[d.index];
                            var index = _.pluck(_this5.stringRecords, "id").indexOf(id);
                            var record = _this5.stringRecords[index];
                            return record && record["fill"] && record["fill"]["color"] ? record["fill"]["color"] : "#000000";
                        }
                        return "#000000";
                    },
                    onclick: function onclick(d) {
                        if (!_this5.keyDown && d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.setKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onselected: function onselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.addKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.removeKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                legend: {
                    show: false
                },
                axis: {
                    x: {
                        label: {
                            text: "",
                            position: "outer-center"
                        },
                        tick: {
                            fit: false,
                            rotate: 0,
                            format: function format(num) {
                                if (_this5.paths.dataX && _this5.xAxisValueToLabel && _this5.dataXType !== "number") {
                                    return _this5.xAxisValueToLabel[num] || "";
                                } else {
                                    return String(_FormatUtils2.default.defaultNumberFormatting(num));
                                }
                            }
                        }
                    },
                    y: {
                        label: {
                            text: "",
                            position: "outer-middle"
                        },
                        tick: {
                            format: function format(num) {
                                if (_this5.paths.dataY && _this5.yAxisValueToLabel && _this5.dataYType !== "number") {
                                    return _this5.yAxisValueToLabel[num] || "";
                                } else {
                                    return String(_FormatUtils2.default.defaultNumberFormatting(num));
                                }
                            }
                        }
                    }
                },
                grid: {
                    x: {
                        show: true
                    },
                    y: {
                        show: true
                    }
                },
                point: {
                    r: function r(d) {
                        if (d.hasOwnProperty("index")) {
                            return _this5.normalizedPointSizes[d.index];
                        }
                    }
                },
                onrendered: this._updateStyle.bind(this)
            };
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3ScatterPlot;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3ScatterPlot;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::ScatterPlotTool", WeaveC3ScatterPlot);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"./AbstractWeaveTool":24,"c3":"c3","d3":"d3","lodash":"lodash"}],30:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /// <reference path="../../typings/d3/d3.d.ts"/>

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FormatUtils = function () {
    function FormatUtils() {
        _classCallCheck(this, FormatUtils);
    }

    _createClass(FormatUtils, null, [{
        key: "defaultNumberFormatting",

        // this function returns the default number formating.
        // for number values, we round them to at most 4 decimal places
        // unless the number is very small, in which case we just return it
        value: function defaultNumberFormatting(x) {
            if (x < 0.0001) {
                return x;
            } else {
                return d3.round(x, 4);
            }
        }
    }]);

    return FormatUtils;
}();

exports.default = FormatUtils;

},{"d3":"d3"}],31:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /// <reference path="../../typings/lodash/lodash.d.ts"/>

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var StandardLib = function () {
    function StandardLib() {
        _classCallCheck(this, StandardLib);
    }

    _createClass(StandardLib, null, [{
        key: "findDeep",

        /**
           * Searches for the first nested object with matching properties
           * @param roo The root Object.
           * @param match Either an Object with properties to match, or a Function that checks for a match.
         *
         * @returns returns an object with the matching properties
           */
        value: function findDeep(root, match) {
            if (typeof match !== "function") {
                match = _.matches(match);
            }
            if (match(root)) {
                return root;
            }
            if ((typeof root === "undefined" ? "undefined" : _typeof(root)) == "object") {
                var key;
                for (key in root) {
                    var found = this.findDeep(root[key], match);
                    if (found) return found;
                }
            }
        }
        /**
          * Adds undefined values to new state for properties in
          * current state not found in new state.
          */

    }, {
        key: "includeMissingPropertyPlaceholders",
        value: function includeMissingPropertyPlaceholders(currentState, newState) {
            var key;
            for (key in currentState) {
                if (!newState.hasOwnProperty(key)) {
                    newState[key] = undefined;
                }
            }
            return newState;
        }
        /**
          * Calculates an interpolated color for a normalized value.
          * @param normValue A Number between 0 and 1.
          * @param colors An Array or list of colors to interpolate between.  Normalized values of 0 and 1 will be mapped to the first and last colors.
          * @return An interpolated color associated with the given normValue based on the list of color values.
          */

    }, {
        key: "interpolateColor",
        value: function interpolateColor(normValue) {
            for (var _len = arguments.length, colors = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                colors[_key - 1] = arguments[_key];
            }

            // handle an array of colors as the second parameter
            if (colors.length === 1 && Array.isArray(colors[0])) {
                colors = colors[0];
            }
            // handle invalid parameters
            if (normValue < 0 || normValue > 1 || colors.length === 0) {
                return NaN;
            }
            // find the min and max colors we want to interpolate between
            var maxIndex = Math.floor(colors.length - 1);
            var leftIndex = Math.floor(maxIndex * normValue);
            var rightIndex = Math.floor(leftIndex + 1);
            // handle boundary condition
            if (rightIndex === colors.length) {
                return parseInt(colors[leftIndex], 16);
            }
            var minColor = colors[leftIndex];
            var maxColor = colors[rightIndex];
            // normalize the norm value between the two norm values associated with the surrounding colors
            normValue = normValue * maxIndex - leftIndex;
            var percentLeft = 1 - normValue; // relevance of minColor
            var percentRight = normValue; // relevance of maxColor
            var R = 0xFF0000;
            var G = 0x00FF00;
            var B = 0x0000FF;
            return percentLeft * (minColor & R) + percentRight * (maxColor & R) & R | percentLeft * (minColor & G) + percentRight * (maxColor & G) & G | percentLeft * (minColor & B) + percentRight * (maxColor & B) & B;
        }
        /**
        * This function converts a decimal number to a 6 digit hexadecimal string
        * @param dec A decimal number
        * @return the hexadecimal value of the decimal number
        */

    }, {
        key: "decimalToHex",
        value: function decimalToHex(dec) {
            return _.padLeft(dec.toString(16), 6, "0");
        }
        /**
         * This function return the normalized value between a range
         * if no range is provided, the default range will be 0 and 1
         *
         * @param value The value to be normalized
         * @param min the range min value
         * @param max the range max value
         */

    }, {
        key: "normalize",
        value: function normalize(value, min, max) {
            if (!min) {
                min = 0;
            }
            if (!max) {
                max = 1;
            }
            return (value - min) / (max - min);
        }
        /**
         *  This function takes merges an object into another
         *
         * @param into {object} the object to merge into
         * @param obj {obj} the object to merge from
         */

    }, {
        key: "merge",
        value: function merge(into, obj) {
            var attr;
            for (attr in obj) {
                into[attr] = obj[attr];
            }
        }
        /**
         * Temporary polyfill workaround for String.startsWith
         * for projects that are targetting es5
         *
         *  determines whether a string begins with the characters of another string, returning true or false as appropriate.
         *
         * @param str {string} the str string in which to search for in str.startsWith
         * @param searchString {string} The characters to be searched for at the start of this string.
         * @param position {number?} Optional. The position in this string at which to begin searching for searchString; defaults to 0.
         *
         * @returns true or false
         *
         */

    }, {
        key: "startsWith",
        value: function startsWith(str, searchString, position) {
            position = position || 0;
            return str.indexOf(searchString, position) === position;
        }
    }, {
        key: "resolveRelative",
        value: function resolveRelative(path, base) {
            // Upper directory
            if (StandardLib.startsWith(path, "../")) {
                return StandardLib.resolveRelative(path.slice(3), base.replace(/\/[^\/]*$/, ""));
            }
            // Relative to the root
            if (StandardLib.startsWith(path, "/")) {
                var match = base.match(/(\w*:\/\/)?[^\/]*\//) || [base];
                return match[0] + path.slice(1);
            }
            //relative to the current directory
            return base.replace(/\/[^\/]*$/, "") + "/" + path;
        }
    }, {
        key: "getDataBounds",
        value: function getDataBounds(column) {
            return {
                min: _.min(column),
                max: _.max(column)
            };
        }
        /**
         *
         *   This function return and object whose keys are url
         *   parameters and value
         */

    }, {
        key: "getUrlParams",
        value: function getUrlParams() {
            var queryParams = {};
            var query = window.location.search.substring(1);
            if (!query) {
                return {};
            }
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (typeof queryParams[pair[0]] === "undefined") {
                    queryParams[pair[0]] = decodeURIComponent(pair[1]);
                } else if (typeof queryParams[pair[0]] === "string") {
                    var arr = [queryParams[pair[0]], decodeURIComponent(pair[1])];
                    queryParams[pair[0]] = arr;
                } else {
                    queryParams[pair[0]].push(decodeURIComponent(pair[1]));
                }
            }
            return queryParams;
        }
    }]);

    return StandardLib;
}();

exports.default = StandardLib;

},{"lodash":"lodash"}],32:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactBootstrap = require("react-bootstrap");

var bs = _interopRequireWildcard(_reactBootstrap);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeaveTool = require("../outts/WeaveTool.jsx");

var _reactDatePicker = require("react-date-picker");

var _reactDatePicker2 = _interopRequireDefault(_reactDatePicker);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var customSearchStyle = {
    display: "flex",
    flexDirection: "row",
    height: 30,
    width: "100%"
};

var inputStyle = {
    flex: 1,
    paddingLeft: 4,
    paddingRight: 4
};

var searchButtonStyle = {
    flex: 1
};

var glyphStyle = {
    fontSize: "12px"
};

var CustomSearchTool = function (_React$Component) {
    _inherits(CustomSearchTool, _React$Component);

    function CustomSearchTool(props) {
        _classCallCheck(this, CustomSearchTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CustomSearchTool).call(this, props));

        _this.props.toolPath.request("ExternalTool");

        _this.state = {
            searchObject: _this.props.toolPath.push("searchValues").request("LinkableVariable").getState() || {}
        };
        _this.searchFields = _this.props.toolPath.push("searchFields").request("LinkableVariable").getState() || [];

        _this.updateStateFuncs = {};
        _this.searchFields.forEach(function (field) {
            this.updateStateFuncs[field.label] = this.updateState.bind(this, field.label);
        }, _this);

        _this.debouncedComponentDidUpdate = _lodash2.default.debounce(function () {
            _this.props.toolPath.state("searchValues", _this.state.searchObject);
        }, 2000);
        return _this;
    }

    _createClass(CustomSearchTool, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            this.props.toolPath.addCallback(this, this.handleWeaveState, true, false);
            this.props.toolPath.push("searchFields").addCallback(this, function () {
                _this2.searchFields = _this2.props.toolPath.getState("searchFields") || [];
                _this2.updateStateFuncs = {};
                _this2.searchFields.forEach(function (field) {
                    _this2.updateStateFuncs[field.label] = _this2.updateState.bind(_this2, field.label);
                }, _this2);
            }, true);
        }
    }, {
        key: "handleWeaveState",
        value: function handleWeaveState() {
            this.setState({
                searchObject: this.props.toolPath.getState("searchValues") || {}
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            // this.debouncedComponentDidUpdate();
        }
    }, {
        key: "submitSearch",
        value: function submitSearch(event) {
            this.props.toolPath.state("searchValues", this.state.searchObject);
            if (event) {
                event.preventDefault();
            }
        }
    }, {
        key: "updateState",
        value: function updateState(label, event, callback) {
            var components = _lodash2.default.clone(this.state.searchObject);
            components[label] = event.target.value;
            this.setState({
                searchObject: components
            }, callback);
        }
    }, {
        key: "updateDateField",
        value: function updateDateField(label, value, moment) {
            // TODO use moment object to manipulate format
            var components = _lodash2.default.clone(this.state.searchObject);
            components[label] = value;
            this.setState({
                searchObject: components
            });
        }
    }, {
        key: "updateStateDateField",
        value: function updateStateDateField(label, event) {
            var datePicker = this.refs["datePicker" + label];

            // set the datepicker date so that it moves to that view
            if (datePicker) {
                if (isNaN(Date.parse(event.target.value)) === false) {
                    datePicker.gotoDate(new Date(event.target.value));
                }
            }
            this.updateStateFuncs[label](event);
        }
    }, {
        key: "removeSearchOption",
        value: function removeSearchOption(key) {
            var _this3 = this;

            var components = _lodash2.default.clone(this.state.searchObject);
            delete components[key];
            this.setState({
                searchObject: components
            }, function () {
                if (!Object.keys(_this3.state.searchObject).length) {
                    _this3.submitSearch();
                }
            });
        }
    }, {
        key: "handleDropdownSelect",
        value: function handleDropdownSelect(event, eventKey) {
            var components = _lodash2.default.clone(this.state.searchObject);
            components[eventKey] = this.state.searchObject[eventKey] || "";
            this.setState({
                searchObject: components
            });
        }
    }, {
        key: "render",
        value: function render() {
            var menuItems = this.searchFields.map(function (searchField, index) {
                return _react2.default.createElement(
                    bs.MenuItem,
                    { key: index, eventKey: searchField.label },
                    " ",
                    searchField.label,
                    " "
                );
            });

            var inputs = [];

            for (var i in this.searchFields) {
                var label = this.searchFields[i].label;
                var type = this.searchFields[i].type;

                if (this.state.searchObject.hasOwnProperty(label)) {

                    var closeButton = _react2.default.createElement(
                        bs.Button,
                        { className: "close-button", key: "close" + i, tabIndex: -1, onClick: this.removeSearchOption.bind(this, label), bsSize: this.props.bsSize },
                        _react2.default.createElement(bs.Glyphicon, { glyph: "remove", style: glyphStyle })
                    );

                    var searchInput = "";

                    if (type === "date") {
                        var dateFormat = this.searchFields[i].dateFormat || "MM/DD/YYYY";
                        var datePicker = _react2.default.createElement(
                            bs.Popover,
                            { id: "date picker" },
                            _react2.default.createElement(_reactDatePicker2.default, { ref: "datePicker" + label, dateFormat: dateFormat, date: this.state.searchObject[label], onChange: this.updateDateField.bind(this, label) })
                        );

                        searchInput = _react2.default.createElement(
                            "div",
                            { style: inputStyle, key: "searchInput" + i },
                            _react2.default.createElement(
                                bs.OverlayTrigger,
                                { trigger: "click", rootClose: true, placement: "bottom", overlay: datePicker },
                                _react2.default.createElement(bs.Input, {
                                    bsSize: this.props.bsSize,
                                    value: this.state.searchObject[label],
                                    ref: label,
                                    type: "text",
                                    addonBefore: label,
                                    buttonAfter: closeButton,
                                    hasFeedback: true,
                                    placeholder: dateFormat,
                                    onChange: this.updateStateDateField.bind(this, label) })
                            )
                        );
                    } else if (type === "text") {
                        searchInput = _react2.default.createElement(
                            "div",
                            { style: inputStyle, key: "searchInput" + i },
                            _react2.default.createElement(bs.Input, {
                                bsSize: this.props.bsSize,
                                value: this.state.searchObject[label],
                                ref: label,
                                type: "text",
                                addonBefore: label,
                                buttonAfter: closeButton,
                                hasFeedback: true,
                                placeholder: "Enter " + label,
                                onChange: this.updateStateFuncs[label] })
                        );
                    }
                    inputs.push(searchInput);
                }
            }
            return _react2.default.createElement(
                "div",
                { style: customSearchStyle },
                _react2.default.createElement(
                    bs.Dropdown,
                    { id: "dropdown", title: "Dropdown", bsSize: this.props.bsSize, bsStyle: "primary", onSelect: this.handleDropdownSelect.bind(this) },
                    _react2.default.createElement(
                        bs.Dropdown.Toggle,
                        { bsStyle: "primary" },
                        _react2.default.createElement(bs.Glyphicon, { glyph: "search" })
                    ),
                    _react2.default.createElement(
                        bs.Dropdown.Menu,
                        null,
                        menuItems
                    )
                ),
                _react2.default.createElement(
                    "form",
                    { onsubmit: this.submitSearch.bind(this), style: customSearchStyle },
                    inputs,
                    Object.keys(this.state.searchObject).length ? _react2.default.createElement(
                        "div",
                        { style: { float: "right" } },
                        _react2.default.createElement(
                            bs.ButtonInput,
                            { type: "submit", bsStyle: "primary", onClick: this.submitSearch.bind(this) },
                            " Search "
                        )
                    ) : null
                )
            );
        }
    }]);

    return CustomSearchTool;
}(_react2.default.Component);

exports.default = CustomSearchTool;

(0, _WeaveTool.registerToolImplementation)("CustomSearchTool", CustomSearchTool);

},{"../outts/WeaveTool.jsx":17,"lodash":"lodash","react":"react","react-bootstrap":"react-bootstrap","react-date-picker":7}],33:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _Layout = require("../outts/react-flexible-layout/Layout.jsx");

var _Layout2 = _interopRequireDefault(_Layout);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeavePanel = require("./WeavePanel.js");

var _WeavePanel2 = _interopRequireDefault(_WeavePanel);

var _WeavePanelManager = require("./WeavePanelManager.js");

var WeavePanelManager = _interopRequireWildcard(_WeavePanelManager);

var _weaveC3Barchart = require("../outts/tools/weave-c3-barchart.jsx");

var _weaveC3Barchart2 = _interopRequireDefault(_weaveC3Barchart);

var _weaveC3Scatterplot = require("../outts/tools/weave-c3-scatterplot.jsx");

var _weaveC3Scatterplot2 = _interopRequireDefault(_weaveC3Scatterplot);

var _weaveC3Colorlegend = require("../outts/tools/weave-c3-colorlegend.jsx");

var _weaveC3Colorlegend2 = _interopRequireDefault(_weaveC3Colorlegend);

var _weaveC3Linechart = require("./tools/weave-c3-linechart.jsx");

var _weaveC3Linechart2 = _interopRequireDefault(_weaveC3Linechart);

var _weaveC3Piechart = require("../outts/tools/weave-c3-piechart.jsx");

var _weaveC3Piechart2 = _interopRequireDefault(_weaveC3Piechart);

var _weaveC3Histogram = require("../outts/tools/weave-c3-histogram.jsx");

var _weaveC3Histogram2 = _interopRequireDefault(_weaveC3Histogram);

var _weaveBarchart = require("./tools/weave-barchart.jsx");

var _weaveBarchart2 = _interopRequireDefault(_weaveBarchart);

var _map = require("./tools/map.js");

var _map2 = _interopRequireDefault(_map);

var _weaveReactTable = require("./tools/weave-react-table.jsx");

var _weaveReactTable2 = _interopRequireDefault(_weaveReactTable);

var _weaveSessionStateMenu = require("./tools/weave-session-state-menu.jsx");

var _weaveSessionStateMenu2 = _interopRequireDefault(_weaveSessionStateMenu);

var _CustomSearchTool = require("./CustomSearchTool.jsx");

var _CustomSearchTool2 = _interopRequireDefault(_CustomSearchTool);

var _WeaveTool = require("../outts/WeaveTool.jsx");

var _ToolOverlay = require("../outts/ToolOverlay.jsx");

var _ToolOverlay2 = _interopRequireDefault(_ToolOverlay);

var _StandardLib = require("../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
/* global Weave, weavejs */

var LAYOUT = "Layout";

var LEFT = "left";
var RIGHT = "right";
var TOP = "top";
var BOTTOM = "bottom";
var VERTICAL = "vertical";
var HORIZONTAL = "horizontal";

var TOOLOVERLAY = "tooloverlay";

var WeaveLayoutManager = function (_React$Component) {
    _inherits(WeaveLayoutManager, _React$Component);

    function WeaveLayoutManager(props) {
        _classCallCheck(this, WeaveLayoutManager);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveLayoutManager).call(this, props));

        _this.weave = _this.props.weave || new Weave();
        _this.weave.path(LAYOUT).request("FlexibleLayout");
        _this.margin = 8;
        return _this;
    }

    _createClass(WeaveLayoutManager, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            window.addEventListener("resize", this._forceUpdate = _lodash2.default.throttle(function () {
                _this2.dirty = true;_this2.forceUpdate();
            }, 30));
            this.weave.root.childListCallbacks.addGroupedCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true);
            this.weave.root.childListCallbacks.addGroupedCallback(this, function () {
                console.log("test child list callback");
            });
            this.weave.path(LAYOUT).addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true);
            this.weave.path(LAYOUT).state(this.simplifyState(this.weave.path(LAYOUT).getState()));
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            window.removeEventListener("resize", this._forceUpdate);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (Weave.detectChange(this, this.weave.getObject(LAYOUT)) || this.dirty) {
                // dirty flag to trigger render on window resize
                this.dirty = false;
                //_.debounce(this.forceUpdate.bind(this), 0)();
                this.forceUpdate();
            }
        }
    }, {
        key: "saveState",
        value: function saveState(newState) {
            newState = this.simplifyState(newState);
            newState.flex = 1;
            this.weave.path(LAYOUT).state(newState);
            // temporary hack because weave
            // doesn't properly callback forceUpdate
            //this.forceUpdate();
        }
    }, {
        key: "onDragStart",
        value: function onDragStart(id, event) {
            this.toolDragged = id;
            var toolRef = id[0]; // toolName as used in the ref for the weave tool.
            var element = _reactDom2.default.findDOMNode(this.refs[toolRef]);
            event.dataTransfer.setDragImage(element, 0, 0);
            event.dataTransfer.setData('text/html', null);
        }
    }, {
        key: "hideOverlay",
        value: function hideOverlay() {
            var toolOverlayStyle = _lodash2.default.clone(this.refs[TOOLOVERLAY].state.style);
            toolOverlayStyle.visibility = "hidden";
            toolOverlayStyle.left = toolOverlayStyle.top = toolOverlayStyle.width = toolOverlayStyle.height = 0;
            this.refs[TOOLOVERLAY].setState({
                style: toolOverlayStyle
            });
        }
    }, {
        key: "onDragEnd",
        value: function onDragEnd() {
            if (this.toolDragged && this.toolOver) {
                this.updateLayout(this.toolDragged, this.toolOver, this.dropZone);
                this.toolDragged = null;
                this.dropZone = null;
                this.hideOverlay();
            }
        }
    }, {
        key: "onDragOver",
        value: function onDragOver(toolOver, event) {
            if (!this.toolDragged) {
                return;
            }
            if (_lodash2.default.isEqual(this.toolDragged, toolOver)) {
                // hide the overlay if hovering over the tool being dragged
                this.toolOver = null;
                this.hideOverlay();
                return;
            }

            var toolNode = this.refs[LAYOUT].getDOMNodeFromId(toolOver);
            var toolNodePosition = toolNode.getBoundingClientRect();

            var toolOverlayStyle = _lodash2.default.clone(this.refs[TOOLOVERLAY].state.style);
            var dropZone = this.getDropZone(toolOver, event);
            toolOverlayStyle.left = toolNodePosition.left;
            toolOverlayStyle.top = toolNodePosition.top;
            toolOverlayStyle.width = toolNodePosition.width;
            toolOverlayStyle.height = toolNodePosition.height;
            toolOverlayStyle.visibility = "visible";

            if (dropZone === LEFT) {
                toolOverlayStyle.width = toolNodePosition.width / 2;
            } else if (dropZone === RIGHT) {
                toolOverlayStyle.left = toolNodePosition.left + toolNodePosition.width / 2;
                toolOverlayStyle.width = toolNodePosition.width / 2;
            } else if (dropZone === BOTTOM) {
                toolOverlayStyle.top = toolNodePosition.top + toolNodePosition.height / 2;
                toolOverlayStyle.height = toolNodePosition.height / 2;
            } else if (dropZone === TOP) {
                toolOverlayStyle.height = toolNodePosition.height / 2;
            }

            if (dropZone !== this.dropZone || !_lodash2.default.isEqual(toolOver, this.toolOver)) {
                this.refs[TOOLOVERLAY].setState({
                    style: toolOverlayStyle
                });
            }

            this.dropZone = dropZone;
            this.toolOver = toolOver;
        }
    }, {
        key: "getDropZone",
        value: function getDropZone(id, event) {
            if (this.toolDragged) {
                if (!_lodash2.default.isEqual(this.toolDragged, id)) {
                    var toolNode = this.refs[LAYOUT].getDOMNodeFromId(id);
                    var toolNodePosition = toolNode.getBoundingClientRect();

                    var center = {
                        x: (toolNodePosition.right - toolNodePosition.left) / 2,
                        y: (toolNodePosition.bottom - toolNodePosition.top) / 2
                    };

                    var mousePosRelativeToCenter = {
                        x: event.clientX - (toolNodePosition.left + center.x),
                        y: event.clientY - (toolNodePosition.top + center.y)
                    };

                    var mouseNorm = {
                        x: mousePosRelativeToCenter.x / (toolNodePosition.width / 2),
                        y: mousePosRelativeToCenter.y / (toolNodePosition.height / 2)
                    };

                    var mousePolarCoord = {
                        r: Math.sqrt(mouseNorm.x * mouseNorm.x + mouseNorm.y * mouseNorm.y),
                        theta: Math.atan2(mouseNorm.y, mouseNorm.x)
                    };

                    var zones = [RIGHT, BOTTOM, LEFT, TOP];

                    var zoneIndex = Math.round(mousePolarCoord.theta / (2 * Math.PI) * 4 + 4) % 4;

                    if (mousePolarCoord.r < 0.34) {
                        return "center";
                    } else {
                        return zones[zoneIndex];
                    }
                }
            }
        }
    }, {
        key: "simplifyState",
        value: function simplifyState(state) {
            if (!state) return {};
            var children = state.children;

            if (!children) {
                return state;
            }

            if (children.length === 1) {
                return this.simplifyState(children[0]);
            }

            var simpleChildren = [];

            for (var i = 0; i < children.length; i++) {
                var child = this.simplifyState(children[i]);
                if (child.children && child.direction === state.direction) {
                    var childChildren = child.children;
                    for (var ii = 0; ii < childChildren.length; ii++) {
                        var childChild = childChildren[ii];
                        childChild.flex *= child.flex;
                        simpleChildren.push(childChild);
                    }
                } else {
                    simpleChildren.push(child);
                }
            }
            state.children = simpleChildren;
            var totalSizeChildren = _lodash2.default.sum(_lodash2.default.map(children, "flex"));

            //Scale flex values between 0 and 1 so they sum to 1, avoiding an apparent
            //flex bug where space is lost if sum of flex values is less than 1.
            for (var i = 0; i < state.children.length; i++) {
                state.children[i].flex = _StandardLib2.default.normalize(state.children[i].flex, 0, totalSizeChildren);
            }

            return state;
        }
    }, {
        key: "updateLayout",
        value: function updateLayout(toolDragged, toolDroppedOn, dropZone) {

            if (!this.toolDragged || !this.toolOver || !this.dropZone) {
                return;
            }

            var newState = _lodash2.default.cloneDeep(this.weave.path(LAYOUT).getState());
            var src = _StandardLib2.default.findDeep(newState, { id: toolDragged });
            var dest = _StandardLib2.default.findDeep(newState, { id: toolDroppedOn });
            if (_lodash2.default.isEqual(src.id, dest.id)) {
                return;
            }

            if (dropZone === "center") {
                var srcId = src.id;
                src.id = dest.id;
                dest.id = srcId;
            } else {
                var srcParentArray = _StandardLib2.default.findDeep(newState, function (obj) {
                    return Array.isArray(obj) && obj.indexOf(src) >= 0;
                });

                srcParentArray.splice(srcParentArray.indexOf(src), 1);

                delete dest.id;
                dest.direction = dropZone === TOP || dropZone === BOTTOM ? VERTICAL : HORIZONTAL;

                dest.children = [{
                    id: toolDragged,
                    flex: 0.5
                }, {
                    id: toolDroppedOn,
                    flex: 0.5
                }];
                if (dropZone === BOTTOM || dropZone === RIGHT) {
                    dest.children.reverse();
                }
            }
            this.saveState(newState);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var children = [];
            var newState = this.weave.path(LAYOUT).getState();

            var paths = this.weave.path().getChildren();
            var rect;
            if (this.element) {
                rect = this.element.getBoundingClientRect();
            }

            for (var i = 0; i < paths.length; i++) {
                var path = paths[i];
                var impl = path.getType();
                if (impl === "weave.visualization.tools::ExternalTool" && path.getType("toolClass")) {
                    impl = path.getState("toolClass");
                }
                if (impl === "weavejs.core.LinkableHashMap" && path.getType("class")) impl = path.getState("class");
                impl = (0, _WeaveTool.getToolImplementation)(impl);
                var toolName = path.getPath()[0];
                var node;
                var toolRect;
                var toolPosition;
                if (impl) {
                    if (this.refs[LAYOUT] && rect) {
                        node = this.refs[LAYOUT].getDOMNodeFromId(path.getPath());
                        if (node) {
                            toolRect = node.getBoundingClientRect();
                            toolPosition = {
                                top: toolRect.top - rect.top,
                                left: toolRect.left - rect.left,
                                width: toolRect.right - toolRect.left,
                                height: toolRect.bottom - toolRect.top,
                                position: "absolute"
                            };
                        }
                    }
                    children.push(_react2.default.createElement(_WeaveTool.WeaveTool, { ref: toolName, key: toolName, toolPath: path, style: toolPosition,
                        onDragOver: this.onDragOver.bind(this, path.getPath()), onDragStart: this.onDragStart.bind(this, path.getPath()), onDragEnd: this.onDragEnd.bind(this)
                    }));
                }
            }

            return _react2.default.createElement(
                "div",
                { ref: function ref(elt) {
                        _this3.element = elt;
                    }, style: { width: "100%", height: "100%", display: "flex", position: "relative" } },
                _react2.default.createElement(_Layout2.default, { key: LAYOUT, ref: LAYOUT, state: _lodash2.default.cloneDeep(newState), onStateChange: this.saveState.bind(this) }),
                children,
                _react2.default.createElement(_ToolOverlay2.default, { ref: TOOLOVERLAY })
            );
        }
    }]);

    return WeaveLayoutManager;
}(_react2.default.Component);

exports.default = WeaveLayoutManager;

},{"../outts/ToolOverlay.jsx":16,"../outts/WeaveTool.jsx":17,"../outts/react-flexible-layout/Layout.jsx":18,"../outts/tools/weave-c3-barchart.jsx":25,"../outts/tools/weave-c3-colorlegend.jsx":26,"../outts/tools/weave-c3-histogram.jsx":27,"../outts/tools/weave-c3-piechart.jsx":28,"../outts/tools/weave-c3-scatterplot.jsx":29,"../outts/utils/StandardLib.js":31,"./CustomSearchTool.jsx":32,"./WeavePanel.js":34,"./WeavePanelManager.js":35,"./tools/map.js":38,"./tools/weave-barchart.jsx":50,"./tools/weave-c3-linechart.jsx":51,"./tools/weave-react-table.jsx":52,"./tools/weave-session-state-menu.jsx":53,"lodash":"lodash","react":"react","react-dom":"react-dom"}],34:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function percentToNumber(percentString) {
    if (percentString.endsWith("%")) {
        var percentValue = Number(percentString.substring(0, percentString.length - 1));
        return percentValue / 100.0;
    } else {
        return Number(percentString);
    }
}

var WeavePanel = function () {
    function WeavePanel(parent, toolPath, ToolClass) {
        var _this = this;

        _classCallCheck(this, WeavePanel);

        this.toolPath = toolPath;
        this.parent = parent;

        this.plotManagerPath = toolPath.push("children", "visualization", "plotManager");
        this.toolName = toolPath.getPath().pop();
        this.element = (0, _jquery2.default)("<div></div>").appendTo(parent).attr("id", this.toolName).css("borderStyle", "solid").css("borderColor", "4D5258").css("borderWidth", "2px").css("background", "rgba(255, 255, 255, 1.0)").css("position", "absolute");

        this.tool = new ToolClass(this.element, toolPath);
        var boundFunc = _lodash2.default.debounce(this._panelChanged.bind(this), 100);

        (0, _jquery2.default)(window).resize(boundFunc);

        ["panelY", "panelX", "panelHeight", "panelWidth", "maximized", "zOrder", "panelBorderColor"].forEach(function (item) {
            _this.toolPath.push(item).addCallback(boundFunc, true, false);
        }, this);
    }

    _createClass(WeavePanel, [{
        key: "_panelChanged",
        value: function _panelChanged() {
            var top, left, height, width;
            var toolPath = this.toolPath;
            var parent = this.parent;

            if (toolPath.getState("maximized")) {
                top = 0;
                left = 0;
                height = (0, _jquery2.default)(parent).height();
                width = (0, _jquery2.default)(parent).width();
            } else {
                top = percentToNumber(toolPath.getState("panelY")) * (0, _jquery2.default)(parent).height();
                left = percentToNumber(toolPath.getState("panelX")) * (0, _jquery2.default)(parent).width();
                height = percentToNumber(toolPath.getState("panelHeight")) * (0, _jquery2.default)(parent).height();
                width = percentToNumber(toolPath.getState("panelWidth")) * (0, _jquery2.default)(parent).width();
            }

            this.element.css("borderColor", toolPath.getState("panelBorderColor"));

            this.element.css("position", "absolute").css({ top: top, left: left, height: height, width: width, "max-height": height, "max-width": width }).css({ "-webkit-transform": "translateZ(0)" }); /* In Webkit, forces the div to be a compositing layer. */
            this._updateContents();
        }
    }, {
        key: "destroy",
        value: function destroy() {
            this.element.remove();
            this.tool.destroy();
        }
    }]);

    return WeavePanel;
}();

exports.default = WeavePanel;

},{"jquery":"jquery","lodash":"lodash"}],35:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.registerToolImplementation = registerToolImplementation;
exports.init = init;

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeavePanel = require("./WeavePanel.js");

var _WeavePanel2 = _interopRequireDefault(_WeavePanel);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Weave panel manager "singleton" module
 */

var toolRegistry = null;
var tools = {};
var weaveRootElmt = null;
var weaveRootPath = null;

function _createTool(parent, path) {
    var ToolClass = toolRegistry[path.getType()];
    var panel;

    if (ToolClass) {
        panel = new _WeavePanel2.default(parent, path, ToolClass);
    }
    return panel;
}

function _toolsChanged() {
    var toolNames = _lodash2.default.keys(tools);
    var newNames = weaveRootPath.getNames();

    var removedToolNames = _lodash2.default.difference(toolNames, newNames);
    var addedToolNames = _lodash2.default.difference(newNames, toolNames);

    removedToolNames.forEach(function (name) {
        tools[name].destroy();
        delete tools[name];
    });

    addedToolNames.forEach(function (name) {
        var tool = _createTool(weaveRootElmt, weaveRootPath.push(name));
        if (tool) {
            tools[name] = tool;
        }
    });

    var zIndex = 0;
    for (var idx in newNames) {
        var tool = tools[newNames[idx]];

        if (!tool) {
            continue;
        }

        var modifier = 9000 * tool.toolPath.push("zOrder").getState();
        tool.element.css("z-index", zIndex + modifier);

        zIndex++;
    }
}

// publicly exposed function
function registerToolImplementation(asClassName, jsClass) {
    if (!toolRegistry) {
        toolRegistry = {};
    }
    toolRegistry[asClassName] = jsClass;
}

// publicly exposed function
// initialize the weave panel manager
// by setting up the callback.
function init(root, weave) {
    weaveRootElmt = (0, _jquery2.default)(root);
    weaveRootPath = weave.path();
    weaveRootPath.getValue("childListCallbacks.addGroupedCallback")(null, _toolsChanged, true);
}

},{"./WeavePanel.js":34,"jquery":"jquery","lodash":"lodash"}],36:[function(require,module,exports){
"use strict";

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _StandardLib = require("../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _jszip = require("jszip");

var _jszip2 = _interopRequireDefault(_jszip);

var _WeaveLayoutManager = require("./WeaveLayoutManager.jsx");

var _WeaveLayoutManager2 = _interopRequireDefault(_WeaveLayoutManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-enable */

/*global Weave, weavejs*/

// temporary solution
weavejs.util.JS.JSZip = _jszip2.default;
/* eslint-disable */

var weave = window.weave || opener && opener.weave;

var urlParams = _StandardLib2.default.getUrlParams();
if (!weave && urlParams.file) {
    window.weave = weave = new Weave();
    weavejs.core.WeaveArchive.loadUrl(weave, urlParams.file).then(render);
} else {
    render();
}

function render() {
    if (weave) {
        (0, _jquery2.default)(function () {
            _reactDom2.default.render(_react2.default.createElement(_WeaveLayoutManager2.default, { weave: weave }), document.getElementById("weaveElt"));
        });
    } else {
        console.warn("missing weave instance.");
    }
}

},{"../outts/utils/StandardLib.js":31,"./WeaveLayoutManager.jsx":33,"jquery":"jquery","jszip":"jszip","react":"react","react-dom":"react-dom"}],37:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _d = require("d3");

var _d2 = _interopRequireDefault(_d);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var AbstractWeaveTool = function (_React$Component) {
	_inherits(AbstractWeaveTool, _React$Component);

	function AbstractWeaveTool(props) {
		_classCallCheck(this, AbstractWeaveTool);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AbstractWeaveTool).call(this, props));

		_this.toolPath = props.toolPath;
		_this.paths = {};
		return _this;
	}

	_createClass(AbstractWeaveTool, [{
		key: "getElementSize",
		value: function getElementSize() {
			return {
				width: this.wrapper.clientWidth,
				height: this.wrapper.clientHeight
			};
		}

		// this function accepts an array of path configurations
		// a path config is an object with a path object name, the weave path and an
		// optional callback or array of callbacks

	}, {
		key: "initializePaths",
		value: function initializePaths(properties) {
			var _this2 = this;

			properties.forEach(function (pathConf) {
				_this2.paths[pathConf.name] = pathConf.path;
				if (pathConf.callbacks) {
					var callbacks = Array.isArray(pathConf.callbacks) ? pathConf.callbacks : [pathConf.callbacks];
					callbacks.forEach(function (callback) {
						_this2.paths[pathConf.name].addCallback(_this2, callback, true);
					});
				}
			});
		}
	}, {
		key: "componentDidUpdate",
		value: function componentDidUpdate() {}
	}, {
		key: "componentDidMount",
		value: function componentDidMount() {}
	}, {
		key: "componentWillUnmount",
		value: function componentWillUnmount() {}
	}, {
		key: "handleClick",
		value: function handleClick(event) {}
	}, {
		key: "render",
		value: function render() {
			var _this3 = this;

			return _react2.default.createElement(
				"div",
				{ ref: function ref(elt) {
						_this3.wrapper = elt;
					}, style: this.props.style },
				_react2.default.createElement("div", { ref: function ref(elt) {
						_this3.element = elt;
					}, onClick: this.handleClick.bind(this), style: { width: "100%", height: "100%", maxHeight: "100%" } })
			);
		}
	}, {
		key: "customFocus",
		value: function customFocus(array, type, filter) {
			var _this4 = this;

			array.forEach(function (index) {
				_d2.default.select(_d2.default.select(_this4.element).selectAll(type).filter(filter)[0][index]).style("opacity", 1.0);
			});
		}
	}, {
		key: "customDeFocus",
		value: function customDeFocus(array, type, filter) {
			var _this5 = this;

			array.forEach(function (index) {
				_d2.default.select(_d2.default.select(_this5.element).selectAll(type).filter(filter)[0][index]).style("opacity", 0.3);
			});
		}
	}]);

	return AbstractWeaveTool;
}(_react2.default.Component);

exports.default = AbstractWeaveTool;

},{"d3":"d3","react":"react","react-dom":"react-dom"}],38:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _AbstractWeaveTool2 = require("./AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _Layer = require("./map/layers/Layer.js");

var _Layer2 = _interopRequireDefault(_Layer);

var _FeatureLayer = require("./map/layers/FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _GeometryLayer = require("./map/layers/GeometryLayer.js");

var _GeometryLayer2 = _interopRequireDefault(_GeometryLayer);

var _TileLayer = require("./map/layers/TileLayer.js");

var _TileLayer2 = _interopRequireDefault(_TileLayer);

var _ImageGlyphLayer = require("./map/layers/ImageGlyphLayer.js");

var _ImageGlyphLayer2 = _interopRequireDefault(_ImageGlyphLayer);

var _ScatterPlotLayer = require("./map/layers/ScatterPlotLayer.js");

var _ScatterPlotLayer2 = _interopRequireDefault(_ScatterPlotLayer);

var _controls = require("./map/controls.js");

var _interactions = require("./map/interactions.js");

var _interactions2 = _interopRequireDefault(_interactions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/* eslint-disable */

/* eslint-enable */

/*global weavejs*/

var WeaveOpenLayersMap = function (_AbstractWeaveTool) {
	_inherits(WeaveOpenLayersMap, _AbstractWeaveTool);

	function WeaveOpenLayersMap(props) {
		_classCallCheck(this, WeaveOpenLayersMap);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveOpenLayersMap).call(this, props));

		_this.layers = {};
		return _this;
	}

	_createClass(WeaveOpenLayersMap, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			_get(Object.getPrototypeOf(WeaveOpenLayersMap.prototype), "componentDidMount", this).call(this);

			this.interactionModePath = this.toolPath.weave.path("WeaveProperties", "toolInteractions", "defaultDragMode");

			this.map = new _openlayers2.default.Map({
				interactions: (0, _interactions2.default)(this),
				controls: [],
				target: this.element
			});

			this.zoomButtons = new _openlayers2.default.control.Zoom();
			this.slider = new _openlayers2.default.control.ZoomSlider();
			this.pan = new _controls.PanCluster();

			this.toolPath.push("projectionSRS").addCallback(this, this.onProjectionChanged, true);
			this.toolPath.push("showZoomControls").addCallback(this, this.onZoomControlToggle, true);
			this.toolPath.push("showMouseModeControls").addCallback(this, this.onMouseModeControlToggle, true);

			this.mouseModeButtons = new _controls.InteractionModeCluster({ interactionModePath: this.interactionModePath });

			this.plottersPath = this.toolPath.push("children", "visualization", "plotManager", "plotters");
			this.layerSettingsPath = this.toolPath.push("children", "visualization", "plotManager", "layerSettings");
			this.zoomBoundsPath = this.toolPath.push("children", "visualization", "plotManager", "zoomBounds");

			this.plottersPath.getObject().childListCallbacks.addGroupedCallback(this, this.plottersChanged, true);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter, true);
		}
	}, {
		key: "onProjectionChanged",
		value: function onProjectionChanged() {
			var projectionSRS = this.toolPath.push("projectionSRS").getState() || "EPSG:3857";
			var view = new _openlayers2.default.View({ projection: projectionSRS });

			this.centerCallbackHandle = view.on("change:center", this.setSessionCenter, this);
			this.resolutionCallbackHandle = view.on("change:resolution", this.setSessionZoom, this);
			this.map.setView(view);

			this.getSessionCenter();
		}
	}, {
		key: "resize",
		value: function resize() {
			this.map.updateSize();
			var viewport = this.map.getViewport();
			var screenBounds = new weavejs.geom.Bounds2D(0, 0, viewport.clientWidth, viewport.clientHeight);
			this.zoomBoundsPath.getObject().setScreenBounds(screenBounds, true);
		}
	}, {
		key: "updateControlPositions",
		value: function updateControlPositions() {
			if (this.toolPath.push("showZoomControls").getState()) {
				(0, _jquery2.default)(this.element).find(".ol-control.panCluster").css({ top: "0.5em", left: "0.5em" });
				(0, _jquery2.default)(this.element).find(".ol-control.ol-zoom").css({ top: "5.5em", left: "2.075em" });
				(0, _jquery2.default)(this.element).find(".ol-control.ol-zoomslider").css({ top: "9.25em", left: "2.075em" });
				(0, _jquery2.default)(this.element).find(".ol-control.iModeCluster").css({ top: "20.75em", left: "0.6em" });
			} else {
				(0, _jquery2.default)(this.element).find(".ol-control");
			}
		}
	}, {
		key: "onMouseModeControlToggle",
		value: function onMouseModeControlToggle() {
			var showMouseModeControls = this.toolPath.push("showMouseModeControls").getState();
			if (showMouseModeControls) {
				this.map.addControl(this.mouseModeButtons);
			} else {
				this.map.removeControl(this.mouseModeButtons);
			}
			this.updateControlPositions();
		}
	}, {
		key: "onZoomControlToggle",
		value: function onZoomControlToggle() {
			var showZoomControls = this.toolPath.push("showZoomControls").getState();
			if (showZoomControls) {
				this.map.addControl(this.slider);
				this.map.addControl(this.pan);
				this.map.addControl(this.zoomButtons);
			} else {
				this.map.removeControl(this.slider);
				this.map.removeControl(this.pan);
				this.map.removeControl(this.zoomButtons);
			}
			this.updateControlPositions();
		}
	}, {
		key: "setSessionCenter",
		value: function setSessionCenter() {
			var _map$getView$getCente = this.map.getView().getCenter();

			var _map$getView$getCente2 = _slicedToArray(_map$getView$getCente, 2);

			var xCenter = _map$getView$getCente2[0];
			var yCenter = _map$getView$getCente2[1];

			var zoomBounds = this.zoomBoundsPath.getObject();
			// remove callback temporarily to avoid triggering due to rounding error?
			// TODO - avoid rounding error
			this.zoomBoundsPath.removeCallback(this, this.getSessionCenter);

			var dataBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			dataBounds.setXCenter(xCenter);
			dataBounds.setYCenter(yCenter);
			zoomBounds.setDataBounds(dataBounds);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter);
		}
	}, {
		key: "setSessionZoom",
		value: function setSessionZoom() {
			var resolution = this.map.getView().getResolution();

			var zoomBounds = this.zoomBoundsPath.getObject();
			// remove callback temporarily to avoid triggering due to rounding error?
			// TODO - avoid rounding error
			this.zoomBoundsPath.removeCallback(this, this.getSessionCenter);

			var dataBounds = new weavejs.geom.Bounds2D();
			var screenBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			zoomBounds.getScreenBounds(screenBounds);
			dataBounds.setWidth(screenBounds.getWidth() * resolution);
			dataBounds.setHeight(screenBounds.getHeight() * resolution);
			dataBounds.makeSizePositive();
			zoomBounds.setDataBounds(dataBounds);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter);
		}
	}, {
		key: "getSessionCenter",
		value: function getSessionCenter() {
			var _this2 = this;

			var zoomBounds = this.zoomBoundsPath.getObject();
			var dataBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			var center = [dataBounds.getXCenter(), dataBounds.getYCenter()];
			var scale = zoomBounds.getXScale();

			this.map.getView().un("change:center", this.setSessionCenter, this);
			this.map.getView().un("change:resolution", this.setSessionZoom, this);

			this.map.getView().setCenter(center);
			this.map.getView().setResolution(1 / scale);

			_lodash2.default.defer(function () {
				_this2.map.getView().on("change:center", _this2.setSessionCenter, _this2);
				_this2.map.getView().on("change:resolution", _this2.setSessionZoom, _this2);
			});
		}
	}, {
		key: "plottersChanged",
		value: function plottersChanged() {
			var oldNames = _lodash2.default.keys(this.layers);
			var newNames = this.plottersPath.getNames();

			var removedNames = _lodash2.default.difference(oldNames, newNames);
			var addedNames = _lodash2.default.difference(newNames, oldNames);

			removedNames.forEach(function (name) {
				if (this.layers[name]) {
					this.layers[name].destroy();
				}
				delete this.layers[name];
			}, this);

			addedNames.forEach(function (name) {
				this.layers[name] = _Layer2.default.newLayer(this, name);
			}, this);
			/* */
			for (var idx in newNames) {
				var layer = this.layers[newNames[idx]];

				if (!layer || !layer.layer) {
					continue;
				}

				layer.layer.setZIndex(idx + 2);
			}
		}
	}, {
		key: "destroy",
		value: function destroy() {}
	}]);

	return WeaveOpenLayersMap;
}(_AbstractWeaveTool3.default);

exports.default = WeaveOpenLayersMap;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::MapTool", WeaveOpenLayersMap);

},{"../../outts/WeaveTool.jsx":17,"./AbstractWeaveTool.jsx":37,"./map/controls.js":40,"./map/interactions.js":41,"./map/layers/FeatureLayer.js":42,"./map/layers/GeometryLayer.js":43,"./map/layers/ImageGlyphLayer.js":46,"./map/layers/Layer.js":47,"./map/layers/ScatterPlotLayer.js":48,"./map/layers/TileLayer.js":49,"jquery":"jquery","lodash":"lodash","openlayers":"openlayers"}],39:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// var inherits = function(childCtor, parentCtor) {
//   /** @constructor */
//   function tempCtor() {}
//   tempCtor.prototype = parentCtor.prototype;
//   childCtor.superClass_ = parentCtor.prototype;
//   childCtor.prototype = new tempCtor();
//   /** @override */
//   childCtor.prototype.constructor = childCtor;
// };

// var CustomDragBoxEvent = function (type, innerEvent) {
// 	ol.MapEvent.call(this, type, innerEvent.map, innerEvent.frameState)
// 	this.innerEvent = innerEvent;
// };

// console.log(ol.MapBrowserEvent);
// inherits(CustomDragBoxEvent, ol.MapBrowserEvent);
//

var BoxControl = function (_ol$control$Control) {
	_inherits(BoxControl, _ol$control$Control);

	function BoxControl(opt_options) {
		_classCallCheck(this, BoxControl);

		var options = opt_options ? opt_options : {};

		var element = (0, _jquery2.default)("<div>").css({
			position: "absolute"
		}).addClass('ol-box');

		return _possibleConstructorReturn(this, Object.getPrototypeOf(BoxControl).call(this, { element: element[0], target: options.target }));
	}

	_createClass(BoxControl, [{
		key: "setPixels",
		value: function setPixels(startPixel, endPixel) {
			this.startPixel = startPixel;
			this.endPixel = endPixel;

			var _startPixel = _slicedToArray(startPixel, 2);

			var left = _startPixel[0];
			var top = _startPixel[1];

			var _endPixel = _slicedToArray(endPixel, 2);

			var right = _endPixel[0];
			var bottom = _endPixel[1];

			var _lodash$sortBy = _lodash2.default.sortBy([top, bottom]);

			var _lodash$sortBy2 = _slicedToArray(_lodash$sortBy, 2);

			top = _lodash$sortBy2[0];
			bottom = _lodash$sortBy2[1];

			var _lodash$sortBy3 = _lodash2.default.sortBy([left, right]);

			var _lodash$sortBy4 = _slicedToArray(_lodash$sortBy3, 2);

			left = _lodash$sortBy4[0];
			right = _lodash$sortBy4[1];

			var height = bottom - top;
			var width = right - left;

			(0, _jquery2.default)(this.element).css({ top: top, left: left, width: width, height: height });

			this.updateGeometry();
		}
	}, {
		key: "updateGeometry",
		value: function updateGeometry() {
			var startPixel = this.startPixel;
			var endPixel = this.endPixel;
			var pixels = [startPixel, [startPixel[0], endPixel[1]], endPixel, [endPixel[0], startPixel[1]]];
			var map = this.getMap();

			var coordinates = pixels.map(map.getCoordinateFromPixel, map);
			// close the polygon
			coordinates[4] = coordinates[0].slice();

			if (!this.geometry_) {
				this.geometry_ = new _openlayers2.default.geom.Polygon([coordinates]);
			} else {
				this.geometry_.setCoordinates([coordinates]);
			}
		}
	}, {
		key: "getGeometry",
		value: function getGeometry() {
			return this.geometry_;
		}
	}]);

	return BoxControl;
}(_openlayers2.default.control.Control);

var CustomDragBox = function CustomDragBox(opt_options) {
	_openlayers2.default.interaction.Pointer.call(this, {
		handleDownEvent: CustomDragBox.handleDownEvent,
		handleDragEvent: CustomDragBox.handleDragEvent,
		handleUpEvent: CustomDragBox.handleUpEvent
	});

	var options = opt_options ? opt_options : {};

	this.boxControl = new BoxControl();

	this.startPixel_ = null;

	this.condition_ = options.condition ? options.condition : _openlayers2.default.events.condition.always;
};

_openlayers2.default.inherits(CustomDragBox, _openlayers2.default.interaction.Pointer);

CustomDragBox.prototype.getGeometry = function () {
	return this.boxControl.getGeometry();
};

CustomDragBox.handleDragEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return;
	}
	this.boxControl.setPixels(this.startPixel_, mapBrowserEvent.pixel);
	this.dispatchEvent({ type: 'boxdrag', innerEvent: mapBrowserEvent });
};

CustomDragBox.handleDownEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return false;
	}

	if (this.condition_(mapBrowserEvent)) {
		this.startPixel_ = mapBrowserEvent.pixel;
		this.boxControl.setMap(mapBrowserEvent.map);
		this.boxControl.setPixels(this.startPixel_, this.startPixel_);
		this.dispatchEvent({ type: 'boxstart', innerEvent: mapBrowserEvent });
		return true;
	} else {
		return false;
	}
};

CustomDragBox.handleUpEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return true;
	}

	this.boxControl.setMap(null);

	this.dispatchEvent({ type: 'boxend', innerEvent: mapBrowserEvent });
};

exports.default = CustomDragBox;

},{"jquery":"jquery","lodash":"lodash","openlayers":"openlayers"}],40:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.InteractionModeCluster = exports.PanCluster = undefined;

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PanCluster = exports.PanCluster = function PanCluster(optOptions) {
	_classCallCheck(this, PanCluster);

	var options = optOptions || {};
	var parent = (0, _jquery2.default)("\n\t\t<div style=\"background-color: rgba(0,0,0,0)\" class=\"ol-unselectable ol-control panCluster\">\n\t\t\t<table style=\"font-size:75%\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td><td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster N\">N</button></td><td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster W\">W</button></td>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster X fa fa-arrows-alt\"></button></td>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster E\">E</button></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td><td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster S\">S</button></td><td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>");

	var directions = {
		N: [0, 1],
		E: [1, 0],
		S: [0, -1],
		W: [-1, 0],
		X: [null, null]
	};

	var self = this;

	var pan = function pan(xSign, ySign) {
		var panPercent = 0.3;
		var map = self.getMap();
		var view = map.getView();
		var extent = view.calculateExtent(map.getSize());

		var extentWidth = Math.abs(extent[0] - extent[2]);
		var extentHeight = Math.abs(extent[1] - extent[3]);

		var center = view.getCenter();

		center[0] += extentWidth * xSign * panPercent;
		center[1] += extentHeight * ySign * panPercent;

		view.setCenter(center);
	};

	var zoomExtent = function zoomExtent() {
		var map = self.getMap();
		var view = map.getView();
		var extent = view.getProjection().getExtent();
		var size = map.getSize();
		view.fit(extent, size);
	};

	for (var direction in directions) {
		var xSign = directions[direction][0];
		var ySign = directions[direction][1];

		var button = parent.find(".panCluster." + direction);

		if (xSign !== null) {
			button.click(pan.bind(this, xSign, ySign));
		} else {
			button.click(zoomExtent.bind(this));
		}
	}

	_openlayers2.default.control.Control.call(this, { element: parent[0], target: options.target });
};

_openlayers2.default.inherits(PanCluster, _openlayers2.default.control.Control);

var InteractionModeCluster = exports.InteractionModeCluster = function InteractionModeCluster(optOptions) {
	_classCallCheck(this, InteractionModeCluster);

	var interactionModePath = optOptions.interactionModePath;
	var options = optOptions || {};
	var buttonTable = (0, _jquery2.default)("\n\t\t\t<table class=\"ol-unselectable ol-control iModeCluster\">\n\t\t\t\t<tr style=\"font-size: 80%\">\n\t\t\t\t\t<td><button class=\"iModeCluster pan fa fa-hand-grab-o\"></button></td>\n\t\t\t\t\t<td><button class=\"iModeCluster select fa fa-mouse-pointer\"></button></td>\n\t\t\t\t\t<td><button class=\"iModeCluster zoom fa fa-search-plus\"></button></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t");

	buttonTable.find("button.iModeCluster.pan").click(function () {
		return interactionModePath.state("pan");
	});
	buttonTable.find("button.iModeCluster.select").click(function () {
		return interactionModePath.state("select");
	});
	buttonTable.find("button.iModeCluster.zoom").click(function () {
		return interactionModePath.state("zoom");
	});

	interactionModePath.addCallback(this, function () {
		buttonTable.find("button.iModeCluster").removeClass("active");
		buttonTable.find("button.iModeCluster." + interactionModePath.getState()).addClass("active");
	}, true);

	_openlayers2.default.control.Control.call(this, { element: buttonTable[0], target: options.target });
};

_openlayers2.default.inherits(InteractionModeCluster, _openlayers2.default.control.Control);

},{"jquery":"jquery","openlayers":"openlayers"}],41:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _FeatureLayer = require("./layers/FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _CustomDragBox = require("./CustomDragBox.js");

var _CustomDragBox2 = _interopRequireDefault(_CustomDragBox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*global Weave*/

function getProbeInteraction(mapTool) {
	return new _openlayers2.default.interaction.Pointer({
		handleMoveEvent: function handleMoveEvent(event) {
			// weavepath -> keystring -> zindex
			var d2d_keySet_keyString_zIndex = new Map();
			/* We need to have sets for all the layers so that probing over an empty area correctly empties the keyset */
			mapTool.map.getLayers().forEach(function (layer) {
				var weaveLayerObject = layer.get("layerObject");

				if (weaveLayerObject.probeKeySet && !d2d_keySet_keyString_zIndex.get(weaveLayerObject.probeKeySet)) {
					d2d_keySet_keyString_zIndex.set(weaveLayerObject.probeKeySet.getObject(), new Map());
				}
			}, mapTool);
			mapTool.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {
				var weaveLayerObject = layer.get("layerObject");

				var map_keyString_zIndex = d2d_keySet_keyString_zIndex.get(weaveLayerObject.probeKeySet.getObject());

				/* No need to check here, we created one for every probeKeySet in the prior forEach */

				map_keyString_zIndex.set(feature.getId(), layer.getZIndex());
			}, function (layer) {
				return layer.getSelectable() && layer instanceof _FeatureLayer2.default;
			});

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = d2d_keySet_keyString_zIndex.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var weaveKeySet = _step.value;

					var map_keyString_zIndex = d2d_keySet_keyString_zIndex.get(weaveKeySet);

					var top = { key: null, index: -Infinity };

					var _iteratorNormalCompletion2 = true;
					var _didIteratorError2 = false;
					var _iteratorError2 = undefined;

					try {
						for (var _iterator2 = map_keyString_zIndex.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
							var key = _step2.value;

							var index = map_keyString_zIndex.get(key);
							if (index > top.index) {
								top.index = index;
								top.key = key;
							}
						}
					} catch (err) {
						_didIteratorError2 = true;
						_iteratorError2 = err;
					} finally {
						try {
							if (!_iteratorNormalCompletion2 && _iterator2.return) {
								_iterator2.return();
							}
						} finally {
							if (_didIteratorError2) {
								throw _iteratorError2;
							}
						}
					}

					if (top.key) {
						Weave.getPath(weaveKeySet).setKeys([top.key]);
					} else {
						Weave.getPath(weaveKeySet).setKeys([]);
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	});
}

function getDragSelect(mapTool, probeInteraction) {
	var ADD = "+";
	var SUBTRACT = "-";
	var SET = "=";
	var dragSelect = new _CustomDragBox2.default();
	var mode = SET;

	function updateSelection(extent) {
		var selectedFeatures = new Set();
		var selectFeature = function selectFeature(feature) {
			selectedFeatures.add(feature.getId());
		};

		var _iteratorNormalCompletion3 = true;
		var _didIteratorError3 = false;
		var _iteratorError3 = undefined;

		try {
			for (var _iterator3 = _lodash2.default.keys(mapTool.layers)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
				var weaveLayerName = _step3.value;

				var weaveLayer = mapTool.layers[weaveLayerName];
				var olLayer = weaveLayer.layer;
				var selectable = olLayer.get("selectable");

				if (weaveLayer instanceof _FeatureLayer2.default && selectable) {
					var keySet = weaveLayer.selectionKeySet;
					var source = olLayer.getSource();

					source.forEachFeatureIntersectingExtent(extent, selectFeature);

					var keys = Array.from(selectedFeatures);

					switch (mode) {
						case SET:
							keySet.setKeys(keys);
							break;
						case ADD:
							keySet.addKeys(keys);
							break;
						case SUBTRACT:
							keySet.removeKeys(keys);
							break;
					}
				}
			}
		} catch (err) {
			_didIteratorError3 = true;
			_iteratorError3 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion3 && _iterator3.return) {
					_iterator3.return();
				}
			} finally {
				if (_didIteratorError3) {
					throw _iteratorError3;
				}
			}
		}
	}

	dragSelect.on('boxstart', function (dragBoxEvent) {
		probeInteraction.setActive(false);

		var event = dragBoxEvent.innerEvent.originalEvent;
		if (event.ctrlKey) {
			mode = ADD;
			if (event.shiftKey) {
				mode = SUBTRACT;
			}
		} else {
			mode = SET;
		}
	});

	dragSelect.on('boxend', function () {
		var extent = dragSelect.getGeometry().getExtent();

		updateSelection(extent);
		probeInteraction.setActive(true);
		mode = SET;
	});

	dragSelect.on('boxdrag', _lodash2.default.debounce(function () {
		var extent = dragSelect.getGeometry().getExtent();

		updateSelection(extent);
	}));

	return dragSelect;
}

function weaveMapInteractions(mapTool) {

	var probeInteraction = getProbeInteraction(mapTool);
	var dragSelect = getDragSelect(mapTool, probeInteraction);
	var dragPan = new _openlayers2.default.interaction.DragPan({});
	var dragZoom = new _openlayers2.default.interaction.DragZoom({ condition: _openlayers2.default.events.condition.always });

	mapTool.interactionModePath.addCallback(mapTool, function () {
		var interactionMode = mapTool.interactionModePath.getState();
		dragPan.setActive(interactionMode === "pan");
		dragSelect.setActive(interactionMode === "select");
		dragZoom.setActive(interactionMode === "zoom");
	}, true);

	var interactionCollection = _openlayers2.default.interaction.defaults({ dragPan: false });
	var _arr = [dragPan, dragZoom, dragSelect, probeInteraction];
	for (var _i = 0; _i < _arr.length; _i++) {
		var interaction = _arr[_i];
		interactionCollection.push(interaction);
	}return interactionCollection;
}

exports.default = weaveMapInteractions;

},{"./CustomDragBox.js":39,"./layers/FeatureLayer.js":42,"lodash":"lodash","openlayers":"openlayers"}],42:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Layer2 = require("./Layer.js");

var _Layer3 = _interopRequireDefault(_Layer2);

var _StandardLib = require("../../../../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FeatureLayer = function (_Layer) {
	_inherits(FeatureLayer, _Layer);

	/* A FeatureLayer assumes that each feature will have multiple custom style properties on each feature, which are managed based on selection. */

	function FeatureLayer(parent, layerName) {
		_classCallCheck(this, FeatureLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(FeatureLayer).call(this, parent, layerName));

		_this.layer = new _openlayers2.default.layer.Vector();
		_this.source = new _openlayers2.default.source.Vector({ wrapX: false });

		/* Every feature that is added should register a handler to automatically recompute the metastyles when the styles change. */
		_this.source.on("addfeature", _this.onFeatureAdd, _this);

		_this.changedItems = new Set();
		_this.probedSet = new Set();
		_this.selectedSet = new Set();
		_this.filteredSet = new Set();

		_this.selectionKeySet = _this.layerPath.selection_keyset;
		_this.probeKeySet = _this.layerPath.probe_keyset;
		_this.subsetFilter = _this.layerPath.subset_filter; //push("filteredKeySet");

		var selectionKeyHandler = _this.updateSetFromKeySet.bind(_this, _this.selectionKeySet, _this.selectedSet);
		var probeKeyHandler = _this.updateSetFromKeySet.bind(_this, _this.probeKeySet, _this.probedSet);

		_this.selectionKeySet.addKeySetCallback(selectionKeyHandler);
		_this.probeKeySet.addKeySetCallback(probeKeyHandler);

		_this.subsetFilter.addCallback(_this, _this.updateFilteredKeySet, true);
		_this.settingsPath.push("selectable").addCallback(_this, _this.updateMetaStyles);
		return _this;
	}

	_createClass(FeatureLayer, [{
		key: "onFeatureAdd",
		value: function onFeatureAdd(vectorEvent) {
			vectorEvent.feature.on("propertychange", this.onFeaturePropertyChange, this);
		}
	}, {
		key: "onFeaturePropertyChange",
		value: function onFeaturePropertyChange(objectEvent) {
			var propertyName = objectEvent.key;
			var feature = objectEvent.target;

			if (!_lodash2.default.contains(FeatureLayer.Styles, propertyName)) {
				/* The property that changed isn't one of our metaStyle properties, so we don't care. */
				return;
			} else {
				/* The property that changed was a metastyle, and as such the style should be recomputed */
				_lodash2.default.defer(this.updateMetaStyle.bind(this), feature);
			}
		}
	}, {
		key: "updateSetFromKeySet",
		value: function updateSetFromKeySet(keySet, set, diff) {
			var wasEmpty = set.size === 0;

			this.changedItems.clear();

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = diff.added[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var key = _step.value;

					set.add(key);
					this.changedItems.add(key);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = diff.removed[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var key = _step2.value;

					set.delete(key);
					this.changedItems.add(key);
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}

			var isEmpty = set.size === 0;

			/* If a set becomes empty or nonempty, we should recompute all the styles. Otherwise, only recompute the styles of the features which changed. */
			if (isEmpty !== wasEmpty) {
				this.updateMetaStyles();
			} else {
				this.changedItems.forEach(function (featureId) {
					var feature = this.source.getFeatureById(featureId);
					if (feature) {
						this.updateMetaStyle(feature);
					}
				}, this);
			}
		}
	}, {
		key: "updateFilteredKeySet",
		value: function updateFilteredKeySet() {
			var sourceKeys = this.source.getFeatures().map(function (feature) {
				return feature.getId();
			});

			this.filteredSet.clear();

			var filteredKeys = this.subsetFilter.filterKeys(sourceKeys);
			var _iteratorNormalCompletion3 = true;
			var _didIteratorError3 = false;
			var _iteratorError3 = undefined;

			try {
				for (var _iterator3 = filteredKeys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
					var key = _step3.value;

					this.filteredSet.add(key);
				}
			} catch (err) {
				_didIteratorError3 = true;
				_iteratorError3 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion3 && _iterator3.return) {
						_iterator3.return();
					}
				} finally {
					if (_didIteratorError3) {
						throw _iteratorError3;
					}
				}
			}

			this.updateMetaStyles();
		}
	}, {
		key: "updateMetaStyles",
		value: function updateMetaStyles() {
			this.tempSelectable = this.settingsPath.push("selectable").getState();

			this.source.forEachFeature(this.updateMetaStyle, this);
		}
	}, {
		key: "updateMetaStyle",
		value: function updateMetaStyle(feature) {
			var id = feature.getId();
			var nullStyle = new _openlayers2.default.style.Style({});
			var unselectedStyle = feature.get("unselectedStyle") || nullStyle;
			var normalStyle = feature.get("normalStyle") || nullStyle;
			var selectedStyle = feature.get("selectedStyle") || nullStyle;
			var probedStyle = feature.get("probedStyle") || nullStyle;
			var zOrder = feature.get("zOrder") || 0;
			var replace = feature.get("replace");
			var newStyle = undefined;

			if (!this.filteredSet.has(id)) {
				feature.setStyle(nullStyle);
				return;
			}

			if (!this.tempSelectable) {
				feature.setStyle(normalStyle);
				return;
			}

			if (!this.selectedSet.has(id) && !this.probedSet.has(id) && this.selectedSet.size > 0) {
				if (replace) {
					newStyle = unselectedStyle;
					newStyle.setZIndex(zOrder);
				} else {
					newStyle = [].concat(unselectedStyle);
					newStyle[0].setZIndex(zOrder);
				}
			} else {
				newStyle = [].concat(normalStyle);
				newStyle[0].setZIndex(zOrder);
			}

			if (this.selectedSet.has(id)) {
				if (replace) {
					newStyle = selectedStyle;
					newStyle.setZIndex(Number.MAX_SAFE_INTEGER - 3);
				} else {
					newStyle = newStyle.concat(selectedStyle);
					newStyle[0].setZIndex(Number.MAX_SAFE_INTEGER - 3);
				}
			}

			if (this.probedSet.has(id)) {
				if (replace) {
					newStyle = probedStyle;
					newStyle.setZIndex(Number.MAX_SAFE_INTEGER);
				} else {
					newStyle = newStyle.concat(probedStyle);
					newStyle[0].setZIndex(Number.MAX_SAFE_INTEGER);
				}
			}

			feature.setStyle(newStyle);
		}
	}], [{
		key: "toColorArray",
		value: function toColorArray(colorString, alpha) {
			var colorArray;
			if (colorString[0] === "#") {
				colorArray = _openlayers2.default.color.asArray(colorString);
			} else {
				colorArray = _openlayers2.default.color.asArray("#" + _StandardLib2.default.decimalToHex(Number(colorString)));
			}

			colorArray = [].concat(colorArray); /* Should not be modified since it is cached in ol.color.asArray */

			if (!colorArray) {
				return null;
			}

			colorArray[3] = Number(alpha);
			return colorArray;
		}
	}, {
		key: "toColorRGBA",
		value: function toColorRGBA(colorString, alpha) {
			var colorArray = FeatureLayer.toColorArray(colorString, alpha);
			return _openlayers2.default.color.asString(colorArray);
		}
	}, {
		key: "olFillFromWeaveFill",
		value: function olFillFromWeaveFill(fill, fade) {
			if (fade === undefined) fade = 1;

			var color = fill.color && FeatureLayer.toColorArray(fill.color, fill.alpha * fade) || [0, 0, 0, 0];
			return new _openlayers2.default.style.Fill({ color: color });
		}
	}, {
		key: "olStrokeFromWeaveStroke",
		value: function olStrokeFromWeaveStroke(stroke, fade) {
			if (fade === undefined) fade = 1;

			var color = stroke.color && FeatureLayer.toColorArray(stroke.color, stroke.alpha * fade) || [0, 0, 0, 1];

			var lineCap = stroke.lineCap === "none" ? "butt" : stroke.lineCap || "round";
			var lineJoin = stroke.lineJoin === null ? "round" : stroke.lineJoin || "round";
			var miterLimit = Number(stroke.miterLimit);
			var width = Number(stroke.weight);

			return new _openlayers2.default.style.Stroke({ color: color, lineCap: lineCap, lineJoin: lineJoin, miterLimit: miterLimit, width: width });
		}
	}, {
		key: "getOlProbedStyle",
		value: function getOlProbedStyle(baseStrokeStyle) {
			var width = baseStrokeStyle.getWidth();

			return [new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [0, 0, 0, 1],
					width: width + FeatureLayer.PROBE_HALO_WIDTH + FeatureLayer.PROBE_LINE_WIDTH
				}),
				zIndex: Number.MAX_SAFE_INTEGER - 2
			}), new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [255, 255, 255, 1],
					width: width + FeatureLayer.PROBE_HALO_WIDTH
				}),
				zIndex: Number.MAX_SAFE_INTEGER - 1
			})];
		}
	}, {
		key: "getOlSelectionStyle",
		value: function getOlSelectionStyle(baseStrokeStyle) {
			var width = baseStrokeStyle.getWidth();
			var lineCap = baseStrokeStyle.getLineCap();
			var lineJoin = baseStrokeStyle.getLineJoin();
			var miterLimit = baseStrokeStyle.getMiterLimit();

			return [new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [0, 0, 0, 0.5],
					width: width + FeatureLayer.SELECT_WIDTH,
					lineCap: lineCap, lineJoin: lineJoin, miterLimit: miterLimit }),
				zIndex: Number.MAX_SAFE_INTEGER - 4
			})];
		}
	}]);

	return FeatureLayer;
}(_Layer3.default);

exports.default = FeatureLayer;

FeatureLayer.SELECT_WIDTH = 5;
FeatureLayer.PROBE_HALO_WIDTH = 4;
FeatureLayer.PROBE_LINE_WIDTH = 1;

FeatureLayer.Styles = {
	NORMAL: "normalStyle",
	UNSELECTED: "unselectedStyle", /* For the case where a selection has been made in the layer but the element is not one of them. */
	SELECTED: "selectedStyle",
	PROBED: "probedStyle"
};

exports.default = FeatureLayer;

},{"../../../../outts/utils/StandardLib.js":31,"./Layer.js":47,"lodash":"lodash","openlayers":"openlayers"}],43:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _Layer = require("./Layer.js");

var _FeatureLayer2 = require("./FeatureLayer.js");

var _FeatureLayer3 = _interopRequireDefault(_FeatureLayer2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*global weavejs*/

var GeometryLayer = function (_FeatureLayer) {
	_inherits(GeometryLayer, _FeatureLayer);

	function GeometryLayer(parent, layerName) {
		_classCallCheck(this, GeometryLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GeometryLayer).call(this, parent, layerName));

		_this.geoJsonParser = new _openlayers2.default.format.GeoJSON();

		_this.geoColumnPath = _this.layerPath.push("geometryColumn");
		_this.fillStylePath = _this.layerPath.push("fill");
		_this.lineStylePath = _this.layerPath.push("line");

		_this.geoColumnPath.addCallback(_this, _this.updateGeometryData, true);
		_this.projectionPath.addCallback(_this, _this.updateGeometryData, true);

		_this.fillStylePath.addCallback(_this, _this.updateStyleData);
		_this.lineStylePath.addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(GeometryLayer, [{
		key: "updateGeometryData",
		value: function updateGeometryData() {
			var projectionSpec = this.geoColumnPath.getObject("internalDynamicColumn", null).getMetadata('projection');

			var outputProjection = this.projectionPath.getState() || "EPSG:3857";
			var inputProjection = projectionSpec || outputProjection;

			this.source.clear();

			var keys = this.geoColumnPath.push('internalDynamicColumn').getKeys();
			var idc = this.geoColumnPath.getObject("internalDynamicColumn");
			var rawGeometries = weavejs.data.ColumnUtils.getGeoJsonGeometries(idc, idc.keys);

			for (var idx = 0; idx < keys.length; idx++) {
				var id = keys[idx];

				var geometry = this.geoJsonParser.readGeometry(rawGeometries[idx], { dataProjection: inputProjection, featureProjection: outputProjection });

				var feature = new _openlayers2.default.Feature({ geometry: geometry });
				feature.setId(id);

				this.source.addFeature(feature);
			}

			this.updateStyleData();
			this.updateFilteredKeySet();
		}
	}, {
		key: "updateStyleData",
		value: function updateStyleData() {
			var styleRecords = this.layerPath.retrieveRecords({
				fill: {
					color: this.fillStylePath.push("color"),
					alpha: this.fillStylePath.push("alpha"),
					imageURL: this.fillStylePath.push("imageURL")
				},
				stroke: {
					color: this.lineStylePath.push("color"),
					alpha: this.lineStylePath.push("alpha"),
					weight: this.lineStylePath.push("weight"),
					lineCap: this.lineStylePath.push("caps"),
					lineJoin: this.lineStylePath.push("joints"),
					miterLimit: this.lineStylePath.push("miterLimit")
				}
			}, this.geoColumnPath);

			this.rawStyles = styleRecords;

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = styleRecords[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var olStroke = _FeatureLayer3.default.olStrokeFromWeaveStroke(record.stroke);
					var olFill = _FeatureLayer3.default.olFillFromWeaveFill(record.fill);

					var olStrokeFaded = _FeatureLayer3.default.olStrokeFromWeaveStroke(record.stroke, 0.5);
					var olFillFaded = _FeatureLayer3.default.olFillFromWeaveFill(record.fill, 0.5);

					var normalStyle = [new _openlayers2.default.style.Style({
						fill: olFill,
						stroke: olStroke,
						zIndex: 0
					})];

					var unselectedStyle = [new _openlayers2.default.style.Style({
						fill: olFillFaded,
						stroke: olStrokeFaded,
						zIndex: 0
					})];

					var selectedStyle = _FeatureLayer3.default.getOlSelectionStyle(olStroke);
					var probedStyle = _FeatureLayer3.default.getOlProbedStyle(olStroke);

					var feature = this.source.getFeatureById(record.id);

					if (feature) {
						feature.setProperties({ normalStyle: normalStyle, unselectedStyle: unselectedStyle, selectedStyle: selectedStyle, probedStyle: probedStyle });
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	}]);

	return GeometryLayer;
}(_FeatureLayer3.default);

exports.default = GeometryLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::GeometryPlotter", GeometryLayer);

},{"./FeatureLayer.js":42,"./Layer.js":47,"openlayers":"openlayers"}],44:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _FeatureLayer2 = require("./FeatureLayer.js");

var _FeatureLayer3 = _interopRequireDefault(_FeatureLayer2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GlyphLayer = function (_FeatureLayer) {
	_inherits(GlyphLayer, _FeatureLayer);

	function GlyphLayer(parent, layerName) {
		_classCallCheck(this, GlyphLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GlyphLayer).call(this, parent, layerName));

		_this.projectionPath.addCallback(_this, _this.updateLocations);
		_this.layerPath.push("sourceProjection").addCallback(_this, _this.updateLocations);

		_this.layerPath.push("dataX").addCallback(_this, _this.updateLocations);
		_this.layerPath.push("dataY").addCallback(_this, _this.updateLocations, true);
		return _this;
	}

	_createClass(GlyphLayer, [{
		key: "_getFeatureIds",
		value: function _getFeatureIds() {
			return _lodash2.default.map(this.source.getFeatures(), function (item) {
				return item.getId();
			});
		}
	}, {
		key: "updateLocations",
		value: function updateLocations() {
			/* Update feature locations */
			var records = this.layerPath.retrieveRecords(["dataX", "dataY"], this.layerPath.push("dataX"));

			var recordIds = _lodash2.default.pluck(records, "id");

			var removedIds = _lodash2.default.difference(this._getFeatureIds(), recordIds);

			var rawProj = this.layerPath.getState("sourceProjection") || "EPSG:4326";
			var mapProj = this.projectionPath.getState() || "EPSG:3857";

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = removedIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var id = _step.value;

					var feature = this.source.getFeatureById(id);
					this.source.removeFeature(feature);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = records[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var record = _step2.value;

					var feature = this.source.getFeatureById(record.id);

					if (!feature) {
						feature = new _openlayers2.default.Feature({});
						feature.setId(record.id);
						this.source.addFeature(feature);
					}

					var dataX = undefined,
					    dataY = undefined;

					dataX = GlyphLayer._toPoint(record.dataX, "xMin", "xMax");
					dataY = GlyphLayer._toPoint(record.dataY, "yMin", "yMax");

					var point = new _openlayers2.default.geom.Point([dataX, dataY]);
					point.transform(rawProj, mapProj);
					feature.setGeometry(point);
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}

			this.updateFilteredKeySet();
			this.updateStyleData();
		}
	}], [{
		key: "_toPoint",
		value: function _toPoint(datum, field1, field2) {
			if ((typeof datum === "undefined" ? "undefined" : _typeof(datum)) === "object") {
				var firstPoly = datum[0];
				return (firstPoly.bounds[field1] + firstPoly.bounds[field2]) / 2;
			} else {
				return datum;
			}
		}
	}]);

	return GlyphLayer;
}(_FeatureLayer3.default);

exports.default = GlyphLayer;

},{"./FeatureLayer.js":42,"lodash":"lodash","openlayers":"openlayers"}],45:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Map2D = function () {
	function Map2D() {
		_classCallCheck(this, Map2D);

		this._map = new Map();
	}

	_createClass(Map2D, [{
		key: "get",
		value: function get(firstKey, secondKey) {
			var secondMap = this._map.get(firstKey);
			return secondMap && secondMap.get(secondKey);
		}
	}, {
		key: "set",
		value: function set(firstKey, secondKey, value) {
			var secondMap = this._map.get(firstKey);
			if (!secondMap) {
				secondMap = new Map();
				this._map.set(firstKey, secondMap);
			}

			secondMap.set(secondKey, value);
		}
	}]);

	return Map2D;
}();

var ImageGlyphCache = function () {
	function ImageGlyphCache() {
		_classCallCheck(this, ImageGlyphCache);

		this.baseImageElements = new Map();
		this.canvasMap = new Map2D();
		this.imageMap = new Map2D();
	}

	_createClass(ImageGlyphCache, [{
		key: "requestBaseImageElement",
		value: function requestBaseImageElement(url, callback) {
			var imageElement = this.baseImageElements.get(url);

			if (!imageElement) {
				imageElement = new Image();
				imageElement.src = url;
				this.baseImageElements.set(url, imageElement);
			}

			if (imageElement.complete) {
				callback(imageElement);
			} else {
				(0, _jquery2.default)(imageElement).one("load", function () {
					return callback(imageElement);
				});
			}
		}
	}, {
		key: "getCachedCanvas",
		value: function getCachedCanvas(url, color) {
			var canvas = this.canvasMap.get(url, color);
			var freshCanvas = false;

			if (!canvas) {
				freshCanvas = true;
				canvas = document.createElement("canvas");
				this.canvasMap.set(url, color, canvas);
			}

			return { canvas: canvas, freshCanvas: freshCanvas };
		}
	}, {
		key: "requestDataUrl",
		value: function requestDataUrl(url, color, callback) {
			var _getCachedCanvas = this.getCachedCanvas(url, color);

			var canvas = _getCachedCanvas.canvas;
			var freshCanvas = _getCachedCanvas.freshCanvas;
			/* If freshCanvas is true, this means that we just created the canvas and haven't rendered to it. Time to do that. */

			if (freshCanvas) {
				this.requestBaseImageElement(url, function (imageElement) {
					var _ref = [imageElement.naturalHeight, imageElement.naturalWidth];
					canvas.height = _ref[0];
					canvas.width = _ref[1];

					var ctx = canvas.getContext("2d");
					ctx.fillStyle = color;
					ctx.fillRect(0, 0, canvas.width, canvas.height);

					ctx.globalCompositeOperation = "destination-atop";
					ctx.drawImage(imageElement, 0, 0);

					ctx.globalCompositeOperation = "multiply";
					ctx.drawImage(imageElement, 0, 0);

					callback(canvas.toDataURL());
				});
			} else {
				callback(canvas.toDataURL());
			}
		}
	}, {
		key: "getImage",
		value: function getImage(url, color) {
			var image = this.imageMap.get(url, color);

			if (!image) {
				image = new Image();
				this.requestDataUrl(url, color, function (dataUrl) {
					image.src = dataUrl;
				});
			}

			return image;
		}
	}]);

	return ImageGlyphCache;
}();

exports.default = ImageGlyphCache;

},{"jquery":"jquery"}],46:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _GlyphLayer2 = require("./GlyphLayer.js");

var _GlyphLayer3 = _interopRequireDefault(_GlyphLayer2);

var _FeatureLayer = require("./FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _ImageGlyphCache = require("./ImageGlyphCache.js");

var _ImageGlyphCache2 = _interopRequireDefault(_ImageGlyphCache);

var _Layer = require("./Layer.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ImageGlyphLayer = function (_GlyphLayer) {
	_inherits(ImageGlyphLayer, _GlyphLayer);

	function ImageGlyphLayer(parent, layerName) {
		_classCallCheck(this, ImageGlyphLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ImageGlyphLayer).call(this, parent, layerName));

		_this.imageGlyphCache = new _ImageGlyphCache2.default();

		_this.layerPath.push("imageSize").addCallback(_this, _this.updateStyleData);
		_this.layerPath.push("imageURL").addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(ImageGlyphLayer, [{
		key: "setIconStyle",
		value: function setIconStyle(feature, img, iconSize) {
			var styles = {};

			if (!img.complete || !img.src) {
				(0, _jquery2.default)(img).one("load", this.setIconStyle.bind(this, feature, img, iconSize));
				return;
			}

			var maxDim = Math.max(img.naturalHeight, img.naturalWidth);

			var scale = iconSize / maxDim;

			var imgSize = [img.naturalWidth, img.naturalHeight];

			var _arr = ["normal", "selected", "probed", "unselected"];
			for (var _i = 0; _i < _arr.length; _i++) {
				var stylePrefix = _arr[_i];
				var icon = undefined;
				if (stylePrefix === "probed") {
					icon = new _openlayers2.default.style.Icon({ img: img, imgSize: imgSize, scale: scale * 2.0 });
				} else {
					icon = new _openlayers2.default.style.Icon({ img: img, imgSize: imgSize, scale: scale });
				}

				if (stylePrefix === "unselected") {
					icon.setOpacity(1 / 3);
				}

				styles[stylePrefix + "Style"] = new _openlayers2.default.style.Style({ image: icon });
			}

			styles.replace = true;

			feature.setProperties(styles);
		}
	}, {
		key: "updateStyleData",
		value: function updateStyleData() {
			/* Update feature styles */

			var records = this.layerPath.retrieveRecords(["alpha", "color", "imageURL", "imageSize"], this.layerPath.push("dataX"));

			this.rawStyleRecords = records;

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = records[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var feature = this.source.getFeatureById(record.id);

					if (!feature) {
						continue;
					}

					var imageSize = Number(record.imageSize);
					var color = _FeatureLayer2.default.toColorRGBA(record.color, record.alpha);

					if (!record.imageURL) {
						feature.setStyle(null);
						continue;
					}

					var img = this.imageGlyphCache.getImage(record.imageURL, color);

					this.setIconStyle(feature, img, imageSize);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	}]);

	return ImageGlyphLayer;
}(_GlyphLayer3.default);

exports.default = ImageGlyphLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::ImageGlyphPlotter", ImageGlyphLayer);

},{"./FeatureLayer.js":42,"./GlyphLayer.js":44,"./ImageGlyphCache.js":45,"./Layer.js":47,"jquery":"jquery","openlayers":"openlayers"}],47:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.newLayer = exports.layerRegistry = undefined;
exports.registerLayerImplementation = registerLayerImplementation;

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var layerRegistry = exports.layerRegistry = {};

function registerLayerImplementation(asClassName, jsClass) {
	if (!layerRegistry) {
		exports.layerRegistry = layerRegistry = {};
	}
	layerRegistry[asClassName] = jsClass;
}

function _newLayer(parent, layerName) {
	var path = parent.plottersPath.push(layerName);
	var layerType = path.getType();
	var LayerClass = layerRegistry[layerType];
	if (!LayerClass) {
		return null;
	} else {
		return new LayerClass(parent, layerName);
	}
}

exports.newLayer = _newLayer;

var Layer = function () {
	_createClass(Layer, null, [{
		key: "newLayer",
		value: function newLayer(parent, layerName) {
			return _newLayer(parent, layerName);
		}
	}]);

	function Layer(parent, layerName) {
		_classCallCheck(this, Layer);

		this.layerPath = parent.plottersPath.push(layerName);
		this.settingsPath = parent.layerSettingsPath.push(layerName);
		this.projectionPath = parent.toolPath.push("projectionSRS");
		this.parent = parent;
		this.layerName = layerName;
		this.layer = null;
		this._layerReadyCallbacks = {};

		this.linkProperty(this.settingsPath.push("alpha"), "opacity");
		this.linkProperty(this.settingsPath.push("visible"), "visible");
		this.linkProperty(this.settingsPath.push("selectable"), "selectable");
		/* TODO max and minvisiblescale, map to min/max resolution. */
	}

	_createClass(Layer, [{
		key: "linkProperty",
		value: function linkProperty(propertyPath, propertyName, inTransform) {
			var _this = this;

			/* change in path modifying propertyName */
			inTransform = inTransform || _lodash2.default.identity;

			var callback = function callback() {
				if (_this.layer) {
					_this.layer.set(propertyName, inTransform(propertyPath.getState()));
				}
			};

			this._layerReadyCallbacks[propertyName] = callback;

			propertyPath.addCallback(this, callback, false, false);
		}
	}, {
		key: "destroy",
		value: function destroy() {
			this.layer = undefined;
		}
	}, {
		key: "source",
		get: function get() {
			return this.layer && this.layer.getSource();
		},
		set: function set(value) {
			this.layer.setSource(value);
		}

		/* Handles initial apply of linked properties, adding/removing from map */

	}, {
		key: "layer",
		set: function set(value) {
			if (this._layer != null) {
				this.parent.map.removeLayer(this._layer);
			}

			this._layer = value;

			if (value) {
				this.parent.map.addLayer(value);

				value.set("layerObject", this); /* Need to store this backref */

				if (value) {
					for (var name in this._layerReadyCallbacks) {
						this._layerReadyCallbacks[name]();
					}
				}
			}
		},
		get: function get() {
			return this._layer;
		}
	}]);

	return Layer;
}();

exports.default = Layer;

},{"lodash":"lodash"}],48:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _StandardLib = require("../../../../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _FeatureLayer = require("./FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _Layer = require("./Layer.js");

var _GlyphLayer2 = require("./GlyphLayer.js");

var _GlyphLayer3 = _interopRequireDefault(_GlyphLayer2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ScatterPlotLayer = function (_GlyphLayer) {
	_inherits(ScatterPlotLayer, _GlyphLayer);

	function ScatterPlotLayer(parent, layerName) {
		_classCallCheck(this, ScatterPlotLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlotLayer).call(this, parent, layerName));

		_this.sizeBy = _this.layerPath.push("sizeBy").addCallback(_this, _this.updateStyleData, true);

		_this.fillStylePath = _this.layerPath.push("fill").addCallback(_this, _this.updateStyleData);
		_this.lineStylePath = _this.layerPath.push("line").addCallback(_this, _this.updateStyleData);
		_this.maxRadiusPath = _this.layerPath.push("maxScreenRadius").addCallback(_this, _this.updateStyleData);
		_this.minRadiusPath = _this.layerPath.push("minScreenRadius").addCallback(_this, _this.updateStyleData);

		_this.defaultRadiusPath = _this.layerPath.push("defaultScreenRadius").addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(ScatterPlotLayer, [{
		key: "updateStyleData",
		value: function updateStyleData() {
			var styleRecords = this.layerPath.retrieveRecords({
				fill: {
					color: this.fillStylePath.push("color"),
					alpha: this.fillStylePath.push("alpha"),
					imageURL: this.fillStylePath.push("imageURL")
				},
				stroke: {
					color: this.lineStylePath.push("color"),
					alpha: this.lineStylePath.push("alpha"),
					weight: this.lineStylePath.push("weight"),
					lineCap: this.lineStylePath.push("caps"),
					lineJoin: this.lineStylePath.push("joints"),
					miterLimit: this.lineStylePath.push("miterLimit")
				}
			});

			var styleRecordsIndex = _lodash2.default.indexBy(styleRecords, "id");

			var sizeByNumeric = this.layerPath.retrieveRecords({ sizeBy: this.sizeBy }, { dataType: "number" });

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = sizeByNumeric[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var id = record.id;
					var fullRecord = styleRecordsIndex[id];
					if (fullRecord) {
						fullRecord.sizeBy = record.sizeBy;
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			this.rawStyles = styleRecords;

			var sizeBy = _lodash2.default.pluck(styleRecords, "sizeBy");
			var sizeByMax = _lodash2.default.max(sizeBy);
			var sizeByMin = _lodash2.default.min(sizeBy);
			var absMax = Math.max(sizeByMax, sizeByMin);
			var minScreenRadius = this.minRadiusPath.getState();
			var maxScreenRadius = this.maxRadiusPath.getState();
			var defaultScreenRadius = this.defaultRadiusPath.getState();

			styleRecords = _lodash2.default.sortByOrder(styleRecords, ["sizeBy", "id"], ["desc"], ["asc"]);

			var zOrder = 0;

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = styleRecords[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var record = _step2.value;

					var screenRadius = undefined;

					var normSize = _StandardLib2.default.normalize(Math.abs(record.sizeBy), 0, absMax);

					if (isNaN(normSize) || record.sizeBy === null) {
						screenRadius = defaultScreenRadius;
					} else {
						screenRadius = minScreenRadius + normSize * (maxScreenRadius - minScreenRadius);
					}

					var olStroke = _FeatureLayer2.default.olStrokeFromWeaveStroke(record.stroke);
					var olFill = _FeatureLayer2.default.olFillFromWeaveFill(record.fill);

					var olStrokeFaded = _FeatureLayer2.default.olStrokeFromWeaveStroke(record.stroke, 0.5);
					var olFillFaded = _FeatureLayer2.default.olFillFromWeaveFill(record.fill, 0.5);

					var olSelectionStyle = _FeatureLayer2.default.getOlSelectionStyle(olStroke);
					var olProbedStyle = _FeatureLayer2.default.getOlProbedStyle(olStroke);

					var normalStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							fill: olFill, stroke: olStroke,
							radius: screenRadius
						})
					})];

					var unselectedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							fill: olFillFaded, stroke: olStrokeFaded,
							radius: screenRadius
						})
					})];

					var selectedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olSelectionStyle[0].getStroke(),
							radius: screenRadius
						}),
						zIndex: olSelectionStyle[0].getZIndex()
					})];

					var probedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olProbedStyle[0].getStroke(),
							radius: screenRadius
						}),
						zIndex: olProbedStyle[0].getZIndex()
					}), new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olProbedStyle[1].getStroke(),
							radius: screenRadius
						}),
						zIndex: olProbedStyle[1].getZIndex()
					})];

					var feature = this.source.getFeatureById(record.id);

					if (feature) {
						feature.setProperties({ normalStyle: normalStyle, unselectedStyle: unselectedStyle, selectedStyle: selectedStyle, probedStyle: probedStyle, zOrder: zOrder });
					}

					zOrder++;
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}
		}
	}]);

	return ScatterPlotLayer;
}(_GlyphLayer3.default);

exports.default = ScatterPlotLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::ScatterPlotPlotter", ScatterPlotLayer);

},{"../../../../outts/utils/StandardLib.js":31,"./FeatureLayer.js":42,"./GlyphLayer.js":44,"./Layer.js":47,"lodash":"lodash","openlayers":"openlayers"}],49:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Layer2 = require("./Layer.js");

var _Layer3 = _interopRequireDefault(_Layer2);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TileLayer = function (_Layer) {
	_inherits(TileLayer, _Layer);

	function TileLayer(parent, layerName) {
		_classCallCheck(this, TileLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(TileLayer).call(this, parent, layerName));

		_this.layer = new _openlayers2.default.layer.Tile();
		_this.servicePath = _this.layerPath.push("service", null);
		_this.oldProviderName = null;

		_this.servicePath.addCallback(_this, _this.updateTileSource, true);
		_this.projectionPath.addCallback(_this, _this.updateValidExtents, true);
		return _this;
	}

	_createClass(TileLayer, [{
		key: "updateValidExtents",
		value: function updateValidExtents() {
			var proj = _openlayers2.default.proj.get(this.projectionPath.getState() || "EPSG:3857");
			if (proj) this.layer.setExtent(proj.getExtent());else console.log('invalid proj -> no extent');
		}
	}, {
		key: "getCustomWMSSource",
		value: function getCustomWMSSource() {
			var customWMSPath = this.servicePath;

			if (customWMSPath.push("wmsURL").getType()) {
				var url = customWMSPath.getState("wmsURL");
				var attributions = customWMSPath.getState("creditInfo");
				var projection = customWMSPath.getState("tileProjectionSRS");

				return new _openlayers2.default.source.XYZ({
					url: url, attributions: attributions, projection: projection
				});
			}
		}
	}, {
		key: "getModestMapsSource",
		value: function getModestMapsSource() {
			var providerNamePath = this.servicePath.push("providerName");

			if (providerNamePath.getType()) {
				var providerName = providerNamePath.getState();

				if (providerName === this.oldProviderName) {
					return undefined;
				}

				switch (providerName) {
					case "Stamen WaterColor":
						return new _openlayers2.default.source.Stamen({ layer: "watercolor", wrapX: false });
					case "Stamen Toner":
						return new _openlayers2.default.source.Stamen({ layer: "toner", wrapX: false });
					case "Open MapQuest Aerial":
						return new _openlayers2.default.source.MapQuest({ layer: "sat", wrapX: false });
					case "Open MapQuest":
						return new _openlayers2.default.source.MapQuest({ layer: "osm", wrapX: false });
					case "Open Street Map":
						return new _openlayers2.default.source.OSM({ wrapX: false });
					case "Blue Marble Map":
						return new _openlayers2.default.source.TileWMS({ url: "http://neowms.sci.gsfc.nasa.gov/wms/wms", wrapX: false });
					default:
						return null;
				}
			}
		}
	}, {
		key: "updateTileSource",
		value: function updateTileSource() {
			var serviceDriverName = this.servicePath.getType();
			var newLayer = null;
			switch (serviceDriverName) {
				case "weave.services.wms::ModestMapsWMS":
					newLayer = this.getModestMapsSource();
					break;
				case "weave.services.wms::CustomWMS":
					newLayer = this.getCustomWMSSource();
					break;
				default:
					newLayer = null;
			}

			if (newLayer !== undefined) {
				this.source = newLayer;
			}
		}
	}]);

	return TileLayer;
}(_Layer3.default);

exports.default = TileLayer;

(0, _Layer2.registerLayerImplementation)("weave.visualization.plotters::WMSPlotter", TileLayer);

},{"./Layer.js":47,"openlayers":"openlayers"}],50:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//
/* global Weave, weavejs */

var Barchart = function (_React$Component) {
  _inherits(Barchart, _React$Component);

  function Barchart(props) {
    _classCallCheck(this, Barchart);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Barchart).call(this, props));
  }

  _createClass(Barchart, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement('div', null);
    }
  }]);

  return Barchart;
}(_react2.default.Component);

/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */

exports.default = Barchart;
Barchart.prototype.FLEXJS_CLASS_INFO = { names: [{ name: 'Barchart', qName: 'weavejs.tools.Barchart' }], interfaces: [weavejs.api.core.ILinkableObject] };
Weave.registerClass('weavejs.tools.Barchart', Barchart);

},{"react":"react"}],51:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _c = require("c3");

var _c2 = _interopRequireDefault(_c);

var _d = require("d3");

var _d2 = _interopRequireDefault(_d);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var WeaveC3LineChart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3LineChart, _AbstractWeaveTool);

    function WeaveC3LineChart(props) {
        _classCallCheck(this, WeaveC3LineChart);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3LineChart).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        return _this;
    }

    _createClass(WeaveC3LineChart, [{
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            var _this2 = this;

            if (!this.chart) return;

            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });

            var unselectedIndices = _lodash2.default.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                //unfocus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style("opacity", "0.1");

                selectedIndices.forEach(function (index) {
                    //custom style for circles on selected lines
                    var circleCount = _d2.default.select(_d2.default.select(_this2.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0].length;
                    var selectedCircles = _lodash2.default.range(0, circleCount);
                    selectedCircles.forEach(function (i) {
                        _d2.default.select(_d2.default.select(_d2.default.select(_this2.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0][i]).style({ opacity: 1.0, "stroke-opacity": 1.0 });
                    });
                });

                this.customStyle(unselectedIndices, "path", ".c3-shape.c3-line", { opacity: 0.1 });
                this.customStyle(selectedIndices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
                this.chart.select(["y"], selectedIndices, true);
            } else {
                //focus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style({ opacity: 1.0, "stroke-opacity": 0.0 });
                this.customStyle(indices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
                this.chart.select(["y"], [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var _this3 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _lodash2.default.difference(indices, selectedIndices);

            if (selectedIndices.length) {
                //unfocus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style({ opacity: 0.1, "stroke-opacity": 0.0 });

                selectedIndices.forEach(function (index) {
                    //custom style for circles on probed lines
                    var circleCount = _d2.default.select(_d2.default.select(_this3.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0].length;
                    var selectedCircles = _lodash2.default.range(0, circleCount);
                    selectedCircles.forEach(function (i) {
                        _d2.default.select(_d2.default.select(_d2.default.select(_this3.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0][i]).style({ opacity: 1.0, "stroke-opacity": 0.0 });
                    });
                });

                this.customStyle(unselectedIndices, "path", ".c3-shape.c3-line", { opacity: 0.1 });
                this.customStyle(selectedIndices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {
            _d2.default.select(this.element).selectAll("circle").style("opacity", 1).style("stroke", "black").style("stroke-opacity", 0.0);
        }
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this4 = this;

            this.columnLabels = [];
            this.columnNames = [];

            var children = this.paths.columns.getChildren();

            this.yLabelColumnPath = children[0];

            var numericMapping = {
                columns: children,
                yLabel: this.yLabelColumnPath
            };

            var stringMapping = {
                columns: children,
                line: {
                    //alpha: this._lineStylePath.push("alpha"),
                    color: this.paths.lineStyle.push("color")
                    //caps: this._lineStylePath.push("caps")
                },
                yLabel: this.yLabelColumnPath
            };

            for (var idx in children) {
                var child = children[idx];
                var title = child.getValue("this.getMetadata('title')");
                var name = child.getPath().pop();
                this.columnLabels.push(title);
                this.columnNames.push(name);
            }

            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });

            this.records = _lodash2.default.zip(this.numericRecords, this.stringRecords);
            this.records = _lodash2.default.sortBy(this.records, [0, "id"]);

            if (this.records.length) {
                ;

                var _$unzip = _lodash2.default.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.keyToIndex = {};
            this.indexToKey = {};
            this.yAxisValueToLabel = {};

            this.numericRecords.forEach(function (record, index) {
                _this4.keyToIndex[record.id] = index;
                _this4.indexToKey[index] = record.id;
            });

            this.stringRecords.forEach(function (record, index) {
                var numericRecord = _this4.numericRecords[index];
                _this4.yAxisValueToLabel[numericRecord.yLabel] = record.yLabel;
            });

            var columns = [];

            columns = this.numericRecords.map(function (record) {
                var tempArr = [];
                tempArr.push(record.id);
                _lodash2.default.keys(record.columns).forEach(function (key) {
                    tempArr.push(record.columns[key]);
                });
                return tempArr;
            });

            this.colors = {};
            this.stringRecords.forEach(function (record) {
                _this4.colors[record.id] = record.line.color || "#C0CDD1";
            });

            var chartType = "line";
            if (this.paths.plotter.push("curveType").getState() === "double") {
                chartType = "spline";
            }

            this.chart.load({ columns: columns, colors: this.colors, type: chartType, unload: true });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentDidUpdate", this).call(this);
            //console.log("resizing");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_lodash2.default.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
            //console.log(end - start);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var dataChanged = _lodash2.default.debounce(this._dataChanged.bind(this), 100);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = _lodash2.default.debounce(this._probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "columns", path: plotterPath.push("columns"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("lineStyle"), callbacks: dataChanged }, { name: "curveType", path: plotterPath.push("curveType"), callbacks: dataChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];

            this.initializePaths(mapping);

            this.c3Config = {
                //size: this.getElementSize(),
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    columns: [],
                    xSort: false,
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    onclick: function onclick(d) {
                        if (!_this5.keyDown && d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.setKeys([d.id]);
                        }
                    },
                    onselected: function onselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.addKeys([d.id]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.removeKeys([d.id]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([d.id]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                tooltip: {
                    show: false
                },
                grid: {
                    x: {
                        show: true
                    },
                    y: {
                        show: true
                    }
                },
                axis: {
                    x: {
                        tick: {
                            multiline: false,
                            rotate: 0,
                            format: function format(d) {
                                return _this5.columnLabels[d];
                            }
                        }
                    },
                    y: {
                        tick: {
                            multiline: true,
                            format: function format(num) {
                                if (_this5.yLabelColumnPath && _this5.yLabelColumnPath.getValue("this.getMetadata('dataType')") !== "number") {
                                    return _this5.yAxisValueToLabel[num] || "";
                                } else {
                                    return _FormatUtils2.default.defaultNumberFormatting(num);
                                }
                            }
                        }
                    }
                },
                bindto: this.element,
                legend: {
                    show: false
                },
                onrendered: this._updateStyle.bind(this)
            };

            this.chart = _c2.default.generate(this.c3Config);
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }]);

    return WeaveC3LineChart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3LineChart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::LineChartTool", WeaveC3LineChart);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"../utils/FormatUtils":54,"c3":"c3","d3":"d3","lodash":"lodash","react":"react"}],52:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _d = require("d3");

var _reactBootstrapTable = require("react-bootstrap-table");

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
//import ReactDataGrid from "react-datagrid";

var WeaveReactTable = function (_AbstractWeaveTool) {
    _inherits(WeaveReactTable, _AbstractWeaveTool);

    function WeaveReactTable(props) {
        _classCallCheck(this, WeaveReactTable);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveReactTable).call(this, props));
    }

    _createClass(WeaveReactTable, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            var elementSize = this.element ? this.getElementSize() : null;
            _reactDom2.default.render(_react2.default.createElement(DataTable, { toolPath: this.toolPath, width: elementSize.width + "px", height: elementSize.height + "px" }), this.element);
        }
    }]);

    return WeaveReactTable;
}(_AbstractWeaveTool3.default);

var DataTable = function (_React$Component) {
    _inherits(DataTable, _React$Component);

    function DataTable(props) {
        _classCallCheck(this, DataTable);

        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(DataTable).call(this, props));

        _this2.toolPath = props.toolPath;
        _this2._columnsPath = _this2.toolPath.push("columns");
        return _this2;
    }

    _createClass(DataTable, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this._columnsPath.addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true, false);
            this.toolPath.push("filteredKeySet").addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true, false);
            this.toolPath.push("selectionKeySet").addCallback(this, this._selectionKeysChanged, true, false);
        }
    }, {
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            // var keys = this.toolPath.push("selectionKeySet", null).getKeys();
            // var selection = {};
            // keys.forEach((key) => {
            //     selection[key] = {};
            // });
            // this.setState({
            //     selected: selection
            // });
        }
    }, {
        key: "onSelectionChange",
        value: function onSelectionChange(selectedIds) {
            this.setState({
                selected: selectedIds
            });
            this.toolPath.push("selectionKeySet", null).setKeys(_lodash2.default.keys(selectedIds));
        }
    }, {
        key: "customFormat",
        value: function customFormat(cell, row) {
            if (typeof cell === "number") {
                return (0, _d.round)(cell, 2);
            } else {
                return cell;
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var data = this._columnsPath.retrieveRecords(this._columnsPath.getNames(), this.toolPath.push("filteredKeySet")) || [];

            var columns = this._columnsPath.getChildren().map(function (columnPath) {
                return {
                    name: columnPath.getPath().pop(),
                    title: columnPath.getValue("this.getMetadata('title')")
                };
            });

            columns.push({
                name: "id",
                title: "id"
            });

            //var columnWidth = this.props.container.clientWidth / columns.length;

            var columnHeaders = columns.map(function (column, index) {
                return _react2.default.createElement(
                    _reactBootstrapTable.TableHeaderColumn,
                    { dataField: column.name, key: index, dataAlign: "left", dataFormat: _this3.customFormat, dataSort: true },
                    column.title
                );
            });

            return _react2.default.createElement(
                _reactBootstrapTable.BootstrapTable,
                { data: data, keyField: "id", striped: true, hover: true, width: this.props.width, height: this.props.height },
                columnHeaders
            );
        }
    }]);

    return DataTable;
}(_react2.default.Component);

exports.default = WeaveReactTable;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::TableTool", WeaveReactTable);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"d3":"d3","lodash":"lodash","react":"react","react-bootstrap-table":1,"react-dom":"react-dom"}],53:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactBootstrap = require("react-bootstrap");

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var sessionStateMenuStyle = { width: "100%" };

var SessionStateMenuTool = function (_AbstractWeaveTool) {
  _inherits(SessionStateMenuTool, _AbstractWeaveTool);

  function SessionStateMenuTool(props) {
    _classCallCheck(this, SessionStateMenuTool);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SessionStateMenuTool).call(this, props));

    _this.toolPath.push("choices").addCallback(_this, _this.forceUpdate);
    _this.toolPath.push("selectedChoice").addCallback(_this, _this.forceUpdate);
    return _this;
  }

  _createClass(SessionStateMenuTool, [{
    key: "componentDidMount",
    value: function componentDidMount() {}
  }, {
    key: "handleItemClick",
    value: function handleItemClick(index, event) {
      console.log(index);
      this.toolPath.state("selectedChoice", this.choices.getNames()[index]);
      var targets = this.toolPath.push("targets");
      var choice = this.choices.getState(index);
      targets.forEach(choice, function (value, key) {
        this.push(key, null).state(value);
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      this.choices = this.toolPath.push("choices");
      var selectedChoice = this.toolPath.getState("selectedChoice");

      var menus = this.choices.getNames().map(function (choice, index) {
        return choice === selectedChoice ? _react2.default.createElement(
          _reactBootstrap.ListGroupItem,
          { active: true, key: index, onClick: _this2.handleItemClick.bind(_this2, index) },
          choice
        ) : _react2.default.createElement(
          _reactBootstrap.ListGroupItem,
          { key: index, onClick: _this2.handleItemClick.bind(_this2, index) },
          choice
        );
      });

      return _react2.default.createElement(
        "div",
        { style: sessionStateMenuStyle },
        _react2.default.createElement(
          _reactBootstrap.ListGroup,
          null,
          menus
        )
      );
    }
  }]);

  return SessionStateMenuTool;
}(_AbstractWeaveTool3.default);

exports.default = SessionStateMenuTool;

(0, _WeaveTool.registerToolImplementation)("weave.ui::SessionStateMenuTool", SessionStateMenuTool);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"lodash":"lodash","react":"react","react-bootstrap":"react-bootstrap"}],54:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _d = require("d3");

var _d2 = _interopRequireDefault(_d);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FormatUtils = function () {
	function FormatUtils() {
		_classCallCheck(this, FormatUtils);
	}

	_createClass(FormatUtils, null, [{
		key: "defaultNumberFormatting",

		// this function returns the default number formating.
		// for number values, we round them to at most 4 decimal places
		// unless the number is very small, in which case we just return it
		value: function defaultNumberFormatting(x) {
			if (x < 0.0001) {
				return x;
			} else {
				return _d2.default.round(x, 4);
			}
		}
	}]);

	return FormatUtils;
}();

exports.default = FormatUtils;

},{"d3":"d3"}]},{},[36])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwLXRhYmxlL2Rpc3QvcmVhY3QtYm9vdHN0cmFwLXRhYmxlLm1pbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvRGVjYWRlVmlldy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvSGVhZGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9Nb250aFZpZXcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL1llYXJWaWV3LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9jb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9vbkVudGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi90b01vbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvdXRpbHMvYXNDb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL3V0aWxzL2Zvcm1hdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvdXRpbHMvZ2V0V2Vla0RheU5hbWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL25vZGVfbW9kdWxlcy9tb21lbnQvbW9tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL25vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LXZlbmRvci1wcmVmaXgvZGlzdC9pbmRleC5qcyIsInNyY3RzXFxUb29sT3ZlcmxheS50c3giLCJzcmN0c1xcV2VhdmVUb29sLnRzeCIsInNyY3RzXFxyZWFjdC1mbGV4aWJsZS1sYXlvdXRcXExheW91dC50c3giLCJzcmN0c1xccmVhY3QtZmxleGlibGUtbGF5b3V0XFxSZXNpemVyLnRzeCIsInNyY3RzXFxyZWFjdC1mbGV4aWJsZS1sYXlvdXRcXFJlc2l6ZXJPdmVybGF5LnRzeCIsInNyY3RzXFxyZWFjdC11aVxcSEJveC50c3giLCJzcmN0c1xccmVhY3QtdWlcXFZCb3gudHN4Iiwic3JjdHNcXHJlYWN0LXVpXFx1aS50c3giLCJzcmN0c1xcdG9vbHNcXEFic3RyYWN0V2VhdmVUb29sLnRzeCIsInNyY3RzXFx0b29sc1xcd2VhdmUtYzMtYmFyY2hhcnQudHN4Iiwic3JjdHNcXHRvb2xzXFx3ZWF2ZS1jMy1jb2xvcmxlZ2VuZC50c3giLCJzcmN0c1xcdG9vbHNcXHdlYXZlLWMzLWhpc3RvZ3JhbS50c3giLCJzcmN0c1xcdG9vbHNcXHdlYXZlLWMzLXBpZWNoYXJ0LnRzeCIsInNyY3RzXFx0b29sc1xcd2VhdmUtYzMtc2NhdHRlcnBsb3QudHN4Iiwic3JjdHNcXHV0aWxzXFxGb3JtYXRVdGlscy50cyIsInNyY3RzXFx1dGlsc1xcU3RhbmRhcmRMaWIudHMiLCJzcmNcXEN1c3RvbVNlYXJjaFRvb2wuanN4Iiwic3JjXFxXZWF2ZUxheW91dE1hbmFnZXIuanN4Iiwic3JjXFxXZWF2ZVBhbmVsLmpzIiwic3JjXFxXZWF2ZVBhbmVsTWFuYWdlci5qcyIsInNyY1xcaW5kZXguanMiLCJzcmNcXHRvb2xzXFxBYnN0cmFjdFdlYXZlVG9vbC5qc3giLCJzcmNcXHRvb2xzXFxtYXAuanMiLCJzcmNcXHRvb2xzXFxtYXBcXEN1c3RvbURyYWdCb3guanMiLCJzcmNcXHRvb2xzXFxtYXBcXGNvbnRyb2xzLmpzIiwic3JjXFx0b29sc1xcbWFwXFxpbnRlcmFjdGlvbnMuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcRmVhdHVyZUxheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXEdlb21ldHJ5TGF5ZXIuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcR2x5cGhMYXllci5qcyIsInNyY1xcdG9vbHNcXG1hcFxcbGF5ZXJzXFxJbWFnZUdseXBoQ2FjaGUuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcSW1hZ2VHbHlwaExheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXExheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXFNjYXR0ZXJQbG90TGF5ZXIuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcVGlsZUxheWVyLmpzIiwic3JjXFx0b29sc1xcd2VhdmUtYmFyY2hhcnQuanN4Iiwic3JjXFx0b29sc1xcd2VhdmUtYzMtbGluZWNoYXJ0LmpzeCIsInNyY1xcdG9vbHNcXHdlYXZlLXJlYWN0LXRhYmxlLmpzeCIsInNyY1xcdG9vbHNcXHdlYXZlLXNlc3Npb24tc3RhdGUtbWVudS5qc3giLCJzcmNcXHV0aWxzXFxGb3JtYXRVdGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaGxCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Ozs7Ozs7Ozs7Ozs7Ozs7SUNqRDlELFdBQVc7VUFBWCxXQUFXO3dCQUFYLFdBQVc7OztjQUFYLFdBQVc7Ozs7OzswQ0FLQSxDQUFDLEVBQUU7QUFDakMsT0FBRyxDQUFDLEdBQUcsTUFBTSxFQUFFO0FBQ2QsV0FBTyxDQUFDLENBQUM7SUFDVCxNQUFNO0FBQ04sV0FBTyxZQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdEI7R0FDRDs7O1FBWG1CLFdBQVc7OztrQkFBWCxXQUFXIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQocmVxdWlyZShcInJlYWN0XCIpLHJlcXVpcmUoXCJyZWFjdC1kb21cIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wicmVhY3RcIixcInJlYWN0LWRvbVwiXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlJlYWN0Qm9vdHN0cmFwVGFibGU9dChyZXF1aXJlKFwicmVhY3RcIikscmVxdWlyZShcInJlYWN0LWRvbVwiKSk6ZS5SZWFjdEJvb3RzdHJhcFRhYmxlPXQoZS5SZWFjdCxlLlJlYWN0RE9NKX0odGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4pe2lmKHJbbl0pcmV0dXJuIHJbbl0uZXhwb3J0czt2YXIgbz1yW25dPXtleHBvcnRzOnt9LGlkOm4sbG9hZGVkOiExfTtyZXR1cm4gZVtuXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmxvYWRlZD0hMCxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuIHQubT1lLHQuYz1yLHQucD1cIlwiLHQoMCl9KFtmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMSksaT1uKG8pLGE9cig0MCkscz1uKGEpLGw9cigzNCk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHdpbmRvdy5Cb290c3RyYXBUYWJsZT1pW1wiZGVmYXVsdFwiXSx3aW5kb3cuVGFibGVIZWFkZXJDb2x1bW49c1tcImRlZmF1bHRcIl0sd2luZG93LlRhYmxlRGF0YVNldD1sLlRhYmxlRGF0YVNldCksdFtcImRlZmF1bHRcIl09e0Jvb3RzdHJhcFRhYmxlOmlbXCJkZWZhdWx0XCJdLFRhYmxlSGVhZGVyQ29sdW1uOnNbXCJkZWZhdWx0XCJdLFRhYmxlRGF0YVNldDpsLlRhYmxlRGF0YVNldH0sZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDMpLGQ9bihjKSxwPXIoNCksZj1uKHApLGg9cig1KSx2PW4oaCkseT1yKDkpLG09bih5KSxnPXIoMzApLGI9bihnKSx3PXIoMzIpLEU9bih3KSxfPXIoMzMpLFA9bihfKSxUPXIoMzQpLFM9cigzNiksTz1uKFMpLEM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgcj10aGlzO28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLl9zY3JvbGxIZWFkZXI9ZnVuY3Rpb24oZSl7ci5yZWZzLmhlYWRlci5yZWZzLmNvbnRhaW5lci5zY3JvbGxMZWZ0PWUuY3VycmVudFRhcmdldC5zY3JvbGxMZWZ0fSx0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aD1mdW5jdGlvbigpe3ZhciBlPXIucmVmcy5oZWFkZXIucmVmcy5jb250YWluZXIuY2hpbGROb2Rlc1swXSx0PXIucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLmNoaWxkTm9kZXNbMF07ZS5vZmZzZXRXaWR0aCE9PXQub2Zmc2V0V2lkdGgmJihlLnN0eWxlLndpZHRoPXQub2Zmc2V0V2lkdGgrXCJweFwiKTt2YXIgbj1yLnJlZnMuYm9keS5nZXRCb2R5SGVhZGVyRG9tUHJvcCgpO3IucmVmcy5oZWFkZXIuZml0SGVhZGVyKG4sci5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuc2Nyb2xsSGVpZ2h0PnIucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLmNsaWVudEhlaWdodCl9LHRoaXMuX2F0dGFjaENlbGxFZGl0RnVuYygpLEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5kYXRhKT90aGlzLnN0b3JlPW5ldyBULlRhYmxlRGF0YVN0b3JlKHRoaXMucHJvcHMuZGF0YSk6KHRoaXMuc3RvcmU9bmV3IFQuVGFibGVEYXRhU3RvcmUodGhpcy5wcm9wcy5kYXRhLmdldERhdGEoKSksdGhpcy5wcm9wcy5kYXRhLmNsZWFyKCksdGhpcy5wcm9wcy5kYXRhLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oZSl7ci5zdG9yZS5zZXREYXRhKGUpLHIuc2V0U3RhdGUoe2RhdGE6ci5nZXRUYWJsZURhdGEoci5wcm9wcyl9KX0pKSx0aGlzLmluaXRUYWJsZSh0aGlzLnByb3BzKSx0aGlzLnByb3BzLnNlbGVjdFJvdyYmdGhpcy5wcm9wcy5zZWxlY3RSb3cuc2VsZWN0ZWQmJnRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkodGhpcy5wcm9wcy5zZWxlY3RSb3cuc2VsZWN0ZWQpLHRoaXMuc3RhdGU9e2RhdGE6dGhpcy5nZXRUYWJsZURhdGEodGhpcy5wcm9wcyksc2VsZWN0ZWRSb3dLZXlzOnRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCl9fXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiaW5pdFRhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXlGaWVsZCxyPXt9O2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ0Lmxlbmd0aHx8dVtcImRlZmF1bHRcIl0uQ2hpbGRyZW4uZm9yRWFjaChlLmNoaWxkcmVuLGZ1bmN0aW9uKGUpe2lmKGUucHJvcHMuaXNLZXkpe2lmKG51bGwhPXQpdGhyb3dcIkVycm9yLiBNdWx0aXBsZSBrZXkgY29sdW1uIGJlIGRldGVjdGVkIGluIFRhYmxlSGVhZGVyQ29sdW1uLlwiO3Q9ZS5wcm9wcy5kYXRhRmllbGR9fSx0aGlzKSx1W1wiZGVmYXVsdFwiXS5DaGlsZHJlbi5mb3JFYWNoKGUuY2hpbGRyZW4sZnVuY3Rpb24oZSl7ZS5wcm9wcy5zb3J0RnVuYyYmKHJbZS5wcm9wcy5kYXRhRmllbGRdPWUucHJvcHMuc29ydEZ1bmMpfSx0aGlzKSxudWxsPT10KXRocm93XCJFcnJvci4gTm8gYW55IGtleSBjb2x1bW4gZGVmaW5lZCBpbiBUYWJsZUhlYWRlckNvbHVtbi5Vc2UgJ2lzS2V5PXt0cnVlfScgdG8gc3BlY2lmeSBhbiB1bmlxdWUgY29sdW1uIGFmdGVyIHZlcnNpb24gMC41LjQuXCI7dGhpcy5zdG9yZS5zZXRQcm9wcyh7aXNQYWdpbmF0aW9uOmUucGFnaW5hdGlvbixrZXlGaWVsZDp0LGN1c3RvbVNvcnRGdW5jTWFwOnIsbXVsdGlDb2x1bW5TZWFyY2g6ZS5tdWx0aUNvbHVtblNlYXJjaCxyZW1vdGU6dGhpcy5pc1JlbW90ZURhdGFTb3VyY2UoKX0pfX0se2tleTpcImdldFRhYmxlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO2lmKGUucGFnaW5hdGlvbil7dmFyIHI9ZS5vcHRpb25zLnBhZ2Usbj1lLm9wdGlvbnMuc2l6ZVBlclBhZ2U7cnx8KHI9dGhpcy5yZWZzLnBhZ2luYXRpb24/dGhpcy5yZWZzLnBhZ2luYXRpb24uZ2V0Q3VycmVudFBhZ2UoKToxKSxufHwobj10aGlzLnJlZnMucGFnaW5hdGlvbj90aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRTaXplUGVyUGFnZSgpOmZbXCJkZWZhdWx0XCJdLlNJWkVfUEVSX1BBR0UpLHI+PWUuZGF0YS5sZW5ndGgvbiYmKHI9MSksdD10aGlzLnN0b3JlLnBhZ2UocixuKS5nZXQoKX1lbHNlIHQ9dGhpcy5zdG9yZS5nZXQoKTtyZXR1cm4gdH19LHtrZXk6XCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5pbml0VGFibGUoZSksQXJyYXkuaXNBcnJheShlLmRhdGEpKXt0aGlzLnN0b3JlLnNldERhdGEoZS5kYXRhKTt2YXIgdD10aGlzLmdldFRhYmxlRGF0YShlKTt0aGlzLnNldFN0YXRlKHtkYXRhOnR9KX1lLnNlbGVjdFJvdyYmZS5zZWxlY3RSb3cuc2VsZWN0ZWQmJih0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KGUuc2VsZWN0Um93LnNlbGVjdGVkKSx0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFJvd0tleXM6ZS5zZWxlY3RSb3cuc2VsZWN0ZWR9KSl9fSx7a2V5OlwiY29tcG9uZW50RGlkTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FkanVzdEhlYWRlcldpZHRoKCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aCksdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX3Njcm9sbEhlYWRlcil9fSx7a2V5OlwiY29tcG9uZW50V2lsbFVubW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYWRqdXN0SGVhZGVyV2lkdGgpLHRoaXMucmVmcy5ib2R5LnJlZnMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLl9zY3JvbGxIZWFkZXIpfX0se2tleTpcImNvbXBvbmVudERpZFVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYWRqdXN0SGVhZGVyV2lkdGgoKSx0aGlzLl9hdHRhY2hDZWxsRWRpdEZ1bmMoKSx0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJUYWJsZUNvbXBsZXRlJiZ0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJUYWJsZUNvbXBsZXRlKCl9fSx7a2V5OlwiX2F0dGFjaENlbGxFZGl0RnVuY1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wcm9wcy5jZWxsRWRpdCYmKHRoaXMucHJvcHMuY2VsbEVkaXQuX19vbkNvbXBsZXRlRWRpdF9fPXRoaXMuaGFuZGxlRWRpdENlbGwuYmluZCh0aGlzKSx0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGUhPT1mW1wiZGVmYXVsdFwiXS5DRUxMX0VESVRfTk9ORSYmKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3Q9ITEpKX19LHtrZXk6XCJpc1JlbW90ZURhdGFTb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4oZXx8dGhpcy5wcm9wcykucmVtb3RlfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9KCgwLGRbXCJkZWZhdWx0XCJdKShcInJlYWN0LWJzLXRhYmxlXCIpLHRoaXMucHJvcHMuY2hpbGRyZW4pLHQ9e2hlaWdodDp0aGlzLnByb3BzLmhlaWdodCxtYXhIZWlnaHQ6dGhpcy5wcm9wcy5tYXhIZWlnaHR9O0FycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbil8fChlPVt0aGlzLnByb3BzLmNoaWxkcmVuXSk7dmFyIHI9ZS5tYXAoZnVuY3Rpb24oZSx0KXtyZXR1cm57bmFtZTplLnByb3BzLmRhdGFGaWVsZCxhbGlnbjplLnByb3BzLmRhdGFBbGlnbixzb3J0OmUucHJvcHMuZGF0YVNvcnQsZm9ybWF0OmUucHJvcHMuZGF0YUZvcm1hdCxlZGl0YWJsZTplLnByb3BzLmVkaXRhYmxlLGhpZGRlbjplLnByb3BzLmhpZGRlbixjbGFzc05hbWU6ZS5wcm9wcy5jb2x1bW5DbGFzc05hbWUsd2lkdGg6ZS5wcm9wcy53aWR0aCx0ZXh0OmUucHJvcHMuY2hpbGRyZW4saW5kZXg6dH19LHRoaXMpLG49dGhpcy5yZW5kZXJQYWdpbmF0aW9uKCksbz10aGlzLnJlbmRlclRvb2xCYXIoKSxpPXRoaXMucmVuZGVyVGFibGVGaWx0ZXIociksYT10aGlzLmlzU2VsZWN0QWxsKCk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicmVhY3QtYnMtY29udGFpbmVyXCIscmVmOlwidGFibGVcIn0sbyx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJlYWN0LWJzLXRhYmxlLWNvbnRhaW5lclwiLHN0eWxlOnR9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQodltcImRlZmF1bHRcIl0se3JlZjpcImhlYWRlclwiLHJvd1NlbGVjdFR5cGU6dGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSxoaWRlU2VsZWN0Q29sdW1uOnRoaXMucHJvcHMuc2VsZWN0Um93LmhpZGVTZWxlY3RDb2x1bW4sc29ydE5hbWU6dGhpcy5wcm9wcy5vcHRpb25zLnNvcnROYW1lLHNvcnRPcmRlcjp0aGlzLnByb3BzLm9wdGlvbnMuc29ydE9yZGVyLG9uU29ydDp0aGlzLmhhbmRsZVNvcnQuYmluZCh0aGlzKSxvblNlbGVjdEFsbFJvdzp0aGlzLmhhbmRsZVNlbGVjdEFsbFJvdy5iaW5kKHRoaXMpLGJvcmRlcmVkOnRoaXMucHJvcHMuYm9yZGVyZWQsY29uZGVuc2VkOnRoaXMucHJvcHMuY29uZGVuc2VkLGlzU2VsZWN0QWxsOmF9LHRoaXMucHJvcHMuY2hpbGRyZW4pLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQobVtcImRlZmF1bHRcIl0se2hlaWdodDp0aGlzLnByb3BzLmhlaWdodCxtYXhIZWlnaHQ6dGhpcy5wcm9wcy5tYXhIZWlnaHQscmVmOlwiYm9keVwiLGRhdGE6dGhpcy5zdGF0ZS5kYXRhLGNvbHVtbnM6cix0ckNsYXNzTmFtZTp0aGlzLnByb3BzLnRyQ2xhc3NOYW1lLHN0cmlwZWQ6dGhpcy5wcm9wcy5zdHJpcGVkLGJvcmRlcmVkOnRoaXMucHJvcHMuYm9yZGVyZWQsaG92ZXI6dGhpcy5wcm9wcy5ob3ZlcixrZXlGaWVsZDp0aGlzLnN0b3JlLmdldEtleUZpZWxkKCksY29uZGVuc2VkOnRoaXMucHJvcHMuY29uZGVuc2VkLHNlbGVjdFJvdzp0aGlzLnByb3BzLnNlbGVjdFJvdyxjZWxsRWRpdDp0aGlzLnByb3BzLmNlbGxFZGl0LHNlbGVjdGVkUm93S2V5czp0aGlzLnN0YXRlLnNlbGVjdGVkUm93S2V5cyxvblJvd0NsaWNrOnRoaXMuaGFuZGxlUm93Q2xpY2suYmluZCh0aGlzKSxvblNlbGVjdFJvdzp0aGlzLmhhbmRsZVNlbGVjdFJvdy5iaW5kKHRoaXMpLG5vRGF0YVRleHQ6dGhpcy5wcm9wcy5vcHRpb25zLm5vRGF0YVRleHR9KSksaSxuKX19LHtrZXk6XCJpc1NlbGVjdEFsbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKSx0PXRoaXMuc3RvcmUuZ2V0QWxsUm93a2V5KCk7cmV0dXJuIGUubGVuZ3RoIT09dC5sZW5ndGg/MD09PWUubGVuZ3RoPyExOlwiaW5kZXRlcm1pbmF0ZVwiOiEwfX0se2tleTpcImhhbmRsZVNvcnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMucHJvcHMub3B0aW9ucy5vblNvcnRDaGFuZ2UmJnRoaXMucHJvcHMub3B0aW9ucy5vblNvcnRDaGFuZ2UodCxlLHRoaXMucHJvcHMpLCF0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpKXt2YXIgcj10aGlzLnN0b3JlLnNvcnQoZSx0KS5nZXQoKTt0aGlzLnNldFN0YXRlKHtkYXRhOnJ9KX19fSx7a2V5OlwiaGFuZGxlUGFnaW5hdGlvbkRhdGFcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMucHJvcHMub3B0aW9ucy5vblBhZ2VDaGFuZ2U7aWYociYmcihlLHQpLCF0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpKXt2YXIgbj10aGlzLnN0b3JlLnBhZ2UoZSx0KS5nZXQoKTt0aGlzLnNldFN0YXRlKHtkYXRhOm59KX19fSx7a2V5OlwiaGFuZGxlUm93Q2xpY2tcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dDbGljayYmdGhpcy5wcm9wcy5vcHRpb25zLm9uUm93Q2xpY2soZSl9fSx7a2V5OlwiaGFuZGxlU2VsZWN0QWxsUm93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQscj1bXSxuPSEwO3RoaXMucHJvcHMuc2VsZWN0Um93Lm9uU2VsZWN0QWxsJiYobj10aGlzLnByb3BzLnNlbGVjdFJvdy5vblNlbGVjdEFsbCh0LHQ/dGhpcy5zdG9yZS5nZXQoKTpbXSkpLChcInVuZGVmaW5lZFwiPT10eXBlb2Ygbnx8biE9PSExKSYmKHQmJihyPXRoaXMuc3RvcmUuZ2V0QWxsUm93a2V5KCkpLHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkociksdGhpcy5zZXRTdGF0ZSh7c2VsZWN0ZWRSb3dLZXlzOnJ9KSl9fSx7a2V5OlwiaGFuZGxlU2VsZWN0Um93XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpLG49ZVt0aGlzLnN0b3JlLmdldEtleUZpZWxkKCldLG89ITA7dGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3QmJihvPXRoaXMucHJvcHMuc2VsZWN0Um93Lm9uU2VsZWN0KGUsdCkpLChcInVuZGVmaW5lZFwiPT10eXBlb2Ygb3x8byE9PSExKSYmKHRoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGU9PT1mW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX1NJTkdMRT9yPXQ/W25dOltdOnQ/ci5wdXNoKG4pOnI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIG4hPT1lfSksdGhpcy5zdG9yZS5zZXRTZWxlY3RlZFJvd0tleShyKSx0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFJvd0tleXM6cn0pKX19LHtrZXk6XCJoYW5kbGVFZGl0Q2VsbFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA7dVtcImRlZmF1bHRcIl0uQ2hpbGRyZW4uZm9yRWFjaCh0aGlzLnByb3BzLmNoaWxkcmVuLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9PXI/KG49ZS5wcm9wcy5kYXRhRmllbGQsITEpOnZvaWQgMH0pO3ZhciBvPXRoaXMuc3RvcmUuZWRpdChlLHQsbikuZ2V0KCk7dGhpcy5zZXRTdGF0ZSh7ZGF0YTpvfSksdGhpcy5wcm9wcy5jZWxsRWRpdC5hZnRlclNhdmVDZWxsJiZ0aGlzLnByb3BzLmNlbGxFZGl0LmFmdGVyU2F2ZUNlbGwodGhpcy5zdGF0ZS5kYXRhW3RdLG4sZSl9fSx7a2V5OlwiaGFuZGxlQWRkUm93QmVnaW5cIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVmcy5ib2R5fX0se2tleTpcImhhbmRsZUFkZFJvd1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMDt0cnl7dGhpcy5zdG9yZS5hZGQoZSl9Y2F0Y2gocil7cmV0dXJuIHJ9aWYodGhpcy5wcm9wcy5wYWdpbmF0aW9uKXt2YXIgbj10aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRTaXplUGVyUGFnZSgpLG89TWF0aC5jZWlsKHRoaXMuc3RvcmUuZ2V0RGF0YU51bSgpL24pO3Q9dGhpcy5zdG9yZS5wYWdlKG8sbikuZ2V0KCksdGhpcy5zZXRTdGF0ZSh7ZGF0YTp0fSksdGhpcy5yZWZzLnBhZ2luYXRpb24uY2hhbmdlUGFnZShvKX1lbHNlIHQ9dGhpcy5zdG9yZS5nZXQoKSx0aGlzLnNldFN0YXRlKHtkYXRhOnR9KTt0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJJbnNlcnRSb3cmJnRoaXMucHJvcHMub3B0aW9ucy5hZnRlckluc2VydFJvdyhlKX19LHtrZXk6XCJnZXRTaXplUGVyUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMucGFnaW5hdGlvbj90aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRTaXplUGVyUGFnZSgpOnZvaWQgMH19LHtrZXk6XCJnZXRDdXJyZW50UGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMucGFnaW5hdGlvbj90aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRDdXJyZW50UGFnZSgpOnZvaWQgMH19LHtrZXk6XCJoYW5kbGVEcm9wUm93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWU/ZTp0aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpO3ImJnIubGVuZ3RoPjAmJih0aGlzLnByb3BzLm9wdGlvbnMuaGFuZGxlQ29uZmlybURlbGV0ZVJvdz90aGlzLnByb3BzLm9wdGlvbnMuaGFuZGxlQ29uZmlybURlbGV0ZVJvdyhmdW5jdGlvbigpe3QuZGVsZXRlUm93KHIpfSk6Y29uZmlybShcIkFyZSB5b3Ugc3VyZSB3YW50IGRlbGV0ZT9cIikmJnRoaXMuZGVsZXRlUm93KHIpKX19LHtrZXk6XCJkZWxldGVSb3dcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA7aWYodGhpcy5zdG9yZS5yZW1vdmUoZSksdGhpcy5zdG9yZS5zZXRTZWxlY3RlZFJvd0tleShbXSksdGhpcy5wcm9wcy5wYWdpbmF0aW9uKXt2YXIgcj10aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRTaXplUGVyUGFnZSgpLG49TWF0aC5jZWlsKHRoaXMuc3RvcmUuZ2V0RGF0YU51bSgpL3IpLG89dGhpcy5yZWZzLnBhZ2luYXRpb24uZ2V0Q3VycmVudFBhZ2UoKTtvPm4mJihvPW4pLHQ9dGhpcy5zdG9yZS5wYWdlKG8scikuZ2V0KCksdGhpcy5zZXRTdGF0ZSh7ZGF0YTp0LHNlbGVjdGVkUm93S2V5czp0aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpfSksdGhpcy5yZWZzLnBhZ2luYXRpb24uY2hhbmdlUGFnZShvKX1lbHNlIHQ9dGhpcy5zdG9yZS5nZXQoKSx0aGlzLnNldFN0YXRlKHtkYXRhOnQsc2VsZWN0ZWRSb3dLZXlzOnRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCl9KTt0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJEZWxldGVSb3cmJnRoaXMucHJvcHMub3B0aW9ucy5hZnRlckRlbGV0ZVJvdyhlKX19LHtrZXk6XCJoYW5kbGVGaWx0ZXJEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zdG9yZS5maWx0ZXIoZSk7dmFyIHQ9dm9pZCAwO2lmKHRoaXMucHJvcHMucGFnaW5hdGlvbil7dmFyIHI9dGhpcy5yZWZzLnBhZ2luYXRpb24uZ2V0U2l6ZVBlclBhZ2UoKTt0PXRoaXMuc3RvcmUucGFnZSgxLHIpLmdldCgpLHRoaXMucmVmcy5wYWdpbmF0aW9uLmNoYW5nZVBhZ2UoMSl9ZWxzZSB0PXRoaXMuc3RvcmUuZ2V0KCk7dGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyQ29sdW1uRmlsdGVyJiZ0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJDb2x1bW5GaWx0ZXIoZSx0aGlzLnN0b3JlLmdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSksdGhpcy5zZXRTdGF0ZSh7ZGF0YTp0fSl9fSx7a2V5OlwiaGFuZGxlRXhwb3J0Q1NWXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0b3JlLmdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSx0PVtdO3RoaXMucHJvcHMuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGUpe2UucHJvcHMuaGlkZGVuPT09ITEmJnQucHVzaChlLnByb3BzLmRhdGFGaWVsZCl9KSwoMCxPW1wiZGVmYXVsdFwiXSkoZSx0LHRoaXMucHJvcHMuY3N2RmlsZU5hbWUpfX0se2tleTpcImhhbmRsZVNlYXJjaFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc3RvcmUuc2VhcmNoKGUpO3ZhciB0PXZvaWQgMDtpZih0aGlzLnByb3BzLnBhZ2luYXRpb24pe3ZhciByPXRoaXMucmVmcy5wYWdpbmF0aW9uLmdldFNpemVQZXJQYWdlKCk7dD10aGlzLnN0b3JlLnBhZ2UoMSxyKS5nZXQoKSx0aGlzLnJlZnMucGFnaW5hdGlvbi5jaGFuZ2VQYWdlKDEpfWVsc2UgdD10aGlzLnN0b3JlLmdldCgpO3RoaXMucHJvcHMub3B0aW9ucy5hZnRlclNlYXJjaCYmdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyU2VhcmNoKGUsdGhpcy5zdG9yZS5nZXREYXRhSWdub3JpbmdQYWdpbmF0aW9uKCkpLHRoaXMuc2V0U3RhdGUoe2RhdGE6dH0pfX0se2tleTpcInJlbmRlclBhZ2luYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMucHJvcHMucGFnaW5hdGlvbil7dmFyIGU9dm9pZCAwO3JldHVybiBlPXRoaXMuaXNSZW1vdGVEYXRhU291cmNlKCk/dGhpcy5wcm9wcy5mZXRjaEluZm8uZGF0YVRvdGFsU2l6ZTp0aGlzLnN0b3JlLmdldERhdGFOdW0oKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGJbXCJkZWZhdWx0XCJdLHtyZWY6XCJwYWdpbmF0aW9uXCIsY3VyclBhZ2U6dGhpcy5wcm9wcy5vcHRpb25zLnBhZ2V8fDEsY2hhbmdlUGFnZTp0aGlzLmhhbmRsZVBhZ2luYXRpb25EYXRhLmJpbmQodGhpcyksc2l6ZVBlclBhZ2U6dGhpcy5wcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlfHxmW1wiZGVmYXVsdFwiXS5TSVpFX1BFUl9QQUdFX0xJU1RbMF0sc2l6ZVBlclBhZ2VMaXN0OnRoaXMucHJvcHMub3B0aW9ucy5zaXplUGVyUGFnZUxpc3R8fGZbXCJkZWZhdWx0XCJdLlNJWkVfUEVSX1BBR0VfTElTVCxwYWdpbmF0aW9uU2l6ZTp0aGlzLnByb3BzLm9wdGlvbnMucGFnaW5hdGlvblNpemV8fGZbXCJkZWZhdWx0XCJdLlBBR0lOQVRJT05fU0laRSxyZW1vdGU6dGhpcy5pc1JlbW90ZURhdGFTb3VyY2UoKSxkYXRhU2l6ZTplLG9uU2l6ZVBlclBhZ2VMaXN0OnRoaXMucHJvcHMub3B0aW9ucy5vblNpemVQZXJQYWdlTGlzdH0pKX1yZXR1cm4gbnVsbH19LHtrZXk6XCJyZW5kZXJUb29sQmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT12b2lkIDA7cmV0dXJuIGU9QXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmNoaWxkcmVuKT90aGlzLnByb3BzLmNoaWxkcmVuLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnByb3BzO3JldHVybntuYW1lOnQuY2hpbGRyZW4sZmllbGQ6dC5kYXRhRmllbGQsYXV0b1ZhbHVlOnQuYXV0b1ZhbHVlfHwhMSxlZGl0YWJsZTp0LmVkaXRhYmxlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmVkaXRhYmxlP3QuZWRpdGFibGUoKTp0LmVkaXRhYmxlLGZvcm1hdDp0LmZvcm1hdD9mb3JtYXQ6ITF9fSk6W3tuYW1lOnRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHMuY2hpbGRyZW4sZmllbGQ6dGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5kYXRhRmllbGQsZWRpdGFibGU6dGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5lZGl0YWJsZX1dLHRoaXMucHJvcHMuaW5zZXJ0Um93fHx0aGlzLnByb3BzLmRlbGV0ZVJvd3x8dGhpcy5wcm9wcy5zZWFyY2h8fHRoaXMucHJvcHMuZXhwb3J0Q1NWP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidG9vbC1iYXJcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChFW1wiZGVmYXVsdFwiXSx7ZW5hYmxlSW5zZXJ0OnRoaXMucHJvcHMuaW5zZXJ0Um93LGVuYWJsZURlbGV0ZTp0aGlzLnByb3BzLmRlbGV0ZVJvdyxlbmFibGVTZWFyY2g6dGhpcy5wcm9wcy5zZWFyY2gsZW5hYmxlRXhwb3J0Q1NWOnRoaXMucHJvcHMuZXhwb3J0Q1NWLGNvbHVtbnM6ZSxzZWFyY2hQbGFjZWhvbGRlcjp0aGlzLnByb3BzLnNlYXJjaFBsYWNlaG9sZGVyLG9uQWRkUm93OnRoaXMuaGFuZGxlQWRkUm93LmJpbmQodGhpcyksb25BZGRSb3dCZWdpbjp0aGlzLmhhbmRsZUFkZFJvd0JlZ2luLmJpbmQodGhpcyksb25Ecm9wUm93OnRoaXMuaGFuZGxlRHJvcFJvdy5iaW5kKHRoaXMpLG9uU2VhcmNoOnRoaXMuaGFuZGxlU2VhcmNoLmJpbmQodGhpcyksb25FeHBvcnRDU1Y6dGhpcy5oYW5kbGVFeHBvcnRDU1YuYmluZCh0aGlzKX0pKTpudWxsfX0se2tleTpcInJlbmRlclRhYmxlRmlsdGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHJvcHMuY29sdW1uRmlsdGVyP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUFtcImRlZmF1bHRcIl0se2NvbHVtbnM6ZSxyb3dTZWxlY3RUeXBlOnRoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGUsb25GaWx0ZXI6dGhpcy5oYW5kbGVGaWx0ZXJEYXRhLmJpbmQodGhpcyl9KTpudWxsfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO0MucHJvcFR5cGVzPXtrZXlGaWVsZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGhlaWdodDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLG1heEhlaWdodDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGRhdGE6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm9uZU9mVHlwZShbdVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFycmF5LHVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5vYmplY3RdKSxyZW1vdGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsc3RyaXBlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxib3JkZXJlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxob3Zlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjb25kZW5zZWQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wscGFnaW5hdGlvbjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxzZWFyY2hQbGFjZWhvbGRlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLHNlbGVjdFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc2hhcGUoe21vZGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxiZ0NvbG9yOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsc2VsZWN0ZWQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFycmF5LG9uU2VsZWN0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG9uU2VsZWN0QWxsOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLGNsaWNrVG9TZWxlY3Q6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsaGlkZVNlbGVjdENvbHVtbjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjbGlja1RvU2VsZWN0QW5kRWRpdENlbGw6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2x9KSxjZWxsRWRpdDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc2hhcGUoe21vZGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxibHVyVG9TYXZlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGFmdGVyU2F2ZUNlbGw6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmN9KSxpbnNlcnRSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsZGVsZXRlUm93OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLHNlYXJjaDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjb2x1bW5GaWx0ZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsdHJDbGFzc05hbWU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFueSxvcHRpb25zOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zaGFwZSh7c29ydE5hbWU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxzb3J0T3JkZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxhZnRlclRhYmxlQ29tcGxldGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsYWZ0ZXJEZWxldGVSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsYWZ0ZXJJbnNlcnRSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsYWZ0ZXJTZWFyY2g6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsYWZ0ZXJDb2x1bW5GaWx0ZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25Sb3dDbGljazp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxwYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsc2l6ZVBlclBhZ2VMaXN0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxzaXplUGVyUGFnZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyLHBhZ2luYXRpb25TaXplOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsb25Tb3J0Q2hhbmdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG9uUGFnZUNoYW5nZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxvblNpemVQZXJQYWdlTGlzdDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxub0RhdGFUZXh0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsaGFuZGxlQ29uZmlybURlbGV0ZVJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuY30pLGZldGNoSW5mbzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc2hhcGUoe2RhdGFUb3RhbFNpemU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcn0pLGV4cG9ydENTVjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjc3ZGaWxlTmFtZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nfSxDLmRlZmF1bHRQcm9wcz17aGVpZ2h0OlwiMTAwJVwiLG1heEhlaWdodDp2b2lkIDAsc3RyaXBlZDohMSxib3JkZXJlZDohMCxob3ZlcjohMSxjb25kZW5zZWQ6ITEscGFnaW5hdGlvbjohMSxzZWFyY2hQbGFjZWhvbGRlcjp2b2lkIDAsc2VsZWN0Um93Onttb2RlOmZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfTk9ORSxiZ0NvbG9yOmZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfQkdfQ09MT1Isc2VsZWN0ZWQ6W10sb25TZWxlY3Q6dm9pZCAwLG9uU2VsZWN0QWxsOnZvaWQgMCxjbGlja1RvU2VsZWN0OiExLGhpZGVTZWxlY3RDb2x1bW46ITEsY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsOiExfSxjZWxsRWRpdDp7bW9kZTpmW1wiZGVmYXVsdFwiXS5DRUxMX0VESVRfTk9ORSxibHVyVG9TYXZlOiExLGFmdGVyU2F2ZUNlbGw6dm9pZCAwfSxpbnNlcnRSb3c6ITEsZGVsZXRlUm93OiExLHNlYXJjaDohMSxtdWx0aUNvbHVtblNlYXJjaDohMSxjb2x1bW5GaWx0ZXI6ITEsdHJDbGFzc05hbWU6XCJcIixvcHRpb25zOntzb3J0TmFtZTp2b2lkIDAsc29ydE9yZGVyOmZbXCJkZWZhdWx0XCJdLlNPUlRfREVTQyxhZnRlclRhYmxlQ29tcGxldGU6dm9pZCAwLGFmdGVyRGVsZXRlUm93OnZvaWQgMCxhZnRlckluc2VydFJvdzp2b2lkIDAsYWZ0ZXJTZWFyY2g6dm9pZCAwLGFmdGVyQ29sdW1uRmlsdGVyOnZvaWQgMCxvblJvd0NsaWNrOnZvaWQgMCxwYWdlOnZvaWQgMCxzaXplUGVyUGFnZUxpc3Q6ZltcImRlZmF1bHRcIl0uU0laRV9QRVJfUEFHRV9MSVNULHNpemVQZXJQYWdlOnZvaWQgMCxwYWdpbmF0aW9uU2l6ZTpmW1wiZGVmYXVsdFwiXS5QQUdJTkFUSU9OX1NJWkUsb25TaXplUGVyUGFnZUxpc3Q6dm9pZCAwLG5vRGF0YVRleHQ6dm9pZCAwLGhhbmRsZUNvbmZpcm1EZWxldGVSb3c6dm9pZCAwfSxmZXRjaEluZm86e2RhdGFUb3RhbFNpemU6MH0sZXhwb3J0Q1NWOiExLGNzdkZpbGVOYW1lOnZvaWQgMH0sdFtcImRlZmF1bHRcIl09QyxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKHQscil7dC5leHBvcnRzPWV9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvOy8qIVxuXHQgIENvcHlyaWdodCAoYykgMjAxNiBKZWQgV2F0c29uLlxuXHQgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG5cdCAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuXHQqL1xuIWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdO2lmKG4pe3ZhciBvPXR5cGVvZiBuO2lmKFwic3RyaW5nXCI9PT1vfHxcIm51bWJlclwiPT09byllLnB1c2gobik7ZWxzZSBpZihBcnJheS5pc0FycmF5KG4pKWUucHVzaChyLmFwcGx5KG51bGwsbikpO2Vsc2UgaWYoXCJvYmplY3RcIj09PW8pZm9yKHZhciBhIGluIG4paS5jYWxsKG4sYSkmJm5bYV0mJmUucHVzaChhKX19cmV0dXJuIGUuam9pbihcIiBcIil9dmFyIGk9e30uaGFzT3duUHJvcGVydHk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJmUuZXhwb3J0cz9lLmV4cG9ydHM9cjoobj1bXSxvPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LmFwcGx5KHQsbiksISh2b2lkIDAhPT1vJiYoZS5leHBvcnRzPW8pKSl9KCl9LGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdFtcImRlZmF1bHRcIl09e1NPUlRfREVTQzpcImRlc2NcIixTT1JUX0FTQzpcImFzY1wiLFNJWkVfUEVSX1BBR0U6MTAsTkVYVF9QQUdFOlwiPlwiLExBU1RfUEFHRTpcIj4+XCIsUFJFX1BBR0U6XCI8XCIsRklSU1RfUEFHRTpcIjw8XCIsUk9XX1NFTEVDVF9CR19DT0xPUjpcIlwiLFJPV19TRUxFQ1RfTk9ORTpcIm5vbmVcIixST1dfU0VMRUNUX1NJTkdMRTpcInJhZGlvXCIsUk9XX1NFTEVDVF9NVUxUSTpcImNoZWNrYm94XCIsQ0VMTF9FRElUX05PTkU6XCJub25lXCIsQ0VMTF9FRElUX0NMSUNLOlwiY2xpY2tcIixDRUxMX0VESVRfREJDTElDSzpcImRiY2xpY2tcIixTSVpFX1BFUl9QQUdFX0xJU1Q6WzEwLDI1LDMwLDUwXSxQQUdJTkFUSU9OX1NJWkU6NSxOT19EQVRBX1RFWFQ6XCJUaGVyZSBpcyBubyBkYXRhIHRvIGRpc3BsYXlcIn0sZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDYpLGQ9bihjKSxwPXIoNCksZj1uKHApLGg9cig3KSx2PW4oaCkseT1yKDMpLG09bih5KSxnPXIoOCksYj1uKGcpLHc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZSh0aGlzLnByb3BzLmNoZWNrZWQpfX0se2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnVwZGF0ZShlLmNoZWNrZWQpfX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2RbXCJkZWZhdWx0XCJdLmZpbmRET01Ob2RlKHRoaXMpLmluZGV0ZXJtaW5hdGU9XCJpbmRldGVybWluYXRlXCI9PT1lfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwiY2hlY2tib3hcIixjaGVja2VkOnRoaXMucHJvcHMuY2hlY2tlZCxvbkNoYW5nZTp0aGlzLnByb3BzLm9uQ2hhbmdlfSl9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCksRT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLnNlbGVjdFJvd0NvbHVtbldpZHRoPW51bGx9cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJjbGVhclNvcnRDYXJldFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMucmVmcy5oZWFkZXIsbj0wO248ci5jaGlsZEVsZW1lbnRDb3VudDtuKyspe3ZhciBvPXIuY2hpbGROb2Rlc1tuXS5jaGlsZE5vZGVzWzBdO28uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm9yZGVyXCIpLmxlbmd0aD4wJiZvLnJlbW92ZUNoaWxkKG8uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm9yZGVyXCIpWzBdKX10aGlzLnByb3BzLm9uU29ydChlLHQpfX0se2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnByb3BzLnNvcnROYW1lKXt0aGlzLmNsZWFyU29ydENhcmV0KHRoaXMucHJvcHMuc29ydE9yZGVyLHRoaXMucHJvcHMuc29ydE5hbWUpO2Zvcih2YXIgZT10aGlzLnJlZnMuaGVhZGVyLHQ9MDt0PGUuY2hpbGRFbGVtZW50Q291bnQ7dCsrKXt2YXIgcj1lLmNoaWxkTm9kZXNbdF0uY2hpbGROb2Rlc1swXTtpZihyLmdldEF0dHJpYnV0ZShcImRhdGEtZmllbGRcIik9PT10aGlzLnByb3BzLnNvcnROYW1lKXtyLmFwcGVuZENoaWxkKHZbXCJkZWZhdWx0XCJdLnJlbmRlclNvcnRDYXJldCh0aGlzLnByb3BzLnNvcnRPcmRlcikpO2JyZWFrfX19fX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9KDAsbVtcImRlZmF1bHRcIl0pKFwidGFibGUtaGVhZGVyXCIpLHQ9KDAsbVtcImRlZmF1bHRcIl0pKFwidGFibGVcIixcInRhYmxlLWhvdmVyXCIse1widGFibGUtYm9yZGVyZWRcIjp0aGlzLnByb3BzLmJvcmRlcmVkLFwidGFibGUtY29uZGVuc2VkXCI6dGhpcy5wcm9wcy5jb25kZW5zZWR9KSxyPXRoaXMucHJvcHMuaGlkZVNlbGVjdENvbHVtbj9udWxsOnRoaXMucmVuZGVyU2VsZWN0Um93SGVhZGVyKCk7cmV0dXJuIHRoaXMuX2F0dGFjaENsZWFyU29ydENhcmV0RnVuYygpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7cmVmOlwiY29udGFpbmVyXCIsY2xhc3NOYW1lOmV9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLHtjbGFzc05hbWU6dH0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRoZWFkXCIsbnVsbCx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidHJcIix7cmVmOlwiaGVhZGVyXCJ9LHIsdGhpcy5wcm9wcy5jaGlsZHJlbikpKSl9fSx7a2V5OlwicmVuZGVyU2VsZWN0Um93SGVhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlPT1mW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX1NJTkdMRT91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGJbXCJkZWZhdWx0XCJdLHt3aWR0aDp0aGlzLnNlbGVjdFJvd0NvbHVtbldpZHRofSk6dGhpcy5wcm9wcy5yb3dTZWxlY3RUeXBlPT1mW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX01VTFRJP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoYltcImRlZmF1bHRcIl0se3dpZHRoOnRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGh9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQodyx7b25DaGFuZ2U6dGhpcy5wcm9wcy5vblNlbGVjdEFsbFJvdyxjaGVja2VkOnRoaXMucHJvcHMuaXNTZWxlY3RBbGx9KSk6bnVsbH19LHtrZXk6XCJfYXR0YWNoQ2xlYXJTb3J0Q2FyZXRGdW5jXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pKWZvcih2YXIgZT0wO2U8dGhpcy5wcm9wcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXRoaXMucHJvcHMuY2hpbGRyZW5bZV09dVtcImRlZmF1bHRcIl0uY2xvbmVFbGVtZW50KHRoaXMucHJvcHMuY2hpbGRyZW5bZV0se2tleTplLGNsZWFyU29ydENhcmV0OnRoaXMuY2xlYXJTb3J0Q2FyZXQuYmluZCh0aGlzKX0pO2Vsc2UgdGhpcy5wcm9wcy5jaGlsZHJlbj11W1wiZGVmYXVsdFwiXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbix7a2V5OjAsY2xlYXJTb3J0Q2FyZXQ6dGhpcy5jbGVhclNvcnRDYXJldC5iaW5kKHRoaXMpfSl9fSx7a2V5OlwiZml0SGVhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pKXt2YXIgcj10aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUhPWZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfU0lOR0xFJiZ0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGUhPWZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfTVVMVEl8fHRoaXMucHJvcHMuaGlkZVNlbGVjdENvbHVtbj8wOjE7MT09ciYmKHRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGg9ZVswXS53aWR0aCk7Zm9yKHZhciBuPTA7bjx0aGlzLnByb3BzLmNoaWxkcmVuLmxlbmd0aDtuKyspdGhpcy5wcm9wcy5jaGlsZHJlbltuXT11W1wiZGVmYXVsdFwiXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbltuXSx7d2lkdGg6ZVtuK3JdLndpZHRoK1wicHhcIn0pfWVsc2UgdGhpcy5wcm9wcy5jaGlsZHJlbj11W1wiZGVmYXVsdFwiXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbix7d2lkdGg6ZVswXS53aWR0aCtcInB4XCJ9KTt0aGlzLnByb3BzLmNvbmRlbnNlZCYmKHRoaXMucmVmcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0PVwiMzZweFwiKSx0aGlzLmZvcmNlVXBkYXRlKCksdCYmKHRoaXMucmVmcy5jb250YWluZXIuc3R5bGUubWFyZ2luUmlnaHQ9dltcImRlZmF1bHRcIl0uZ2V0U2Nyb2xsQmFyV2lkdGgoKStcInB4XCIpfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO0UucHJvcFR5cGVzPXtyb3dTZWxlY3RUeXBlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsb25Tb3J0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG9uU2VsZWN0QWxsUm93OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLHNvcnROYW1lOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsc29ydE9yZGVyOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsaGlkZVNlbGVjdENvbHVtbjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxib3JkZXJlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjb25kZW5zZWQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsaXNTZWxlY3RBbGw6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm9uZU9mKFshMCxcImluZGV0ZXJtaW5hdGVcIiwhMV0pfSxFLmRlZmF1bHRQcm9wcz17fSx0W1wiZGVmYXVsdFwiXT1FLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSxyKXtlLmV4cG9ydHM9dH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1yKDIpLGk9bihvKSxhPXIoNCkscz1uKGEpLGw9cigzKSx1PW4obCk7dFtcImRlZmF1bHRcIl09e3JlbmRlclNvcnRDYXJldDpmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0LmNsYXNzTmFtZT1cIm9yZGVyXCIsZT09c1tcImRlZmF1bHRcIl0uU09SVF9BU0MmJih0LmNsYXNzTmFtZSs9XCIgZHJvcHVwXCIpO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO3JldHVybiByLmNsYXNzTmFtZT1cImNhcmV0XCIsci5zdHlsZS5tYXJnaW49XCIxMHB4IDVweFwiLHQuYXBwZW5kQ2hpbGQociksdH0scmVuZGVyUmVhY3RTb3J0Q2FyZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9KDAsdVtcImRlZmF1bHRcIl0pKFwib3JkZXJcIix7ZHJvcHVwOmU9PXNbXCJkZWZhdWx0XCJdLlNPUlRfQVNDfSk7cmV0dXJuIGlbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2NsYXNzTmFtZTp0fSxpW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtjbGFzc05hbWU6XCJjYXJldFwiLHN0eWxlOnttYXJnaW46XCIxMHB4IDVweFwifX0pKX0sZ2V0U2Nyb2xsQmFyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtlLnN0eWxlLndpZHRoPVwiMTAwJVwiLGUuc3R5bGUuaGVpZ2h0PVwiMjAwcHhcIjt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Quc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHQuc3R5bGUudG9wPVwiMHB4XCIsdC5zdHlsZS5sZWZ0PVwiMHB4XCIsdC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsdC5zdHlsZS53aWR0aD1cIjIwMHB4XCIsdC5zdHlsZS5oZWlnaHQ9XCIxNTBweFwiLHQuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIix0LmFwcGVuZENoaWxkKGUpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7dmFyIHI9ZS5vZmZzZXRXaWR0aDt0LnN0eWxlLm92ZXJmbG93PVwic2Nyb2xsXCI7dmFyIG49ZS5vZmZzZXRXaWR0aDtyZXR1cm4gcj09biYmKG49dC5jbGllbnRXaWR0aCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSxyLW59fSxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoMyksZD0obihjKSxyKDQpKSxwPShuKGQpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCkscyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLFwiY29uc3RydWN0b3JcIix0aGlzKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXt3aWR0aDpwYXJzZUludCh0aGlzLnByb3BzLndpZHRoKT90aGlzLnByb3BzLndpZHRoOjM1fTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRoXCIse3N0eWxlOmV9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidGgtaW5uZXIgdGFibGUtaGVhZGVyLWNvbHVtblwifSx0aGlzLnByb3BzLmNoaWxkcmVuKSl9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCkpO3RbXCJkZWZhdWx0XCJdPXAsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDQpLGQ9bihjKSxwPXIoNyksZj1uKHApLGg9cigxMCksdj1uKGgpLHk9cigxMSksbT1uKHkpLGc9cigxMiksYj1uKGcpLHc9cigzKSxFPW4odyksXz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZX0sUD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLnN0YXRlPXtjdXJyRWRpdENlbGw6bnVsbH0sdGhpcy5lZGl0aW5nPSExfXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiY29tcG9uZW50RGlkTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYWRqdXN0Qm9keSgpfX0se2tleTpcImNvbXBvbmVudERpZFVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGp1c3RCb2R5KCl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oMCxFW1wiZGVmYXVsdFwiXSkoXCJ0YWJsZS1jb250YWluZXJcIiksdD0oMCxFW1wiZGVmYXVsdFwiXSkoXCJ0YWJsZVwiLHtcInRhYmxlLXN0cmlwZWRcIjp0aGlzLnByb3BzLnN0cmlwZWQsXCJ0YWJsZS1ib3JkZXJlZFwiOnRoaXMucHJvcHMuYm9yZGVyZWQsXCJ0YWJsZS1ob3ZlclwiOnRoaXMucHJvcHMuaG92ZXIsXCJ0YWJsZS1jb25kZW5zZWRcIjp0aGlzLnByb3BzLmNvbmRlbnNlZH0pLHI9dGhpcy5faXNTZWxlY3RSb3dEZWZpbmVkKCksbj10aGlzLnJlbmRlclRhYmxlSGVhZGVyKHIpLG89dGhpcy5wcm9wcy5kYXRhLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMucHJvcHMuY29sdW1ucy5tYXAoZnVuY3Rpb24ocixuKXt2YXIgbz1lW3IubmFtZV07aWYodGhpcy5lZGl0aW5nJiZyLm5hbWUhPT10aGlzLnByb3BzLmtleUZpZWxkJiZyLmVkaXRhYmxlJiZudWxsIT10aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbCYmdGhpcy5zdGF0ZS5jdXJyRWRpdENlbGwucmlkPT10JiZ0aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbC5jaWQ9PW4pe3ZhciBpPXIuZm9ybWF0P2Z1bmN0aW9uKHQpe3JldHVybiByLmZvcm1hdCh0LGUpLnJlcGxhY2UoLzwuKj8+L2csXCJcIil9OiExO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGJbXCJkZWZhdWx0XCJdLHtjb21wbGV0ZUVkaXQ6dGhpcy5oYW5kbGVDb21wbGV0ZUVkaXRDZWxsLmJpbmQodGhpcyksZWRpdGFibGU6XyhyLmVkaXRhYmxlKT9yLmVkaXRhYmxlKG8sZSx0LG4pOnIuZWRpdGFibGUsZm9ybWF0OnIuZm9ybWF0P2k6ITEsa2V5Om4sYmx1clRvU2F2ZTp0aGlzLnByb3BzLmNlbGxFZGl0LmJsdXJUb1NhdmUscm93SW5kZXg6dCxjb2xJbmRleDpufSxvKX12YXIgYT1fKHIuY2xhc3NOYW1lKT9yLmNsYXNzTmFtZShvLGUsdCxuKTpyLmNsYXNzTmFtZTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygci5mb3JtYXQpe3ZhciBzPXIuZm9ybWF0KG8sZSk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmlzVmFsaWRFbGVtZW50KHMpfHwocz11W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MOntfX2h0bWw6c319KSksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChtW1wiZGVmYXVsdFwiXSx7ZGF0YUFsaWduOnIuYWxpZ24sa2V5Om4sY2xhc3NOYW1lOmEsY2VsbEVkaXQ6dGhpcy5wcm9wcy5jZWxsRWRpdCxvbkVkaXQ6dGhpcy5oYW5kbGVFZGl0Q2VsbC5iaW5kKHRoaXMpLHdpZHRoOnIud2lkdGh9LHMpfXJldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG1bXCJkZWZhdWx0XCJdLHtkYXRhQWxpZ246ci5hbGlnbixrZXk6bixjbGFzc05hbWU6YSxjZWxsRWRpdDp0aGlzLnByb3BzLmNlbGxFZGl0LGhpZGRlbjpyLmhpZGRlbixvbkVkaXQ6dGhpcy5oYW5kbGVFZGl0Q2VsbC5iaW5kKHRoaXMpLHdpZHRoOnIud2lkdGh9LG8pfSx0aGlzKSxvPS0xIT10aGlzLnByb3BzLnNlbGVjdGVkUm93S2V5cy5pbmRleE9mKGVbdGhpcy5wcm9wcy5rZXlGaWVsZF0pLGk9ciYmIXRoaXMucHJvcHMuc2VsZWN0Um93LmhpZGVTZWxlY3RDb2x1bW4/dGhpcy5yZW5kZXJTZWxlY3RSb3dDb2x1bW4obyk6bnVsbCxhPV8odGhpcy5wcm9wcy50ckNsYXNzTmFtZSk/dGhpcy5wcm9wcy50ckNsYXNzTmFtZShlLHQpOnRoaXMucHJvcHMudHJDbGFzc05hbWU7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQodltcImRlZmF1bHRcIl0se2lzU2VsZWN0ZWQ6byxrZXk6dCxjbGFzc05hbWU6YSxzZWxlY3RSb3c6cj90aGlzLnByb3BzLnNlbGVjdFJvdzp2b2lkIDAsZW5hYmxlQ2VsbEVkaXQ6dGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlIT09ZFtcImRlZmF1bHRcIl0uQ0VMTF9FRElUX05PTkUsb25Sb3dDbGljazp0aGlzLmhhbmRsZVJvd0NsaWNrLmJpbmQodGhpcyksb25TZWxlY3RSb3c6dGhpcy5oYW5kbGVTZWxlY3RSb3cuYmluZCh0aGlzKX0saSxuKX0sdGhpcyk7MD09PW8ubGVuZ3RoJiZvLnB1c2godVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh2W1wiZGVmYXVsdFwiXSx7a2V5OlwiIyN0YWJsZS1lbXB0eSMjXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtjb2xTcGFuOnRoaXMucHJvcHMuY29sdW1ucy5sZW5ndGgrKHI/MTowKSxzdHlsZTp7dGV4dEFsaWduOlwiY2VudGVyXCJ9fSx0aGlzLnByb3BzLm5vRGF0YVRleHR8fGRbXCJkZWZhdWx0XCJdLk5PX0RBVEFfVEVYVCkpKSx0aGlzLmVkaXRpbmc9ITE7dmFyIGk9dGhpcy5jYWxjdWxhdGVDb250YWluZXJIZWlnaHQoKS50b1N0cmluZygpO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3JlZjpcImNvbnRhaW5lclwiLGNsYXNzTmFtZTplLHN0eWxlOntoZWlnaHQ6aX19LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLHtyZWY6XCJib2R5XCIsY2xhc3NOYW1lOnR9LG4sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRib2R5XCIsbnVsbCxvKSkpfX0se2tleTpcInJlbmRlclRhYmxlSGVhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtpZihlKXt2YXIgcj17d2lkdGg6MzUsbWluV2lkdGg6MzV9O3Q9dGhpcy5wcm9wcy5zZWxlY3RSb3cuaGlkZVNlbGVjdENvbHVtbj9udWxsOnVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtzdHlsZTpyLGtleTotMX0pfXZhciBuPXRoaXMucHJvcHMuY29sdW1ucy5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsPT1lLndpZHRoP2Uud2lkdGg6cGFyc2VJbnQoZS53aWR0aCksbj17ZGlzcGxheTplLmhpZGRlbj9cIm5vbmVcIjpudWxsLHdpZHRoOnIsbWF4V2lkdGg6cn0sbz1lLnNvcnQ/ZltcImRlZmF1bHRcIl0ucmVuZGVyUmVhY3RTb3J0Q2FyZXQoZFtcImRlZmF1bHRcIl0uU09SVF9ERVNDKTpudWxsO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhcIix7c3R5bGU6bixrZXk6dCxjbGFzc05hbWU6ZS5jbGFzc05hbWV9LGUudGV4dCxvKX0pO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhlYWRcIix7cmVmOlwiaGVhZGVyXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0clwiLG51bGwsdCxuKSl9fSx7a2V5OlwiaGFuZGxlUm93Q2xpY2tcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMucHJvcHMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKG4sbyl7bz09ZS0xJiYodD1uW3RoaXMucHJvcHMua2V5RmllbGRdLHI9bil9LHRoaXMpLHRoaXMucHJvcHMub25Sb3dDbGljayhyKX19LHtrZXk6XCJoYW5kbGVTZWxlY3RSb3dcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByLG47dGhpcy5wcm9wcy5kYXRhLmZvckVhY2goZnVuY3Rpb24odCxvKXtvPT1lLTEmJihyPXRbdGhpcy5wcm9wcy5rZXlGaWVsZF0sbj10KX0sdGhpcyksdGhpcy5wcm9wcy5vblNlbGVjdFJvdyhuLHQpfX0se2tleTpcImhhbmRsZVNlbGVjdFJvd0NvbHVtQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdCYmdGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsfHx0aGlzLmhhbmRsZVNlbGVjdFJvdyhlLmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJvd0luZGV4LGUuY3VycmVudFRhcmdldC5jaGVja2VkKX19LHtrZXk6XCJoYW5kbGVFZGl0Q2VsbFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5lZGl0aW5nPSEwLHRoaXMuX2lzU2VsZWN0Um93RGVmaW5lZCgpJiYodC0tLHRoaXMucHJvcHMuc2VsZWN0Um93LmhpZGVTZWxlY3RDb2x1bW4mJnQrKyksZS0tO3ZhciByPXtjdXJyRWRpdENlbGw6e3JpZDplLGNpZDp0fX07aWYodGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdEFuZEVkaXRDZWxsKXt2YXIgbj0tMSE9dGhpcy5wcm9wcy5zZWxlY3RlZFJvd0tleXMuaW5kZXhPZih0aGlzLnByb3BzLmRhdGFbZV1bdGhpcy5wcm9wcy5rZXlGaWVsZF0pO3RoaXMuaGFuZGxlU2VsZWN0Um93KGUrMSwhbil9dGhpcy5zZXRTdGF0ZShyKX19LHtrZXk6XCJjYW5jZWxFZGl0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbDtlJiZ0aGlzLmhhbmRsZUNvbXBsZXRlRWRpdENlbGwobnVsbCxlLnJpZCxlLmNpZCl9fSx7a2V5OlwiaGFuZGxlQ29tcGxldGVFZGl0Q2VsbFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLnNldFN0YXRlKHtjdXJyRWRpdENlbGw6bnVsbH0pLG51bGwhPWUmJnRoaXMucHJvcHMuY2VsbEVkaXQuX19vbkNvbXBsZXRlRWRpdF9fKGUsdCxyKX19LHtrZXk6XCJyZW5kZXJTZWxlY3RSb3dDb2x1bW5cIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZT09ZFtcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9TSU5HTEU/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChtW1wiZGVmYXVsdFwiXSxudWxsLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHt0eXBlOlwicmFkaW9cIixuYW1lOlwic2VsZWN0aW9uXCIsY2hlY2tlZDplLG9uQ2hhbmdlOnRoaXMuaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2UuYmluZCh0aGlzKX0pKTp1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG1bXCJkZWZhdWx0XCJdLG51bGwsdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJjaGVja2JveFwiLGNoZWNrZWQ6ZSxvbkNoYW5nZTp0aGlzLmhhbmRsZVNlbGVjdFJvd0NvbHVtQ2hhbmdlLmJpbmQodGhpcyl9KSl9fSx7a2V5OlwiZ2V0Qm9keUhlYWRlckRvbVByb3BcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnJlZnMuaGVhZGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlcyx0PVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl0LnB1c2goe3dpZHRoOmVbcl0ub2Zmc2V0V2lkdGh9KTtyZXR1cm4gdH19LHtrZXk6XCJhZGp1c3RCb2R5XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhcmRGaXhIZWFkZXJXaWR0aCgpLHRoaXMucHJvcHMuY29uZGVuc2VkJiYodGhpcy5yZWZzLmJvZHkuc3R5bGUubWFyZ2luVG9wPVwiLTM2cHhcIiksdGhpcy5wcm9wcy5tYXhIZWlnaHQmJnBhcnNlSW50KHRoaXMucHJvcHMubWF4SGVpZ2h0KTx0aGlzLnJlZnMuY29udGFpbmVyLm9mZnNldEhlaWdodCYmKHRoaXMucmVmcy5jb250YWluZXIuc3R5bGUuaGVpZ2h0PXRoaXMucHJvcHMubWF4SGVpZ2h0LTQyK1wicHhcIil9fSx7a2V5OlwiaGFyZEZpeEhlYWRlcldpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5yZWZzLmhlYWRlci5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXMsdD0wO3Q8ZS5sZW5ndGg7dCsrKWVbdF0uc3R5bGUud2lkdGg9ZVt0XS5vZmZzZXRXaWR0aCtcInB4XCJ9fSx7a2V5OlwiY2FsY3VsYXRlQ29udGFpbmVySGVpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIjEwMCVcIj09dGhpcy5wcm9wcy5oZWlnaHQ/dGhpcy5wcm9wcy5oZWlnaHQ6cGFyc2VJbnQodGhpcy5wcm9wcy5oZWlnaHQpLTQyfX0se2tleTpcIl9pc1NlbGVjdFJvd0RlZmluZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlPT1kW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX1NJTkdMRXx8dGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZT09ZFtcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9NVUxUSX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtQLnByb3BUeXBlcz17aGVpZ2h0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsZGF0YTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksY29sdW1uczp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksc3RyaXBlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxib3JkZXJlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxob3Zlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjb25kZW5zZWQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsa2V5RmllbGQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxzZWxlY3RlZFJvd0tleXM6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFycmF5LG9uUm93Q2xpY2s6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25TZWxlY3RSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsbm9EYXRhVGV4dDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nfSx0W1wiZGVmYXVsdFwiXT1QLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbiBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG4pJiYoZVtuXT1yW25dKX1yZXR1cm4gZX0scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLGw9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LHU9cigyKSxjPW4odSksZD1yKDQpLHA9KG4oZCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSxsKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLHModCxbe2tleTpcInJvd0NsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7XCJJTlBVVFwiIT09ZS50YXJnZXQudGFnTmFtZSYmKHRoaXMucHJvcHMuc2VsZWN0Um93JiZ0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0JiZ0aGlzLnByb3BzLm9uU2VsZWN0Um93KGUuY3VycmVudFRhcmdldC5yb3dJbmRleCwhdGhpcy5wcm9wcy5pc1NlbGVjdGVkKSx0aGlzLnByb3BzLm9uUm93Q2xpY2smJnRoaXMucHJvcHMub25Sb3dDbGljayhlLmN1cnJlbnRUYXJnZXQucm93SW5kZXgpKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXtzdHlsZTp7YmFja2dyb3VuZENvbG9yOnRoaXMucHJvcHMuaXNTZWxlY3RlZD90aGlzLnByb3BzLnNlbGVjdFJvdy5iZ0NvbG9yOm51bGx9LGNsYXNzTmFtZToodGhpcy5wcm9wcy5pc1NlbGVjdGVkJiZ0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGFzc05hbWU/dGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xhc3NOYW1lOlwiXCIpKyh0aGlzLnByb3BzLmNsYXNzTmFtZXx8XCJcIil9O3JldHVybiB0aGlzLnByb3BzLnNlbGVjdFJvdyYmIXRoaXMucHJvcHMuZW5hYmxlQ2VsbEVkaXQmJih0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0fHx0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0QW5kRWRpdENlbGwpfHx0aGlzLnByb3BzLm9uUm93Q2xpY2s/Y1tcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRyXCIsYSh7fSxlLHtvbkNsaWNrOnRoaXMucm93Q2xpY2suYmluZCh0aGlzKX0pLHRoaXMucHJvcHMuY2hpbGRyZW4pOmNbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0clwiLGUsdGhpcy5wcm9wcy5jaGlsZHJlbil9fV0pLHR9KGNbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCkpO3AucHJvcFR5cGVzPXtpc1NlbGVjdGVkOmNbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGVuYWJsZUNlbGxFZGl0OmNbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLG9uUm93Q2xpY2s6Y1tcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25TZWxlY3RSb3c6Y1tcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmN9LHAuZGVmYXVsdFByb3BzPXtvblJvd0NsaWNrOnZvaWQgMH0sdFtcImRlZmF1bHRcIl09cCxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIG4gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmKGVbbl09cltuXSl9cmV0dXJuIGV9LHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxsPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSx1PXIoMiksYz1uKHUpLGQ9cig0KSxwPW4oZCksZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxsKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKX1yZXR1cm4gaSh0LGUpLHModCxbe2tleTpcImhhbmRsZUNlbGxFZGl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlPT1wW1wiZGVmYXVsdFwiXS5DRUxMX0VESVRfREJDTElDSylpZihkb2N1bWVudC5zZWxlY3Rpb24mJmRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSlkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTtlbHNlIGlmKHdpbmRvdy5nZXRTZWxlY3Rpb24pe3ZhciB0PXdpbmRvdy5nZXRTZWxlY3Rpb24oKTt0LnJlbW92ZUFsbFJhbmdlcygpfXRoaXMucHJvcHMub25FZGl0KGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnJvd0luZGV4LGUuY3VycmVudFRhcmdldC5jZWxsSW5kZXgpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bnVsbD09dGhpcy5wcm9wcy53aWR0aD90aGlzLnByb3BzLndpZHRoOnBhcnNlSW50KHRoaXMucHJvcHMud2lkdGgpLHQ9e3RleHRBbGlnbjp0aGlzLnByb3BzLmRhdGFBbGlnbixkaXNwbGF5OnRoaXMucHJvcHMuaGlkZGVuP1wibm9uZVwiOm51bGwsd2lkdGg6ZSxtYXhXaWR0aDplfSxyPXRoaXMucHJvcHMuY2xhc3NOYW1lO3RoaXMucHJvcHMud2lkdGgmJihyKz1cIiBjb2wtbWQtXCIrZSk7dmFyIG49e307cmV0dXJuIHRoaXMucHJvcHMuY2VsbEVkaXQmJih0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGU9PXBbXCJkZWZhdWx0XCJdLkNFTExfRURJVF9DTElDSz9uLm9uQ2xpY2s9dGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpOnRoaXMucHJvcHMuY2VsbEVkaXQubW9kZT09cFtcImRlZmF1bHRcIl0uQ0VMTF9FRElUX0RCQ0xJQ0smJihuLm9uRG91YmxlQ2xpY2s9dGhpcy5oYW5kbGVDZWxsRWRpdC5iaW5kKHRoaXMpKSksY1tcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRkXCIsYSh7c3R5bGU6dCxjbGFzc05hbWU6cn0sbiksdGhpcy5wcm9wcy5jaGlsZHJlbil9fV0pLHR9KGNbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7Zi5wcm9wVHlwZXM9e2RhdGFBbGlnbjpjW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGhpZGRlbjpjW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjbGFzc05hbWU6Y1tcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZ30sZi5kZWZhdWx0UHJvcHM9e2RhdGFBbGlnbjpcImxlZnRcIixoaWRkZW46ITEsY2xhc3NOYW1lOlwiXCJ9LHRbXCJkZWZhdWx0XCJdPWYsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDQpLGQ9KG4oYykscigxMykpLHA9bihkKSxmPXIoMTQpLGg9bihmKSx2PXIoMykseT1uKHYpLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtvKHRoaXMsdCkscyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLFwiY29uc3RydWN0b3JcIix0aGlzKS5jYWxsKHRoaXMsZSksdGhpcy50aW1lb3V0ZUNsZWFyPTAsdGhpcy5zdGF0ZT17c2hha2VFZGl0b3I6ITF9fXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiaGFuZGxlS2V5UHJlc3NcIix2YWx1ZTpmdW5jdGlvbihlKXtpZigxMz09ZS5rZXlDb2RlKXt2YXIgdD1cImNoZWNrYm94XCI9PWUuY3VycmVudFRhcmdldC50eXBlP3RoaXMuX2dldENoZWNrQm94VmFsdWUoZSk6ZS5jdXJyZW50VGFyZ2V0LnZhbHVlO2lmKCF0aGlzLnZhbGlkYXRvcih0KSlyZXR1cm47dGhpcy5wcm9wcy5jb21wbGV0ZUVkaXQodCx0aGlzLnByb3BzLnJvd0luZGV4LHRoaXMucHJvcHMuY29sSW5kZXgpfWVsc2UgMjc9PWUua2V5Q29kZSYmdGhpcy5wcm9wcy5jb21wbGV0ZUVkaXQobnVsbCx0aGlzLnByb3BzLnJvd0luZGV4LHRoaXMucHJvcHMuY29sSW5kZXgpfX0se2tleTpcImhhbmRsZUJsdXJcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLnByb3BzLmJsdXJUb1NhdmUpe3ZhciB0PVwiY2hlY2tib3hcIj09ZS5jdXJyZW50VGFyZ2V0LnR5cGU/dGhpcy5fZ2V0Q2hlY2tCb3hWYWx1ZShlKTplLmN1cnJlbnRUYXJnZXQudmFsdWU7aWYoIXRoaXMudmFsaWRhdG9yKHQpKXJldHVybjt0aGlzLnByb3BzLmNvbXBsZXRlRWRpdCh0LHRoaXMucHJvcHMucm93SW5kZXgsdGhpcy5wcm9wcy5jb2xJbmRleCl9fX0se2tleTpcInZhbGlkYXRvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodC5wcm9wcy5lZGl0YWJsZS52YWxpZGF0b3Ipe3ZhciByPXQucHJvcHMuZWRpdGFibGUudmFsaWRhdG9yKGUpO2lmKHIhPT0hMCl7dC5yZWZzLm5vdGlmaWVyLm5vdGljZShcImVycm9yXCIscixcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIik7dmFyIG49dC5yZWZzLmlucHV0UmVmO3JldHVybiB0LmNsZWFyVGltZW91dCgpLHQuc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiEwfSksdC50aW1lb3V0ZUNsZWFyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXRlKHtzaGFrZUVkaXRvcjohMX0pfSwzMDApLG4uZm9jdXMoKSwhMX19cmV0dXJuITB9fSx7a2V5OlwiY2xlYXJUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBlLnRvU3RyaW5nKCl9LHR9KGZ1bmN0aW9uKCl7MCE9dGhpcy50aW1lb3V0ZUNsZWFyJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dGVDbGVhciksdGhpcy50aW1lb3V0ZUNsZWFyPTApfSl9LHtrZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWZzLmlucHV0UmVmO2UuZm9jdXMoKX19LHtrZXk6XCJjb21wb25lbnRXaWxsVW5tb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRpbWVvdXQoKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMuZWRpdGFibGUsdD10aGlzLnByb3BzLmZvcm1hdCxyPXtyZWY6XCJpbnB1dFJlZlwiLG9uS2V5RG93bjp0aGlzLmhhbmRsZUtleVByZXNzLmJpbmQodGhpcyksb25CbHVyOnRoaXMuaGFuZGxlQmx1ci5iaW5kKHRoaXMpfTtlLnBsYWNlaG9sZGVyJiYoci5wbGFjZWhvbGRlcj1lLnBsYWNlaG9sZGVyKTt2YXIgbj0oMCx5W1wiZGVmYXVsdFwiXSkoe2FuaW1hdGVkOnRoaXMuc3RhdGUuc2hha2VFZGl0b3Isc2hha2U6dGhpcy5zdGF0ZS5zaGFrZUVkaXRvcn0pO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGRcIix7cmVmOlwidGRcIixzdHlsZTp7cG9zaXRpb246XCJyZWxhdGl2ZVwifX0sKDAscFtcImRlZmF1bHRcIl0pKGUscix0LG4sdGhpcy5wcm9wcy5jaGlsZHJlbnx8XCJcIiksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChoW1wiZGVmYXVsdFwiXSx7cmVmOlwibm90aWZpZXJcIn0pKX19LHtrZXk6XCJfZ2V0Q2hlY2tCb3hWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIscj1lLmN1cnJlbnRUYXJnZXQudmFsdWUuc3BsaXQoXCI6XCIpO3JldHVybiB0PWUuY3VycmVudFRhcmdldC5jaGVja2VkP3JbMF06clsxXX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KTttLnByb3BUeXBlcz17Y29tcGxldGVFZGl0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLHJvd0luZGV4OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsY29sSW5kZXg6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixibHVyVG9TYXZlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sfSx0W1wiZGVmYXVsdFwiXT1tLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBuIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJihlW25dPXJbbl0pfXJldHVybiBlfSxpPXIoMiksYT1uKGkpLHM9ZnVuY3Rpb24oZSx0LHIsbixpKXtpZihlPT09ITB8fFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgcz1lPT09ITA/XCJ0ZXh0XCI6ZTtyZXR1cm4gYVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIsbyh7fSx0LHt0eXBlOnMsZGVmYXVsdFZhbHVlOmksY2xhc3NOYW1lOihufHxcIlwiKStcIiBmb3JtLWNvbnRyb2wgZWRpdG9yIGVkaXQtdGV4dFwifSkpfWlmKCFlKXt2YXIgcz1lPT09ITA/XCJ0ZXh0XCI6ZTtyZXR1cm4gYVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIsbyh7fSx0LHt0eXBlOnMsZGVmYXVsdFZhbHVlOmksZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLGNsYXNzTmFtZToobnx8XCJcIikrXCIgZm9ybS1jb250cm9sIGVkaXRvciBlZGl0LXRleHRcIn0pKX1pZihlLnR5cGUpe2lmKGUuc3R5bGUmJih0LnN0eWxlPWUuc3R5bGUpLHQuY2xhc3NOYW1lPShufHxcIlwiKStcIiBmb3JtLWNvbnRyb2wgZWRpdG9yIGVkaXQtXCIrZS50eXBlKyhlLmNsYXNzTmFtZT9cIiBcIitlLmNsYXNzTmFtZTpcIlwiKSxcInNlbGVjdFwiPT09ZS50eXBlKXt2YXIgbD1bXSx1PWUub3B0aW9ucy52YWx1ZXM7aWYoQXJyYXkuaXNBcnJheSh1KSl7dmFyIGM7bD11Lm1hcChmdW5jdGlvbihlLHQpe3JldHVybiBjPXI/cihlKTplLGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIix7a2V5Olwib3B0aW9uXCIrdCx2YWx1ZTplfSxjKX0pfXJldHVybiBhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsbyh7fSx0LHtkZWZhdWx0VmFsdWU6aX0pLGwpfWlmKFwidGV4dGFyZWFcIj09PWUudHlwZSl7ZS5jb2xzJiYodC5jb2xzPWUuY29scyksZS5yb3dzJiYodC5yb3dzPWUucm93cyk7dmFyIGQ9dC5vbktleURvd24scD1udWxsO3JldHVybiBkJiYodC5vbktleURvd249ZnVuY3Rpb24oZSl7MTMhPWUua2V5Q29kZSYmZChlKX0scD1hW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1pbmZvIGJ0bi14cyB0ZXh0YXJlYS1zYXZlLWJ0blwiLG9uQ2xpY2s6ZH0sXCJzYXZlXCIpKSxhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbnVsbCxhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIixvKHt9LHQse2RlZmF1bHRWYWx1ZTppfSkpLHApfWlmKFwiY2hlY2tib3hcIj09PWUudHlwZSl7dmFyIGY9XCJ0cnVlOmZhbHNlXCI7ZS5vcHRpb25zJiZlLm9wdGlvbnMudmFsdWVzJiYoZj1lLm9wdGlvbnMudmFsdWVzKSx0LmNsYXNzTmFtZT10LmNsYXNzTmFtZS5yZXBsYWNlKFwiZm9ybS1jb250cm9sXCIsXCJcIiksdC5jbGFzc05hbWUrPVwiIGNoZWNrYm94IHB1bGwtcmlnaHRcIjt2YXIgaD1pJiZpLnRvU3RyaW5nKCk9PWYuc3BsaXQoXCI6XCIpWzBdPyEwOiExO3JldHVybiBhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIixvKHt9LHQse3R5cGU6XCJjaGVja2JveFwiLHZhbHVlOmYsZGVmYXVsdENoZWNrZWQ6aH0pKX1yZXR1cm4gYVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIsbyh7fSx0LHt0eXBlOnMsZGVmYXVsdFZhbHVlOml9KSl9cmV0dXJuIGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLG8oe30sdCx7dHlwZTpcInRleHRcIixjbGFzc05hbWU6KG58fFwiXCIpK1wiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC10ZXh0XCJ9KSl9O3RbXCJkZWZhdWx0XCJdPXMsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDQpLGQ9KG4oYykscigxNSkpLHA9bihkKSxmPXBbXCJkZWZhdWx0XCJdLlRvYXN0Q29udGFpbmVyLGg9dVtcImRlZmF1bHRcIl0uY3JlYXRlRmFjdG9yeShwW1wiZGVmYXVsdFwiXS5Ub2FzdE1lc3NhZ2UuYW5pbWF0aW9uKSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCkscyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLFwiY29uc3RydWN0b3JcIix0aGlzKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJub3RpY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dGhpcy5yZWZzLnRvYXN0cltlXSh0LHIse21vZGU6XCJzaW5nbGVcIix0aW1lT3V0OjVlMyxleHRlbmRlZFRpbWVPdXQ6MWUzLHNob3dBbmltYXRpb246XCJhbmltYXRlZCAgYm91bmNlSW5cIixoaWRlQW5pbWF0aW9uOlwiYW5pbWF0ZWQgYm91bmNlT3V0XCJ9KX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGYse3JlZjpcInRvYXN0clwiLHRvYXN0TWVzc2FnZUZhY3Rvcnk6aCxpZDpcInRvYXN0LWNvbnRhaW5lclwiLGNsYXNzTmFtZTpcInRvYXN0LXRvcC1yaWdodFwifSl9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7dFtcImRlZmF1bHRcIl09dixlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0LlRvYXN0Q29udGFpbmVyPXIoMTYpLHQuVG9hc3RNZXNzYWdlPXIoMjMpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe312YXIgbz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBuIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJihlW25dPXJbbl0pfXJldHVybiBlfSxpPXIoMiksYT1yKDE3KSxzPWkuY3JlYXRlRmFjdG9yeShyKDIzKSk7ZS5leHBvcnRzPWkuY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOlwiVG9hc3RDb250YWluZXJcIixlcnJvcjpmdW5jdGlvbihlLHQscil7dGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLmVycm9yLGUsdCxyKX0saW5mbzpmdW5jdGlvbihlLHQscil7dGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLmluZm8sZSx0LHIpfSxzdWNjZXNzOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9ub3RpZnkodGhpcy5wcm9wcy50b2FzdFR5cGUuc3VjY2VzcyxlLHQscil9LHdhcm5pbmc6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS53YXJuaW5nLGUsdCxyKX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMucmVmcztmb3IoZSBpbiB0KXRbZV0uaGlkZVRvYXN0KCExKX0sZ2V0RGVmYXVsdFByb3BzOmZ1bmN0aW9uKCl7cmV0dXJue3RvYXN0VHlwZTp7ZXJyb3I6XCJlcnJvclwiLGluZm86XCJpbmZvXCIsc3VjY2VzczpcInN1Y2Nlc3NcIix3YXJuaW5nOlwid2FybmluZ1wifSxpZDpcInRvYXN0LWNvbnRhaW5lclwiLHRvYXN0TWVzc2FnZUZhY3Rvcnk6cyxwcmV2ZW50RHVwbGljYXRlczohMSxuZXdlc3RPblRvcDohMCxvbkNsaWNrOm59fSxnZXRJbml0aWFsU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm57dG9hc3RzOltdLHRvYXN0SWQ6MCxwcmV2aW91c01lc3NhZ2U6bnVsbH19LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXIodGhpcy5wcm9wcyx0aGlzLnN0YXRlKX0sX25vdGlmeTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg8PTN8fHZvaWQgMD09PWFyZ3VtZW50c1szXT97fTphcmd1bWVudHNbM10saT10aGlzLnByb3BzLHM9dGhpcy5zdGF0ZTtpZighaS5wcmV2ZW50RHVwbGljYXRlc3x8cy5wcmV2aW91c01lc3NhZ2UhPT10KXt2YXIgbD1zLnRvYXN0SWQrKyx1PWwsYz1hKG8seyRtZXJnZTp7dHlwZTplLHRpdGxlOnIsbWVzc2FnZTp0LHRvYXN0SWQ6dSxrZXk6bCxyZWY6XCJ0b2FzdHNfX1wiK2wsaGFuZGxlT25DbGljazpmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvLmhhbmRsZU9uQ2xpY2smJm8uaGFuZGxlT25DbGljaygpLG4uX2hhbmRsZV90b2FzdF9vbl9jbGljayhlKX0saGFuZGxlUmVtb3ZlOnRoaXMuX2hhbmRsZV90b2FzdF9yZW1vdmV9fSksZD17fTtkW1wiXCIrKGkubmV3ZXN0T25Ub3A/XCIkdW5zaGlmdFwiOlwiJHB1c2hcIildPVtjXTt2YXIgcD1hKHMse3RvYXN0czpkLHByZXZpb3VzTWVzc2FnZTp7JHNldDp0fX0pO3RoaXMuc2V0U3RhdGUocCl9fSxfaGFuZGxlX3RvYXN0X29uX2NsaWNrOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMub25DbGljayhlKSxlLmRlZmF1bHRQcmV2ZW50ZWR8fChlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSl9LF9oYW5kbGVfdG9hc3RfcmVtb3ZlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLnN0YXRlO3IudG9hc3RzW1wiXCIrKHRoaXMucHJvcHMubmV3ZXN0T25Ub3A/XCJyZWR1Y2VSaWdodFwiOlwicmVkdWNlXCIpXShmdW5jdGlvbihuLG8saSl7cmV0dXJuIG58fG8udG9hc3RJZCE9PWU/ITE6KHQuc2V0U3RhdGUoYShyLHt0b2FzdHM6eyRzcGxpY2U6W1tpLDFdXX19KSksITApfSwhMSl9LF9yZW5kZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsbyh7fSxlLHtcImFyaWEtbGl2ZVwiOlwicG9saXRlXCIscm9sZTpcImFsZXJ0XCJ9KSx0LnRvYXN0cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUudG9hc3RNZXNzYWdlRmFjdG9yeSh0KX0pKX19KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDE4KX0sZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2UuY29uY2F0KCk6ZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/YShuZXcgZS5jb25zdHJ1Y3RvcixlKTplfWZ1bmN0aW9uIG8oZSxyLG4pe0FycmF5LmlzQXJyYXkoZSk/dm9pZCAwOlwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiBleHBlY3RlZCB0YXJnZXQgb2YgJXMgdG8gYmUgYW4gYXJyYXk7IGdvdCAlcy5cIixuLGUpOmwoITEpO3ZhciBvPXJbbl07QXJyYXkuaXNBcnJheShvKT92b2lkIDA6XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwidXBkYXRlKCk6IGV4cGVjdGVkIHNwZWMgb2YgJXMgdG8gYmUgYW4gYXJyYXk7IGdvdCAlcy4gRGlkIHlvdSBmb3JnZXQgdG8gd3JhcCB5b3VyIHBhcmFtZXRlciBpbiBhbiBhcnJheT9cIixuLG8pOmwoITEpfWZ1bmN0aW9uIGkoZSxyKXtpZihcIm9iamVjdFwiIT10eXBlb2Ygcj9cInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogWW91IHByb3ZpZGVkIGEga2V5IHBhdGggdG8gdXBkYXRlKCkgdGhhdCBkaWQgbm90IGNvbnRhaW4gb25lIG9mICVzLiBEaWQgeW91IGZvcmdldCB0byBpbmNsdWRlIHslczogLi4ufT9cIix5LmpvaW4oXCIsIFwiKSxmKTpsKCExKTp2b2lkIDAsdS5jYWxsKHIsZikpcmV0dXJuIDEhPT1PYmplY3Qua2V5cyhyKS5sZW5ndGg/XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwiQ2Fubm90IGhhdmUgbW9yZSB0aGFuIG9uZSBrZXkgaW4gYW4gb2JqZWN0IHdpdGggJXNcIixmKTpsKCExKTp2b2lkIDAscltmXTt2YXIgcz1uKGUpO2lmKHUuY2FsbChyLGgpKXt2YXIgZz1yW2hdO2cmJlwib2JqZWN0XCI9PXR5cGVvZiBnP3ZvaWQgMDpcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogJXMgZXhwZWN0cyBhIHNwZWMgb2YgdHlwZSAnb2JqZWN0JzsgZ290ICVzXCIsaCxnKTpsKCExKSxzJiZcIm9iamVjdFwiPT10eXBlb2Ygcz92b2lkIDA6XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwidXBkYXRlKCk6ICVzIGV4cGVjdHMgYSB0YXJnZXQgb2YgdHlwZSAnb2JqZWN0JzsgZ290ICVzXCIsaCxzKTpsKCExKSxcbmEocyxyW2hdKX11LmNhbGwocixjKSYmKG8oZSxyLGMpLHJbY10uZm9yRWFjaChmdW5jdGlvbihlKXtzLnB1c2goZSl9KSksdS5jYWxsKHIsZCkmJihvKGUscixkKSxyW2RdLmZvckVhY2goZnVuY3Rpb24oZSl7cy51bnNoaWZ0KGUpfSkpLHUuY2FsbChyLHApJiYoQXJyYXkuaXNBcnJheShlKT92b2lkIDA6XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwiRXhwZWN0ZWQgJXMgdGFyZ2V0IHRvIGJlIGFuIGFycmF5OyBnb3QgJXNcIixwLGUpOmwoITEpLEFycmF5LmlzQXJyYXkocltwXSk/dm9pZCAwOlwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiBleHBlY3RlZCBzcGVjIG9mICVzIHRvIGJlIGFuIGFycmF5IG9mIGFycmF5czsgZ290ICVzLiBEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVycyBpbiBhbiBhcnJheT9cIixwLHJbcF0pOmwoITEpLHJbcF0uZm9yRWFjaChmdW5jdGlvbihlKXtBcnJheS5pc0FycmF5KGUpP3ZvaWQgMDpcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheSBvZiBhcnJheXM7IGdvdCAlcy4gRGlkIHlvdSBmb3JnZXQgdG8gd3JhcCB5b3VyIHBhcmFtZXRlcnMgaW4gYW4gYXJyYXk/XCIscCxyW3BdKTpsKCExKSxzLnNwbGljZS5hcHBseShzLGUpfSkpLHUuY2FsbChyLHYpJiYoXCJmdW5jdGlvblwiIT10eXBlb2Ygclt2XT9cInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhIGZ1bmN0aW9uOyBnb3QgJXMuXCIsdixyW3ZdKTpsKCExKTp2b2lkIDAscz1yW3ZdKHMpKTtmb3IodmFyIGIgaW4gciltLmhhc093blByb3BlcnR5KGIpJiZtW2JdfHwoc1tiXT1pKGVbYl0scltiXSkpO3JldHVybiBzfXZhciBhPXIoMjApLHM9cigyMSksbD1yKDIyKSx1PXt9Lmhhc093blByb3BlcnR5LGM9cyh7JHB1c2g6bnVsbH0pLGQ9cyh7JHVuc2hpZnQ6bnVsbH0pLHA9cyh7JHNwbGljZTpudWxsfSksZj1zKHskc2V0Om51bGx9KSxoPXMoeyRtZXJnZTpudWxsfSksdj1zKHskYXBwbHk6bnVsbH0pLHk9W2MsZCxwLGYsaCx2XSxtPXt9O3kuZm9yRWFjaChmdW5jdGlvbihlKXttW2VdPSEwfSksZS5leHBvcnRzPWl9KS5jYWxsKHQscigxOSkpfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt1PSExLGEubGVuZ3RoP2w9YS5jb25jYXQobCk6Yz0tMSxsLmxlbmd0aCYmbigpfWZ1bmN0aW9uIG4oKXtpZighdSl7dmFyIGU9c2V0VGltZW91dChyKTt1PSEwO2Zvcih2YXIgdD1sLmxlbmd0aDt0Oyl7Zm9yKGE9bCxsPVtdOysrYzx0OylhJiZhW2NdLnJ1bigpO2M9LTEsdD1sLmxlbmd0aH1hPW51bGwsdT0hMSxjbGVhclRpbWVvdXQoZSl9fWZ1bmN0aW9uIG8oZSx0KXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9dH1mdW5jdGlvbiBpKCl7fXZhciBhLHM9ZS5leHBvcnRzPXt9LGw9W10sdT0hMSxjPS0xO3MubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTtsLnB1c2gobmV3IG8oZSx0KSksMSE9PWwubGVuZ3RofHx1fHxzZXRUaW1lb3V0KG4sMCl9LG8ucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LHMudGl0bGU9XCJicm93c2VyXCIscy5icm93c2VyPSEwLHMuZW52PXt9LHMuYXJndj1bXSxzLnZlcnNpb249XCJcIixzLnZlcnNpb25zPXt9LHMub249aSxzLmFkZExpc3RlbmVyPWkscy5vbmNlPWkscy5vZmY9aSxzLnJlbW92ZUxpc3RlbmVyPWkscy5yZW1vdmVBbGxMaXN0ZW5lcnM9aSxzLmVtaXQ9aSxzLmJpbmRpbmc9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHMuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LHMuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxzLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSx0KXtpZihudWxsPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QuYXNzaWduIHRhcmdldCBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWRcIik7Zm9yKHZhciByPU9iamVjdChlKSxuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbz0xO288YXJndW1lbnRzLmxlbmd0aDtvKyspe3ZhciBpPWFyZ3VtZW50c1tvXTtpZihudWxsIT1pKXt2YXIgYT1PYmplY3QoaSk7Zm9yKHZhciBzIGluIGEpbi5jYWxsKGEscykmJihyW3NdPWFbc10pfX1yZXR1cm4gcn1lLmV4cG9ydHM9cn0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIHQ7cmV0dXJuIG51bGx9O2UuZXhwb3J0cz1yfSxmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSxyLG4sbyxpLGEscyxsKXtpZihcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WJiZ2b2lkIDA9PT1yKXRocm93IG5ldyBFcnJvcihcImludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50XCIpO2lmKCFlKXt2YXIgdTtpZih2b2lkIDA9PT1yKXU9bmV3IEVycm9yKFwiTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy5cIik7ZWxzZXt2YXIgYz1bbixvLGksYSxzLGxdLGQ9MDt1PW5ldyBFcnJvcihyLnJlcGxhY2UoLyVzL2csZnVuY3Rpb24oKXtyZXR1cm4gY1tkKytdfSkpLHUubmFtZT1cIkludmFyaWFudCBWaW9sYXRpb25cIn10aHJvdyB1LmZyYW1lc1RvUG9wPTEsdX19ZS5leHBvcnRzPXJ9KS5jYWxsKHQscigxOSkpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbigpe312YXIgbz1yKDIpLGk9cigxNyksYT1yKDMpLHM9e2Rpc3BsYXlOYW1lOlwiVG9hc3RNZXNzYWdlXCIsZ2V0RGVmYXVsdFByb3BzOmZ1bmN0aW9uKCl7dmFyIGU9e2Vycm9yOlwidG9hc3QtZXJyb3JcIixpbmZvOlwidG9hc3QtaW5mb1wiLHN1Y2Nlc3M6XCJ0b2FzdC1zdWNjZXNzXCIsd2FybmluZzpcInRvYXN0LXdhcm5pbmdcIn07cmV0dXJue2NsYXNzTmFtZTpcInRvYXN0XCIsaWNvbkNsYXNzTmFtZXM6ZSx0aXRsZUNsYXNzTmFtZTpcInRvYXN0LXRpdGxlXCIsbWVzc2FnZUNsYXNzTmFtZTpcInRvYXN0LW1lc3NhZ2VcIix0YXBUb0Rpc21pc3M6ITAsY2xvc2VCdXR0b246ITF9fSxoYW5kbGVPbkNsaWNrOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJvcHM7dC5oYW5kbGVPbkNsaWNrKGUpLHQudGFwVG9EaXNtaXNzJiZ0aGlzLmhpZGVUb2FzdCghMCl9LF9oYW5kbGVfY2xvc2VfYnV0dG9uX2NsaWNrOmZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5oaWRlVG9hc3QoITApfSxfaGFuZGxlX3JlbW92ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7ZS5oYW5kbGVSZW1vdmUoZS50b2FzdElkKX0sX3JlbmRlcl9jbG9zZV9idXR0b246ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xvc2VCdXR0b24/by5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse2NsYXNzTmFtZTpcInRvYXN0LWNsb3NlLWJ1dHRvblwiLHJvbGU6XCJidXR0b25cIixvbkNsaWNrOnRoaXMuX2hhbmRsZV9jbG9zZV9idXR0b25fY2xpY2ssZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDpcIiZ0aW1lcztcIn19KTohMX0sX3JlbmRlcl90aXRsZV9lbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLnRpdGxlP28uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6ZS50aXRsZUNsYXNzTmFtZX0sZS50aXRsZSk6ITF9LF9yZW5kZXJfbWVzc2FnZV9lbGVtZW50OmZ1bmN0aW9uKGUpe3JldHVybiBlLm1lc3NhZ2U/by5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTplLm1lc3NhZ2VDbGFzc05hbWV9LGUubWVzc2FnZSk6ITF9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMsdD1lLmljb25DbGFzc05hbWV8fGUuaWNvbkNsYXNzTmFtZXNbZS50eXBlXSxyPXt9O3JldHVybiByW2UuY2xhc3NOYW1lXT0hMCxyW3RdPSEwLG8uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6YShyKSxzdHlsZTplLnN0eWxlfHx7fSxvbkNsaWNrOnRoaXMuaGFuZGxlT25DbGljayxvbk1vdXNlRW50ZXI6dGhpcy5oYW5kbGVNb3VzZUVudGVyLG9uTW91c2VMZWF2ZTp0aGlzLmhhbmRsZU1vdXNlTGVhdmV9LHRoaXMuX3JlbmRlcl9jbG9zZV9idXR0b24oZSksdGhpcy5fcmVuZGVyX3RpdGxlX2VsZW1lbnQoZSksdGhpcy5fcmVuZGVyX21lc3NhZ2VfZWxlbWVudChlKSl9fSxsPW8uY3JlYXRlQ2xhc3MoaShzLHtkaXNwbGF5TmFtZTp7JHNldDpcIlRvYXN0TWVzc2FnZS5hbmltYXRpb25cIn0sbWl4aW5zOnskc2V0OltyKDI0KV19fSkpLHU9by5jcmVhdGVDbGFzcyhpKHMse2Rpc3BsYXlOYW1lOnskc2V0OlwiVG9hc3RNZXNzYWdlLmpRdWVyeVwifSxtaXhpbnM6eyRzZXQ6W3IoMjkpXX19KSk7cy5oYW5kbGVNb3VzZUVudGVyPW4scy5oYW5kbGVNb3VzZUxlYXZlPW4scy5oaWRlVG9hc3Q9bjt2YXIgYz1lLmV4cG9ydHM9by5jcmVhdGVDbGFzcyhzKTtjLmFuaW1hdGlvbj1sLGMualF1ZXJ5PXV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDI1KSxvPXIoMjcpLGk9cig2KSxhPTE3LHM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztlLmV4cG9ydHM9e2dldERlZmF1bHRQcm9wczpmdW5jdGlvbigpe3JldHVybnt0cmFuc2l0aW9uOm51bGwsc2hvd0FuaW1hdGlvbjpcImFuaW1hdGVkIGJvdW5jZUluXCIsaGlkZUFuaW1hdGlvbjpcImFuaW1hdGVkIGJvdW5jZU91dFwiLHRpbWVPdXQ6NWUzLGV4dGVuZGVkVGltZU91dDoxZTN9fSxjb21wb25lbnRXaWxsTW91bnQ6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTmFtZVF1ZXVlPVtdLHRoaXMuaXNIaWRpbmc9ITEsdGhpcy5pbnRlcnZhbElkPW51bGx9LGNvbXBvbmVudERpZE1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMucHJvcHM7dGhpcy5fc2hvdyh0KTt2YXIgcj1mdW5jdGlvbiBhKCl7ZS5pc0hpZGluZyYmKGUuX3NldF9pc19oaWRpbmcoITEpLG8ucmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcihuLGEpLGUuX2hhbmRsZV9yZW1vdmUoKSl9LG49aS5maW5kRE9NTm9kZSh0aGlzKTtvLmFkZEVuZEV2ZW50TGlzdGVuZXIobixyKSwwPHQudGltZU91dCYmdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsdC50aW1lT3V0KSl9LGNvbXBvbmVudFdpbGxVbm1vdW50OmZ1bmN0aW9uKCl7dGhpcy5pbnRlcnZhbElkJiZjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbElkKX0sX3NldF90cmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PWU/XCJsZWF2ZVwiOlwiZW50ZXJcIixyPWkuZmluZERPTU5vZGUodGhpcyksYT10aGlzLnByb3BzLnRyYW5zaXRpb24rXCItXCIrdCxzPWErXCItYWN0aXZlXCIsbD1mdW5jdGlvbiB1KGUpe2UmJmUudGFyZ2V0IT09cnx8KG4ucmVtb3ZlQ2xhc3MocixhKSxuLnJlbW92ZUNsYXNzKHIscyksby5yZW1vdmVFbmRFdmVudExpc3RlbmVyKHIsdSkpfTtvLmFkZEVuZEV2ZW50TGlzdGVuZXIocixsKSxuLmFkZENsYXNzKHIsYSksdGhpcy5fcXVldWVfY2xhc3Mocyl9LF9jbGVhcl90cmFuc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PWkuZmluZERPTU5vZGUodGhpcykscj1lP1wibGVhdmVcIjpcImVudGVyXCIsbz10aGlzLnByb3BzLnRyYW5zaXRpb24rXCItXCIrcixhPW8rXCItYWN0aXZlXCI7bi5yZW1vdmVDbGFzcyh0LG8pLG4ucmVtb3ZlQ2xhc3ModCxhKX0sX3NldF9hbmltYXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9aS5maW5kRE9NTm9kZSh0aGlzKSxyPXRoaXMuX2dldF9hbmltYXRpb25fY2xhc3NlcyhlKSxhPWZ1bmN0aW9uIHMoZSl7ZSYmZS50YXJnZXQhPT10fHwoci5mb3JFYWNoKGZ1bmN0aW9uKGUpe24ucmVtb3ZlQ2xhc3ModCxlKX0pLG8ucmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcih0LHMpKX07by5hZGRFbmRFdmVudExpc3RlbmVyKHQsYSksci5mb3JFYWNoKGZ1bmN0aW9uKGUpe24uYWRkQ2xhc3ModCxlKX0pfSxfZ2V0X2FuaW1hdGlvbl9jbGFzc2VzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJvcHMscj1lP3QuaGlkZUFuaW1hdGlvbjp0LnNob3dBbmltYXRpb247cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09cy5jYWxsKHIpP3I6XCJzdHJpbmdcIj09dHlwZW9mIHI/ci5zcGxpdChcIiBcIik6dm9pZCAwfSxfY2xlYXJfYW5pbWF0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLl9nZXRfYW5pbWF0aW9uX2NsYXNzZXMoZSk7ci5mb3JFYWNoKGZ1bmN0aW9uKGUpe24ucmVtb3ZlQ2xhc3MoaS5maW5kRE9NTm9kZSh0KSxlKX0pfSxfcXVldWVfY2xhc3M6ZnVuY3Rpb24oZSl7dGhpcy5jbGFzc05hbWVRdWV1ZS5wdXNoKGUpLHRoaXMudGltZW91dHx8KHRoaXMudGltZW91dD1zZXRUaW1lb3V0KHRoaXMuX2ZsdXNoX2NsYXNzX25hbWVfcXVldWUsYSkpfSxfZmx1c2hfY2xhc3NfbmFtZV9xdWV1ZTpmdW5jdGlvbigpe3RoaXMuaXNNb3VudGVkKCkmJnRoaXMuY2xhc3NOYW1lUXVldWUuZm9yRWFjaChuLmFkZENsYXNzLmJpbmQobixpLmZpbmRET01Ob2RlKHRoaXMpKSksdGhpcy5jbGFzc05hbWVRdWV1ZS5sZW5ndGg9MCx0aGlzLnRpbWVvdXQ9bnVsbH0sX3Nob3c6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzO2UudHJhbnNpdGlvbj90aGlzLl9zZXRfdHJhbnNpdGlvbigpOmUuc2hvd0FuaW1hdGlvbiYmdGhpcy5fc2V0X2FuaW1hdGlvbigpfSxoYW5kbGVNb3VzZUVudGVyOmZ1bmN0aW9uKCl7aWYoY2xlYXJUaW1lb3V0KHRoaXMuaW50ZXJ2YWxJZCksdGhpcy5fc2V0X2ludGVydmFsX2lkKG51bGwpLHRoaXMuaXNIaWRpbmcpe3RoaXMuX3NldF9pc19oaWRpbmcoITEpO3ZhciBlPXRoaXMucHJvcHM7ZS5oaWRlQW5pbWF0aW9uP3RoaXMuX2NsZWFyX2FuaW1hdGlvbighMCk6ZS50cmFuc2l0aW9uJiZ0aGlzLl9jbGVhcl90cmFuc2l0aW9uKCEwKX19LGhhbmRsZU1vdXNlTGVhdmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzOyF0aGlzLmlzSGlkaW5nJiYoMDxlLnRpbWVPdXR8fDA8ZS5leHRlbmRlZFRpbWVPdXQpJiZ0aGlzLl9zZXRfaW50ZXJ2YWxfaWQoc2V0VGltZW91dCh0aGlzLmhpZGVUb2FzdCxlLmV4dGVuZGVkVGltZU91dCkpfSxoaWRlVG9hc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm9wczt0aGlzLmlzSGlkaW5nfHxudWxsPT10aGlzLmludGVydmFsSWQmJiFlfHwodGhpcy5fc2V0X2lzX2hpZGluZyghMCksdC50cmFuc2l0aW9uP3RoaXMuX3NldF90cmFuc2l0aW9uKCEwKTp0LmhpZGVBbmltYXRpb24/dGhpcy5fc2V0X2FuaW1hdGlvbighMCk6dGhpcy5faGFuZGxlX3JlbW92ZSgpKX0sX3NldF9pbnRlcnZhbF9pZDpmdW5jdGlvbihlKXt0aGlzLmludGVydmFsSWQ9ZX0sX3NldF9pc19oaWRpbmc6ZnVuY3Rpb24oZSl7dGhpcy5pc0hpZGluZz1lfX19LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigyNiksbz17YWRkQ2xhc3M6ZnVuY3Rpb24oZSxyKXtyZXR1cm4vXFxzLy50ZXN0KHIpP1wicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bighMSwnQ1NTQ29yZS5hZGRDbGFzcyB0YWtlcyBvbmx5IGEgc2luZ2xlIGNsYXNzIG5hbWUuIFwiJXNcIiBjb250YWlucyBtdWx0aXBsZSBjbGFzc2VzLicscik6bighMSk6dm9pZCAwLHImJihlLmNsYXNzTGlzdD9lLmNsYXNzTGlzdC5hZGQocik6by5oYXNDbGFzcyhlLHIpfHwoZS5jbGFzc05hbWU9ZS5jbGFzc05hbWUrXCIgXCIrcikpLGV9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUscil7cmV0dXJuL1xccy8udGVzdChyKT9cInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP24oITEsJ0NTU0NvcmUucmVtb3ZlQ2xhc3MgdGFrZXMgb25seSBhIHNpbmdsZSBjbGFzcyBuYW1lLiBcIiVzXCIgY29udGFpbnMgbXVsdGlwbGUgY2xhc3Nlcy4nLHIpOm4oITEpOnZvaWQgMCxyJiYoZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QucmVtb3ZlKHIpOm8uaGFzQ2xhc3MoZSxyKSYmKGUuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK3IrXCIoPzpcXFxcc3wkKVwiLFwiZ1wiKSxcIiQxXCIpLnJlcGxhY2UoL1xccysvZyxcIiBcIikucmVwbGFjZSgvXlxccyp8XFxzKiQvZyxcIlwiKSkpLGV9LGNvbmRpdGlvbkNsYXNzOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4ocj9vLmFkZENsYXNzOm8ucmVtb3ZlQ2xhc3MpKGUsdCl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUscil7cmV0dXJuL1xccy8udGVzdChyKT9cInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP24oITEsXCJDU1MuaGFzQ2xhc3MgdGFrZXMgb25seSBhIHNpbmdsZSBjbGFzcyBuYW1lLlwiKTpuKCExKTp2b2lkIDAsZS5jbGFzc0xpc3Q/ISFyJiZlLmNsYXNzTGlzdC5jb250YWlucyhyKTooXCIgXCIrZS5jbGFzc05hbWUrXCIgXCIpLmluZGV4T2YoXCIgXCIrcitcIiBcIik+LTF9fTtlLmV4cG9ydHM9b30pLmNhbGwodCxyKDE5KSl9LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHIsbixvLGksYSxzLGwpe2lmKFwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlYmJnZvaWQgMD09PXIpdGhyb3cgbmV3IEVycm9yKFwiaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnRcIik7aWYoIWUpe3ZhciB1O2lmKHZvaWQgMD09PXIpdT1uZXcgRXJyb3IoXCJNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLlwiKTtlbHNle3ZhciBjPVtuLG8saSxhLHMsbF0sZD0wO3U9bmV3IEVycm9yKHIucmVwbGFjZSgvJXMvZyxmdW5jdGlvbigpe3JldHVybiBjW2QrK119KSksdS5uYW1lPVwiSW52YXJpYW50IFZpb2xhdGlvblwifXRocm93IHUuZnJhbWVzVG9Qb3A9MSx1fX1lLmV4cG9ydHM9cn0pLmNhbGwodCxyKDE5KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0PWUuc3R5bGU7XCJBbmltYXRpb25FdmVudFwiaW4gd2luZG93fHxkZWxldGUgcy5hbmltYXRpb25lbmQuYW5pbWF0aW9uLFwiVHJhbnNpdGlvbkV2ZW50XCJpbiB3aW5kb3d8fGRlbGV0ZSBzLnRyYW5zaXRpb25lbmQudHJhbnNpdGlvbjtmb3IodmFyIHIgaW4gcyl7dmFyIG49c1tyXTtmb3IodmFyIG8gaW4gbilpZihvIGluIHQpe2wucHVzaChuW29dKTticmVha319fWZ1bmN0aW9uIG8oZSx0LHIpe2UuYWRkRXZlbnRMaXN0ZW5lcih0LHIsITEpfWZ1bmN0aW9uIGkoZSx0LHIpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHIsITEpfXZhciBhPXIoMjgpLHM9e3RyYW5zaXRpb25lbmQ6e3RyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwibW96VHJhbnNpdGlvbkVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmRcIixtc1RyYW5zaXRpb246XCJNU1RyYW5zaXRpb25FbmRcIn0sYW5pbWF0aW9uZW5kOnthbmltYXRpb246XCJhbmltYXRpb25lbmRcIixXZWJraXRBbmltYXRpb246XCJ3ZWJraXRBbmltYXRpb25FbmRcIixNb3pBbmltYXRpb246XCJtb3pBbmltYXRpb25FbmRcIixPQW5pbWF0aW9uOlwib0FuaW1hdGlvbkVuZFwiLG1zQW5pbWF0aW9uOlwiTVNBbmltYXRpb25FbmRcIn19LGw9W107YS5jYW5Vc2VET00mJm4oKTt2YXIgdT17YWRkRW5kRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihlLHQpe3JldHVybiAwPT09bC5sZW5ndGg/dm9pZCB3aW5kb3cuc2V0VGltZW91dCh0LDApOnZvaWQgbC5mb3JFYWNoKGZ1bmN0aW9uKHIpe28oZSxyLHQpfSl9LHJlbW92ZUVuZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0KXswIT09bC5sZW5ndGgmJmwuZm9yRWFjaChmdW5jdGlvbihyKXtpKGUscix0KX0pfX07ZS5leHBvcnRzPXV9LGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9IShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93fHwhd2luZG93LmRvY3VtZW50fHwhd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpLG49e2NhblVzZURPTTpyLGNhblVzZVdvcmtlcnM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdvcmtlcixjYW5Vc2VFdmVudExpc3RlbmVyczpyJiYhKCF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciYmIXdpbmRvdy5hdHRhY2hFdmVudCksY2FuVXNlVmlld3BvcnQ6ciYmISF3aW5kb3cuc2NyZWVuLGlzSW5Xb3JrZXI6IXJ9O2UuZXhwb3J0cz1ufSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtlW3Quc2hvd01ldGhvZF0oe2R1cmF0aW9uOnQuc2hvd0R1cmF0aW9uLGVhc2luZzp0LnNob3dFYXNpbmd9KX12YXIgaT1yKDYpLGE9bihpKTtlLmV4cG9ydHM9e2dldERlZmF1bHRQcm9wczpmdW5jdGlvbigpe3JldHVybntzdHlsZTp7ZGlzcGxheTpcIm5vbmVcIn0sc2hvd01ldGhvZDpcImZhZGVJblwiLHNob3dEdXJhdGlvbjozMDAsc2hvd0Vhc2luZzpcInN3aW5nXCIsaGlkZU1ldGhvZDpcImZhZGVPdXRcIixoaWRlRHVyYXRpb246MWUzLGhpZGVFYXNpbmc6XCJzd2luZ1wiLHRpbWVPdXQ6NWUzLGV4dGVuZGVkVGltZU91dDoxZTN9fSxnZXRJbml0aWFsU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm57aW50ZXJ2YWxJZDpudWxsLGlzSGlkaW5nOiExfX0sY29tcG9uZW50RGlkTW91bnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzO28odGhpcy5fZ2V0XyRfbm9kZSgpLGUpLDA8ZS50aW1lT3V0JiZ0aGlzLl9zZXRfaW50ZXJ2YWxfaWQoc2V0VGltZW91dCh0aGlzLmhpZGVUb2FzdCxlLnRpbWVPdXQpKX0saGFuZGxlTW91c2VFbnRlcjpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnN0YXRlLmludGVydmFsSWQpLHRoaXMuX3NldF9pbnRlcnZhbF9pZChudWxsKSx0aGlzLl9zZXRfaXNfaGlkaW5nKCExKSxvKHRoaXMuX2dldF8kX25vZGUoKS5zdG9wKCEwLCEwKSx0aGlzLnByb3BzKX0saGFuZGxlTW91c2VMZWF2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7IXRoaXMuc3RhdGUuaXNIaWRpbmcmJigwPGUudGltZU91dHx8MDxlLmV4dGVuZGVkVGltZU91dCkmJnRoaXMuX3NldF9pbnRlcnZhbF9pZChzZXRUaW1lb3V0KHRoaXMuaGlkZVRvYXN0LGUuZXh0ZW5kZWRUaW1lT3V0KSl9LGhpZGVUb2FzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXRlLHI9dGhpcy5wcm9wczt0LmlzSGlkaW5nfHxudWxsPT10LmludGVydmFsSWQmJiFlfHwodGhpcy5zZXRTdGF0ZSh7aXNIaWRpbmc6ITB9KSx0aGlzLl9nZXRfJF9ub2RlKClbci5oaWRlTWV0aG9kXSh7ZHVyYXRpb246ci5oaWRlRHVyYXRpb24sZWFzaW5nOnIuaGlkZUVhc2luZyxjb21wbGV0ZTp0aGlzLl9oYW5kbGVfcmVtb3ZlfSkpfSxfZ2V0XyRfbm9kZTpmdW5jdGlvbigpe3JldHVybiBqUXVlcnkoYVtcImRlZmF1bHRcIl0uZmluZERPTU5vZGUodGhpcykpfSxfc2V0X2ludGVydmFsX2lkOmZ1bmN0aW9uKGUpe3RoaXMuc2V0U3RhdGUoe2ludGVydmFsSWQ6ZX0pfSxfc2V0X2lzX2hpZGluZzpmdW5jdGlvbihlKXt0aGlzLnNldFN0YXRlKHtpc0hpZGluZzplfSl9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cigzMSksZD1uKGMpLHA9cig0KSxmPW4ocCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLnN0YXRlPXtjdXJyZW50UGFnZTp0aGlzLnByb3BzLmN1cnJQYWdlLHNpemVQZXJQYWdlOnRoaXMucHJvcHMuc2l6ZVBlclBhZ2V9fXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiY2hhbmdlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2U9ZT09ZltcImRlZmF1bHRcIl0uUFJFX1BBR0U/dGhpcy5zdGF0ZS5jdXJyZW50UGFnZS0xPDE/MTp0aGlzLnN0YXRlLmN1cnJlbnRQYWdlLTE6ZT09ZltcImRlZmF1bHRcIl0uTkVYVF9QQUdFP3RoaXMuc3RhdGUuY3VycmVudFBhZ2UrMT50aGlzLnRvdGFsUGFnZXM/dGhpcy50b3RhbFBhZ2VzOnRoaXMuc3RhdGUuY3VycmVudFBhZ2UrMTplPT1mW1wiZGVmYXVsdFwiXS5MQVNUX1BBR0U/dGhpcy50b3RhbFBhZ2VzOmU9PWZbXCJkZWZhdWx0XCJdLkZJUlNUX1BBR0U/MTpwYXJzZUludChlKSxlIT10aGlzLnN0YXRlLmN1cnJlbnRQYWdlJiYodGhpcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6ZX0pLHRoaXMucHJvcHMuY2hhbmdlUGFnZShlLHRoaXMuc3RhdGUuc2l6ZVBlclBhZ2UpKX19LHtrZXk6XCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5wcm9wcy5yZW1vdGUmJihlLmN1cnJQYWdlfHxlLnNpemVQZXJQYWdlKSYmdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFBhZ2U6ZS5jdXJyUGFnZSxzaXplUGVyUGFnZTplLnNpemVQZXJQYWdlfSl9fSx7a2V5OlwiY2hhbmdlU2l6ZVBlclBhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9cGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnRleHQpO3QhPXRoaXMuc3RhdGUuc2l6ZVBlclBhZ2UmJih0aGlzLnRvdGFsUGFnZXM9TWF0aC5jZWlsKHRoaXMucHJvcHMuZGF0YVNpemUvdCksdGhpcy5zdGF0ZS5jdXJyZW50UGFnZT50aGlzLnRvdGFsUGFnZXMmJih0aGlzLnN0YXRlLmN1cnJlbnRQYWdlPXRoaXMudG90YWxQYWdlcyksdGhpcy5zZXRTdGF0ZSh7c2l6ZVBlclBhZ2U6dCxjdXJyZW50UGFnZTp0aGlzLnN0YXRlLmN1cnJlbnRQYWdlfSksdGhpcy5wcm9wcy5jaGFuZ2VQYWdlKHRoaXMuc3RhdGUuY3VycmVudFBhZ2UsdCksdGhpcy5wcm9wcy5vblNpemVQZXJQYWdlTGlzdCYmdGhpcy5wcm9wcy5vblNpemVQZXJQYWdlTGlzdCh0KSl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMudG90YWxQYWdlcz1NYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZS90aGlzLnN0YXRlLnNpemVQZXJQYWdlKTt2YXIgdD10aGlzLm1ha2VQYWdlKCkscj17XCJmbG9hdFwiOlwicmlnaHRcIixtYXJnaW5Ub3A6XCIwcHhcIn0sbj10aGlzLnByb3BzLnNpemVQZXJQYWdlTGlzdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtrZXk6dCxyb2xlOlwicHJlc2VudGF0aW9uXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJhXCIse3JvbGU6XCJtZW51aXRlbVwiLHRhYkluZGV4OlwiLTFcIixocmVmOlwiI1wiLG9uQ2xpY2s6ZS5jaGFuZ2VTaXplUGVyUGFnZS5iaW5kKGUpfSx0KSl9KTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyb3dcIixzdHlsZTp7bWFyZ2luVG9wOjE1fX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb2wtbWQtNlwifSx0aGlzLnByb3BzLnNpemVQZXJQYWdlTGlzdC5sZW5ndGg+MT91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImRyb3Bkb3duXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwiYnRuIGJ0bi1kZWZhdWx0IGRyb3Bkb3duLXRvZ2dsZVwiLHR5cGU6XCJidXR0b25cIixpZDpcInBhZ2VEcm9wRG93blwiLFwiZGF0YS10b2dnbGVcIjpcImRyb3Bkb3duXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCJ9LHRoaXMuc3RhdGUuc2l6ZVBlclBhZ2UsdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInNwYW5cIixudWxsLFwiIFwiLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2NsYXNzTmFtZTpcImNhcmV0XCJ9KSkpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLHtjbGFzc05hbWU6XCJkcm9wZG93bi1tZW51XCIscm9sZTpcIm1lbnVcIixcImFyaWEtbGFiZWxsZWRieVwiOlwicGFnZURyb3BEb3duXCJ9LG4pKTpcIlwiKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbC1tZC02XCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLHtjbGFzc05hbWU6XCJwYWdpbmF0aW9uXCIsc3R5bGU6cn0sdCkpKX19LHtrZXk6XCJtYWtlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRQYWdlcygpO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXt2YXIgdD1lPT09dGhpcy5zdGF0ZS5jdXJyZW50UGFnZSxyPSExO3JldHVybiAxIT10aGlzLnN0YXRlLmN1cnJlbnRQYWdlfHxlIT09ZltcImRlZmF1bHRcIl0uRklSU1RfUEFHRSYmZSE9PWZbXCJkZWZhdWx0XCJdLlBSRV9QQUdFfHwocj0hMCksdGhpcy5zdGF0ZS5jdXJyZW50UGFnZSE9dGhpcy50b3RhbFBhZ2VzfHxlIT09ZltcImRlZmF1bHRcIl0uTkVYVF9QQUdFJiZlIT09ZltcImRlZmF1bHRcIl0uTEFTVF9QQUdFfHwocj0hMCksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChkW1wiZGVmYXVsdFwiXSx7Y2hhbmdlUGFnZTp0aGlzLmNoYW5nZVBhZ2UuYmluZCh0aGlzKSxhY3RpdmU6dCxkaXNhYmxlOnIsa2V5OmV9LGUpfSx0aGlzKX19LHtrZXk6XCJnZXRQYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9MSx0PXRoaXMudG90YWxQYWdlcztlPU1hdGgubWF4KHRoaXMuc3RhdGUuY3VycmVudFBhZ2UtTWF0aC5mbG9vcih0aGlzLnByb3BzLnBhZ2luYXRpb25TaXplLzIpLDEpLHQ9ZSt0aGlzLnByb3BzLnBhZ2luYXRpb25TaXplLTEsdD50aGlzLnRvdGFsUGFnZXMmJih0PXRoaXMudG90YWxQYWdlcyxlPXQtdGhpcy5wcm9wcy5wYWdpbmF0aW9uU2l6ZSsxKTtmb3IodmFyIHI9W2ZbXCJkZWZhdWx0XCJdLkZJUlNUX1BBR0UsZltcImRlZmF1bHRcIl0uUFJFX1BBR0VdLG49ZTt0Pj1uO24rKyluPjAmJnIucHVzaChuKTtyZXR1cm4gci5wdXNoKGZbXCJkZWZhdWx0XCJdLk5FWFRfUEFHRSksci5wdXNoKGZbXCJkZWZhdWx0XCJdLkxBU1RfUEFHRSkscn19LHtrZXk6XCJnZXRDdXJyZW50UGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuY3VycmVudFBhZ2V9fSx7a2V5OlwiZ2V0U2l6ZVBlclBhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLnNpemVQZXJQYWdlfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO2gucHJvcFR5cGVzPXtjdXJyUGFnZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyLHNpemVQZXJQYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsZGF0YVNpemU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixjaGFuZ2VQYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLHNpemVQZXJQYWdlTGlzdDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXkscGFnaW5hdGlvblNpemU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixyZW1vdGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsb25TaXplUGVyUGFnZUxpc3Q6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmN9LGguZGVmYXVsdFByb3BzPXtzaXplUGVyUGFnZTpmW1wiZGVmYXVsdFwiXS5TSVpFX1BFUl9QQUdFfSx0W1wiZGVmYXVsdFwiXT1oLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cigzKSxkPW4oYykscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcInBhZ2VCdG5DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLnByb3BzLmNoYW5nZVBhZ2UoZS5jdXJyZW50VGFyZ2V0LnRleHQpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9KDAsZFtcImRlZmF1bHRcIl0pKHthY3RpdmU6dGhpcy5wcm9wcy5hY3RpdmUsZGlzYWJsZWQ6dGhpcy5wcm9wcy5kaXNhYmxlfSk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLHtjbGFzc05hbWU6ZX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImFcIix7aHJlZjpcIiNcIixvbkNsaWNrOnRoaXMucGFnZUJ0bkNsaWNrLmJpbmQodGhpcyl9LHRoaXMucHJvcHMuY2hpbGRyZW4pKX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtwLnByb3BUeXBlcz17Y2hhbmdlUGFnZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxhY3RpdmU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsZGlzYWJsZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbH0sdFtcImRlZmF1bHRcIl09cCxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoMyksZD1uKGMpLHA9cig0KSxmPShuKHApLHIoMTMpKSxoPW4oZiksdj1yKDE0KSx5PW4odiksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLnRpbWVvdXRlQ2xlYXI9MCx0aGlzLnN0YXRlPXtpc0luc2VydFJvd1RyaWdnZXI6ITAsdmFsaWRhdGVTdGF0ZTpudWxsLHNoYWtlRWRpdG9yOiExfX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZW91dCgpfX0se2tleTpcImNsZWFyVGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gZS50b1N0cmluZygpfSx0fShmdW5jdGlvbigpe3RoaXMudGltZW91dGVDbGVhciYmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRlQ2xlYXIpLHRoaXMudGltZW91dGVDbGVhcj0wKX0pfSx7a2V5OlwiY2hlY2tBbmRQYXJzZUZvcm1cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlLHQscj10aGlzLG49e30sbz0hMCxpPXt9O3JldHVybiB0aGlzLnByb3BzLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbihyLGEpe2lmKHIuYXV0b1ZhbHVlKWU9XCJmdW5jdGlvblwiPT10eXBlb2Ygci5hdXRvVmFsdWU/ci5hdXRvVmFsdWUoKTpcImF1dG92YWx1ZS1cIisobmV3IERhdGUpLmdldFRpbWUoKTtlbHNle3ZhciBzPXRoaXMucmVmc1tyLmZpZWxkK2FdO2lmKGU9cy52YWx1ZSxyLmVkaXRhYmxlJiZcImNoZWNrYm94XCI9PXIuZWRpdGFibGUudHlwZSl7dmFyIGw9cy52YWx1ZS5zcGxpdChcIjpcIik7ZT1zLmNoZWNrZWQ/bFswXTpsWzFdfXIuZWRpdGFibGUmJnIuZWRpdGFibGUudmFsaWRhdG9yJiYodD1yLmVkaXRhYmxlLnZhbGlkYXRvcihlKSx0IT09ITAmJihvPSExLGlbci5maWVsZF09dCkpfW5bci5maWVsZF09ZX0sdGhpcyksbz9uOihyLmNsZWFyVGltZW91dCgpLHRoaXMuc2V0U3RhdGUoe3ZhbGlkYXRlU3RhdGU6aSxzaGFrZUVkaXRvcjohMH0pLHIucmVmcy5ub3RpZmllci5ub3RpY2UoXCJlcnJvclwiLFwiRm9ybSB2YWxpZGF0ZSBlcnJvcnMsIHBsZWFzZSBjaGVja2luZyFcIixcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIiksci50aW1lb3V0ZUNsZWFyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnNldFN0YXRlKHtzaGFrZUVkaXRvcjohMX0pfSwzMDApLG51bGwpfX0se2tleTpcImhhbmRsZVNhdmVCdG5DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2hlY2tBbmRQYXJzZUZvcm0oKTtpZih0KXt2YXIgcj10aGlzLnByb3BzLm9uQWRkUm93KHQpO2lmKHIpe3ZhciBuPXRoaXM7bi5yZWZzLm5vdGlmaWVyLm5vdGljZShcImVycm9yXCIscixcIlByZXNzZWQgRVNDIGNhbiBjYW5jZWxcIiksbi5jbGVhclRpbWVvdXQoKSxuLnNldFN0YXRlKHtzaGFrZUVkaXRvcjohMCx2YWxpZGF0ZVN0YXRlOlwidGhpcyBpcyBoYWNrIGZvciBwcmV2ZW50IGJvb3RzdHJhcCBtb2RhbCBoaWRlXCJ9KSxuLnRpbWVvdXRlQ2xlYXI9c2V0VGltZW91dChmdW5jdGlvbigpe24uc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiExfSl9LDMwMCl9ZWxzZSB0aGlzLnNldFN0YXRlKHt2YWxpZGF0ZVN0YXRlOm51bGwsc2hha2VFZGl0b3I6ITF9KSx0aGlzLnJlZnMuZm9ybS5yZXNldCgpfX19LHtrZXk6XCJoYW5kbGVEcm9wUm93QnRuQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLm9uRHJvcFJvdygpfX0se2tleTpcImhhbmRsZUNsb3NlQnRuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5yZWZzLndhcm5pbmcuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn19LHtrZXk6XCJoYW5kbGVLZXlVcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMub25TZWFyY2goZS5jdXJyZW50VGFyZ2V0LnZhbHVlKX19LHtrZXk6XCJoYW5kbGVFeHBvcnRDU1ZcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucHJvcHMub25FeHBvcnRDU1YoKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPVwiYnMtdGFibGUtbW9kYWwtc21cIisobmV3IERhdGUpLmdldFRpbWUoKSx0PXRoaXMucHJvcHMuZW5hYmxlSW5zZXJ0P3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7dHlwZTpcImJ1dHRvblwiLG9uQ2xpY2s6dGhpcy5wcm9wcy5vbkFkZFJvd0JlZ2luLGNsYXNzTmFtZTpcImJ0biBidG4taW5mb1wiLFwiZGF0YS10b2dnbGVcIjpcIm1vZGFsXCIsXCJkYXRhLXRhcmdldFwiOlwiLlwiK2V9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wifSksXCIgTmV3XCIpOm51bGwscj10aGlzLnByb3BzLmVuYWJsZURlbGV0ZT91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse3R5cGU6XCJidXR0b25cIixjbGFzc05hbWU6XCJidG4gYnRuLXdhcm5pbmdcIixcImRhdGEtdG9nZ2xlXCI6XCJ0b29sdGlwXCIsXCJkYXRhLXBsYWNlbWVudFwiOlwicmlnaHRcIix0aXRsZTpcIkRyb3Agc2VsZWN0ZWQgcm93XCIsb25DbGljazp0aGlzLmhhbmRsZURyb3BSb3dCdG5DbGljay5iaW5kKHRoaXMpfSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaVwiLHtjbGFzc05hbWU6XCJnbHlwaGljb24gZ2x5cGhpY29uLXRyYXNoXCJ9KSxcIiBEZWxldGVcIik6bnVsbCxuPXRoaXMucHJvcHMuZW5hYmxlU2VhcmNoP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZm9ybS1ncm91cCBmb3JtLWdyb3VwLXNtXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLHtjbGFzc05hbWU6XCJmb3JtLWNvbnRyb2xcIix0eXBlOlwidGV4dFwiLHBsYWNlaG9sZGVyOnRoaXMucHJvcHMuc2VhcmNoUGxhY2Vob2xkZXI/dGhpcy5wcm9wcy5zZWFyY2hQbGFjZWhvbGRlcjpcIlNlYXJjaFwiLG9uS2V5VXA6dGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpfSkpOm51bGwsbz10aGlzLnByb3BzLmVuYWJsZUluc2VydD90aGlzLnJlbmRlckluc2VydFJvd01vZGFsKGUpOm51bGwsaT10aGlzLnByb3BzLmVuYWJsZUV4cG9ydENTVj91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse3R5cGU6XCJidXR0b25cIixjbGFzc05hbWU6XCJidG4gYnRuLXN1Y2Nlc3NcIixvbkNsaWNrOnRoaXMuaGFuZGxlRXhwb3J0Q1NWLmJpbmQodGhpcyl9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImdseXBoaWNvbiBnbHlwaGljb24tZXhwb3J0XCJ9KSxcIiBFeHBvcnQgdG8gQ1NWXCIpOm51bGw7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicm93XCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29sLXhzLTlcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJidG4tZ3JvdXAgYnRuLWdyb3VwLXNtXCIscm9sZTpcImdyb3VwXCJ9LGksdCxyKSksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb2wteHMtM1wifSxuKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHlbXCJkZWZhdWx0XCJdLHtyZWY6XCJub3RpZmllclwifSksbyl9fSx7a2V5OlwicmVuZGVySW5zZXJ0Um93TW9kYWxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnN0YXRlLnZhbGlkYXRlU3RhdGV8fHt9LHI9dGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbihlLHIpe3ZhciBuPWUuZWRpdGFibGUsbz1lLmZvcm1hdCxpPXtyZWY6ZS5maWVsZCtyLHBsYWNlaG9sZGVyOm4ucGxhY2Vob2xkZXI/bi5wbGFjZWhvbGRlcjplLm5hbWV9O2lmKGUuYXV0b1ZhbHVlKXJldHVybiBudWxsO3ZhciBhPXRbZS5maWVsZF0/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInNwYW5cIix7Y2xhc3NOYW1lOlwiaGVscC1ibG9jayBiZy1kYW5nZXJcIn0sdFtlLmZpZWxkXSk6bnVsbDtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwXCIsa2V5OmUuZmllbGR9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLG51bGwsZS5uYW1lKSwoMCxoW1wiZGVmYXVsdFwiXSkobixpLG8sXCJcIiksYSl9KSxuPSgwLGRbXCJkZWZhdWx0XCJdKShcIm1vZGFsXCIsXCJmYWRlXCIsZSx7XCJpblwiOnRoaXMuc3RhdGUuc2hha2VFZGl0b3J8fHRoaXMuc3RhdGUudmFsaWRhdGVTdGF0ZX0pLG89KDAsZFtcImRlZmF1bHRcIl0pKFwibW9kYWwtZGlhbG9nXCIsXCJtb2RhbC1zbVwiLHthbmltYXRlZDp0aGlzLnN0YXRlLnNoYWtlRWRpdG9yLHNoYWtlOnRoaXMuc3RhdGUuc2hha2VFZGl0b3J9KTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtyZWY6XCJtb2RhbFwiLGNsYXNzTmFtZTpuLHRhYkluZGV4OlwiLTFcIixyb2xlOlwiZGlhbG9nXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOm99LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwibW9kYWwtY29udGVudFwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIm1vZGFsLWhlYWRlclwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse3R5cGU6XCJidXR0b25cIixjbGFzc05hbWU6XCJjbG9zZVwiLFwiZGF0YS1kaXNtaXNzXCI6XCJtb2RhbFwiLFwiYXJpYS1sYWJlbFwiOlwiQ2xvc2VcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInNwYW5cIix7XCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSxcIsOXXCIpKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaDRcIix7Y2xhc3NOYW1lOlwibW9kYWwtdGl0bGVcIn0sXCJOZXcgUmVjb3JkXCIpKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIm1vZGFsLWJvZHlcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImZvcm1cIix7cmVmOlwiZm9ybVwifSxyKSksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJtb2RhbC1mb290ZXJcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHt0eXBlOlwiYnV0dG9uXCIsY2xhc3NOYW1lOlwiYnRuIGJ0bi1kZWZhdWx0XCIsXCJkYXRhLWRpc21pc3NcIjpcIm1vZGFsXCJ9LFwiQ2xvc2VcIiksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHt0eXBlOlwiYnV0dG9uXCIsY2xhc3NOYW1lOlwiYnRuIGJ0bi1pbmZvXCIsb25DbGljazp0aGlzLmhhbmRsZVNhdmVCdG5DbGljay5iaW5kKHRoaXMpfSxcIlNhdmVcIikpKSkpfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO20ucHJvcFR5cGVzPXtvbkFkZFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxvbkRyb3BSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsZW5hYmxlSW5zZXJ0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGVuYWJsZURlbGV0ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxlbmFibGVTZWFyY2g6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsY29sdW1uczp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksc2VhcmNoUGxhY2Vob2xkZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZ30sbS5kZWZhdWx0UHJvcHM9e2VuYWJsZUluc2VydDohMSxlbmFibGVEZWxldGU6ITEsZW5hYmxlU2VhcmNoOiExfSx0W1wiZGVmYXVsdFwiXT1tLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cig0KSxkPW4oYykscD1yKDMpLGY9bihwKSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuZmlsdGVyT2JqPXt9fXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiaGFuZGxlS2V5VXBcIix2YWx1ZTpmdW5jdGlvbihlKXtcIlwiPT09ZS5jdXJyZW50VGFyZ2V0LnZhbHVlLnRyaW0oKT9kZWxldGUgdGhpcy5maWx0ZXJPYmpbZS5jdXJyZW50VGFyZ2V0Lm5hbWVdOnRoaXMuZmlsdGVyT2JqW2UuY3VycmVudFRhcmdldC5uYW1lXT1lLmN1cnJlbnRUYXJnZXQudmFsdWUsdGhpcy5wcm9wcy5vbkZpbHRlcih0aGlzLmZpbHRlck9iail9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oMCxmW1wiZGVmYXVsdFwiXSkoXCJ0YWJsZVwiLHtcInRhYmxlLXN0cmlwZWRcIjp0aGlzLnByb3BzLnN0cmlwZWQsXCJ0YWJsZS1jb25kZW5zZWRcIjp0aGlzLnByb3BzLmNvbmRlbnNlZH0pLHQ9bnVsbDtpZih0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGU9PWRbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfU0lOR0xFfHx0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGU9PWRbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfTVVMVEkpe3ZhciByPXt3aWR0aDozNSxwYWRkaW5nTGVmdDowLHBhZGRpbmdSaWdodDowfTt0PXVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtzdHlsZTpyLGtleTotMX0sXCJGaWx0ZXJcIil9dmFyIG49dGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbihlKXt2YXIgdD17ZGlzcGxheTplLmhpZGRlbj9cIm5vbmVcIjpudWxsLHdpZHRoOmUud2lkdGh9O3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhcIix7a2V5OmUubmFtZSxzdHlsZTp0fSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInRoLWlubmVyIHRhYmxlLWhlYWRlci1jb2x1bW5cIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIse3NpemU6XCIxMFwiLHR5cGU6XCJ0ZXh0XCIscGxhY2Vob2xkZXI6ZS5uYW1lLG5hbWU6ZS5uYW1lLG9uS2V5VXA6dGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpfSkpKX0sdGhpcyk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiLHtjbGFzc05hbWU6ZSxzdHlsZTp7bWFyZ2luVG9wOjV9fSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhlYWRcIixudWxsLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0clwiLHtzdHlsZTp7Ym9yZGVyQm90dG9tU3R5bGU6XCJoaWRkZW5cIn19LHQsbikpKX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtoLnByb3BUeXBlcz17Y29sdW1uczp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXkscm93U2VsZWN0VHlwZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLG9uRmlsdGVyOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jfSx0W1wiZGVmYXVsdFwiXT1oLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9ZnVuY3Rpb24gYShlLHQscixuKXtyZXR1cm4gcj1yLnRvTG93ZXJDYXNlKCksZS5zb3J0KGZ1bmN0aW9uKGUsbyl7cmV0dXJuIG4/bihlLG8scik6cj09Y1tcImRlZmF1bHRcIl0uU09SVF9ERVNDP2VbdF0+b1t0XT8tMTplW3RdPG9bdF0/MTowOmVbdF08b1t0XT8tMTplW3RdPm9bdF0/MTowfSksZX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLGw9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LHU9cig0KSxjPW4odSksZD1yKDM1KS5FdmVudEVtaXR0ZXIscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxsKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLmRhdGE9ZX1yZXR1cm4gaSh0LGUpLHModCxbe2tleTpcInNldERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJjaGFuZ2VcIixlKX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5kYXRhPW51bGx9fSx7a2V5OlwiZ2V0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX19XSksdH0oZCk7dC5UYWJsZURhdGFTZXQ9cDt2YXIgZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpLHRoaXMuZGF0YT10LHRoaXMuY3VzdG9tU29ydEZ1bmNNYXA9bnVsbCx0aGlzLmZpbHRlcmVkRGF0YT1udWxsLHRoaXMuaXNPbkZpbHRlcj0hMSx0aGlzLmZpbHRlck9iaj1udWxsLHRoaXMuc2VhcmNoVGV4dD1udWxsLHRoaXMuc29ydE9iaj1udWxsLHRoaXMucGFnZU9iaj17fSx0aGlzLnNlbGVjdGVkPVtdLHRoaXMubXVsdGlDb2x1bW5TZWFyY2g9ITEsdGhpcy5yZW1vdGU9ITF9cmV0dXJuIHMoZSxbe2tleTpcInNldFByb3BzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5rZXlGaWVsZD1lLmtleUZpZWxkLHRoaXMuZW5hYmxlUGFnaW5hdGlvbj1lLmlzUGFnaW5hdGlvbix0aGlzLmN1c3RvbVNvcnRGdW5jTWFwPWUuY3VzdG9tU29ydEZ1bmNNYXAsdGhpcy5yZW1vdGU9ZS5yZW1vdGUsdGhpcy5tdWx0aUNvbHVtblNlYXJjaD1lLm11bHRpQ29sdW1uU2VhcmNofX0se2tleTpcInNldERhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmRhdGE9ZSx0aGlzLmlzT25GaWx0ZXImJihudWxsIT09dGhpcy5maWx0ZXJPYmomJnRoaXMuZmlsdGVyKHRoaXMuZmlsdGVyT2JqKSxudWxsIT09dGhpcy5zZWFyY2hUZXh0JiZ0aGlzLnNlYXJjaCh0aGlzLnNlYXJjaFRleHQpKSx0aGlzLnNvcnRPYmomJnRoaXMuc29ydCh0aGlzLnNvcnRPYmoub3JkZXIsdGhpcy5zb3J0T2JqLnNvcnRGaWVsZCl9fSx7a2V5Olwic2V0U2VsZWN0ZWRSb3dLZXlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnNlbGVjdGVkPWV9fSx7a2V5OlwiZ2V0U2VsZWN0ZWRSb3dLZXlzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3RlZH19LHtrZXk6XCJnZXRDdXJyZW50RGlzcGxheURhdGFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzT25GaWx0ZXI/dGhpcy5maWx0ZXJlZERhdGE6dGhpcy5kYXRhfX0se2tleTpcInNvcnRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuc29ydE9iaj17b3JkZXI6ZSxzb3J0RmllbGQ6dH07dmFyIHI9dGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKSxuPXRoaXMuY3VzdG9tU29ydEZ1bmNNYXBbdF07cmV0dXJuIHI9YShyLHQsZSxuKSx0aGlzfX0se2tleTpcInBhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnBhZ2VPYmouZW5kPWUqdC0xLHRoaXMucGFnZU9iai5zdGFydD10aGlzLnBhZ2VPYmouZW5kLSh0LTEpLHRoaXN9fSx7a2V5OlwiZWRpdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpLG89dm9pZCAwO3JldHVybiB0aGlzLmVuYWJsZVBhZ2luYXRpb24/KG5bdGhpcy5wYWdlT2JqLnN0YXJ0K3RdW3JdPWUsbz1uW3RoaXMucGFnZU9iai5zdGFydCt0XVt0aGlzLmtleUZpZWxkXSk6KG5bdF1bcl09ZSxvPW5bdF1bdGhpcy5rZXlGaWVsZF0pLHRoaXMuaXNPbkZpbHRlciYmdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24odCl7dFt0aGlzLmtleUZpZWxkXT09PW8mJih0W3JdPWUpfSx0aGlzKSx0aGlzfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlW3RoaXMua2V5RmllbGRdfHxcIlwiPT09ZVt0aGlzLmtleUZpZWxkXS50b1N0cmluZygpKXRocm93IHRoaXMua2V5RmllbGQrXCIgY2FuJ3QgYmUgZW1wdHkgdmFsdWUuXCI7dmFyIHQ9dGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKTt0LmZvckVhY2goZnVuY3Rpb24odCl7aWYodFt0aGlzLmtleUZpZWxkXS50b1N0cmluZygpPT09ZVt0aGlzLmtleUZpZWxkXS50b1N0cmluZygpKXRocm93IHRoaXMua2V5RmllbGQrXCIgXCIrZVt0aGlzLmtleUZpZWxkXStcIiBhbHJlYWR5IGV4aXN0c1wifSx0aGlzKSx0LnB1c2goZSksdGhpcy5pc09uRmlsdGVyJiZ0aGlzLmRhdGEucHVzaChlKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpLHI9dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuLTE9PWUuaW5kZXhPZih0W3RoaXMua2V5RmllbGRdKX0sdGhpcyk7dGhpcy5pc09uRmlsdGVyPyh0aGlzLmRhdGE9dGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4tMT09ZS5pbmRleE9mKHRbdGhpcy5rZXlGaWVsZF0pfSx0aGlzKSx0aGlzLmZpbHRlcmVkRGF0YT1yKTp0aGlzLmRhdGE9cn19LHtrZXk6XCJmaWx0ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXswPT1PYmplY3Qua2V5cyhlKS5sZW5ndGg/KHRoaXMuZmlsdGVyZWREYXRhPW51bGwsdGhpcy5pc09uRmlsdGVyPSExLHRoaXMuZmlsdGVyT2JqPW51bGwpOih0aGlzLmZpbHRlck9iaj1lLHRoaXMuZmlsdGVyZWREYXRhPXRoaXMuZGF0YS5maWx0ZXIoZnVuY3Rpb24odCl7dmFyIHI9ITA7Zm9yKHZhciBuIGluIGUpaWYoLTE9PXRbbl0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZVtuXS50b0xvd2VyQ2FzZSgpKSl7cj0hMTticmVha31yZXR1cm4gcn0pLHRoaXMuaXNPbkZpbHRlcj0hMCk7XG59fSx7a2V5Olwic2VhcmNoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoXCJcIj09PWUudHJpbSgpKXRoaXMuZmlsdGVyZWREYXRhPW51bGwsdGhpcy5pc09uRmlsdGVyPSExLHRoaXMuc2VhcmNoVGV4dD1udWxsO2Vsc2V7dGhpcy5zZWFyY2hUZXh0PWU7dmFyIHQ9W107dGhpcy5maWx0ZXJlZERhdGE9dGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbihyKXt2YXIgbj0hMTt0aGlzLm11bHRpQ29sdW1uU2VhcmNoP3Q9ZS5zcGxpdChcIiBcIik6dC5wdXNoKGUpO2Zvcih2YXIgbyBpbiByKWlmKHJbb10mJih0LmZvckVhY2goZnVuY3Rpb24oZSl7LTEhPT1yW29dLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUudG9Mb3dlckNhc2UoKSkmJihuPSEwKX0pLG4pKWJyZWFrO3JldHVybiBufSx0aGlzKSx0aGlzLmlzT25GaWx0ZXI9ITB9fX0se2tleTpcImdldERhdGFJZ25vcmluZ1BhZ2luYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7cmV0dXJuIGV9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO2lmKDA9PWUubGVuZ3RoKXJldHVybiBlO2lmKHRoaXMucmVtb3RlfHwhdGhpcy5lbmFibGVQYWdpbmF0aW9uKXJldHVybiBlO2Zvcih2YXIgdD1bXSxyPXRoaXMucGFnZU9iai5zdGFydDtyPD10aGlzLnBhZ2VPYmouZW5kJiYodC5wdXNoKGVbcl0pLHIrMSE9ZS5sZW5ndGgpO3IrKyk7cmV0dXJuIHR9fSx7a2V5OlwiZ2V0S2V5RmllbGRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleUZpZWxkfX0se2tleTpcImdldERhdGFOdW1cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpLmxlbmd0aH19LHtrZXk6XCJpc0NoYW5nZWRQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYWdlT2JqLnN0YXJ0JiZ0aGlzLnBhZ2VPYmouZW5kPyEwOiExfX0se2tleTpcImdldEFsbFJvd2tleVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdGhpcy5rZXlGaWVsZF19LHRoaXMpfX1dKSxlfSgpO3QuVGFibGVEYXRhU3RvcmU9Zn0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfWZ1bmN0aW9uIG4oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBvKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIGkoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIHZvaWQgMD09PWV9ZS5leHBvcnRzPXIsci5FdmVudEVtaXR0ZXI9cixyLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMCxyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMCxyLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTAsci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKCFvKGUpfHwwPmV8fGlzTmFOKGUpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPWUsdGhpc30sci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXt2YXIgdCxyLG8scyxsLHU7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSxcImVycm9yXCI9PT1lJiYoIXRoaXMuX2V2ZW50cy5lcnJvcnx8aSh0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKHQ9YXJndW1lbnRzWzFdLHQgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyB0O3Rocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKX1pZihyPXRoaXMuX2V2ZW50c1tlXSxhKHIpKXJldHVybiExO2lmKG4ocikpc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMTpyLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSAyOnIuY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSk7YnJlYWs7Y2FzZSAzOnIuY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO2JyZWFrO2RlZmF1bHQ6cz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksci5hcHBseSh0aGlzLHMpfWVsc2UgaWYoaShyKSlmb3Iocz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksdT1yLnNsaWNlKCksbz11Lmxlbmd0aCxsPTA7bz5sO2wrKyl1W2xdLmFwcGx5KHRoaXMscyk7cmV0dXJuITB9LHIucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG87aWYoIW4odCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lciYmdGhpcy5lbWl0KFwibmV3TGlzdGVuZXJcIixlLG4odC5saXN0ZW5lcik/dC5saXN0ZW5lcjp0KSx0aGlzLl9ldmVudHNbZV0/aSh0aGlzLl9ldmVudHNbZV0pP3RoaXMuX2V2ZW50c1tlXS5wdXNoKHQpOnRoaXMuX2V2ZW50c1tlXT1bdGhpcy5fZXZlbnRzW2VdLHRdOnRoaXMuX2V2ZW50c1tlXT10LGkodGhpcy5fZXZlbnRzW2VdKSYmIXRoaXMuX2V2ZW50c1tlXS53YXJuZWQmJihvPWEodGhpcy5fbWF4TGlzdGVuZXJzKT9yLmRlZmF1bHRNYXhMaXN0ZW5lcnM6dGhpcy5fbWF4TGlzdGVuZXJzLG8mJm8+MCYmdGhpcy5fZXZlbnRzW2VdLmxlbmd0aD5vJiYodGhpcy5fZXZlbnRzW2VdLndhcm5lZD0hMCxjb25zb2xlLmVycm9yKFwiKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIix0aGlzLl9ldmVudHNbZV0ubGVuZ3RoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLnRyYWNlJiZjb25zb2xlLnRyYWNlKCkpKSx0aGlzfSxyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxyKSxvfHwobz0hMCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIW4odCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBvPSExO3JldHVybiByLmxpc3RlbmVyPXQsdGhpcy5vbihlLHIpLHRoaXN9LHIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbyxhLHM7aWYoIW4odCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbZV0pcmV0dXJuIHRoaXM7aWYocj10aGlzLl9ldmVudHNbZV0sYT1yLmxlbmd0aCxvPS0xLHI9PT10fHxuKHIubGlzdGVuZXIpJiZyLmxpc3RlbmVyPT09dClkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHQpO2Vsc2UgaWYoaShyKSl7Zm9yKHM9YTtzLS0gPjA7KWlmKHJbc109PT10fHxyW3NdLmxpc3RlbmVyJiZyW3NdLmxpc3RlbmVyPT09dCl7bz1zO2JyZWFrfWlmKDA+bylyZXR1cm4gdGhpczsxPT09ci5sZW5ndGg/KHIubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSk6ci5zcGxpY2UobywxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSx0KX1yZXR1cm4gdGhpc30sci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LHI7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztpZighdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLl9ldmVudHM9e306dGhpcy5fZXZlbnRzW2VdJiZkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih0IGluIHRoaXMuX2V2ZW50cylcInJlbW92ZUxpc3RlbmVyXCIhPT10JiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0KTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9e30sdGhpc31pZihyPXRoaXMuX2V2ZW50c1tlXSxuKHIpKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSxyKTtlbHNlIGlmKHIpZm9yKDtyLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHJbci5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1tlXT9uKHRoaXMuX2V2ZW50c1tlXSk/W3RoaXMuX2V2ZW50c1tlXV06dGhpcy5fZXZlbnRzW2VdLnNsaWNlKCk6W119LHIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZXZlbnRzKXt2YXIgdD10aGlzLl9ldmVudHNbZV07aWYobih0KSlyZXR1cm4gMTtpZih0KXJldHVybiB0Lmxlbmd0aH1yZXR1cm4gMH0sci5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGlzdGVuZXJDb3VudCh0KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9XCJcIjtyZXR1cm4gMD09PWUubGVuZ3RoP3I6KHIrPXQuam9pbihcIixcIikrXCJcXG5cIixlLm1hcChmdW5jdGlvbihlKXt0Lm1hcChmdW5jdGlvbih0KXt2YXIgbj1lW3RdPydcIicrZVt0XSsnXCInOlwiXCI7cis9bitcIixcIn0pLHIrPVwiXFxuXCJ9KSxyKX1pZihPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KXZhciBvPXIoMzcpLGk9by5zYXZlQXM7dmFyIGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPW4oZSx0KTtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZpKG5ldyBCbG9iKFtvXSx7dHlwZTpcInRleHQvcGxhaW47Y2hhcnNldD11dGYtOFwifSkscnx8XCJzcHJlYWRzaGVldC5jc3ZcIil9O3RbXCJkZWZhdWx0XCJdPWEsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpPWl8fGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuYXZpZ2F0b3J8fCEvTVNJRSBbMS05XVxcLi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7dmFyIHQ9ZS5kb2N1bWVudCxyPWZ1bmN0aW9uKCl7cmV0dXJuIGUuVVJMfHxlLndlYmtpdFVSTHx8ZX0sbj10LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImFcIiksbz1cImRvd25sb2FkXCJpbiBuLGk9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtlLmRpc3BhdGNoRXZlbnQodCl9LGE9L1ZlcnNpb25cXC9bXFxkXFwuXSsuKlNhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzPWUud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW0sbD1lLnJlcXVlc3RGaWxlU3lzdGVtfHxzfHxlLm1velJlcXVlc3RGaWxlU3lzdGVtLHU9ZnVuY3Rpb24odCl7KGUuc2V0SW1tZWRpYXRlfHxlLnNldFRpbWVvdXQpKGZ1bmN0aW9uKCl7dGhyb3cgdH0sMCl9LGM9XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIixkPTAscD01MDAsZj1mdW5jdGlvbih0KXt2YXIgbj1mdW5jdGlvbigpe1wic3RyaW5nXCI9PXR5cGVvZiB0P3IoKS5yZXZva2VPYmplY3RVUkwodCk6dC5yZW1vdmUoKX07ZS5jaHJvbWU/bigpOnNldFRpbWVvdXQobixwKX0saD1mdW5jdGlvbihlLHQscil7dD1bXS5jb25jYXQodCk7Zm9yKHZhciBuPXQubGVuZ3RoO24tLTspe3ZhciBvPWVbXCJvblwiK3Rbbl1dO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG8pdHJ5e28uY2FsbChlLHJ8fGUpfWNhdGNoKGkpe3UoaSl9fX0sdj1mdW5jdGlvbihlKXtyZXR1cm4vXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChlLnR5cGUpP25ldyBCbG9iKFtcIlxcdWZlZmZcIixlXSx7dHlwZTplLnR5cGV9KTplfSx5PWZ1bmN0aW9uKHQsdSxwKXtwfHwodD12KHQpKTt2YXIgeSxtLGcsYj10aGlzLHc9dC50eXBlLEU9ITEsXz1mdW5jdGlvbigpe2goYixcIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgd3JpdGVlbmRcIi5zcGxpdChcIiBcIikpfSxQPWZ1bmN0aW9uKCl7aWYobSYmYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZpbGVSZWFkZXIpe3ZhciBuPW5ldyBGaWxlUmVhZGVyO3JldHVybiBuLm9ubG9hZGVuZD1mdW5jdGlvbigpe3ZhciBlPW4ucmVzdWx0O20ubG9jYXRpb24uaHJlZj1cImRhdGE6YXR0YWNobWVudC9maWxlXCIrZS5zbGljZShlLnNlYXJjaCgvWyw7XS8pKSxiLnJlYWR5U3RhdGU9Yi5ET05FLF8oKX0sbi5yZWFkQXNEYXRhVVJMKHQpLHZvaWQoYi5yZWFkeVN0YXRlPWIuSU5JVCl9aWYoKEV8fCF5KSYmKHk9cigpLmNyZWF0ZU9iamVjdFVSTCh0KSksbSltLmxvY2F0aW9uLmhyZWY9eTtlbHNle3ZhciBvPWUub3Blbih5LFwiX2JsYW5rXCIpO3ZvaWQgMD09byYmYSYmKGUubG9jYXRpb24uaHJlZj15KX1iLnJlYWR5U3RhdGU9Yi5ET05FLF8oKSxmKHkpfSxUPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBiLnJlYWR5U3RhdGUhPT1iLkRPTkU/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0sUz17Y3JlYXRlOiEwLGV4Y2x1c2l2ZTohMX07cmV0dXJuIGIucmVhZHlTdGF0ZT1iLklOSVQsdXx8KHU9XCJkb3dubG9hZFwiKSxvPyh5PXIoKS5jcmVhdGVPYmplY3RVUkwodCksbi5ocmVmPXksbi5kb3dubG9hZD11LHZvaWQgc2V0VGltZW91dChmdW5jdGlvbigpe2kobiksXygpLGYoeSksYi5yZWFkeVN0YXRlPWIuRE9ORX0pKTooZS5jaHJvbWUmJncmJnchPT1jJiYoZz10LnNsaWNlfHx0LndlYmtpdFNsaWNlLHQ9Zy5jYWxsKHQsMCx0LnNpemUsYyksRT0hMCkscyYmXCJkb3dubG9hZFwiIT09dSYmKHUrPVwiLmRvd25sb2FkXCIpLCh3PT09Y3x8cykmJihtPWUpLGw/KGQrPXQuc2l6ZSx2b2lkIGwoZS5URU1QT1JBUlksZCxUKGZ1bmN0aW9uKGUpe2Uucm9vdC5nZXREaXJlY3RvcnkoXCJzYXZlZFwiLFMsVChmdW5jdGlvbihlKXt2YXIgcj1mdW5jdGlvbigpe2UuZ2V0RmlsZSh1LFMsVChmdW5jdGlvbihlKXtlLmNyZWF0ZVdyaXRlcihUKGZ1bmN0aW9uKHIpe3Iub253cml0ZWVuZD1mdW5jdGlvbih0KXttLmxvY2F0aW9uLmhyZWY9ZS50b1VSTCgpLGIucmVhZHlTdGF0ZT1iLkRPTkUsaChiLFwid3JpdGVlbmRcIix0KSxmKGUpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oKXt2YXIgZT1yLmVycm9yO2UuY29kZSE9PWUuQUJPUlRfRVJSJiZQKCl9LFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSBhYm9ydFwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JbXCJvblwiK2VdPWJbXCJvblwiK2VdfSksci53cml0ZSh0KSxiLmFib3J0PWZ1bmN0aW9uKCl7ci5hYm9ydCgpLGIucmVhZHlTdGF0ZT1iLkRPTkV9LGIucmVhZHlTdGF0ZT1iLldSSVRJTkd9KSxQKX0pLFApfTtlLmdldEZpbGUodSx7Y3JlYXRlOiExfSxUKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCkscigpfSksVChmdW5jdGlvbihlKXtlLmNvZGU9PT1lLk5PVF9GT1VORF9FUlI/cigpOlAoKX0pKX0pLFApfSksUCkpOnZvaWQgUCgpKX0sbT15LnByb3RvdHlwZSxnPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IHkoZSx0LHIpfTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYj9mdW5jdGlvbihlLHQscil7cmV0dXJuIHJ8fChlPXYoZSkpLG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGUsdHx8XCJkb3dubG9hZFwiKX06KG0uYWJvcnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UucmVhZHlTdGF0ZT1lLkRPTkUsaChlLFwiYWJvcnRcIil9LG0ucmVhZHlTdGF0ZT1tLklOSVQ9MCxtLldSSVRJTkc9MSxtLkRPTkU9MixtLmVycm9yPW0ub253cml0ZXN0YXJ0PW0ub25wcm9ncmVzcz1tLm9ud3JpdGU9bS5vbmFib3J0PW0ub25lcnJvcj1tLm9ud3JpdGVlbmQ9bnVsbCxnKX19KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3d8fCh2b2lkIDApLmNvbnRlbnQpO1widW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZlLmV4cG9ydHM/ZS5leHBvcnRzLnNhdmVBcz1pOm51bGwhPT1yKDM4KSYmbnVsbCE9cigzOSkmJihuPVtdLG89ZnVuY3Rpb24oKXtyZXR1cm4gaX0uYXBwbHkodCxuKSwhKHZvaWQgMCE9PW8mJihlLmV4cG9ydHM9bykpKX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIil9fSxmdW5jdGlvbihlLHQpeyhmdW5jdGlvbih0KXtlLmV4cG9ydHM9dH0pLmNhbGwodCx7fSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoMyksZD0obihjKSxyKDQpKSxwPW4oZCksZj1yKDcpLGg9bihmKSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCkscyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLFwiY29uc3RydWN0b3JcIix0aGlzKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJoYW5kbGVDb2x1bW5DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMucHJvcHMuZGF0YVNvcnQpe3ZhciB0PXRoaXMucmVmcy5pbm5lckRpdjt0aGlzLm9yZGVyPXRoaXMub3JkZXI9PXBbXCJkZWZhdWx0XCJdLlNPUlRfREVTQz9wW1wiZGVmYXVsdFwiXS5TT1JUX0FTQzpwW1wiZGVmYXVsdFwiXS5TT1JUX0RFU0MsdGhpcy5wcm9wcy5jbGVhclNvcnRDYXJldCh0aGlzLm9yZGVyLHRoaXMucHJvcHMuZGF0YUZpZWxkKSx0LmFwcGVuZENoaWxkKGhbXCJkZWZhdWx0XCJdLnJlbmRlclNvcnRDYXJldCh0aGlzLm9yZGVyKSl9fX0se2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlZnMuaW5uZXJEaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZFwiLHRoaXMucHJvcHMuZGF0YUZpZWxkKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPW51bGwhPT10aGlzLnByb3BzLndpZHRoP3BhcnNlSW50KHRoaXMucHJvcHMud2lkdGgpOm51bGwsdD17dGV4dEFsaWduOnRoaXMucHJvcHMuZGF0YUFsaWduLGRpc3BsYXk6dGhpcy5wcm9wcy5oaWRkZW4/XCJub25lXCI6bnVsbCx3aWR0aDplLG1heFdpZHRoOmV9LHI9dGhpcy5wcm9wcy5jbGFzc05hbWUrXCIgXCIrKHRoaXMucHJvcHMuZGF0YVNvcnQ/XCJzb3J0LWNvbHVtblwiOlwiXCIpO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhcIix7Y2xhc3NOYW1lOnIsc3R5bGU6dH0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtyZWY6XCJpbm5lckRpdlwiLGNsYXNzTmFtZTpcInRoLWlubmVyIHRhYmxlLWhlYWRlci1jb2x1bW5cIixvbkNsaWNrOnRoaXMuaGFuZGxlQ29sdW1uQ2xpY2suYmluZCh0aGlzKX0sdGhpcy5wcm9wcy5jaGlsZHJlbikpfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO3YucHJvcFR5cGVzPXtkYXRhRmllbGQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxkYXRhQWxpZ246dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxkYXRhU29ydDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjbGVhclNvcnRDYXJldDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxkYXRhRm9ybWF0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLGlzS2V5OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGVkaXRhYmxlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hbnksaGlkZGVuOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNsYXNzTmFtZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLHdpZHRoOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsc29ydEZ1bmM6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsY29sdW1uQ2xhc3NOYW1lOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hbnl9LHYuZGVmYXVsdFByb3BzPXtkYXRhQWxpZ246XCJsZWZ0XCIsZGF0YVNvcnQ6ITEsZGF0YUZvcm1hdDp2b2lkIDAsaXNLZXk6ITEsZWRpdGFibGU6ITAsY2xlYXJTb3J0Q2FyZXQ6dm9pZCAwLGhpZGRlbjohMSxjbGFzc05hbWU6XCJcIix3aWR0aDpudWxsLHNvcnRGdW5jOnZvaWQgMCxjb2x1bW5DbGFzc05hbWU6XCJcIn0sdFtcImRlZmF1bHRcIl09dixlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19XSl9KTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgRk9STUFUID0gcmVxdWlyZSgnLi91dGlscy9mb3JtYXQnKTtcbnZhciBhc0NvbmZpZyA9IHJlcXVpcmUoJy4vdXRpbHMvYXNDb25maWcnKTtcbnZhciB0b01vbWVudCA9IHJlcXVpcmUoJy4vdG9Nb21lbnQnKTtcbnZhciBvbkVudGVyID0gcmVxdWlyZSgnLi9vbkVudGVyJyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgVE9EQVk7XG5cbmZ1bmN0aW9uIGVtcHR5Rm4oKSB7fVxuXG52YXIgRGVjYWRlVmlldyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIGRpc3BsYXlOYW1lOiAnRGVjYWRlVmlldycsXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIGFzQ29uZmlnKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIHRoZSB5ZWFycyBpbiB0aGUgZGVjYWRlIG9mIHRoZSBnaXZlbiB2YWx1ZVxuICAgICAqXG4gICAgICogQHBhcmFtICB7TW9tZW50L0RhdGUvTnVtYmVyfSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge01vbWVudFtdfVxuICAgICAqL1xuICAgIGdldFllYXJzSW5EZWNhZGU6IGZ1bmN0aW9uIGdldFllYXJzSW5EZWNhZGUodmFsdWUpIHtcbiAgICAgICAgdmFyIHllYXIgPSBtb21lbnQodmFsdWUpLmdldCgneWVhcicpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0geWVhciAlIDEwO1xuXG4gICAgICAgIHllYXIgPSB5ZWFyIC0gb2Zmc2V0IC0gMTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHZhciBpID0gMDtcblxuICAgICAgICB2YXIgc3RhcnQgPSBtb21lbnQoeWVhciwgJ1lZWVknKS5zdGFydE9mKCd5ZWFyJyk7XG5cbiAgICAgICAgZm9yICg7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChtb21lbnQoc3RhcnQpKTtcbiAgICAgICAgICAgIHN0YXJ0LmFkZCgxLCAneWVhcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cbiAgICAgICAgVE9EQVkgPSArbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XG5cbiAgICAgICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCB0aGlzLnByb3BzKTtcblxuICAgICAgICB2YXIgdmlld01vbWVudCA9IHByb3BzLnZpZXdNb21lbnQgPSBtb21lbnQodGhpcy5wcm9wcy52aWV3RGF0ZSk7XG5cbiAgICAgICAgaWYgKHByb3BzLmRhdGUpIHtcbiAgICAgICAgICAgIHByb3BzLm1vbWVudCA9IG1vbWVudChwcm9wcy5kYXRlKS5zdGFydE9mKCd5ZWFyJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgeWVhcnNJblZpZXcgPSB0aGlzLmdldFllYXJzSW5EZWNhZGUodmlld01vbWVudCk7XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZHAtdGFibGUgZHAtZGVjYWRlLXZpZXcnIH0sXG4gICAgICAgICAgICB0aGlzLnJlbmRlclllYXJzKHByb3BzLCB5ZWFyc0luVmlldylcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBnaXZlbiBhcnJheSBvZiBkYXlzXG4gICAgICogQHBhcmFtICB7TW9tZW50W119IGRheXNcbiAgICAgKiBAcmV0dXJuIHtSZWFjdC5ET019XG4gICAgICovXG4gICAgcmVuZGVyWWVhcnM6IGZ1bmN0aW9uIHJlbmRlclllYXJzKHByb3BzLCBkYXlzKSB7XG4gICAgICAgIHZhciBub2RlcyA9IGRheXMubWFwKGZ1bmN0aW9uIChkYXRlLCBpbmRleCwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJZZWFyKHByb3BzLCBkYXRlLCBpbmRleCwgYXJyKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHZhciBsZW4gPSBkYXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIGJ1Y2tldHMgPSBbXTtcbiAgICAgICAgdmFyIGJ1Y2tldHNMZW4gPSBNYXRoLmNlaWwobGVuIC8gNCk7XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAoOyBpIDwgYnVja2V0c0xlbjsgaSsrKSB7XG4gICAgICAgICAgICBidWNrZXRzLnB1c2gobm9kZXMuc2xpY2UoaSAqIDQsIChpICsgMSkgKiA0KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnVja2V0cy5tYXAoZnVuY3Rpb24gKGJ1Y2tldCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBrZXk6IFwicm93XCIgKyBpLCBjbGFzc05hbWU6ICdkcC1yb3cnIH0sXG4gICAgICAgICAgICAgICAgYnVja2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVuZGVyWWVhcjogZnVuY3Rpb24gcmVuZGVyWWVhcihwcm9wcywgZGF0ZSwgaW5kZXgsIGFycikge1xuICAgICAgICB2YXIgeWVhclRleHQgPSBGT1JNQVQueWVhcihkYXRlLCBwcm9wcy55ZWFyRm9ybWF0KTtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSBbXCJkcC1jZWxsIGRwLXllYXJcIl07XG5cbiAgICAgICAgdmFyIGRhdGVUaW1lc3RhbXAgPSArZGF0ZTtcblxuICAgICAgICBpZiAoZGF0ZVRpbWVzdGFtcCA9PSBwcm9wcy5tb21lbnQpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZHAtdmFsdWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZHAtcHJldicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZGV4ID09IGFyci5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goJ2RwLW5leHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvbkNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMsIHByb3BzLCBkYXRlKTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICB0YWJJbmRleDogJzEnLFxuICAgICAgICAgICAgICAgIGtleTogeWVhclRleHQsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrLFxuICAgICAgICAgICAgICAgIG9uS2V5VXA6IG9uRW50ZXIob25DbGljaylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5ZWFyVGV4dFxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2socHJvcHMsIGRhdGUsIGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGRhdGU7KHByb3BzLm9uU2VsZWN0IHx8IGVtcHR5Rm4pKGRhdGUsIGV2ZW50KTtcbiAgICB9XG59KTtcblxuRGVjYWRlVmlldy5nZXRIZWFkZXJUZXh0ID0gZnVuY3Rpb24gKHZhbHVlLCBwcm9wcykge1xuICAgIHZhciB5ZWFyID0gbW9tZW50KHZhbHVlKS5nZXQoJ3llYXInKTtcbiAgICB2YXIgb2Zmc2V0ID0geWVhciAlIDEwO1xuXG4gICAgeWVhciA9IHllYXIgLSBvZmZzZXQgLSAxO1xuXG4gICAgcmV0dXJuIHllYXIgKyAnIC0gJyArICh5ZWFyICsgMTEpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWNhZGVWaWV3OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBQID0gUmVhY3QuUHJvcFR5cGVzO1xudmFyIG9uRW50ZXIgPSByZXF1aXJlKCcuL29uRW50ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgZGlzcGxheU5hbWU6ICdEYXRlUGlja2VySGVhZGVyJyxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBvbkNoYW5nZTogUC5mdW5jLFxuICAgIG9uUHJldjogUC5mdW5jLFxuICAgIG9uTmV4dDogUC5mdW5jLFxuICAgIGNvbHNwYW46IFAubnVtYmVyLFxuICAgIGNoaWxkcmVuOiBQLm5vZGVcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblxuICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgeyBjbGFzc05hbWU6ICdkcC1oZWFkZXInIH0sXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdkcC1uYXYtdGFibGUnIH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdkcC1yb3cnIH0sXG4gICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0YWJJbmRleDogJzEnLFxuICAgICAgICAgICAgICByb2xlOiAnbGluaycsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RwLXByZXYtbmF2IGRwLW5hdi1jZWxsIGRwLWNlbGwnLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBwcm9wcy5vblByZXYsXG4gICAgICAgICAgICAgIG9uS2V5VXA6IG9uRW50ZXIocHJvcHMub25QcmV2KVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BzLnByZXZUZXh0XG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHAtbmF2LXZpZXcgZHAtY2VsbCcsXG4gICAgICAgICAgICAgIGNvbFNwYW46IHByb3BzLmNvbHNwYW4sXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2hhbmdlLFxuICAgICAgICAgICAgICBvbktleVVwOiBvbkVudGVyKHByb3BzLm9uQ2hhbmdlKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BzLmNoaWxkcmVuXG4gICAgICAgICAgKSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHAtbmV4dC1uYXYgZHAtbmF2LWNlbGwgZHAtY2VsbCcsXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uTmV4dCxcbiAgICAgICAgICAgICAgb25LZXlVcDogb25FbnRlcihwcm9wcy5vbk5leHQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvcHMubmV4dFRleHRcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9XG5cbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIEZPUk1BVCA9IHJlcXVpcmUoJy4vdXRpbHMvZm9ybWF0Jyk7XG52YXIgYXNDb25maWcgPSByZXF1aXJlKCcuL3V0aWxzL2FzQ29uZmlnJyk7XG52YXIgb25FbnRlciA9IHJlcXVpcmUoJy4vb25FbnRlcicpO1xudmFyIHRvTW9tZW50ID0gcmVxdWlyZSgnLi90b01vbWVudCcpO1xuXG52YXIgVE9EQVk7XG5cbmZ1bmN0aW9uIGVtcHR5Rm4oKSB7fVxuXG52YXIgTW9udGhWaWV3ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIGRpc3BsYXlOYW1lOiAnTW9udGhWaWV3JyxcblxuICAvKipcbiAgICogRm9ybWF0cyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc3BlY2lmaWVkIGZvcm1hdC5cbiAgICogQG1ldGhvZCBmb3JtYXRcbiAgICpcbiAgICogQHBhcmFtICB7RGF0ZS9TdHJpbmcvTW9tZW50fSB2YWx1ZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtmb3JtYXRdIElmIG5vbmUgc3BlY2lmaWVkLCAjZGF0ZUZvcm1hdCB3aWxsIGJlIHVzZWRcbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmb3JtYXRBc0RheTogZnVuY3Rpb24gZm9ybWF0QXNEYXkobW9tZW50LCBkYXlEaXNwbGF5Rm9ybWF0KSB7XG4gICAgcmV0dXJuIG1vbWVudC5mb3JtYXQoZGF5RGlzcGxheUZvcm1hdCB8fCAnRCcpO1xuICB9LFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiBhc0NvbmZpZygpO1xuICB9LFxuXG4gIGdldFdlZWtTdGFydE1vbWVudDogZnVuY3Rpb24gZ2V0V2Vla1N0YXJ0TW9tZW50KHZhbHVlKSB7XG4gICAgdmFyIHdlZWtTdGFydERheSA9IHRoaXMud2Vla1N0YXJ0RGF5O1xuICAgIHZhciBjbG9uZSA9IHRoaXMudG9Nb21lbnQodmFsdWUpLmRheSh3ZWVrU3RhcnREYXkpO1xuXG4gICAgcmV0dXJuIGNsb25lO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgZGF5cyBpbiB0aGUgc3BlY2lmaWVkIG1vbnRoLlxuICAgKlxuICAgKiBAcGFyYW0gIHtNb21lbnQvRGF0ZS9OdW1iZXJ9IHZhbHVlXG4gICAqIEByZXR1cm4ge01vbWVudFtdfVxuICAgKi9cbiAgZ2V0RGF5c0luTW9udGg6IGZ1bmN0aW9uIGdldERheXNJbk1vbnRoKHZhbHVlKSB7XG4gICAgdmFyIGZpcnN0ID0gdGhpcy50b01vbWVudCh2YWx1ZSkuc3RhcnRPZignbW9udGgnKTtcbiAgICB2YXIgYmVmb3JlRmlyc3QgPSB0aGlzLnRvTW9tZW50KHZhbHVlKS5zdGFydE9mKCdtb250aCcpLmFkZCgtMSwgJ2RheXMnKTtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmdldFdlZWtTdGFydE1vbWVudChmaXJzdCk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpID0gMDtcblxuICAgIGlmIChiZWZvcmVGaXJzdC5pc0JlZm9yZShzdGFydClcbiAgICAvLyBhbmQgaXQgZG9lbid0IHN0YXJ0IHdpdGggYSBmdWxsIHdlZWsgYmVmb3JlIGFuZCB0aGUgd2VlayBoYXMgYXQgbGVhc3QgMSBkYXkgZnJvbSBjdXJyZW50IG1vbnRoIChkZWZhdWx0KVxuICAgICAmJiAodGhpcy5wcm9wcy5hbHdheXNTaG93UHJldldlZWsgfHwgIXN0YXJ0LmlzU2FtZShmaXJzdCkpKSB7XG4gICAgICBzdGFydC5hZGQoLTEsICd3ZWVrcycpO1xuICAgIH1cblxuICAgIGZvciAoOyBpIDwgNDI7IGkrKykge1xuICAgICAgcmVzdWx0LnB1c2godGhpcy50b01vbWVudChzdGFydCkpO1xuICAgICAgc3RhcnQuYWRkKDEsICdkYXlzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblxuICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgdGhpcy5wcm9wcyk7XG5cbiAgICB0aGlzLnRvTW9tZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBkYXRlRm9ybWF0KSB7XG4gICAgICByZXR1cm4gdG9Nb21lbnQodmFsdWUsIGRhdGVGb3JtYXQgfHwgcHJvcHMuZGF0ZUZvcm1hdCwgeyBsb2NhbGU6IHByb3BzLmxvY2FsZSB9KTtcbiAgICB9O1xuXG4gICAgVE9EQVkgPSArdGhpcy50b01vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xuXG4gICAgdmFyIGRhdGVGb3JtYXQgPSBwcm9wcy5kYXRlRm9ybWF0O1xuICAgIHZhciB2aWV3TW9tZW50ID0gcHJvcHMudmlld01vbWVudCA9IHRoaXMudG9Nb21lbnQocHJvcHMudmlld0RhdGUsIGRhdGVGb3JtYXQpO1xuXG4gICAgdmFyIHdlZWtTdGFydERheSA9IHByb3BzLndlZWtTdGFydERheTtcblxuICAgIGlmICh3ZWVrU3RhcnREYXkgPT0gbnVsbCkge1xuICAgICAgd2Vla1N0YXJ0RGF5ID0gcHJvcHMubG9jYWxlRGF0YS5fd2VlayA/IHByb3BzLmxvY2FsZURhdGEuX3dlZWsuZG93IDogbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLndlZWtTdGFydERheSA9IHByb3BzLndlZWtTdGFydERheSA9IHdlZWtTdGFydERheTtcblxuICAgIGlmIChwcm9wcy5taW5EYXRlICYmIG1vbWVudC5pc01vbWVudChwcm9wcy5taW5EYXRlKSkge1xuICAgICAgcHJvcHMubWluRGF0ZS5zdGFydE9mKCdkYXknKTtcbiAgICB9XG5cbiAgICBwcm9wcy5taW5EYXRlICYmIChwcm9wcy5taW5EYXRlID0gK3RoaXMudG9Nb21lbnQocHJvcHMubWluRGF0ZSwgZGF0ZUZvcm1hdCkpO1xuICAgIHByb3BzLm1heERhdGUgJiYgKHByb3BzLm1heERhdGUgPSArdGhpcy50b01vbWVudChwcm9wcy5tYXhEYXRlLCBkYXRlRm9ybWF0KSk7XG5cbiAgICB0aGlzLm1vbnRoRmlyc3QgPSB0aGlzLnRvTW9tZW50KHZpZXdNb21lbnQpLnN0YXJ0T2YoJ21vbnRoJyk7XG4gICAgdGhpcy5tb250aExhc3QgPSB0aGlzLnRvTW9tZW50KHZpZXdNb21lbnQpLmVuZE9mKCdtb250aCcpO1xuXG4gICAgaWYgKHByb3BzLmRhdGUpIHtcbiAgICAgIHByb3BzLm1vbWVudCA9IHRoaXMudG9Nb21lbnQocHJvcHMuZGF0ZSkuc3RhcnRPZignZGF5Jyk7XG4gICAgfVxuXG4gICAgdmFyIGRheXNJblZpZXcgPSB0aGlzLmdldERheXNJbk1vbnRoKHZpZXdNb21lbnQpO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgY2xhc3NOYW1lOiAnZHAtdGFibGUgZHAtbW9udGgtdmlldycgfSxcbiAgICAgIHRoaXMucmVuZGVyV2Vla0RheU5hbWVzKCksXG4gICAgICB0aGlzLnJlbmRlckRheXMocHJvcHMsIGRheXNJblZpZXcpXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVyIHRoZSBnaXZlbiBhcnJheSBvZiBkYXlzXG4gICAqIEBwYXJhbSAge01vbWVudFtdfSBkYXlzXG4gICAqIEByZXR1cm4ge1JlYWN0LkRPTX1cbiAgICovXG4gIHJlbmRlckRheXM6IGZ1bmN0aW9uIHJlbmRlckRheXMocHJvcHMsIGRheXMpIHtcbiAgICB2YXIgbm9kZXMgPSBkYXlzLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRGF5KHByb3BzLCBkYXRlKTtcbiAgICB9LCB0aGlzKTtcblxuICAgIHZhciBsZW4gPSBkYXlzLmxlbmd0aDtcbiAgICB2YXIgYnVja2V0cyA9IFtdO1xuICAgIHZhciBidWNrZXRzTGVuID0gTWF0aC5jZWlsKGxlbiAvIDcpO1xuXG4gICAgdmFyIGkgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBidWNrZXRzTGVuOyBpKyspIHtcbiAgICAgIGJ1Y2tldHMucHVzaChub2Rlcy5zbGljZShpICogNywgKGkgKyAxKSAqIDcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVja2V0cy5tYXAoZnVuY3Rpb24gKGJ1Y2tldCwgaSkge1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGtleTogXCJyb3dcIiArIGksIGNsYXNzTmFtZTogJ2RwLXdlZWsgZHAtcm93JyB9LFxuICAgICAgICBidWNrZXRcbiAgICAgICk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVuZGVyRGF5OiBmdW5jdGlvbiByZW5kZXJEYXkocHJvcHMsIGRhdGUpIHtcbiAgICB2YXIgZGF5VGV4dCA9IEZPUk1BVC5kYXkoZGF0ZSwgcHJvcHMuZGF5Rm9ybWF0KTtcbiAgICB2YXIgY2xhc3NlcyA9IFtcImRwLWNlbGwgZHAtZGF5XCJdO1xuXG4gICAgdmFyIGRhdGVUaW1lc3RhbXAgPSArZGF0ZTtcblxuICAgIGlmIChkYXRlVGltZXN0YW1wID09IFRPREFZKSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2RwLWN1cnJlbnQnKTtcbiAgICB9IGVsc2UgaWYgKGRhdGVUaW1lc3RhbXAgPCB0aGlzLm1vbnRoRmlyc3QpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZHAtcHJldicpO1xuICAgIH0gZWxzZSBpZiAoZGF0ZVRpbWVzdGFtcCA+IHRoaXMubW9udGhMYXN0KSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2RwLW5leHQnKTtcbiAgICB9XG5cbiAgICB2YXIgYmVmb3JlTWluRGF0ZTtcblxuICAgIGlmIChwcm9wcy5taW5EYXRlICYmIGRhdGUgPCBwcm9wcy5taW5EYXRlKSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2RwLWRpc2FibGVkIGRwLWJlZm9yZS1taW4nKTtcbiAgICAgIGJlZm9yZU1pbkRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBhZnRlck1heERhdGU7XG4gICAgaWYgKHByb3BzLm1heERhdGUgJiYgZGF0ZSA+IHByb3BzLm1heERhdGUpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZHAtZGlzYWJsZWQgZHAtYWZ0ZXItbWF4Jyk7XG4gICAgICBhZnRlck1heERhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChkYXRlVGltZXN0YW1wID09IHByb3BzLm1vbWVudCkge1xuICAgICAgY2xhc3Nlcy5wdXNoKCdkcC12YWx1ZScpO1xuICAgIH1cblxuICAgIHZhciBtb20gPSB0aGlzLnRvTW9tZW50KGRhdGUpO1xuICAgIHZhciBvbkNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMsIHByb3BzLCBkYXRlLCBkYXRlVGltZXN0YW1wKTtcblxuICAgIHZhciByZW5kZXJEYXlQcm9wcyA9IHtcbiAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgIHRhYkluZGV4OiAxLFxuICAgICAga2V5OiBkYXlUZXh0LFxuICAgICAgdGV4dDogZGF5VGV4dCxcbiAgICAgIGRhdGU6IG1vbSxcbiAgICAgIG1vbWVudDogbW9tLFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLmpvaW4oJyAnKSxcbiAgICAgIHN0eWxlOiB7fSxcbiAgICAgIG9uQ2xpY2s6IG9uQ2xpY2ssXG4gICAgICBvbktleVVwOiBvbkVudGVyKG9uQ2xpY2spLFxuICAgICAgY2hpbGRyZW46IGRheVRleHRcbiAgICB9O1xuXG4gICAgaWYgKGJlZm9yZU1pbkRhdGUpIHtcbiAgICAgIHJlbmRlckRheVByb3BzLmlzRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmVuZGVyRGF5UHJvcHMuYmVmb3JlTWluRGF0ZSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChhZnRlck1heERhdGUpIHtcbiAgICAgIHJlbmRlckRheVByb3BzLmlzRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmVuZGVyRGF5UHJvcHMuYWZ0ZXJNYXhEYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHByb3BzLm9uUmVuZGVyRGF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZW5kZXJEYXlQcm9wcyA9IHByb3BzLm9uUmVuZGVyRGF5KHJlbmRlckRheVByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdFJlbmRlckZ1bmN0aW9uID0gUmVhY3QuRE9NLmRpdjtcbiAgICB2YXIgcmVuZGVyRnVuY3Rpb24gPSBwcm9wcy5yZW5kZXJEYXkgfHwgZGVmYXVsdFJlbmRlckZ1bmN0aW9uO1xuXG4gICAgdmFyIHJlc3VsdCA9IHJlbmRlckZ1bmN0aW9uKHJlbmRlckRheVByb3BzKTtcblxuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVzdWx0ID0gZGVmYXVsdFJlbmRlckZ1bmN0aW9uKHJlbmRlckRheVByb3BzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIGdldFdlZWtEYXlOYW1lczogZnVuY3Rpb24gZ2V0V2Vla0RheU5hbWVzKHByb3BzKSB7XG4gICAgcHJvcHMgPSBwcm9wcyB8fCB0aGlzLnByb3BzO1xuXG4gICAgdmFyIG5hbWVzID0gcHJvcHMud2Vla0RheU5hbWVzO1xuICAgIHZhciB3ZWVrU3RhcnREYXkgPSB0aGlzLndlZWtTdGFydERheTtcblxuICAgIGlmICh0eXBlb2YgbmFtZXMgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbmFtZXMgPSBuYW1lcyh3ZWVrU3RhcnREYXksIHByb3BzLmxvY2FsZSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSkge1xuXG4gICAgICBuYW1lcyA9IFtdLmNvbmNhdChuYW1lcyk7XG5cbiAgICAgIHZhciBpbmRleCA9IHdlZWtTdGFydERheTtcblxuICAgICAgd2hpbGUgKGluZGV4ID4gMCkge1xuICAgICAgICBuYW1lcy5wdXNoKG5hbWVzLnNoaWZ0KCkpO1xuICAgICAgICBpbmRleC0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuYW1lcztcbiAgfSxcblxuICByZW5kZXJXZWVrRGF5TmFtZXM6IGZ1bmN0aW9uIHJlbmRlcldlZWtEYXlOYW1lcygpIHtcbiAgICB2YXIgbmFtZXMgPSB0aGlzLmdldFdlZWtEYXlOYW1lcygpO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgY2xhc3NOYW1lOiAnZHAtcm93IGRwLXdlZWstZGF5LW5hbWVzJyB9LFxuICAgICAgbmFtZXMubWFwKGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGtleTogaW5kZXgsIGNsYXNzTmFtZTogJ2RwLWNlbGwgZHAtd2Vlay1kYXktbmFtZScgfSxcbiAgICAgICAgICBuYW1lXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICk7XG4gIH0sXG5cbiAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHByb3BzLCBkYXRlLCB0aW1lc3RhbXAsIGV2ZW50KSB7XG4gICAgaWYgKHByb3BzLm1pbkRhdGUgJiYgdGltZXN0YW1wIDwgcHJvcHMubWluRGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJvcHMubWF4RGF0ZSAmJiB0aW1lc3RhbXAgPiBwcm9wcy5tYXhEYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZGF0ZTsocHJvcHMub25DaGFuZ2UgfHwgZW1wdHlGbikoZGF0ZSwgZXZlbnQpO1xuICB9XG59KTtcblxuTW9udGhWaWV3LmdldEhlYWRlclRleHQgPSBmdW5jdGlvbiAobW9tZW50LCBwcm9wcykge1xuICByZXR1cm4gdG9Nb21lbnQobW9tZW50LCBudWxsLCB7IGxvY2FsZTogcHJvcHMubG9jYWxlIH0pLmZvcm1hdCgnTU1NTSBZWVlZJyk7XG59O1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBNb250aFZpZXc7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbnZhciBGT1JNQVQgPSByZXF1aXJlKCcuL3V0aWxzL2Zvcm1hdCcpO1xudmFyIGFzQ29uZmlnID0gcmVxdWlyZSgnLi91dGlscy9hc0NvbmZpZycpO1xudmFyIHRvTW9tZW50ID0gcmVxdWlyZSgnLi90b01vbWVudCcpO1xudmFyIG9uRW50ZXIgPSByZXF1aXJlKCcuL29uRW50ZXInKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBUT0RBWTtcblxuZnVuY3Rpb24gZW1wdHlGbigpIHt9XG5cbnZhciBZZWFyVmlldyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIGRpc3BsYXlOYW1lOiAnWWVhclZpZXcnLFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cbiAgICAgICAgcmV0dXJuIGFzQ29uZmlnKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIHRoZSBkYXlzIGluIHRoZSBzcGVjaWZpZWQgbW9udGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtNb21lbnQvRGF0ZS9OdW1iZXJ9IHZhbHVlXG4gICAgICogQHJldHVybiB7TW9tZW50W119XG4gICAgICovXG4gICAgZ2V0TW9udGhzSW5ZZWFyOiBmdW5jdGlvbiBnZXRNb250aHNJblllYXIodmFsdWUpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gbW9tZW50KHZhbHVlKS5zdGFydE9mKCd5ZWFyJyk7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAoOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobW9tZW50KHN0YXJ0KSk7XG4gICAgICAgICAgICBzdGFydC5hZGQoMSwgJ21vbnRoJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblxuICAgICAgICBUT0RBWSA9ICttb21lbnQoKS5zdGFydE9mKCdkYXknKTtcblxuICAgICAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICAgIHZhciB2aWV3TW9tZW50ID0gcHJvcHMudmlld01vbWVudCA9IG1vbWVudCh0aGlzLnByb3BzLnZpZXdEYXRlKTtcblxuICAgICAgICBpZiAocHJvcHMuZGF0ZSkge1xuICAgICAgICAgICAgcHJvcHMubW9tZW50ID0gbW9tZW50KHByb3BzLmRhdGUpLnN0YXJ0T2YoJ21vbnRoJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbW9udGhzSW5WaWV3ID0gdGhpcy5nZXRNb250aHNJblllYXIodmlld01vbWVudCk7XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZHAtdGFibGUgZHAteWVhci12aWV3JyB9LFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb250aHMocHJvcHMsIG1vbnRoc0luVmlldylcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBnaXZlbiBhcnJheSBvZiBkYXlzXG4gICAgICogQHBhcmFtICB7TW9tZW50W119IGRheXNcbiAgICAgKiBAcmV0dXJuIHtSZWFjdC5ET019XG4gICAgICovXG4gICAgcmVuZGVyTW9udGhzOiBmdW5jdGlvbiByZW5kZXJNb250aHMocHJvcHMsIGRheXMpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gZGF5cy5tYXAoZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1vbnRoKHByb3BzLCBkYXRlKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHZhciBsZW4gPSBkYXlzLmxlbmd0aDtcbiAgICAgICAgdmFyIGJ1Y2tldHMgPSBbXTtcbiAgICAgICAgdmFyIGJ1Y2tldHNMZW4gPSBNYXRoLmNlaWwobGVuIC8gNCk7XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIGZvciAoOyBpIDwgYnVja2V0c0xlbjsgaSsrKSB7XG4gICAgICAgICAgICBidWNrZXRzLnB1c2gobm9kZXMuc2xpY2UoaSAqIDQsIChpICsgMSkgKiA0KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnVja2V0cy5tYXAoZnVuY3Rpb24gKGJ1Y2tldCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBrZXk6IFwicm93XCIgKyBpLCBjbGFzc05hbWU6ICdkcC1yb3cnIH0sXG4gICAgICAgICAgICAgICAgYnVja2V0XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVuZGVyTW9udGg6IGZ1bmN0aW9uIHJlbmRlck1vbnRoKHByb3BzLCBkYXRlKSB7XG4gICAgICAgIHZhciBtb250aFRleHQgPSBGT1JNQVQubW9udGgoZGF0ZSwgcHJvcHMubW9udGhGb3JtYXQpO1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFtcImRwLWNlbGwgZHAtbW9udGhcIl07XG5cbiAgICAgICAgdmFyIGRhdGVUaW1lc3RhbXAgPSArZGF0ZTtcblxuICAgICAgICBpZiAoZGF0ZVRpbWVzdGFtcCA9PSBwcm9wcy5tb21lbnQpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZHAtdmFsdWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvbkNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMsIHByb3BzLCBkYXRlKTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgIGtleTogbW9udGhUZXh0LFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3Nlcy5qb2luKCcgJyksXG4gICAgICAgICAgICAgICAgb25DbGljazogb25DbGljayxcbiAgICAgICAgICAgICAgICBvbktleVVwOiBvbkVudGVyKG9uQ2xpY2spXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW9udGhUZXh0XG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhwcm9wcywgZGF0ZSwgZXZlbnQpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZGF0ZTsocHJvcHMub25TZWxlY3QgfHwgZW1wdHlGbikoZGF0ZSwgZXZlbnQpO1xuICAgIH1cbn0pO1xuXG5ZZWFyVmlldy5nZXRIZWFkZXJUZXh0ID0gZnVuY3Rpb24gKG1vbWVudCwgcHJvcHMpIHtcbiAgICByZXR1cm4gdG9Nb21lbnQobW9tZW50LCBudWxsLCB7IGxvY2FsZTogcHJvcHMubG9jYWxlIH0pLmZvcm1hdCgnWVlZWScpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBZZWFyVmlldzsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRXZWVrRGF5TmFtZXMgPSByZXF1aXJlKCcuL3V0aWxzL2dldFdlZWtEYXlOYW1lcycpO1xuXG4vLyBjb25zb2xlLmxvZyhnZXRXZWVrRGF5TmFtZXMoKSlcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgICAvL3RoZSBuYW1lcyBvZiB3ZWVrIGRheXMgdG8gYmUgZGlzcGxheWVkIGluIG1vbnRoIHZpZXcgLSBmaXJzdCBzaG91bGQgYmUgc3VuZGF5XG4gICAgd2Vla0RheU5hbWVzOiBnZXRXZWVrRGF5TmFtZXMsXG5cbiAgICAvL3RoZSBkYXkgdG8gZGlzcGxheSBhcyBmaXJzdCBkYXkgb2Ygd2Vlay4gZGVmYXVsdHMgdG8gMCwgd2hpY2ggaXMgc3VuZGF5XG4gICAgd2Vla1N0YXJ0RGF5OiBudWxsLFxuXG4gICAgbG9jYWxlOiBudWxsLFxuXG4gICAgLy90aGUgZm9ybWF0IGluIHdoaWNoIGRheXMgc2hvdWxkIGJlIGRpc3BsYXllZCBpbiBtb250aCB2aWV3XG4gICAgZGF5Rm9ybWF0OiAnRCcsXG5cbiAgICAvL3RoZSBmb3JtYXQgaW4gd2hpY2ggbW9udGhzIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4geWVhciB2aWV3XG4gICAgbW9udGhGb3JtYXQ6ICdNTU1NJyxcblxuICAgIC8vdGhlIGZvcm1hdCBpbiB3aGljaCB5ZWFycyBzaG91bGQgYmUgZGlzcGxheWVkIGluIGRlY2FkZSB2aWV3XG4gICAgeWVhckZvcm1hdDogJ1lZWVknLFxuXG4gICAgLy90ZXh0IGZvciBuYXZpZ2F0aW5nIHRvIHByZXYgcGVyaW9kXG4gICAgbmF2UHJldjogJ+KAuScsXG5cbiAgICAvL3RleHQgZm9yIG5hdmlnYXRpbmcgdG8gbmV4dCBwZXJpb2RcbiAgICBuYXZOZXh0OiAn4oC6JyxcblxuICAgIC8vdGhlIHZpZXcgdG8gcmVuZGVyIGluaXRpYWxseS4gUG9zc2libGUgdmFsdWVzIGFyZTogJ21vbnRoJywgJ3llYXInLCAnZGVjYWRlJ1xuICAgIHZpZXc6IG51bGwsXG5cbiAgICAvL3RoZSBkYXRlIHRvIG1hcmsgYXMgc2VsZWN0ZWQgaW4gdGhlIGRhdGUgcGlja2VyLlxuICAgIC8vQ2FuIGJlIGEgRGF0ZSBvYmplY3QsIGEgbW9tZW50IG9iamVjdCBvciBhIHN0cmluZy5cbiAgICAvL0lmIGl0J3MgYSBzdHJpbmcsIGl0IHdpbGwgYmUgcGFyc2VkIHVzaW5nIGRhdGVGb3JtYXRcbiAgICBkYXRlOiBudWxsLFxuXG4gICAgbWluRGF0ZTogbnVsbCxcblxuICAgIG1heERhdGU6IG51bGwsXG5cbiAgICAvL3RoZSBkYXRlIHdoZXJlIHRvIG9wZW4gdGhlIHBpY2tlci4gZGVmYXVsdHMgdG8gdG9kYXkgaWYgbm8gZGF0ZSBhbmQgbm8gdmlld0RhdGUgc3BlY2lmaWVkXG4gICAgdmlld0RhdGU6IG51bGwsXG5cbiAgICAvL2lmIHRoZSBkYXRlIHByb3BlcnR5IGlzIGdpdmVuIGFzIHN0cmluZywgaXQgd2lsbCBiZSBwYXJzZWQgdXNpbmcgdGhpcyBmb3JtYXRcbiAgICBkYXRlRm9ybWF0OiAnWVlZWS1NTS1ERCcsXG5cbiAgICBvblJlbmRlckRheTogbnVsbCxcbiAgICByZW5kZXJEYXk6IG51bGwsXG5cbiAgICBhbHdheXNTaG93UHJldldlZWs6IGZhbHNlXG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcbnZhciBhc0NvbmZpZyA9IHJlcXVpcmUoJy4vdXRpbHMvYXNDb25maWcnKTtcblxudmFyIE1vbnRoVmlldyA9IHJlcXVpcmUoJy4vTW9udGhWaWV3Jyk7XG52YXIgWWVhclZpZXcgPSByZXF1aXJlKCcuL1llYXJWaWV3Jyk7XG52YXIgRGVjYWRlVmlldyA9IHJlcXVpcmUoJy4vRGVjYWRlVmlldycpO1xudmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vSGVhZGVyJyk7XG5cbnZhciB0b01vbWVudCA9IHJlcXVpcmUoJy4vdG9Nb21lbnQnKTtcblxudmFyIGhhc093biA9IGZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufTtcblxudmFyIG9uRW50ZXIgPSByZXF1aXJlKCcuL29uRW50ZXInKTtcblxudmFyIFZpZXdzID0ge1xuICAgIG1vbnRoOiBNb250aFZpZXcsXG4gICAgeWVhcjogWWVhclZpZXcsXG4gICAgZGVjYWRlOiBEZWNhZGVWaWV3XG59O1xuXG5mdW5jdGlvbiBlbXB0eUZuKCkge31cblxudmFyIERhdGVQaWNrZXIgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgICBkaXNwbGF5TmFtZTogJ0RhdGVQaWNrZXInLFxuXG4gICAgcHJvcFR5cGVzOiB7XG4gICAgICAgIHRvZGF5VGV4dDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgZ290b1NlbGVjdGVkVGV4dDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblxuICAgICAgICByZW5kZXJGb290ZXI6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgICAgICBvbkNoYW5nZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cbiAgICAgICAgZGF0ZTogUmVhY3QuUHJvcFR5cGVzLmFueSxcbiAgICAgICAgdmlld0RhdGU6IFJlYWN0LlByb3BUeXBlcy5hbnlcbiAgICB9LFxuXG4gICAgZ2V0Vmlld09yZGVyOiBmdW5jdGlvbiBnZXRWaWV3T3JkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLnZpZXdPcmRlciB8fCBbJ21vbnRoJywgJ3llYXInLCAnZGVjYWRlJ107XG4gICAgfSxcblxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgICAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIGFzQ29uZmlnKCksIHtcbiAgICAgICAgICAgIGlzRGF0ZVBpY2tlcjogdHJ1ZSxcbiAgICAgICAgICAgIG5hdk9uRGF0ZUNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgZGVmYXVsdFN0eWxlOiB7XG4gICAgICAgICAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVsZXRlIHByb3BzLnZpZXdEYXRlO1xuICAgICAgICBkZWxldGUgcHJvcHMuZGF0ZTtcblxuICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgfSxcblxuICAgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlldzogdGhpcy5wcm9wcy5kZWZhdWx0VmlldyxcbiAgICAgICAgICAgIHZpZXdEYXRlOiB0aGlzLnByb3BzLmRlZmF1bHRWaWV3RGF0ZSxcbiAgICAgICAgICAgIGRlZmF1bHREYXRlOiB0aGlzLnByb3BzLmRlZmF1bHREYXRlXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIGdldFZpZXdOYW1lOiBmdW5jdGlvbiBnZXRWaWV3TmFtZSgpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnByb3BzLnZpZXcgIT0gbnVsbCA/IHRoaXMucHJvcHMudmlldyA6IHRoaXMuc3RhdGUudmlldztcblxuICAgICAgICByZXR1cm4gdmlldyB8fCAnbW9udGgnO1xuICAgIH0sXG5cbiAgICBhZGRWaWV3SW5kZXg6IGZ1bmN0aW9uIGFkZFZpZXdJbmRleChhbW91bnQpIHtcbiAgICAgICAgdmFyIHZpZXdOYW1lID0gdGhpcy5nZXRWaWV3TmFtZSgpO1xuXG4gICAgICAgIHZhciBvcmRlciA9IHRoaXMuZ2V0Vmlld09yZGVyKCk7XG4gICAgICAgIHZhciBpbmRleCA9IG9yZGVyLmluZGV4T2Yodmlld05hbWUpO1xuXG4gICAgICAgIGluZGV4ICs9IGFtb3VudDtcblxuICAgICAgICByZXR1cm4gaW5kZXggJSBvcmRlci5sZW5ndGg7XG4gICAgfSxcblxuICAgIGdldE5leHRWaWV3TmFtZTogZnVuY3Rpb24gZ2V0TmV4dFZpZXdOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWaWV3T3JkZXIoKVt0aGlzLmFkZFZpZXdJbmRleCgxKV07XG4gICAgfSxcblxuICAgIGdldFByZXZWaWV3TmFtZTogZnVuY3Rpb24gZ2V0UHJldlZpZXdOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWaWV3T3JkZXIoKVt0aGlzLmFkZFZpZXdJbmRleCgtMSldO1xuICAgIH0sXG5cbiAgICBnZXRWaWV3OiBmdW5jdGlvbiBnZXRWaWV3KCkge1xuICAgICAgICB2YXIgdmlld3MgPSB0aGlzLnByb3BzLnZpZXdzIHx8IFZpZXdzO1xuICAgICAgICByZXR1cm4gdmlld3NbdGhpcy5nZXRWaWV3TmFtZSgpXSB8fCB2aWV3cy5tb250aDtcbiAgICB9LFxuXG4gICAgZ2V0Vmlld0ZhY3Rvcnk6IGZ1bmN0aW9uIGdldFZpZXdGYWN0b3J5KCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuXG4gICAgICAgIGlmIChSZWFjdC5jcmVhdGVGYWN0b3J5ICYmIHZpZXcgJiYgdmlldy5wcm90b3R5cGUgJiYgdHlwZW9mIHZpZXcucHJvdG90eXBlLnJlbmRlciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2aWV3Ll9fZmFjdG9yeSA9IHZpZXcuX19mYWN0b3J5IHx8IFJlYWN0LmNyZWF0ZUZhY3Rvcnkodmlldyk7XG4gICAgICAgICAgICB2aWV3ID0gdmlldy5fX2ZhY3Rvcnk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9LFxuXG4gICAgZ2V0Vmlld0RhdGU6IGZ1bmN0aW9uIGdldFZpZXdEYXRlKCkge1xuICAgICAgICB2YXIgZGF0ZSA9IGhhc093bih0aGlzLnByb3BzLCAndmlld0RhdGUnKSA/IHRoaXMucHJvcHMudmlld0RhdGUgOiB0aGlzLnN0YXRlLnZpZXdEYXRlO1xuXG4gICAgICAgIGRhdGUgPSBkYXRlIHx8IHRoaXMudmlld01vbWVudCB8fCB0aGlzLmdldERhdGUoKSB8fCBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGlmIChtb21lbnQuaXNNb21lbnQoZGF0ZSkpIHtcbiAgICAgICAgICAgIC8vaW4gb3JkZXIgdG8gc3RyaXAgdGhlIGxvY2FsZSAtIHRoZSBkYXRlIHBpY2tlciBtYXkgaGF2ZSBoYWQgaXRzIGxvY2FsZSBjaGFuZ2VkXG4gICAgICAgICAgICAvL2JldHdlZW4gdHdvIHJlbmRlciBjYWxscy4gSWYgd2UgZG9uJ3Qgc3RyaXAgdGhpcywgbW9tZW50KG1vbSkgcmV0dXJucyBhIG5ldyBtb21lbnRcbiAgICAgICAgICAgIC8vd2l0aCB0aGUgbG9jYWxlIG9mIG1vbSwgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudFxuICAgICAgICAgICAgZGF0ZSA9ICtkYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0ZSA9IHRoaXMudG9Nb21lbnQoZGF0ZSk7XG5cbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfSxcblxuICAgIGdldERhdGU6IGZ1bmN0aW9uIGdldERhdGUoKSB7XG4gICAgICAgIHZhciBkYXRlO1xuXG4gICAgICAgIGlmIChoYXNPd24odGhpcy5wcm9wcywgJ2RhdGUnKSkge1xuICAgICAgICAgICAgZGF0ZSA9IHRoaXMucHJvcHMuZGF0ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGUgPSB0aGlzLnN0YXRlLmRlZmF1bHREYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGUgPyB0aGlzLnRvTW9tZW50KGRhdGUpIDogbnVsbDtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cbiAgICAgICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCB0aGlzLnByb3BzKTtcblxuICAgICAgICB0aGlzLnRvTW9tZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBkYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdG9Nb21lbnQodmFsdWUsIGRhdGVGb3JtYXQgfHwgcHJvcHMuZGF0ZUZvcm1hdCwgeyBsb2NhbGU6IHByb3BzLmxvY2FsZSB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0Vmlld0ZhY3RvcnkoKTtcblxuICAgICAgICBwcm9wcy5kYXRlID0gdGhpcy5nZXREYXRlKCk7XG5cbiAgICAgICAgdmFyIGRhdGVTdHJpbmcgPSBwcm9wcy5kYXRlID09IG51bGwgPyAnJyA6IHByb3BzLmRhdGUuZm9ybWF0KHRoaXMucHJvcHMuZGF0ZUZvcm1hdCk7XG5cbiAgICAgICAgcHJvcHMudmlld0RhdGUgPSB0aGlzLnZpZXdNb21lbnQgPSB0aGlzLmdldFZpZXdEYXRlKCk7XG4gICAgICAgIHByb3BzLmxvY2FsZSA9IHRoaXMucHJvcHMubG9jYWxlO1xuICAgICAgICBwcm9wcy5sb2NhbGVEYXRhID0gbW9tZW50LmxvY2FsZURhdGEocHJvcHMubG9jYWxlKTtcblxuICAgICAgICBwcm9wcy5yZW5kZXJEYXkgPSB0aGlzLnByb3BzLnJlbmRlckRheTtcbiAgICAgICAgcHJvcHMub25SZW5kZXJEYXkgPSB0aGlzLnByb3BzLm9uUmVuZGVyRGF5O1xuXG4gICAgICAgIC8vIHByb3BzLm9uQ2hhbmdlICA9IHRoaXMuaGFuZGxlQ2hhbmdlXG4gICAgICAgIC8vIHByb3BzLm9uU2VsZWN0ICA9IHRoaXMuaGFuZGxlU2VsZWN0XG5cbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9ICh0aGlzLnByb3BzLmNsYXNzTmFtZSB8fCAnJykgKyAnIGRhdGUtcGlja2VyJztcblxuICAgICAgICBwcm9wcy5zdHlsZSA9IHRoaXMucHJlcGFyZVN0eWxlKHByb3BzKTtcblxuICAgICAgICB2YXIgdmlld1Byb3BzID0gcHJvcHM7XG4gICAgICAgIHZhciB2aWV3UHJvcHMgPSBhc0NvbmZpZyhwcm9wcyk7XG5cbiAgICAgICAgdmlld1Byb3BzLmRhdGVTdHJpbmcgPSBkYXRlU3RyaW5nO1xuICAgICAgICB2aWV3UHJvcHMubG9jYWxlRGF0YSA9IHByb3BzLmxvY2FsZURhdGE7XG4gICAgICAgIHZpZXdQcm9wcy5vblNlbGVjdCA9IHRoaXMuaGFuZGxlU2VsZWN0O1xuICAgICAgICB2aWV3UHJvcHMub25DaGFuZ2UgPSB0aGlzLmhhbmRsZUNoYW5nZTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiBwcm9wcy5zdHlsZSB9KSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVySGVhZGVyKHZpZXcsIHByb3BzKSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkcC1ib2R5Jywgc3R5bGU6IHsgZmxleDogMSB9IH0sXG4gICAgICAgICAgICAgICAgdmlldyh2aWV3UHJvcHMpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJGb290ZXIocHJvcHMpXG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIHByZXBhcmVTdHlsZTogZnVuY3Rpb24gcHJlcGFyZVN0eWxlKHByb3BzKSB7XG4gICAgICAgIHJldHVybiBhc3NpZ24oe30sIHByb3BzLmRlZmF1bHRTdHlsZSwgcHJvcHMuc3R5bGUpO1xuICAgIH0sXG5cbiAgICByZW5kZXJGb290ZXI6IGZ1bmN0aW9uIHJlbmRlckZvb3Rlcihwcm9wcykge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5oaWRlRm9vdGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy50b2RheSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdQbGVhc2UgdXNlIFwidG9kYXlUZXh0XCIgcHJvcCBpbnN0ZWFkIG9mIFwidG9kYXlcIiEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5nb3RvU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUGxlYXNlIHVzZSBcImdvdG9TZWxlY3RlZFRleHRcIiBwcm9wIGluc3RlYWQgb2YgXCJnb3RvU2VsZWN0ZWRcIiEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b2RheVRleHQgPSB0aGlzLnByb3BzLnRvZGF5VGV4dCB8fCAnVG9kYXknO1xuICAgICAgICB2YXIgZ290b1NlbGVjdGVkVGV4dCA9IHRoaXMucHJvcHMuZ290b1NlbGVjdGVkVGV4dCB8fCAnR28gdG8gc2VsZWN0ZWQnO1xuXG4gICAgICAgIHZhciBmb290ZXJQcm9wcyA9IHtcbiAgICAgICAgICAgIHRvZGF5VGV4dDogdG9kYXlUZXh0LFxuICAgICAgICAgICAgZ290b1NlbGVjdGVkVGV4dDogZ290b1NlbGVjdGVkVGV4dCxcbiAgICAgICAgICAgIGdvdG9Ub2RheTogdGhpcy5nb3RvTm93LFxuICAgICAgICAgICAgZ290b1NlbGVjdGVkOiB0aGlzLmdvdG9TZWxlY3RlZC5iaW5kKHRoaXMsIHByb3BzKSxcbiAgICAgICAgICAgIGRhdGU6IHByb3BzLmRhdGUsXG4gICAgICAgICAgICB2aWV3RGF0ZTogcHJvcHMudmlld0RhdGVcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMuZm9vdGVyRmFjdG9yeSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnByb3BzLmZvb3RlckZhY3RvcnkoZm9vdGVyUHJvcHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZHAtZm9vdGVyJyB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHAtZm9vdGVyLXRvZGF5JyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZm9vdGVyUHJvcHMuZ290b1RvZGF5LFxuICAgICAgICAgICAgICAgICAgICBvbktleVVwOiBvbkVudGVyKGZvb3RlclByb3BzLmdvdG9Ub2RheSlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRvZGF5VGV4dFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleDogJzEnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAnbGluaycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RwLWZvb3Rlci1zZWxlY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZvb3RlclByb3BzLmdvdG9TZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgb25LZXlVcDogb25FbnRlcihmb290ZXJQcm9wcy5nb3RvU2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnb3RvU2VsZWN0ZWRUZXh0XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIGdvdG9Ob3c6IGZ1bmN0aW9uIGdvdG9Ob3coKSB7XG4gICAgICAgIHRoaXMuZ290b0RhdGUoK25ldyBEYXRlKCkpO1xuICAgIH0sXG5cbiAgICBnb3RvU2VsZWN0ZWQ6IGZ1bmN0aW9uIGdvdG9TZWxlY3RlZChwcm9wcykge1xuICAgICAgICB0aGlzLmdvdG9EYXRlKHByb3BzLmRhdGUgfHwgK25ldyBEYXRlKCkpO1xuICAgIH0sXG5cbiAgICBnb3RvRGF0ZTogZnVuY3Rpb24gZ290b0RhdGUodmFsdWUpIHtcblxuICAgICAgICB0aGlzLnNldFZpZXcoJ21vbnRoJyk7XG5cbiAgICAgICAgdGhpcy5zZXRWaWV3RGF0ZSh2YWx1ZSk7XG4gICAgfSxcblxuICAgIGdldFZpZXdDb2xzcGFuOiBmdW5jdGlvbiBnZXRWaWV3Q29sc3BhbigpIHtcbiAgICAgICAgdmFyIG1hcCA9IHtcbiAgICAgICAgICAgIG1vbnRoOiA1LFxuICAgICAgICAgICAgeWVhcjogMixcbiAgICAgICAgICAgIGRlY2FkZTogMlxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBtYXBbdGhpcy5nZXRWaWV3TmFtZSgpXTtcbiAgICB9LFxuXG4gICAgcmVuZGVySGVhZGVyOiBmdW5jdGlvbiByZW5kZXJIZWFkZXIodmlldywgcHJvcHMpIHtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5oaWRlSGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wcyA9IHByb3BzIHx8IHRoaXMucHJvcHM7XG5cbiAgICAgICAgdmFyIHZpZXdEYXRlID0gdGhpcy5nZXRWaWV3RGF0ZSgpO1xuICAgICAgICB2YXIgaGVhZGVyVGV4dCA9IHRoaXMuZ2V0VmlldygpLmdldEhlYWRlclRleHQodmlld0RhdGUsIHByb3BzKTtcblxuICAgICAgICB2YXIgY29sc3BhbiA9IHRoaXMuZ2V0Vmlld0NvbHNwYW4oKTtcbiAgICAgICAgdmFyIHByZXYgPSB0aGlzLnByb3BzLm5hdlByZXY7XG4gICAgICAgIHZhciBuZXh0ID0gdGhpcy5wcm9wcy5uYXZOZXh0O1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgSGVhZGVyLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByZXZUZXh0OiBwcmV2LFxuICAgICAgICAgICAgICAgIG5leHRUZXh0OiBuZXh0LFxuICAgICAgICAgICAgICAgIGNvbHNwYW46IGNvbHNwYW4sXG4gICAgICAgICAgICAgICAgb25QcmV2OiB0aGlzLmhhbmRsZU5hdlByZXYsXG4gICAgICAgICAgICAgICAgb25OZXh0OiB0aGlzLmhhbmRsZU5hdk5leHQsXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlVmlld0NoYW5nZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhlYWRlclRleHRcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgaGFuZGxlUmVuZGVyRGF5OiBmdW5jdGlvbiBoYW5kbGVSZW5kZXJEYXkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMucHJvcHMucmVuZGVyRGF5IHx8IGVtcHR5Rm4pKGRhdGUpIHx8IFtdO1xuICAgIH0sXG5cbiAgICBoYW5kbGVWaWV3Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVWaWV3Q2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFZpZXcodGhpcy5nZXROZXh0Vmlld05hbWUoKSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmlldyAnbW9udGgnLyd5ZWFyJy8nZGVjYWRlJ1xuICAgICAqXG4gICAgICogSXQgY2FsbHMgb25WaWV3Q2hhbmdlLCBhbmQgaWYgdGhlIHZpZXcgaXMgdW5jb250cm9sbGVkLCBhbHNvIHNldHMgaXQgaXMgc3RhdGUsXG4gICAgICogc28gdGhlIGRhdGVwaWNrZXIgZ2V0cyByZS1yZW5kZXJlZCB2aWV3IHRoZSBuZXcgdmlld1xuICAgICAqXG4gICAgICovXG4gICAgc2V0VmlldzogZnVuY3Rpb24gc2V0Vmlldyh2aWV3KSB7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uVmlld0NoYW5nZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uVmlld0NoYW5nZSh2aWV3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZpZXcgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmlldzogdmlld1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0Vmlld0RhdGU6IGZ1bmN0aW9uIHNldFZpZXdEYXRlKG1vbWVudCkge1xuXG4gICAgICAgIG1vbWVudCA9IHRoaXMudG9Nb21lbnQobW9tZW50KTtcblxuICAgICAgICB2YXIgZm4gPSB0aGlzLnByb3BzLm9uVmlld0RhdGVDaGFuZ2U7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAgICAgICAgIHZhciB0ZXh0ID0gbW9tZW50LmZvcm1hdCh0aGlzLnByb3BzLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXdOYW1lKCk7XG5cbiAgICAgICAgICAgIGZuKHRleHQsIG1vbWVudCwgdmlldyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc093bih0aGlzLnByb3BzLCAndmlld0RhdGUnKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmlld0RhdGU6IG1vbWVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0TmV4dDogZnVuY3Rpb24gZ2V0TmV4dCgpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldFZpZXdEYXRlKCk7XG4gICAgICAgIHZhciB0b01vbWVudCA9IHRoaXMudG9Nb21lbnQ7XG5cbiAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICBtb250aDogZnVuY3Rpb24gbW9udGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvTW9tZW50KGN1cnJlbnQpLmFkZCgxLCAnbW9udGgnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5ZWFyOiBmdW5jdGlvbiB5ZWFyKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b01vbWVudChjdXJyZW50KS5hZGQoMSwgJ3llYXInKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWNhZGU6IGZ1bmN0aW9uIGRlY2FkZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9Nb21lbnQoY3VycmVudCkuYWRkKDEwLCAneWVhcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVt0aGlzLmdldFZpZXdOYW1lKCldKCk7XG4gICAgfSxcblxuICAgIGdldFByZXY6IGZ1bmN0aW9uIGdldFByZXYoKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRWaWV3RGF0ZSgpO1xuICAgICAgICB2YXIgdG9Nb21lbnQgPSB0aGlzLnRvTW9tZW50O1xuXG4gICAgICAgIHJldHVybiAoe1xuICAgICAgICAgICAgbW9udGg6IGZ1bmN0aW9uIG1vbnRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b01vbWVudChjdXJyZW50KS5hZGQoLTEsICdtb250aCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHllYXI6IGZ1bmN0aW9uIHllYXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvTW9tZW50KGN1cnJlbnQpLmFkZCgtMSwgJ3llYXInKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWNhZGU6IGZ1bmN0aW9uIGRlY2FkZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9Nb21lbnQoY3VycmVudCkuYWRkKC0xMCwgJ3llYXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlbdGhpcy5nZXRWaWV3TmFtZSgpXSgpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVOYXZpZ2F0aW9uOiBmdW5jdGlvbiBoYW5kbGVOYXZpZ2F0aW9uKGRpcmVjdGlvbiwgZXZlbnQpIHtcbiAgICAgICAgdmFyIHZpZXdNb21lbnQgPSBkaXJlY3Rpb24gPT0gLTEgPyB0aGlzLmdldFByZXYoKSA6IHRoaXMuZ2V0TmV4dCgpO1xuXG4gICAgICAgIHRoaXMuc2V0Vmlld0RhdGUodmlld01vbWVudCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uTmF2ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IHZpZXdNb21lbnQuZm9ybWF0KHRoaXMucHJvcHMuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0Vmlld05hbWUoKTtcblxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk5hdih0ZXh0LCB2aWV3TW9tZW50LCB2aWV3LCBkaXJlY3Rpb24sIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVOYXZQcmV2OiBmdW5jdGlvbiBoYW5kbGVOYXZQcmV2KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvbigtMSwgZXZlbnQpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVOYXZOZXh0OiBmdW5jdGlvbiBoYW5kbGVOYXZOZXh0KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTmF2aWdhdGlvbigxLCBldmVudCk7XG4gICAgfSxcblxuICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGRhdGUsIGV2ZW50KSB7XG4gICAgICAgIGRhdGUgPSB0aGlzLnRvTW9tZW50KGRhdGUpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm5hdk9uRGF0ZUNsaWNrKSB7XG4gICAgICAgICAgICB2YXIgdmlld0RhdGUgPSB0aGlzLnRvTW9tZW50KHRoaXMuZ2V0Vmlld0RhdGUoKSk7XG5cbiAgICAgICAgICAgIC8vaXQncyBub3QgZW5vdWdoIHRvIGNvbXBhcmUgbW9udGhzLCBzaW5jZSB0aGUgeWVhciBjYW4gY2hhbmdlIGFzIHdlbGxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvL2Fsc28gaXQncyBvayB0byBoYXJkY29kZSB0aGUgZm9ybWF0IGhlcmVcbiAgICAgICAgICAgIHZhciB2aWV3TW9udGggPSB2aWV3RGF0ZS5mb3JtYXQoJ1lZWVktTU0nKTtcbiAgICAgICAgICAgIHZhciBkYXRlTW9udGggPSBkYXRlLmZvcm1hdCgnWVlZWS1NTScpO1xuXG4gICAgICAgICAgICBpZiAoZGF0ZU1vbnRoID4gdmlld01vbnRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOYXZOZXh0KGV2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0ZU1vbnRoIDwgdmlld01vbnRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOYXZQcmV2KGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0ID0gZGF0ZS5mb3JtYXQodGhpcy5wcm9wcy5kYXRlRm9ybWF0KTtcblxuICAgICAgICBpZiAoIWhhc093bih0aGlzLnByb3BzLCAnZGF0ZScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGF0ZTogdGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICA7KHRoaXMucHJvcHMub25DaGFuZ2UgfHwgZW1wdHlGbikodGV4dCwgZGF0ZSwgZXZlbnQpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdChkYXRlLCBldmVudCkge1xuICAgICAgICB2YXIgdmlld05hbWUgPSB0aGlzLmdldFZpZXdOYW1lKCk7XG5cbiAgICAgICAgdmFyIHByb3BlcnR5ID0gKHtcbiAgICAgICAgICAgIGRlY2FkZTogJ3llYXInLFxuICAgICAgICAgICAgeWVhcjogJ21vbnRoJ1xuICAgICAgICB9KVt2aWV3TmFtZV07XG5cbiAgICAgICAgdmFyIHZhbHVlID0gZGF0ZS5nZXQocHJvcGVydHkpO1xuICAgICAgICB2YXIgdmlld01vbWVudCA9IHRoaXMudG9Nb21lbnQodGhpcy5nZXRWaWV3RGF0ZSgpKS5zZXQocHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFByZXZWaWV3TmFtZSgpO1xuXG4gICAgICAgIHRoaXMuc2V0Vmlld0RhdGUodmlld01vbWVudCk7XG5cbiAgICAgICAgdGhpcy5zZXRWaWV3KHZpZXcpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFyIHRleHQgPSB2aWV3TW9tZW50LmZvcm1hdCh0aGlzLnByb3BzLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdCh0ZXh0LCB2aWV3TW9tZW50LCB2aWV3LCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn0pO1xuXG5EYXRlUGlja2VyLnZpZXdzID0gVmlld3M7XG5cbnZhciBQVCA9IFJlYWN0LlByb3BUeXBlcztcblxuRGF0ZVBpY2tlci5wcm9wVHlwZXMgPSB7XG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB1c2VyIHNlbGVjdHMgYSBkYXRlLlxuICAgICAqXG4gICAgICogQ2FsbGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVRleHQgRGF0ZSBmb3JtYXR0ZWQgYXMgc3RyaW5nXG4gICAgICogQHBhcmFtIHtNb21lbnR9IG1vbWVudCBNb21lbnQuanMgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIG9uQ2hhbmdlOiBQVC5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHVzZXIgbmF2aWdhdGVzIHRvIHRoZSBuZXh0L3ByZXYgbW9udGgveWVhci9kZWNhZGVcbiAgICAgKlxuICAgICAqIENhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1zOlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVUZXh0IERhdGUgZm9ybWF0dGVkIGFzIHN0cmluZ1xuICAgICAqIEBwYXJhbSB7TW9tZW50fSBtb21lbnQgTW9tZW50LmpzIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZpZXcgVGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgdmlldyAoZWc6IFwibW9udGhcIilcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uIDEgb3IgLTEuIDEgaWYgdGhlIHJpZ2h0IGFycm93LCB0byBuYXYgdG8gbmV4dCBwZXJpb2Qgd2FzIHByZXNzZWQuIC0xIGlmIHRoZSBsZWZ0IGFycm93LCB0byBuYXYgdG8gdGhlIHByZXYgcGVyaW9kIHdhcyBwcmVzc2VkLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25OYXY6IFBULmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgeWVhci9tb250aC5cbiAgICAgKlxuICAgICAqIENhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1zOlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVUZXh0IERhdGUgZm9ybWF0dGVkIGFzIHN0cmluZ1xuICAgICAqIEBwYXJhbSB7TW9tZW50fSBtb21lbnQgTW9tZW50LmpzIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZpZXcgVGhlIG5hbWUgb2YgdGhlIHZpZXcgZGlzcGxheWVkIGFmdGVyIGZvbGxvd2luZyB0aGUgc2VsZWN0aW9uLiBGb3Igbm93LCBlaXRoZXIgXCJ5ZWFyXCIgb3IgXCJtb250aFwiXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25TZWxlY3Q6IFBULmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIHJldHVybiBhIFJlYWN0IERPTSBmb3IgdGhlIGRheSBjZWxsLiBUaGUgZmlyc3QgcGFyYW0gaXMgdGhlIHByb3BzIG9iamVjdC5cbiAgICAgKiBZb3UgY2FuIHVzZSB0aGlzIHRvIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgd2hhdCBnZXRzIHJlbmRlcmVkIGZvciBhIGRheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXlQcm9wcyBUaGUgcHJvcHMgb2JqZWN0IHBhc3NlZCB0byBkYXkgcmVuZGVyaW5nXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgcmVuZGVyRGF5OiBQVC5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGNhbiBtYW5pcHVsYXRlIHRoZSBwcm9wcyBvYmplY3QgZm9yIGEgZGF5LCBhbmQgU0hPVUxEIHJldHVybiBhIHByb3BzIG9iamVjdCAoYSBuZXcgb25lLCBvciB0aGUgc2FtZSkuXG4gICAgICogVXNlIHRoaXMgZm9yIENVU1RPTSBEQVkgU1RZTElORy5cbiAgICAgKiBZb3UgY2FuIHVzZSB0aGlzIHRvIHRha2UgZnVsbCBjb250cm9sIG92ZXIgdGhlIHN0eWxlcy9jc3MgY2xhc3Nlcy9hdHRyaWJ1dGVzIGFwcGxpZWQgdG8gdGhlIGRheSBjZWxsIGluIHRoZSBtb250aCB2aWV3LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRheVByb3BzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBkYXlQcm9wc1xuICAgICAqXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIG9uUmVuZGVyRGF5OiBQVC5mdW5jLFxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAvKioqKioqKioqKiBWSUVXLXJlbGF0ZWQgcHJvcHMgKioqKioqKioqKioqL1xuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCB2aWV3IHRvIHNob3cgaW4gdGhlIHBpY2tlci4gVGhpcyBpcyBhbiB1bmNvbnRyb2xsZWQgcHJvcC5cbiAgICAgKiBJZiBub25lIHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgdmlldyB3aWxsIGJlIFwibW9udGhcIlxuICAgICAqXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBkZWZhdWx0VmlldzogUFQuc3RyaW5nLFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgdG8gc2hvdyBpbiB0aGUgcGlja2VyLiBUaGlzIGlzIGEgQ09OVFJPTExFRCBwcm9wIVxuICAgICAqXG4gICAgICogV2hlbiB1c2luZyB0aGlzIGNvbnRyb2xsZWQgcHJvcCwgbWFrZSBzdXJlIHlvdSB1cGRhdGUgaXQgd2hlbiBgb25WaWV3Q2hhbmdlYCBmdW5jdGlvbiBpcyBjYWxsZWRcbiAgICAgKiBpZiB5b3Ugd2FudCB0byBuYXZpZ2F0ZSB0byBhbm90aGVyIHZpZXcsIGFzIGV4cGVjdGVkLlxuICAgICAqXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICB2aWV3OiBQVC5zdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIG5hdmlnYXRpbmcgdG8gYW5vdGhlciB2aWV3IGRhdGUuXG4gICAgICpcbiAgICAgKiBDYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtczpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlVGV4dCBEYXRlIGZvcm1hdHRlZCBhcyBzdHJpbmdcbiAgICAgKiBAcGFyYW0ge01vbWVudH0gbW9tZW50IE1vbWVudC5qcyBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2aWV3IHRoZSBuYW1lIG9mIHRoZSB2aWV3IGRpc3BsYXllZCBhZnRlciB0aGUgbmF2aWdhdGlvbiBvY2N1cnMuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25WaWV3RGF0ZUNoYW5nZTogUFQuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgY2hhbmdlZC5cbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgdGhlIGNvbnRyb2xsZWQgYHZpZXdgIHByb3AsIG1ha2Ugc3VyZSB5b3UgdXBkYXRlIHRoZSBgdmlld2AgcHJvcCBpbiB0aGlzIGZ1bmN0aW9uIGlmIHlvdSB3YW50IHRvIG5hdmlnYXRlIHRvIGFub3RoZXIgdmlldywgYXMgZXhwZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmV4dFZpZXcgT25lIG9mIFwibW9udGhcIiwgXCJ5ZWFyXCIsIFwiZGVjYWRlXCJcbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBvblZpZXdDaGFuZ2U6IFBULmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0cyB0byB0cnVlLiBJZiBzcGVjaWZpZWQgYXMgZmFsc2UsIHdpbGwgbm90IG5hdmlnYXRlIHRvIHRoZSBkYXRlIHRoYXQgd2FzIGNsaWNrZWQsIGV2ZW4gaWYgdGhhdCBkYXRlIGlzIGluIHRoZSBwcmV2L25leHQgbW9udGhcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBuYXZPbkRhdGVDbGljazogUFQuYm9vbFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRlUGlja2VyOyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBvbktleVVwKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09ICdFbnRlcicpIHtcbiAgICAgIGZuKGV2ZW50KTtcbiAgICB9XG4gIH07XG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xudmFyIENPTkZJRyA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHVzZWQgdG8gY29udmVydCBhIGRhdGUgdG8gYSBtb21lbnQuXG4gKlxuICogSXQgYWNjZXB0cyBpbnB1dCBhcyBzcmluZywgZGF0ZSBvciBtb21lbnRcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmcvRGF0ZS9Nb21lbnR9IHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IFtkYXRlRm9ybWF0XSBpZiB2YWx1ZSBpcyBzdHJpbmcsIGl0IHdpbGwgYmUgcGFyc2VkIHRvIGEgbW9tZW50IHVzaW5nIHRoaXMgZm9ybWF0XG4gKiBAcGFyYW0gIHtPYmplY3R9IFtjb25maWddXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbY29uZmlnLnN0cmljdF0gd2hldGhlciB0byBwZXJmb3JtIHN0cmljdCBwYXJzaW5nIG9uIHN0cmluZ3NcbiAqIEByZXR1cm4ge01vbWVudH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsdWUsIGRhdGVGb3JtYXQsIGNvbmZpZykge1xuICAgIHZhciBzdHJpY3QgPSAhIShjb25maWcgJiYgY29uZmlnLnN0cmljdCk7XG4gICAgdmFyIGxvY2FsZSA9IGNvbmZpZyAmJiBjb25maWcubG9jYWxlO1xuXG4gICAgZGF0ZUZvcm1hdCA9IGRhdGVGb3JtYXQgfHwgQ09ORklHLmRhdGVGb3JtYXQ7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQodmFsdWUsIGRhdGVGb3JtYXQsIGxvY2FsZSwgc3RyaWN0KTtcbiAgICB9XG5cbiAgICAvLyByZXR1cm4gbW9tZW50LmlzTW9tZW50KHZhbHVlKT9cbiAgICAvLyBcdFx0XHR2YWx1ZTpcbiAgICByZXR1cm4gbW9tZW50KHZhbHVlID09IG51bGwgPyBuZXcgRGF0ZSgpIDogdmFsdWUsIHVuZGVmaW5lZCwgbG9jYWxlLCBzdHJpY3QpO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBDT05GSUcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcbnZhciBLRVlTID0gT2JqZWN0LmtleXMoQ09ORklHKTtcblxuZnVuY3Rpb24gY29weUxpc3Qoc3JjLCB0YXJnZXQsIGxpc3QpIHtcbiAgICBpZiAoc3JjKSB7XG4gICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNyY1trZXldO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29waWVzIGZyb20gZ2l2ZW4gc291cmNlIG9iamVjdFxuICogb24gdGhlIHJlc3VsdGluZyBvYmplY3Qgb25seSB0aGUgcHJvcGVydGllcyBhbHNvIGZvdW5kIGluIGNmZy5cbiAqXG4gKiBJZiBubyBjZmcgc3BlY2lmaWVkLCBDT05GSUcgaXMgYXNzdW1lZFxuICpcbiAqIEBwYXJhbSAge29iamVjdH0gc291cmNlXG4gKiBAcGFyYW0gIHtPYmplY3R9IFtjZmddIElmIG5vdCBzcGVjaWVkLCBDT05GSUcgd2lsbCBiZSB1c2VkXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFzQ29uZmlnKHNvdXJjZSwgY2ZnKSB7XG5cbiAgICB2YXIga2V5cyA9IEtFWVM7XG5cbiAgICBpZiAoY2ZnKSB7XG4gICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhjZmcpO1xuICAgIH1cblxuICAgIGNmZyA9IGNmZyB8fCBDT05GSUc7XG5cbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gYXNzaWduKHt9LCBjZmcpO1xuICAgIH1cblxuICAgIHJldHVybiBjb3B5TGlzdChzb3VyY2UsIGFzc2lnbih7fSwgY2ZnKSwga2V5cyk7XG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIENPTkZJRyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xudmFyIHRvTW9tZW50ID0gcmVxdWlyZSgnLi4vdG9Nb21lbnQnKTtcblxuZnVuY3Rpb24gZihtb20sIGZvcm1hdCkge1xuICAgIHJldHVybiB0b01vbWVudChtb20pLmZvcm1hdChmb3JtYXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBkYXk6IGZ1bmN0aW9uIGRheShtb20sIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gZihtb20sIGZvcm1hdCB8fCBDT05GSUcuZGF5Rm9ybWF0KTtcbiAgICB9LFxuXG4gICAgbW9udGg6IGZ1bmN0aW9uIG1vbnRoKG1vbSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBmKG1vbSwgZm9ybWF0IHx8IENPTkZJRy5tb250aEZvcm1hdCk7XG4gICAgfSxcblxuICAgIHllYXI6IGZ1bmN0aW9uIHllYXIobW9tLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGYobW9tLCBmb3JtYXQgfHwgQ09ORklHLnllYXJGb3JtYXQpO1xuICAgIH1cbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbnZhciBERUZBVUxUX1dFRUtfU1RBUlRfREFZID0gbW9tZW50KCkuc3RhcnRPZignd2VlaycpLmZvcm1hdCgnZCcpICogMTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRXZWVrRGF5TmFtZXMoc3RhcnREYXksIGxvY2FsZSkge1xuXG5cdHZhciB3ZWVrRGF5cztcblxuXHRpZiAobG9jYWxlKSB7XG5cdFx0dmFyIGRhdGEgPSBtb21lbnQubG9jYWxlRGF0YShsb2NhbGUpO1xuXG5cdFx0d2Vla0RheXMgPSBkYXRhICYmIGRhdGEuX3dlZWtkYXlzU2hvcnQgPyBkYXRhLl93ZWVrZGF5c1Nob3J0IDogd2Vla0RheXM7XG5cdH1cblxuXHR3ZWVrRGF5cyA9ICh3ZWVrRGF5cyB8fCBtb21lbnQud2Vla2RheXNTaG9ydCgpKS5jb25jYXQoKTtcblxuXHR2YXIgbmFtZXMgPSB3ZWVrRGF5cztcblx0dmFyIGluZGV4ID0gc3RhcnREYXkgPT0gbnVsbCA/IERFRkFVTFRfV0VFS19TVEFSVF9EQVkgOiBzdGFydERheTtcblxuXHR3aGlsZSAoaW5kZXggPiAwKSB7XG5cdFx0bmFtZXMucHVzaChuYW1lcy5zaGlmdCgpKTtcblx0XHRpbmRleC0tO1xuXHR9XG5cblx0cmV0dXJuIG5hbWVzO1xufTsiLCIvLyEgbW9tZW50LmpzXG4vLyEgdmVyc2lvbiA6IDIuMTEuMFxuLy8hIGF1dGhvcnMgOiBUaW0gV29vZCwgSXNrcmVuIENoZXJuZXYsIE1vbWVudC5qcyBjb250cmlidXRvcnNcbi8vISBsaWNlbnNlIDogTUlUXG4vLyEgbW9tZW50anMuY29tXG5cbjsoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIGdsb2JhbC5tb21lbnQgPSBmYWN0b3J5KClcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaG9va0NhbGxiYWNrO1xuXG4gICAgZnVuY3Rpb24gdXRpbHNfaG9va3NfX2hvb2tzICgpIHtcbiAgICAgICAgcmV0dXJuIGhvb2tDYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8vIFRoaXMgaXMgZG9uZSB0byByZWdpc3RlciB0aGUgbWV0aG9kIGNhbGxlZCB3aXRoIG1vbWVudCgpXG4gICAgLy8gd2l0aG91dCBjcmVhdGluZyBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXG4gICAgZnVuY3Rpb24gc2V0SG9va0NhbGxiYWNrIChjYWxsYmFjaykge1xuICAgICAgICBob29rQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0FycmF5KGlucHV0KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRGF0ZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBEYXRlIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IERhdGVdJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXAoYXJyLCBmbikge1xuICAgICAgICB2YXIgcmVzID0gW10sIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlcy5wdXNoKGZuKGFycltpXSwgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFzT3duUHJvcChhLCBiKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSwgYik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKGEsIGIpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBiKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcChiLCBpKSkge1xuICAgICAgICAgICAgICAgIGFbaV0gPSBiW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc093blByb3AoYiwgJ3RvU3RyaW5nJykpIHtcbiAgICAgICAgICAgIGEudG9TdHJpbmcgPSBiLnRvU3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc093blByb3AoYiwgJ3ZhbHVlT2YnKSkge1xuICAgICAgICAgICAgYS52YWx1ZU9mID0gYi52YWx1ZU9mO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlX3V0Y19fY3JlYXRlVVRDIChpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCwgdHJ1ZSkudXRjKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdFBhcnNpbmdGbGFncygpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBkZWVwIGNsb25lIHRoaXMgb2JqZWN0LlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW1wdHkgICAgICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICB1bnVzZWRUb2tlbnMgICAgOiBbXSxcbiAgICAgICAgICAgIHVudXNlZElucHV0ICAgICA6IFtdLFxuICAgICAgICAgICAgb3ZlcmZsb3cgICAgICAgIDogLTIsXG4gICAgICAgICAgICBjaGFyc0xlZnRPdmVyICAgOiAwLFxuICAgICAgICAgICAgbnVsbElucHV0ICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBpbnZhbGlkTW9udGggICAgOiBudWxsLFxuICAgICAgICAgICAgaW52YWxpZEZvcm1hdCAgIDogZmFsc2UsXG4gICAgICAgICAgICB1c2VySW52YWxpZGF0ZWQgOiBmYWxzZSxcbiAgICAgICAgICAgIGlzbyAgICAgICAgICAgICA6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGFyc2luZ0ZsYWdzKG0pIHtcbiAgICAgICAgaWYgKG0uX3BmID09IG51bGwpIHtcbiAgICAgICAgICAgIG0uX3BmID0gZGVmYXVsdFBhcnNpbmdGbGFncygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtLl9wZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZF9faXNWYWxpZChtKSB7XG4gICAgICAgIGlmIChtLl9pc1ZhbGlkID09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBmbGFncyA9IGdldFBhcnNpbmdGbGFncyhtKTtcbiAgICAgICAgICAgIG0uX2lzVmFsaWQgPSAhaXNOYU4obS5fZC5nZXRUaW1lKCkpICYmXG4gICAgICAgICAgICAgICAgZmxhZ3Mub3ZlcmZsb3cgPCAwICYmXG4gICAgICAgICAgICAgICAgIWZsYWdzLmVtcHR5ICYmXG4gICAgICAgICAgICAgICAgIWZsYWdzLmludmFsaWRNb250aCAmJlxuICAgICAgICAgICAgICAgICFmbGFncy5pbnZhbGlkV2Vla2RheSAmJlxuICAgICAgICAgICAgICAgICFmbGFncy5udWxsSW5wdXQgJiZcbiAgICAgICAgICAgICAgICAhZmxhZ3MuaW52YWxpZEZvcm1hdCAmJlxuICAgICAgICAgICAgICAgICFmbGFncy51c2VySW52YWxpZGF0ZWQ7XG5cbiAgICAgICAgICAgIGlmIChtLl9zdHJpY3QpIHtcbiAgICAgICAgICAgICAgICBtLl9pc1ZhbGlkID0gbS5faXNWYWxpZCAmJlxuICAgICAgICAgICAgICAgICAgICBmbGFncy5jaGFyc0xlZnRPdmVyID09PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzLnVudXNlZFRva2Vucy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MuYmlnSG91ciA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtLl9pc1ZhbGlkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkX19jcmVhdGVJbnZhbGlkIChmbGFncykge1xuICAgICAgICB2YXIgbSA9IGNyZWF0ZV91dGNfX2NyZWF0ZVVUQyhOYU4pO1xuICAgICAgICBpZiAoZmxhZ3MgIT0gbnVsbCkge1xuICAgICAgICAgICAgZXh0ZW5kKGdldFBhcnNpbmdGbGFncyhtKSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKG0pLnVzZXJJbnZhbGlkYXRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1VuZGVmaW5lZChpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQgPT09IHZvaWQgMDtcbiAgICB9XG5cbiAgICAvLyBQbHVnaW5zIHRoYXQgYWRkIHByb3BlcnRpZXMgc2hvdWxkIGFsc28gYWRkIHRoZSBrZXkgaGVyZSAobnVsbCB2YWx1ZSksXG4gICAgLy8gc28gd2UgY2FuIHByb3Blcmx5IGNsb25lIG91cnNlbHZlcy5cbiAgICB2YXIgbW9tZW50UHJvcGVydGllcyA9IHV0aWxzX2hvb2tzX19ob29rcy5tb21lbnRQcm9wZXJ0aWVzID0gW107XG5cbiAgICBmdW5jdGlvbiBjb3B5Q29uZmlnKHRvLCBmcm9tKSB7XG4gICAgICAgIHZhciBpLCBwcm9wLCB2YWw7XG5cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc0FNb21lbnRPYmplY3QpKSB7XG4gICAgICAgICAgICB0by5faXNBTW9tZW50T2JqZWN0ID0gZnJvbS5faXNBTW9tZW50T2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5faSkpIHtcbiAgICAgICAgICAgIHRvLl9pID0gZnJvbS5faTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2YpKSB7XG4gICAgICAgICAgICB0by5fZiA9IGZyb20uX2Y7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9sKSkge1xuICAgICAgICAgICAgdG8uX2wgPSBmcm9tLl9sO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fc3RyaWN0KSkge1xuICAgICAgICAgICAgdG8uX3N0cmljdCA9IGZyb20uX3N0cmljdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3R6bSkpIHtcbiAgICAgICAgICAgIHRvLl90em0gPSBmcm9tLl90em07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc1VUQykpIHtcbiAgICAgICAgICAgIHRvLl9pc1VUQyA9IGZyb20uX2lzVVRDO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fb2Zmc2V0KSkge1xuICAgICAgICAgICAgdG8uX29mZnNldCA9IGZyb20uX29mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3BmKSkge1xuICAgICAgICAgICAgdG8uX3BmID0gZ2V0UGFyc2luZ0ZsYWdzKGZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fbG9jYWxlKSkge1xuICAgICAgICAgICAgdG8uX2xvY2FsZSA9IGZyb20uX2xvY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtb21lbnRQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoaSBpbiBtb21lbnRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgcHJvcCA9IG1vbWVudFByb3BlcnRpZXNbaV07XG4gICAgICAgICAgICAgICAgdmFsID0gZnJvbVtwcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9bcHJvcF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH1cblxuICAgIHZhciB1cGRhdGVJblByb2dyZXNzID0gZmFsc2U7XG5cbiAgICAvLyBNb21lbnQgcHJvdG90eXBlIG9iamVjdFxuICAgIGZ1bmN0aW9uIE1vbWVudChjb25maWcpIHtcbiAgICAgICAgY29weUNvbmZpZyh0aGlzLCBjb25maWcpO1xuICAgICAgICB0aGlzLl9kID0gbmV3IERhdGUoY29uZmlnLl9kICE9IG51bGwgPyBjb25maWcuX2QuZ2V0VGltZSgpIDogTmFOKTtcbiAgICAgICAgLy8gUHJldmVudCBpbmZpbml0ZSBsb29wIGluIGNhc2UgdXBkYXRlT2Zmc2V0IGNyZWF0ZXMgbmV3IG1vbWVudFxuICAgICAgICAvLyBvYmplY3RzLlxuICAgICAgICBpZiAodXBkYXRlSW5Qcm9ncmVzcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgdXRpbHNfaG9va3NfX2hvb2tzLnVwZGF0ZU9mZnNldCh0aGlzKTtcbiAgICAgICAgICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzTW9tZW50IChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIE1vbWVudCB8fCAob2JqICE9IG51bGwgJiYgb2JqLl9pc0FNb21lbnRPYmplY3QgIT0gbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWJzRmxvb3IgKG51bWJlcikge1xuICAgICAgICBpZiAobnVtYmVyIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvSW50KGFyZ3VtZW50Rm9yQ29lcmNpb24pIHtcbiAgICAgICAgdmFyIGNvZXJjZWROdW1iZXIgPSArYXJndW1lbnRGb3JDb2VyY2lvbixcbiAgICAgICAgICAgIHZhbHVlID0gMDtcblxuICAgICAgICBpZiAoY29lcmNlZE51bWJlciAhPT0gMCAmJiBpc0Zpbml0ZShjb2VyY2VkTnVtYmVyKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBhYnNGbG9vcihjb2VyY2VkTnVtYmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBjb21wYXJlIHR3byBhcnJheXMsIHJldHVybiB0aGUgbnVtYmVyIG9mIGRpZmZlcmVuY2VzXG4gICAgZnVuY3Rpb24gY29tcGFyZUFycmF5cyhhcnJheTEsIGFycmF5MiwgZG9udENvbnZlcnQpIHtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGFycmF5MS5sZW5ndGgsIGFycmF5Mi5sZW5ndGgpLFxuICAgICAgICAgICAgbGVuZ3RoRGlmZiA9IE1hdGguYWJzKGFycmF5MS5sZW5ndGggLSBhcnJheTIubGVuZ3RoKSxcbiAgICAgICAgICAgIGRpZmZzID0gMCxcbiAgICAgICAgICAgIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKChkb250Q29udmVydCAmJiBhcnJheTFbaV0gIT09IGFycmF5MltpXSkgfHxcbiAgICAgICAgICAgICAgICAoIWRvbnRDb252ZXJ0ICYmIHRvSW50KGFycmF5MVtpXSkgIT09IHRvSW50KGFycmF5MltpXSkpKSB7XG4gICAgICAgICAgICAgICAgZGlmZnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlmZnMgKyBsZW5ndGhEaWZmO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIExvY2FsZSgpIHtcbiAgICB9XG5cbiAgICAvLyBpbnRlcm5hbCBzdG9yYWdlIGZvciBsb2NhbGUgY29uZmlnIGZpbGVzXG4gICAgdmFyIGxvY2FsZXMgPSB7fTtcbiAgICB2YXIgZ2xvYmFsTG9jYWxlO1xuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplTG9jYWxlKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5ID8ga2V5LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnXycsICctJykgOiBrZXk7XG4gICAgfVxuXG4gICAgLy8gcGljayB0aGUgbG9jYWxlIGZyb20gdGhlIGFycmF5XG4gICAgLy8gdHJ5IFsnZW4tYXUnLCAnZW4tZ2InXSBhcyAnZW4tYXUnLCAnZW4tZ2InLCAnZW4nLCBhcyBpbiBtb3ZlIHRocm91Z2ggdGhlIGxpc3QgdHJ5aW5nIGVhY2hcbiAgICAvLyBzdWJzdHJpbmcgZnJvbSBtb3N0IHNwZWNpZmljIHRvIGxlYXN0LCBidXQgbW92ZSB0byB0aGUgbmV4dCBhcnJheSBpdGVtIGlmIGl0J3MgYSBtb3JlIHNwZWNpZmljIHZhcmlhbnQgdGhhbiB0aGUgY3VycmVudCByb290XG4gICAgZnVuY3Rpb24gY2hvb3NlTG9jYWxlKG5hbWVzKSB7XG4gICAgICAgIHZhciBpID0gMCwgaiwgbmV4dCwgbG9jYWxlLCBzcGxpdDtcblxuICAgICAgICB3aGlsZSAoaSA8IG5hbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3BsaXQgPSBub3JtYWxpemVMb2NhbGUobmFtZXNbaV0pLnNwbGl0KCctJyk7XG4gICAgICAgICAgICBqID0gc3BsaXQubGVuZ3RoO1xuICAgICAgICAgICAgbmV4dCA9IG5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpICsgMV0pO1xuICAgICAgICAgICAgbmV4dCA9IG5leHQgPyBuZXh0LnNwbGl0KCctJykgOiBudWxsO1xuICAgICAgICAgICAgd2hpbGUgKGogPiAwKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxlID0gbG9hZExvY2FsZShzcGxpdC5zbGljZSgwLCBqKS5qb2luKCctJykpO1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgJiYgbmV4dC5sZW5ndGggPj0gaiAmJiBjb21wYXJlQXJyYXlzKHNwbGl0LCBuZXh0LCB0cnVlKSA+PSBqIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAvL3RoZSBuZXh0IGFycmF5IGl0ZW0gaXMgYmV0dGVyIHRoYW4gYSBzaGFsbG93ZXIgc3Vic3RyaW5nIG9mIHRoaXMgb25lXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZExvY2FsZShuYW1lKSB7XG4gICAgICAgIHZhciBvbGRMb2NhbGUgPSBudWxsO1xuICAgICAgICAvLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byByZWdpc3RlciBhbmQgbG9hZCBhbGwgdGhlIGxvY2FsZXMgaW4gTm9kZVxuICAgICAgICBpZiAoIWxvY2FsZXNbbmFtZV0gJiYgIWlzVW5kZWZpbmVkKG1vZHVsZSkgJiZcbiAgICAgICAgICAgICAgICBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb2xkTG9jYWxlID0gZ2xvYmFsTG9jYWxlLl9hYmJyO1xuICAgICAgICAgICAgICAgIHJlcXVpcmUoJy4vbG9jYWxlLycgKyBuYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIGRlZmluZUxvY2FsZSBjdXJyZW50bHkgYWxzbyBzZXRzIHRoZSBnbG9iYWwgbG9jYWxlLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHdhbnQgdG8gdW5kbyB0aGF0IGZvciBsYXp5IGxvYWRlZCBsb2NhbGVzXG4gICAgICAgICAgICAgICAgbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZShvbGRMb2NhbGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG4gICAgfVxuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGxvYWQgbG9jYWxlIGFuZCB0aGVuIHNldCB0aGUgZ2xvYmFsIGxvY2FsZS4gIElmXG4gICAgLy8gbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgaW4sIGl0IHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBnbG9iYWxcbiAgICAvLyBsb2NhbGUga2V5LlxuICAgIGZ1bmN0aW9uIGxvY2FsZV9sb2NhbGVzX19nZXRTZXRHbG9iYWxMb2NhbGUgKGtleSwgdmFsdWVzKSB7XG4gICAgICAgIHZhciBkYXRhO1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWVzKSkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gZGVmaW5lTG9jYWxlKGtleSwgdmFsdWVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAvLyBtb21lbnQuZHVyYXRpb24uX2xvY2FsZSA9IG1vbWVudC5fbG9jYWxlID0gZGF0YTtcbiAgICAgICAgICAgICAgICBnbG9iYWxMb2NhbGUgPSBkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdsb2JhbExvY2FsZS5fYWJicjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZpbmVMb2NhbGUgKG5hbWUsIHZhbHVlcykge1xuICAgICAgICBpZiAodmFsdWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZXMuYWJiciA9IG5hbWU7XG4gICAgICAgICAgICBsb2NhbGVzW25hbWVdID0gbG9jYWxlc1tuYW1lXSB8fCBuZXcgTG9jYWxlKCk7XG4gICAgICAgICAgICBsb2NhbGVzW25hbWVdLnNldCh2YWx1ZXMpO1xuXG4gICAgICAgICAgICAvLyBiYWNrd2FyZHMgY29tcGF0IGZvciBub3c6IGFsc28gc2V0IHRoZSBsb2NhbGVcbiAgICAgICAgICAgIGxvY2FsZV9sb2NhbGVzX19nZXRTZXRHbG9iYWxMb2NhbGUobmFtZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBsb2NhbGVzW25hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdXNlZnVsIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICBkZWxldGUgbG9jYWxlc1tuYW1lXTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyBsb2NhbGUgZGF0YVxuICAgIGZ1bmN0aW9uIGxvY2FsZV9sb2NhbGVzX19nZXRMb2NhbGUgKGtleSkge1xuICAgICAgICB2YXIgbG9jYWxlO1xuXG4gICAgICAgIGlmIChrZXkgJiYga2V5Ll9sb2NhbGUgJiYga2V5Ll9sb2NhbGUuX2FiYnIpIHtcbiAgICAgICAgICAgIGtleSA9IGtleS5fbG9jYWxlLl9hYmJyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWxMb2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQXJyYXkoa2V5KSkge1xuICAgICAgICAgICAgLy9zaG9ydC1jaXJjdWl0IGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICAgICAgbG9jYWxlID0gbG9hZExvY2FsZShrZXkpO1xuICAgICAgICAgICAgaWYgKGxvY2FsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXkgPSBba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaG9vc2VMb2NhbGUoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgYWxpYXNlcyA9IHt9O1xuXG4gICAgZnVuY3Rpb24gYWRkVW5pdEFsaWFzICh1bml0LCBzaG9ydGhhbmQpIHtcbiAgICAgICAgdmFyIGxvd2VyQ2FzZSA9IHVuaXQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgYWxpYXNlc1tsb3dlckNhc2VdID0gYWxpYXNlc1tsb3dlckNhc2UgKyAncyddID0gYWxpYXNlc1tzaG9ydGhhbmRdID0gdW5pdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVVbml0cyh1bml0cykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHVuaXRzID09PSAnc3RyaW5nJyA/IGFsaWFzZXNbdW5pdHNdIHx8IGFsaWFzZXNbdW5pdHMudG9Mb3dlckNhc2UoKV0gOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplT2JqZWN0VW5pdHMoaW5wdXRPYmplY3QpIHtcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJbnB1dCA9IHt9LFxuICAgICAgICAgICAgbm9ybWFsaXplZFByb3AsXG4gICAgICAgICAgICBwcm9wO1xuXG4gICAgICAgIGZvciAocHJvcCBpbiBpbnB1dE9iamVjdCkge1xuICAgICAgICAgICAgaWYgKGhhc093blByb3AoaW5wdXRPYmplY3QsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFByb3AgPSBub3JtYWxpemVVbml0cyhwcm9wKTtcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZFByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZElucHV0W25vcm1hbGl6ZWRQcm9wXSA9IGlucHV0T2JqZWN0W3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub3JtYWxpemVkSW5wdXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VHZXRTZXQgKHVuaXQsIGtlZXBUaW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZ2V0X3NldF9fc2V0KHRoaXMsIHVuaXQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIGtlZXBUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldF9zZXRfX2dldCh0aGlzLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRfc2V0X19nZXQgKG1vbSwgdW5pdCkge1xuICAgICAgICByZXR1cm4gbW9tLmlzVmFsaWQoKSA/XG4gICAgICAgICAgICBtb20uX2RbJ2dldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgdW5pdF0oKSA6IE5hTjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRfc2V0X19zZXQgKG1vbSwgdW5pdCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG1vbS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICBmdW5jdGlvbiBnZXRTZXQgKHVuaXRzLCB2YWx1ZSkge1xuICAgICAgICB2YXIgdW5pdDtcbiAgICAgICAgaWYgKHR5cGVvZiB1bml0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAodW5pdCBpbiB1bml0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHVuaXQsIHVuaXRzW3VuaXRdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpc1t1bml0c10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbdW5pdHNdKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB6ZXJvRmlsbChudW1iZXIsIHRhcmdldExlbmd0aCwgZm9yY2VTaWduKSB7XG4gICAgICAgIHZhciBhYnNOdW1iZXIgPSAnJyArIE1hdGguYWJzKG51bWJlciksXG4gICAgICAgICAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG4gICAgICAgICAgICBzaWduID0gbnVtYmVyID49IDA7XG4gICAgICAgIHJldHVybiAoc2lnbiA/IChmb3JjZVNpZ24gPyAnKycgOiAnJykgOiAnLScpICtcbiAgICAgICAgICAgIE1hdGgucG93KDEwLCBNYXRoLm1heCgwLCB6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgYWJzTnVtYmVyO1xuICAgIH1cblxuICAgIHZhciBmb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xtbT98c3M/fFN7MSw5fXx4fFh8eno/fFpaP3wuKS9nO1xuXG4gICAgdmFyIGxvY2FsRm9ybWF0dGluZ1Rva2VucyA9IC8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhMVFN8TFR8TEw/TD9MP3xsezEsNH0pL2c7XG5cbiAgICB2YXIgZm9ybWF0RnVuY3Rpb25zID0ge307XG5cbiAgICB2YXIgZm9ybWF0VG9rZW5GdW5jdGlvbnMgPSB7fTtcblxuICAgIC8vIHRva2VuOiAgICAnTSdcbiAgICAvLyBwYWRkZWQ6ICAgWydNTScsIDJdXG4gICAgLy8gb3JkaW5hbDogICdNbydcbiAgICAvLyBjYWxsYmFjazogZnVuY3Rpb24gKCkgeyB0aGlzLm1vbnRoKCkgKyAxIH1cbiAgICBmdW5jdGlvbiBhZGRGb3JtYXRUb2tlbiAodG9rZW4sIHBhZGRlZCwgb3JkaW5hbCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGZ1bmMgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbY2FsbGJhY2tdKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dID0gZnVuYztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFkZGVkKSB7XG4gICAgICAgICAgICBmb3JtYXRUb2tlbkZ1bmN0aW9uc1twYWRkZWRbMF1dID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB6ZXJvRmlsbChmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHBhZGRlZFsxXSwgcGFkZGVkWzJdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGluYWwpIHtcbiAgICAgICAgICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW29yZGluYWxdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgdG9rZW4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0Lm1hdGNoKC9cXFtbXFxzXFxTXS8pKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXlxcW3xcXF0kL2csICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZUZvcm1hdEZ1bmN0aW9uKGZvcm1hdCkge1xuICAgICAgICB2YXIgYXJyYXkgPSBmb3JtYXQubWF0Y2goZm9ybWF0dGluZ1Rva2VucyksIGksIGxlbmd0aDtcblxuICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldID0gZm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnJheVtpXSA9IHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoYXJyYXlbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtb20pIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSBhcnJheVtpXSBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gYXJyYXlbaV0uY2FsbChtb20sIGZvcm1hdCkgOiBhcnJheVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gZm9ybWF0IGRhdGUgdXNpbmcgbmF0aXZlIGRhdGUgb2JqZWN0XG4gICAgZnVuY3Rpb24gZm9ybWF0TW9tZW50KG0sIGZvcm1hdCkge1xuICAgICAgICBpZiAoIW0uaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdCA9IGV4cGFuZEZvcm1hdChmb3JtYXQsIG0ubG9jYWxlRGF0YSgpKTtcbiAgICAgICAgZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0gPSBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSB8fCBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KTtcblxuICAgICAgICByZXR1cm4gZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0obSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhwYW5kRm9ybWF0KGZvcm1hdCwgbG9jYWxlKSB7XG4gICAgICAgIHZhciBpID0gNTtcblxuICAgICAgICBmdW5jdGlvbiByZXBsYWNlTG9uZ0RhdGVGb3JtYXRUb2tlbnMoaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGUubG9uZ0RhdGVGb3JtYXQoaW5wdXQpIHx8IGlucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHdoaWxlIChpID49IDAgJiYgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLnRlc3QoZm9ybWF0KSkge1xuICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UobG9jYWxGb3JtYXR0aW5nVG9rZW5zLCByZXBsYWNlTG9uZ0RhdGVGb3JtYXRUb2tlbnMpO1xuICAgICAgICAgICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICBpIC09IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgIH1cblxuICAgIHZhciBtYXRjaDEgICAgICAgICA9IC9cXGQvOyAgICAgICAgICAgIC8vICAgICAgIDAgLSA5XG4gICAgdmFyIG1hdGNoMiAgICAgICAgID0gL1xcZFxcZC87ICAgICAgICAgIC8vICAgICAgMDAgLSA5OVxuICAgIHZhciBtYXRjaDMgICAgICAgICA9IC9cXGR7M30vOyAgICAgICAgIC8vICAgICAwMDAgLSA5OTlcbiAgICB2YXIgbWF0Y2g0ICAgICAgICAgPSAvXFxkezR9LzsgICAgICAgICAvLyAgICAwMDAwIC0gOTk5OVxuICAgIHZhciBtYXRjaDYgICAgICAgICA9IC9bKy1dP1xcZHs2fS87ICAgIC8vIC05OTk5OTkgLSA5OTk5OTlcbiAgICB2YXIgbWF0Y2gxdG8yICAgICAgPSAvXFxkXFxkPy87ICAgICAgICAgLy8gICAgICAgMCAtIDk5XG4gICAgdmFyIG1hdGNoM3RvNCAgICAgID0gL1xcZFxcZFxcZFxcZD8vOyAgICAgLy8gICAgIDk5OSAtIDk5OTlcbiAgICB2YXIgbWF0Y2g1dG82ICAgICAgPSAvXFxkXFxkXFxkXFxkXFxkXFxkPy87IC8vICAgOTk5OTkgLSA5OTk5OTlcbiAgICB2YXIgbWF0Y2gxdG8zICAgICAgPSAvXFxkezEsM30vOyAgICAgICAvLyAgICAgICAwIC0gOTk5XG4gICAgdmFyIG1hdGNoMXRvNCAgICAgID0gL1xcZHsxLDR9LzsgICAgICAgLy8gICAgICAgMCAtIDk5OTlcbiAgICB2YXIgbWF0Y2gxdG82ICAgICAgPSAvWystXT9cXGR7MSw2fS87ICAvLyAtOTk5OTk5IC0gOTk5OTk5XG5cbiAgICB2YXIgbWF0Y2hVbnNpZ25lZCAgPSAvXFxkKy87ICAgICAgICAgICAvLyAgICAgICAwIC0gaW5mXG4gICAgdmFyIG1hdGNoU2lnbmVkICAgID0gL1srLV0/XFxkKy87ICAgICAgLy8gICAgLWluZiAtIGluZlxuXG4gICAgdmFyIG1hdGNoT2Zmc2V0ICAgID0gL1p8WystXVxcZFxcZDo/XFxkXFxkL2dpOyAvLyArMDA6MDAgLTAwOjAwICswMDAwIC0wMDAwIG9yIFpcbiAgICB2YXIgbWF0Y2hTaG9ydE9mZnNldCA9IC9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/L2dpOyAvLyArMDAgLTAwICswMDowMCAtMDA6MDAgKzAwMDAgLTAwMDAgb3IgWlxuXG4gICAgdmFyIG1hdGNoVGltZXN0YW1wID0gL1srLV0/XFxkKyhcXC5cXGR7MSwzfSk/LzsgLy8gMTIzNDU2Nzg5IDEyMzQ1Njc4OS4xMjNcblxuICAgIC8vIGFueSB3b3JkIChvciB0d28pIGNoYXJhY3RlcnMgb3IgbnVtYmVycyBpbmNsdWRpbmcgdHdvL3RocmVlIHdvcmQgbW9udGggaW4gYXJhYmljLlxuICAgIC8vIGluY2x1ZGVzIHNjb3R0aXNoIGdhZWxpYyB0d28gd29yZCBhbmQgaHlwaGVuYXRlZCBtb250aHNcbiAgICB2YXIgbWF0Y2hXb3JkID0gL1swLTldKihhW21uXVxccz8pP1snYS16XFx1MDBBMC1cXHUwNUZGXFx1MDcwMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXFwtXSt8W1xcdTA2MDAtXFx1MDZGRlxcL10rKFxccyo/W1xcdTA2MDAtXFx1MDZGRl0rKXsxLDJ9L2k7XG5cblxuICAgIHZhciByZWdleGVzID0ge307XG5cbiAgICBmdW5jdGlvbiBhZGRSZWdleFRva2VuICh0b2tlbiwgcmVnZXgsIHN0cmljdFJlZ2V4KSB7XG4gICAgICAgIHJlZ2V4ZXNbdG9rZW5dID0gaXNGdW5jdGlvbihyZWdleCkgPyByZWdleCA6IGZ1bmN0aW9uIChpc1N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIChpc1N0cmljdCAmJiBzdHJpY3RSZWdleCkgPyBzdHJpY3RSZWdleCA6IHJlZ2V4O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFBhcnNlUmVnZXhGb3JUb2tlbiAodG9rZW4sIGNvbmZpZykge1xuICAgICAgICBpZiAoIWhhc093blByb3AocmVnZXhlcywgdG9rZW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCh1bmVzY2FwZUZvcm1hdCh0b2tlbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlZ2V4ZXNbdG9rZW5dKGNvbmZpZy5fc3RyaWN0LCBjb25maWcuX2xvY2FsZSk7XG4gICAgfVxuXG4gICAgLy8gQ29kZSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU2MTQ5My9pcy10aGVyZS1hLXJlZ2V4cC1lc2NhcGUtZnVuY3Rpb24taW4tamF2YXNjcmlwdFxuICAgIGZ1bmN0aW9uIHVuZXNjYXBlRm9ybWF0KHMpIHtcbiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgnXFxcXCcsICcnKS5yZXBsYWNlKC9cXFxcKFxcWyl8XFxcXChcXF0pfFxcWyhbXlxcXVxcW10qKVxcXXxcXFxcKC4pL2csIGZ1bmN0aW9uIChtYXRjaGVkLCBwMSwgcDIsIHAzLCBwNCkge1xuICAgICAgICAgICAgcmV0dXJuIHAxIHx8IHAyIHx8IHAzIHx8IHA0O1xuICAgICAgICB9KS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcbiAgICB9XG5cbiAgICB2YXIgdG9rZW5zID0ge307XG5cbiAgICBmdW5jdGlvbiBhZGRQYXJzZVRva2VuICh0b2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGksIGZ1bmMgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRva2VuID0gW3Rva2VuXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBhcnJheVtjYWxsYmFja10gPSB0b0ludChpbnB1dCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b2tlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG9rZW5zW3Rva2VuW2ldXSA9IGZ1bmM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRXZWVrUGFyc2VUb2tlbiAodG9rZW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIGFkZFBhcnNlVG9rZW4odG9rZW4sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbmZpZy5fdyA9IGNvbmZpZy5fdyB8fCB7fTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGlucHV0LCBjb25maWcuX3csIGNvbmZpZywgdG9rZW4pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbiwgaW5wdXQsIGNvbmZpZykge1xuICAgICAgICBpZiAoaW5wdXQgIT0gbnVsbCAmJiBoYXNPd25Qcm9wKHRva2VucywgdG9rZW4pKSB7XG4gICAgICAgICAgICB0b2tlbnNbdG9rZW5dKGlucHV0LCBjb25maWcuX2EsIGNvbmZpZywgdG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIFlFQVIgPSAwO1xuICAgIHZhciBNT05USCA9IDE7XG4gICAgdmFyIERBVEUgPSAyO1xuICAgIHZhciBIT1VSID0gMztcbiAgICB2YXIgTUlOVVRFID0gNDtcbiAgICB2YXIgU0VDT05EID0gNTtcbiAgICB2YXIgTUlMTElTRUNPTkQgPSA2O1xuICAgIHZhciBXRUVLID0gNztcbiAgICB2YXIgV0VFS0RBWSA9IDg7XG5cbiAgICBmdW5jdGlvbiBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggKyAxLCAwKSkuZ2V0VVRDRGF0ZSgpO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdNJywgWydNTScsIDJdLCAnTW8nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vbnRoKCkgKyAxO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ01NTScsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsIGZvcm1hdCk7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignTU1NTScsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRocyh0aGlzLCBmb3JtYXQpO1xuICAgIH0pO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCdtb250aCcsICdNJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdNJywgICAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdNTScsICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ01NTScsICBtYXRjaFdvcmQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ01NTU0nLCBtYXRjaFdvcmQpO1xuXG4gICAgYWRkUGFyc2VUb2tlbihbJ00nLCAnTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICBhcnJheVtNT05USF0gPSB0b0ludChpbnB1dCkgLSAxO1xuICAgIH0pO1xuXG4gICAgYWRkUGFyc2VUb2tlbihbJ01NTScsICdNTU1NJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgdmFyIG1vbnRoID0gY29uZmlnLl9sb2NhbGUubW9udGhzUGFyc2UoaW5wdXQsIHRva2VuLCBjb25maWcuX3N0cmljdCk7XG4gICAgICAgIC8vIGlmIHdlIGRpZG4ndCBmaW5kIGEgbW9udGggbmFtZSwgbWFyayB0aGUgZGF0ZSBhcyBpbnZhbGlkLlxuICAgICAgICBpZiAobW9udGggIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJyYXlbTU9OVEhdID0gbW9udGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkTW9udGggPSBpbnB1dDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTE9DQUxFU1xuXG4gICAgdmFyIE1PTlRIU19JTl9GT1JNQVQgPSAvRFtvRF0/KFxcW1teXFxbXFxdXSpcXF18XFxzKykrTU1NTT8vO1xuICAgIHZhciBkZWZhdWx0TG9jYWxlTW9udGhzID0gJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyk7XG4gICAgZnVuY3Rpb24gbG9jYWxlTW9udGhzIChtLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzKSA/IHRoaXMuX21vbnRoc1ttLm1vbnRoKCldIDpcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1tNT05USFNfSU5fRk9STUFULnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXVttLm1vbnRoKCldO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQgPSAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXB0X09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpO1xuICAgIGZ1bmN0aW9uIGxvY2FsZU1vbnRoc1Nob3J0IChtLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzU2hvcnQpID8gdGhpcy5fbW9udGhzU2hvcnRbbS5tb250aCgpXSA6XG4gICAgICAgICAgICB0aGlzLl9tb250aHNTaG9ydFtNT05USFNfSU5fRk9STUFULnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXVttLm1vbnRoKCldO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvY2FsZU1vbnRoc1BhcnNlIChtb250aE5hbWUsIGZvcm1hdCwgc3RyaWN0KSB7XG4gICAgICAgIHZhciBpLCBtb20sIHJlZ2V4O1xuXG4gICAgICAgIGlmICghdGhpcy5fbW9udGhzUGFyc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1BhcnNlID0gW107XG4gICAgICAgICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcbiAgICAgICAgICAgIG1vbSA9IGNyZWF0ZV91dGNfX2NyZWF0ZVVUQyhbMjAwMCwgaV0pO1xuICAgICAgICAgICAgaWYgKHN0cmljdCAmJiAhdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykucmVwbGFjZSgnLicsICcnKSArICckJywgJ2knKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3RyaWN0ICYmICF0aGlzLl9tb250aHNQYXJzZVtpXSkge1xuICAgICAgICAgICAgICAgIHJlZ2V4ID0gJ14nICsgdGhpcy5tb250aHMobW9tLCAnJykgKyAnfF4nICsgdGhpcy5tb250aHNTaG9ydChtb20sICcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsICcnKSwgJ2knKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRlc3QgdGhlIHJlZ2V4XG4gICAgICAgICAgICBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ01NTU0nICYmIHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ01NTScgJiYgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCAmJiB0aGlzLl9tb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1PTUVOVFNcblxuICAgIGZ1bmN0aW9uIHNldE1vbnRoIChtb20sIHZhbHVlKSB7XG4gICAgICAgIHZhciBkYXlPZk1vbnRoO1xuXG4gICAgICAgIGlmICghbW9tLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gTm8gb3BcbiAgICAgICAgICAgIHJldHVybiBtb207XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPOiBNb3ZlIHRoaXMgb3V0IG9mIGhlcmUhXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1vbS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgLy8gVE9ETzogQW5vdGhlciBzaWxlbnQgZmFpbHVyZT9cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRheU9mTW9udGggPSBNYXRoLm1pbihtb20uZGF0ZSgpLCBkYXlzSW5Nb250aChtb20ueWVhcigpLCB2YWx1ZSkpO1xuICAgICAgICBtb20uX2RbJ3NldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgJ01vbnRoJ10odmFsdWUsIGRheU9mTW9udGgpO1xuICAgICAgICByZXR1cm4gbW9tO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldE1vbnRoICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0TW9udGgodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgdXRpbHNfaG9va3NfX2hvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGdldF9zZXRfX2dldCh0aGlzLCAnTW9udGgnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERheXNJbk1vbnRoICgpIHtcbiAgICAgICAgcmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrT3ZlcmZsb3cgKG0pIHtcbiAgICAgICAgdmFyIG92ZXJmbG93O1xuICAgICAgICB2YXIgYSA9IG0uX2E7XG5cbiAgICAgICAgaWYgKGEgJiYgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID09PSAtMikge1xuICAgICAgICAgICAgb3ZlcmZsb3cgPVxuICAgICAgICAgICAgICAgIGFbTU9OVEhdICAgICAgIDwgMCB8fCBhW01PTlRIXSAgICAgICA+IDExICA/IE1PTlRIIDpcbiAgICAgICAgICAgICAgICBhW0RBVEVdICAgICAgICA8IDEgfHwgYVtEQVRFXSAgICAgICAgPiBkYXlzSW5Nb250aChhW1lFQVJdLCBhW01PTlRIXSkgPyBEQVRFIDpcbiAgICAgICAgICAgICAgICBhW0hPVVJdICAgICAgICA8IDAgfHwgYVtIT1VSXSAgICAgICAgPiAyNCB8fCAoYVtIT1VSXSA9PT0gMjQgJiYgKGFbTUlOVVRFXSAhPT0gMCB8fCBhW1NFQ09ORF0gIT09IDAgfHwgYVtNSUxMSVNFQ09ORF0gIT09IDApKSA/IEhPVVIgOlxuICAgICAgICAgICAgICAgIGFbTUlOVVRFXSAgICAgIDwgMCB8fCBhW01JTlVURV0gICAgICA+IDU5ICA/IE1JTlVURSA6XG4gICAgICAgICAgICAgICAgYVtTRUNPTkRdICAgICAgPCAwIHx8IGFbU0VDT05EXSAgICAgID4gNTkgID8gU0VDT05EIDpcbiAgICAgICAgICAgICAgICBhW01JTExJU0VDT05EXSA8IDAgfHwgYVtNSUxMSVNFQ09ORF0gPiA5OTkgPyBNSUxMSVNFQ09ORCA6XG4gICAgICAgICAgICAgICAgLTE7XG5cbiAgICAgICAgICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93RGF5T2ZZZWFyICYmIChvdmVyZmxvdyA8IFlFQVIgfHwgb3ZlcmZsb3cgPiBEQVRFKSkge1xuICAgICAgICAgICAgICAgIG92ZXJmbG93ID0gREFURTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla3MgJiYgb3ZlcmZsb3cgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cgPSBXRUVLO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrZGF5ICYmIG92ZXJmbG93ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG92ZXJmbG93ID0gV0VFS0RBWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID0gb3ZlcmZsb3c7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3YXJuKG1zZykge1xuICAgICAgICBpZiAodXRpbHNfaG9va3NfX2hvb2tzLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncyA9PT0gZmFsc2UgJiYgIWlzVW5kZWZpbmVkKGNvbnNvbGUpICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXByZWNhdGlvbiB3YXJuaW5nOiAnICsgbXNnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlcHJlY2F0ZShtc2csIGZuKSB7XG4gICAgICAgIHZhciBmaXJzdFRpbWUgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGZpcnN0VGltZSkge1xuICAgICAgICAgICAgICAgIHdhcm4obXNnICsgJ1xcbkFyZ3VtZW50czogJyArIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignLCAnKSArICdcXG4nICsgKG5ldyBFcnJvcigpKS5zdGFjayk7XG4gICAgICAgICAgICAgICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSwgZm4pO1xuICAgIH1cblxuICAgIHZhciBkZXByZWNhdGlvbnMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGRlcHJlY2F0ZVNpbXBsZShuYW1lLCBtc2cpIHtcbiAgICAgICAgaWYgKCFkZXByZWNhdGlvbnNbbmFtZV0pIHtcbiAgICAgICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgICAgIGRlcHJlY2F0aW9uc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1dGlsc19ob29rc19faG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzID0gZmFsc2U7XG5cbiAgICAvLyBpc28gODYwMSByZWdleFxuICAgIC8vIDAwMDAtMDAtMDAgMDAwMC1XMDAgb3IgMDAwMC1XMDAtMCArIFQgKyAwMCBvciAwMDowMCBvciAwMDowMDowMCBvciAwMDowMDowMC4wMDAgKyArMDA6MDAgb3IgKzAwMDAgb3IgKzAwKVxuICAgIHZhciBleHRlbmRlZElzb1JlZ2V4ID0gL15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KS0oPzpcXGRcXGQtXFxkXFxkfFdcXGRcXGQtXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86OlxcZFxcZCg/OjpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPy87XG4gICAgdmFyIGJhc2ljSXNvUmVnZXggPSAvXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pKD86XFxkXFxkXFxkXFxkfFdcXGRcXGRcXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzpcXGRcXGQoPzpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPy87XG5cbiAgICB2YXIgdHpSZWdleCA9IC9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/LztcblxuICAgIHZhciBpc29EYXRlcyA9IFtcbiAgICAgICAgWydZWVlZWVktTU0tREQnLCAvWystXVxcZHs2fS1cXGRcXGQtXFxkXFxkL10sXG4gICAgICAgIFsnWVlZWS1NTS1ERCcsIC9cXGR7NH0tXFxkXFxkLVxcZFxcZC9dLFxuICAgICAgICBbJ0dHR0ctW1ddV1ctRScsIC9cXGR7NH0tV1xcZFxcZC1cXGQvXSxcbiAgICAgICAgWydHR0dHLVtXXVdXJywgL1xcZHs0fS1XXFxkXFxkLywgZmFsc2VdLFxuICAgICAgICBbJ1lZWVktREREJywgL1xcZHs0fS1cXGR7M30vXSxcbiAgICAgICAgWydZWVlZLU1NJywgL1xcZHs0fS1cXGRcXGQvLCBmYWxzZV0sXG4gICAgICAgIFsnWVlZWVlZTU1ERCcsIC9bKy1dXFxkezEwfS9dLFxuICAgICAgICBbJ1lZWVlNTUREJywgL1xcZHs4fS9dLFxuICAgICAgICAvLyBZWVlZTU0gaXMgTk9UIGFsbG93ZWQgYnkgdGhlIHN0YW5kYXJkXG4gICAgICAgIFsnR0dHR1tXXVdXRScsIC9cXGR7NH1XXFxkezN9L10sXG4gICAgICAgIFsnR0dHR1tXXVdXJywgL1xcZHs0fVdcXGR7Mn0vLCBmYWxzZV0sXG4gICAgICAgIFsnWVlZWURERCcsIC9cXGR7N30vXVxuICAgIF07XG5cbiAgICAvLyBpc28gdGltZSBmb3JtYXRzIGFuZCByZWdleGVzXG4gICAgdmFyIGlzb1RpbWVzID0gW1xuICAgICAgICBbJ0hIOm1tOnNzLlNTU1MnLCAvXFxkXFxkOlxcZFxcZDpcXGRcXGRcXC5cXGQrL10sXG4gICAgICAgIFsnSEg6bW06c3MsU1NTUycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZCxcXGQrL10sXG4gICAgICAgIFsnSEg6bW06c3MnLCAvXFxkXFxkOlxcZFxcZDpcXGRcXGQvXSxcbiAgICAgICAgWydISDptbScsIC9cXGRcXGQ6XFxkXFxkL10sXG4gICAgICAgIFsnSEhtbXNzLlNTU1MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkXFwuXFxkKy9dLFxuICAgICAgICBbJ0hIbW1zcyxTU1NTJywgL1xcZFxcZFxcZFxcZFxcZFxcZCxcXGQrL10sXG4gICAgICAgIFsnSEhtbXNzJywgL1xcZFxcZFxcZFxcZFxcZFxcZC9dLFxuICAgICAgICBbJ0hIbW0nLCAvXFxkXFxkXFxkXFxkL10sXG4gICAgICAgIFsnSEgnLCAvXFxkXFxkL11cbiAgICBdO1xuXG4gICAgdmFyIGFzcE5ldEpzb25SZWdleCA9IC9eXFwvP0RhdGVcXCgoXFwtP1xcZCspL2k7XG5cbiAgICAvLyBkYXRlIGZyb20gaXNvIGZvcm1hdFxuICAgIGZ1bmN0aW9uIGNvbmZpZ0Zyb21JU08oY29uZmlnKSB7XG4gICAgICAgIHZhciBpLCBsLFxuICAgICAgICAgICAgc3RyaW5nID0gY29uZmlnLl9pLFxuICAgICAgICAgICAgbWF0Y2ggPSBleHRlbmRlZElzb1JlZ2V4LmV4ZWMoc3RyaW5nKSB8fCBiYXNpY0lzb1JlZ2V4LmV4ZWMoc3RyaW5nKSxcbiAgICAgICAgICAgIGFsbG93VGltZSwgZGF0ZUZvcm1hdCwgdGltZUZvcm1hdCwgdHpGb3JtYXQ7XG5cbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pc28gPSB0cnVlO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gaXNvRGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzb0RhdGVzW2ldWzFdLmV4ZWMobWF0Y2hbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQgPSBpc29EYXRlc1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dUaW1lID0gaXNvRGF0ZXNbaV1bMl0gIT09IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0ZUZvcm1hdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hdGNoWzNdKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IGlzb1RpbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNvVGltZXNbaV1bMV0uZXhlYyhtYXRjaFszXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoWzJdIHNob3VsZCBiZSAnVCcgb3Igc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVGb3JtYXQgPSAobWF0Y2hbMl0gfHwgJyAnKSArIGlzb1RpbWVzW2ldWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRpbWVGb3JtYXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYWxsb3dUaW1lICYmIHRpbWVGb3JtYXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRjaFs0XSkge1xuICAgICAgICAgICAgICAgIGlmICh0elJlZ2V4LmV4ZWMobWF0Y2hbNF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHR6Rm9ybWF0ID0gJ1onO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnLl9mID0gZGF0ZUZvcm1hdCArICh0aW1lRm9ybWF0IHx8ICcnKSArICh0ekZvcm1hdCB8fCAnJyk7XG4gICAgICAgICAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRhdGUgZnJvbSBpc28gZm9ybWF0IG9yIGZhbGxiYWNrXG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZyhjb25maWcpIHtcbiAgICAgICAgdmFyIG1hdGNoZWQgPSBhc3BOZXRKc29uUmVnZXguZXhlYyhjb25maWcuX2kpO1xuXG4gICAgICAgIGlmIChtYXRjaGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSgrbWF0Y2hlZFsxXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25maWdGcm9tSVNPKGNvbmZpZyk7XG4gICAgICAgIGlmIChjb25maWcuX2lzVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnLl9pc1ZhbGlkO1xuICAgICAgICAgICAgdXRpbHNfaG9va3NfX2hvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1dGlsc19ob29rc19faG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2sgPSBkZXByZWNhdGUoXG4gICAgICAgICdtb21lbnQgY29uc3RydWN0aW9uIGZhbGxzIGJhY2sgdG8ganMgRGF0ZS4gVGhpcyBpcyAnICtcbiAgICAgICAgJ2Rpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBjb21pbmcgbWFqb3IgJyArXG4gICAgICAgICdyZWxlYXNlLiBQbGVhc2UgcmVmZXIgdG8gJyArXG4gICAgICAgICdodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTQwNyBmb3IgbW9yZSBpbmZvLicsXG4gICAgICAgIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGNvbmZpZy5faSArIChjb25maWcuX3VzZVVUQyA/ICcgVVRDJyA6ICcnKSk7XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlRGF0ZSAoeSwgbSwgZCwgaCwgTSwgcywgbXMpIHtcbiAgICAgICAgLy9jYW4ndCBqdXN0IGFwcGx5KCkgdG8gY3JlYXRlIGEgZGF0ZTpcbiAgICAgICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4MTM0OC9pbnN0YW50aWF0aW5nLWEtamF2YXNjcmlwdC1vYmplY3QtYnktY2FsbGluZy1wcm90b3R5cGUtY29uc3RydWN0b3ItYXBwbHlcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh5LCBtLCBkLCBoLCBNLCBzLCBtcyk7XG5cbiAgICAgICAgLy90aGUgZGF0ZSBjb25zdHJ1Y3RvciByZW1hcHMgeWVhcnMgMC05OSB0byAxOTAwLTE5OTlcbiAgICAgICAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwICYmIGlzRmluaXRlKGRhdGUuZ2V0RnVsbFllYXIoKSkpIHtcbiAgICAgICAgICAgIGRhdGUuc2V0RnVsbFllYXIoeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVVRDRGF0ZSAoeSkge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuXG4gICAgICAgIC8vdGhlIERhdGUuVVRDIGZ1bmN0aW9uIHJlbWFwcyB5ZWFycyAwLTk5IHRvIDE5MDAtMTk5OVxuICAgICAgICBpZiAoeSA8IDEwMCAmJiB5ID49IDAgJiYgaXNGaW5pdGUoZGF0ZS5nZXRVVENGdWxsWWVhcigpKSkge1xuICAgICAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1lZJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueWVhcigpICUgMTAwO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZJywgICA0XSwgICAgICAgMCwgJ3llYXInKTtcbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1lZWVlZJywgIDVdLCAgICAgICAwLCAneWVhcicpO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVlZJywgNiwgdHJ1ZV0sIDAsICd5ZWFyJyk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ3llYXInLCAneScpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbignWScsICAgICAgbWF0Y2hTaWduZWQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1lZJywgICAgIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdZWVlZJywgICBtYXRjaDF0bzQsIG1hdGNoNCk7XG4gICAgYWRkUmVnZXhUb2tlbignWVlZWVknLCAgbWF0Y2gxdG82LCBtYXRjaDYpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1lZWVlZWScsIG1hdGNoMXRvNiwgbWF0Y2g2KTtcblxuICAgIGFkZFBhcnNlVG9rZW4oWydZWVlZWScsICdZWVlZWVknXSwgWUVBUik7XG4gICAgYWRkUGFyc2VUb2tlbignWVlZWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICAgICAgYXJyYXlbWUVBUl0gPSBpbnB1dC5sZW5ndGggPT09IDIgPyB1dGlsc19ob29rc19faG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpIDogdG9JbnQoaW5wdXQpO1xuICAgIH0pO1xuICAgIGFkZFBhcnNlVG9rZW4oJ1lZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICBhcnJheVtZRUFSXSA9IHV0aWxzX2hvb2tzX19ob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCk7XG4gICAgfSk7XG5cbiAgICAvLyBIRUxQRVJTXG5cbiAgICBmdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHtcbiAgICAgICAgcmV0dXJuIGlzTGVhcFllYXIoeWVhcikgPyAzNjYgOiAzNjU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7XG4gICAgICAgIHJldHVybiAoeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCkgfHwgeWVhciAlIDQwMCA9PT0gMDtcbiAgICB9XG5cbiAgICAvLyBIT09LU1xuXG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnBhcnNlVHdvRGlnaXRZZWFyID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB0b0ludChpbnB1dCkgKyAodG9JbnQoaW5wdXQpID4gNjggPyAxOTAwIDogMjAwMCk7XG4gICAgfTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIHZhciBnZXRTZXRZZWFyID0gbWFrZUdldFNldCgnRnVsbFllYXInLCBmYWxzZSk7XG5cbiAgICBmdW5jdGlvbiBnZXRJc0xlYXBZZWFyICgpIHtcbiAgICAgICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKCkpO1xuICAgIH1cblxuICAgIC8vIHN0YXJ0LW9mLWZpcnN0LXdlZWsgLSBzdGFydC1vZi15ZWFyXG4gICAgZnVuY3Rpb24gZmlyc3RXZWVrT2Zmc2V0KHllYXIsIGRvdywgZG95KSB7XG4gICAgICAgIHZhciAvLyBmaXJzdC13ZWVrIGRheSAtLSB3aGljaCBqYW51YXJ5IGlzIGFsd2F5cyBpbiB0aGUgZmlyc3Qgd2VlayAoNCBmb3IgaXNvLCAxIGZvciBvdGhlcilcbiAgICAgICAgICAgIGZ3ZCA9IDcgKyBkb3cgLSBkb3ksXG4gICAgICAgICAgICAvLyBmaXJzdC13ZWVrIGRheSBsb2NhbCB3ZWVrZGF5IC0tIHdoaWNoIGxvY2FsIHdlZWtkYXkgaXMgZndkXG4gICAgICAgICAgICBmd2RsdyA9ICg3ICsgY3JlYXRlVVRDRGF0ZSh5ZWFyLCAwLCBmd2QpLmdldFVUQ0RheSgpIC0gZG93KSAlIDc7XG5cbiAgICAgICAgcmV0dXJuIC1md2RsdyArIGZ3ZCAtIDE7XG4gICAgfVxuXG4gICAgLy9odHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGUjQ2FsY3VsYXRpbmdfYV9kYXRlX2dpdmVuX3RoZV95ZWFyLjJDX3dlZWtfbnVtYmVyX2FuZF93ZWVrZGF5XG4gICAgZnVuY3Rpb24gZGF5T2ZZZWFyRnJvbVdlZWtzKHllYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KSB7XG4gICAgICAgIHZhciBsb2NhbFdlZWtkYXkgPSAoNyArIHdlZWtkYXkgLSBkb3cpICUgNyxcbiAgICAgICAgICAgIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpLFxuICAgICAgICAgICAgZGF5T2ZZZWFyID0gMSArIDcgKiAod2VlayAtIDEpICsgbG9jYWxXZWVrZGF5ICsgd2Vla09mZnNldCxcbiAgICAgICAgICAgIHJlc1llYXIsIHJlc0RheU9mWWVhcjtcblxuICAgICAgICBpZiAoZGF5T2ZZZWFyIDw9IDApIHtcbiAgICAgICAgICAgIHJlc1llYXIgPSB5ZWFyIC0gMTtcbiAgICAgICAgICAgIHJlc0RheU9mWWVhciA9IGRheXNJblllYXIocmVzWWVhcikgKyBkYXlPZlllYXI7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyKSkge1xuICAgICAgICAgICAgcmVzWWVhciA9IHllYXIgKyAxO1xuICAgICAgICAgICAgcmVzRGF5T2ZZZWFyID0gZGF5T2ZZZWFyIC0gZGF5c0luWWVhcih5ZWFyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc1llYXIgPSB5ZWFyO1xuICAgICAgICAgICAgcmVzRGF5T2ZZZWFyID0gZGF5T2ZZZWFyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHllYXI6IHJlc1llYXIsXG4gICAgICAgICAgICBkYXlPZlllYXI6IHJlc0RheU9mWWVhclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdlZWtPZlllYXIobW9tLCBkb3csIGRveSkge1xuICAgICAgICB2YXIgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldChtb20ueWVhcigpLCBkb3csIGRveSksXG4gICAgICAgICAgICB3ZWVrID0gTWF0aC5mbG9vcigobW9tLmRheU9mWWVhcigpIC0gd2Vla09mZnNldCAtIDEpIC8gNykgKyAxLFxuICAgICAgICAgICAgcmVzV2VlaywgcmVzWWVhcjtcblxuICAgICAgICBpZiAod2VlayA8IDEpIHtcbiAgICAgICAgICAgIHJlc1llYXIgPSBtb20ueWVhcigpIC0gMTtcbiAgICAgICAgICAgIHJlc1dlZWsgPSB3ZWVrICsgd2Vla3NJblllYXIocmVzWWVhciwgZG93LCBkb3kpO1xuICAgICAgICB9IGVsc2UgaWYgKHdlZWsgPiB3ZWVrc0luWWVhcihtb20ueWVhcigpLCBkb3csIGRveSkpIHtcbiAgICAgICAgICAgIHJlc1dlZWsgPSB3ZWVrIC0gd2Vla3NJblllYXIobW9tLnllYXIoKSwgZG93LCBkb3kpO1xuICAgICAgICAgICAgcmVzWWVhciA9IG1vbS55ZWFyKCkgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzWWVhciA9IG1vbS55ZWFyKCk7XG4gICAgICAgICAgICByZXNXZWVrID0gd2VlaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3ZWVrOiByZXNXZWVrLFxuICAgICAgICAgICAgeWVhcjogcmVzWWVhclxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdlZWtzSW5ZZWFyKHllYXIsIGRvdywgZG95KSB7XG4gICAgICAgIHZhciB3ZWVrT2Zmc2V0ID0gZmlyc3RXZWVrT2Zmc2V0KHllYXIsIGRvdywgZG95KSxcbiAgICAgICAgICAgIHdlZWtPZmZzZXROZXh0ID0gZmlyc3RXZWVrT2Zmc2V0KHllYXIgKyAxLCBkb3csIGRveSk7XG4gICAgICAgIHJldHVybiAoZGF5c0luWWVhcih5ZWFyKSAtIHdlZWtPZmZzZXQgKyB3ZWVrT2Zmc2V0TmV4dCkgLyA3O1xuICAgIH1cblxuICAgIC8vIFBpY2sgdGhlIGZpcnN0IGRlZmluZWQgb2YgdHdvIG9yIHRocmVlIGFyZ3VtZW50cy5cbiAgICBmdW5jdGlvbiBkZWZhdWx0cyhhLCBiLCBjKSB7XG4gICAgICAgIGlmIChhICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGN1cnJlbnREYXRlQXJyYXkoY29uZmlnKSB7XG4gICAgICAgIC8vIGhvb2tzIGlzIGFjdHVhbGx5IHRoZSBleHBvcnRlZCBtb21lbnQgb2JqZWN0XG4gICAgICAgIHZhciBub3dWYWx1ZSA9IG5ldyBEYXRlKHV0aWxzX2hvb2tzX19ob29rcy5ub3coKSk7XG4gICAgICAgIGlmIChjb25maWcuX3VzZVVUQykge1xuICAgICAgICAgICAgcmV0dXJuIFtub3dWYWx1ZS5nZXRVVENGdWxsWWVhcigpLCBub3dWYWx1ZS5nZXRVVENNb250aCgpLCBub3dWYWx1ZS5nZXRVVENEYXRlKCldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbbm93VmFsdWUuZ2V0RnVsbFllYXIoKSwgbm93VmFsdWUuZ2V0TW9udGgoKSwgbm93VmFsdWUuZ2V0RGF0ZSgpXTtcbiAgICB9XG5cbiAgICAvLyBjb252ZXJ0IGFuIGFycmF5IHRvIGEgZGF0ZS5cbiAgICAvLyB0aGUgYXJyYXkgc2hvdWxkIG1pcnJvciB0aGUgcGFyYW1ldGVycyBiZWxvd1xuICAgIC8vIG5vdGU6IGFsbCB2YWx1ZXMgcGFzdCB0aGUgeWVhciBhcmUgb3B0aW9uYWwgYW5kIHdpbGwgZGVmYXVsdCB0byB0aGUgbG93ZXN0IHBvc3NpYmxlIHZhbHVlLlxuICAgIC8vIFt5ZWFyLCBtb250aCwgZGF5ICwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kXVxuICAgIGZ1bmN0aW9uIGNvbmZpZ0Zyb21BcnJheSAoY29uZmlnKSB7XG4gICAgICAgIHZhciBpLCBkYXRlLCBpbnB1dCA9IFtdLCBjdXJyZW50RGF0ZSwgeWVhclRvVXNlO1xuXG4gICAgICAgIGlmIChjb25maWcuX2QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnREYXRlID0gY3VycmVudERhdGVBcnJheShjb25maWcpO1xuXG4gICAgICAgIC8vY29tcHV0ZSBkYXkgb2YgdGhlIHllYXIgZnJvbSB3ZWVrcyBhbmQgd2Vla2RheXNcbiAgICAgICAgaWYgKGNvbmZpZy5fdyAmJiBjb25maWcuX2FbREFURV0gPT0gbnVsbCAmJiBjb25maWcuX2FbTU9OVEhdID09IG51bGwpIHtcbiAgICAgICAgICAgIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9pZiB0aGUgZGF5IG9mIHRoZSB5ZWFyIGlzIHNldCwgZmlndXJlIG91dCB3aGF0IGl0IGlzXG4gICAgICAgIGlmIChjb25maWcuX2RheU9mWWVhcikge1xuICAgICAgICAgICAgeWVhclRvVXNlID0gZGVmYXVsdHMoY29uZmlnLl9hW1lFQVJdLCBjdXJyZW50RGF0ZVtZRUFSXSk7XG5cbiAgICAgICAgICAgIGlmIChjb25maWcuX2RheU9mWWVhciA+IGRheXNJblllYXIoeWVhclRvVXNlKSkge1xuICAgICAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd0RheU9mWWVhciA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRhdGUgPSBjcmVhdGVVVENEYXRlKHllYXJUb1VzZSwgMCwgY29uZmlnLl9kYXlPZlllYXIpO1xuICAgICAgICAgICAgY29uZmlnLl9hW01PTlRIXSA9IGRhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgICAgIGNvbmZpZy5fYVtEQVRFXSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmYXVsdCB0byBjdXJyZW50IGRhdGUuXG4gICAgICAgIC8vICogaWYgbm8geWVhciwgbW9udGgsIGRheSBvZiBtb250aCBhcmUgZ2l2ZW4sIGRlZmF1bHQgdG8gdG9kYXlcbiAgICAgICAgLy8gKiBpZiBkYXkgb2YgbW9udGggaXMgZ2l2ZW4sIGRlZmF1bHQgbW9udGggYW5kIHllYXJcbiAgICAgICAgLy8gKiBpZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBvbmx5IHllYXJcbiAgICAgICAgLy8gKiBpZiB5ZWFyIGlzIGdpdmVuLCBkb24ndCBkZWZhdWx0IGFueXRoaW5nXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAzICYmIGNvbmZpZy5fYVtpXSA9PSBudWxsOyArK2kpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gY3VycmVudERhdGVbaV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBaZXJvIG91dCB3aGF0ZXZlciB3YXMgbm90IGRlZmF1bHRlZCwgaW5jbHVkaW5nIHRpbWVcbiAgICAgICAgZm9yICg7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gKGNvbmZpZy5fYVtpXSA9PSBudWxsKSA/IChpID09PSAyID8gMSA6IDApIDogY29uZmlnLl9hW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIDI0OjAwOjAwLjAwMFxuICAgICAgICBpZiAoY29uZmlnLl9hW0hPVVJdID09PSAyNCAmJlxuICAgICAgICAgICAgICAgIGNvbmZpZy5fYVtNSU5VVEVdID09PSAwICYmXG4gICAgICAgICAgICAgICAgY29uZmlnLl9hW1NFQ09ORF0gPT09IDAgJiZcbiAgICAgICAgICAgICAgICBjb25maWcuX2FbTUlMTElTRUNPTkRdID09PSAwKSB7XG4gICAgICAgICAgICBjb25maWcuX25leHREYXkgPSB0cnVlO1xuICAgICAgICAgICAgY29uZmlnLl9hW0hPVVJdID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbmZpZy5fZCA9IChjb25maWcuX3VzZVVUQyA/IGNyZWF0ZVVUQ0RhdGUgOiBjcmVhdGVEYXRlKS5hcHBseShudWxsLCBpbnB1dCk7XG4gICAgICAgIC8vIEFwcGx5IHRpbWV6b25lIG9mZnNldCBmcm9tIGlucHV0LiBUaGUgYWN0dWFsIHV0Y09mZnNldCBjYW4gYmUgY2hhbmdlZFxuICAgICAgICAvLyB3aXRoIHBhcnNlWm9uZS5cbiAgICAgICAgaWYgKGNvbmZpZy5fdHptICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fZC5zZXRVVENNaW51dGVzKGNvbmZpZy5fZC5nZXRVVENNaW51dGVzKCkgLSBjb25maWcuX3R6bSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLl9uZXh0RGF5KSB7XG4gICAgICAgICAgICBjb25maWcuX2FbSE9VUl0gPSAyNDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpIHtcbiAgICAgICAgdmFyIHcsIHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSwgdGVtcCwgd2Vla2RheU92ZXJmbG93O1xuXG4gICAgICAgIHcgPSBjb25maWcuX3c7XG4gICAgICAgIGlmICh3LkdHICE9IG51bGwgfHwgdy5XICE9IG51bGwgfHwgdy5FICE9IG51bGwpIHtcbiAgICAgICAgICAgIGRvdyA9IDE7XG4gICAgICAgICAgICBkb3kgPSA0O1xuXG4gICAgICAgICAgICAvLyBUT0RPOiBXZSBuZWVkIHRvIHRha2UgdGhlIGN1cnJlbnQgaXNvV2Vla1llYXIsIGJ1dCB0aGF0IGRlcGVuZHMgb25cbiAgICAgICAgICAgIC8vIGhvdyB3ZSBpbnRlcnByZXQgbm93IChsb2NhbCwgdXRjLCBmaXhlZCBvZmZzZXQpLiBTbyBjcmVhdGVcbiAgICAgICAgICAgIC8vIGEgbm93IHZlcnNpb24gb2YgY3VycmVudCBjb25maWcgKHRha2UgbG9jYWwvdXRjL29mZnNldCBmbGFncywgYW5kXG4gICAgICAgICAgICAvLyBjcmVhdGUgbm93KS5cbiAgICAgICAgICAgIHdlZWtZZWFyID0gZGVmYXVsdHMody5HRywgY29uZmlnLl9hW1lFQVJdLCB3ZWVrT2ZZZWFyKGxvY2FsX19jcmVhdGVMb2NhbCgpLCAxLCA0KS55ZWFyKTtcbiAgICAgICAgICAgIHdlZWsgPSBkZWZhdWx0cyh3LlcsIDEpO1xuICAgICAgICAgICAgd2Vla2RheSA9IGRlZmF1bHRzKHcuRSwgMSk7XG4gICAgICAgICAgICBpZiAod2Vla2RheSA8IDEgfHwgd2Vla2RheSA+IDcpIHtcbiAgICAgICAgICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG93ID0gY29uZmlnLl9sb2NhbGUuX3dlZWsuZG93O1xuICAgICAgICAgICAgZG95ID0gY29uZmlnLl9sb2NhbGUuX3dlZWsuZG95O1xuXG4gICAgICAgICAgICB3ZWVrWWVhciA9IGRlZmF1bHRzKHcuZ2csIGNvbmZpZy5fYVtZRUFSXSwgd2Vla09mWWVhcihsb2NhbF9fY3JlYXRlTG9jYWwoKSwgZG93LCBkb3kpLnllYXIpO1xuICAgICAgICAgICAgd2VlayA9IGRlZmF1bHRzKHcudywgMSk7XG5cbiAgICAgICAgICAgIGlmICh3LmQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIHdlZWtkYXkgLS0gbG93IGRheSBudW1iZXJzIGFyZSBjb25zaWRlcmVkIG5leHQgd2Vla1xuICAgICAgICAgICAgICAgIHdlZWtkYXkgPSB3LmQ7XG4gICAgICAgICAgICAgICAgaWYgKHdlZWtkYXkgPCAwIHx8IHdlZWtkYXkgPiA2KSB7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh3LmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGxvY2FsIHdlZWtkYXkgLS0gY291bnRpbmcgc3RhcnRzIGZyb20gYmVnaW5pbmcgb2Ygd2Vla1xuICAgICAgICAgICAgICAgIHdlZWtkYXkgPSB3LmUgKyBkb3c7XG4gICAgICAgICAgICAgICAgaWYgKHcuZSA8IDAgfHwgdy5lID4gNikge1xuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBiZWdpbmluZyBvZiB3ZWVrXG4gICAgICAgICAgICAgICAgd2Vla2RheSA9IGRvdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod2VlayA8IDEgfHwgd2VlayA+IHdlZWtzSW5ZZWFyKHdlZWtZZWFyLCBkb3csIGRveSkpIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd1dlZWtzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh3ZWVrZGF5T3ZlcmZsb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93V2Vla2RheSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZW1wID0gZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gICAgICAgICAgICBjb25maWcuX2FbWUVBUl0gPSB0ZW1wLnllYXI7XG4gICAgICAgICAgICBjb25maWcuX2RheU9mWWVhciA9IHRlbXAuZGF5T2ZZZWFyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29uc3RhbnQgdGhhdCByZWZlcnMgdG8gdGhlIElTTyBzdGFuZGFyZFxuICAgIHV0aWxzX2hvb2tzX19ob29rcy5JU09fODYwMSA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgLy8gZGF0ZSBmcm9tIHN0cmluZyBhbmQgZm9ybWF0IHN0cmluZ1xuICAgIGZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKSB7XG4gICAgICAgIC8vIFRPRE86IE1vdmUgdGhpcyB0byBhbm90aGVyIHBhcnQgb2YgdGhlIGNyZWF0aW9uIGZsb3cgdG8gcHJldmVudCBjaXJjdWxhciBkZXBzXG4gICAgICAgIGlmIChjb25maWcuX2YgPT09IHV0aWxzX2hvb2tzX19ob29rcy5JU09fODYwMSkge1xuICAgICAgICAgICAgY29uZmlnRnJvbUlTTyhjb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uZmlnLl9hID0gW107XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5ID0gdHJ1ZTtcblxuICAgICAgICAvLyBUaGlzIGFycmF5IGlzIHVzZWQgdG8gbWFrZSBhIERhdGUsIGVpdGhlciB3aXRoIGBuZXcgRGF0ZWAgb3IgYERhdGUuVVRDYFxuICAgICAgICB2YXIgc3RyaW5nID0gJycgKyBjb25maWcuX2ksXG4gICAgICAgICAgICBpLCBwYXJzZWRJbnB1dCwgdG9rZW5zLCB0b2tlbiwgc2tpcHBlZCxcbiAgICAgICAgICAgIHN0cmluZ0xlbmd0aCA9IHN0cmluZy5sZW5ndGgsXG4gICAgICAgICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoID0gMDtcblxuICAgICAgICB0b2tlbnMgPSBleHBhbmRGb3JtYXQoY29uZmlnLl9mLCBjb25maWcuX2xvY2FsZSkubWF0Y2goZm9ybWF0dGluZ1Rva2VucykgfHwgW107XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgICAgICBwYXJzZWRJbnB1dCA9IChzdHJpbmcubWF0Y2goZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLCBjb25maWcpKSB8fCBbXSlbMF07XG4gICAgICAgICAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICBza2lwcGVkID0gc3RyaW5nLnN1YnN0cigwLCBzdHJpbmcuaW5kZXhPZihwYXJzZWRJbnB1dCkpO1xuICAgICAgICAgICAgICAgIGlmIChza2lwcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChza2lwcGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSArIHBhcnNlZElucHV0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdG90YWxQYXJzZWRJbnB1dExlbmd0aCArPSBwYXJzZWRJbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkb24ndCBwYXJzZSBpZiBpdCdzIG5vdCBhIGtub3duIHRva2VuXG4gICAgICAgICAgICBpZiAoZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZElucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRUb2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZFRpbWVUb0FycmF5RnJvbVRva2VuKHRva2VuLCBwYXJzZWRJbnB1dCwgY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5fc3RyaWN0ICYmICFwYXJzZWRJbnB1dCkge1xuICAgICAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCByZW1haW5pbmcgdW5wYXJzZWQgaW5wdXQgbGVuZ3RoIHRvIHRoZSBzdHJpbmdcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuY2hhcnNMZWZ0T3ZlciA9IHN0cmluZ0xlbmd0aCAtIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGg7XG4gICAgICAgIGlmIChzdHJpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChzdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2xlYXIgXzEyaCBmbGFnIGlmIGhvdXIgaXMgPD0gMTJcbiAgICAgICAgaWYgKGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPT09IHRydWUgJiZcbiAgICAgICAgICAgICAgICBjb25maWcuX2FbSE9VUl0gPD0gMTIgJiZcbiAgICAgICAgICAgICAgICBjb25maWcuX2FbSE9VUl0gPiAwKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBtZXJpZGllbVxuICAgICAgICBjb25maWcuX2FbSE9VUl0gPSBtZXJpZGllbUZpeFdyYXAoY29uZmlnLl9sb2NhbGUsIGNvbmZpZy5fYVtIT1VSXSwgY29uZmlnLl9tZXJpZGllbSk7XG5cbiAgICAgICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gICAgICAgIGNoZWNrT3ZlcmZsb3coY29uZmlnKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIG1lcmlkaWVtRml4V3JhcCAobG9jYWxlLCBob3VyLCBtZXJpZGllbSkge1xuICAgICAgICB2YXIgaXNQbTtcblxuICAgICAgICBpZiAobWVyaWRpZW0gPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gbm90aGluZyB0byBkb1xuICAgICAgICAgICAgcmV0dXJuIGhvdXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2FsZS5tZXJpZGllbUhvdXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsZS5tZXJpZGllbUhvdXIoaG91ciwgbWVyaWRpZW0pO1xuICAgICAgICB9IGVsc2UgaWYgKGxvY2FsZS5pc1BNICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrXG4gICAgICAgICAgICBpc1BtID0gbG9jYWxlLmlzUE0obWVyaWRpZW0pO1xuICAgICAgICAgICAgaWYgKGlzUG0gJiYgaG91ciA8IDEyKSB7XG4gICAgICAgICAgICAgICAgaG91ciArPSAxMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQbSAmJiBob3VyID09PSAxMikge1xuICAgICAgICAgICAgICAgIGhvdXIgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhvdXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIG5vdCBzdXBwb3NlZCB0byBoYXBwZW5cbiAgICAgICAgICAgIHJldHVybiBob3VyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGF0ZSBmcm9tIHN0cmluZyBhbmQgYXJyYXkgb2YgZm9ybWF0IHN0cmluZ3NcbiAgICBmdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKSB7XG4gICAgICAgIHZhciB0ZW1wQ29uZmlnLFxuICAgICAgICAgICAgYmVzdE1vbWVudCxcblxuICAgICAgICAgICAgc2NvcmVUb0JlYXQsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgY3VycmVudFNjb3JlO1xuXG4gICAgICAgIGlmIChjb25maWcuX2YubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkRm9ybWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKE5hTik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29uZmlnLl9mLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjdXJyZW50U2NvcmUgPSAwO1xuICAgICAgICAgICAgdGVtcENvbmZpZyA9IGNvcHlDb25maWcoe30sIGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLl91c2VVVEMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRlbXBDb25maWcuX3VzZVVUQyA9IGNvbmZpZy5fdXNlVVRDO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGVtcENvbmZpZy5fZiA9IGNvbmZpZy5fZltpXTtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQodGVtcENvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdmFsaWRfX2lzVmFsaWQodGVtcENvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW55IGlucHV0IHRoYXQgd2FzIG5vdCBwYXJzZWQgYWRkIGEgcGVuYWx0eSBmb3IgdGhhdCBmb3JtYXRcbiAgICAgICAgICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuY2hhcnNMZWZ0T3ZlcjtcblxuICAgICAgICAgICAgLy9vciB0b2tlbnNcbiAgICAgICAgICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykudW51c2VkVG9rZW5zLmxlbmd0aCAqIDEwO1xuXG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuc2NvcmUgPSBjdXJyZW50U2NvcmU7XG5cbiAgICAgICAgICAgIGlmIChzY29yZVRvQmVhdCA9PSBudWxsIHx8IGN1cnJlbnRTY29yZSA8IHNjb3JlVG9CZWF0KSB7XG4gICAgICAgICAgICAgICAgc2NvcmVUb0JlYXQgPSBjdXJyZW50U2NvcmU7XG4gICAgICAgICAgICAgICAgYmVzdE1vbWVudCA9IHRlbXBDb25maWc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBleHRlbmQoY29uZmlnLCBiZXN0TW9tZW50IHx8IHRlbXBDb25maWcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKSB7XG4gICAgICAgIGlmIChjb25maWcuX2QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gbm9ybWFsaXplT2JqZWN0VW5pdHMoY29uZmlnLl9pKTtcbiAgICAgICAgY29uZmlnLl9hID0gbWFwKFtpLnllYXIsIGkubW9udGgsIGkuZGF5IHx8IGkuZGF0ZSwgaS5ob3VyLCBpLm1pbnV0ZSwgaS5zZWNvbmQsIGkubWlsbGlzZWNvbmRdLCBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqICYmIHBhcnNlSW50KG9iaiwgMTApO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVGcm9tQ29uZmlnIChjb25maWcpIHtcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBNb21lbnQoY2hlY2tPdmVyZmxvdyhwcmVwYXJlQ29uZmlnKGNvbmZpZykpKTtcbiAgICAgICAgaWYgKHJlcy5fbmV4dERheSkge1xuICAgICAgICAgICAgLy8gQWRkaW5nIGlzIHNtYXJ0IGVub3VnaCBhcm91bmQgRFNUXG4gICAgICAgICAgICByZXMuYWRkKDEsICdkJyk7XG4gICAgICAgICAgICByZXMuX25leHREYXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXBhcmVDb25maWcgKGNvbmZpZykge1xuICAgICAgICB2YXIgaW5wdXQgPSBjb25maWcuX2ksXG4gICAgICAgICAgICBmb3JtYXQgPSBjb25maWcuX2Y7XG5cbiAgICAgICAgY29uZmlnLl9sb2NhbGUgPSBjb25maWcuX2xvY2FsZSB8fCBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKGNvbmZpZy5fbCk7XG5cbiAgICAgICAgaWYgKGlucHV0ID09PSBudWxsIHx8IChmb3JtYXQgPT09IHVuZGVmaW5lZCAmJiBpbnB1dCA9PT0gJycpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRfX2NyZWF0ZUludmFsaWQoe251bGxJbnB1dDogdHJ1ZX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbmZpZy5faSA9IGlucHV0ID0gY29uZmlnLl9sb2NhbGUucHJlcGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTW9tZW50KGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb21lbnQoY2hlY2tPdmVyZmxvdyhpbnB1dCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZm9ybWF0KSkge1xuICAgICAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEFycmF5KGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0KSB7XG4gICAgICAgICAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEYXRlKGlucHV0KSkge1xuICAgICAgICAgICAgY29uZmlnLl9kID0gaW5wdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25maWdGcm9tSW5wdXQoY29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsaWRfX2lzVmFsaWQoY29uZmlnKSkge1xuICAgICAgICAgICAgY29uZmlnLl9kID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbUlucHV0KGNvbmZpZykge1xuICAgICAgICB2YXIgaW5wdXQgPSBjb25maWcuX2k7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSh1dGlsc19ob29rc19faG9va3Mubm93KCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRGF0ZShpbnB1dCkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKCtpbnB1dCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uZmlnRnJvbVN0cmluZyhjb25maWcpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICBjb25maWcuX2EgPSBtYXAoaW5wdXQuc2xpY2UoMCksIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQob2JqLCAxMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21BcnJheShjb25maWcpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihpbnB1dCkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25maWdGcm9tT2JqZWN0KGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGlucHV0KSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIGZyb20gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxvY2FsT3JVVEMgKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCBpc1VUQykge1xuICAgICAgICB2YXIgYyA9IHt9O1xuXG4gICAgICAgIGlmICh0eXBlb2YobG9jYWxlKSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBzdHJpY3QgPSBsb2NhbGU7XG4gICAgICAgICAgICBsb2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb2JqZWN0IGNvbnN0cnVjdGlvbiBtdXN0IGJlIGRvbmUgdGhpcyB3YXkuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDIzXG4gICAgICAgIGMuX2lzQU1vbWVudE9iamVjdCA9IHRydWU7XG4gICAgICAgIGMuX3VzZVVUQyA9IGMuX2lzVVRDID0gaXNVVEM7XG4gICAgICAgIGMuX2wgPSBsb2NhbGU7XG4gICAgICAgIGMuX2kgPSBpbnB1dDtcbiAgICAgICAgYy5fZiA9IGZvcm1hdDtcbiAgICAgICAgYy5fc3RyaWN0ID0gc3RyaWN0O1xuXG4gICAgICAgIHJldHVybiBjcmVhdGVGcm9tQ29uZmlnKGMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvY2FsX19jcmVhdGVMb2NhbCAoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvdG90eXBlTWluID0gZGVwcmVjYXRlKFxuICAgICAgICAgJ21vbWVudCgpLm1pbiBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1pbiBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTU0OCcsXG4gICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgdmFyIG90aGVyID0gbG9jYWxfX2NyZWF0ZUxvY2FsLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIgPCB0aGlzID8gdGhpcyA6IG90aGVyO1xuICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZF9fY3JlYXRlSW52YWxpZCgpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgKTtcblxuICAgIHZhciBwcm90b3R5cGVNYXggPSBkZXByZWNhdGUoXG4gICAgICAgICdtb21lbnQoKS5tYXggaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE1NDgnLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBsb2NhbF9fY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3RoZXIgPiB0aGlzID8gdGhpcyA6IG90aGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRfX2NyZWF0ZUludmFsaWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBQaWNrIGEgbW9tZW50IG0gZnJvbSBtb21lbnRzIHNvIHRoYXQgbVtmbl0ob3RoZXIpIGlzIHRydWUgZm9yIGFsbFxuICAgIC8vIG90aGVyLiBUaGlzIHJlbGllcyBvbiB0aGUgZnVuY3Rpb24gZm4gdG8gYmUgdHJhbnNpdGl2ZS5cbiAgICAvL1xuICAgIC8vIG1vbWVudHMgc2hvdWxkIGVpdGhlciBiZSBhbiBhcnJheSBvZiBtb21lbnQgb2JqZWN0cyBvciBhbiBhcnJheSwgd2hvc2VcbiAgICAvLyBmaXJzdCBlbGVtZW50IGlzIGFuIGFycmF5IG9mIG1vbWVudCBvYmplY3RzLlxuICAgIGZ1bmN0aW9uIHBpY2tCeShmbiwgbW9tZW50cykge1xuICAgICAgICB2YXIgcmVzLCBpO1xuICAgICAgICBpZiAobW9tZW50cy5sZW5ndGggPT09IDEgJiYgaXNBcnJheShtb21lbnRzWzBdKSkge1xuICAgICAgICAgICAgbW9tZW50cyA9IG1vbWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtb21lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsX19jcmVhdGVMb2NhbCgpO1xuICAgICAgICB9XG4gICAgICAgIHJlcyA9IG1vbWVudHNbMF07XG4gICAgICAgIGZvciAoaSA9IDE7IGkgPCBtb21lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoIW1vbWVudHNbaV0uaXNWYWxpZCgpIHx8IG1vbWVudHNbaV1bZm5dKHJlcykpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBtb21lbnRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogVXNlIFtdLnNvcnQgaW5zdGVhZD9cbiAgICBmdW5jdGlvbiBtaW4gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblxuICAgICAgICByZXR1cm4gcGlja0J5KCdpc0JlZm9yZScsIGFyZ3MpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1heCAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgICAgIHJldHVybiBwaWNrQnkoJ2lzQWZ0ZXInLCBhcmdzKTtcbiAgICB9XG5cbiAgICB2YXIgbm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKyhuZXcgRGF0ZSgpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRHVyYXRpb24gKGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBub3JtYWxpemVkSW5wdXQgPSBub3JtYWxpemVPYmplY3RVbml0cyhkdXJhdGlvbiksXG4gICAgICAgICAgICB5ZWFycyA9IG5vcm1hbGl6ZWRJbnB1dC55ZWFyIHx8IDAsXG4gICAgICAgICAgICBxdWFydGVycyA9IG5vcm1hbGl6ZWRJbnB1dC5xdWFydGVyIHx8IDAsXG4gICAgICAgICAgICBtb250aHMgPSBub3JtYWxpemVkSW5wdXQubW9udGggfHwgMCxcbiAgICAgICAgICAgIHdlZWtzID0gbm9ybWFsaXplZElucHV0LndlZWsgfHwgMCxcbiAgICAgICAgICAgIGRheXMgPSBub3JtYWxpemVkSW5wdXQuZGF5IHx8IDAsXG4gICAgICAgICAgICBob3VycyA9IG5vcm1hbGl6ZWRJbnB1dC5ob3VyIHx8IDAsXG4gICAgICAgICAgICBtaW51dGVzID0gbm9ybWFsaXplZElucHV0Lm1pbnV0ZSB8fCAwLFxuICAgICAgICAgICAgc2Vjb25kcyA9IG5vcm1hbGl6ZWRJbnB1dC5zZWNvbmQgfHwgMCxcbiAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IG5vcm1hbGl6ZWRJbnB1dC5taWxsaXNlY29uZCB8fCAwO1xuXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uIGZvciBkYXRlQWRkUmVtb3ZlXG4gICAgICAgIHRoaXMuX21pbGxpc2Vjb25kcyA9ICttaWxsaXNlY29uZHMgK1xuICAgICAgICAgICAgc2Vjb25kcyAqIDFlMyArIC8vIDEwMDBcbiAgICAgICAgICAgIG1pbnV0ZXMgKiA2ZTQgKyAvLyAxMDAwICogNjBcbiAgICAgICAgICAgIGhvdXJzICogMzZlNTsgLy8gMTAwMCAqIDYwICogNjBcbiAgICAgICAgLy8gQmVjYXVzZSBvZiBkYXRlQWRkUmVtb3ZlIHRyZWF0cyAyNCBob3VycyBhcyBkaWZmZXJlbnQgZnJvbSBhXG4gICAgICAgIC8vIGRheSB3aGVuIHdvcmtpbmcgYXJvdW5kIERTVCwgd2UgbmVlZCB0byBzdG9yZSB0aGVtIHNlcGFyYXRlbHlcbiAgICAgICAgdGhpcy5fZGF5cyA9ICtkYXlzICtcbiAgICAgICAgICAgIHdlZWtzICogNztcbiAgICAgICAgLy8gSXQgaXMgaW1wb3NzaWJsZSB0cmFuc2xhdGUgbW9udGhzIGludG8gZGF5cyB3aXRob3V0IGtub3dpbmdcbiAgICAgICAgLy8gd2hpY2ggbW9udGhzIHlvdSBhcmUgYXJlIHRhbGtpbmcgYWJvdXQsIHNvIHdlIGhhdmUgdG8gc3RvcmVcbiAgICAgICAgLy8gaXQgc2VwYXJhdGVseS5cbiAgICAgICAgdGhpcy5fbW9udGhzID0gK21vbnRocyArXG4gICAgICAgICAgICBxdWFydGVycyAqIDMgK1xuICAgICAgICAgICAgeWVhcnMgKiAxMjtcblxuICAgICAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAgICAgdGhpcy5fbG9jYWxlID0gbG9jYWxlX2xvY2FsZXNfX2dldExvY2FsZSgpO1xuXG4gICAgICAgIHRoaXMuX2J1YmJsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRHVyYXRpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRHVyYXRpb247XG4gICAgfVxuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgZnVuY3Rpb24gb2Zmc2V0ICh0b2tlbiwgc2VwYXJhdG9yKSB7XG4gICAgICAgIGFkZEZvcm1hdFRva2VuKHRva2VuLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy51dGNPZmZzZXQoKTtcbiAgICAgICAgICAgIHZhciBzaWduID0gJysnO1xuICAgICAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAtb2Zmc2V0O1xuICAgICAgICAgICAgICAgIHNpZ24gPSAnLSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2lnbiArIHplcm9GaWxsKH5+KG9mZnNldCAvIDYwKSwgMikgKyBzZXBhcmF0b3IgKyB6ZXJvRmlsbCh+fihvZmZzZXQpICUgNjAsIDIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvZmZzZXQoJ1onLCAnOicpO1xuICAgIG9mZnNldCgnWlonLCAnJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdaJywgIG1hdGNoU2hvcnRPZmZzZXQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1paJywgbWF0Y2hTaG9ydE9mZnNldCk7XG4gICAgYWRkUGFyc2VUb2tlbihbJ1onLCAnWlonXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZy5fdXNlVVRDID0gdHJ1ZTtcbiAgICAgICAgY29uZmlnLl90em0gPSBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoU2hvcnRPZmZzZXQsIGlucHV0KTtcbiAgICB9KTtcblxuICAgIC8vIEhFTFBFUlNcblxuICAgIC8vIHRpbWV6b25lIGNodW5rZXJcbiAgICAvLyAnKzEwOjAwJyA+IFsnMTAnLCAgJzAwJ11cbiAgICAvLyAnLTE1MzAnICA+IFsnLTE1JywgJzMwJ11cbiAgICB2YXIgY2h1bmtPZmZzZXQgPSAvKFtcXCtcXC1dfFxcZFxcZCkvZ2k7XG5cbiAgICBmdW5jdGlvbiBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoZXIsIHN0cmluZykge1xuICAgICAgICB2YXIgbWF0Y2hlcyA9ICgoc3RyaW5nIHx8ICcnKS5tYXRjaChtYXRjaGVyKSB8fCBbXSk7XG4gICAgICAgIHZhciBjaHVuayAgID0gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdIHx8IFtdO1xuICAgICAgICB2YXIgcGFydHMgICA9IChjaHVuayArICcnKS5tYXRjaChjaHVua09mZnNldCkgfHwgWyctJywgMCwgMF07XG4gICAgICAgIHZhciBtaW51dGVzID0gKyhwYXJ0c1sxXSAqIDYwKSArIHRvSW50KHBhcnRzWzJdKTtcblxuICAgICAgICByZXR1cm4gcGFydHNbMF0gPT09ICcrJyA/IG1pbnV0ZXMgOiAtbWludXRlcztcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYSBtb21lbnQgZnJvbSBpbnB1dCwgdGhhdCBpcyBsb2NhbC91dGMvem9uZSBlcXVpdmFsZW50IHRvIG1vZGVsLlxuICAgIGZ1bmN0aW9uIGNsb25lV2l0aE9mZnNldChpbnB1dCwgbW9kZWwpIHtcbiAgICAgICAgdmFyIHJlcywgZGlmZjtcbiAgICAgICAgaWYgKG1vZGVsLl9pc1VUQykge1xuICAgICAgICAgICAgcmVzID0gbW9kZWwuY2xvbmUoKTtcbiAgICAgICAgICAgIGRpZmYgPSAoaXNNb21lbnQoaW5wdXQpIHx8IGlzRGF0ZShpbnB1dCkgPyAraW5wdXQgOiArbG9jYWxfX2NyZWF0ZUxvY2FsKGlucHV0KSkgLSAoK3Jlcyk7XG4gICAgICAgICAgICAvLyBVc2UgbG93LWxldmVsIGFwaSwgYmVjYXVzZSB0aGlzIGZuIGlzIGxvdy1sZXZlbCBhcGkuXG4gICAgICAgICAgICByZXMuX2Quc2V0VGltZSgrcmVzLl9kICsgZGlmZik7XG4gICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MudXBkYXRlT2Zmc2V0KHJlcywgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQpLmxvY2FsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREYXRlT2Zmc2V0IChtKSB7XG4gICAgICAgIC8vIE9uIEZpcmVmb3guMjQgRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIGEgZmxvYXRpbmcgcG9pbnQuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L3B1bGwvMTg3MVxuICAgICAgICByZXR1cm4gLU1hdGgucm91bmQobS5fZC5nZXRUaW1lem9uZU9mZnNldCgpIC8gMTUpICogMTU7XG4gICAgfVxuXG4gICAgLy8gSE9PS1NcblxuICAgIC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgYSBtb21lbnQgaXMgbXV0YXRlZC5cbiAgICAvLyBJdCBpcyBpbnRlbmRlZCB0byBrZWVwIHRoZSBvZmZzZXQgaW4gc3luYyB3aXRoIHRoZSB0aW1lem9uZS5cbiAgICB1dGlsc19ob29rc19faG9va3MudXBkYXRlT2Zmc2V0ID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICAvLyBrZWVwTG9jYWxUaW1lID0gdHJ1ZSBtZWFucyBvbmx5IGNoYW5nZSB0aGUgdGltZXpvbmUsIHdpdGhvdXRcbiAgICAvLyBhZmZlY3RpbmcgdGhlIGxvY2FsIGhvdXIuIFNvIDU6MzE6MjYgKzAzMDAgLS1bdXRjT2Zmc2V0KDIsIHRydWUpXS0tPlxuICAgIC8vIDU6MzE6MjYgKzAyMDAgSXQgaXMgcG9zc2libGUgdGhhdCA1OjMxOjI2IGRvZXNuJ3QgZXhpc3Qgd2l0aCBvZmZzZXRcbiAgICAvLyArMDIwMCwgc28gd2UgYWRqdXN0IHRoZSB0aW1lIGFzIG5lZWRlZCwgdG8gYmUgdmFsaWQuXG4gICAgLy9cbiAgICAvLyBLZWVwaW5nIHRoZSB0aW1lIGFjdHVhbGx5IGFkZHMvc3VidHJhY3RzIChvbmUgaG91cilcbiAgICAvLyBmcm9tIHRoZSBhY3R1YWwgcmVwcmVzZW50ZWQgdGltZS4gVGhhdCBpcyB3aHkgd2UgY2FsbCB1cGRhdGVPZmZzZXRcbiAgICAvLyBhIHNlY29uZCB0aW1lLiBJbiBjYXNlIGl0IHdhbnRzIHVzIHRvIGNoYW5nZSB0aGUgb2Zmc2V0IGFnYWluXG4gICAgLy8gX2NoYW5nZUluUHJvZ3Jlc3MgPT0gdHJ1ZSBjYXNlLCB0aGVuIHdlIGhhdmUgdG8gYWRqdXN0LCBiZWNhdXNlXG4gICAgLy8gdGhlcmUgaXMgbm8gc3VjaCB0aW1lIGluIHRoZSBnaXZlbiB0aW1lem9uZS5cbiAgICBmdW5jdGlvbiBnZXRTZXRPZmZzZXQgKGlucHV0LCBrZWVwTG9jYWxUaW1lKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9vZmZzZXQgfHwgMCxcbiAgICAgICAgICAgIGxvY2FsQWRqdXN0O1xuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoU2hvcnRPZmZzZXQsIGlucHV0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoaW5wdXQpIDwgMTYpIHtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IGlucHV0ICogNjA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2lzVVRDICYmIGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICBsb2NhbEFkanVzdCA9IGdldERhdGVPZmZzZXQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgPSBpbnB1dDtcbiAgICAgICAgICAgIHRoaXMuX2lzVVRDID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChsb2NhbEFkanVzdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQobG9jYWxBZGp1c3QsICdtJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2Zmc2V0ICE9PSBpbnB1dCkge1xuICAgICAgICAgICAgICAgIGlmICgha2VlcExvY2FsVGltZSB8fCB0aGlzLl9jaGFuZ2VJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZF9zdWJ0cmFjdF9fYWRkU3VidHJhY3QodGhpcywgY3JlYXRlX19jcmVhdGVEdXJhdGlvbihpbnB1dCAtIG9mZnNldCwgJ20nKSwgMSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxzX2hvb2tzX19ob29rcy51cGRhdGVPZmZzZXQodGhpcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzVVRDID8gb2Zmc2V0IDogZ2V0RGF0ZU9mZnNldCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldFpvbmUgKGlucHV0LCBrZWVwTG9jYWxUaW1lKSB7XG4gICAgICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGlucHV0ID0gLWlucHV0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldChpbnB1dCwga2VlcExvY2FsVGltZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC10aGlzLnV0Y09mZnNldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0T2Zmc2V0VG9VVEMgKGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE9mZnNldFRvTG9jYWwgKGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzVVRDKSB7XG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCgwLCBrZWVwTG9jYWxUaW1lKTtcbiAgICAgICAgICAgIHRoaXMuX2lzVVRDID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChrZWVwTG9jYWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJ0cmFjdChnZXREYXRlT2Zmc2V0KHRoaXMpLCAnbScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0ICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3R6bSkge1xuICAgICAgICAgICAgdGhpcy51dGNPZmZzZXQodGhpcy5fdHptKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5faSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMudXRjT2Zmc2V0KG9mZnNldEZyb21TdHJpbmcobWF0Y2hPZmZzZXQsIHRoaXMuX2kpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYXNBbGlnbmVkSG91ck9mZnNldCAoaW5wdXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0ID0gaW5wdXQgPyBsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQpLnV0Y09mZnNldCgpIDogMDtcblxuICAgICAgICByZXR1cm4gKHRoaXMudXRjT2Zmc2V0KCkgLSBpbnB1dCkgJSA2MCA9PT0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZSAoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpIHx8XG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDUpLnV0Y09mZnNldCgpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkICgpIHtcbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9pc0RTVFNoaWZ0ZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGMgPSB7fTtcblxuICAgICAgICBjb3B5Q29uZmlnKGMsIHRoaXMpO1xuICAgICAgICBjID0gcHJlcGFyZUNvbmZpZyhjKTtcblxuICAgICAgICBpZiAoYy5fYSkge1xuICAgICAgICAgICAgdmFyIG90aGVyID0gYy5faXNVVEMgPyBjcmVhdGVfdXRjX19jcmVhdGVVVEMoYy5fYSkgOiBsb2NhbF9fY3JlYXRlTG9jYWwoYy5fYSk7XG4gICAgICAgICAgICB0aGlzLl9pc0RTVFNoaWZ0ZWQgPSB0aGlzLmlzVmFsaWQoKSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVBcnJheXMoYy5fYSwgb3RoZXIudG9BcnJheSgpKSA+IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pc0RTVFNoaWZ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNMb2NhbCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/ICF0aGlzLl9pc1VUQyA6IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVXRjT2Zmc2V0ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgOiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1V0YyAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMuX2lzVVRDICYmIHRoaXMuX29mZnNldCA9PT0gMCA6IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEFTUC5ORVQganNvbiBkYXRlIGZvcm1hdCByZWdleFxuICAgIHZhciBhc3BOZXRSZWdleCA9IC8oXFwtKT8oPzooXFxkKilbLiBdKT8oXFxkKylcXDooXFxkKykoPzpcXDooXFxkKylcXC4/KFxcZHszfSk/KT8vO1xuXG4gICAgLy8gZnJvbSBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2Nsb3N1cmVfZ29vZ19kYXRlX2RhdGUuanMuc291cmNlLmh0bWxcbiAgICAvLyBzb21ld2hhdCBtb3JlIGluIGxpbmUgd2l0aCA0LjQuMy4yIDIwMDQgc3BlYywgYnV0IGFsbG93cyBkZWNpbWFsIGFueXdoZXJlXG4gICAgdmFyIGlzb1JlZ2V4ID0gL14oLSk/UCg/Oig/OihbMC05LC5dKilZKT8oPzooWzAtOSwuXSopTSk/KD86KFswLTksLl0qKUQpPyg/OlQoPzooWzAtOSwuXSopSCk/KD86KFswLTksLl0qKU0pPyg/OihbMC05LC5dKilTKT8pP3woWzAtOSwuXSopVykkLztcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24gKGlucHV0LCBrZXkpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gaW5wdXQsXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBhZ2FpbnN0IHJlZ2V4cCBpcyBleHBlbnNpdmUsIGRvIGl0IG9uIGRlbWFuZFxuICAgICAgICAgICAgbWF0Y2ggPSBudWxsLFxuICAgICAgICAgICAgc2lnbixcbiAgICAgICAgICAgIHJldCxcbiAgICAgICAgICAgIGRpZmZSZXM7XG5cbiAgICAgICAgaWYgKGlzRHVyYXRpb24oaW5wdXQpKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBtcyA6IGlucHV0Ll9taWxsaXNlY29uZHMsXG4gICAgICAgICAgICAgICAgZCAgOiBpbnB1dC5fZGF5cyxcbiAgICAgICAgICAgICAgICBNICA6IGlucHV0Ll9tb250aHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbltrZXldID0gaW5wdXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uLm1pbGxpc2Vjb25kcyA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEhKG1hdGNoID0gYXNwTmV0UmVnZXguZXhlYyhpbnB1dCkpKSB7XG4gICAgICAgICAgICBzaWduID0gKG1hdGNoWzFdID09PSAnLScpID8gLTEgOiAxO1xuICAgICAgICAgICAgZHVyYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgeSAgOiAwLFxuICAgICAgICAgICAgICAgIGQgIDogdG9JbnQobWF0Y2hbREFURV0pICAgICAgICAqIHNpZ24sXG4gICAgICAgICAgICAgICAgaCAgOiB0b0ludChtYXRjaFtIT1VSXSkgICAgICAgICogc2lnbixcbiAgICAgICAgICAgICAgICBtICA6IHRvSW50KG1hdGNoW01JTlVURV0pICAgICAgKiBzaWduLFxuICAgICAgICAgICAgICAgIHMgIDogdG9JbnQobWF0Y2hbU0VDT05EXSkgICAgICAqIHNpZ24sXG4gICAgICAgICAgICAgICAgbXMgOiB0b0ludChtYXRjaFtNSUxMSVNFQ09ORF0pICogc2lnblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmICghIShtYXRjaCA9IGlzb1JlZ2V4LmV4ZWMoaW5wdXQpKSkge1xuICAgICAgICAgICAgc2lnbiA9IChtYXRjaFsxXSA9PT0gJy0nKSA/IC0xIDogMTtcbiAgICAgICAgICAgIGR1cmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHkgOiBwYXJzZUlzbyhtYXRjaFsyXSwgc2lnbiksXG4gICAgICAgICAgICAgICAgTSA6IHBhcnNlSXNvKG1hdGNoWzNdLCBzaWduKSxcbiAgICAgICAgICAgICAgICBkIDogcGFyc2VJc28obWF0Y2hbNF0sIHNpZ24pLFxuICAgICAgICAgICAgICAgIGggOiBwYXJzZUlzbyhtYXRjaFs1XSwgc2lnbiksXG4gICAgICAgICAgICAgICAgbSA6IHBhcnNlSXNvKG1hdGNoWzZdLCBzaWduKSxcbiAgICAgICAgICAgICAgICBzIDogcGFyc2VJc28obWF0Y2hbN10sIHNpZ24pLFxuICAgICAgICAgICAgICAgIHcgOiBwYXJzZUlzbyhtYXRjaFs4XSwgc2lnbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT0gbnVsbCkgey8vIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGR1cmF0aW9uID0ge307XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGR1cmF0aW9uID09PSAnb2JqZWN0JyAmJiAoJ2Zyb20nIGluIGR1cmF0aW9uIHx8ICd0bycgaW4gZHVyYXRpb24pKSB7XG4gICAgICAgICAgICBkaWZmUmVzID0gbW9tZW50c0RpZmZlcmVuY2UobG9jYWxfX2NyZWF0ZUxvY2FsKGR1cmF0aW9uLmZyb20pLCBsb2NhbF9fY3JlYXRlTG9jYWwoZHVyYXRpb24udG8pKTtcblxuICAgICAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICAgICAgICAgIGR1cmF0aW9uLm1zID0gZGlmZlJlcy5taWxsaXNlY29uZHM7XG4gICAgICAgICAgICBkdXJhdGlvbi5NID0gZGlmZlJlcy5tb250aHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXQgPSBuZXcgRHVyYXRpb24oZHVyYXRpb24pO1xuXG4gICAgICAgIGlmIChpc0R1cmF0aW9uKGlucHV0KSAmJiBoYXNPd25Qcm9wKGlucHV0LCAnX2xvY2FsZScpKSB7XG4gICAgICAgICAgICByZXQuX2xvY2FsZSA9IGlucHV0Ll9sb2NhbGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24uZm4gPSBEdXJhdGlvbi5wcm90b3R5cGU7XG5cbiAgICBmdW5jdGlvbiBwYXJzZUlzbyAoaW5wLCBzaWduKSB7XG4gICAgICAgIC8vIFdlJ2Qgbm9ybWFsbHkgdXNlIH5+aW5wIGZvciB0aGlzLCBidXQgdW5mb3J0dW5hdGVseSBpdCBhbHNvXG4gICAgICAgIC8vIGNvbnZlcnRzIGZsb2F0cyB0byBpbnRzLlxuICAgICAgICAvLyBpbnAgbWF5IGJlIHVuZGVmaW5lZCwgc28gY2FyZWZ1bCBjYWxsaW5nIHJlcGxhY2Ugb24gaXQuXG4gICAgICAgIHZhciByZXMgPSBpbnAgJiYgcGFyc2VGbG9hdChpbnAucmVwbGFjZSgnLCcsICcuJykpO1xuICAgICAgICAvLyBhcHBseSBzaWduIHdoaWxlIHdlJ3JlIGF0IGl0XG4gICAgICAgIHJldHVybiAoaXNOYU4ocmVzKSA/IDAgOiByZXMpICogc2lnbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKSB7XG4gICAgICAgIHZhciByZXMgPSB7bWlsbGlzZWNvbmRzOiAwLCBtb250aHM6IDB9O1xuXG4gICAgICAgIHJlcy5tb250aHMgPSBvdGhlci5tb250aCgpIC0gYmFzZS5tb250aCgpICtcbiAgICAgICAgICAgIChvdGhlci55ZWFyKCkgLSBiYXNlLnllYXIoKSkgKiAxMjtcbiAgICAgICAgaWYgKGJhc2UuY2xvbmUoKS5hZGQocmVzLm1vbnRocywgJ00nKS5pc0FmdGVyKG90aGVyKSkge1xuICAgICAgICAgICAgLS1yZXMubW9udGhzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzLm1pbGxpc2Vjb25kcyA9ICtvdGhlciAtICsoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCAnTScpKTtcblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKSB7XG4gICAgICAgIHZhciByZXM7XG4gICAgICAgIGlmICghKGJhc2UuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7bWlsbGlzZWNvbmRzOiAwLCBtb250aHM6IDB9O1xuICAgICAgICB9XG5cbiAgICAgICAgb3RoZXIgPSBjbG9uZVdpdGhPZmZzZXQob3RoZXIsIGJhc2UpO1xuICAgICAgICBpZiAoYmFzZS5pc0JlZm9yZShvdGhlcikpIHtcbiAgICAgICAgICAgIHJlcyA9IHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShvdGhlciwgYmFzZSk7XG4gICAgICAgICAgICByZXMubWlsbGlzZWNvbmRzID0gLXJlcy5taWxsaXNlY29uZHM7XG4gICAgICAgICAgICByZXMubW9udGhzID0gLXJlcy5tb250aHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSAnbmFtZScgYXJnIGFmdGVyIGRlcHJlY2F0aW9uIGlzIHJlbW92ZWRcbiAgICBmdW5jdGlvbiBjcmVhdGVBZGRlcihkaXJlY3Rpb24sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwsIHBlcmlvZCkge1xuICAgICAgICAgICAgdmFyIGR1ciwgdG1wO1xuICAgICAgICAgICAgLy9pbnZlcnQgdGhlIGFyZ3VtZW50cywgYnV0IGNvbXBsYWluIGFib3V0IGl0XG4gICAgICAgICAgICBpZiAocGVyaW9kICE9PSBudWxsICYmICFpc05hTigrcGVyaW9kKSkge1xuICAgICAgICAgICAgICAgIGRlcHJlY2F0ZVNpbXBsZShuYW1lLCAnbW9tZW50KCkuJyArIG5hbWUgICsgJyhwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4nICsgbmFtZSArICcobnVtYmVyLCBwZXJpb2QpLicpO1xuICAgICAgICAgICAgICAgIHRtcCA9IHZhbDsgdmFsID0gcGVyaW9kOyBwZXJpb2QgPSB0bXA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gK3ZhbCA6IHZhbDtcbiAgICAgICAgICAgIGR1ciA9IGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24odmFsLCBwZXJpb2QpO1xuICAgICAgICAgICAgYWRkX3N1YnRyYWN0X19hZGRTdWJ0cmFjdCh0aGlzLCBkdXIsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRfc3VidHJhY3RfX2FkZFN1YnRyYWN0IChtb20sIGR1cmF0aW9uLCBpc0FkZGluZywgdXBkYXRlT2Zmc2V0KSB7XG4gICAgICAgIHZhciBtaWxsaXNlY29uZHMgPSBkdXJhdGlvbi5fbWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgZGF5cyA9IGR1cmF0aW9uLl9kYXlzLFxuICAgICAgICAgICAgbW9udGhzID0gZHVyYXRpb24uX21vbnRocztcblxuICAgICAgICBpZiAoIW1vbS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIC8vIE5vIG9wXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVPZmZzZXQgPSB1cGRhdGVPZmZzZXQgPT0gbnVsbCA/IHRydWUgOiB1cGRhdGVPZmZzZXQ7XG5cbiAgICAgICAgaWYgKG1pbGxpc2Vjb25kcykge1xuICAgICAgICAgICAgbW9tLl9kLnNldFRpbWUoK21vbS5fZCArIG1pbGxpc2Vjb25kcyAqIGlzQWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF5cykge1xuICAgICAgICAgICAgZ2V0X3NldF9fc2V0KG1vbSwgJ0RhdGUnLCBnZXRfc2V0X19nZXQobW9tLCAnRGF0ZScpICsgZGF5cyAqIGlzQWRkaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW9udGhzKSB7XG4gICAgICAgICAgICBzZXRNb250aChtb20sIGdldF9zZXRfX2dldChtb20sICdNb250aCcpICsgbW9udGhzICogaXNBZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHV0aWxzX2hvb2tzX19ob29rcy51cGRhdGVPZmZzZXQobW9tLCBkYXlzIHx8IG1vbnRocyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYWRkX3N1YnRyYWN0X19hZGQgICAgICA9IGNyZWF0ZUFkZGVyKDEsICdhZGQnKTtcbiAgICB2YXIgYWRkX3N1YnRyYWN0X19zdWJ0cmFjdCA9IGNyZWF0ZUFkZGVyKC0xLCAnc3VidHJhY3QnKTtcblxuICAgIGZ1bmN0aW9uIG1vbWVudF9jYWxlbmRhcl9fY2FsZW5kYXIgKHRpbWUsIGZvcm1hdHMpIHtcbiAgICAgICAgLy8gV2Ugd2FudCB0byBjb21wYXJlIHRoZSBzdGFydCBvZiB0b2RheSwgdnMgdGhpcy5cbiAgICAgICAgLy8gR2V0dGluZyBzdGFydC1vZi10b2RheSBkZXBlbmRzIG9uIHdoZXRoZXIgd2UncmUgbG9jYWwvdXRjL29mZnNldCBvciBub3QuXG4gICAgICAgIHZhciBub3cgPSB0aW1lIHx8IGxvY2FsX19jcmVhdGVMb2NhbCgpLFxuICAgICAgICAgICAgc29kID0gY2xvbmVXaXRoT2Zmc2V0KG5vdywgdGhpcykuc3RhcnRPZignZGF5JyksXG4gICAgICAgICAgICBkaWZmID0gdGhpcy5kaWZmKHNvZCwgJ2RheXMnLCB0cnVlKSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGRpZmYgPCAtNiA/ICdzYW1lRWxzZScgOlxuICAgICAgICAgICAgICAgIGRpZmYgPCAtMSA/ICdsYXN0V2VlaycgOlxuICAgICAgICAgICAgICAgIGRpZmYgPCAwID8gJ2xhc3REYXknIDpcbiAgICAgICAgICAgICAgICBkaWZmIDwgMSA/ICdzYW1lRGF5JyA6XG4gICAgICAgICAgICAgICAgZGlmZiA8IDIgPyAnbmV4dERheScgOlxuICAgICAgICAgICAgICAgIGRpZmYgPCA3ID8gJ25leHRXZWVrJyA6ICdzYW1lRWxzZSc7XG5cbiAgICAgICAgdmFyIG91dHB1dCA9IGZvcm1hdHMgJiYgKGlzRnVuY3Rpb24oZm9ybWF0c1tmb3JtYXRdKSA/IGZvcm1hdHNbZm9ybWF0XSgpIDogZm9ybWF0c1tmb3JtYXRdKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQob3V0cHV0IHx8IHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGZvcm1hdCwgdGhpcywgbG9jYWxfX2NyZWF0ZUxvY2FsKG5vdykpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9tZW50KHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQWZ0ZXIgKGlucHV0LCB1bml0cykge1xuICAgICAgICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogbG9jYWxfX2NyZWF0ZUxvY2FsKGlucHV0KTtcbiAgICAgICAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyghaXNVbmRlZmluZWQodW5pdHMpID8gdW5pdHMgOiAnbWlsbGlzZWNvbmQnKTtcbiAgICAgICAgaWYgKHVuaXRzID09PSAnbWlsbGlzZWNvbmQnKSB7XG4gICAgICAgICAgICByZXR1cm4gK3RoaXMgPiArbG9jYWxJbnB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiArbG9jYWxJbnB1dCA8ICt0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0JlZm9yZSAoaW5wdXQsIHVuaXRzKSB7XG4gICAgICAgIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQpO1xuICAgICAgICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKCFpc1VuZGVmaW5lZCh1bml0cykgPyB1bml0cyA6ICdtaWxsaXNlY29uZCcpO1xuICAgICAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgICAgIHJldHVybiArdGhpcyA8ICtsb2NhbElucHV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICt0aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpIDwgK2xvY2FsSW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0JldHdlZW4gKGZyb20sIHRvLCB1bml0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0FmdGVyKGZyb20sIHVuaXRzKSAmJiB0aGlzLmlzQmVmb3JlKHRvLCB1bml0cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTYW1lIChpbnB1dCwgdW5pdHMpIHtcbiAgICAgICAgdmFyIGxvY2FsSW5wdXQgPSBpc01vbWVudChpbnB1dCkgPyBpbnB1dCA6IGxvY2FsX19jcmVhdGVMb2NhbChpbnB1dCksXG4gICAgICAgICAgICBpbnB1dE1zO1xuICAgICAgICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzIHx8ICdtaWxsaXNlY29uZCcpO1xuICAgICAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgICAgIHJldHVybiArdGhpcyA9PT0gK2xvY2FsSW5wdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dE1zID0gK2xvY2FsSW5wdXQ7XG4gICAgICAgICAgICByZXR1cm4gKyh0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSArKHRoaXMuY2xvbmUoKS5lbmRPZih1bml0cykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTYW1lT3JBZnRlciAoaW5wdXQsIHVuaXRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2FtZShpbnB1dCwgdW5pdHMpIHx8IHRoaXMuaXNBZnRlcihpbnB1dCx1bml0cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTYW1lT3JCZWZvcmUgKGlucHV0LCB1bml0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsIHVuaXRzKSB8fCB0aGlzLmlzQmVmb3JlKGlucHV0LHVuaXRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaWZmIChpbnB1dCwgdW5pdHMsIGFzRmxvYXQpIHtcbiAgICAgICAgdmFyIHRoYXQsXG4gICAgICAgICAgICB6b25lRGVsdGEsXG4gICAgICAgICAgICBkZWx0YSwgb3V0cHV0O1xuXG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0ID0gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCB0aGlzKTtcblxuICAgICAgICBpZiAoIXRoYXQuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG5cbiAgICAgICAgem9uZURlbHRhID0gKHRoYXQudXRjT2Zmc2V0KCkgLSB0aGlzLnV0Y09mZnNldCgpKSAqIDZlNDtcblxuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICAgICAgICBpZiAodW5pdHMgPT09ICd5ZWFyJyB8fCB1bml0cyA9PT0gJ21vbnRoJyB8fCB1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBtb250aERpZmYodGhpcywgdGhhdCk7XG4gICAgICAgICAgICBpZiAodW5pdHMgPT09ICdxdWFydGVyJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCAvIDM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVuaXRzID09PSAneWVhcicpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgLyAxMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbHRhID0gdGhpcyAtIHRoYXQ7XG4gICAgICAgICAgICBvdXRwdXQgPSB1bml0cyA9PT0gJ3NlY29uZCcgPyBkZWx0YSAvIDFlMyA6IC8vIDEwMDBcbiAgICAgICAgICAgICAgICB1bml0cyA9PT0gJ21pbnV0ZScgPyBkZWx0YSAvIDZlNCA6IC8vIDEwMDAgKiA2MFxuICAgICAgICAgICAgICAgIHVuaXRzID09PSAnaG91cicgPyBkZWx0YSAvIDM2ZTUgOiAvLyAxMDAwICogNjAgKiA2MFxuICAgICAgICAgICAgICAgIHVuaXRzID09PSAnZGF5JyA/IChkZWx0YSAtIHpvbmVEZWx0YSkgLyA4NjRlNSA6IC8vIDEwMDAgKiA2MCAqIDYwICogMjQsIG5lZ2F0ZSBkc3RcbiAgICAgICAgICAgICAgICB1bml0cyA9PT0gJ3dlZWsnID8gKGRlbHRhIC0gem9uZURlbHRhKSAvIDYwNDhlNSA6IC8vIDEwMDAgKiA2MCAqIDYwICogMjQgKiA3LCBuZWdhdGUgZHN0XG4gICAgICAgICAgICAgICAgZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzRmxvYXQgPyBvdXRwdXQgOiBhYnNGbG9vcihvdXRwdXQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbnRoRGlmZiAoYSwgYikge1xuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIG1vbnRoc1xuICAgICAgICB2YXIgd2hvbGVNb250aERpZmYgPSAoKGIueWVhcigpIC0gYS55ZWFyKCkpICogMTIpICsgKGIubW9udGgoKSAtIGEubW9udGgoKSksXG4gICAgICAgICAgICAvLyBiIGlzIGluIChhbmNob3IgLSAxIG1vbnRoLCBhbmNob3IgKyAxIG1vbnRoKVxuICAgICAgICAgICAgYW5jaG9yID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiwgJ21vbnRocycpLFxuICAgICAgICAgICAgYW5jaG9yMiwgYWRqdXN0O1xuXG4gICAgICAgIGlmIChiIC0gYW5jaG9yIDwgMCkge1xuICAgICAgICAgICAgYW5jaG9yMiA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYgLSAxLCAnbW9udGhzJyk7XG4gICAgICAgICAgICAvLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxuICAgICAgICAgICAgYWRqdXN0ID0gKGIgLSBhbmNob3IpIC8gKGFuY2hvciAtIGFuY2hvcjIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYW5jaG9yMiA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYgKyAxLCAnbW9udGhzJyk7XG4gICAgICAgICAgICAvLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxuICAgICAgICAgICAgYWRqdXN0ID0gKGIgLSBhbmNob3IpIC8gKGFuY2hvcjIgLSBhbmNob3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0od2hvbGVNb250aERpZmYgKyBhZGp1c3QpO1xuICAgIH1cblxuICAgIHV0aWxzX2hvb2tzX19ob29rcy5kZWZhdWx0Rm9ybWF0ID0gJ1lZWVktTU0tRERUSEg6bW06c3NaJztcblxuICAgIGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoJ2VuJykuZm9ybWF0KCdkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbWVudF9mb3JtYXRfX3RvSVNPU3RyaW5nICgpIHtcbiAgICAgICAgdmFyIG0gPSB0aGlzLmNsb25lKCkudXRjKCk7XG4gICAgICAgIGlmICgwIDwgbS55ZWFyKCkgJiYgbS55ZWFyKCkgPD0gOTk5OSkge1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gbmF0aXZlIGltcGxlbWVudGF0aW9uIGlzIH41MHggZmFzdGVyLCB1c2UgaXQgd2hlbiB3ZSBjYW5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0RhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0TW9tZW50KG0sICdZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0TW9tZW50KG0sICdZWVlZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdCAoaW5wdXRTdHJpbmcpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IGZvcm1hdE1vbWVudCh0aGlzLCBpbnB1dFN0cmluZyB8fCB1dGlsc19ob29rc19faG9va3MuZGVmYXVsdEZvcm1hdCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KG91dHB1dCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZnJvbSAodGltZSwgd2l0aG91dFN1ZmZpeCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiZcbiAgICAgICAgICAgICAgICAoKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpKSB8fFxuICAgICAgICAgICAgICAgICBsb2NhbF9fY3JlYXRlTG9jYWwodGltZSkuaXNWYWxpZCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24oe3RvOiB0aGlzLCBmcm9tOiB0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZnJvbU5vdyAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tKGxvY2FsX19jcmVhdGVMb2NhbCgpLCB3aXRob3V0U3VmZml4KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0byAodGltZSwgd2l0aG91dFN1ZmZpeCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiZcbiAgICAgICAgICAgICAgICAoKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpKSB8fFxuICAgICAgICAgICAgICAgICBsb2NhbF9fY3JlYXRlTG9jYWwodGltZSkuaXNWYWxpZCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24oe2Zyb206IHRoaXMsIHRvOiB0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9Ob3cgKHdpdGhvdXRTdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8obG9jYWxfX2NyZWF0ZUxvY2FsKCksIHdpdGhvdXRTdWZmaXgpO1xuICAgIH1cblxuICAgIC8vIElmIHBhc3NlZCBhIGxvY2FsZSBrZXksIGl0IHdpbGwgc2V0IHRoZSBsb2NhbGUgZm9yIHRoaXNcbiAgICAvLyBpbnN0YW5jZS4gIE90aGVyd2lzZSwgaXQgd2lsbCByZXR1cm4gdGhlIGxvY2FsZSBjb25maWd1cmF0aW9uXG4gICAgLy8gdmFyaWFibGVzIGZvciB0aGlzIGluc3RhbmNlLlxuICAgIGZ1bmN0aW9uIGxvY2FsZSAoa2V5KSB7XG4gICAgICAgIHZhciBuZXdMb2NhbGVEYXRhO1xuXG4gICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsZS5fYWJicjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0xvY2FsZURhdGEgPSBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKGtleSk7XG4gICAgICAgICAgICBpZiAobmV3TG9jYWxlRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxlID0gbmV3TG9jYWxlRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxhbmcgPSBkZXByZWNhdGUoXG4gICAgICAgICdtb21lbnQoKS5sYW5nKCkgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCwgdXNlIG1vbWVudCgpLmxvY2FsZURhdGEoKSB0byBnZXQgdGhlIGxhbmd1YWdlIGNvbmZpZ3VyYXRpb24uIFVzZSBtb21lbnQoKS5sb2NhbGUoKSB0byBjaGFuZ2UgbGFuZ3VhZ2VzLicsXG4gICAgICAgIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgZnVuY3Rpb24gbG9jYWxlRGF0YSAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbGU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RhcnRPZiAodW5pdHMpIHtcbiAgICAgICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgc3dpdGNoIGludGVudGlvbmFsbHkgb21pdHMgYnJlYWsga2V5d29yZHNcbiAgICAgICAgLy8gdG8gdXRpbGl6ZSBmYWxsaW5nIHRocm91Z2ggdGhlIGNhc2VzLlxuICAgICAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgdGhpcy5tb250aCgwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAncXVhcnRlcic6XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIHRoaXMuZGF0ZSgxKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgIGNhc2UgJ2lzb1dlZWsnOlxuICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgICAgdGhpcy5ob3VycygwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgICAgICB0aGlzLm1pbnV0ZXMoMCk7XG4gICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgICAgICAgICB0aGlzLnNlY29uZHMoMCk7XG4gICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgICAgICAgICB0aGlzLm1pbGxpc2Vjb25kcygwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlZWtzIGFyZSBhIHNwZWNpYWwgY2FzZVxuICAgICAgICBpZiAodW5pdHMgPT09ICd3ZWVrJykge1xuICAgICAgICAgICAgdGhpcy53ZWVrZGF5KDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1bml0cyA9PT0gJ2lzb1dlZWsnKSB7XG4gICAgICAgICAgICB0aGlzLmlzb1dlZWtkYXkoMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBxdWFydGVycyBhcmUgYWxzbyBzcGVjaWFsXG4gICAgICAgIGlmICh1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgICAgICB0aGlzLm1vbnRoKE1hdGguZmxvb3IodGhpcy5tb250aCgpIC8gMykgKiAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuZE9mICh1bml0cykge1xuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgICAgICAgaWYgKHVuaXRzID09PSB1bmRlZmluZWQgfHwgdW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0T2YodW5pdHMpLmFkZCgxLCAodW5pdHMgPT09ICdpc29XZWVrJyA/ICd3ZWVrJyA6IHVuaXRzKSkuc3VidHJhY3QoMSwgJ21zJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9fdHlwZV9fdmFsdWVPZiAoKSB7XG4gICAgICAgIHJldHVybiArdGhpcy5fZCAtICgodGhpcy5fb2Zmc2V0IHx8IDApICogNjAwMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuaXggKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigrdGhpcyAvIDEwMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvRGF0ZSAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQgPyBuZXcgRGF0ZSgrdGhpcykgOiB0aGlzLl9kO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvQXJyYXkgKCkge1xuICAgICAgICB2YXIgbSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBbbS55ZWFyKCksIG0ubW9udGgoKSwgbS5kYXRlKCksIG0uaG91cigpLCBtLm1pbnV0ZSgpLCBtLnNlY29uZCgpLCBtLm1pbGxpc2Vjb25kKCldO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvT2JqZWN0ICgpIHtcbiAgICAgICAgdmFyIG0gPSB0aGlzO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeWVhcnM6IG0ueWVhcigpLFxuICAgICAgICAgICAgbW9udGhzOiBtLm1vbnRoKCksXG4gICAgICAgICAgICBkYXRlOiBtLmRhdGUoKSxcbiAgICAgICAgICAgIGhvdXJzOiBtLmhvdXJzKCksXG4gICAgICAgICAgICBtaW51dGVzOiBtLm1pbnV0ZXMoKSxcbiAgICAgICAgICAgIHNlY29uZHM6IG0uc2Vjb25kcygpLFxuICAgICAgICAgICAgbWlsbGlzZWNvbmRzOiBtLm1pbGxpc2Vjb25kcygpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgICAgICAgLy8gSlNPTi5zdHJpbmdpZnkobmV3IERhdGUoTmFOKSkgPT09ICdudWxsJ1xuICAgICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLnRvSVNPU3RyaW5nKCkgOiAnbnVsbCc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9tZW50X3ZhbGlkX19pc1ZhbGlkICgpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkX19pc1ZhbGlkKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNpbmdGbGFncyAoKSB7XG4gICAgICAgIHJldHVybiBleHRlbmQoe30sIGdldFBhcnNpbmdGbGFncyh0aGlzKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52YWxpZEF0ICgpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcnNpbmdGbGFncyh0aGlzKS5vdmVyZmxvdztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGlvbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dDogdGhpcy5faSxcbiAgICAgICAgICAgIGZvcm1hdDogdGhpcy5fZixcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5fbG9jYWxlLFxuICAgICAgICAgICAgaXNVVEM6IHRoaXMuX2lzVVRDLFxuICAgICAgICAgICAgc3RyaWN0OiB0aGlzLl9zdHJpY3RcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ2dnJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2Vla1llYXIoKSAlIDEwMDtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnR0cnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc29XZWVrWWVhcigpICUgMTAwO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gYWRkV2Vla1llYXJGb3JtYXRUb2tlbiAodG9rZW4sIGdldHRlcikge1xuICAgICAgICBhZGRGb3JtYXRUb2tlbigwLCBbdG9rZW4sIHRva2VuLmxlbmd0aF0sIDAsIGdldHRlcik7XG4gICAgfVxuXG4gICAgYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZycsICAgICAnd2Vla1llYXInKTtcbiAgICBhZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnZycsICAgICd3ZWVrWWVhcicpO1xuICAgIGFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0cnLCAgJ2lzb1dlZWtZZWFyJyk7XG4gICAgYWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHR0cnLCAnaXNvV2Vla1llYXInKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnd2Vla1llYXInLCAnZ2cnKTtcbiAgICBhZGRVbml0QWxpYXMoJ2lzb1dlZWtZZWFyJywgJ0dHJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdHJywgICAgICBtYXRjaFNpZ25lZCk7XG4gICAgYWRkUmVnZXhUb2tlbignZycsICAgICAgbWF0Y2hTaWduZWQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0dHJywgICAgIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdnZycsICAgICBtYXRjaDF0bzIsIG1hdGNoMik7XG4gICAgYWRkUmVnZXhUb2tlbignR0dHRycsICAgbWF0Y2gxdG80LCBtYXRjaDQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ2dnZ2cnLCAgIG1hdGNoMXRvNCwgbWF0Y2g0KTtcbiAgICBhZGRSZWdleFRva2VuKCdHR0dHRycsICBtYXRjaDF0bzYsIG1hdGNoNik7XG4gICAgYWRkUmVnZXhUb2tlbignZ2dnZ2cnLCAgbWF0Y2gxdG82LCBtYXRjaDYpO1xuXG4gICAgYWRkV2Vla1BhcnNlVG9rZW4oWydnZ2dnJywgJ2dnZ2dnJywgJ0dHR0cnLCAnR0dHR0cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgICAgIHdlZWtbdG9rZW4uc3Vic3RyKDAsIDIpXSA9IHRvSW50KGlucHV0KTtcbiAgICB9KTtcblxuICAgIGFkZFdlZWtQYXJzZVRva2VuKFsnZ2cnLCAnR0cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgICAgIHdlZWtbdG9rZW5dID0gdXRpbHNfaG9va3NfX2hvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbiAgICB9KTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIGZ1bmN0aW9uIGdldFNldFdlZWtZZWFyIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLFxuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgIHRoaXMud2VlaygpLFxuICAgICAgICAgICAgICAgIHRoaXMud2Vla2RheSgpLFxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyxcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldElTT1dlZWtZZWFyIChpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLFxuICAgICAgICAgICAgICAgIGlucHV0LCB0aGlzLmlzb1dlZWsoKSwgdGhpcy5pc29XZWVrZGF5KCksIDEsIDQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldElTT1dlZWtzSW5ZZWFyICgpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLCAxLCA0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRXZWVrc0luWWVhciAoKSB7XG4gICAgICAgIHZhciB3ZWVrSW5mbyA9IHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO1xuICAgICAgICByZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksIHdlZWtJbmZvLmRvdywgd2Vla0luZm8uZG95KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZXRXZWVrWWVhckhlbHBlcihpbnB1dCwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICAgICAgdmFyIHdlZWtzVGFyZ2V0O1xuICAgICAgICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtPZlllYXIodGhpcywgZG93LCBkb3kpLnllYXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3ZWVrc1RhcmdldCA9IHdlZWtzSW5ZZWFyKGlucHV0LCBkb3csIGRveSk7XG4gICAgICAgICAgICBpZiAod2VlayA+IHdlZWtzVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgd2VlayA9IHdlZWtzVGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNldFdlZWtBbGwuY2FsbCh0aGlzLCBpbnB1dCwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0V2Vla0FsbCh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICAgICAgdmFyIGRheU9mWWVhckRhdGEgPSBkYXlPZlllYXJGcm9tV2Vla3Mod2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KSxcbiAgICAgICAgICAgIGRhdGUgPSBjcmVhdGVVVENEYXRlKGRheU9mWWVhckRhdGEueWVhciwgMCwgZGF5T2ZZZWFyRGF0YS5kYXlPZlllYXIpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZ290XCIsIHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBcInNldFwiLCBkYXRlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICB0aGlzLnllYXIoZGF0ZS5nZXRVVENGdWxsWWVhcigpKTtcbiAgICAgICAgdGhpcy5tb250aChkYXRlLmdldFVUQ01vbnRoKCkpO1xuICAgICAgICB0aGlzLmRhdGUoZGF0ZS5nZXRVVENEYXRlKCkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignUScsIDAsICdRbycsICdxdWFydGVyJyk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ3F1YXJ0ZXInLCAnUScpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbignUScsIG1hdGNoMSk7XG4gICAgYWRkUGFyc2VUb2tlbignUScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICAgICAgYXJyYXlbTU9OVEhdID0gKHRvSW50KGlucHV0KSAtIDEpICogMztcbiAgICB9KTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIGZ1bmN0aW9uIGdldFNldFF1YXJ0ZXIgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gTWF0aC5jZWlsKCh0aGlzLm1vbnRoKCkgKyAxKSAvIDMpIDogdGhpcy5tb250aCgoaW5wdXQgLSAxKSAqIDMgKyB0aGlzLm1vbnRoKCkgJSAzKTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbigndycsIFsnd3cnLCAyXSwgJ3dvJywgJ3dlZWsnKTtcbiAgICBhZGRGb3JtYXRUb2tlbignVycsIFsnV1cnLCAyXSwgJ1dvJywgJ2lzb1dlZWsnKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnd2VlaycsICd3Jyk7XG4gICAgYWRkVW5pdEFsaWFzKCdpc29XZWVrJywgJ1cnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ3cnLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCd3dycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdXJywgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignV1cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5cbiAgICBhZGRXZWVrUGFyc2VUb2tlbihbJ3cnLCAnd3cnLCAnVycsICdXVyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgd2Vla1t0b2tlbi5zdWJzdHIoMCwgMSldID0gdG9JbnQoaW5wdXQpO1xuICAgIH0pO1xuXG4gICAgLy8gSEVMUEVSU1xuXG4gICAgLy8gTE9DQUxFU1xuXG4gICAgZnVuY3Rpb24gbG9jYWxlV2VlayAobW9tKSB7XG4gICAgICAgIHJldHVybiB3ZWVrT2ZZZWFyKG1vbSwgdGhpcy5fd2Vlay5kb3csIHRoaXMuX3dlZWsuZG95KS53ZWVrO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0TG9jYWxlV2VlayA9IHtcbiAgICAgICAgZG93IDogMCwgLy8gU3VuZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsuXG4gICAgICAgIGRveSA6IDYgIC8vIFRoZSB3ZWVrIHRoYXQgY29udGFpbnMgSmFuIDFzdCBpcyB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhci5cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZldlZWsgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2Vlay5kb3c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9jYWxlRmlyc3REYXlPZlllYXIgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2Vlay5kb3k7XG4gICAgfVxuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0V2VlayAoaW5wdXQpIHtcbiAgICAgICAgdmFyIHdlZWsgPSB0aGlzLmxvY2FsZURhdGEoKS53ZWVrKHRoaXMpO1xuICAgICAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHdlZWsgOiB0aGlzLmFkZCgoaW5wdXQgLSB3ZWVrKSAqIDcsICdkJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2V0SVNPV2VlayAoaW5wdXQpIHtcbiAgICAgICAgdmFyIHdlZWsgPSB3ZWVrT2ZZZWFyKHRoaXMsIDEsIDQpLndlZWs7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignRCcsIFsnREQnLCAyXSwgJ0RvJywgJ2RhdGUnKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnZGF0ZScsICdEJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdEJywgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignREQnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG4gICAgYWRkUmVnZXhUb2tlbignRG8nLCBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gaXNTdHJpY3QgPyBsb2NhbGUuX29yZGluYWxQYXJzZSA6IGxvY2FsZS5fb3JkaW5hbFBhcnNlTGVuaWVudDtcbiAgICB9KTtcblxuICAgIGFkZFBhcnNlVG9rZW4oWydEJywgJ0REJ10sIERBVEUpO1xuICAgIGFkZFBhcnNlVG9rZW4oJ0RvJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICBhcnJheVtEQVRFXSA9IHRvSW50KGlucHV0Lm1hdGNoKG1hdGNoMXRvMilbMF0sIDEwKTtcbiAgICB9KTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIHZhciBnZXRTZXREYXlPZk1vbnRoID0gbWFrZUdldFNldCgnRGF0ZScsIHRydWUpO1xuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ2QnLCAwLCAnZG8nLCAnZGF5Jyk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLCBmb3JtYXQpO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ2RkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzU2hvcnQodGhpcywgZm9ybWF0KTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdkZGRkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcywgZm9ybWF0KTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdlJywgMCwgMCwgJ3dlZWtkYXknKTtcbiAgICBhZGRGb3JtYXRUb2tlbignRScsIDAsIDAsICdpc29XZWVrZGF5Jyk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ2RheScsICdkJyk7XG4gICAgYWRkVW5pdEFsaWFzKCd3ZWVrZGF5JywgJ2UnKTtcbiAgICBhZGRVbml0QWxpYXMoJ2lzb1dlZWtkYXknLCAnRScpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbignZCcsICAgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignZScsICAgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignRScsICAgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignZGQnLCAgIG1hdGNoV29yZCk7XG4gICAgYWRkUmVnZXhUb2tlbignZGRkJywgIG1hdGNoV29yZCk7XG4gICAgYWRkUmVnZXhUb2tlbignZGRkZCcsIG1hdGNoV29yZCk7XG5cbiAgICBhZGRXZWVrUGFyc2VUb2tlbihbJ2RkJywgJ2RkZCcsICdkZGRkJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICAgICAgICB2YXIgd2Vla2RheSA9IGNvbmZpZy5fbG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQsIHRva2VuLCBjb25maWcuX3N0cmljdCk7XG4gICAgICAgIC8vIGlmIHdlIGRpZG4ndCBnZXQgYSB3ZWVrZGF5IG5hbWUsIG1hcmsgdGhlIGRhdGUgYXMgaW52YWxpZFxuICAgICAgICBpZiAod2Vla2RheSAhPSBudWxsKSB7XG4gICAgICAgICAgICB3ZWVrLmQgPSB3ZWVrZGF5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZFdlZWtkYXkgPSBpbnB1dDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWRkV2Vla1BhcnNlVG9rZW4oWydkJywgJ2UnLCAnRSddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgd2Vla1t0b2tlbl0gPSB0b0ludChpbnB1dCk7XG4gICAgfSk7XG5cbiAgICAvLyBIRUxQRVJTXG5cbiAgICBmdW5jdGlvbiBwYXJzZVdlZWtkYXkoaW5wdXQsIGxvY2FsZSkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc05hTihpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChpbnB1dCwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXQgPSBsb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCk7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBMT0NBTEVTXG5cbiAgICB2YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzID0gJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpO1xuICAgIGZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzIChtLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fd2Vla2RheXMpID8gdGhpcy5fd2Vla2RheXNbbS5kYXkoKV0gOlxuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNbdGhpcy5fd2Vla2RheXMuaXNGb3JtYXQudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20uZGF5KCldO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCA9ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyk7XG4gICAgZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNTaG9ydCAobSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFttLmRheSgpXTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluID0gJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpO1xuICAgIGZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzTWluIChtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c01pblttLmRheSgpXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1BhcnNlICh3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICAgICAgdmFyIGksIG1vbSwgcmVnZXg7XG5cbiAgICAgICAgaWYgKCF0aGlzLl93ZWVrZGF5c1BhcnNlKSB7XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcblxuICAgICAgICAgICAgbW9tID0gbG9jYWxfX2NyZWF0ZUxvY2FsKFsyMDAwLCAxXSkuZGF5KGkpO1xuICAgICAgICAgICAgaWYgKHN0cmljdCAmJiAhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5cyhtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcLj8nKSArICckJywgJ2knKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcLj8nKSArICckJywgJ2knKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLl93ZWVrZGF5c1BhcnNlW2ldKSB7XG4gICAgICAgICAgICAgICAgcmVnZXggPSAnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpICsgJ3xeJyArIHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKSArICd8XicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKHJlZ2V4LnJlcGxhY2UoJy4nLCAnJyksICdpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0ZXN0IHRoZSByZWdleFxuICAgICAgICAgICAgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZGRkJyAmJiB0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGRkJyAmJiB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkJyAmJiB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzdHJpY3QgJiYgdGhpcy5fd2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0RGF5T2ZXZWVrIChpbnB1dCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRheSA9IHRoaXMuX2lzVVRDID8gdGhpcy5fZC5nZXRVVENEYXkoKSA6IHRoaXMuX2QuZ2V0RGF5KCk7XG4gICAgICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpbnB1dCA9IHBhcnNlV2Vla2RheShpbnB1dCwgdGhpcy5sb2NhbGVEYXRhKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkKGlucHV0IC0gZGF5LCAnZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGRheTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldExvY2FsZURheU9mV2VlayAoaW5wdXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3ZWVrZGF5ID0gKHRoaXMuZGF5KCkgKyA3IC0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93KSAlIDc7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2Vla2RheSA6IHRoaXMuYWRkKGlucHV0IC0gd2Vla2RheSwgJ2QnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZXRJU09EYXlPZldlZWsgKGlucHV0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICAgICAgfVxuICAgICAgICAvLyBiZWhhdmVzIHRoZSBzYW1lIGFzIG1vbWVudCNkYXkgZXhjZXB0XG4gICAgICAgIC8vIGFzIGEgZ2V0dGVyLCByZXR1cm5zIDcgaW5zdGVhZCBvZiAwICgxLTcgcmFuZ2UgaW5zdGVhZCBvZiAwLTYpXG4gICAgICAgIC8vIGFzIGEgc2V0dGVyLCBzdW5kYXkgc2hvdWxkIGJlbG9uZyB0byB0aGUgcHJldmlvdXMgd2Vlay5cbiAgICAgICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyB0aGlzLmRheSgpIHx8IDcgOiB0aGlzLmRheSh0aGlzLmRheSgpICUgNyA/IGlucHV0IDogaW5wdXQgLSA3KTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignREREJywgWydEREREJywgM10sICdERERvJywgJ2RheU9mWWVhcicpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCdkYXlPZlllYXInLCAnREREJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdEREQnLCAgbWF0Y2gxdG8zKTtcbiAgICBhZGRSZWdleFRva2VuKCdEREREJywgbWF0Y2gzKTtcbiAgICBhZGRQYXJzZVRva2VuKFsnREREJywgJ0REREQnXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZy5fZGF5T2ZZZWFyID0gdG9JbnQoaW5wdXQpO1xuICAgIH0pO1xuXG4gICAgLy8gSEVMUEVSU1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0RGF5T2ZZZWFyIChpbnB1dCkge1xuICAgICAgICB2YXIgZGF5T2ZZZWFyID0gTWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpIC0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ3llYXInKSkgLyA4NjRlNSkgKyAxO1xuICAgICAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IGRheU9mWWVhciA6IHRoaXMuYWRkKChpbnB1dCAtIGRheU9mWWVhciksICdkJyk7XG4gICAgfVxuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgZnVuY3Rpb24gaEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG91cnMoKSAlIDEyIHx8IDEyO1xuICAgIH1cblxuICAgIGFkZEZvcm1hdFRva2VuKCdIJywgWydISCcsIDJdLCAwLCAnaG91cicpO1xuICAgIGFkZEZvcm1hdFRva2VuKCdoJywgWydoaCcsIDJdLCAwLCBoRm9ybWF0KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdobW0nLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMik7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignaG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMikgK1xuICAgICAgICAgICAgemVyb0ZpbGwodGhpcy5zZWNvbmRzKCksIDIpO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ0htbScsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICcnICsgdGhpcy5ob3VycygpICsgemVyb0ZpbGwodGhpcy5taW51dGVzKCksIDIpO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ0htbXNzJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJycgKyB0aGlzLmhvdXJzKCkgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMikgK1xuICAgICAgICAgICAgemVyb0ZpbGwodGhpcy5zZWNvbmRzKCksIDIpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbWVyaWRpZW0gKHRva2VuLCBsb3dlcmNhc2UpIHtcbiAgICAgICAgYWRkRm9ybWF0VG9rZW4odG9rZW4sIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksIHRoaXMubWludXRlcygpLCBsb3dlcmNhc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBtZXJpZGllbSgnYScsIHRydWUpO1xuICAgIG1lcmlkaWVtKCdBJywgZmFsc2UpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCdob3VyJywgJ2gnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGZ1bmN0aW9uIG1hdGNoTWVyaWRpZW0gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5fbWVyaWRpZW1QYXJzZTtcbiAgICB9XG5cbiAgICBhZGRSZWdleFRva2VuKCdhJywgIG1hdGNoTWVyaWRpZW0pO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0EnLCAgbWF0Y2hNZXJpZGllbSk7XG4gICAgYWRkUmVnZXhUb2tlbignSCcsICBtYXRjaDF0bzIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ2gnLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdISCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdoaCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ2htbScsIG1hdGNoM3RvNCk7XG4gICAgYWRkUmVnZXhUb2tlbignaG1tc3MnLCBtYXRjaDV0bzYpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0htbScsIG1hdGNoM3RvNCk7XG4gICAgYWRkUmVnZXhUb2tlbignSG1tc3MnLCBtYXRjaDV0bzYpO1xuXG4gICAgYWRkUGFyc2VUb2tlbihbJ0gnLCAnSEgnXSwgSE9VUik7XG4gICAgYWRkUGFyc2VUb2tlbihbJ2EnLCAnQSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgY29uZmlnLl9pc1BtID0gY29uZmlnLl9sb2NhbGUuaXNQTShpbnB1dCk7XG4gICAgICAgIGNvbmZpZy5fbWVyaWRpZW0gPSBpbnB1dDtcbiAgICB9KTtcbiAgICBhZGRQYXJzZVRva2VuKFsnaCcsICdoaCddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dCk7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xuICAgIH0pO1xuICAgIGFkZFBhcnNlVG9rZW4oJ2htbScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICB2YXIgcG9zID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICAgICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dC5zdWJzdHIoMCwgcG9zKSk7XG4gICAgICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zKSk7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xuICAgIH0pO1xuICAgIGFkZFBhcnNlVG9rZW4oJ2htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNDtcbiAgICAgICAgdmFyIHBvczIgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgICAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gICAgICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICAgICAgICBhcnJheVtTRUNPTkRdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG4gICAgfSk7XG4gICAgYWRkUGFyc2VUb2tlbignSG1tJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgICAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgICAgICAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MpKTtcbiAgICB9KTtcbiAgICBhZGRQYXJzZVRva2VuKCdIbW1zcycsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICB2YXIgcG9zMSA9IGlucHV0Lmxlbmd0aCAtIDQ7XG4gICAgICAgIHZhciBwb3MyID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICAgICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dC5zdWJzdHIoMCwgcG9zMSkpO1xuICAgICAgICBhcnJheVtNSU5VVEVdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvczEsIDIpKTtcbiAgICAgICAgYXJyYXlbU0VDT05EXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MyKSk7XG4gICAgfSk7XG5cbiAgICAvLyBMT0NBTEVTXG5cbiAgICBmdW5jdGlvbiBsb2NhbGVJc1BNIChpbnB1dCkge1xuICAgICAgICAvLyBJRTggUXVpcmtzIE1vZGUgJiBJRTcgU3RhbmRhcmRzIE1vZGUgZG8gbm90IGFsbG93IGFjY2Vzc2luZyBzdHJpbmdzIGxpa2UgYXJyYXlzXG4gICAgICAgIC8vIFVzaW5nIGNoYXJBdCBzaG91bGQgYmUgbW9yZSBjb21wYXRpYmxlLlxuICAgICAgICByZXR1cm4gKChpbnB1dCArICcnKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKSA9PT0gJ3AnKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2UgPSAvW2FwXVxcLj9tP1xcLj8vaTtcbiAgICBmdW5jdGlvbiBsb2NhbGVNZXJpZGllbSAoaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICAgICAgaWYgKGhvdXJzID4gMTEpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xvd2VyID8gJ3BtJyA6ICdQTSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaXNMb3dlciA/ICdhbScgOiAnQU0nO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICAvLyBTZXR0aW5nIHRoZSBob3VyIHNob3VsZCBrZWVwIHRoZSB0aW1lLCBiZWNhdXNlIHRoZSB1c2VyIGV4cGxpY2l0bHlcbiAgICAvLyBzcGVjaWZpZWQgd2hpY2ggaG91ciBoZSB3YW50cy4gU28gdHJ5aW5nIHRvIG1haW50YWluIHRoZSBzYW1lIGhvdXIgKGluXG4gICAgLy8gYSBuZXcgdGltZXpvbmUpIG1ha2VzIHNlbnNlLiBBZGRpbmcvc3VidHJhY3RpbmcgaG91cnMgZG9lcyBub3QgZm9sbG93XG4gICAgLy8gdGhpcyBydWxlLlxuICAgIHZhciBnZXRTZXRIb3VyID0gbWFrZUdldFNldCgnSG91cnMnLCB0cnVlKTtcblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdtJywgWydtbScsIDJdLCAwLCAnbWludXRlJyk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ21pbnV0ZScsICdtJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdtJywgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignbW0nLCBtYXRjaDF0bzIsIG1hdGNoMik7XG4gICAgYWRkUGFyc2VUb2tlbihbJ20nLCAnbW0nXSwgTUlOVVRFKTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIHZhciBnZXRTZXRNaW51dGUgPSBtYWtlR2V0U2V0KCdNaW51dGVzJywgZmFsc2UpO1xuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ3MnLCBbJ3NzJywgMl0sIDAsICdzZWNvbmQnKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnc2Vjb25kJywgJ3MnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ3MnLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdzcycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRQYXJzZVRva2VuKFsncycsICdzcyddLCBTRUNPTkQpO1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgdmFyIGdldFNldFNlY29uZCA9IG1ha2VHZXRTZXQoJ1NlY29uZHMnLCBmYWxzZSk7XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignUycsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwMCk7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1NTJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwKTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTJywgM10sIDAsICdtaWxsaXNlY29uZCcpO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTUycsIDRdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDtcbiAgICB9KTtcbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTJywgNV0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDtcbiAgICB9KTtcbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTUycsIDZdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwO1xuICAgIH0pO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTUycsIDddLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDtcbiAgICB9KTtcbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1NTJywgOF0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwMDtcbiAgICB9KTtcbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1NTUycsIDldLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDAwO1xuICAgIH0pO1xuXG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ21pbGxpc2Vjb25kJywgJ21zJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdTJywgICAgbWF0Y2gxdG8zLCBtYXRjaDEpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1NTJywgICBtYXRjaDF0bzMsIG1hdGNoMik7XG4gICAgYWRkUmVnZXhUb2tlbignU1NTJywgIG1hdGNoMXRvMywgbWF0Y2gzKTtcblxuICAgIHZhciB0b2tlbjtcbiAgICBmb3IgKHRva2VuID0gJ1NTU1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gICAgICAgIGFkZFJlZ2V4VG9rZW4odG9rZW4sIG1hdGNoVW5zaWduZWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlTXMoaW5wdXQsIGFycmF5KSB7XG4gICAgICAgIGFycmF5W01JTExJU0VDT05EXSA9IHRvSW50KCgnMC4nICsgaW5wdXQpICogMTAwMCk7XG4gICAgfVxuXG4gICAgZm9yICh0b2tlbiA9ICdTJzsgdG9rZW4ubGVuZ3RoIDw9IDk7IHRva2VuICs9ICdTJykge1xuICAgICAgICBhZGRQYXJzZVRva2VuKHRva2VuLCBwYXJzZU1zKTtcbiAgICB9XG4gICAgLy8gTU9NRU5UU1xuXG4gICAgdmFyIGdldFNldE1pbGxpc2Vjb25kID0gbWFrZUdldFNldCgnTWlsbGlzZWNvbmRzJywgZmFsc2UpO1xuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ3onLCAgMCwgMCwgJ3pvbmVBYmJyJyk7XG4gICAgYWRkRm9ybWF0VG9rZW4oJ3p6JywgMCwgMCwgJ3pvbmVOYW1lJyk7XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICBmdW5jdGlvbiBnZXRab25lQWJiciAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1VUQyA/ICdVVEMnIDogJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Wm9uZU5hbWUgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNVVEMgPyAnQ29vcmRpbmF0ZWQgVW5pdmVyc2FsIFRpbWUnIDogJyc7XG4gICAgfVxuXG4gICAgdmFyIG1vbWVudFByb3RvdHlwZV9fcHJvdG8gPSBNb21lbnQucHJvdG90eXBlO1xuXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5hZGQgICAgICAgICAgICAgICA9IGFkZF9zdWJ0cmFjdF9fYWRkO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uY2FsZW5kYXIgICAgICAgICAgPSBtb21lbnRfY2FsZW5kYXJfX2NhbGVuZGFyO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uY2xvbmUgICAgICAgICAgICAgPSBjbG9uZTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRpZmYgICAgICAgICAgICAgID0gZGlmZjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmVuZE9mICAgICAgICAgICAgID0gZW5kT2Y7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5mb3JtYXQgICAgICAgICAgICA9IGZvcm1hdDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmZyb20gICAgICAgICAgICAgID0gZnJvbTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmZyb21Ob3cgICAgICAgICAgID0gZnJvbU5vdztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvICAgICAgICAgICAgICAgID0gdG87XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by50b05vdyAgICAgICAgICAgICA9IHRvTm93O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZ2V0ICAgICAgICAgICAgICAgPSBnZXRTZXQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pbnZhbGlkQXQgICAgICAgICA9IGludmFsaWRBdDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzQWZ0ZXIgICAgICAgICAgID0gaXNBZnRlcjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzQmVmb3JlICAgICAgICAgID0gaXNCZWZvcmU7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc0JldHdlZW4gICAgICAgICA9IGlzQmV0d2VlbjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzU2FtZSAgICAgICAgICAgID0gaXNTYW1lO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNTYW1lT3JBZnRlciAgICAgPSBpc1NhbWVPckFmdGVyO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNTYW1lT3JCZWZvcmUgICAgPSBpc1NhbWVPckJlZm9yZTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzVmFsaWQgICAgICAgICAgID0gbW9tZW50X3ZhbGlkX19pc1ZhbGlkO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubGFuZyAgICAgICAgICAgICAgPSBsYW5nO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubG9jYWxlICAgICAgICAgICAgPSBsb2NhbGU7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5sb2NhbGVEYXRhICAgICAgICA9IGxvY2FsZURhdGE7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5tYXggICAgICAgICAgICAgICA9IHByb3RvdHlwZU1heDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1pbiAgICAgICAgICAgICAgID0gcHJvdG90eXBlTWluO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ucGFyc2luZ0ZsYWdzICAgICAgPSBwYXJzaW5nRmxhZ3M7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5zZXQgICAgICAgICAgICAgICA9IGdldFNldDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnN0YXJ0T2YgICAgICAgICAgID0gc3RhcnRPZjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnN1YnRyYWN0ICAgICAgICAgID0gYWRkX3N1YnRyYWN0X19zdWJ0cmFjdDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvQXJyYXkgICAgICAgICAgID0gdG9BcnJheTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvT2JqZWN0ICAgICAgICAgID0gdG9PYmplY3Q7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by50b0RhdGUgICAgICAgICAgICA9IHRvRGF0ZTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvSVNPU3RyaW5nICAgICAgID0gbW9tZW50X2Zvcm1hdF9fdG9JU09TdHJpbmc7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by50b0pTT04gICAgICAgICAgICA9IHRvSlNPTjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvU3RyaW5nICAgICAgICAgID0gdG9TdHJpbmc7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by51bml4ICAgICAgICAgICAgICA9IHVuaXg7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by52YWx1ZU9mICAgICAgICAgICA9IHRvX3R5cGVfX3ZhbHVlT2Y7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5jcmVhdGlvbkRhdGEgICAgICA9IGNyZWF0aW9uRGF0YTtcblxuICAgIC8vIFllYXJcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnllYXIgICAgICAgPSBnZXRTZXRZZWFyO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNMZWFwWWVhciA9IGdldElzTGVhcFllYXI7XG5cbiAgICAvLyBXZWVrIFllYXJcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLndlZWtZZWFyICAgID0gZ2V0U2V0V2Vla1llYXI7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc29XZWVrWWVhciA9IGdldFNldElTT1dlZWtZZWFyO1xuXG4gICAgLy8gUXVhcnRlclxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ucXVhcnRlciA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG8ucXVhcnRlcnMgPSBnZXRTZXRRdWFydGVyO1xuXG4gICAgLy8gTW9udGhcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1vbnRoICAgICAgID0gZ2V0U2V0TW9udGg7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5kYXlzSW5Nb250aCA9IGdldERheXNJbk1vbnRoO1xuXG4gICAgLy8gV2Vla1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ud2VlayAgICAgICAgICAgPSBtb21lbnRQcm90b3R5cGVfX3Byb3RvLndlZWtzICAgICAgICA9IGdldFNldFdlZWs7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc29XZWVrICAgICAgICA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNvV2Vla3MgICAgID0gZ2V0U2V0SVNPV2VlaztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLndlZWtzSW5ZZWFyICAgID0gZ2V0V2Vla3NJblllYXI7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc29XZWVrc0luWWVhciA9IGdldElTT1dlZWtzSW5ZZWFyO1xuXG4gICAgLy8gRGF5XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5kYXRlICAgICAgID0gZ2V0U2V0RGF5T2ZNb250aDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRheSAgICAgICAgPSBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRheXMgICAgICAgICAgICAgPSBnZXRTZXREYXlPZldlZWs7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by53ZWVrZGF5ICAgID0gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNvV2Vla2RheSA9IGdldFNldElTT0RheU9mV2VlaztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRheU9mWWVhciAgPSBnZXRTZXREYXlPZlllYXI7XG5cbiAgICAvLyBIb3VyXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5ob3VyID0gbW9tZW50UHJvdG90eXBlX19wcm90by5ob3VycyA9IGdldFNldEhvdXI7XG5cbiAgICAvLyBNaW51dGVcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1pbnV0ZSA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubWludXRlcyA9IGdldFNldE1pbnV0ZTtcblxuICAgIC8vIFNlY29uZFxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uc2Vjb25kID0gbW9tZW50UHJvdG90eXBlX19wcm90by5zZWNvbmRzID0gZ2V0U2V0U2Vjb25kO1xuXG4gICAgLy8gTWlsbGlzZWNvbmRcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1pbGxpc2Vjb25kID0gbW9tZW50UHJvdG90eXBlX19wcm90by5taWxsaXNlY29uZHMgPSBnZXRTZXRNaWxsaXNlY29uZDtcblxuICAgIC8vIE9mZnNldFxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udXRjT2Zmc2V0ICAgICAgICAgICAgPSBnZXRTZXRPZmZzZXQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by51dGMgICAgICAgICAgICAgICAgICA9IHNldE9mZnNldFRvVVRDO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubG9jYWwgICAgICAgICAgICAgICAgPSBzZXRPZmZzZXRUb0xvY2FsO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ucGFyc2Vab25lICAgICAgICAgICAgPSBzZXRPZmZzZXRUb1BhcnNlZE9mZnNldDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmhhc0FsaWduZWRIb3VyT2Zmc2V0ID0gaGFzQWxpZ25lZEhvdXJPZmZzZXQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc0RTVCAgICAgICAgICAgICAgICA9IGlzRGF5bGlnaHRTYXZpbmdUaW1lO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNEU1RTaGlmdGVkICAgICAgICAgPSBpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc0xvY2FsICAgICAgICAgICAgICA9IGlzTG9jYWw7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc1V0Y09mZnNldCAgICAgICAgICA9IGlzVXRjT2Zmc2V0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNVdGMgICAgICAgICAgICAgICAgPSBpc1V0YztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzVVRDICAgICAgICAgICAgICAgID0gaXNVdGM7XG5cbiAgICAvLyBUaW1lem9uZVxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uem9uZUFiYnIgPSBnZXRab25lQWJicjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnpvbmVOYW1lID0gZ2V0Wm9uZU5hbWU7XG5cbiAgICAvLyBEZXByZWNhdGlvbnNcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRhdGVzICA9IGRlcHJlY2F0ZSgnZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC4nLCBnZXRTZXREYXlPZk1vbnRoKTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1vbnRocyA9IGRlcHJlY2F0ZSgnbW9udGhzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb250aCBpbnN0ZWFkJywgZ2V0U2V0TW9udGgpO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ueWVhcnMgID0gZGVwcmVjYXRlKCd5ZWFycyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgeWVhciBpbnN0ZWFkJywgZ2V0U2V0WWVhcik7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by56b25lICAgPSBkZXByZWNhdGUoJ21vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTc3OScsIGdldFNldFpvbmUpO1xuXG4gICAgdmFyIG1vbWVudFByb3RvdHlwZSA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG87XG5cbiAgICBmdW5jdGlvbiBtb21lbnRfX2NyZWF0ZVVuaXggKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQgKiAxMDAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb21lbnRfX2NyZWF0ZUluWm9uZSAoKSB7XG4gICAgICAgIHJldHVybiBsb2NhbF9fY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5wYXJzZVpvbmUoKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdENhbGVuZGFyID0ge1xuICAgICAgICBzYW1lRGF5IDogJ1tUb2RheSBhdF0gTFQnLFxuICAgICAgICBuZXh0RGF5IDogJ1tUb21vcnJvdyBhdF0gTFQnLFxuICAgICAgICBuZXh0V2VlayA6ICdkZGRkIFthdF0gTFQnLFxuICAgICAgICBsYXN0RGF5IDogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICAgICAgbGFzdFdlZWsgOiAnW0xhc3RdIGRkZGQgW2F0XSBMVCcsXG4gICAgICAgIHNhbWVFbHNlIDogJ0wnXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvY2FsZV9jYWxlbmRhcl9fY2FsZW5kYXIgKGtleSwgbW9tLCBub3cpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuX2NhbGVuZGFyW2tleV07XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKG91dHB1dCkgPyBvdXRwdXQuY2FsbChtb20sIG5vdykgOiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRMb25nRGF0ZUZvcm1hdCA9IHtcbiAgICAgICAgTFRTICA6ICdoOm1tOnNzIEEnLFxuICAgICAgICBMVCAgIDogJ2g6bW0gQScsXG4gICAgICAgIEwgICAgOiAnTU0vREQvWVlZWScsXG4gICAgICAgIExMICAgOiAnTU1NTSBELCBZWVlZJyxcbiAgICAgICAgTExMICA6ICdNTU1NIEQsIFlZWVkgaDptbSBBJyxcbiAgICAgICAgTExMTCA6ICdkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBJ1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBsb25nRGF0ZUZvcm1hdCAoa2V5KSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldLFxuICAgICAgICAgICAgZm9ybWF0VXBwZXIgPSB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXkudG9VcHBlckNhc2UoKV07XG5cbiAgICAgICAgaWYgKGZvcm1hdCB8fCAhZm9ybWF0VXBwZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldID0gZm9ybWF0VXBwZXIucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWwuc2xpY2UoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0SW52YWxpZERhdGUgPSAnSW52YWxpZCBkYXRlJztcblxuICAgIGZ1bmN0aW9uIGludmFsaWREYXRlICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludmFsaWREYXRlO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0T3JkaW5hbCA9ICclZCc7XG4gICAgdmFyIGRlZmF1bHRPcmRpbmFsUGFyc2UgPSAvXFxkezEsMn0vO1xuXG4gICAgZnVuY3Rpb24gb3JkaW5hbCAobnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcmRpbmFsLnJlcGxhY2UoJyVkJywgbnVtYmVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmVQYXJzZVBvc3RGb3JtYXQgKHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0UmVsYXRpdmVUaW1lID0ge1xuICAgICAgICBmdXR1cmUgOiAnaW4gJXMnLFxuICAgICAgICBwYXN0ICAgOiAnJXMgYWdvJyxcbiAgICAgICAgcyAgOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgICAgIG0gIDogJ2EgbWludXRlJyxcbiAgICAgICAgbW0gOiAnJWQgbWludXRlcycsXG4gICAgICAgIGggIDogJ2FuIGhvdXInLFxuICAgICAgICBoaCA6ICclZCBob3VycycsXG4gICAgICAgIGQgIDogJ2EgZGF5JyxcbiAgICAgICAgZGQgOiAnJWQgZGF5cycsXG4gICAgICAgIE0gIDogJ2EgbW9udGgnLFxuICAgICAgICBNTSA6ICclZCBtb250aHMnLFxuICAgICAgICB5ICA6ICdhIHllYXInLFxuICAgICAgICB5eSA6ICclZCB5ZWFycydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gcmVsYXRpdmVfX3JlbGF0aXZlVGltZSAobnVtYmVyLCB3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKSB7XG4gICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLl9yZWxhdGl2ZVRpbWVbc3RyaW5nXTtcbiAgICAgICAgcmV0dXJuIChpc0Z1bmN0aW9uKG91dHB1dCkpID9cbiAgICAgICAgICAgIG91dHB1dChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIDpcbiAgICAgICAgICAgIG91dHB1dC5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhc3RGdXR1cmUgKGRpZmYsIG91dHB1dCkge1xuICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5fcmVsYXRpdmVUaW1lW2RpZmYgPiAwID8gJ2Z1dHVyZScgOiAncGFzdCddO1xuICAgICAgICByZXR1cm4gaXNGdW5jdGlvbihmb3JtYXQpID8gZm9ybWF0KG91dHB1dCkgOiBmb3JtYXQucmVwbGFjZSgvJXMvaSwgb3V0cHV0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2NhbGVfc2V0X19zZXQgKGNvbmZpZykge1xuICAgICAgICB2YXIgcHJvcCwgaTtcbiAgICAgICAgZm9yIChpIGluIGNvbmZpZykge1xuICAgICAgICAgICAgcHJvcCA9IGNvbmZpZ1tpXTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tpXSA9IHByb3A7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbJ18nICsgaV0gPSBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIExlbmllbnQgb3JkaW5hbCBwYXJzaW5nIGFjY2VwdHMganVzdCBhIG51bWJlciBpbiBhZGRpdGlvbiB0b1xuICAgICAgICAvLyBudW1iZXIgKyAocG9zc2libHkpIHN0dWZmIGNvbWluZyBmcm9tIF9vcmRpbmFsUGFyc2VMZW5pZW50LlxuICAgICAgICB0aGlzLl9vcmRpbmFsUGFyc2VMZW5pZW50ID0gbmV3IFJlZ0V4cCh0aGlzLl9vcmRpbmFsUGFyc2Uuc291cmNlICsgJ3wnICsgKC9cXGR7MSwyfS8pLnNvdXJjZSk7XG4gICAgfVxuXG4gICAgdmFyIHByb3RvdHlwZV9fcHJvdG8gPSBMb2NhbGUucHJvdG90eXBlO1xuXG4gICAgcHJvdG90eXBlX19wcm90by5fY2FsZW5kYXIgICAgICAgPSBkZWZhdWx0Q2FsZW5kYXI7XG4gICAgcHJvdG90eXBlX19wcm90by5jYWxlbmRhciAgICAgICAgPSBsb2NhbGVfY2FsZW5kYXJfX2NhbGVuZGFyO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX2xvbmdEYXRlRm9ybWF0ID0gZGVmYXVsdExvbmdEYXRlRm9ybWF0O1xuICAgIHByb3RvdHlwZV9fcHJvdG8ubG9uZ0RhdGVGb3JtYXQgID0gbG9uZ0RhdGVGb3JtYXQ7XG4gICAgcHJvdG90eXBlX19wcm90by5faW52YWxpZERhdGUgICAgPSBkZWZhdWx0SW52YWxpZERhdGU7XG4gICAgcHJvdG90eXBlX19wcm90by5pbnZhbGlkRGF0ZSAgICAgPSBpbnZhbGlkRGF0ZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9vcmRpbmFsICAgICAgICA9IGRlZmF1bHRPcmRpbmFsO1xuICAgIHByb3RvdHlwZV9fcHJvdG8ub3JkaW5hbCAgICAgICAgID0gb3JkaW5hbDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9vcmRpbmFsUGFyc2UgICA9IGRlZmF1bHRPcmRpbmFsUGFyc2U7XG4gICAgcHJvdG90eXBlX19wcm90by5wcmVwYXJzZSAgICAgICAgPSBwcmVQYXJzZVBvc3RGb3JtYXQ7XG4gICAgcHJvdG90eXBlX19wcm90by5wb3N0Zm9ybWF0ICAgICAgPSBwcmVQYXJzZVBvc3RGb3JtYXQ7XG4gICAgcHJvdG90eXBlX19wcm90by5fcmVsYXRpdmVUaW1lICAgPSBkZWZhdWx0UmVsYXRpdmVUaW1lO1xuICAgIHByb3RvdHlwZV9fcHJvdG8ucmVsYXRpdmVUaW1lICAgID0gcmVsYXRpdmVfX3JlbGF0aXZlVGltZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLnBhc3RGdXR1cmUgICAgICA9IHBhc3RGdXR1cmU7XG4gICAgcHJvdG90eXBlX19wcm90by5zZXQgICAgICAgICAgICAgPSBsb2NhbGVfc2V0X19zZXQ7XG5cbiAgICAvLyBNb250aFxuICAgIHByb3RvdHlwZV9fcHJvdG8ubW9udGhzICAgICAgID0gICAgICAgIGxvY2FsZU1vbnRocztcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9tb250aHMgICAgICA9IGRlZmF1bHRMb2NhbGVNb250aHM7XG4gICAgcHJvdG90eXBlX19wcm90by5tb250aHNTaG9ydCAgPSAgICAgICAgbG9jYWxlTW9udGhzU2hvcnQ7XG4gICAgcHJvdG90eXBlX19wcm90by5fbW9udGhzU2hvcnQgPSBkZWZhdWx0TG9jYWxlTW9udGhzU2hvcnQ7XG4gICAgcHJvdG90eXBlX19wcm90by5tb250aHNQYXJzZSAgPSAgICAgICAgbG9jYWxlTW9udGhzUGFyc2U7XG5cbiAgICAvLyBXZWVrXG4gICAgcHJvdG90eXBlX19wcm90by53ZWVrID0gbG9jYWxlV2VlaztcbiAgICBwcm90b3R5cGVfX3Byb3RvLl93ZWVrID0gZGVmYXVsdExvY2FsZVdlZWs7XG4gICAgcHJvdG90eXBlX19wcm90by5maXJzdERheU9mWWVhciA9IGxvY2FsZUZpcnN0RGF5T2ZZZWFyO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uZmlyc3REYXlPZldlZWsgPSBsb2NhbGVGaXJzdERheU9mV2VlaztcblxuICAgIC8vIERheSBvZiBXZWVrXG4gICAgcHJvdG90eXBlX19wcm90by53ZWVrZGF5cyAgICAgICA9ICAgICAgICBsb2NhbGVXZWVrZGF5cztcbiAgICBwcm90b3R5cGVfX3Byb3RvLl93ZWVrZGF5cyAgICAgID0gZGVmYXVsdExvY2FsZVdlZWtkYXlzO1xuICAgIHByb3RvdHlwZV9fcHJvdG8ud2Vla2RheXNNaW4gICAgPSAgICAgICAgbG9jYWxlV2Vla2RheXNNaW47XG4gICAgcHJvdG90eXBlX19wcm90by5fd2Vla2RheXNNaW4gICA9IGRlZmF1bHRMb2NhbGVXZWVrZGF5c01pbjtcbiAgICBwcm90b3R5cGVfX3Byb3RvLndlZWtkYXlzU2hvcnQgID0gICAgICAgIGxvY2FsZVdlZWtkYXlzU2hvcnQ7XG4gICAgcHJvdG90eXBlX19wcm90by5fd2Vla2RheXNTaG9ydCA9IGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0O1xuICAgIHByb3RvdHlwZV9fcHJvdG8ud2Vla2RheXNQYXJzZSAgPSAgICAgICAgbG9jYWxlV2Vla2RheXNQYXJzZTtcblxuICAgIC8vIEhvdXJzXG4gICAgcHJvdG90eXBlX19wcm90by5pc1BNID0gbG9jYWxlSXNQTTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9tZXJpZGllbVBhcnNlID0gZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2U7XG4gICAgcHJvdG90eXBlX19wcm90by5tZXJpZGllbSA9IGxvY2FsZU1lcmlkaWVtO1xuXG4gICAgZnVuY3Rpb24gbGlzdHNfX2dldCAoZm9ybWF0LCBpbmRleCwgZmllbGQsIHNldHRlcikge1xuICAgICAgICB2YXIgbG9jYWxlID0gbG9jYWxlX2xvY2FsZXNfX2dldExvY2FsZSgpO1xuICAgICAgICB2YXIgdXRjID0gY3JlYXRlX3V0Y19fY3JlYXRlVVRDKCkuc2V0KHNldHRlciwgaW5kZXgpO1xuICAgICAgICByZXR1cm4gbG9jYWxlW2ZpZWxkXSh1dGMsIGZvcm1hdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdCAoZm9ybWF0LCBpbmRleCwgZmllbGQsIGNvdW50LCBzZXR0ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpbmRleCA9IGZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnJztcblxuICAgICAgICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RzX19nZXQoZm9ybWF0LCBpbmRleCwgZmllbGQsIHNldHRlcik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgb3V0W2ldID0gbGlzdHNfX2dldChmb3JtYXQsIGksIGZpZWxkLCBzZXR0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdHNfX2xpc3RNb250aHMgKGZvcm1hdCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QoZm9ybWF0LCBpbmRleCwgJ21vbnRocycsIDEyLCAnbW9udGgnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fbGlzdE1vbnRoc1Nob3J0IChmb3JtYXQsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBsaXN0KGZvcm1hdCwgaW5kZXgsICdtb250aHNTaG9ydCcsIDEyLCAnbW9udGgnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fbGlzdFdlZWtkYXlzIChmb3JtYXQsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBsaXN0KGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5cycsIDcsICdkYXknKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fbGlzdFdlZWtkYXlzU2hvcnQgKGZvcm1hdCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QoZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzU2hvcnQnLCA3LCAnZGF5Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGlzdHNfX2xpc3RXZWVrZGF5c01pbiAoZm9ybWF0LCBpbmRleCkge1xuICAgICAgICByZXR1cm4gbGlzdChmb3JtYXQsIGluZGV4LCAnd2Vla2RheXNNaW4nLCA3LCAnZGF5Jyk7XG4gICAgfVxuXG4gICAgbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZSgnZW4nLCB7XG4gICAgICAgIG1vbnRoc1BhcnNlIDogWy9eamFuL2ksIC9eZmViL2ksIC9ebWFyL2ksIC9eYXByL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYXVnL2ksIC9ec2VwL2ksIC9eb2N0L2ksIC9ebm92L2ksIC9eZGVjL2ldLFxuICAgICAgICBsb25nTW9udGhzUGFyc2UgOiBbL15qYW51YXJ5JC9pLCAvXmZlYnJ1YXJ5JC9pLCAvXm1hcmNoJC9pLCAvXmFwcmlsJC9pLCAvXm1heSQvaSwgL15qdW5lJC9pLCAvXmp1bHkkL2ksIC9eYXVndXN0JC9pLCAvXnNlcHRlbWJlciQvaSwgL15vY3RvYmVyJC9pLCAvXm5vdmVtYmVyJC9pLCAvXmRlY2VtYmVyJC9pXSxcbiAgICAgICAgc2hvcnRNb250aHNQYXJzZSA6IFsvXmphbiQvaSwgL15mZWIkL2ksIC9ebWFyJC9pLCAvXmFwciQvaSwgL15tYXkkL2ksIC9eanVuJC9pLCAvXmp1bCQvaSwgL15hdWcvaSwgL15zZXB0PyQvaSwgL15vY3QkL2ksIC9ebm92JC9pLCAvXmRlYyQvaV0sXG4gICAgICAgIG9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHRofHN0fG5kfHJkKS8sXG4gICAgICAgIG9yZGluYWwgOiBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICAgICAgICAgIG91dHB1dCA9ICh0b0ludChudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEpID8gJ3RoJyA6XG4gICAgICAgICAgICAgICAgKGIgPT09IDEpID8gJ3N0JyA6XG4gICAgICAgICAgICAgICAgKGIgPT09IDIpID8gJ25kJyA6XG4gICAgICAgICAgICAgICAgKGIgPT09IDMpID8gJ3JkJyA6ICd0aCc7XG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBTaWRlIGVmZmVjdCBpbXBvcnRzXG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmxhbmcgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlIGluc3RlYWQuJywgbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZSk7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmxhbmdEYXRhID0gZGVwcmVjYXRlKCdtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuJywgbG9jYWxlX2xvY2FsZXNfX2dldExvY2FsZSk7XG5cbiAgICB2YXIgbWF0aEFicyA9IE1hdGguYWJzO1xuXG4gICAgZnVuY3Rpb24gZHVyYXRpb25fYWJzX19hYnMgKCkge1xuICAgICAgICB2YXIgZGF0YSAgICAgICAgICAgPSB0aGlzLl9kYXRhO1xuXG4gICAgICAgIHRoaXMuX21pbGxpc2Vjb25kcyA9IG1hdGhBYnModGhpcy5fbWlsbGlzZWNvbmRzKTtcbiAgICAgICAgdGhpcy5fZGF5cyAgICAgICAgID0gbWF0aEFicyh0aGlzLl9kYXlzKTtcbiAgICAgICAgdGhpcy5fbW9udGhzICAgICAgID0gbWF0aEFicyh0aGlzLl9tb250aHMpO1xuXG4gICAgICAgIGRhdGEubWlsbGlzZWNvbmRzICA9IG1hdGhBYnMoZGF0YS5taWxsaXNlY29uZHMpO1xuICAgICAgICBkYXRhLnNlY29uZHMgICAgICAgPSBtYXRoQWJzKGRhdGEuc2Vjb25kcyk7XG4gICAgICAgIGRhdGEubWludXRlcyAgICAgICA9IG1hdGhBYnMoZGF0YS5taW51dGVzKTtcbiAgICAgICAgZGF0YS5ob3VycyAgICAgICAgID0gbWF0aEFicyhkYXRhLmhvdXJzKTtcbiAgICAgICAgZGF0YS5tb250aHMgICAgICAgID0gbWF0aEFicyhkYXRhLm1vbnRocyk7XG4gICAgICAgIGRhdGEueWVhcnMgICAgICAgICA9IG1hdGhBYnMoZGF0YS55ZWFycyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHVyYXRpb25fYWRkX3N1YnRyYWN0X19hZGRTdWJ0cmFjdCAoZHVyYXRpb24sIGlucHV0LCB2YWx1ZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBvdGhlciA9IGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24oaW5wdXQsIHZhbHVlKTtcblxuICAgICAgICBkdXJhdGlvbi5fbWlsbGlzZWNvbmRzICs9IGRpcmVjdGlvbiAqIG90aGVyLl9taWxsaXNlY29uZHM7XG4gICAgICAgIGR1cmF0aW9uLl9kYXlzICAgICAgICAgKz0gZGlyZWN0aW9uICogb3RoZXIuX2RheXM7XG4gICAgICAgIGR1cmF0aW9uLl9tb250aHMgICAgICAgKz0gZGlyZWN0aW9uICogb3RoZXIuX21vbnRocztcblxuICAgICAgICByZXR1cm4gZHVyYXRpb24uX2J1YmJsZSgpO1xuICAgIH1cblxuICAgIC8vIHN1cHBvcnRzIG9ubHkgMi4wLXN0eWxlIGFkZCgxLCAncycpIG9yIGFkZChkdXJhdGlvbilcbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9hZGRfc3VidHJhY3RfX2FkZCAoaW5wdXQsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBkdXJhdGlvbl9hZGRfc3VidHJhY3RfX2FkZFN1YnRyYWN0KHRoaXMsIGlucHV0LCB2YWx1ZSwgMSk7XG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydHMgb25seSAyLjAtc3R5bGUgc3VidHJhY3QoMSwgJ3MnKSBvciBzdWJ0cmFjdChkdXJhdGlvbilcbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9hZGRfc3VidHJhY3RfX3N1YnRyYWN0IChpbnB1dCwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGR1cmF0aW9uX2FkZF9zdWJ0cmFjdF9fYWRkU3VidHJhY3QodGhpcywgaW5wdXQsIHZhbHVlLCAtMSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWJzQ2VpbCAobnVtYmVyKSB7XG4gICAgICAgIGlmIChudW1iZXIgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnViYmxlICgpIHtcbiAgICAgICAgdmFyIG1pbGxpc2Vjb25kcyA9IHRoaXMuX21pbGxpc2Vjb25kcztcbiAgICAgICAgdmFyIGRheXMgICAgICAgICA9IHRoaXMuX2RheXM7XG4gICAgICAgIHZhciBtb250aHMgICAgICAgPSB0aGlzLl9tb250aHM7XG4gICAgICAgIHZhciBkYXRhICAgICAgICAgPSB0aGlzLl9kYXRhO1xuICAgICAgICB2YXIgc2Vjb25kcywgbWludXRlcywgaG91cnMsIHllYXJzLCBtb250aHNGcm9tRGF5cztcblxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgbWl4IG9mIHBvc2l0aXZlIGFuZCBuZWdhdGl2ZSB2YWx1ZXMsIGJ1YmJsZSBkb3duIGZpcnN0XG4gICAgICAgIC8vIGNoZWNrOiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMjE2NlxuICAgICAgICBpZiAoISgobWlsbGlzZWNvbmRzID49IDAgJiYgZGF5cyA+PSAwICYmIG1vbnRocyA+PSAwKSB8fFxuICAgICAgICAgICAgICAgIChtaWxsaXNlY29uZHMgPD0gMCAmJiBkYXlzIDw9IDAgJiYgbW9udGhzIDw9IDApKSkge1xuICAgICAgICAgICAgbWlsbGlzZWNvbmRzICs9IGFic0NlaWwobW9udGhzVG9EYXlzKG1vbnRocykgKyBkYXlzKSAqIDg2NGU1O1xuICAgICAgICAgICAgZGF5cyA9IDA7XG4gICAgICAgICAgICBtb250aHMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIGJ1YmJsZXMgdXAgdmFsdWVzLCBzZWUgdGhlIHRlc3RzIGZvclxuICAgICAgICAvLyBleGFtcGxlcyBvZiB3aGF0IHRoYXQgbWVhbnMuXG4gICAgICAgIGRhdGEubWlsbGlzZWNvbmRzID0gbWlsbGlzZWNvbmRzICUgMTAwMDtcblxuICAgICAgICBzZWNvbmRzICAgICAgICAgICA9IGFic0Zsb29yKG1pbGxpc2Vjb25kcyAvIDEwMDApO1xuICAgICAgICBkYXRhLnNlY29uZHMgICAgICA9IHNlY29uZHMgJSA2MDtcblxuICAgICAgICBtaW51dGVzICAgICAgICAgICA9IGFic0Zsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgIGRhdGEubWludXRlcyAgICAgID0gbWludXRlcyAlIDYwO1xuXG4gICAgICAgIGhvdXJzICAgICAgICAgICAgID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgICAgICAgZGF0YS5ob3VycyAgICAgICAgPSBob3VycyAlIDI0O1xuXG4gICAgICAgIGRheXMgKz0gYWJzRmxvb3IoaG91cnMgLyAyNCk7XG5cbiAgICAgICAgLy8gY29udmVydCBkYXlzIHRvIG1vbnRoc1xuICAgICAgICBtb250aHNGcm9tRGF5cyA9IGFic0Zsb29yKGRheXNUb01vbnRocyhkYXlzKSk7XG4gICAgICAgIG1vbnRocyArPSBtb250aHNGcm9tRGF5cztcbiAgICAgICAgZGF5cyAtPSBhYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHNGcm9tRGF5cykpO1xuXG4gICAgICAgIC8vIDEyIG1vbnRocyAtPiAxIHllYXJcbiAgICAgICAgeWVhcnMgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gICAgICAgIG1vbnRocyAlPSAxMjtcblxuICAgICAgICBkYXRhLmRheXMgICA9IGRheXM7XG4gICAgICAgIGRhdGEubW9udGhzID0gbW9udGhzO1xuICAgICAgICBkYXRhLnllYXJzICA9IHllYXJzO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRheXNUb01vbnRocyAoZGF5cykge1xuICAgICAgICAvLyA0MDAgeWVhcnMgaGF2ZSAxNDYwOTcgZGF5cyAodGFraW5nIGludG8gYWNjb3VudCBsZWFwIHllYXIgcnVsZXMpXG4gICAgICAgIC8vIDQwMCB5ZWFycyBoYXZlIDEyIG1vbnRocyA9PT0gNDgwMFxuICAgICAgICByZXR1cm4gZGF5cyAqIDQ4MDAgLyAxNDYwOTc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9udGhzVG9EYXlzIChtb250aHMpIHtcbiAgICAgICAgLy8gdGhlIHJldmVyc2Ugb2YgZGF5c1RvTW9udGhzXG4gICAgICAgIHJldHVybiBtb250aHMgKiAxNDYwOTcgLyA0ODAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFzICh1bml0cykge1xuICAgICAgICB2YXIgZGF5cztcbiAgICAgICAgdmFyIG1vbnRocztcbiAgICAgICAgdmFyIG1pbGxpc2Vjb25kcyA9IHRoaXMuX21pbGxpc2Vjb25kcztcblxuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICAgICAgICBpZiAodW5pdHMgPT09ICdtb250aCcgfHwgdW5pdHMgPT09ICd5ZWFyJykge1xuICAgICAgICAgICAgZGF5cyAgID0gdGhpcy5fZGF5cyAgICsgbWlsbGlzZWNvbmRzIC8gODY0ZTU7XG4gICAgICAgICAgICBtb250aHMgPSB0aGlzLl9tb250aHMgKyBkYXlzVG9Nb250aHMoZGF5cyk7XG4gICAgICAgICAgICByZXR1cm4gdW5pdHMgPT09ICdtb250aCcgPyBtb250aHMgOiBtb250aHMgLyAxMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGhhbmRsZSBtaWxsaXNlY29uZHMgc2VwYXJhdGVseSBiZWNhdXNlIG9mIGZsb2F0aW5nIHBvaW50IG1hdGggZXJyb3JzIChpc3N1ZSAjMTg2NylcbiAgICAgICAgICAgIGRheXMgPSB0aGlzLl9kYXlzICsgTWF0aC5yb3VuZChtb250aHNUb0RheXModGhpcy5fbW9udGhzKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnd2VlaycgICA6IHJldHVybiBkYXlzIC8gNyAgICAgKyBtaWxsaXNlY29uZHMgLyA2MDQ4ZTU7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF5JyAgICA6IHJldHVybiBkYXlzICAgICAgICAgKyBtaWxsaXNlY29uZHMgLyA4NjRlNTtcbiAgICAgICAgICAgICAgICBjYXNlICdob3VyJyAgIDogcmV0dXJuIGRheXMgKiAyNCAgICArIG1pbGxpc2Vjb25kcyAvIDM2ZTU7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWludXRlJyA6IHJldHVybiBkYXlzICogMTQ0MCAgKyBtaWxsaXNlY29uZHMgLyA2ZTQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2Vjb25kJyA6IHJldHVybiBkYXlzICogODY0MDAgKyBtaWxsaXNlY29uZHMgLyAxMDAwO1xuICAgICAgICAgICAgICAgIC8vIE1hdGguZmxvb3IgcHJldmVudHMgZmxvYXRpbmcgcG9pbnQgbWF0aCBlcnJvcnMgaGVyZVxuICAgICAgICAgICAgICAgIGNhc2UgJ21pbGxpc2Vjb25kJzogcmV0dXJuIE1hdGguZmxvb3IoZGF5cyAqIDg2NGU1KSArIG1pbGxpc2Vjb25kcztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gdW5pdCAnICsgdW5pdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETzogVXNlIHRoaXMuYXMoJ21zJyk/XG4gICAgZnVuY3Rpb24gZHVyYXRpb25fYXNfX3ZhbHVlT2YgKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5fbWlsbGlzZWNvbmRzICtcbiAgICAgICAgICAgIHRoaXMuX2RheXMgKiA4NjRlNSArXG4gICAgICAgICAgICAodGhpcy5fbW9udGhzICUgMTIpICogMjU5MmU2ICtcbiAgICAgICAgICAgIHRvSW50KHRoaXMuX21vbnRocyAvIDEyKSAqIDMxNTM2ZTZcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlQXMgKGFsaWFzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcyhhbGlhcyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGFzTWlsbGlzZWNvbmRzID0gbWFrZUFzKCdtcycpO1xuICAgIHZhciBhc1NlY29uZHMgICAgICA9IG1ha2VBcygncycpO1xuICAgIHZhciBhc01pbnV0ZXMgICAgICA9IG1ha2VBcygnbScpO1xuICAgIHZhciBhc0hvdXJzICAgICAgICA9IG1ha2VBcygnaCcpO1xuICAgIHZhciBhc0RheXMgICAgICAgICA9IG1ha2VBcygnZCcpO1xuICAgIHZhciBhc1dlZWtzICAgICAgICA9IG1ha2VBcygndycpO1xuICAgIHZhciBhc01vbnRocyAgICAgICA9IG1ha2VBcygnTScpO1xuICAgIHZhciBhc1llYXJzICAgICAgICA9IG1ha2VBcygneScpO1xuXG4gICAgZnVuY3Rpb24gZHVyYXRpb25fZ2V0X19nZXQgKHVuaXRzKSB7XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgICAgICByZXR1cm4gdGhpc1t1bml0cyArICdzJ10oKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlR2V0dGVyKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRhW25hbWVdO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBtaWxsaXNlY29uZHMgPSBtYWtlR2V0dGVyKCdtaWxsaXNlY29uZHMnKTtcbiAgICB2YXIgc2Vjb25kcyAgICAgID0gbWFrZUdldHRlcignc2Vjb25kcycpO1xuICAgIHZhciBtaW51dGVzICAgICAgPSBtYWtlR2V0dGVyKCdtaW51dGVzJyk7XG4gICAgdmFyIGhvdXJzICAgICAgICA9IG1ha2VHZXR0ZXIoJ2hvdXJzJyk7XG4gICAgdmFyIGRheXMgICAgICAgICA9IG1ha2VHZXR0ZXIoJ2RheXMnKTtcbiAgICB2YXIgbW9udGhzICAgICAgID0gbWFrZUdldHRlcignbW9udGhzJyk7XG4gICAgdmFyIHllYXJzICAgICAgICA9IG1ha2VHZXR0ZXIoJ3llYXJzJyk7XG5cbiAgICBmdW5jdGlvbiB3ZWVrcyAoKSB7XG4gICAgICAgIHJldHVybiBhYnNGbG9vcih0aGlzLmRheXMoKSAvIDcpO1xuICAgIH1cblxuICAgIHZhciByb3VuZCA9IE1hdGgucm91bmQ7XG4gICAgdmFyIHRocmVzaG9sZHMgPSB7XG4gICAgICAgIHM6IDQ1LCAgLy8gc2Vjb25kcyB0byBtaW51dGVcbiAgICAgICAgbTogNDUsICAvLyBtaW51dGVzIHRvIGhvdXJcbiAgICAgICAgaDogMjIsICAvLyBob3VycyB0byBkYXlcbiAgICAgICAgZDogMjYsICAvLyBkYXlzIHRvIG1vbnRoXG4gICAgICAgIE06IDExICAgLy8gbW9udGhzIHRvIHllYXJcbiAgICB9O1xuXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uIGZvciBtb21lbnQuZm4uZnJvbSwgbW9tZW50LmZuLmZyb21Ob3csIGFuZCBtb21lbnQuZHVyYXRpb24uZm4uaHVtYW5pemVcbiAgICBmdW5jdGlvbiBzdWJzdGl0dXRlVGltZUFnbyhzdHJpbmcsIG51bWJlciwgd2l0aG91dFN1ZmZpeCwgaXNGdXR1cmUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLnJlbGF0aXZlVGltZShudW1iZXIgfHwgMSwgISF3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9odW1hbml6ZV9fcmVsYXRpdmVUaW1lIChwb3NOZWdEdXJhdGlvbiwgd2l0aG91dFN1ZmZpeCwgbG9jYWxlKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IGNyZWF0ZV9fY3JlYXRlRHVyYXRpb24ocG9zTmVnRHVyYXRpb24pLmFicygpO1xuICAgICAgICB2YXIgc2Vjb25kcyAgPSByb3VuZChkdXJhdGlvbi5hcygncycpKTtcbiAgICAgICAgdmFyIG1pbnV0ZXMgID0gcm91bmQoZHVyYXRpb24uYXMoJ20nKSk7XG4gICAgICAgIHZhciBob3VycyAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdoJykpO1xuICAgICAgICB2YXIgZGF5cyAgICAgPSByb3VuZChkdXJhdGlvbi5hcygnZCcpKTtcbiAgICAgICAgdmFyIG1vbnRocyAgID0gcm91bmQoZHVyYXRpb24uYXMoJ00nKSk7XG4gICAgICAgIHZhciB5ZWFycyAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCd5JykpO1xuXG4gICAgICAgIHZhciBhID0gc2Vjb25kcyA8IHRocmVzaG9sZHMucyAmJiBbJ3MnLCBzZWNvbmRzXSAgfHxcbiAgICAgICAgICAgICAgICBtaW51dGVzIDw9IDEgICAgICAgICAgICYmIFsnbSddICAgICAgICAgICB8fFxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPCB0aHJlc2hvbGRzLm0gJiYgWydtbScsIG1pbnV0ZXNdIHx8XG4gICAgICAgICAgICAgICAgaG91cnMgICA8PSAxICAgICAgICAgICAmJiBbJ2gnXSAgICAgICAgICAgfHxcbiAgICAgICAgICAgICAgICBob3VycyAgIDwgdGhyZXNob2xkcy5oICYmIFsnaGgnLCBob3Vyc10gICB8fFxuICAgICAgICAgICAgICAgIGRheXMgICAgPD0gMSAgICAgICAgICAgJiYgWydkJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICAgICAgZGF5cyAgICA8IHRocmVzaG9sZHMuZCAmJiBbJ2RkJywgZGF5c10gICAgfHxcbiAgICAgICAgICAgICAgICBtb250aHMgIDw9IDEgICAgICAgICAgICYmIFsnTSddICAgICAgICAgICB8fFxuICAgICAgICAgICAgICAgIG1vbnRocyAgPCB0aHJlc2hvbGRzLk0gJiYgWydNTScsIG1vbnRoc10gIHx8XG4gICAgICAgICAgICAgICAgeWVhcnMgICA8PSAxICAgICAgICAgICAmJiBbJ3knXSAgICAgICAgICAgfHwgWyd5eScsIHllYXJzXTtcblxuICAgICAgICBhWzJdID0gd2l0aG91dFN1ZmZpeDtcbiAgICAgICAgYVszXSA9ICtwb3NOZWdEdXJhdGlvbiA+IDA7XG4gICAgICAgIGFbNF0gPSBsb2NhbGU7XG4gICAgICAgIHJldHVybiBzdWJzdGl0dXRlVGltZUFnby5hcHBseShudWxsLCBhKTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB5b3UgdG8gc2V0IGEgdGhyZXNob2xkIGZvciByZWxhdGl2ZSB0aW1lIHN0cmluZ3NcbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9odW1hbml6ZV9fZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkICh0aHJlc2hvbGQsIGxpbWl0KSB7XG4gICAgICAgIGlmICh0aHJlc2hvbGRzW3RocmVzaG9sZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW1pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhyZXNob2xkc1t0aHJlc2hvbGRdO1xuICAgICAgICB9XG4gICAgICAgIHRocmVzaG9sZHNbdGhyZXNob2xkXSA9IGxpbWl0O1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBodW1hbml6ZSAod2l0aFN1ZmZpeCkge1xuICAgICAgICB2YXIgbG9jYWxlID0gdGhpcy5sb2NhbGVEYXRhKCk7XG4gICAgICAgIHZhciBvdXRwdXQgPSBkdXJhdGlvbl9odW1hbml6ZV9fcmVsYXRpdmVUaW1lKHRoaXMsICF3aXRoU3VmZml4LCBsb2NhbGUpO1xuXG4gICAgICAgIGlmICh3aXRoU3VmZml4KSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBsb2NhbGUucGFzdEZ1dHVyZSgrdGhpcywgb3V0cHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2NhbGUucG9zdGZvcm1hdChvdXRwdXQpO1xuICAgIH1cblxuICAgIHZhciBpc29fc3RyaW5nX19hYnMgPSBNYXRoLmFicztcblxuICAgIGZ1bmN0aW9uIGlzb19zdHJpbmdfX3RvSVNPU3RyaW5nKCkge1xuICAgICAgICAvLyBmb3IgSVNPIHN0cmluZ3Mgd2UgZG8gbm90IHVzZSB0aGUgbm9ybWFsIGJ1YmJsaW5nIHJ1bGVzOlxuICAgICAgICAvLyAgKiBtaWxsaXNlY29uZHMgYnViYmxlIHVwIHVudGlsIHRoZXkgYmVjb21lIGhvdXJzXG4gICAgICAgIC8vICAqIGRheXMgZG8gbm90IGJ1YmJsZSBhdCBhbGxcbiAgICAgICAgLy8gICogbW9udGhzIGJ1YmJsZSB1cCB1bnRpbCB0aGV5IGJlY29tZSB5ZWFyc1xuICAgICAgICAvLyBUaGlzIGlzIGJlY2F1c2UgdGhlcmUgaXMgbm8gY29udGV4dC1mcmVlIGNvbnZlcnNpb24gYmV0d2VlbiBob3VycyBhbmQgZGF5c1xuICAgICAgICAvLyAodGhpbmsgb2YgY2xvY2sgY2hhbmdlcylcbiAgICAgICAgLy8gYW5kIGFsc28gbm90IGJldHdlZW4gZGF5cyBhbmQgbW9udGhzICgyOC0zMSBkYXlzIHBlciBtb250aClcbiAgICAgICAgdmFyIHNlY29uZHMgPSBpc29fc3RyaW5nX19hYnModGhpcy5fbWlsbGlzZWNvbmRzKSAvIDEwMDA7XG4gICAgICAgIHZhciBkYXlzICAgICAgICAgPSBpc29fc3RyaW5nX19hYnModGhpcy5fZGF5cyk7XG4gICAgICAgIHZhciBtb250aHMgICAgICAgPSBpc29fc3RyaW5nX19hYnModGhpcy5fbW9udGhzKTtcbiAgICAgICAgdmFyIG1pbnV0ZXMsIGhvdXJzLCB5ZWFycztcblxuICAgICAgICAvLyAzNjAwIHNlY29uZHMgLT4gNjAgbWludXRlcyAtPiAxIGhvdXJcbiAgICAgICAgbWludXRlcyAgICAgICAgICAgPSBhYnNGbG9vcihzZWNvbmRzIC8gNjApO1xuICAgICAgICBob3VycyAgICAgICAgICAgICA9IGFic0Zsb29yKG1pbnV0ZXMgLyA2MCk7XG4gICAgICAgIHNlY29uZHMgJT0gNjA7XG4gICAgICAgIG1pbnV0ZXMgJT0gNjA7XG5cbiAgICAgICAgLy8gMTIgbW9udGhzIC0+IDEgeWVhclxuICAgICAgICB5ZWFycyAgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gICAgICAgIG1vbnRocyAlPSAxMjtcblxuXG4gICAgICAgIC8vIGluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9kb3JkaWxsZS9tb21lbnQtaXNvZHVyYXRpb24vYmxvYi9tYXN0ZXIvbW9tZW50Lmlzb2R1cmF0aW9uLmpzXG4gICAgICAgIHZhciBZID0geWVhcnM7XG4gICAgICAgIHZhciBNID0gbW9udGhzO1xuICAgICAgICB2YXIgRCA9IGRheXM7XG4gICAgICAgIHZhciBoID0gaG91cnM7XG4gICAgICAgIHZhciBtID0gbWludXRlcztcbiAgICAgICAgdmFyIHMgPSBzZWNvbmRzO1xuICAgICAgICB2YXIgdG90YWwgPSB0aGlzLmFzU2Vjb25kcygpO1xuXG4gICAgICAgIGlmICghdG90YWwpIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIHNhbWUgYXMgQyMncyAoTm9kYSkgYW5kIHB5dGhvbiAoaXNvZGF0ZSkuLi5cbiAgICAgICAgICAgIC8vIGJ1dCBub3Qgb3RoZXIgSlMgKGdvb2cuZGF0ZSlcbiAgICAgICAgICAgIHJldHVybiAnUDBEJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAodG90YWwgPCAwID8gJy0nIDogJycpICtcbiAgICAgICAgICAgICdQJyArXG4gICAgICAgICAgICAoWSA/IFkgKyAnWScgOiAnJykgK1xuICAgICAgICAgICAgKE0gPyBNICsgJ00nIDogJycpICtcbiAgICAgICAgICAgIChEID8gRCArICdEJyA6ICcnKSArXG4gICAgICAgICAgICAoKGggfHwgbSB8fCBzKSA/ICdUJyA6ICcnKSArXG4gICAgICAgICAgICAoaCA/IGggKyAnSCcgOiAnJykgK1xuICAgICAgICAgICAgKG0gPyBtICsgJ00nIDogJycpICtcbiAgICAgICAgICAgIChzID8gcyArICdTJyA6ICcnKTtcbiAgICB9XG5cbiAgICB2YXIgZHVyYXRpb25fcHJvdG90eXBlX19wcm90byA9IER1cmF0aW9uLnByb3RvdHlwZTtcblxuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYWJzICAgICAgICAgICAgPSBkdXJhdGlvbl9hYnNfX2FicztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFkZCAgICAgICAgICAgID0gZHVyYXRpb25fYWRkX3N1YnRyYWN0X19hZGQ7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5zdWJ0cmFjdCAgICAgICA9IGR1cmF0aW9uX2FkZF9zdWJ0cmFjdF9fc3VidHJhY3Q7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hcyAgICAgICAgICAgICA9IGFzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYXNNaWxsaXNlY29uZHMgPSBhc01pbGxpc2Vjb25kcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzU2Vjb25kcyAgICAgID0gYXNTZWNvbmRzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYXNNaW51dGVzICAgICAgPSBhc01pbnV0ZXM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hc0hvdXJzICAgICAgICA9IGFzSG91cnM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hc0RheXMgICAgICAgICA9IGFzRGF5cztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzV2Vla3MgICAgICAgID0gYXNXZWVrcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzTW9udGhzICAgICAgID0gYXNNb250aHM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hc1llYXJzICAgICAgICA9IGFzWWVhcnM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by52YWx1ZU9mICAgICAgICA9IGR1cmF0aW9uX2FzX192YWx1ZU9mO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uX2J1YmJsZSAgICAgICAgPSBidWJibGU7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5nZXQgICAgICAgICAgICA9IGR1cmF0aW9uX2dldF9fZ2V0O1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ubWlsbGlzZWNvbmRzICAgPSBtaWxsaXNlY29uZHM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5zZWNvbmRzICAgICAgICA9IHNlY29uZHM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5taW51dGVzICAgICAgICA9IG1pbnV0ZXM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5ob3VycyAgICAgICAgICA9IGhvdXJzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uZGF5cyAgICAgICAgICAgPSBkYXlzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ud2Vla3MgICAgICAgICAgPSB3ZWVrcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLm1vbnRocyAgICAgICAgID0gbW9udGhzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ueWVhcnMgICAgICAgICAgPSB5ZWFycztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmh1bWFuaXplICAgICAgID0gaHVtYW5pemU7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by50b0lTT1N0cmluZyAgICA9IGlzb19zdHJpbmdfX3RvSVNPU3RyaW5nO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8udG9TdHJpbmcgICAgICAgPSBpc29fc3RyaW5nX190b0lTT1N0cmluZztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLnRvSlNPTiAgICAgICAgID0gaXNvX3N0cmluZ19fdG9JU09TdHJpbmc7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5sb2NhbGUgICAgICAgICA9IGxvY2FsZTtcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmxvY2FsZURhdGEgICAgID0gbG9jYWxlRGF0YTtcblxuICAgIC8vIERlcHJlY2F0aW9uc1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8udG9Jc29TdHJpbmcgPSBkZXByZWNhdGUoJ3RvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpJywgaXNvX3N0cmluZ19fdG9JU09TdHJpbmcpO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ubGFuZyA9IGxhbmc7XG5cbiAgICAvLyBTaWRlIGVmZmVjdCBpbXBvcnRzXG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignWCcsIDAsIDAsICd1bml4Jyk7XG4gICAgYWRkRm9ybWF0VG9rZW4oJ3gnLCAwLCAwLCAndmFsdWVPZicpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbigneCcsIG1hdGNoU2lnbmVkKTtcbiAgICBhZGRSZWdleFRva2VuKCdYJywgbWF0Y2hUaW1lc3RhbXApO1xuICAgIGFkZFBhcnNlVG9rZW4oJ1gnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgY29uZmlnLl9kID0gbmV3IERhdGUocGFyc2VGbG9hdChpbnB1dCwgMTApICogMTAwMCk7XG4gICAgfSk7XG4gICAgYWRkUGFyc2VUb2tlbigneCcsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSh0b0ludChpbnB1dCkpO1xuICAgIH0pO1xuXG4gICAgLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuXG5cbiAgICB1dGlsc19ob29rc19faG9va3MudmVyc2lvbiA9ICcyLjExLjAnO1xuXG4gICAgc2V0SG9va0NhbGxiYWNrKGxvY2FsX19jcmVhdGVMb2NhbCk7XG5cbiAgICB1dGlsc19ob29rc19faG9va3MuZm4gICAgICAgICAgICAgICAgICAgID0gbW9tZW50UHJvdG90eXBlO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5taW4gICAgICAgICAgICAgICAgICAgPSBtaW47XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLm1heCAgICAgICAgICAgICAgICAgICA9IG1heDtcbiAgICB1dGlsc19ob29rc19faG9va3Mubm93ICAgICAgICAgICAgICAgICAgID0gbm93O1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy51dGMgICAgICAgICAgICAgICAgICAgPSBjcmVhdGVfdXRjX19jcmVhdGVVVEM7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnVuaXggICAgICAgICAgICAgICAgICA9IG1vbWVudF9fY3JlYXRlVW5peDtcbiAgICB1dGlsc19ob29rc19faG9va3MubW9udGhzICAgICAgICAgICAgICAgID0gbGlzdHNfX2xpc3RNb250aHM7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmlzRGF0ZSAgICAgICAgICAgICAgICA9IGlzRGF0ZTtcbiAgICB1dGlsc19ob29rc19faG9va3MubG9jYWxlICAgICAgICAgICAgICAgID0gbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZTtcbiAgICB1dGlsc19ob29rc19faG9va3MuaW52YWxpZCAgICAgICAgICAgICAgID0gdmFsaWRfX2NyZWF0ZUludmFsaWQ7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmR1cmF0aW9uICAgICAgICAgICAgICA9IGNyZWF0ZV9fY3JlYXRlRHVyYXRpb247XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmlzTW9tZW50ICAgICAgICAgICAgICA9IGlzTW9tZW50O1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy53ZWVrZGF5cyAgICAgICAgICAgICAgPSBsaXN0c19fbGlzdFdlZWtkYXlzO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5wYXJzZVpvbmUgICAgICAgICAgICAgPSBtb21lbnRfX2NyZWF0ZUluWm9uZTtcbiAgICB1dGlsc19ob29rc19faG9va3MubG9jYWxlRGF0YSAgICAgICAgICAgID0gbG9jYWxlX2xvY2FsZXNfX2dldExvY2FsZTtcbiAgICB1dGlsc19ob29rc19faG9va3MuaXNEdXJhdGlvbiAgICAgICAgICAgID0gaXNEdXJhdGlvbjtcbiAgICB1dGlsc19ob29rc19faG9va3MubW9udGhzU2hvcnQgICAgICAgICAgID0gbGlzdHNfX2xpc3RNb250aHNTaG9ydDtcbiAgICB1dGlsc19ob29rc19faG9va3Mud2Vla2RheXNNaW4gICAgICAgICAgID0gbGlzdHNfX2xpc3RXZWVrZGF5c01pbjtcbiAgICB1dGlsc19ob29rc19faG9va3MuZGVmaW5lTG9jYWxlICAgICAgICAgID0gZGVmaW5lTG9jYWxlO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy53ZWVrZGF5c1Nob3J0ICAgICAgICAgPSBsaXN0c19fbGlzdFdlZWtkYXlzU2hvcnQ7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLm5vcm1hbGl6ZVVuaXRzICAgICAgICA9IG5vcm1hbGl6ZVVuaXRzO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQgPSBkdXJhdGlvbl9odW1hbml6ZV9fZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5wcm90b3R5cGUgICAgICAgICAgICAgPSBtb21lbnRQcm90b3R5cGU7XG5cbiAgICB2YXIgX21vbWVudCA9IHV0aWxzX2hvb2tzX19ob29rcztcblxuICAgIHJldHVybiBfbW9tZW50O1xuXG59KSk7IiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbid1c2Ugc3RyaWN0JztcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHR2YXIgZnJvbTtcblx0dmFyIHRvID0gdG9PYmplY3QodGFyZ2V0KTtcblx0dmFyIHN5bWJvbHM7XG5cblx0Zm9yICh2YXIgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRmcm9tID0gT2JqZWN0KGFyZ3VtZW50c1tzXSk7XG5cblx0XHRmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuXHRcdFx0aWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuXHRcdFx0XHR0b1trZXldID0gZnJvbVtrZXldO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7XG5cdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQoaSl7aWYoZVtpXSlyZXR1cm4gZVtpXS5leHBvcnRzO3ZhciByPWVbaV09e2V4cG9ydHM6e30saWQ6aSxsb2FkZWQ6ITF9O3JldHVybiBuW2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLHQpLHIubG9hZGVkPSEwLHIuZXhwb3J0c312YXIgZT17fTtyZXR1cm4gdC5tPW4sdC5jPWUsdC5wPVwiXCIsdCgwKX0oW2Z1bmN0aW9uKG4sdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShuKXtyZXR1cm4gYS5qcytuWzBdLnRvVXBwZXJDYXNlKCkrbi5zdWJzdHIoMSl9ZnVuY3Rpb24gaShuKXtyZXR1cm4gT2JqZWN0LmtleXMobikucmVkdWNlKGZ1bmN0aW9uKHQsaSl7cmV0dXJuLTEhPT1zLmluZGV4T2YoaSk/dFtlKGkpXT1uW2ldOnRbaV09bltpXSx0fSx7fSl9ZnVuY3Rpb24gcihuKXt2YXIgdD1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7cmV0dXJuLTEhPT10LmluZGV4T2YoXCJzYWZhcmlcIikmJi0xPT09dC5pbmRleE9mKFwiY2hyb21lXCIpPyFmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKG4sdCxlKXtuW2VdPW5bdF0sZGVsZXRlIG5bdF19O1wiZmxleFwiPT09bi5kaXNwbGF5JiYobi5kaXNwbGF5PVwiLXdlYmtpdC1mbGV4XCIpLFtcImFsaWduSXRlbXNcIixcImp1c3RpZnlDb250ZW50XCIsXCJmbGV4RGlyZWN0aW9uXCIsXCJmbGV4XCIsXCJmbGV4V3JhcFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGkpe3QobixpLGUoaSkpfSl9KCk6LTEhPT1uYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRSAxMFwiKSYmXCJmbGV4XCI9PT1uLmRpc3BsYXkmJihuLmRpc3BsYXk9XCItbXMtZmxleGJveFwiKSxufWZ1bmN0aW9uIG8obil7cmV0dXJuIE9iamVjdC5rZXlzKG4pLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0W2VdPXIoaShuW2VdKSksdH0se30pfXZhciBhPWZ1bmN0aW9uKCl7dmFyIG49d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiXCIpLHQ9KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pLmpvaW4oXCJcIikubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLyl8fFwiXCI9PT1uLk9MaW5rJiZbXCJcIixcIm9cIl0pWzFdO3JldHVybntkb206XCJtc1wiPT09dD9cIk1TXCI6dCxsb3dlcmNhc2U6dCxjc3M6XCItXCIrdCtcIi1cIixqczpcIm1zXCI9PT10P3Q6dFswXS50b1VwcGVyQ2FzZSgpK3Quc3Vic3RyKDEpfX0oKSxzPVtcImFuaW1hdGlvblwiLFwiYW5pbWF0aW9uRGVsYXlcIixcImFuaW1hdGlvbkRpcmVjdGlvblwiLFwiYW5pbWF0aW9uRHVyYXRpb25cIixcImFuaW1hdGlvbkZpbGxNb2RlXCIsXCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiLFwiYW5pbWF0aW9uTmFtZVwiLFwiYW5pbWF0aW9uUGxheVN0YXRlXCIsXCJhbmltYXRpb25UaW1pbmdGdW5jdGlvblwiLFwiYXBwZWFyYW5jZVwiLFwiYmFja2ZhY2VWaXNpYmlsaXR5XCIsXCJiYWNrZ3JvdW5kQ2xpcFwiLFwiYm9yZGVySW1hZ2VcIixcImJvcmRlckltYWdlU2xpY2VcIixcImJveFNpemluZ1wiLFwiYm94U2hhZG93XCIsXCJjb250ZW50Q29sdW1uc1wiLFwidHJhbnNmb3JtXCIsXCJ0cmFuc2Zvcm1PcmlnaW5cIixcInRyYW5zZm9ybVN0eWxlXCIsXCJ0cmFuc2l0aW9uXCIsXCJ0cmFuc2l0aW9uRGVsYXlcIixcInRyYW5zaXRpb25EdXJhdGlvblwiLFwidHJhbnNpdGlvblByb3BlcnR5XCIsXCJ0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb25cIixcInBlcnNwZWN0aXZlXCIsXCJwZXJzcGVjdGl2ZU9yaWdpblwiLFwidXNlclNlbGVjdFwiXTt0LnByZWZpeD1vfV0pOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5jb25zdCB0b29sT3ZlcmxheVN0eWxlOlJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgYmFja2dyb3VuZDogXCIjMDAwXCIsXG4gICAgb3BhY2l0eTogLjIsXG4gICAgekluZGV4OiAzLFxuICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgYmFja2dyb3VuZENsaXA6IFwicGFkZGluZ1wiLFxuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgdmlzaWJpbGl0eTogXCJoaWRkZW5cIixcbiAgICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIlxufTtcblxuaW50ZXJmYWNlIElUb29sT3ZlcmxheVByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8VG9vbE92ZXJsYXk+IHtcblxufVxuXG5pbnRlcmZhY2UgSVRvb2xPdmVybGF5U3RhdGUge1xuICAgIHN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzO1xufVxuY2xhc3MgVG9vbE92ZXJsYXkgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVRvb2xPdmVybGF5UHJvcHMsIElUb29sT3ZlcmxheVN0YXRlPiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJVG9vbE92ZXJsYXlQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzdHlsZTogdG9vbE92ZXJsYXlTdHlsZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgc3R5bGU9e3RoaXMuc3RhdGUuc3R5bGV9Lz47XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb29sT3ZlcmxheTsiLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3JlYWN0L3JlYWN0LWRvbS5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3JlYWN0LXZlbmRvci1wcmVmaXgvcmVhY3QtdmVuZG9yLXByZWZpeC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy9yZWFjdC1ib290c3RyYXAvcmVhY3QtYm9vdHN0cmFwLmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgdWkgZnJvbSBcIi4vcmVhY3QtdWkvdWlcIjtcbmltcG9ydCAqIGFzIFZlbmRvclByZWZpeCBmcm9tIFwicmVhY3QtdmVuZG9yLXByZWZpeFwiO1xuaW1wb3J0IFN0YW5kYXJkTGliIGZyb20gXCIuL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5pbXBvcnQge0dseXBoaWNvbn0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuL3Rvb2xzL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0NTU1Byb3BlcnRpZXN9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wc30gZnJvbSBcIi4vdG9vbHMvQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7SUFic3RyYWN0V2VhdmVUb29sU3RhdGV9IGZyb20gXCIuL3Rvb2xzL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5cbmNvbnN0IHRvb2xSZWdpc3RyeTp7W25hbWU6c3RyaW5nXTogQWJzdHJhY3RXZWF2ZVRvb2x9ID0ge307XG5cbmNvbnN0IGdyYWJiZXJTdHlsZTpDU1NQcm9wZXJ0aWVzID0ge1xuICAgIHdpZHRoOiBcIjE2XCIsXG4gICAgaGVpZ2h0OiBcIjE2XCIsXG4gICAgY3Vyc29yOiBcIm1vdmVcIixcbiAgICBiYWNrZ3JvdW5kOiBcInVybChodHRwOi8vcGxhY2Vob2xkLml0LzMyeDMyKVwiXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oYXNDbGFzc05hbWU6c3RyaW5nLCBqc0NsYXNzOmFueSkge1xuICAgIHRvb2xSZWdpc3RyeVthc0NsYXNzTmFtZV0gPSBqc0NsYXNzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbEltcGxlbWVudGF0aW9uKGFzQ2xhc3NOYW1lOnN0cmluZyk6YW55IHtcbiAgICByZXR1cm4gdG9vbFJlZ2lzdHJ5W2FzQ2xhc3NOYW1lXTtcbn1cblxuaW50ZXJmYWNlIElXZWF2ZVRvb2xQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPFdlYXZlVG9vbD4ge1xuICAgIHRvb2xQYXRoOldlYXZlUGF0aDtcbiAgICB0b29sUHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHM7XG4gICAgdG9vbENsYXNzOnN0cmluZztcbiAgICBzdHlsZTpDU1NQcm9wZXJ0aWVzO1xuICAgIG9uRHJhZ1N0YXJ0OlJlYWN0Lk1vdXNlRXZlbnQ7XG4gICAgb25EcmFnRW5kOlJlYWN0Lk1vdXNlRXZlbnQ7XG4gICAgb25EcmFnT3ZlcjpSZWFjdC5Nb3VzZUV2ZW50O1xufVxuXG5pbnRlcmZhY2UgSVdlYXZlVG9vbFN0YXRlIHtcbiAgICBzaG93Q29udHJvbHM6Ym9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFdlYXZlVG9vbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJV2VhdmVUb29sUHJvcHMsIElXZWF2ZVRvb2xTdGF0ZT4ge1xuXG4gICAgcHJpdmF0ZSB0b29sUGF0aDpXZWF2ZVBhdGg7XG4gICAgcHJpdmF0ZSB0b29sUHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHM7XG4gICAgcHJpdmF0ZSBUb29sQ2xhc3M6YW55O1xuICAgIHByaXZhdGUgZWxlbWVudDpFbGVtZW50O1xuICAgIHByaXZhdGUgdG9vbDphbnk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJV2VhdmVUb29sUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnRvb2xQYXRoID0gdGhpcy5wcm9wcy50b29sUGF0aDtcbiAgICAgICAgdGhpcy50b29sUHJvcHMgPSB0aGlzLnByb3BzLnRvb2xQcm9wcztcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvd0NvbnRyb2xzOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0b29sVHlwZTpzdHJpbmcgPSB0aGlzLnRvb2xQYXRoID8gdGhpcy50b29sUGF0aC5nZXRUeXBlKCkgOiB0aGlzLnByb3BzLnRvb2xDbGFzcztcbiAgICAgICAgaWYodG9vbFR5cGUgPT09IFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6RXh0ZXJuYWxUb29sXCIgJiYgdGhpcy50b29sUGF0aC5nZXRUeXBlKFwidG9vbENsYXNzXCIpKSB7XG4gICAgICAgICAgICB0b29sVHlwZSA9IHRoaXMudG9vbFBhdGguZ2V0U3RhdGUoXCJ0b29sQ2xhc3NcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYodG9vbFR5cGUgPT09IFwid2VhdmVqcy5jb3JlLkxpbmthYmxlSGFzaE1hcFwiICYmIHRoaXMudG9vbFBhdGguZ2V0VHlwZShcImNsYXNzXCIpKVxuICAgICAgICAgICAgdG9vbFR5cGUgPSB0aGlzLnRvb2xQYXRoLmdldFN0YXRlKFwiY2xhc3NcIik7XG4gICAgICAgIHRoaXMuVG9vbENsYXNzID0gZ2V0VG9vbEltcGxlbWVudGF0aW9uKHRvb2xUeXBlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpOnZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbXCJ0b29sRGl2XCJdKTtcbiAgICAgICAgaWYoUmVhY3QuQ29tcG9uZW50LmlzUHJvdG90eXBlT2YodGhpcy5Ub29sQ2xhc3MpKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2wgPSB0aGlzLnJlZnNbXCJ0b29sXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b29sID0gbmV3IHRoaXMuVG9vbENsYXNzKF8ubWVyZ2Uoe2VsZW1lbnQ6IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1tcInRvb2xEaXZcIl0pLCB0b29sUGF0aDogdGhpcy50b29sUGF0aH0sIHRoaXMudG9vbFByb3BzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy50b29sUGF0aCkge1xuICAgICAgICAgICAgdGhpcy50b29sUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6dm9pZCB7XG4gICAgICAgIGlmKHRoaXMudG9vbC5kZXN0cm95KSB7XG4gICAgICAgICAgICB0aGlzLnRvb2wuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHRpdGxlKCk6c3RyaW5nIHtcbiAgICAgICAgaWYodGhpcy50b29sUGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbFBhdGguZ2V0VmFsdWUoXCJ0aGlzLmhhc093blByb3BlcnR5KCd0aXRsZScpID8gdGhpcy50aXRsZSA6ICcnXCIpXG4gICAgICAgICAgICAgICAgfHwgKHRoaXMudG9vbFBhdGguZ2V0VHlwZSgndGl0bGUnKSA/IHRoaXMudG9vbFBhdGguZ2V0U3RhdGUoJ3RpdGxlJykgOiAnJylcbiAgICAgICAgICAgICAgICB8fCB0aGlzLnRvb2xQYXRoLmdldFBhdGgoKS5wb3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvb2wgPyB0aGlzLnRvb2wudGl0bGUgOiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBpZih0aGlzLnRvb2wgJiYgdGhpcy50b29sLnJlc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy50b29sLnJlc2l6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgd2luZG93QmFyOkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1LFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLnN0YXRlLnNob3dDb250cm9scyA/IFwiI2Y4ZjhmOFwiOiBcIlwiXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRpdGxlU3R5bGU6Q1NTUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIGN1cnNvcjogXCJtb3ZlXCIsXG4gICAgICAgICAgICBoZWlnaHQ6IDI1LFxuICAgICAgICAgICAgdGV4dEFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICAgICAgZmxleDogMSxcbiAgICAgICAgICAgIHRleHRPdmVyZmxvdzogXCJlbGxpcHNpc1wiXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRyYW5zaXRpb25zOkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICB2aXNpYmlsaXR5OiB0aGlzLnN0YXRlLnNob3dDb250cm9scyA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIG9wYWNpdHk6IHRoaXMuc3RhdGUuc2hvd0NvbnRyb2xzID8gMC43IDogMCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IHRoaXMuc3RhdGUuc2hvd0NvbnRyb2xzID8gXCJ2aXNpYmlsaXkgMHMgMC4xcywgb3BhY2l0eSAwLjFzIGxpbmVhclwiIDogXCJ2aXNpYmlsaXR5IDBzIDAuMXMsIG9wYWNpdHkgMC4xcyBsaW5lYXJcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBsZWZ0Q29udHJvbHM6Q1NTUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6IDUsXG4gICAgICAgICAgICBtYXJnaW5Ub3A6IDIsXG4gICAgICAgICAgICB3aWR0aDogMjBcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmlnaHRDb250cm9sczpDU1NQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgbWFyZ2luVG9wOiAyLFxuICAgICAgICAgICAgd2lkdGg6IDM4XG4gICAgICAgIH07XG5cbiAgICAgICAgU3RhbmRhcmRMaWIubWVyZ2UobGVmdENvbnRyb2xzLCB0cmFuc2l0aW9ucyk7XG4gICAgICAgIFN0YW5kYXJkTGliLm1lcmdlKHJpZ2h0Q29udHJvbHMsIHRyYW5zaXRpb25zKTtcblxuICAgICAgICB2YXIgdG9vbEhlaWdodDpudW1iZXIgPSB0aGlzLnByb3BzLnN0eWxlID8gdGhpcy5wcm9wcy5zdHlsZS5oZWlnaHQgLSAyNSA6IDMyMDtcbiAgICAgICAgdmFyIHRvb2xXaWR0aDpudW1iZXIgPSB0aGlzLnByb3BzLnN0eWxlID8gdGhpcy5wcm9wcy5zdHlsZS53aWR0aCA6IDMyMDtcblxuICAgICAgICB2YXIgcmVhY3RUb29sOmFueTtcbiAgICAgICAgaWYgKFJlYWN0LkNvbXBvbmVudC5pc1Byb3RvdHlwZU9mKHRoaXMuVG9vbENsYXNzKSkge1xuICAgICAgICAgICAgcmVhY3RUb29sID0gUmVhY3QuY3JlYXRlRWxlbWVudCh0aGlzLlRvb2xDbGFzcywgXy5tZXJnZSh7a2V5OiBcInRvb2xcIiwgcmVmOiBcInRvb2xcIiwgdG9vbFBhdGg6IHRoaXMudG9vbFBhdGgsIHN0eWxlOiB7IGhlaWdodDogdG9vbEhlaWdodCwgd2lkdGg6IHRvb2xXaWR0aCB9fSwgdGhpcy50b29sUHJvcHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dWkuVkJveCBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX0gb25Nb3VzZUVudGVyPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udHJvbHM6IHRydWUgfSk7IH19IG9uTW91c2VMZWF2ZT17KCkgPT4geyB0aGlzLnNldFN0YXRlKHsgc2hvd0NvbnRyb2xzOiBmYWxzZSB9KTsgfX0gb25EcmFnT3Zlcj17dGhpcy5wcm9wcy5vbkRyYWdPdmVyfSBvbkRyYWdFbmQ9e3RoaXMucHJvcHMub25EcmFnRW5kfT5cbiAgICAgICAgICAgICAgICA8dWkuSEJveCByZWY9XCJoZWFkZXJcIiBzdHlsZT17d2luZG93QmFyfSBkcmFnZ2FibGU9e3RydWV9IG9uRHJhZ1N0YXJ0PXt0aGlzLnByb3BzLm9uRHJhZ1N0YXJ0fT5cbiAgICAgICAgICAgICAgICAgICAgey8qPHVpLkhCb3ggc3R5bGU9e1ZlbmRvclByZWZpeC5wcmVmaXgoe3N0eWxlczogbGVmdENvbnRyb2xzfSkuc3R5bGVzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxHbHlwaGljb24gZ2x5cGg9XCJjb2dcIi8+XG4gICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD4qL31cbiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3RpdGxlU3R5bGV9Pnt0aGlzLnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgey8qPHVpLkhCb3ggc3R5bGU9e1ZlbmRvclByZWZpeC5wcmVmaXgoe3N0eWxlczogcmlnaHRDb250cm9sc30pLnN0eWxlc30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDV9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8R2x5cGhpY29uIGdseXBoPVwidW5jaGVja2VkXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luUmlnaHQ6IDV9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8R2x5cGhpY29uIGdseXBoPVwicmVtb3ZlXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD4qL31cbiAgICAgICAgICAgICAgICA8L3VpLkhCb3g+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZWFjdFRvb2wgP1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RUb29sXG4gICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPVwidG9vbERpdlwiIHN0eWxlPXt7d2lkdGg6IHRvb2xXaWR0aCwgaGVpZ2h0OiB0b29sSGVpZ2h0fX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvdWkuVkJveD4pO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QtZG9tLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC12ZW5kb3ItcHJlZml4L3JlYWN0LXZlbmRvci1wcmVmaXguZC50c1wiLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCAqIGFzIFZlbmRvclByZWZpeCBmcm9tIFwicmVhY3QtdmVuZG9yLXByZWZpeFwiO1xuaW1wb3J0IFN0YW5kYXJkTGliIGZyb20gXCIuLi91dGlscy9TdGFuZGFyZExpYlwiO1xuaW1wb3J0IFJlc2l6ZXIgZnJvbSBcIi4vUmVzaXplclwiO1xuaW1wb3J0IFJlc2l6ZXJPdmVybGF5IGZyb20gXCIuL1Jlc2l6ZXJPdmVybGF5XCI7XG5cbmNvbnN0IFJFU0laRVJPVkVSTEFZOnN0cmluZyA9IFwicmVzaXplclwiO1xuY29uc3QgSE9SSVpPTlRBTDpzdHJpbmcgPSBcImhvcml6b250YWxcIjtcblxuZXhwb3J0IGludGVyZmFjZSBMYXlvdXRTdGF0ZSB7XG4gICAgaWQ/OiBzdHJpbmdbXTtcbiAgICBjaGlsZHJlbj86IExheW91dFN0YXRlW107XG4gICAgZGlyZWN0aW9uPzogc3RyaW5nO1xuICAgIGZsZXg/OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMYXlvdXRQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPExheW91dD4ge1xuICAgIHN0YXRlOiBMYXlvdXRTdGF0ZTtcbiAgICBvblN0YXRlQ2hhbmdlOiBGdW5jdGlvbjtcbiAgICBwYW5lMT86IHN0cmluZztcbiAgICBwYW5lMj86c3RyaW5nO1xuICAgIGtleTogbnVtYmVyO1xuICAgIHJlZjogc3RyaW5nO1xuICAgIHdlYXZlPzogYW55XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExheW91dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxMYXlvdXRQcm9wcywgTGF5b3V0U3RhdGU+IHtcblxuICAgIHB1YmxpYyBzdGF0ZTpMYXlvdXRTdGF0ZTtcblxuICAgIHByaXZhdGUgbWluU2l6ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgZHJhZ2dpbmc6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIGJvdW5kTW91c2VVcDogYW55O1xuICAgIHByaXZhdGUgYm91bmRNb3VzZURvd246IGFueTtcbiAgICBwcml2YXRlIGJvdW5kTW91c2VNb3ZlOiBhbnk7XG5cbiAgICBwcml2YXRlIHBhbmVsRHJhZ2dpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudDtcblxuICAgIHByaXZhdGUgY2hpbGROYW1lczpzdHJpbmdbXTtcbiAgICBwcml2YXRlIHJlc2l6ZXJOYW1lczpzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBMYXlvdXRQcm9wcywgc3RhdGU6IExheW91dFN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XG4gICAgICAgIHZhciBwcyA9IHByb3BzLnN0YXRlIHx8IHt9O1xuICAgICAgICB0aGlzLnN0YXRlID0ge2lkOiBwcy5pZCwgZGlyZWN0aW9uOiBwcy5kaXJlY3Rpb24sIGNoaWxkcmVuOiBwcy5jaGlsZHJlbiwgZmxleDogcHMuZmxleH07XG4gICAgICAgIHRoaXMubWluU2l6ZSA9IDE2O1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKTogdm9pZCB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLmJvdW5kTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmJvdW5kTW91c2VEb3duID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5ib3VuZE1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IExheW91dFByb3BzKTogdm9pZCB7XG4gICAgICB0aGlzLnNldFN0YXRlKFN0YW5kYXJkTGliLmluY2x1ZGVNaXNzaW5nUHJvcGVydHlQbGFjZWhvbGRlcnModGhpcy5zdGF0ZSwgbmV4dFByb3BzLnN0YXRlKSk7XG4gICAgfVxuXG4gICAgY29tcG9lbmVudFdpbGxVbm1vdW50KCk6IHZvaWQge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmJvdW5kTW91c2VEb3duKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuYm91bmRNb3VzZVVwKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZU1vdmVcIiwgdGhpcy5ib3VuZE1vdXNlTW92ZSk7XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczpMYXlvdXRQcm9wcywgbmV4dFN0YXRlOkxheW91dFN0YXRlKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gIV8uaXNFcXVhbCh0aGlzLnN0YXRlLCBuZXh0U3RhdGUpIHx8ICFfLmlzRXF1YWwodGhpcy5zdGF0ZSwgbmV4dFByb3BzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKTp2b2lkIHtcbiAgICAgIGlmKHRoaXMucHJvcHMub25TdGF0ZUNoYW5nZSAmJiB0aGlzLnN0YXRlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TdGF0ZUNoYW5nZSh0aGlzLnN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RE9NTm9kZUZyb21JZCAoaWQ6IG51bWJlcik6IEVsZW1lbnQge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnRGcm9tSWQoaWQpO1xuICAgICAgICBpZihjb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gY29tcG9uZW50LmVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvbXBvbmVudEZyb21JZCAoaWQ6IG51bWJlcik6IExheW91dCB7XG4gICAgICBpZih0aGlzLnN0YXRlLmlkICYmIF8uaXNFcXVhbCh0aGlzLnN0YXRlLmlkLCBpZCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IodmFyIGk6bnVtYmVyID0gMDsgaSA8IHRoaXMuY2hpbGROYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjb21wb25lbnQ6IExheW91dCA9ICh0aGlzLnJlZnNbdGhpcy5jaGlsZE5hbWVzW2ldXSBhcyBMYXlvdXQpLmdldENvbXBvbmVudEZyb21JZChpZCk7XG4gICAgICAgICAgaWYoY29tcG9uZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIG9uTW91c2VEb3duIChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgICAgdGhpcy5yZXNpemVyTmFtZXMuZm9yRWFjaCgocmVzaXplck5hbWU6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgdmFyIHJlc2l6ZXI6UmVzaXplciA9IHRoaXMucmVmc1tyZXNpemVyTmFtZV0gYXMgUmVzaXplcjtcbiAgICAgICAgICBpZihyZXNpemVyICYmIHJlc2l6ZXIuc3RhdGUgJiYgcmVzaXplci5zdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHZhciBvdmVybGF5UmFuZ2U6bnVtYmVyW10gPSB0aGlzLmdldFJlc2l6ZXJSYW5nZShyZXNpemVyKTtcbiAgICAgICAgICAgIG92ZXJsYXlSYW5nZVswXSArPSB0aGlzLm1pblNpemU7XG4gICAgICAgICAgICBvdmVybGF5UmFuZ2VbMV0gLT0gdGhpcy5taW5TaXplO1xuICAgICAgICAgICAgKHRoaXMucmVmc1tSRVNJWkVST1ZFUkxBWV0gYXMgUmVzaXplck92ZXJsYXkpLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgICByYW5nZTogb3ZlcmxheVJhbmdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQ6TW91c2VFdmVudCk6dm9pZCB7XG5cbiAgICB9XG5cbiAgICBnZXRSZXNpemVyUmFuZ2UocmVzaXplcjpSZXNpemVyKTogbnVtYmVyW10ge1xuICAgICAgdmFyIGRpcmVjdGlvbjpzdHJpbmcgPSByZXNpemVyLnByb3BzLmRpcmVjdGlvbjtcbiAgICAgIHZhciBwYW5lMTpMYXlvdXQgPSB0aGlzLnJlZnNbcmVzaXplci5wcm9wcy5wYW5lMV0gYXMgTGF5b3V0O1xuICAgICAgdmFyIHBhbmUyOkxheW91dCA9IHRoaXMucmVmc1tyZXNpemVyLnByb3BzLnBhbmUyXSBhcyBMYXlvdXQ7XG5cbiAgICAgIHZhciBlbGVtZW50MTpIVE1MRWxlbWVudCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHBhbmUxKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIHZhciBlbGVtZW50MjpIVE1MRWxlbWVudCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHBhbmUyKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgdmFyIHJlY3Q6Q2xpZW50UmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHZhciBwYWdlTGVmdDpudW1iZXIgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyByZWN0LmxlZnQ7XG4gICAgICB2YXIgcGFnZVRvcDpudW1iZXIgPSB3aW5kb3cucGFnZVlPZmZzZXQgKyByZWN0LnRvcDtcblxuICAgICAgaWYoZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMKSB7XG4gICAgICAgIHJldHVybiBbZWxlbWVudDEub2Zmc2V0TGVmdCArIHBhZ2VMZWZ0LCBlbGVtZW50Mi5vZmZzZXRMZWZ0ICsgZWxlbWVudDIuY2xpZW50V2lkdGggKyBwYWdlTGVmdF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2VsZW1lbnQxLm9mZnNldFRvcCArIHBhZ2VUb3AsIGVsZW1lbnQyLm9mZnNldFRvcCArIGVsZW1lbnQyLmNsaWVudEhlaWdodCArIHBhZ2VUb3BdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VzZVVwIChldmVudDpNb3VzZUV2ZW50KSB7XG4gICAgICAgIHZhciBuZXdTdGF0ZTpMYXlvdXRTdGF0ZSA9IF8uY2xvbmVEZWVwKHRoaXMuc3RhdGUpO1xuXG4gICAgICAgIHRoaXMucmVzaXplck5hbWVzLmZvckVhY2gocmVzaXplck5hbWUgPT4ge1xuICAgICAgICAgICAgdmFyIHJlc2l6ZXI6UmVzaXplciA9IHRoaXMucmVmc1tyZXNpemVyTmFtZV0gYXMgUmVzaXplcjtcbiAgICAgICAgICAgIHZhciByZXNpemVyT3ZlcmxheTpSZXNpemVyT3ZlcmxheSA9IHRoaXMucmVmc1tSRVNJWkVST1ZFUkxBWV0gYXMgUmVzaXplck92ZXJsYXk7XG5cbiAgICAgICAgICAgIGlmIChyZXNpemVyICYmIHJlc2l6ZXIuc3RhdGUgJiYgcmVzaXplci5zdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2U6bnVtYmVyW10gPSB0aGlzLmdldFJlc2l6ZXJSYW5nZShyZXNpemVyKTtcbiAgICAgICAgICAgICAgICB2YXIgYmVnaW46bnVtYmVyID0gcmFuZ2VbMF07XG4gICAgICAgICAgICAgICAgdmFyIGVuZDpudW1iZXIgPSByYW5nZVsxXTtcbiAgICAgICAgICAgICAgICB2YXIgbW91c2VQb3M6bnVtYmVyID0gdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwgPyBldmVudC5wYWdlWCA6IGV2ZW50LnBhZ2VZO1xuICAgICAgICAgICAgICAgIHZhciBzaXplOm51bWJlciA9IHRoaXMuc3RhdGUuZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMID8gdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoIDogdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgICAgIG1vdXNlUG9zID0gTWF0aC5tYXgoYmVnaW4gKyB0aGlzLm1pblNpemUsIE1hdGgubWluKG1vdXNlUG9zLCBlbmQgLSB0aGlzLm1pblNpemUpKTtcblxuICAgICAgICAgICAgICAgIHZhciByZWYxOnN0cmluZyA9IHJlc2l6ZXIucHJvcHMucGFuZTE7XG4gICAgICAgICAgICAgICAgdmFyIHJlZjI6c3RyaW5nID0gcmVzaXplci5wcm9wcy5wYW5lMjtcblxuICAgICAgICAgICAgICAgIHZhciBwYW5lMTogTGF5b3V0ID0gdGhpcy5yZWZzW3JlZjFdIGFzIExheW91dDtcbiAgICAgICAgICAgICAgICB2YXIgcGFuZTI6IExheW91dCA9IHRoaXMucmVmc1tyZWYyXSBhcyBMYXlvdXQ7XG5cblxuICAgICAgICAgICAgICAgIHZhciBpbmRleDE6bnVtYmVyID0gdGhpcy5jaGlsZE5hbWVzLmluZGV4T2YocmVmMSk7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4MjpudW1iZXIgPSB0aGlzLmNoaWxkTmFtZXMuaW5kZXhPZihyZWYyKTtcblxuICAgICAgICAgICAgICAgIHZhciBmbGV4MTpudW1iZXIgPSAobW91c2VQb3MgLSBiZWdpbikgLyBzaXplO1xuICAgICAgICAgICAgICAgIHZhciBmbGV4MjogbnVtYmVyID0gKGVuZCAtIG1vdXNlUG9zKSAvIHNpemU7XG5cbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5jaGlsZHJlbltpbmRleDFdLmZsZXggPSBmbGV4MTtcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZS5jaGlsZHJlbltpbmRleDJdLmZsZXggPSBmbGV4MjtcblxuICAgICAgICAgICAgICAgIHBhbmUxLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICBmbGV4OiBmbGV4MVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcGFuZTIuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBmbGV4OiBmbGV4MlxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmVzaXplci5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlc2l6ZXJPdmVybGF5LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wYW5lbERyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaGFuZGxlU3RhdGVDaGFuZ2UoY2hpbGRSZWY6c3RyaW5nLCBuZXdTdGF0ZTpMYXlvdXRTdGF0ZSk6IHZvaWQge1xuICAgICAgICB2YXIgc3RhdGVDb3B5OkxheW91dFN0YXRlID0gXy5jbG9uZURlZXAodGhpcy5zdGF0ZSk7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2hpbGROYW1lcy5pbmRleE9mKGNoaWxkUmVmKTtcblxuICAgICAgICBzdGF0ZUNvcHkuY2hpbGRyZW5baW5kZXhdID0gbmV3U3RhdGU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGVDb3B5KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuY2hpbGROYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLnJlc2l6ZXJOYW1lcyA9IFtdO1xuICAgICAgICB2YXIgc3R5bGU6YW55ID0ge1xuICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICBmbGV4OiB0aGlzLnN0YXRlLmZsZXgsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgb3V0bGluZTogXCJub25lXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIHVzZXJTZWxlY3Q6IFwibm9uZVwiLFxuICAgICAgICAgICAgZmxleERpcmVjdGlvbjogdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwgPyBcInJvd1wiIDogXCJjb2x1bW5cIlxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKHRoaXMuc3RhdGUuZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMKSB7XG4gICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmNoaWxkcmVuICYmIHRoaXMuc3RhdGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICB2YXIgbmV3Q2hpbGRyZW46SlNYLkVsZW1lbnRbXSA9IG5ldyBBcnJheSh0aGlzLnN0YXRlLmNoaWxkcmVuLmxlbmd0aCAqIDIgLSAxKTtcblxuICAgICAgICAgICB0aGlzLnN0YXRlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkU3RhdGU6TGF5b3V0U3RhdGUsIGk6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIHZhciByZWY6c3RyaW5nID0gXCJjaGlsZFwiICsgaTtcbiAgICAgICAgICAgICAgdGhpcy5jaGlsZE5hbWVzW2ldID0gcmVmO1xuICAgICAgICAgICAgICBuZXdDaGlsZHJlbltpICogMl0gPSA8TGF5b3V0IG9uU3RhdGVDaGFuZ2U9e3RoaXMuaGFuZGxlU3RhdGVDaGFuZ2UuYmluZCh0aGlzLCByZWYpfSByZWY9e3JlZn0gc3RhdGU9e2NoaWxkU3RhdGV9IGtleT17aSAqIDJ9Lz47XG4gICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgIHZhciBpOm51bWJlcjtcbiAgICAgICAgICAgZm9yKGkgPSAxOyBpIDwgbmV3Q2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSArPSAyKSB7XG4gICAgICAgICAgICAgdmFyIHJlc2l6ZXJOYW1lOnN0cmluZyA9IFwicmVzaXplclwiICsgKGkgLyAyKTtcbiAgICAgICAgICAgICB0aGlzLnJlc2l6ZXJOYW1lcy5wdXNoKHJlc2l6ZXJOYW1lKTtcbiAgICAgICAgICAgICB2YXIgcmVzaXplcjpKU1guRWxlbWVudCA9IDxSZXNpemVyIHJlZj17cmVzaXplck5hbWV9IGtleT17aX0gZGlyZWN0aW9uPXt0aGlzLnN0YXRlLmRpcmVjdGlvbn0gcGFuZTE9e25ld0NoaWxkcmVuW2kgLSAxXS5yZWYgYXMgc3RyaW5nfSBwYW5lMj17bmV3Q2hpbGRyZW5baSArIDFdLnJlZiBhcyBzdHJpbmd9Lz47XG4gICAgICAgICAgICAgbmV3Q2hpbGRyZW5baV0gPSByZXNpemVyO1xuICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJlZml4ZWQ6YW55ID0gVmVuZG9yUHJlZml4LnByZWZpeCh7c3R5bGVzOiBzdHlsZX0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHJlZj17KGVsdDpFbGVtZW50KSA9PiB7IHRoaXMuZWxlbWVudCA9IGVsdDsgfX0gc3R5bGU9e3ByZWZpeGVkLnN0eWxlc30+XG4gICAgICAgICAgICAgICAge25ld0NoaWxkcmVufVxuICAgICAgICAgICAgICAgIDxSZXNpemVyT3ZlcmxheSByZWY9e1JFU0laRVJPVkVSTEFZfSBrZXk9e1JFU0laRVJPVkVSTEFZfSBkaXJlY3Rpb249e3RoaXMuc3RhdGUuZGlyZWN0aW9ufS8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LWRvbS5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QtdmVuZG9yLXByZWZpeC9yZWFjdC12ZW5kb3ItcHJlZml4LmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIFZlbmRvclByZWZpeCBmcm9tIFwicmVhY3QtdmVuZG9yLXByZWZpeFwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5cbmNvbnN0IEhPUklaT05UQUw6IHN0cmluZyA9IFwiaG9yaXpvbnRhbFwiO1xuXG52YXIgcmVzaXplclN0eWxlOiBhbnkgPSB7fTtcblxucmVzaXplclN0eWxlLmJhc2ljID0ge1xuXHRiYWNrZ3JvdW5kOiBcIiMwMDBcIixcbiAgICBvcGFjaXR5OiAuMSxcbiAgICB6SW5kZXg6IDEsXG4gICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICBiYWNrZ3JvdW5kQ2xpcDogXCJwYWRkaW5nXCJcbn07XG5cbnJlc2l6ZXJTdHlsZS52ZXJ0aWNhbCA9IHtcbiAgICBoZWlnaHQ6IFwiNHB4XCIsXG4gICAgY3Vyc29yOiBcInJvdy1yZXNpemVcIixcbiAgICB3aWR0aDogXCIxMDAlXCJcbn07XG5cbnJlc2l6ZXJTdHlsZS5ob3Jpem9udGFsID0ge1xuICAgIHdpZHRoOiBcIjRweFwiLFxuICAgIGN1cnNvcjogXCJjb2wtcmVzaXplXCIsXG4gICAgaGVpZ2h0OiBcIjEwMCVcIlxufTtcblxuZXhwb3J0IGludGVyZmFjZSBJUmVzaXplclByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8UmVzaXplcj4ge1xuXHRyZWY6IHN0cmluZztcblx0a2V5OiBudW1iZXI7XG5cdGRpcmVjdGlvbjogc3RyaW5nO1xuXHRwYW5lMTogc3RyaW5nO1xuXHRwYW5lMjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNpemVyU3RhdGUge1xuXHRhY3RpdmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNpemVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElSZXNpemVyUHJvcHMsIElSZXNpemVyU3RhdGU+IHtcblxuXHRcdHByaXZhdGUgZWxlbWVudDpFbGVtZW50O1xuXG5cdFx0cHJpdmF0ZSBib3VuZE1vdXNlRG93bjphbnk7XG5cblx0XHRjb25zdHJ1Y3Rvcihwcm9wczpJUmVzaXplclByb3BzKSB7XG5cdFx0XHRzdXBlcihwcm9wcyk7XG5cdFx0XHR0aGlzLnN0YXRlID0ge1xuXHRcdFx0XHRhY3RpdmU6IGZhbHNlXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGNvbXBvbmVudERpZE1vdW50ICgpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuYm91bmRNb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcykpO1xuXHRcdH1cblxuXHRcdGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuYm91bmRNb3VzZURvd24pO1xuXHRcdH1cblxuXHRcdG9uTW91c2VEb3duICgpIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0XHRhY3RpdmU6dHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmVuZGVyKCkge1xuXHRcdFx0dmFyIGRpcmVjdGlvbjpzdHJpbmcgPSB0aGlzLnByb3BzLmRpcmVjdGlvbjtcblx0XHRcdHZhciBzdHlsZTphbnkgPSByZXNpemVyU3R5bGUuYmFzaWM7XG5cblx0XHRcdFN0YW5kYXJkTGliLm1lcmdlKHN0eWxlLCByZXNpemVyU3R5bGVbZGlyZWN0aW9uXSk7XG5cblx0XHRcdHZhciBwcmVmaXhlZCA9IFZlbmRvclByZWZpeC5wcmVmaXgoe3N0eWxlczogc3R5bGV9KTtcblx0XHRcdHJldHVybiA8c3BhbiByZWY9eyhlbHQ6RWxlbWVudCkgPT4geyB0aGlzLmVsZW1lbnQgPSBlbHQgfX0gc3R5bGU9e3ByZWZpeGVkLnN0eWxlc30vPjtcblx0XHR9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0LXZlbmRvci1wcmVmaXgvcmVhY3QtdmVuZG9yLXByZWZpeC5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QtZG9tLmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0ICogYXMgVmVuZG9yUHJlZml4IGZyb20gXCJyZWFjdC12ZW5kb3ItcHJlZml4XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5jb25zdCBIT1JJWk9OVEFMOiBzdHJpbmcgPSBcImhvcml6b250YWxcIjtcblxuY29uc3QgbW91c2VldmVudHM6c3RyaW5nW10gPSBbXCJtb3VzZW92ZXJcIiwgXCJtb3VzZW91dFwiLCBcIm1vdXNlbGVhdmVcIl07XG5cbnZhciByZXNpemVyU3R5bGU6YW55ID0ge307XG5cbnJlc2l6ZXJTdHlsZS5iYXNpYyA9IHtcbiAgICBiYWNrZ3JvdW5kOiBcIiMwMDBcIixcbiAgICBvcGFjaXR5OiAuMyxcbiAgICB6SW5kZXg6IDEsXG4gICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICBiYWNrZ3JvdW5kQ2xpcDogXCJwYWRkaW5nXCIsXG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIlxufTtcblxucmVzaXplclN0eWxlLnZlcnRpY2FsID0ge1xuICAgIGhlaWdodDogXCI0cHhcIixcbiAgICBjdXJzb3I6IFwicm93LXJlc2l6ZVwiLFxuICAgIHdpZHRoOiBcIjEwMCVcIlxufTtcblxucmVzaXplclN0eWxlLmhvcml6b250YWwgPSB7XG4gICAgd2lkdGg6IFwiNHB4XCIsXG4gICAgY3Vyc29yOiBcImNvbC1yZXNpemVcIixcbiAgICBoZWlnaHQ6IFwiMTAwJVwiXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNpemVyT3ZlcmxheVByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8UmVzaXplck92ZXJsYXk+IHtcbiAgICByZWY6IHN0cmluZztcbiAgICBkaXJlY3Rpb246IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNpemVyT3ZlcmxheVN0YXRlIHtcbiAgICBhY3RpdmU/OiBib29sZWFuO1xuICAgIHJhbmdlPzogbnVtYmVyW107XG4gICAgeD86IG51bWJlcjtcbiAgICB5PzogbnVtYmVyO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNpemVyT3ZlcmxheSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUmVzaXplck92ZXJsYXlQcm9wcywgSVJlc2l6ZXJPdmVybGF5U3RhdGU+IHtcblxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudDtcbiAgICBwdWJsaWMgc3RhdGU6IElSZXNpemVyT3ZlcmxheVN0YXRlO1xuXG4gICAgcHJpdmF0ZSBfb25Nb3VzZU1vdmU6IEV2ZW50TGlzdGVuZXI7XG4gICAgcHJpdmF0ZSBfc3RvcEV2ZW50UHJvcGFnYXRpb246IEV2ZW50TGlzdGVuZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVJlc2l6ZXJPdmVybGF5UHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICByYW5nZTogW10sXG4gICAgICAgICAgeDogTmFOLFxuICAgICAgICAgIHk6IE5hTlxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uTW91c2VNb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpLCB0cnVlKTtcbiAgICAgICAgbW91c2VldmVudHMuZm9yRWFjaCgobW91c2VldmVudDogc3RyaW5nKSA9PiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKG1vdXNlZXZlbnQsIHRoaXMuX3N0b3BFdmVudFByb3BhZ2F0aW9uID0gdGhpcy5zdG9wRXZlbnRQcm9wYWdhdGlvbi5iaW5kKHRoaXMpLCB0cnVlKSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Nb3VzZU1vdmUpXG4gICAgICAgIG1vdXNlZXZlbnRzLmZvckVhY2goKG1vdXNlZXZlbnQpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIobW91c2VldmVudCwgdGhpcy5fc3RvcEV2ZW50UHJvcGFnYXRpb24pKTtcbiAgICB9XG5cbiAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbihldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5zdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5zdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lcjpFbGVtZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgYXMgRWxlbWVudDtcbiAgICAgICAgICAgIHZhciByZWN0OkNsaWVudFJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgbGVmdDogbnVtYmVyID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgcmVjdC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRvcDogbnVtYmVyID0gd2luZG93LnBhZ2VZT2Zmc2V0ICsgcmVjdC50b3A7XG4gICAgICAgICAgICB2YXIgbW91c2VQb3M6IG51bWJlciA9IHRoaXMucHJvcHMuZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMID8gZXZlbnQucGFnZVggOiBldmVudC5wYWdlWTtcblxuICAgICAgICAgICAgbW91c2VQb3MgPSBNYXRoLm1heCh0aGlzLnN0YXRlLnJhbmdlWzBdLCBNYXRoLm1pbihtb3VzZVBvcywgdGhpcy5zdGF0ZS5yYW5nZVsxXSkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgeDogbW91c2VQb3MgLSBsZWZ0LFxuICAgICAgICAgICAgICAgICAgICB5OiBOYU5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHg6IE5hTixcbiAgICAgICAgICAgICAgICAgICAgeTogbW91c2VQb3MgLSB0b3BcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbjogc3RyaW5nID0gdGhpcy5wcm9wcy5kaXJlY3Rpb247XG4gICAgICAgIHZhciBzdHlsZTphbnkgPSB7fTtcblxuICAgICAgICBTdGFuZGFyZExpYi5tZXJnZShzdHlsZSwgcmVzaXplclN0eWxlLmJhc2ljKTtcbiAgICAgICAgU3RhbmRhcmRMaWIubWVyZ2Uoc3R5bGUsIHJlc2l6ZXJTdHlsZVtkaXJlY3Rpb25dKTtcblxuICAgICAgICBpZih0aGlzLnN0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9IHRoaXMuc3RhdGUueDtcbiAgICAgICAgICAgIHN0eWxlLnRvcCA9IHRoaXMuc3RhdGUueTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByZWZpeGVkID0gVmVuZG9yUHJlZml4LnByZWZpeCh7IHN0eWxlczogc3R5bGUgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuIHJlZj17KGVsdDpFbGVtZW50KSA9PiB7IHRoaXMuZWxlbWVudCA9IGVsdDsgfX0gc3R5bGU9e3ByZWZpeGVkLnN0eWxlc30vPlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczphbnksIHN0YXRlOmFueSkge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgc3R5bGU6YW55ID0gdGhpcy5wcm9wcy5zdHlsZSB8fCB7fTtcbiAgICAgICAgdmFyIG90aGVyUHJvcHM6YW55ID0ge307XG4gICAgICAgIGZvcih2YXIga2V5IGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgIGlmKGtleSAhPT0gXCJzdHlsZVwiKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJQcm9wc1trZXldID0gdGhpcy5wcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3R5bGUgPSBzdHlsZSB8fCB7fTtcbiAgICAgICAgc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBzdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJyb3dcIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGV9IHsuLi5vdGhlclByb3BzfT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczphbnksIHN0YXRlOmFueSkge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgc3R5bGU6YW55ID0gdGhpcy5wcm9wcy5zdHlsZSB8fCB7fTtcbiAgICAgICAgdmFyIG90aGVyUHJvcHM6YW55ID0ge307XG4gICAgICAgIGZvcih2YXIga2V5IGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgICAgIGlmKGtleSAhPT0gXCJzdHlsZVwiKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJQcm9wc1trZXldID0gdGhpcy5wcm9wc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBzdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGV9IHsuLi5vdGhlclByb3BzfT5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cbn1cbiIsImltcG9ydCBIQm94IGZyb20gXCIuL0hCb3hcIjtcbmltcG9ydCBWQm94IGZyb20gXCIuL1ZCb3hcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIEhCb3gsXG4gICAgVkJveFxufVxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC1kb20uZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3Mvd2VhdmUvV2VhdmVQYXRoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2QzL2QzLmQudHNcIi8+XG5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcyBleHRlbmRzIFJlYWN0LlByb3BzPEFic3RyYWN0V2VhdmVUb29sPiB7XG4gICAgdG9vbFBhdGg6V2VhdmVQYXRoO1xuICAgIHN0eWxlOlJlYWN0LkNTU1Byb3BlcnRpZXNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQWJzdHJhY3RXZWF2ZVRvb2xTdGF0ZSB7XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQWJzdHJhY3RXZWF2ZVRvb2xQYXRocyB7XG4gICAgW25hbWU6c3RyaW5nXSA6IFdlYXZlUGF0aFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRTaXplIHtcbiAgICB3aWR0aDpudW1iZXI7XG4gICAgaGVpZ2h0Om51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFBhdGhDb25maWcge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBwYXRoOiBXZWF2ZVBhdGg7XG4gICAgY2FsbGJhY2tzPzogRnVuY3Rpb258RnVuY3Rpb25bXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWJzdHJhY3RXZWF2ZVRvb2wgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUFic3RyYWN0V2VhdmVUb29sUHJvcHMsIElBYnN0cmFjdFdlYXZlVG9vbFN0YXRlPiB7XG5cbiAgICBwcm90ZWN0ZWQgdG9vbFBhdGg6V2VhdmVQYXRoO1xuICAgIHByaXZhdGUgd3JhcHBlcjpIVE1MRWxlbWVudDtcbiAgICBwcm90ZWN0ZWQgZWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICBwcm90ZWN0ZWQgcGF0aHM6SUFic3RyYWN0V2VhdmVUb29sUGF0aHM7XG4gICAgcHJvdGVjdGVkIGVsZW1lbnRTaXplOkVsZW1lbnRTaXplO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnRvb2xQYXRoID0gcHJvcHMudG9vbFBhdGg7XG4gICAgICAgIHRoaXMucGF0aHMgPSB7fTtcbiAgICB9XG5cbiAgICBnZXRFbGVtZW50U2l6ZSgpOkVsZW1lbnRTaXplIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndyYXBwZXIuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMud3JhcHBlci5jbGllbnRIZWlnaHRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyeSBvZiBwYXRoIGNvbmZpZ3VyYXRpb25zXG4gICAgLy8gYSBwYXRoIGNvbmZpZyBpcyBhbiBvYmplY3Qgd2l0aCBhIHBhdGggb2JqZWN0IG5hbWUsIHRoZSB3ZWF2ZSBwYXRoIGFuZCBhblxuICAgIC8vIG9wdGlvbmFsIGNhbGxiYWNrIG9yIGFycmF5IG9mIGNhbGxiYWNrc1xuICAgIGluaXRpYWxpemVQYXRocyhwcm9wZXJ0aWVzOlBhdGhDb25maWdbXSk6dm9pZCB7XG4gICAgICAgIHByb3BlcnRpZXMuZm9yRWFjaCgocGF0aENvbmY6UGF0aENvbmZpZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYXRoc1twYXRoQ29uZi5uYW1lXSA9IHBhdGhDb25mLnBhdGg7XG4gICAgICAgICAgICBpZihwYXRoQ29uZi5jYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tzOkZ1bmN0aW9uW10gPSBBcnJheS5pc0FycmF5KHBhdGhDb25mLmNhbGxiYWNrcykgPyBwYXRoQ29uZi5jYWxsYmFja3MgYXMgRnVuY3Rpb25bXSA6IFtwYXRoQ29uZi5jYWxsYmFja3MgYXMgRnVuY3Rpb25dO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjazpGdW5jdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGhzW3BhdGhDb25mLm5hbWVdLmFkZENhbGxiYWNrKHRoaXMsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcblxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50ICgpIHtcblxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcblxuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrKGV2ZW50OlJlYWN0Lk1vdXNlRXZlbnQpOnZvaWQge1xuXG4gICAgfVxuXG4gICAgcmVuZGVyKCk6SlNYLkVsZW1lbnQge1xuICAgICAgICByZXR1cm4gPGRpdiByZWY9eyhlbHQ6SFRNTEVsZW1lbnQpID0+IHsgdGhpcy53cmFwcGVyID0gZWx0OyB9fSBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX0+XG4gICAgICAgICAgICA8ZGl2IHJlZj17KGVsdDpIVE1MRWxlbWVudCkgPT4ge3RoaXMuZWxlbWVudCA9IGVsdDsgfX0gb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiwgbWF4SGVpZ2h0OiBcIjEwMCVcIn19PjwvZGl2PlxuICAgICAgICA8L2Rpdj47XG4gICAgfVxuXG4gICAgY3VzdG9tU3R5bGUoYXJyYXk6QXJyYXk8bnVtYmVyPiwgdHlwZTpzdHJpbmcsIGZpbHRlcjpzdHJpbmcsIHN0eWxlOmFueSkge1xuICAgICAgICBhcnJheS5mb3JFYWNoKCAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGQzLnNlbGVjdChkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwodHlwZSkuZmlsdGVyKGZpbHRlcilbMF1baW5kZXhdKS5zdHlsZShzdHlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvYzMvYzMuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZDMvZDMuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvbG9kYXNoL2xvZGFzaC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy93ZWF2ZS9XZWF2ZVBhdGguZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3V0aWxzL1N0YW5kYXJkTGliLnRzXCIvPlxuXG5cbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL1dlYXZlVG9vbFwiO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCBGb3JtYXRVdGlscyBmcm9tIFwiLi4vdXRpbHMvRm9ybWF0VXRpbHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7SUFic3RyYWN0V2VhdmVUb29sUGF0aHN9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0VsZW1lbnRTaXplfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtDaGFydENvbmZpZ3VyYXRpb24sIENoYXJ0QVBJLCBnZW5lcmF0ZX0gZnJvbSBcImMzXCI7XG5pbXBvcnQge01vdXNlRXZlbnR9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0YW5kYXJkTGliIGZyb20gXCIuLi91dGlscy9TdGFuZGFyZExpYlwiO1xuXG5cbmludGVyZmFjZSBJQmFyY2hhcnRQYXRocyBleHRlbmRzIElBYnN0cmFjdFdlYXZlVG9vbFBhdGhzIHtcbiAgICBwbG90dGVyOiBXZWF2ZVBhdGg7XG4gICAgaGVpZ2h0Q29sdW1uczogV2VhdmVQYXRoO1xuICAgIGxhYmVsQ29sdW1uOiBXZWF2ZVBhdGg7XG4gICAgc29ydENvbHVtbjogV2VhdmVQYXRoO1xuICAgIGNvbG9yQ29sdW1uOiBXZWF2ZVBhdGg7XG4gICAgY2hhcnRDb2xvcnM6IFdlYXZlUGF0aDtcbiAgICBncm91cGluZ01vZGU6IFdlYXZlUGF0aDtcbiAgICBob3Jpem9udGFsTW9kZTogV2VhdmVQYXRoO1xuICAgIHNob3dWYWx1ZUxhYmVsczogV2VhdmVQYXRoO1xuICAgIHhBeGlzOiBXZWF2ZVBhdGg7XG4gICAgeUF4aXM6IFdlYXZlUGF0aDtcbiAgICBmaWx0ZXJlZEtleVNldDogV2VhdmVQYXRoO1xuICAgIHNlbGVjdGlvbktleVNldDogV2VhdmVQYXRoO1xuICAgIHByb2JlS2V5U2V0OiBXZWF2ZVBhdGg7XG59XG5cblxuY2xhc3MgV2VhdmVDM0JhcmNoYXJ0IGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuXG4gICAgcHJpdmF0ZSBrZXlUb0luZGV4Ontba2V5OnN0cmluZ106IG51bWJlcn07XG4gICAgcHJpdmF0ZSBpbmRleFRvS2V5OntbaW5kZXg6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHhBeGlzVmFsdWVUb0xhYmVsOntbdmFsdWU6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHlBeGlzVmFsdWVUb0xhYmVsOntbdmFsdWU6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHlMYWJlbENvbHVtbkRhdGFUeXBlOnN0cmluZztcbiAgICBwcml2YXRlIGdyb3VwaW5nTW9kZTpzdHJpbmc7XG4gICAgcHJpdmF0ZSBoZWlnaHRDb2x1bW5OYW1lczpzdHJpbmdbXTtcbiAgICBwcml2YXRlIGhlaWdodENvbHVtbnNMYWJlbHM6c3RyaW5nW107XG4gICAgcHJpdmF0ZSBzdHJpbmdSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgbnVtZXJpY1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSByZWNvcmRzOlJlY29yZFtdW107XG4gICAgcHJpdmF0ZSBjb2xvclJhbXA6c3RyaW5nW107XG4gICAgcHJpdmF0ZSBzaG93VmFsdWVMYWJlbHM6Ym9vbGVhbjtcbiAgICBwcml2YXRlIHlMYWJlbENvbHVtblBhdGg6V2VhdmVQYXRoO1xuICAgIHByaXZhdGUgYzNDb25maWc6Q2hhcnRDb25maWd1cmF0aW9uO1xuICAgIHByaXZhdGUgY2hhcnQ6Q2hhcnRBUEk7XG5cbiAgICBwcm90ZWN0ZWQgcGF0aHM6SUJhcmNoYXJ0UGF0aHM7XG5cbiAgICBwcml2YXRlIGZsYWc6Ym9vbGVhbjtcbiAgICBwcml2YXRlIGtleURvd246Ym9vbGVhbjtcbiAgICBwcml2YXRlIGJ1c3k6Ym9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklBYnN0cmFjdFdlYXZlVG9vbFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsID0ge307XG4gICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcblxuICAgICAgICB0aGlzLmMzQ29uZmlnID0ge1xuICAgICAgICAgICAgLy9zaXplOiB0aGlzLmdldEVsZW1lbnRTaXplKCksXG4gICAgICAgICAgICBwYWRkaW5nOiB7XG4gICAgICAgICAgICAgICAgdG9wOiAyMCxcbiAgICAgICAgICAgICAgICBib3R0b206IDIwLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiAzMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBqc29uOiBbXSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJhclwiLFxuICAgICAgICAgICAgICAgIHhTb3J0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAodiwgaWQsIGksIGopID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hvd1ZhbHVlTGFiZWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcmRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBjb2xvcjogKGNvbG9yOnN0cmluZywgZDphbnkpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMubGVuZ3RoID09PSAxICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBjb3JyZXNwb25kaW5nIGluZGV4IG9mIG51bWVyaWNSZWNvcmRzIGluIHN0cmluZ1JlY29yZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuaW5kZXhUb0tleVtkLmluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF8ucGx1Y2sodGhpcy5zdHJpbmdSZWNvcmRzLCBcImlkXCIpLmluZGV4T2YoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nUmVjb3Jkc1tpbmRleF0gPyB0aGlzLnN0cmluZ1JlY29yZHNbaW5kZXhdW1wiY29sb3JcIl0gYXMgc3RyaW5nIDogXCIjQzBDREQxXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IgfHwgXCIjQzBDREQxXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5rZXlEb3duICYmIGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmFkZEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnVuc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnJlbW92ZUtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3ZlcjogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFt0aGlzLmluZGV4VG9LZXlbZC5pbmRleF1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25tb3VzZW91dDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNhdGVnb3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwib3V0ZXItY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZml0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpbGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bTpudW1iZXIpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdHJpbmdSZWNvcmRzICYmIHRoaXMuc3RyaW5nUmVjb3Jkc1tudW1dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZ1JlY29yZHNbbnVtXVtcInhMYWJlbFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OlwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJvdXRlci1taWRkbGVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bTpudW1iZXIpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy55TGFiZWxDb2x1bW5QYXRoICYmIHRoaXMueUxhYmVsQ29sdW1uRGF0YVR5cGUgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWxbbnVtXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cGluZ01vZGUgPT09IFwicGVyY2VudFN0YWNrXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdChcIi4wJVwiKShudW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoRm9ybWF0VXRpbHMuZGVmYXVsdE51bWJlckZvcm1hdHRpbmcobnVtKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiaW5kdG86IG51bGwsXG4gICAgICAgICAgICBiYXI6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDoge1xuICAgICAgICAgICAgICAgICAgICByYXRpbzogMC44XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXJlZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgc2VsZWN0aW9uS2V5c0NoYW5nZWQgKCk6dm9pZCB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gc2VsZWN0ZWRLZXlzLm1hcCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIga2V5czpzdHJpbmdbXSA9IE9iamVjdC5rZXlzKHRoaXMua2V5VG9JbmRleCk7XG4gICAgICAgIHZhciBpbmRpY2VzOm51bWJlcltdID0ga2V5cy5tYXAoKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gXy5kaWZmZXJlbmNlKGluZGljZXMsc2VsZWN0ZWRJbmRpY2VzKTtcbiAgICAgICAgaWYoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAwLjN9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDEuMH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5zZWxlY3QodGhpcy5oZWlnaHRDb2x1bW5OYW1lcywgc2VsZWN0ZWRJbmRpY2VzLCB0cnVlKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKGluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnNlbGVjdCh0aGlzLmhlaWdodENvbHVtbk5hbWVzLCBbXSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHByaXZhdGUgcHJvYmVkS2V5c0NoYW5nZWQgKCk6IHZvaWQge1xuICAgICAgICB2YXIgc2VsZWN0ZWRLZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gc2VsZWN0ZWRLZXlzLm1hcCggKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGtleXM6c3RyaW5nW10gPSBPYmplY3Qua2V5cyh0aGlzLmtleVRvSW5kZXgpO1xuICAgICAgICB2YXIgaW5kaWNlczpudW1iZXJbXSA9IGtleXMubWFwKChrZXk6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB1bnNlbGVjdGVkSW5kaWNlczpudW1iZXJbXSA9IF8uZGlmZmVyZW5jZShpbmRpY2VzLHNlbGVjdGVkSW5kaWNlcyk7XG5cbiAgICAgICAgaWYoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAwLjN9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDEuMH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uS2V5c0NoYW5nZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQ6TW91c2VFdmVudCk6dm9pZCB7XG4gICAgICAgIGlmKCF0aGlzLmZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0b2dnbGVLZXkoZXZlbnQ6S2V5Ym9hcmRFdmVudCk6dm9pZCB7XG4gICAgICAgIGlmKChldmVudC5rZXlDb2RlID09PSAxNyl8fChldmVudC5rZXlDb2RlID09PSA5MSkgfHwgKGV2ZW50LmtleUNvZGUgPT09IDIyNCkpIHtcbiAgICAgICAgICAgIHRoaXMua2V5RG93biA9ICF0aGlzLmtleURvd247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByb3RhdGVBeGVzKCkge1xuICAgICAgICAvLyB0aGlzLmMzQ29uZmlnLmF4aXMucm90YXRlZCA9IHRoaXMucGF0aHMuaG9yaXpvbnRhbE1vZGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vICAgdGhpcy5idXN5ID0gdHJ1ZTtcbiAgICAgICAgLy8gICBjMy5nZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICAgICAgLy8gfSwgMTApO1xuICAgIH1cblxuICAgIF9heGlzQ2hhbmdlZCAoKSB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmKHRoaXMuYnVzeSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLl9heGlzQ2hhbmdlZCwgMjApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHhMYWJlbDpzdHJpbmcgPSB0aGlzLnBhdGhzLnhBeGlzLnB1c2goXCJvdmVycmlkZUF4aXNOYW1lXCIpLmdldFN0YXRlKCkgfHwgXCJTb3J0ZWQgYnkgXCIgKyB0aGlzLnBhdGhzLnNvcnRDb2x1bW4uZ2V0T2JqZWN0KCkuZ2V0TWV0YWRhdGEoJ3RpdGxlJyk7XG4gICAgICAgIHZhciB5TGFiZWw6c3RyaW5nID0gdGhpcy5wYXRocy55QXhpcy5wdXNoKFwib3ZlcnJpZGVBeGlzTmFtZVwiKS5nZXRTdGF0ZSgpIHx8ICh0aGlzLmhlaWdodENvbHVtbnNMYWJlbHMgPyB0aGlzLmhlaWdodENvbHVtbnNMYWJlbHMuam9pbihcIiwgXCIpIDogXCJcIik7XG5cbiAgICAgICAgdGhpcy5jaGFydC5heGlzLmxhYmVscyh7XG4gICAgICAgICAgICB4OiB4TGFiZWwsXG4gICAgICAgICAgICB5OiB5TGFiZWxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZy5heGlzLngubGFiZWwgPSB7dGV4dDp4TGFiZWwsIHBvc2l0aW9uOlwib3V0ZXItY2VudGVyXCJ9O1xuICAgICAgICB0aGlzLmMzQ29uZmlnLmF4aXMueS5sYWJlbCA9IHt0ZXh0OnlMYWJlbCwgcG9zaXRpb246XCJvdXRlci1taWRkbGVcIn07XG4gICAgfVxuXG4gICAgaGFuZGxlU2hvd1ZhbHVlTGFiZWxzICgpIHtcbiAgICAgICAgdGhpcy5zaG93VmFsdWVMYWJlbHMgPSB0aGlzLnBhdGhzLnNob3dWYWx1ZUxhYmVscy5nZXRTdGF0ZSgpO1xuICAgICAgICB0aGlzLmNoYXJ0LmZsdXNoKCk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZUNvbHVtbnMoKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5oZWlnaHRDb2x1bW5zTGFiZWxzID0gW107XG5cbiAgICAgICAgdmFyIGhlaWdodENvbHVtbnMgPSB0aGlzLnBhdGhzLmhlaWdodENvbHVtbnMuZ2V0Q2hpbGRyZW4oKTtcblxuICAgICAgICBmb3IgKGxldCBpZHggaW4gaGVpZ2h0Q29sdW1ucylcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGNvbHVtbiA9IGhlaWdodENvbHVtbnNbaWR4XTtcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IGNvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIik7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IGNvbHVtbi5nZXRQYXRoKCkucG9wKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0Q29sdW1uc0xhYmVscy5wdXNoKHRpdGxlKTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMucHVzaChuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9kYXRhQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuYnVzeSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlQ29sdW1ucygpO1xuXG4gICAgICAgIHZhciBoZWlnaHRDb2x1bW5zOldlYXZlUGF0aFtdID0gdGhpcy5wYXRocy5oZWlnaHRDb2x1bW5zLmdldENoaWxkcmVuKCk7XG5cbiAgICAgICAgdmFyIG51bWVyaWNNYXBwaW5nOmFueSA9IHtcbiAgICAgICAgICAgIHNvcnQ6IHRoaXMucGF0aHMuc29ydENvbHVtbixcbiAgICAgICAgICAgIHhMYWJlbDogdGhpcy5wYXRocy5sYWJlbENvbHVtblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBzdHJpbmdNYXBwaW5nOmFueSA9IHtcbiAgICAgICAgICAgIHNvcnQ6IHRoaXMucGF0aHMuc29ydENvbHVtbixcbiAgICAgICAgICAgIGNvbG9yOiB0aGlzLnBhdGhzLmNvbG9yQ29sdW1uLFxuICAgICAgICAgICAgeExhYmVsOiB0aGlzLnBhdGhzLmxhYmVsQ29sdW1uXG4gICAgICAgIH07XG5cbiAgICAgICAgaGVpZ2h0Q29sdW1ucy5mb3JFYWNoKChjb2x1bW46V2VhdmVQYXRoLCBpZHg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmFtZTpzdHJpbmcgPSBjb2x1bW4uZ2V0UGF0aCgpLnBvcCgpO1xuICAgICAgICAgICAgbnVtZXJpY01hcHBpbmdbbmFtZV0gPSBjb2x1bW47IC8vIGFsbCBoZWlnaHQgY29sdW1ucyBhcyBudW1lcmljIHZhbHVlIGZvciB0aGUgY2hhcnRcblxuICAgICAgICAgICAgaWYoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy55TGFiZWxDb2x1bW5QYXRoID0gY29sdW1uO1xuICAgICAgICAgICAgICAgIHN0cmluZ01hcHBpbmdbXCJ5TGFiZWxcIl0gPSBjb2x1bW47IC8vIG9ubHkgdXNpbmcgdGhlIGZpcnN0IGNvbHVtbiB0byBsYWJlbCB0aGUgeSBheGlzXG4gICAgICAgICAgICAgICAgbnVtZXJpY01hcHBpbmdbXCJ5TGFiZWxcIl0gPSBjb2x1bW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMueUxhYmVsQ29sdW1uRGF0YVR5cGUgPSB0aGlzLnlMYWJlbENvbHVtblBhdGguZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCdkYXRhVHlwZScpXCIpO1xuXG4gICAgICAgIHRoaXMubnVtZXJpY1JlY29yZHMgPSB0aGlzLnBhdGhzLnBsb3R0ZXIucmV0cmlldmVSZWNvcmRzKG51bWVyaWNNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJudW1iZXJcIn0pO1xuICAgICAgICBpZighdGhpcy5udW1lcmljUmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMoc3RyaW5nTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwic3RyaW5nXCJ9KTtcblxuICAgICAgICB0aGlzLnJlY29yZHMgPSBfLnppcCh0aGlzLm51bWVyaWNSZWNvcmRzLCB0aGlzLnN0cmluZ1JlY29yZHMpO1xuICAgICAgICB0aGlzLnJlY29yZHMgPSBfLnNvcnRCeUFsbCh0aGlzLnJlY29yZHMsIFtbMCwgXCJzb3J0XCJdLCBbMCwgXCJpZFwiXV0pO1xuXG4gICAgICAgIGlmKHRoaXMucmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgICBbdGhpcy5udW1lcmljUmVjb3JkcywgdGhpcy5zdHJpbmdSZWNvcmRzXSA9IF8udW56aXAodGhpcy5yZWNvcmRzKTtcblxuICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsID0ge307XG4gICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuXG4gICAgICAgIHRoaXMubnVtZXJpY1JlY29yZHMuZm9yRWFjaCgocmVjb3JkOlJlY29yZCwgaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBpZihyZWNvcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleVRvSW5kZXhbcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nXSA9IGluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhUb0tleVtpbmRleF0gPSByZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzLmZvckVhY2goKHJlY29yZDpSZWNvcmQsIGluZGV4Om51bWJlcikgPT4ge1xuICAgICAgICAgICAgdmFyIG51bWVyaWNSZWNvcmQ6UmVjb3JkID0gdGhpcy5udW1lcmljUmVjb3Jkc1tpbmRleF07XG4gICAgICAgICAgICBpZihudW1lcmljUmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFtudW1lcmljUmVjb3JkW1wieUxhYmVsXCJdIGFzIG51bWJlcl0gPSByZWNvcmRbXCJ5TGFiZWxcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWxbbnVtZXJpY1JlY29yZFtcInhMYWJlbFwiXSBhcyBudW1iZXJdID0gcmVjb3JkW1wieExhYmVsXCJdIGFzIHN0cmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5ncm91cGluZ01vZGUgPSB0aGlzLnBhdGhzLmdyb3VwaW5nTW9kZS5nZXRTdGF0ZSgpO1xuICAgICAgICAvL3ZhciBob3Jpem9udGFsTW9kZSA9IHRoaXMucGF0aHMucGxvdHRlci5wdXNoKFwiaG9yaXpvbnRhbE1vZGVcIikuZ2V0U3RhdGUoKTtcblxuICAgICAgICAvLyBzZXQgYXhpcyByb3RhdGlvbiBtb2RlXG4gICAgICAgIC8vdGhpcy5jaGFydC5sb2FkKHtheGVzOiB7IHJvdGF0ZWQ6IGhvcml6b250YWxNb2RlIH19KTtcblxuICAgICAgICBpZih0aGlzLmdyb3VwaW5nTW9kZSA9PT0gXCJzdGFja1wiKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lmdyb3VwcyhbdGhpcy5oZWlnaHRDb2x1bW5OYW1lc10pO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5ncm91cGluZ01vZGUgPT09IFwiZ3JvdXBcIikge1xuICAgICAgICAgICAgdGhpcy5jaGFydC5ncm91cHMoW10pO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5ncm91cGluZ01vZGUgPT09IFwicGVyY2VudFN0YWNrXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuZ3JvdXBzKFt0aGlzLmhlaWdodENvbHVtbk5hbWVzXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmdyb3VwaW5nTW9kZSA9PT0gXCJwZXJjZW50U3RhY2tcIiAmJiB0aGlzLmhlaWdodENvbHVtbk5hbWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB0aGUgaGVpZ2h0IGNvbHVtbnMgdG8gYmUgcGVyY2VudGFnZXMuXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWVzID0gdGhpcy5udW1lcmljUmVjb3Jkcy5tYXAoKHJlY29yZDpSZWNvcmQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0czp7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICAgICAgICAgICAgICAgIGlmKHJlY29yZCkge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHRzID0gXy5waWNrKHJlY29yZCwgdGhpcy5oZWlnaHRDb2x1bW5OYW1lcykgYXMge1trZXk6c3RyaW5nXTogbnVtYmVyfTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bTpudW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBfLmtleXMoaGVpZ2h0cykuZm9yRWFjaCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGhlaWdodHNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgXy5rZXlzKGhlaWdodHMpLmZvckVhY2goKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodHNba2V5XSA9IGhlaWdodHNba2V5XSAvIHN1bTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhlaWdodHM7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5udW1lcmljUmVjb3JkcyA9IG5ld1ZhbHVlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyZmFjZSBLZXlzIHt4OnN0cmluZywgdmFsdWU6c3RyaW5nW119O1xuICAgICAgICB2YXIga2V5czpLZXlzID0ge3g6XCJcIiwgdmFsdWU6W119O1xuICAgICAgICAvLyBpZiBsYWJlbCBjb2x1bW4gaXMgc3BlY2lmaWVkXG4gICAgICAgIGlmKHRoaXMucGF0aHMubGFiZWxDb2x1bW4uZ2V0U3RhdGUoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGtleXMueCA9IFwieExhYmVsXCI7XG4gICAgICAgIH1cblxuICAgICAgICBrZXlzLnZhbHVlID0gdGhpcy5oZWlnaHRDb2x1bW5OYW1lcztcbiAgICAgICAgdmFyIGNvbG9yczp7W25hbWU6c3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuXG4gICAgICAgIGlmKHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhpcy5jb2xvclJhbXAgPSB0aGlzLnBhdGhzLmNoYXJ0Q29sb3JzLmdldFN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLmhlaWdodENvbHVtbk5hbWVzLm1hcCgobmFtZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBTdGFuZGFyZExpYi5pbnRlcnBvbGF0ZUNvbG9yKGluZGV4IC8gKHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMubGVuZ3RoIC0gMSksIHRoaXMuY29sb3JSYW1wKTtcbiAgICAgICAgICAgICAgICBjb2xvcnNbbmFtZV0gPSBcIiNcIiArIFN0YW5kYXJkTGliLmRlY2ltYWxUb0hleChjb2xvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbG9ycyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSBfLmNsb25lRGVlcCh0aGlzLmMzQ29uZmlnLmRhdGEpO1xuICAgICAgICBkYXRhLmpzb24gPSB0aGlzLm51bWVyaWNSZWNvcmRzO1xuICAgICAgICBkYXRhLmNvbG9ycyA9IGNvbG9ycztcbiAgICAgICAgZGF0YS5rZXlzID0ga2V5cztcbiAgICAgICAgZGF0YS51bmxvYWQgPSB0cnVlO1xuICAgICAgICBkYXRhLmRvbmUgPSAoKSA9PiB7IHRoaXMuYnVzeSA9IGZhbHNlOyB9O1xuICAgICAgICB0aGlzLmMzQ29uZmlnLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmJ1c3kgPSB0cnVlO1xuICAgICAgICB0aGlzLmNoYXJ0LmxvYWQoZGF0YSk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZVN0eWxlKCkge31cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkVXBkYXRlKCk7XG4gICAgICAgIHZhciBuZXdFbGVtZW50U2l6ZSA9IHRoaXMuZ2V0RWxlbWVudFNpemUoKTtcbiAgICAgICAgaWYoIV8uaXNFcXVhbChuZXdFbGVtZW50U2l6ZSwgdGhpcy5lbGVtZW50U2l6ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQucmVzaXplKG5ld0VsZW1lbnRTaXplKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAvKiBDbGVhbnVwIGNhbGxiYWNrcyAqL1xuICAgICAgICAvL3RoaXMudGVhcmRvd25DYWxsYmFja3MoKTtcbiAgICAgICAgdGhpcy5jaGFydC5kZXN0cm95KCk7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIHZhciBheGlzQ2hhbmdlZDpGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5fYXhpc0NoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIGRhdGFDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLl9kYXRhQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgaGFuZGxlU2hvd1ZhbHVlTGFiZWxzOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLmhhbmRsZVNob3dWYWx1ZUxhYmVscy5iaW5kKHRoaXMpLCAxMCk7XG4gICAgICAgIHZhciBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkOkZ1bmN0aW9uID0gdGhpcy5zZWxlY3Rpb25LZXlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgcHJvYmVLZXlTZXRDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLnByb2JlZEtleXNDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciByb3RhdGVBeGVzOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLnJvdGF0ZUF4ZXMuYmluZCh0aGlzKSwgMTApO1xuXG4gICAgICAgIHZhciBwbG90dGVyUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJwbG90XCIpO1xuICAgICAgICB2YXIgbWFwcGluZyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogXCJwbG90dGVyXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLCBjYWxsYmFja3M6IG51bGx9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImhlaWdodENvbHVtbnNcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImhlaWdodENvbHVtbnNcIiksIGNhbGxiYWNrczogW2RhdGFDaGFuZ2VkLCBheGlzQ2hhbmdlZF0gfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJsYWJlbENvbHVtblwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwibGFiZWxDb2x1bW5cIiksIGNhbGxiYWNrczogW2RhdGFDaGFuZ2VkLCBheGlzQ2hhbmdlZF0gfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJzb3J0Q29sdW1uXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJzb3J0Q29sdW1uXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZCwgYXhpc0NoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiY29sb3JDb2x1bW5cIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImNvbG9yQ29sdW1uXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiY2hhcnRDb2xvcnNcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImNoYXJ0Q29sb3JzXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZ3JvdXBpbmdNb2RlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJncm91cGluZ01vZGVcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJob3Jpem9udGFsTW9kZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiaG9yaXpvbnRhbE1vZGVcIiksIGNhbGxiYWNrczogcm90YXRlQXhlcyB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNob3dWYWx1ZUxhYmVsc1wiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwic2hvd1ZhbHVlTGFiZWxzXCIpLCBjYWxsYmFja3M6IGhhbmRsZVNob3dWYWx1ZUxhYmVsc30sXG4gICAgICAgICAgICB7IG5hbWU6IFwieEF4aXNcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInhBeGlzXCIpLCBjYWxsYmFja3M6IGF4aXNDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwieUF4aXNcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInlBeGlzXCIpLCBjYWxsYmFja3M6IGF4aXNDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZmlsdGVyZWRLZXlTZXRcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImZpbHRlcmVkS2V5U2V0XCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJzZWxlY3Rpb25LZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LCBjYWxsYmFja3M6IHNlbGVjdGlvbktleVNldENoYW5nZWR9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInByb2JlS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LCBjYWxsYmFja3M6IHByb2JlS2V5U2V0Q2hhbmdlZH1cbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVQYXRocyhtYXBwaW5nKTtcbiAgICAgICAgdGhpcy5jM0NvbmZpZy5iaW5kdG8gPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2hhcnQgPSBnZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdlYXZlQzNCYXJjaGFydDtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpDb21wb3VuZEJhckNoYXJ0VG9vbFwiLCBXZWF2ZUMzQmFyY2hhcnQpO1xuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZDMvZDMuZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3dlYXZlL1dlYXZlUGF0aC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vcmVhY3QtdWkvdWkudHN4XCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC1kb20uZC50c1wiLz5cblxuXG5cbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL1dlYXZlVG9vbFwiO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHVpIGZyb20gXCIuLi9yZWFjdC11aS91aVwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcywgSUFic3RyYWN0V2VhdmVUb29sUGF0aHN9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5cbmNvbnN0IFNIQVBFX1RZUEVfQ0lSQ0xFOnN0cmluZyA9IFwiY2lyY2xlXCI7XG5jb25zdCBTSEFQRV9UWVBFX1NRVUFSRTpzdHJpbmcgPSBcInNxdWFyZVwiO1xuY29uc3QgU0hBUEVfVFlQRV9MSU5FOnN0cmluZyA9IFwibGluZVwiO1xuXG5jbGFzcyBXZWF2ZUMzQ29sb3JMZWdlbmQgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG4gICAgY29uc3RydWN0b3IocHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50ID8gdGhpcy5nZXRFbGVtZW50U2l6ZSgpIDogbnVsbDtcbiAgICAgICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICAgICAgPENvbG9yTGVnZW5kIHRvb2xQYXRoPXt0aGlzLnRvb2xQYXRofSB3aWR0aD17ZWxlbWVudFNpemUud2lkdGh9IGhlaWdodD17ZWxlbWVudFNpemUuaGVpZ2h0fS8+XG4gICAgICAgICAgICAsIHRoaXMuZWxlbWVudCk7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgSUNvbG9yTGVnZW5kUHJvcHMge1xuICAgIHRvb2xQYXRoOldlYXZlUGF0aDtcbiAgICB3aWR0aDpudW1iZXI7XG4gICAgaGVpZ2h0Om51bWJlcjtcbn1cblxuY2xhc3MgQ29sb3JMZWdlbmQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUNvbG9yTGVnZW5kUHJvcHMsIGFueT4ge1xuXG4gICAgcHJpdmF0ZSBwbG90dGVyUGF0aDpXZWF2ZVBhdGg7XG4gICAgcHJpdmF0ZSBkeW5hbWljQ29sb3JDb2x1bW5QYXRoOldlYXZlUGF0aDtcbiAgICBwcml2YXRlIGJpbm5pbmdEZWZpbml0aW9uOldlYXZlUGF0aDtcbiAgICBwcml2YXRlIGJpbm5lZENvbHVtblBhdGg6V2VhdmVQYXRoO1xuICAgIHByaXZhdGUgbnVtYmVyT2ZCaW5zOm51bWJlcjtcbiAgICBwcml2YXRlIHRvb2xQYXRoOldlYXZlUGF0aDtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklDb2xvckxlZ2VuZFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgY29uc29sZS5sb2coUmVhY3QpO1xuICAgICAgICB0aGlzLnRvb2xQYXRoID0gcHJvcHMudG9vbFBhdGg7XG4gICAgICAgIHRoaXMucGxvdHRlclBhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwicGxvdFwiKTtcbiAgICAgICAgdGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoID0gdGhpcy5wbG90dGVyUGF0aC5wdXNoKFwiZHluYW1pY0NvbG9yQ29sdW1uXCIsIG51bGwpO1xuICAgICAgICB0aGlzLmJpbm5pbmdEZWZpbml0aW9uID0gdGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLnB1c2goXCJpbnRlcm5hbER5bmFtaWNDb2x1bW5cIikucHVzaChudWxsKS5wdXNoKFwiYmlubmluZ0RlZmluaXRpb25cIikucHVzaChudWxsKTtcbiAgICAgICAgdGhpcy5iaW5uZWRDb2x1bW5QYXRoID0gdGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLnB1c2goXCJpbnRlcm5hbER5bmFtaWNDb2x1bW5cIiwgbnVsbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cENhbGxiYWNrcygpIHtcbiAgICAgICAgdGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnNldHVwQ2FsbGJhY2tzKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIH1cblxuICAgIGRyYXdDb250aW51b3VzUGxvdCgpIHtcblxuICAgIH1cbiAgICAvL2RyYXdCaW5uZWRQbG90KG51bWJlck9mQmluczpudW1iZXIpIHtcbiAgICAvLyAgICAvLyBjbGVhciB0aGUgc3ZnIGFuZCByZXJlbmRlciBldmVyeXRoaW5nXG4gICAgLy8gICAgdGhpcy5zdmcuc2VsZWN0QWxsKFwiKlwiKS5yZW1vdmUoKTtcbiAgICAvL1xuICAgIC8vICAgIHZhciB3aWR0aDpudW1iZXIgPSB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgLy8gICAgdmFyIGhlaWdodDpudW1iZXIgPSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIC8vXG4gICAgLy8gICAgdmFyIHNoYXBlU2l6ZTpudW1iZXIgPSB0aGlzLnBsb3R0ZXJQYXRoLmdldFN0YXRlKFwic2hhcGVTaXplXCIpO1xuICAgIC8vICAgIHZhciBzaGFwZVR5cGU6c3RyaW5nID0gdGhpcy5wbG90dGVyUGF0aC5nZXRTdGF0ZShcInNoYXBlVHlwZVwiKTtcbiAgICAvL1xuICAgIC8vICAgIHZhciByYW1wOmFueVtdID0gdGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLmdldFN0YXRlKFwicmFtcFwiKTtcbiAgICAvL1xuICAgIC8vICAgIHZhciB5U2NhbGU6RnVuY3Rpb24gPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIG51bWJlck9mQmlucyArIDFdKS5yYW5nZShbMCwgaGVpZ2h0XSk7XG4gICAgLy9cbiAgICAvLyAgICB2YXIgeU1hcDpGdW5jdGlvbiA9IChkOm51bWJlcik6bnVtYmVyID0+IHsgcmV0dXJuIHlTY2FsZShkKTsgfTtcbiAgICAvL1xuICAgIC8vICAgIGlmKHdpZHRoICYmIGhlaWdodCAmJiBudW1iZXJPZkJpbnMpIHtcbiAgICAvLyAgICAgICAgdGhpcy5zdmcuYXR0cihcIndpZHRoXCIsIHdpZHRoKS5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG4gICAgLy8gICAgfVxuICAgIC8vXG4gICAgLy8gICAgdGhpcy5zdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgIC8vICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIHlNYXAoMC41KSlcbiAgICAvLyAgICAgICAgICAgIC5hdHRyKFwieFwiLCAxMClcbiAgICAvLyAgICAgICAgICAgIC50ZXh0KHRoaXMuZHluYW1pY0NvbG9yQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIikpXG4gICAgLy8gICAgICAgICAgICAgLmF0dHIoXCJmb250LWZhbWlseVwiLCBcInNhbnMtc2VyaWZcIilcbiAgICAvLyAgICAgICAgICAgICAuYXR0cihcImZvbnQtc2l6ZVwiLCBcIjEycHhcIik7XG4gICAgLy9cbiAgICAvLyAgICBzaGFwZVNpemUgPSBfLm1heChbMSwgXy5taW4oW3NoYXBlU2l6ZSwgaGVpZ2h0IC8gbnVtYmVyT2ZCaW5zXSldKTtcbiAgICAvL1xuICAgIC8vICAgIGxldCByOm51bWJlciA9IChzaGFwZVNpemUgLyAxMDAgKiBoZWlnaHQgLyBudW1iZXJPZkJpbnMpIC8gMjtcbiAgICAvL1xuICAgIC8vICAgIHZhciB0ZXh0TGFiZWxGdW5jdGlvbjpGdW5jdGlvbiA9IHRoaXMuYmlubmVkQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMuZGVyaXZlU3RyaW5nRnJvbU51bWJlci5iaW5kKHRoaXMpICAgICAgICAgICAgXCIpO1xuICAgIC8vXG4gICAgLy8gICAgZm9yKHZhciBpID0gMDsgaSA8IG51bWJlck9mQmluczsgaSsrKSB7XG4gICAgLy8gICAgICAgIHN3aXRjaChzaGFwZVR5cGUpIHtcbiAgICAvLyAgICAgICAgICAgIGNhc2UgU0hBUEVfVFlQRV9DSVJDTEUgOlxuICAgIC8vICAgICAgICAgICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcImNpcmNsZVwiKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY3hcIiwgMjUpXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjeVwiLCB5TWFwKGkgKyAxKSlcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgcilcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwiI1wiICsgU3RhbmRhcmRMaWIuZGVjaW1hbFRvSGV4KFN0YW5kYXJkTGliLmludGVycG9sYXRlQ29sb3IoU3RhbmRhcmRMaWIubm9ybWFsaXplKGksIDAsIG51bWJlck9mQmlucyAtIDEpLCByYW1wKSkpXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIFwiYmxhY2tcIilcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJzdHJva2Utb3BhY2l0eVwiLCAwLjUpO1xuICAgIC8vICAgICAgICAgICAgICAgIHRoaXMuc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgNTApXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIHlNYXAoaSArIDEpICsgciAvIDIpXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQodGV4dExhYmVsRnVuY3Rpb24oaSkpXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJmb250LWZhbWlseVwiLCBcInNhbnMtc2VyaWZcIilcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImZvbnQtc2l6ZVwiLCBcIjEycHhcIik7XG4gICAgLy8gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgLy8gICAgICAgICAgICBjYXNlIFNIQVBFX1RZUEVfU1FVQVJFIDpcbiAgICAvLyAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvL1xuICAgIC8vICAgICAgICAgICAgY2FzZSBTSEFQRV9UWVBFX0xJTkUgOlxuICAgIC8vICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vICAgICAgICB9XG4gICAgLy8gICAgfVxuICAgIC8vfVxuXG4gICAgc2VsZWN0aW9uS2V5c0NoYW5nZWQoKSB7XG5cbiAgICB9XG5cbiAgICB2aXN1YWxpemF0aW9uQ2hhbmdlZCgpIHtcblxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5udW1iZXJPZkJpbnMgPSB0aGlzLmJpbm5lZENvbHVtblBhdGguZ2V0VmFsdWUoXCJ0aGlzLm51bWJlck9mQmluc1wiKTtcbiAgICAgICAgaWYodGhpcy5udW1iZXJPZkJpbnMpIHtcbiAgICAgICAgICAgIC8vQmlubmVkIHBsb3QgY2FzZVxuICAgICAgICAgICAgdmFyIHdpZHRoOm51bWJlciA9IHRoaXMucHJvcHMud2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0Om51bWJlciA9IHRoaXMucHJvcHMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHNoYXBlU2l6ZTpudW1iZXIgPSB0aGlzLnBsb3R0ZXJQYXRoLmdldFN0YXRlKFwic2hhcGVTaXplXCIpO1xuICAgICAgICAgICAgdmFyIHNoYXBlVHlwZTpzdHJpbmcgPSB0aGlzLnBsb3R0ZXJQYXRoLmdldFN0YXRlKFwic2hhcGVUeXBlXCIpO1xuICAgICAgICAgICAgdmFyIHJhbXA6YW55W10gPSB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGguZ2V0U3RhdGUoXCJyYW1wXCIpO1xuICAgICAgICAgICAgdmFyIHlTY2FsZTpGdW5jdGlvbiA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbMCwgdGhpcy5udW1iZXJPZkJpbnMgKyAxXSkucmFuZ2UoWzAsIGhlaWdodF0pO1xuICAgICAgICAgICAgdmFyIHlNYXA6RnVuY3Rpb24gPSAoZDpudW1iZXIpOm51bWJlciA9PiB7IHJldHVybiB5U2NhbGUoZCk7IH07XG5cbiAgICAgICAgICAgIHNoYXBlU2l6ZSA9IF8ubWF4KFsxLCBfLm1pbihbc2hhcGVTaXplLCBoZWlnaHQgLyB0aGlzLm51bWJlck9mQmluc10pXSk7XG4gICAgICAgICAgICB2YXIgcjpudW1iZXIgPSAoc2hhcGVTaXplIC8gMTAwICogaGVpZ2h0IC8gdGhpcy5udW1iZXJPZkJpbnMpIC8gMjtcbiAgICAgICAgICAgIHZhciB0ZXh0TGFiZWxGdW5jdGlvbjpGdW5jdGlvbiA9IHRoaXMuYmlubmVkQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMuZGVyaXZlU3RyaW5nRnJvbU51bWJlci5iaW5kKHRoaXMpICAgICAgICAgICAgXCIpO1xuXG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50czpKU1guRWxlbWVudFtdID0gW107XG4gICAgICAgICAgICBmb3IodmFyIGk6bnVtYmVyID0gMDsgaTx0aGlzLm51bWJlck9mQmluczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHNoYXBlVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQVBFX1RZUEVfQ0lSQ0xFIDpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPHVpLkhCb3gga2V5PXtpfSBzdHlsZT17e3dpZHRoOlwiMTAwJVwiLGZsZXg6MS4wfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1aS5IQm94IHN0eWxlPXt7d2lkdGg6XCIxMDAlXCIsIGZsZXg6MC4yLCBwb3NpdGlvbjpcInJlbGF0aXZlXCIsIHBhZGRpbmc6XCIwcHggMHB4IDBweCAwcHhcIiwgbWluV2lkdGg6XCIxMHB4XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgc3R5bGU9e3twb3NpdGlvbjpcImFic29sdXRlXCJ9fSB2aWV3Qm94PVwiMCAwIDEwMCAxMDBcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+PGNpcmNsZSBjeD1cIjUwJVwiIGN5PVwiNTAlXCIgcj1cIjQ1JVwiIHN0eWxlPXt7ZmlsbDpcIiNcIiArIFN0YW5kYXJkTGliLmRlY2ltYWxUb0hleChTdGFuZGFyZExpYi5pbnRlcnBvbGF0ZUNvbG9yKFN0YW5kYXJkTGliLm5vcm1hbGl6ZShpLCAwLCB0aGlzLm51bWJlck9mQmlucyAtIDEpLCByYW1wKSksIHN0cm9rZTpcImJsYWNrXCIsIHN0cm9rZU9wYWNpdHk6MC41fX0+PC9jaXJjbGU+PC9zdmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVpLkhCb3ggc3R5bGU9e3t3aWR0aDpcIjEwMCVcIiwgZmxleDowLjh9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7dGV4dEFsaWduOlwibGVmdFwiLCB2ZXJ0aWNhbEFsaWduOlwibWlkZGxlXCIsIG92ZXJmbG93OlwiaGlkZGVuXCIsIHdoaXRlU3BhY2U6XCJub3dyYXBcIiwgdGV4dE92ZXJmbG93OlwiZWxsaXBzaXNcIn19Pnt0ZXh0TGFiZWxGdW5jdGlvbihpKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VpLkhCb3g+KVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU0hBUEVfVFlQRV9TUVVBUkUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFQRV9UWVBFX0xJTkUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gKDxkaXYgc3R5bGU9e3t3aWR0aDpcIjEwMCVcIiwgaGVpZ2h0OlwiMTAwJVwifX0+XG4gICAgICAgICAgICAgICAgPHVpLlZCb3ggc3R5bGU9e3toZWlnaHQ6XCIxMDAlXCIsZmxleDogMS4wfX0+XG4gICAgICAgICAgICAgICAgICAgIDx1aS5IQm94IHN0eWxlPXt7d2lkdGg6XCIxMDAlXCIsIGZsZXg6IDAuMX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+PHRleHQgeT17eU1hcCgwLjUpfSB4PXsxMH0gZm9udEZhbWlseT1cInNhbnMtc2VyaWZcIiBmb250U2l6ZT1cIjEycHhcIj57dGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKX08L3RleHQ+PC9zdmc+XG4gICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD5cbiAgICAgICAgICAgICAgICAgICAgPHVpLkhCb3ggc3R5bGU9e3t3aWR0aDpcIjEwMCVcIiwgZmxleDogMC45fX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWkuVkJveCBzdHlsZT17e2ZsZXg6IDEuMH19PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgPC91aS5WQm94PlxuICAgICAgICAgICAgICAgICAgICA8L3VpLkhCb3g+XG4gICAgICAgICAgICAgICAgPC91aS5WQm94PlxuICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgLy9Db250aW51b3VzIHBsb3QgY2FzZVxuICAgICAgICAgICAgcmV0dXJuICg8c3ZnPjwvc3ZnPik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVDM0NvbG9yTGVnZW5kO1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OkNvbG9yQmluTGVnZW5kVG9vbFwiLCBXZWF2ZUMzQ29sb3JMZWdlbmQpOyIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvYzMvYzMuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZDMvZDMuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvbG9kYXNoL2xvZGFzaC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy93ZWF2ZS9XZWF2ZVBhdGguZC50c1wiLz5cblxuXG5pbXBvcnQgQWJzdHJhY3RXZWF2ZVRvb2wgZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7cmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb259IGZyb20gXCIuLi9XZWF2ZVRvb2xcIjtcbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBGb3JtYXRVdGlscyBmcm9tIFwiLi4vdXRpbHMvRm9ybWF0VXRpbHNcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vdXRpbHMvU3RhbmRhcmRMaWJcIlxuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7SUFic3RyYWN0V2VhdmVUb29sUGF0aHN9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0VsZW1lbnRTaXplfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtDaGFydENvbmZpZ3VyYXRpb24sIENoYXJ0QVBJLCBnZW5lcmF0ZX0gZnJvbSBcImMzXCI7XG5pbXBvcnQge01vdXNlRXZlbnR9IGZyb20gXCJyZWFjdFwiO1xuXG5pbnRlcmZhY2UgSUhpc3RvZ3JhbVBhdGhzIGV4dGVuZHMgSUFic3RyYWN0V2VhdmVUb29sUGF0aHMge1xuICAgIHBsb3R0ZXI6IFdlYXZlUGF0aDtcbiAgICBiaW5uZWRDb2x1bW46IFdlYXZlUGF0aDtcbiAgICBjb2x1bW5Ub0FnZ3JlZ2F0ZTogV2VhdmVQYXRoO1xuICAgIGFnZ3JlZ2F0aW9uTWV0aG9kOiBXZWF2ZVBhdGg7XG4gICAgZmlsbFN0eWxlOiBXZWF2ZVBhdGg7XG4gICAgbGluZVN0eWxlOiBXZWF2ZVBhdGg7XG4gICAgeEF4aXM6IFdlYXZlUGF0aDtcbiAgICB5QXhpczogV2VhdmVQYXRoO1xuICAgIGZpbHRlcmVkS2V5U2V0OiBXZWF2ZVBhdGg7XG4gICAgc2VsZWN0aW9uS2V5U2V0OiBXZWF2ZVBhdGg7XG4gICAgcHJvYmVLZXlTZXQ6IFdlYXZlUGF0aDtcbn1cblxuY2xhc3MgV2VhdmVDM0hpc3RvZ3JhbSBleHRlbmRzIEFic3RyYWN0V2VhdmVUb29sIHtcbiAgICBwcml2YXRlIGJ1c3k6Ym9vbGVhbjtcbiAgICBwcml2YXRlIGlkVG9SZWNvcmQ6e1tpZDpzdHJpbmddOiBSZWNvcmR9O1xuICAgIHByaXZhdGUga2V5VG9JbmRleDp7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICAgIHByaXZhdGUgaW5kZXhUb0tleTp7W2luZGV4Om51bWJlcl06IHN0cmluZ307XG4gICAgcHJpdmF0ZSBzdHJpbmdSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgbnVtZXJpY1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSBoZWlnaHRDb2x1bW5OYW1lczpzdHJpbmdbXTtcbiAgICBwcml2YXRlIGJpbm5lZENvbHVtbkRhdGFUeXBlOnN0cmluZztcbiAgICBwcml2YXRlIG51bWJlck9mQmluczpudW1iZXI7XG4gICAgcHJpdmF0ZSBoaXN0RGF0YTp7fVtdO1xuICAgIHByaXZhdGUgYzNDb25maWc6Q2hhcnRDb25maWd1cmF0aW9uO1xuICAgIHByaXZhdGUgY2hhcnQ6Q2hhcnRBUEk7XG5cbiAgICBwcm90ZWN0ZWQgcGF0aHM6SUhpc3RvZ3JhbVBhdGhzO1xuXG4gICAgcHJpdmF0ZSBrZXlEb3duOmJvb2xlYW47XG4gICAgcHJpdmF0ZSBmbGFnOmJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlkVG9SZWNvcmQgPSB7fTtcbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuXG4gICAgICAgIHRoaXMuYzNDb25maWcgPSB7XG4gICAgICAgICAgICAvL3NpemU6IHRoaXMuZ2V0RWxlbWVudFNpemUoKSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDIwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMjAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDMwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJhclwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiAoY29sb3I6c3RyaW5nLCBkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY0NvbG9yOm51bWJlciA9IHRoaXMucGF0aHMuZmlsbFN0eWxlLnB1c2goXCJjb2xvclwiKS5wdXNoKFwiaW50ZXJuYWxEeW5hbWljQ29sdW1uXCIsIG51bGwpLmdldFZhbHVlKFwidGhpcy5nZXRDb2xvckZyb21EYXRhVmFsdWUuYmluZCh0aGlzKVwiKShkLmluZGV4KS50b1N0cmluZygxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIjXCIgKyBTdGFuZGFyZExpYi5kZWNpbWFsVG9IZXgoZGVjQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNDMENERDFcIjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5rZXlEb3duICYmIGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJZHM6c3RyaW5nW10gPSB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0S2V5c0Zyb21CaW5JbmRleC5iaW5kKHRoaXMpXCIpKGQuaW5kZXgpLm1hcCggKHFLZXk6e30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b29sUGF0aC5xa2V5VG9TdHJpbmcocUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKHNlbGVjdGVkSWRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25zZWxlY3RlZDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJZHM6c3RyaW5nW10gPSB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0S2V5c0Zyb21CaW5JbmRleC5iaW5kKHRoaXMpXCIpKGQuaW5kZXgpLm1hcCggKHFLZXk6e30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b29sUGF0aC5xa2V5VG9TdHJpbmcocUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5hZGRLZXlzKHNlbGVjdGVkSWRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb251bnNlbGVjdGVkOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1blNlbGVjdGVkSWRzOnN0cmluZ1tdID0gdGhpcy5wYXRocy5iaW5uZWRDb2x1bW4uZ2V0VmFsdWUoXCJ0aGlzLmdldEtleXNGcm9tQmluSW5kZXguYmluZCh0aGlzKVwiKShkLmluZGV4KS5tYXAoIChxS2V5Ont9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbFBhdGgucWtleVRvU3RyaW5nKHFLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQucmVtb3ZlS2V5cyh1blNlbGVjdGVkSWRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25tb3VzZW92ZXI6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkSWRzOnN0cmluZ1tdID0gdGhpcy5wYXRocy5iaW5uZWRDb2x1bW4uZ2V0VmFsdWUoXCJ0aGlzLmdldEtleXNGcm9tQmluSW5kZXguYmluZCh0aGlzKVwiKShkLmluZGV4KS5tYXAoIChxS2V5Ont9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbFBhdGgucWtleVRvU3RyaW5nKHFLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKHNlbGVjdGVkSWRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25tb3VzZW91dDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiaW5kdG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXhpczoge1xuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjYXRlZ29yeVwiLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpbGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChudW06bnVtYmVyKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZGVyaXZlU3RyaW5nRnJvbU51bWJlci5iaW5kKHRoaXMpXCIpKG51bSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJvdXRlci1taWRkbGVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAobnVtOm51bWJlcik6c3RyaW5nID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKEZvcm1hdFV0aWxzLmRlZmF1bHROdW1iZXJGb3JtYXR0aW5nKG51bSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByb3RhdGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiYXI6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDoge1xuICAgICAgICAgICAgICAgICAgICByYXRpbzogMC45NVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnJlbmRlcmVkOiB0aGlzLl91cGRhdGVTdHlsZS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX3NlbGVjdGlvbktleXNDaGFuZ2VkICgpIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5czpzdHJpbmdbXSA9IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZFJlY29yZHM6UmVjb3JkW10gPSBfLmZpbHRlcih0aGlzLm51bWVyaWNSZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQ6UmVjb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5pbmNsdWRlcyhzZWxlY3RlZEtleXMsIHJlY29yZFtcImlkXCJdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzZWxlY3RlZEJpbkluZGljZXM6bnVtYmVyW10gPSBfLnBsdWNrKF8udW5pcShzZWxlY3RlZFJlY29yZHMsICdiaW5uZWRDb2x1bW4nKSwgJ2Jpbm5lZENvbHVtbicpO1xuICAgICAgICB2YXIgYmluSW5kaWNlczpudW1iZXJbXSA9IF8ucGx1Y2soXy51bmlxKHRoaXMubnVtZXJpY1JlY29yZHMsICdiaW5uZWRDb2x1bW4nKSwgJ2Jpbm5lZENvbHVtbicpO1xuICAgICAgICB2YXIgdW5zZWxlY3RlZEJpbkluZGljZXM6bnVtYmVyW10gPSBfLmRpZmZlcmVuY2UoYmluSW5kaWNlcyxzZWxlY3RlZEJpbkluZGljZXMpO1xuXG4gICAgICAgIGlmKHNlbGVjdGVkQmluSW5kaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUodW5zZWxlY3RlZEJpbkluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMC4zfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHNlbGVjdGVkQmluSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKGJpbkluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnNlbGVjdCh0aGlzLmhlaWdodENvbHVtbk5hbWVzLCBbXSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJvYmVkS2V5c0NoYW5nZWQgKCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWRLZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRSZWNvcmRzOlJlY29yZFtdID0gXy5maWx0ZXIodGhpcy5udW1lcmljUmVjb3JkcywgZnVuY3Rpb24ocmVjb3JkOlJlY29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIF8uaW5jbHVkZXMoc2VsZWN0ZWRLZXlzLCByZWNvcmRbXCJpZFwiXSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgc2VsZWN0ZWRCaW5JbmRpY2VzOm51bWJlcltdID0gXy5wbHVjayhfLnVuaXEoc2VsZWN0ZWRSZWNvcmRzLCAnYmlubmVkQ29sdW1uJyksICdiaW5uZWRDb2x1bW4nKTtcbiAgICAgICAgdmFyIGJpbkluZGljZXM6bnVtYmVyW10gPSBfLnBsdWNrKF8udW5pcSh0aGlzLm51bWVyaWNSZWNvcmRzLCAnYmlubmVkQ29sdW1uJyksICdiaW5uZWRDb2x1bW4nKTtcbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRCaW5JbmRpY2VzOm51bWJlcltdID0gXy5kaWZmZXJlbmNlKGJpbkluZGljZXMsc2VsZWN0ZWRCaW5JbmRpY2VzKTtcblxuICAgICAgICBpZihzZWxlY3RlZEJpbkluZGljZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRCaW5JbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDAuM30pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShzZWxlY3RlZEJpbkluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0aW9uS2V5c0NoYW5nZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQ6TW91c2VFdmVudCkge1xuICAgICAgICBpZighdGhpcy5mbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdG9nZ2xlS2V5KGV2ZW50OktleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYoKGV2ZW50LmtleUNvZGUgPT09IDE3KXx8KGV2ZW50LmtleUNvZGUgPT09IDkxKSB8fCAoZXZlbnQua2V5Q29kZSA9PT0gMjI0KSkge1xuICAgICAgICAgICAgdGhpcy5rZXlEb3duID0gIXRoaXMua2V5RG93bjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJvdGF0ZUF4ZXMoKSB7XG4gICAgICAgIC8vdGhpcy5jM0NvbmZpZy5heGlzLnJvdGF0ZWQgPSB0cnVlO1xuICAgICAgICAvL3RoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBfYXhpc0NoYW5nZWQgKCkge1xuICAgICAgICBpZighdGhpcy5jaGFydClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBpZih0aGlzLmJ1c3kpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5jaGFydC5heGlzLmxhYmVscyh7XG4gICAgICAgICAgICB4OiB0aGlzLnBhdGhzLnhBeGlzLnB1c2goXCJvdmVycmlkZUF4aXNOYW1lXCIpLmdldFN0YXRlKCkgfHwgdGhpcy5wYXRocy5iaW5uZWRDb2x1bW4uZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpLFxuICAgICAgICAgICAgeTogZnVuY3Rpb24oKTpzdHJpbmcge1xuICAgICAgICAgICAgICAgIHZhciBvdmVycmlkZUF4aXNOYW1lID0gdGhpcy5wYXRocy55QXhpcy5wdXNoKFwib3ZlcnJpZGVBeGlzTmFtZVwiKS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmKG92ZXJyaWRlQXhpc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlQXhpc05hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYXRocy5jb2x1bW5Ub0FnZ3JlZ2F0ZS5nZXRTdGF0ZSgpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRoaXMucGF0aHMuYWdncmVnYXRpb25NZXRob2QuZ2V0U3RhdGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb3VudFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJOdW1iZXIgb2YgcmVjb3Jkc1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdW1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiU3VtIG9mIFwiICsgdGhpcy5wYXRocy5jb2x1bW5Ub0FnZ3JlZ2F0ZS5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1lYW5cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTWVhbiBvZiBcIiArIHRoaXMucGF0aHMuY29sdW1uVG9BZ2dyZWdhdGUuZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiTnVtYmVyIG9mIHJlY29yZHNcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF91cGRhdGVTdHlsZSgpIHtcblxuICAgIH1cblxuICAgIF9kYXRhQ2hhbmdlZCgpIHtcblxuICAgICAgICBpZighdGhpcy5jaGFydClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYodGhpcy5idXN5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbnVtZXJpY01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgYmlubmVkQ29sdW1uOiB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbixcbiAgICAgICAgICAgIGNvbHVtblRvQWdncmVnYXRlOiB0aGlzLnBhdGhzLmNvbHVtblRvQWdncmVnYXRlXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN0cmluZ01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgYmlubmVkQ29sdW1uOiB0aGlzLnBhdGhzLmJpbm5lZENvbHVtblxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYmlubmVkQ29sdW1uRGF0YVR5cGUgPSB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ2RhdGFUeXBlJylcIik7XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMobnVtZXJpY01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcIm51bWJlclwifSk7XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMoc3RyaW5nTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwic3RyaW5nXCJ9KTtcblxuICAgICAgICB0aGlzLmlkVG9SZWNvcmQgPSB7fTtcbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuXG4gICAgICAgIHRoaXMubnVtZXJpY1JlY29yZHMuZm9yRWFjaCgocmVjb3JkOlJlY29yZCwgaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlkVG9SZWNvcmRbcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nXSA9IHJlY29yZDtcbiAgICAgICAgICAgIHRoaXMua2V5VG9JbmRleFtyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmddID0gaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmluZGV4VG9LZXlbaW5kZXhdID0gcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm51bWJlck9mQmlucyA9IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLmdldFZhbHVlKFwidGhpcy5udW1iZXJPZkJpbnNcIik7XG5cbiAgICAgICAgdGhpcy5oaXN0RGF0YSA9IFtdO1xuXG4gICAgICAgIC8vIHRoaXMuX2NvbHVtblRvQWdncmVnYXRlUGF0aC5nZXRWYWx1ZShcInRoaXMuZ2V0SW50ZXJuYWxDb2x1bW4oKVwiKTtcbiAgICAgICAgdmFyIGNvbHVtblRvQWdncmVnYXRlTmFtZUlzRGVmaW5lZDpib29sZWFuID0gdGhpcy5wYXRocy5jb2x1bW5Ub0FnZ3JlZ2F0ZS5nZXRTdGF0ZSgpLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgZm9yKGxldCBpQmluOm51bWJlciA9IDA7IGlCaW4gPCB0aGlzLm51bWJlck9mQmluczsgaUJpbisrKSB7XG5cbiAgICAgICAgICAgIGxldCByZWNvcmRzSW5CaW46UmVjb3JkW10gPSBfLmZpbHRlcih0aGlzLm51bWVyaWNSZWNvcmRzLCB7IGJpbm5lZENvbHVtbjogaUJpbiB9KTtcblxuICAgICAgICAgICAgaWYocmVjb3Jkc0luQmluKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iajphbnkgPSB7aGVpZ2h0OjB9O1xuICAgICAgICAgICAgICAgIGlmKGNvbHVtblRvQWdncmVnYXRlTmFtZUlzRGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBvYmouaGVpZ2h0ID0gdGhpcy5nZXRBZ2dyZWdhdGVWYWx1ZShyZWNvcmRzSW5CaW4sIFwiY29sdW1uVG9BZ2dyZWdhdGVcIiwgdGhpcy5wYXRocy5hZ2dyZWdhdGlvbk1ldGhvZC5nZXRTdGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0RGF0YS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmhlaWdodCA9IHRoaXMuZ2V0QWdncmVnYXRlVmFsdWUocmVjb3Jkc0luQmluLCBcImJpbm5lZENvbHVtblwiLCBcImNvdW50XCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3REYXRhLnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5cyA9IHsgdmFsdWU6IFtcImhlaWdodFwiXSB9O1xuICAgICAgICB0aGlzLl9heGlzQ2hhbmdlZCgpO1xuICAgICAgICB0aGlzLmJ1c3kgPSB0cnVlO1xuICAgICAgICB0aGlzLmNoYXJ0LmxvYWQoe2pzb246IHRoaXMuaGlzdERhdGEsIGtleXMsIHVubG9hZDogdHJ1ZSwgZG9uZTogKCkgPT4geyB0aGlzLmJ1c3kgPSBmYWxzZTsgfX0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QWdncmVnYXRlVmFsdWUocmVjb3JkczpSZWNvcmRbXSwgY29sdW1uVG9BZ2dyZWdhdGVOYW1lOnN0cmluZywgYWdncmVnYXRpb25NZXRob2Q6V2VhdmVQYXRoKTpudW1iZXIge1xuXG4gICAgICAgIHZhciBjb3VudDpudW1iZXIgPSAwO1xuICAgICAgICB2YXIgc3VtOm51bWJlciA9IDA7XG5cbiAgICAgICAgaWYoIUFycmF5LmlzQXJyYXkocmVjb3JkcykpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBzdW0gKz0gcmVjb3JkW2NvbHVtblRvQWdncmVnYXRlTmFtZV0gYXMgbnVtYmVyO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYWdncmVnYXRpb25NZXRob2QgPT09IFwibWVhblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VtIC8gY291bnQ7IC8vIGNvbnZlcnQgc3VtIHRvIG1lYW5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZ2dyZWdhdGlvbk1ldGhvZCA9PT0gXCJjb3VudFwiKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBjb3VudDsgLy8gdXNlIGNvdW50IG9mIGZpbml0ZSB2YWx1ZXNcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHN1bVxuICAgICAgICByZXR1cm4gc3VtO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkVXBkYXRlKCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJjb21wb25lbnQgZGlkIHVwZGF0ZVwiKTtcbiAgICAgICAgLy92YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgbmV3RWxlbWVudFNpemUgPSB0aGlzLmdldEVsZW1lbnRTaXplKCk7XG4gICAgICAgIGlmKCFfLmlzRXF1YWwobmV3RWxlbWVudFNpemUsIHRoaXMuZWxlbWVudFNpemUpKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnJlc2l6ZShuZXdFbGVtZW50U2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRTaXplID0gbmV3RWxlbWVudFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgLy92YXIgZW5kID0gRGF0ZS5ub3coKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlbmQgLSBzdGFydCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIC8qIENsZWFudXAgY2FsbGJhY2tzICovXG4gICAgICAgIC8vdGhpcy50ZWFyZG93bkNhbGxiYWNrcygpO1xuICAgICAgICBzdXBlci5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgICAgICB0aGlzLmNoYXJ0LmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkTW91bnQoKTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICB2YXIgYXhpc0NoYW5nZWQ6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuX2F4aXNDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBkYXRhQ2hhbmdlZDpGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5fZGF0YUNoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbktleVNldENoYW5nZWQ6RnVuY3Rpb24gPSB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgcHJvYmVLZXlTZXRDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLl9wcm9iZWRLZXlzQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgcGxvdHRlclBhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwicGxvdFwiKTtcbiAgICAgICAgdmFyIG1hcHBpbmcgPSBbXG4gICAgICAgICAgICB7IG5hbWU6IFwicGxvdHRlclwiLCBwYXRoOiBwbG90dGVyUGF0aCwgY2FsbGJhY2tzOiBudWxsfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJiaW5uZWRDb2x1bW5cIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImJpbm5lZENvbHVtblwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImNvbHVtblRvQWdncmVnYXRlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJjb2x1bW5Ub0FnZ3JlZ2F0ZVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImFnZ3JlZ2F0aW9uTWV0aG9kXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJhZ2dyZWdhdGlvbk1ldGhvZFwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImZpbGxTdHlsZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZmlsbFN0eWxlXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwibGluZVN0eWxlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsaW5lU3R5bGVcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJ4QXhpc1wiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwieEF4aXNcIiksIGNhbGxiYWNrczogYXhpc0NoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJ5QXhpc1wiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwieUF4aXNcIiksIGNhbGxiYWNrczogYXhpc0NoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJmaWx0ZXJlZEtleVNldFwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWR9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNlbGVjdGlvbktleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQsIGNhbGxiYWNrczogc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwicHJvYmVLZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQsIGNhbGxiYWNrczogcHJvYmVLZXlTZXRDaGFuZ2VkfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhdGhzKG1hcHBpbmcpO1xuXG4gICAgICAgIHRoaXMuYzNDb25maWcuYmluZHRvID0gdGhpcy5lbGVtZW50O1xuXG4gICAgICAgIHRoaXMuY2hhcnQgPSBnZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdlYXZlQzNIaXN0b2dyYW07XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6SGlzdG9ncmFtVG9vbFwiLCBXZWF2ZUMzSGlzdG9ncmFtKTtcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2MzL2MzLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3dlYXZlL1dlYXZlUGF0aC5kLnRzXCIvPlxuXG5pbXBvcnQge0NoYXJ0QVBJLCBDaGFydENvbmZpZ3VyYXRpb24sIGdlbmVyYXRlfSBmcm9tIFwiYzNcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7SUFic3RyYWN0V2VhdmVUb29sUHJvcHMsIElBYnN0cmFjdFdlYXZlVG9vbFBhdGhzfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtFbGVtZW50U2l6ZX0gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL1dlYXZlVG9vbFwiO1xuXG5pbnRlcmZhY2UgSVBpZUNoYXJ0UGF0aHMgZXh0ZW5kcyBJQWJzdHJhY3RXZWF2ZVRvb2xQYXRocyB7XG4gICAgcGxvdHRlcjogV2VhdmVQYXRoO1xuICAgIGRhdGE6IFdlYXZlUGF0aDtcbiAgICBsYWJlbDogV2VhdmVQYXRoO1xuICAgIGZpbGxTdHlsZTpXZWF2ZVBhdGg7XG4gICAgbGluZVN0eWxlOldlYXZlUGF0aDtcbiAgICBpbm5lclJhZGl1czpXZWF2ZVBhdGg7XG4gICAgZmlsdGVyZWRLZXlTZXQ6V2VhdmVQYXRoO1xuICAgIHNlbGVjdGlvbktleVNldDpXZWF2ZVBhdGg7XG4gICAgcHJvYmVLZXlTZXQ6V2VhdmVQYXRoO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdmVDM1BpZUNoYXJ0IGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuXG4gICAgcHJpdmF0ZSBrZXlUb0luZGV4Ontba2V5OnN0cmluZ106IG51bWJlcn07XG4gICAgcHJpdmF0ZSBpbmRleFRvS2V5OntbaW5kZXg6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIGNoYXJ0OkNoYXJ0QVBJO1xuICAgIHByaXZhdGUgYzNDb25maWc6Q2hhcnRDb25maWd1cmF0aW9uO1xuICAgIHByaXZhdGUga2V5RG93bjpib29sZWFuO1xuICAgIHByb3RlY3RlZCBwYXRoczpJUGllQ2hhcnRQYXRocztcbiAgICBwcml2YXRlIGZsYWc6Ym9vbGVhbjtcbiAgICBwcml2YXRlIG51bWVyaWNSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgc3RyaW5nUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIGNvbG9yczp7W2tleTpzdHJpbmddIDogc3RyaW5nfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklBYnN0cmFjdFdlYXZlVG9vbFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNlbGVjdGlvbktleXNDaGFuZ2VkKCk6dm9pZCB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBrZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmdldEtleXMoKTtcbiAgICAgICAgaWYoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuZm9jdXMoa2V5cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHByb2JlZEtleXNDaGFuZ2VkKCk6dm9pZCB7XG4gICAgICAgIHZhciBrZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuZ2V0S2V5cygpO1xuXG4gICAgICAgIGlmKGtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LmZvY3VzKGtleXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25LZXlzQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTdHlsZSgpOnZvaWQge1xuXG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQ6UmVhY3QuTW91c2VFdmVudCk6dm9pZCB7XG4gICAgICAgIGlmKCF0aGlzLmZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKFtdKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRvZ2dsZUtleShldmVudDpLZXlib2FyZEV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoKGV2ZW50LmtleUNvZGUgPT09IDE3KXx8KGV2ZW50LmtleUNvZGUgPT09IDkxKSB8fCAoZXZlbnQua2V5Q29kZSA9PT0gMjI0KSkge1xuICAgICAgICAgICAgdGhpcy5rZXlEb3duID0gIXRoaXMua2V5RG93bjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGF0YUNoYW5nZWQoKTp2b2lkIHtcblxuICAgICAgICBpZighdGhpcy5jaGFydClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBsZXQgbnVtZXJpY01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgZGF0YTogdGhpcy5wYXRocy5kYXRhXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHN0cmluZ01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgZmlsbDoge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLnBhdGhzLmZpbGxTdHlsZS5wdXNoKFwiY29sb3JcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5lOiB7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5wYXRocy5sYWJlbFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMobnVtZXJpY01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcIm51bWJlclwifSk7XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMoc3RyaW5nTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwic3RyaW5nXCJ9KTtcblxuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3Jkcy5mb3JFYWNoKCAocmVjb3JkOlJlY29yZCwgaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluZGV4VG9LZXlbaW5kZXhdID0gcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgdGhpcy5rZXlUb0luZGV4W3JlY29yZFtcImlkXCJdIGFzIHN0cmluZ10gPSBpbmRleDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNvbHVtbnM6W3N0cmluZywgbnVtYmVyXVtdID0gW107XG5cbiAgICAgICAgY29sdW1ucyA9IHRoaXMubnVtZXJpY1JlY29yZHMubWFwKGZ1bmN0aW9uKHJlY29yZDpSZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wQXJyOltzdHJpbmcsIG51bWJlcl0gPSBbcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nLCByZWNvcmRbXCJkYXRhXCJdIGFzIG51bWJlcl07XG4gICAgICAgICAgICByZXR1cm4gdGVtcEFycjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNoYXJ0VHlwZTpzdHJpbmcgPSBcInBpZVwiO1xuXG4gICAgICAgIGlmKHRoaXMucGF0aHMucGxvdHRlci5nZXRTdGF0ZShcImlubmVyUmFkaXVzXCIpID4gMCkge1xuICAgICAgICAgICAgY2hhcnRUeXBlID0gXCJkb251dFwiXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbG9ycyA9IHt9XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6UmVjb3JkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yc1tyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmddID0gKHJlY29yZFtcImZpbGxcIl0gYXMgUmVjb3JkKVtcImNvbG9yXCJdIGFzIHN0cmluZyB8fCBcIiNDMENERDFcIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jaGFydC5sb2FkKHtcbiAgICAgICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsXG4gICAgICAgICAgICB0eXBlOiBjaGFydFR5cGUsXG4gICAgICAgICAgICBjb2xvcnM6IHRoaXMuY29sb3JzLFxuICAgICAgICAgICAgdW5sb2FkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpOnZvaWQge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRVcGRhdGUoKTtcblxuICAgICAgICB2YXIgbmV3RWxlbWVudFNpemU6RWxlbWVudFNpemUgPSB0aGlzLmdldEVsZW1lbnRTaXplKCk7XG4gICAgICAgIGlmKCFfLmlzRXF1YWwobmV3RWxlbWVudFNpemUsIHRoaXMuZWxlbWVudFNpemUpKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnJlc2l6ZShuZXdFbGVtZW50U2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRTaXplID0gbmV3RWxlbWVudFNpemU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpOnZvaWQge1xuICAgICAgICAvKiBDbGVhbnVwIGNhbGxiYWNrcyAqL1xuICAgICAgICAvL3RoaXMudGVhcmRvd25DYWxsYmFja3MoKTtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICAgICAgdGhpcy5jaGFydC5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIHZhciBkYXRhQ2hhbmdlZDpGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5kYXRhQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZDpGdW5jdGlvbiA9IHRoaXMuc2VsZWN0aW9uS2V5c0NoYW5nZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHByb2JlS2V5U2V0Q2hhbmdlZDpGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5wcm9iZWRLZXlzQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgcGxvdHRlclBhdGg6V2VhdmVQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInBsb3RcIik7XG4gICAgICAgIHZhciBtYW5pZmVzdCA9IFtcbiAgICAgICAgICB7IG5hbWU6IFwicGxvdHRlclwiLCBwYXRoOiBwbG90dGVyUGF0aCwgY2FsbGJhY2tzOiBudWxsfSxcbiAgICAgICAgICB7IG5hbWU6IFwiZGF0YVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZGF0YVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgIHsgbmFtZTogXCJsYWJlbFwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwibGFiZWxcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiZmlsbFN0eWxlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWxsXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImxpbmVTdHlsZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwibGluZVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgIHsgbmFtZTogXCJpbm5lclJhZGl1c1wiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiaW5uZXJSYWRpdXNcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiZmlsdGVyZWRLZXlTZXRcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImZpbHRlcmVkS2V5U2V0XCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcInNlbGVjdGlvbktleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQsIGNhbGxiYWNrczogc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZH0sXG4gICAgICAgICAgeyBuYW1lOiBcInByb2JlS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LCBjYWxsYmFja3M6IHByb2JlS2V5U2V0Q2hhbmdlZH1cbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVQYXRocyhtYW5pZmVzdCk7XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZyA9IHtcbiAgICAgICAgICAgIC8vc2l6ZTogdGhpcy5nZXRFbGVtZW50U2l6ZSgpLFxuICAgICAgICAgICAgYmluZHRvOiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICBwYWRkaW5nOiB7XG4gICAgICAgICAgICAgIHRvcDogMjAsXG4gICAgICAgICAgICAgIGJvdHRvbTogMjAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAzMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgIG11bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgIHR5cGU6IFwicGllXCIsXG4gICAgICAgICAgICAgICBvbmNsaWNrOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgaWYoIXRoaXMua2V5RG93biAmJiBkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmFkZEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnVuc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJkYXRhXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkIGhhcyBhIGRpZmZlcmVudCBzdHJ1Y3R1cmUgdGhhbiBcIm9uc2VsZWN0ZWRcIiBhcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3ZlcjogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFt0aGlzLmluZGV4VG9LZXlbZC5pbmRleF1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25tb3VzZW91dDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwaWU6IHtcbiAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICh2YWx1ZTpudW1iZXIsIHJhdGlvOm51bWJlciwgaWQ6c3RyaW5nKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdHJpbmdSZWNvcmRzICYmIHRoaXMuc3RyaW5nUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjb3JkOlJlY29yZCA9IHRoaXMuc3RyaW5nUmVjb3Jkc1t0aGlzLmtleVRvSW5kZXhbaWRdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZWNvcmQgJiYgcmVjb3JkW1wibGFiZWxcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZFtcImxhYmVsXCJdIGFzIHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZG9udXQ6IHtcbiAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICh2YWx1ZTpudW1iZXIsIHJhdGlvOm51bWJlciwgaWQ6c3RyaW5nKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdHJpbmdSZWNvcmRzICYmIHRoaXMuc3RyaW5nUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjb3JkID0gdGhpcy5zdHJpbmdSZWNvcmRzW3RoaXMua2V5VG9JbmRleFtpZF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlY29yZCAmJiByZWNvcmRbXCJsYWJlbFwiXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkW1wibGFiZWxcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ucmVuZGVyZWQ6IHRoaXMudXBkYXRlU3R5bGUuYmluZCh0aGlzKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYXJ0ID0gZ2VuZXJhdGUodGhpcy5jM0NvbmZpZyk7XG4gICAgfVxufVxuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OlBpZUNoYXJ0VG9vbFwiLCBXZWF2ZUMzUGllQ2hhcnQpO1xuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9jMy9jMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3dlYXZlL1dlYXZlUGF0aC5kLnRzXCIvPlxuXG5cbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL1dlYXZlVG9vbFwiO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCBGb3JtYXRVdGlscyBmcm9tIFwiLi4vdXRpbHMvRm9ybWF0VXRpbHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7SUFic3RyYWN0V2VhdmVUb29sUGF0aHN9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0VsZW1lbnRTaXplfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtDaGFydENvbmZpZ3VyYXRpb24sIENoYXJ0QVBJLCBnZW5lcmF0ZX0gZnJvbSBcImMzXCI7XG5pbXBvcnQge01vdXNlRXZlbnR9IGZyb20gXCJyZWFjdFwiO1xuXG5pbnRlcmZhY2UgSUNvbHVtblN0YXRzIHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIElTY2F0dGVycGxvdFBhdGhzIGV4dGVuZHMgSUFic3RyYWN0V2VhdmVUb29sUGF0aHMge1xuICAgIHBsb3R0ZXI6IFdlYXZlUGF0aDtcbiAgICBkYXRhWDogV2VhdmVQYXRoO1xuICAgIGRhdGFZOiBXZWF2ZVBhdGg7XG4gICAgc2l6ZUJ5OiBXZWF2ZVBhdGg7XG4gICAgZmlsbDogV2VhdmVQYXRoO1xuICAgIGxpbmU6IFdlYXZlUGF0aDtcbiAgICB4QXhpczogV2VhdmVQYXRoO1xuICAgIHlBeGlzOiBXZWF2ZVBhdGg7XG4gICAgZmlsdGVyZWRLZXlTZXQ6IFdlYXZlUGF0aDtcbiAgICBzZWxlY3Rpb25LZXlTZXQ6IFdlYXZlUGF0aDtcbiAgICBwcm9iZUtleVNldDogV2VhdmVQYXRoO1xufVxuXG4vKiBwcml2YXRlXG4gKiBAcGFyYW0gcmVjb3JkcyBhcnJheSBvciByZWNvcmRzXG4gKiBAcGFyYW0gYXR0cmlidXRlcyBhcnJheSBvZiBhdHRyaWJ1dGVzIHRvIGJlIG5vcm1hbGl6ZWRcbiAqL1xuY2xhc3MgV2VhdmVDM1NjYXR0ZXJQbG90IGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuXG4gICAgcHJpdmF0ZSBrZXlUb0luZGV4Ontba2V5OnN0cmluZ106IG51bWJlcn07XG4gICAgcHJpdmF0ZSBpbmRleFRvS2V5OntbaW5kZXg6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHhBeGlzVmFsdWVUb0xhYmVsOntbdmFsdWU6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHlBeGlzVmFsdWVUb0xhYmVsOntbdmFsdWU6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIGNoYXJ0OkNoYXJ0QVBJO1xuICAgIHByaXZhdGUgZGF0YVhUeXBlOnN0cmluZztcbiAgICBwcml2YXRlIGRhdGFZVHlwZTpzdHJpbmc7XG4gICAgcHJpdmF0ZSBudW1lcmljUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIHN0cmluZ1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSBub3JtYWxpemVkUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIHJlY29yZHM6UmVjb3JkW11bXTtcblxuICAgIHByb3RlY3RlZCBwYXRoczpJU2NhdHRlcnBsb3RQYXRocztcbiAgICBwcml2YXRlIHBsb3R0ZXJTdGF0ZTphbnk7XG4gICAgcHJpdmF0ZSBub3JtYWxpemVkUG9pbnRTaXplczpudW1iZXJbXTtcblxuICAgIHByaXZhdGUgZmxhZzpib29sZWFuO1xuICAgIHByaXZhdGUga2V5RG93bjpib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBjM0NvbmZpZzpDaGFydENvbmZpZ3VyYXRpb247XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMua2V5VG9JbmRleCA9IHt9O1xuICAgICAgICB0aGlzLmluZGV4VG9LZXkgPSB7fTtcbiAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbCA9IHt9O1xuICAgICAgICB0aGlzLnhBeGlzVmFsdWVUb0xhYmVsID0ge307XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVSZWNvcmRzIChyZWNvcmRzOlJlY29yZFtdLCBhdHRyaWJ1dGVzOnN0cmluZ1tdKTphbnlbXSB7XG5cbiAgICAgICAgLy8gdG8gYXZvaWQgY29tcHV0aW5nIHRoZSBzdGF0cyBhdCBlYWNoIGl0ZXJhdGlvbi5cbiAgICAgICAgdmFyIGNvbHVtblN0YXRzQ2FjaGU6e1thdHRyaWJ1dGU6c3RyaW5nXTpJQ29sdW1uU3RhdHN9ID0ge307XG4gICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhdHRyOnN0cmluZykge1xuICAgICAgICAgICAgY29sdW1uU3RhdHNDYWNoZVthdHRyXSA9IHtcbiAgICAgICAgICAgICAgICBtaW46IF8ubWluKF8ucGx1Y2socmVjb3JkcywgYXR0cikpLFxuICAgICAgICAgICAgICAgIG1heDogXy5tYXgoXy5wbHVjayhyZWNvcmRzLCBhdHRyKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZWNvcmRzLm1hcChmdW5jdGlvbihyZWNvcmQ6YW55KSB7XG5cbiAgICAgICAgICAgIHZhciBvYmo6YW55ID0ge307XG5cbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhdHRyOnN0cmluZykge1xuICAgICAgICAgICAgICAgIHZhciBtaW46bnVtYmVyID0gY29sdW1uU3RhdHNDYWNoZVthdHRyXS5taW47XG4gICAgICAgICAgICAgICAgdmFyIG1heDpudW1iZXIgPSBjb2x1bW5TdGF0c0NhY2hlW2F0dHJdLm1heDtcblxuICAgICAgICAgICAgICAgIGlmKCFtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZihtYXggLSBtaW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYocmVjb3JkW2F0dHJdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCAocmVjb3JkW2F0dHJdIC0gbWluKSAvIChtYXggLSBtaW4pKTtcbiAgICAgICAgICAgICAgICAgICAgb2JqW2F0dHJdID0gKHJlY29yZFthdHRyXSAtIG1pbikgLyAobWF4IC0gbWluKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBhbnkgb2YgdGhlIHZhbHVlIGFib3ZlIGlzIG51bGwgdGhlblxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBjYW4ndCBub3JtYWxpemVcbiAgICAgICAgICAgICAgICAgICAgb2JqW2F0dHJdID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidXN5Om51bWJlcjtcbiAgICBwcml2YXRlICBheGlzQ2hhbmdlZCgpOnZvaWQge1xuICAgICAgICBpZih0aGlzLmJ1c3kpIHtcbiAgICAgICAgICAgIHRoaXMuYnVzeSsrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGFydC5heGlzLmxhYmVscyh7XG4gICAgICAgICAgICB4OiB0aGlzLnBhdGhzLnhBeGlzLmdldFN0YXRlKFwib3ZlcnJpZGVBeGlzTmFtZVwiKSB8fCB0aGlzLnBhdGhzLmRhdGFYLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKSxcbiAgICAgICAgICAgIHk6IHRoaXMucGF0aHMueUF4aXMuZ2V0U3RhdGUoXCJvdmVycmlkZUF4aXNOYW1lXCIpIHx8IHRoaXMucGF0aHMuZGF0YVkuZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkYXRhQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYodGhpcy5idXN5KSB7XG4gICAgICAgICAgICB0aGlzLmJ1c3krKztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBudW1lcmljTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBwb2ludDoge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMucGF0aHMuZGF0YVgsXG4gICAgICAgICAgICAgICAgeTogdGhpcy5wYXRocy5kYXRhWVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNpemU6IHRoaXMucGF0aHMuc2l6ZUJ5XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IHN0cmluZ01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICAgICAgICB4OiB0aGlzLnBhdGhzLmRhdGFYLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMucGF0aHMuZGF0YVlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaWxsOiB7XG4gICAgICAgICAgICAgICAgLy9hbHBoYTogdGhpcy5fZmlsbFN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMucGF0aHMuZmlsbC5wdXNoKFwiY29sb3JcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5lOiB7XG4gICAgICAgICAgICAgICAgLy9hbHBoYTogdGhpcy5fbGluZVN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMucGF0aHMubGluZS5wdXNoKFwiY29sb3JcIilcbiAgICAgICAgICAgICAgICAvL2NhcHM6IHRoaXMuX2xpbmVTdHlsZVBhdGgucHVzaChcImNhcHNcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRhdGFYVHlwZSA9IHRoaXMucGF0aHMuZGF0YVguZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCdkYXRhVHlwZScpXCIpO1xuICAgICAgICB0aGlzLmRhdGFZVHlwZSA9IHRoaXMucGF0aHMuZGF0YVkuZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCdkYXRhVHlwZScpXCIpO1xuXG4gICAgICAgIHRoaXMubnVtZXJpY1JlY29yZHMgPSB0aGlzLnBhdGhzLnBsb3R0ZXIucmV0cmlldmVSZWNvcmRzKG51bWVyaWNNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJudW1iZXJcIn0pO1xuICAgICAgICB0aGlzLnN0cmluZ1JlY29yZHMgPSB0aGlzLnBhdGhzLnBsb3R0ZXIucmV0cmlldmVSZWNvcmRzKHN0cmluZ01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcInN0cmluZ1wifSk7XG5cbiAgICAgICAgdGhpcy5yZWNvcmRzID0gXy56aXAodGhpcy5udW1lcmljUmVjb3JkcywgdGhpcy5zdHJpbmdSZWNvcmRzKTtcbiAgICAgICAgdGhpcy5yZWNvcmRzID0gXy5zb3J0QnlPcmRlcih0aGlzLnJlY29yZHMsIFtcInNpemVcIiwgXCJpZFwiXSwgW1wiZGVzY1wiLCBcImFzY1wiXSk7XG5cbiAgICAgICAgaWYodGhpcy5yZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgIFt0aGlzLm51bWVyaWNSZWNvcmRzLCB0aGlzLnN0cmluZ1JlY29yZHNdID0gXy51bnppcCh0aGlzLnJlY29yZHMpO1xuXG4gICAgICAgIHRoaXMua2V5VG9JbmRleCA9IHt9O1xuICAgICAgICB0aGlzLmluZGV4VG9LZXkgPSB7fTtcbiAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbCA9IHt9O1xuICAgICAgICB0aGlzLnhBeGlzVmFsdWVUb0xhYmVsID0ge307XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6UmVjb3JkLCBpbmRleDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMua2V5VG9JbmRleFtyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmddID0gaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmluZGV4VG9LZXlbaW5kZXhdID0gcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN0cmluZ1JlY29yZHMuZm9yRWFjaCgocmVjb3JkOmFueSwgaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnhBeGlzVmFsdWVUb0xhYmVsWyh0aGlzLm51bWVyaWNSZWNvcmRzW2luZGV4XVtcInBvaW50XCJdIGFzIFJlY29yZClbXCJ4XCJdIGFzIG51bWJlcl0gPSAocmVjb3JkW1wicG9pbnRcIl0gYXMgUmVjb3JkKVtcInhcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFsodGhpcy5udW1lcmljUmVjb3Jkc1tpbmRleF1bXCJwb2ludFwiXSBhcyBSZWNvcmQpW1wieVwiXSBhcyBudW1iZXJdID0gKHJlY29yZFtcInBvaW50XCJdIGFzIFJlY29yZClbXCJ5XCJdIGFzIHN0cmluZztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5ub3JtYWxpemVkUmVjb3JkcyA9IHRoaXMubm9ybWFsaXplUmVjb3Jkcyh0aGlzLm51bWVyaWNSZWNvcmRzLCBbXCJzaXplXCJdKTtcbiAgICAgICAgdGhpcy5wbG90dGVyU3RhdGUgPSB0aGlzLnBhdGhzLnBsb3R0ZXIuZ2V0VW50eXBlZFN0YXRlID8gdGhpcy5wYXRocy5wbG90dGVyLmdldFVudHlwZWRTdGF0ZSgpIDogdGhpcy5wYXRocy5wbG90dGVyLmdldFN0YXRlKCk7XG4gICAgICAgIHRoaXMubm9ybWFsaXplZFBvaW50U2l6ZXMgPSB0aGlzLm5vcm1hbGl6ZWRSZWNvcmRzLm1hcCgobm9ybWFsaXplZFJlY29yZDpSZWNvcmQpID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMucGxvdHRlclN0YXRlICYmIHRoaXMucGxvdHRlclN0YXRlLnNpemVCeS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWluU2NyZWVuUmFkaXVzID0gdGhpcy5wbG90dGVyU3RhdGUubWluU2NyZWVuUmFkaXVzO1xuICAgICAgICAgICAgICAgIGxldCBtYXhTY3JlZW5SYWRpdXMgPSB0aGlzLnBsb3R0ZXJTdGF0ZS5tYXhTY3JlZW5SYWRpdXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChub3JtYWxpemVkUmVjb3JkICYmIG5vcm1hbGl6ZWRSZWNvcmRbXCJzaXplXCJdID9cbiAgICAgICAgICAgICAgICAgICAgbWluU2NyZWVuUmFkaXVzICsgbm9ybWFsaXplZFJlY29yZFtcInNpemVcIl0gYXMgbnVtYmVyICogKG1heFNjcmVlblJhZGl1cyAtIG1pblNjcmVlblJhZGl1cykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbG90dGVyU3RhdGUuZGVmYXVsdFNjcmVlblJhZGl1cykgfHwgMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5wbG90dGVyU3RhdGUuZGVmYXVsdFNjcmVlblJhZGl1cykgfHwgMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5heGlzQ2hhbmdlZCgpO1xuICAgICAgICB0aGlzLmJ1c3kgPSAxO1xuXG4gICAgICAgIHRoaXMuY2hhcnQubG9hZCh7ZGF0YTogXy5wbHVjayh0aGlzLm51bWVyaWNSZWNvcmRzLCBcInBvaW50XCIpLCB1bmxvYWQ6IHRydWUsIGRvbmU6ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1c3kgPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idXN5ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1c3kgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9fSk7XG4gICAgfVxuXG4gICAgX3NlbGVjdGlvbktleXNDaGFuZ2VkKCkge1xuICAgICAgICBpZighdGhpcy5jaGFydClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgc2VsZWN0ZWRLZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmdldEtleXMoKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkSW5kaWNlczpudW1iZXJbXSA9IHNlbGVjdGVkS2V5cy5tYXAoKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGtleXM6c3RyaW5nW10gPSBPYmplY3Qua2V5cyh0aGlzLmtleVRvSW5kZXgpO1xuICAgICAgICB2YXIgaW5kaWNlczpudW1iZXJbXSA9IGtleXMubWFwKChrZXk6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gXy5kaWZmZXJlbmNlKGluZGljZXMsIHNlbGVjdGVkSW5kaWNlcyk7XG4gICAgICAgIGlmKHNlbGVjdGVkSW5kaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUodW5zZWxlY3RlZEluZGljZXMsIFwiY2lyY2xlXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAwLjMsIFwic3Ryb2tlLW9wYWNpdHlcIjogMC4wfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHNlbGVjdGVkSW5kaWNlcywgXCJjaXJjbGVcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDEuMCwgXCJzdHJva2Utb3BhY2l0eVwiOiAxLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2VsZWN0KFtcInlcIl0sIHNlbGVjdGVkSW5kaWNlcywgdHJ1ZSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShpbmRpY2VzLCBcImNpcmNsZVwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5zZWxlY3QoW1wieVwiXSwgW10sIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Byb2JlZEtleXNDaGFuZ2VkKCkge1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBzZWxlY3RlZEtleXMubWFwKCAoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIga2V5czpzdHJpbmdbXSA9IE9iamVjdC5rZXlzKHRoaXMua2V5VG9JbmRleCk7XG4gICAgICAgIHZhciBpbmRpY2VzOm51bWJlcltdID0ga2V5cy5tYXAoKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gXy5kaWZmZXJlbmNlKGluZGljZXMsIHNlbGVjdGVkSW5kaWNlcyk7XG5cbiAgICAgICAgaWYoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkSW5kaWNlcywgXCJjaXJjbGVcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDAuMywgXCJzdHJva2Utb3BhY2l0eVwiOiAwLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRJbmRpY2VzLCBcImNpcmNsZVwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGlvbktleXNDaGFuZ2VkKClcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBoYW5kbGVDbGljayhldmVudDpNb3VzZUV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuZmxhZykge1xuICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRvZ2dsZUtleShldmVudDpLZXlib2FyZEV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoKGV2ZW50LmtleUNvZGUgPT09IDE3KXx8KGV2ZW50LmtleUNvZGUgPT09IDkxKSB8fCAoZXZlbnQua2V5Q29kZSA9PT0gMjI0KSkge1xuICAgICAgICAgICAgdGhpcy5rZXlEb3duID0gIXRoaXMua2V5RG93bjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVTdHlsZSgpIHtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlXCIsIFwiYmxhY2tcIilcbiAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZS1vcGFjaXR5XCIsIDAuMCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlc2l6aW5nXCIpO1xuICAgICAgICAvL3ZhciBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBuZXdFbGVtZW50U2l6ZTpFbGVtZW50U2l6ZSA9IHRoaXMuZ2V0RWxlbWVudFNpemUoKTtcbiAgICAgICAgaWYoIV8uaXNFcXVhbChuZXdFbGVtZW50U2l6ZSwgdGhpcy5lbGVtZW50U2l6ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQucmVzaXplKG5ld0VsZW1lbnRTaXplKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvL3ZhciBlbmQgPSBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAvKiBDbGVhbnVwIGNhbGxiYWNrcyAqL1xuICAgICAgICAvL3RoaXMudGVhcmRvd25DYWxsYmFja3MoKTtcbiAgICAgICAgdGhpcy5jaGFydC5kZXN0cm95KCk7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdmFyIGF4aXNDaGFuZ2VkID0gdGhpcy5heGlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgZGF0YUNoYW5nZWQgPSB0aGlzLmRhdGFDaGFuZ2VkLmJpbmQodGhpcyk7XG4gICAgICAgIHZhciBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkID0gdGhpcy5fc2VsZWN0aW9uS2V5c0NoYW5nZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHByb2JlS2V5U2V0Q2hhbmdlZCA9IHRoaXMuX3Byb2JlZEtleXNDaGFuZ2VkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdmFyIHBsb3R0ZXJQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInBsb3RcIik7XG4gICAgICAgIHZhciBtYXBwaW5nID0gW1xuICAgICAgICAgICAgeyBuYW1lOiBcInBsb3R0ZXJcIiwgcGF0aDogcGxvdHRlclBhdGgsIGNhbGxiYWNrczogZGF0YUNoYW5nZWR9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImRhdGFYXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJkYXRhWFwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImRhdGFZXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJkYXRhWVwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNpemVCeVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwic2l6ZUJ5XCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZmlsbFwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZmlsbFwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwibGluZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwibGluZVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInhBeGlzXCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJ4QXhpc1wiKSwgY2FsbGJhY2tzOiBheGlzQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInlBeGlzXCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJ5QXhpc1wiKSwgY2FsbGJhY2tzOiBheGlzQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImZpbHRlcmVkS2V5U2V0XCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWx0ZXJlZEtleVNldFwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNlbGVjdGlvbktleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQsIGNhbGxiYWNrczogc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwicHJvYmVLZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQsIGNhbGxiYWNrczogcHJvYmVLZXlTZXRDaGFuZ2VkfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhdGhzKG1hcHBpbmcpO1xuXG4gICAgICAgIHRoaXMuYzNDb25maWcgPSB7XG4gICAgICAgICAgICBiaW5kdG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgIHBhZGRpbmc6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDIwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMjAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDMwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHJvd3M6IFtdLFxuICAgICAgICAgICAgICAgIHg6IFwieFwiLFxuICAgICAgICAgICAgICAgIHhTb3J0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNjYXR0ZXJcIixcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29sb3I6IChjb2xvcjpzdHJpbmcsIGQ6YW55KTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0cmluZ1JlY29yZHMgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgaW5kZXggb2YgbnVtZXJpY1JlY29yZHMgaW4gc3RyaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkOnN0cmluZyA9IHRoaXMuaW5kZXhUb0tleVtkLmluZGV4IGFzIG51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXg6bnVtYmVyID0gXy5wbHVjayh0aGlzLnN0cmluZ1JlY29yZHMsIFwiaWRcIikuaW5kZXhPZihpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmQ6UmVjb3JkID0gdGhpcy5zdHJpbmdSZWNvcmRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAocmVjb3JkICYmIHJlY29yZFtcImZpbGxcIl0gJiYgKHJlY29yZFtcImZpbGxcIl0gYXMgUmVjb3JkKVtcImNvbG9yXCJdKSA/IChyZWNvcmRbXCJmaWxsXCJdIGFzIFJlY29yZClbXCJjb2xvclwiXSBhcyBzdHJpbmcgOiBcIiMwMDAwMDBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIjMDAwMDAwXCI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbmNsaWNrOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMua2V5RG93biAmJiBkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnNlbGVjdGVkOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5hZGRLZXlzKFt0aGlzLmluZGV4VG9LZXlbZC5pbmRleF1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb251bnNlbGVjdGVkOiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnJlbW92ZUtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3ZlcjogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3V0OiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChudW06bnVtYmVyKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucGF0aHMuZGF0YVggJiYgdGhpcy54QXhpc1ZhbHVlVG9MYWJlbCAmJiB0aGlzLmRhdGFYVHlwZSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54QXhpc1ZhbHVlVG9MYWJlbFtudW1dIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhGb3JtYXRVdGlscy5kZWZhdWx0TnVtYmVyRm9ybWF0dGluZyhudW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJvdXRlci1taWRkbGVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChudW06bnVtYmVyKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucGF0aHMuZGF0YVkgJiYgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbCAmJiB0aGlzLmRhdGFZVHlwZSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFtudW1dIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhGb3JtYXRVdGlscy5kZWZhdWx0TnVtYmVyRm9ybWF0dGluZyhudW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvaW50OiB7XG4gICAgICAgICAgICAgICAgcjogKGQ6YW55KTpudW1iZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZWRQb2ludFNpemVzW2QuaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXJlZDogdGhpcy5fdXBkYXRlU3R5bGUuYmluZCh0aGlzKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYXJ0ID0gZ2VuZXJhdGUodGhpcy5jM0NvbmZpZyk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgV2VhdmVDM1NjYXR0ZXJQbG90O1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OlNjYXR0ZXJQbG90VG9vbFwiLCBXZWF2ZUMzU2NhdHRlclBsb3QpO1xuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZDMvZDMuZC50c1wiLz5cblxuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdFV0aWxzIHtcblxuICAvLyB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGRlZmF1bHQgbnVtYmVyIGZvcm1hdGluZy5cblx0Ly8gZm9yIG51bWJlciB2YWx1ZXMsIHdlIHJvdW5kIHRoZW0gdG8gYXQgbW9zdCA0IGRlY2ltYWwgcGxhY2VzXG5cdC8vIHVubGVzcyB0aGUgbnVtYmVyIGlzIHZlcnkgc21hbGwsIGluIHdoaWNoIGNhc2Ugd2UganVzdCByZXR1cm4gaXRcbiAgc3RhdGljIGRlZmF1bHROdW1iZXJGb3JtYXR0aW5nKHg6bnVtYmVyKTpudW1iZXIge1xuICAgIGlmKHggPCAwLjAwMDEpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZDMucm91bmQoeCwgNCk7XG4gICAgfVxuICB9XG59XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG5cbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGFuZGFyZExpYiB7XG5cbiAgLyoqXG5cdCAqIFNlYXJjaGVzIGZvciB0aGUgZmlyc3QgbmVzdGVkIG9iamVjdCB3aXRoIG1hdGNoaW5nIHByb3BlcnRpZXNcblx0ICogQHBhcmFtIHJvbyBUaGUgcm9vdCBPYmplY3QuXG5cdCAqIEBwYXJhbSBtYXRjaCBFaXRoZXIgYW4gT2JqZWN0IHdpdGggcHJvcGVydGllcyB0byBtYXRjaCwgb3IgYSBGdW5jdGlvbiB0aGF0IGNoZWNrcyBmb3IgYSBtYXRjaC5cbiAgICpcbiAgICogQHJldHVybnMgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgbWF0Y2hpbmcgcHJvcGVydGllc1xuXHQgKi9cbiAgIHN0YXRpYyBmaW5kRGVlcChyb290OiBhbnksIG1hdGNoOiBhbnkgKTphbnkge1xuICAgICBpZih0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBtYXRjaCA9IF8ubWF0Y2hlcyhtYXRjaCk7XG4gICAgIH1cblxuICAgICBpZihtYXRjaChyb290KSkge1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIHJvb3QgPT0gXCJvYmplY3RcIikge1xuICAgICAgdmFyIGtleTogc3RyaW5nO1xuICAgICAgZm9yIChrZXkgaW4gcm9vdCkge1xuICAgICAgICB2YXIgZm91bmQ6YW55ID0gdGhpcy5maW5kRGVlcChyb290W2tleV0sIG1hdGNoKTtcbiAgICAgICAgaWYoZm91bmQpXG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgfVxuICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgICogQWRkcyB1bmRlZmluZWQgdmFsdWVzIHRvIG5ldyBzdGF0ZSBmb3IgcHJvcGVydGllcyBpblxuICAgICAqIGN1cnJlbnQgc3RhdGUgbm90IGZvdW5kIGluIG5ldyBzdGF0ZS5cbiAgICAgKi9cbiAgIHN0YXRpYyBpbmNsdWRlTWlzc2luZ1Byb3BlcnR5UGxhY2Vob2xkZXJzKGN1cnJlbnRTdGF0ZTphbnksIG5ld1N0YXRlOmFueSkge1xuICAgICB2YXIga2V5OiBzdHJpbmc7XG4gICAgIGZvciAoa2V5IGluIGN1cnJlbnRTdGF0ZSkge1xuICAgICAgIGlmKCFuZXdTdGF0ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICBuZXdTdGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgICAgIH1cbiAgICAgfVxuICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICB9XG5cbiAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYW4gaW50ZXJwb2xhdGVkIGNvbG9yIGZvciBhIG5vcm1hbGl6ZWQgdmFsdWUuXG4gICAgICogQHBhcmFtIG5vcm1WYWx1ZSBBIE51bWJlciBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICogQHBhcmFtIGNvbG9ycyBBbiBBcnJheSBvciBsaXN0IG9mIGNvbG9ycyB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuLiAgTm9ybWFsaXplZCB2YWx1ZXMgb2YgMCBhbmQgMSB3aWxsIGJlIG1hcHBlZCB0byB0aGUgZmlyc3QgYW5kIGxhc3QgY29sb3JzLlxuICAgICAqIEByZXR1cm4gQW4gaW50ZXJwb2xhdGVkIGNvbG9yIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gbm9ybVZhbHVlIGJhc2VkIG9uIHRoZSBsaXN0IG9mIGNvbG9yIHZhbHVlcy5cbiAgICAgKi9cbiAgICAgc3RhdGljIGludGVycG9sYXRlQ29sb3Iobm9ybVZhbHVlOm51bWJlciwgLi4uY29sb3JzOmFueVtdKTogbnVtYmVyIHtcbiAgICAgICAgLy8gaGFuZGxlIGFuIGFycmF5IG9mIGNvbG9ycyBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlclxuICAgICAgICBpZiAoY29sb3JzLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGNvbG9yc1swXSkpIHtcbiAgICAgICAgICAgIGNvbG9ycyA9IGNvbG9yc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBpbnZhbGlkIHBhcmFtZXRlcnNcbiAgICAgICAgaWYgKG5vcm1WYWx1ZSA8IDAgfHwgbm9ybVZhbHVlID4gMSB8fCBjb2xvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmluZCB0aGUgbWluIGFuZCBtYXggY29sb3JzIHdlIHdhbnQgdG8gaW50ZXJwb2xhdGUgYmV0d2VlblxuXG4gICAgICAgIHZhciBtYXhJbmRleDogbnVtYmVyID0gTWF0aC5mbG9vcihjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhciBsZWZ0SW5kZXg6IG51bWJlciA9IE1hdGguZmxvb3IobWF4SW5kZXggKiBub3JtVmFsdWUpO1xuICAgICAgICB2YXIgcmlnaHRJbmRleDogbnVtYmVyID0gTWF0aC5mbG9vcihsZWZ0SW5kZXggKyAxKTtcblxuICAgICAgICAvLyBoYW5kbGUgYm91bmRhcnkgY29uZGl0aW9uXG4gICAgICAgIGlmIChyaWdodEluZGV4ID09PSBjb2xvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoY29sb3JzW2xlZnRJbmRleF0sIDE2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW5Db2xvcjogbnVtYmVyID0gY29sb3JzW2xlZnRJbmRleF07XG4gICAgICAgIHZhciBtYXhDb2xvcjogbnVtYmVyID0gY29sb3JzW3JpZ2h0SW5kZXhdO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0aGUgbm9ybSB2YWx1ZSBiZXR3ZWVuIHRoZSB0d28gbm9ybSB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdXJyb3VuZGluZyBjb2xvcnNcbiAgICAgICAgbm9ybVZhbHVlID0gbm9ybVZhbHVlICogbWF4SW5kZXggLSBsZWZ0SW5kZXg7XG5cbiAgICAgICAgdmFyIHBlcmNlbnRMZWZ0OiBudW1iZXIgPSAxIC0gbm9ybVZhbHVlOyAvLyByZWxldmFuY2Ugb2YgbWluQ29sb3JcbiAgICAgICAgdmFyIHBlcmNlbnRSaWdodDogbnVtYmVyID0gbm9ybVZhbHVlOyAvLyByZWxldmFuY2Ugb2YgbWF4Q29sb3JcbiAgICAgICAgY29uc3QgUjogbnVtYmVyID0gMHhGRjAwMDA7XG4gICAgICAgIGNvbnN0IEc6IG51bWJlciA9IDB4MDBGRjAwO1xuICAgICAgICBjb25zdCBCOiBudW1iZXIgPSAweDAwMDBGRjtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICgocGVyY2VudExlZnQgKiAobWluQ29sb3IgJiBSKSArIHBlcmNlbnRSaWdodCAqIChtYXhDb2xvciAmIFIpKSAmIFIpIHxcbiAgICAgICAgICAgICgocGVyY2VudExlZnQgKiAobWluQ29sb3IgJiBHKSArIHBlcmNlbnRSaWdodCAqIChtYXhDb2xvciAmIEcpKSAmIEcpIHxcbiAgICAgICAgICAgICgocGVyY2VudExlZnQgKiAobWluQ29sb3IgJiBCKSArIHBlcmNlbnRSaWdodCAqIChtYXhDb2xvciAmIEIpKSAmIEIpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBUaGlzIGZ1bmN0aW9uIGNvbnZlcnRzIGEgZGVjaW1hbCBudW1iZXIgdG8gYSA2IGRpZ2l0IGhleGFkZWNpbWFsIHN0cmluZ1xuICAgICogQHBhcmFtIGRlYyBBIGRlY2ltYWwgbnVtYmVyXG4gICAgKiBAcmV0dXJuIHRoZSBoZXhhZGVjaW1hbCB2YWx1ZSBvZiB0aGUgZGVjaW1hbCBudW1iZXJcbiAgICAqL1xuICAgc3RhdGljIGRlY2ltYWxUb0hleChkZWM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgcmV0dXJuIF8ucGFkTGVmdChkZWMudG9TdHJpbmcoMTYpLCA2LCBcIjBcIik7XG4gICB9XG5cbiAgIC8qKlxuICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm4gdGhlIG5vcm1hbGl6ZWQgdmFsdWUgYmV0d2VlbiBhIHJhbmdlXG4gICAgKiBpZiBubyByYW5nZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgcmFuZ2Ugd2lsbCBiZSAwIGFuZCAxXG4gICAgKlxuICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBiZSBub3JtYWxpemVkXG4gICAgKiBAcGFyYW0gbWluIHRoZSByYW5nZSBtaW4gdmFsdWVcbiAgICAqIEBwYXJhbSBtYXggdGhlIHJhbmdlIG1heCB2YWx1ZVxuICAgICovXG4gICBzdGF0aWMgbm9ybWFsaXplKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG5cbiAgICAgICBpZighbWluKSB7XG4gICAgICAgICAgIG1pbiA9IDA7XG4gICAgICAgfVxuICAgICAgIGlmKCFtYXgpIHtcbiAgICAgICAgICAgbWF4ID0gMTtcbiAgICAgICB9XG4gICAgICAgcmV0dXJuICh2YWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiAgVGhpcyBmdW5jdGlvbiB0YWtlcyBtZXJnZXMgYW4gb2JqZWN0IGludG8gYW5vdGhlclxuICAgICpcbiAgICAqIEBwYXJhbSBpbnRvIHtvYmplY3R9IHRoZSBvYmplY3QgdG8gbWVyZ2UgaW50b1xuICAgICogQHBhcmFtIG9iaiB7b2JqfSB0aGUgb2JqZWN0IHRvIG1lcmdlIGZyb21cbiAgICAqL1xuICAgc3RhdGljIG1lcmdlKGludG86YW55LCBvYmo6YW55KSB7XG4gICAgIHZhciBhdHRyOnN0cmluZztcbiAgICAgZm9yKGF0dHIgaW4gb2JqKSB7XG4gICAgICAgaW50b1thdHRyXSA9IG9ialthdHRyXTtcbiAgICAgfVxuICAgfVxuXG4gICAvKipcbiAgICAqIFRlbXBvcmFyeSBwb2x5ZmlsbCB3b3JrYXJvdW5kIGZvciBTdHJpbmcuc3RhcnRzV2l0aFxuICAgICogZm9yIHByb2plY3RzIHRoYXQgYXJlIHRhcmdldHRpbmcgZXM1XG4gICAgKlxuICAgICogIGRldGVybWluZXMgd2hldGhlciBhIHN0cmluZyBiZWdpbnMgd2l0aCB0aGUgY2hhcmFjdGVycyBvZiBhbm90aGVyIHN0cmluZywgcmV0dXJuaW5nIHRydWUgb3IgZmFsc2UgYXMgYXBwcm9wcmlhdGUuXG4gICAgKlxuICAgICogQHBhcmFtIHN0ciB7c3RyaW5nfSB0aGUgc3RyIHN0cmluZyBpbiB3aGljaCB0byBzZWFyY2ggZm9yIGluIHN0ci5zdGFydHNXaXRoXG4gICAgKiBAcGFyYW0gc2VhcmNoU3RyaW5nIHtzdHJpbmd9IFRoZSBjaGFyYWN0ZXJzIHRvIGJlIHNlYXJjaGVkIGZvciBhdCB0aGUgc3RhcnQgb2YgdGhpcyBzdHJpbmcuXG4gICAgKiBAcGFyYW0gcG9zaXRpb24ge251bWJlcj99IE9wdGlvbmFsLiBUaGUgcG9zaXRpb24gaW4gdGhpcyBzdHJpbmcgYXQgd2hpY2ggdG8gYmVnaW4gc2VhcmNoaW5nIGZvciBzZWFyY2hTdHJpbmc7IGRlZmF1bHRzIHRvIDAuXG4gICAgKlxuICAgICogQHJldHVybnMgdHJ1ZSBvciBmYWxzZVxuICAgICpcbiAgICAqL1xuICAgc3RhdGljIHN0YXJ0c1dpdGgoc3RyOnN0cmluZywgc2VhcmNoU3RyaW5nOnN0cmluZywgcG9zaXRpb24/Om51bWJlcik6Ym9vbGVhbiB7XG4gICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiB8fCAwO1xuICAgICAgIHJldHVybiBzdHIuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSA9PT0gcG9zaXRpb247XG4gICB9XG5cblxuICAgc3RhdGljIHJlc29sdmVSZWxhdGl2ZShwYXRoOnN0cmluZywgYmFzZTpzdHJpbmcpOnN0cmluZyB7XG4gICAgXHQvLyBVcHBlciBkaXJlY3RvcnlcbiAgICBcdGlmIChTdGFuZGFyZExpYi5zdGFydHNXaXRoKHBhdGgsIFwiLi4vXCIpKSB7XG4gICAgXHRcdHJldHVybiBTdGFuZGFyZExpYi5yZXNvbHZlUmVsYXRpdmUocGF0aC5zbGljZSgzKSwgYmFzZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiXCIpKTtcbiAgICBcdH1cbiAgICBcdC8vIFJlbGF0aXZlIHRvIHRoZSByb290XG4gICAgXHRpZiAoU3RhbmRhcmRMaWIuc3RhcnRzV2l0aChwYXRoLCBcIi9cIikpIHtcbiAgICBcdFx0dmFyIG1hdGNoID0gYmFzZS5tYXRjaCgvKFxcdyo6XFwvXFwvKT9bXlxcL10qXFwvLykgfHwgW2Jhc2VdO1xuICAgIFx0XHRyZXR1cm4gbWF0Y2hbMF0gKyBwYXRoLnNsaWNlKDEpO1xuICAgIFx0fVxuICAgIFx0Ly9yZWxhdGl2ZSB0byB0aGUgY3VycmVudCBkaXJlY3Rvcnlcblx0ICAgIHJldHVybiBiYXNlLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCJcIikgKyBcIi9cIiArIHBhdGg7XG4gICAgfVxuXG4gICBzdGF0aWMgZ2V0RGF0YUJvdW5kcyhjb2x1bW46IG51bWJlcltdKSB7XG4gICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgbWluOiBfLm1pbihjb2x1bW4pLFxuICAgICAgICAgICBtYXg6IF8ubWF4KGNvbHVtbilcbiAgICAgICB9O1xuICAgfVxuXG4gICAvKipcbiAgICAqXG4gICAgKiAgIFRoaXMgZnVuY3Rpb24gcmV0dXJuIGFuZCBvYmplY3Qgd2hvc2Uga2V5cyBhcmUgdXJsXG4gICAgKiAgIHBhcmFtZXRlcnMgYW5kIHZhbHVlXG4gICAgKi9cbiAgIHN0YXRpYyBnZXRVcmxQYXJhbXMoKTphbnkge1xuXG4gICAgICAgdmFyIHF1ZXJ5UGFyYW1zOmFueSA9IHt9O1xuICAgICAgIHZhciBxdWVyeTpzdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcbiAgICAgICBpZighcXVlcnkpIHtcbiAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgIH1cbiAgICAgICB2YXIgdmFyczpzdHJpbmdbXSA9IHF1ZXJ5LnNwbGl0KFwiJlwiKTtcbiAgICAgICBmb3IgKHZhciBpOm51bWJlciA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgIHZhciBwYWlyOnN0cmluZ1tdID0gdmFyc1tpXS5zcGxpdChcIj1cIik7XG4gICAgICAgICAgIGlmICh0eXBlb2YgcXVlcnlQYXJhbXNbcGFpclswXV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3BhaXJbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICAgICAgICAgICAgICAgLy8gSWYgc2Vjb25kIGVudHJ5IHdpdGggdGhpcyBuYW1lXG4gICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHF1ZXJ5UGFyYW1zW3BhaXJbMF1dID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICB2YXIgYXJyOnN0cmluZ1tdID0gWyBxdWVyeVBhcmFtc1twYWlyWzBdXSwgZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pIF07XG4gICAgICAgICAgICAgICBxdWVyeVBhcmFtc1twYWlyWzBdXSA9IGFycjtcbiAgICAgICAgICAgICAgIC8vIElmIHRoaXJkIG9yIGxhdGVyIGVudHJ5IHdpdGggdGhpcyBuYW1lXG4gICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICBxdWVyeVBhcmFtc1twYWlyWzBdXS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSk7XG4gICAgICAgICAgIH1cbiAgICAgICB9XG4gICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgYnMgZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL291dHRzL1dlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBEYXRlUGlja2VyIGZyb20gXCJyZWFjdC1kYXRlLXBpY2tlclwiO1xuXG52YXIgY3VzdG9tU2VhcmNoU3R5bGUgPSB7XG4gICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgZmxleERpcmVjdGlvbjogXCJyb3dcIixcbiAgICBoZWlnaHQ6IDMwLFxuICAgIHdpZHRoOiBcIjEwMCVcIlxufTtcblxudmFyIGlucHV0U3R5bGUgPSB7XG4gICAgZmxleDogMSxcbiAgICBwYWRkaW5nTGVmdDogNCxcbiAgICBwYWRkaW5nUmlnaHQ6IDRcbn07XG5cbnZhciBzZWFyY2hCdXR0b25TdHlsZSA9IHtcbiAgICBmbGV4OiAxXG59O1xuXG52YXIgZ2x5cGhTdHlsZSA9IHtcbiAgICBmb250U2l6ZTogXCIxMnB4XCJcbn07XG5cbmNsYXNzIEN1c3RvbVNlYXJjaFRvb2wgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy50b29sUGF0aC5yZXF1ZXN0KFwiRXh0ZXJuYWxUb29sXCIpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWFyY2hPYmplY3Q6IHRoaXMucHJvcHMudG9vbFBhdGgucHVzaChcInNlYXJjaFZhbHVlc1wiKS5yZXF1ZXN0KFwiTGlua2FibGVWYXJpYWJsZVwiKS5nZXRTdGF0ZSgpIHx8IHt9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VhcmNoRmllbGRzID0gdGhpcy5wcm9wcy50b29sUGF0aC5wdXNoKFwic2VhcmNoRmllbGRzXCIpLnJlcXVlc3QoXCJMaW5rYWJsZVZhcmlhYmxlXCIpLmdldFN0YXRlKCkgfHwgW107XG5cbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUZ1bmNzID0ge307XG4gICAgICAgIHRoaXMuc2VhcmNoRmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlRnVuY3NbZmllbGQubGFiZWxdID0gdGhpcy51cGRhdGVTdGF0ZS5iaW5kKHRoaXMsIGZpZWxkLmxhYmVsKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5kZWJvdW5jZWRDb21wb25lbnREaWRVcGRhdGUgPSBfLmRlYm91bmNlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudG9vbFBhdGguc3RhdGUoXCJzZWFyY2hWYWx1ZXNcIiwgdGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy50b29sUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLmhhbmRsZVdlYXZlU3RhdGUsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5wcm9wcy50b29sUGF0aC5wdXNoKFwic2VhcmNoRmllbGRzXCIpLmFkZENhbGxiYWNrKHRoaXMsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGRzID0gdGhpcy5wcm9wcy50b29sUGF0aC5nZXRTdGF0ZShcInNlYXJjaEZpZWxkc1wiKSB8fCBbXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGVGdW5jcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlRnVuY3NbZmllbGQubGFiZWxdID0gdGhpcy51cGRhdGVTdGF0ZS5iaW5kKHRoaXMsIGZpZWxkLmxhYmVsKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVXZWF2ZVN0YXRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaE9iamVjdDogdGhpcy5wcm9wcy50b29sUGF0aC5nZXRTdGF0ZShcInNlYXJjaFZhbHVlc1wiKSB8fCB7fVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIC8vIHRoaXMuZGVib3VuY2VkQ29tcG9uZW50RGlkVXBkYXRlKCk7XG4gICAgfVxuXG4gICAgc3VibWl0U2VhcmNoKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJvcHMudG9vbFBhdGguc3RhdGUoXCJzZWFyY2hWYWx1ZXNcIiwgdGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpO1xuICAgICAgICBpZihldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0ZShsYWJlbCwgZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjb21wb25lbnRzID0gXy5jbG9uZSh0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCk7XG4gICAgICAgIGNvbXBvbmVudHNbbGFiZWxdID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaE9iamVjdDogY29tcG9uZW50c1xuICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgdXBkYXRlRGF0ZUZpZWxkKGxhYmVsLCB2YWx1ZSwgbW9tZW50KSB7XG4gICAgICAgIC8vIFRPRE8gdXNlIG1vbWVudCBvYmplY3QgdG8gbWFuaXB1bGF0ZSBmb3JtYXRcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBfLmNsb25lKHRoaXMuc3RhdGUuc2VhcmNoT2JqZWN0KTtcbiAgICAgICAgY29tcG9uZW50c1tsYWJlbF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWFyY2hPYmplY3Q6IGNvbXBvbmVudHNcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlU3RhdGVEYXRlRmllbGQobGFiZWwsIGV2ZW50KSB7XG4gICAgICAgIHZhciBkYXRlUGlja2VyID0gdGhpcy5yZWZzW1wiZGF0ZVBpY2tlclwiICsgbGFiZWxdO1xuXG4gICAgICAgIC8vIHNldCB0aGUgZGF0ZXBpY2tlciBkYXRlIHNvIHRoYXQgaXQgbW92ZXMgdG8gdGhhdCB2aWV3XG4gICAgICAgIGlmKGRhdGVQaWNrZXIpIHtcbiAgICAgICAgICAgIGlmKGlzTmFOKERhdGUucGFyc2UoZXZlbnQudGFyZ2V0LnZhbHVlKSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZGF0ZVBpY2tlci5nb3RvRGF0ZShuZXcgRGF0ZShldmVudC50YXJnZXQudmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlRnVuY3NbbGFiZWxdKGV2ZW50KTtcbiAgICB9XG5cbiAgICByZW1vdmVTZWFyY2hPcHRpb24oa2V5KSB7XG4gICAgICAgIHZhciBjb21wb25lbnRzID0gXy5jbG9uZSh0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCk7XG4gICAgICAgIGRlbGV0ZSBjb21wb25lbnRzW2tleV07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoT2JqZWN0OiBjb21wb25lbnRzXG4gICAgICAgIH0sICgpID0+IHtcblx0ICAgICAgICBpZighT2JqZWN0LmtleXModGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpLmxlbmd0aCkge1xuXHQgICAgICAgICAgdGhpcy5zdWJtaXRTZWFyY2goKTtcblx0ICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZURyb3Bkb3duU2VsZWN0IChldmVudCwgZXZlbnRLZXkpe1xuICAgICAgICB2YXIgY29tcG9uZW50cyA9IF8uY2xvbmUodGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpO1xuICAgICAgICBjb21wb25lbnRzW2V2ZW50S2V5XSA9IHRoaXMuc3RhdGUuc2VhcmNoT2JqZWN0W2V2ZW50S2V5XSB8fCBcIlwiO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaE9iamVjdDogY29tcG9uZW50c1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBtZW51SXRlbXMgPSB0aGlzLnNlYXJjaEZpZWxkcy5tYXAoKHNlYXJjaEZpZWxkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxicy5NZW51SXRlbSBrZXk9e2luZGV4fSBldmVudEtleT17c2VhcmNoRmllbGQubGFiZWx9PiB7c2VhcmNoRmllbGQubGFiZWx9IDwvYnMuTWVudUl0ZW0+O1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgaW5wdXRzID0gW107XG5cbiAgICAgICAgZm9yKHZhciBpIGluIHRoaXMuc2VhcmNoRmllbGRzKSB7XG4gICAgICAgICAgICB2YXIgbGFiZWwgPSB0aGlzLnNlYXJjaEZpZWxkc1tpXS5sYWJlbDtcbiAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy5zZWFyY2hGaWVsZHNbaV0udHlwZTtcblxuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QuaGFzT3duUHJvcGVydHkobGFiZWwpKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xvc2VCdXR0b24gPSA8YnMuQnV0dG9uIGNsYXNzTmFtZT17XCJjbG9zZS1idXR0b25cIn0ga2V5PXtcImNsb3NlXCIgKyBpfSB0YWJJbmRleD17LTF9IG9uQ2xpY2s9e3RoaXMucmVtb3ZlU2VhcmNoT3B0aW9uLmJpbmQodGhpcywgbGFiZWwpfSBic1NpemU9e3RoaXMucHJvcHMuYnNTaXplfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJzLkdseXBoaWNvbiBnbHlwaD1cInJlbW92ZVwiIHN0eWxlPXtnbHlwaFN0eWxlfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9icy5CdXR0b24+O1xuXG4gICAgICAgICAgICAgICAgdmFyIHNlYXJjaElucHV0ID0gXCJcIjtcblxuXG4gICAgICAgICAgICAgICAgaWYodHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVGb3JtYXQgPSB0aGlzLnNlYXJjaEZpZWxkc1tpXS5kYXRlRm9ybWF0IHx8IFwiTU0vREQvWVlZWVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZVBpY2tlciA9IDxicy5Qb3BvdmVyIGlkPVwiZGF0ZSBwaWNrZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGF0ZVBpY2tlciByZWY9e1wiZGF0ZVBpY2tlclwiICsgbGFiZWx9IGRhdGVGb3JtYXQ9e2RhdGVGb3JtYXR9IGRhdGU9e3RoaXMuc3RhdGUuc2VhcmNoT2JqZWN0W2xhYmVsXX0gb25DaGFuZ2U9e3RoaXMudXBkYXRlRGF0ZUZpZWxkLmJpbmQodGhpcywgbGFiZWwpfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9icy5Qb3BvdmVyPjtcblxuICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dCA9IDxkaXYgc3R5bGU9e2lucHV0U3R5bGV9IGtleT17XCJzZWFyY2hJbnB1dFwiICsgaX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnMuT3ZlcmxheVRyaWdnZXIgdHJpZ2dlcj1cImNsaWNrXCIgcm9vdENsb3NlIHBsYWNlbWVudD1cImJvdHRvbVwiIG92ZXJsYXk9e2RhdGVQaWNrZXJ9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicy5JbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBic1NpemU9e3RoaXMucHJvcHMuYnNTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5zZWFyY2hPYmplY3RbbGFiZWxdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e2xhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQmVmb3JlPXtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uQWZ0ZXI9e2Nsb3NlQnV0dG9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNGZWVkYmFjaz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2RhdGVGb3JtYXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVN0YXRlRGF0ZUZpZWxkLmJpbmQodGhpcywgbGFiZWwpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2JzLklucHV0PlxuICAgICAgICAgICAgICAgICAgICAgICA8L2JzLk92ZXJsYXlUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgIDwvZGl2PjtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQgPSA8ZGl2IHN0eWxlPXtpbnB1dFN0eWxlfSBrZXk9e1wic2VhcmNoSW5wdXRcIiArIGl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJzLklucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnNTaXplPXt0aGlzLnByb3BzLmJzU2l6ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5zZWFyY2hPYmplY3RbbGFiZWxdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17bGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZG9uQmVmb3JlPXtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25BZnRlcj17Y2xvc2VCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRmVlZGJhY2s9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1wiRW50ZXIgXCIgKyBsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVTdGF0ZUZ1bmNzW2xhYmVsXX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2JzLklucHV0PlxuICAgICAgICAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goc2VhcmNoSW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXtjdXN0b21TZWFyY2hTdHlsZX0+XG4gICAgICAgICAgICAgICAgPGJzLkRyb3Bkb3duIGlkPVwiZHJvcGRvd25cIiB0aXRsZT1cIkRyb3Bkb3duXCIgYnNTaXplPXt0aGlzLnByb3BzLmJzU2l6ZX0gYnNTdHlsZT1cInByaW1hcnlcIiBvblNlbGVjdD17dGhpcy5oYW5kbGVEcm9wZG93blNlbGVjdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgICAgICAgICAgICAgPGJzLkRyb3Bkb3duLlRvZ2dsZSBic1N0eWxlPVwicHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJzLkdseXBoaWNvbiBnbHlwaD1cInNlYXJjaFwiLz5cbiAgICAgICAgICAgICAgICAgICAgPC9icy5Ecm9wZG93bi5Ub2dnbGU+XG4gICAgICAgICAgICAgICAgICAgIDxicy5Ecm9wZG93bi5NZW51PlxuICAgICAgICAgICAgICAgICAgICAgICAge21lbnVJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgPC9icy5Ecm9wZG93bi5NZW51PlxuICAgICAgICAgICAgICAgIDwvYnMuRHJvcGRvd24+XG4gICAgICAgICAgICAgICAgPGZvcm0gb25zdWJtaXQ9e3RoaXMuc3VibWl0U2VhcmNoLmJpbmQodGhpcyl9IHN0eWxlPXtjdXN0b21TZWFyY2hTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0c1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3RhdGUuc2VhcmNoT2JqZWN0KS5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmbG9hdDogXCJyaWdodFwifX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicy5CdXR0b25JbnB1dCB0eXBlPVwic3VibWl0XCIgYnNTdHlsZT1cInByaW1hcnlcIiBvbkNsaWNrPXt0aGlzLnN1Ym1pdFNlYXJjaC5iaW5kKHRoaXMpfT4gU2VhcmNoIDwvYnMuQnV0dG9uSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA6XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEN1c3RvbVNlYXJjaFRvb2w7XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwiQ3VzdG9tU2VhcmNoVG9vbFwiLCBDdXN0b21TZWFyY2hUb29sKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgTGF5b3V0IGZyb20gXCIuLi9vdXR0cy9yZWFjdC1mbGV4aWJsZS1sYXlvdXQvTGF5b3V0LmpzeFwiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IFdlYXZlUGFuZWwgZnJvbSBcIi4vV2VhdmVQYW5lbC5qc1wiO1xuaW1wb3J0ICogYXMgV2VhdmVQYW5lbE1hbmFnZXIgZnJvbSBcIi4vV2VhdmVQYW5lbE1hbmFnZXIuanNcIjtcbmltcG9ydCBXZWF2ZUMzQmFyY2hhcnQgZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLWJhcmNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNTY2F0dGVyUGxvdCBmcm9tIFwiLi4vb3V0dHMvdG9vbHMvd2VhdmUtYzMtc2NhdHRlcnBsb3QuanN4XCI7XG5pbXBvcnQgV2VhdmVDM0NvbG9yTGVnZW5kIGZyb20gXCIuLi9vdXR0cy90b29scy93ZWF2ZS1jMy1jb2xvcmxlZ2VuZC5qc3hcIjtcbmltcG9ydCBXZWF2ZUMzTGluZUNoYXJ0IGZyb20gXCIuL3Rvb2xzL3dlYXZlLWMzLWxpbmVjaGFydC5qc3hcIjtcbmltcG9ydCBXZWF2ZUMzUGllQ2hhcnQgZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLXBpZWNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNIaXN0b2dyYW0gZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLWhpc3RvZ3JhbS5qc3hcIjtcbmltcG9ydCBCYXJjaGFydCBmcm9tIFwiLi90b29scy93ZWF2ZS1iYXJjaGFydC5qc3hcIjtcbmltcG9ydCBXZWF2ZU9wZW5MYXllcnNNYXAgZnJvbSBcIi4vdG9vbHMvbWFwLmpzXCI7XG5pbXBvcnQgV2VhdmVSZWFjdFRhYmxlIGZyb20gXCIuL3Rvb2xzL3dlYXZlLXJlYWN0LXRhYmxlLmpzeFwiO1xuaW1wb3J0IFNlc3Npb25TdGF0ZU1lbnVUb29sIGZyb20gXCIuL3Rvb2xzL3dlYXZlLXNlc3Npb24tc3RhdGUtbWVudS5qc3hcIjtcbmltcG9ydCBDdXN0b21TZWFyY2hUb29sIGZyb20gXCIuL0N1c3RvbVNlYXJjaFRvb2wuanN4XCI7XG4vKiBnbG9iYWwgV2VhdmUsIHdlYXZlanMgKi9cbmltcG9ydCB7V2VhdmVUb29sLCBnZXRUb29sSW1wbGVtZW50YXRpb259IGZyb20gXCIuLi9vdXR0cy9XZWF2ZVRvb2wuanN4XCI7XG5pbXBvcnQgVG9vbE92ZXJsYXkgZnJvbSBcIi4uL291dHRzL1Rvb2xPdmVybGF5LmpzeFwiO1xuaW1wb3J0IFN0YW5kYXJkTGliIGZyb20gXCIuLi9vdXR0cy91dGlscy9TdGFuZGFyZExpYi5qc1wiO1xuXG5jb25zdCBMQVlPVVQgPSBcIkxheW91dFwiO1xuXG5jb25zdCBMRUZUID0gXCJsZWZ0XCI7XG5jb25zdCBSSUdIVCA9IFwicmlnaHRcIjtcbmNvbnN0IFRPUCA9IFwidG9wXCI7XG5jb25zdCBCT1RUT00gPSBcImJvdHRvbVwiO1xuY29uc3QgVkVSVElDQUwgPSBcInZlcnRpY2FsXCI7XG5jb25zdCBIT1JJWk9OVEFMID0gXCJob3Jpem9udGFsXCI7XG5cbmNvbnN0IFRPT0xPVkVSTEFZID0gXCJ0b29sb3ZlcmxheVwiO1xuXG5jbGFzcyBXZWF2ZUxheW91dE1hbmFnZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLndlYXZlID0gdGhpcy5wcm9wcy53ZWF2ZSB8fCBuZXcgV2VhdmUoKTtcbiAgICAgICAgdGhpcy53ZWF2ZS5wYXRoKExBWU9VVCkucmVxdWVzdChcIkZsZXhpYmxlTGF5b3V0XCIpO1xuICAgICAgICB0aGlzLm1hcmdpbiA9IDg7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuX2ZvcmNlVXBkYXRlID0gXy50aHJvdHRsZSgoKSA9PiB7IHRoaXMuZGlydHkgPSB0cnVlOyB0aGlzLmZvcmNlVXBkYXRlKCk7IH0sIDMwKSk7XG4gICAgICAgIHRoaXMud2VhdmUucm9vdC5jaGlsZExpc3RDYWxsYmFja3MuYWRkR3JvdXBlZENhbGxiYWNrKHRoaXMsIF8uZGVib3VuY2UodGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMpLCAwKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMud2VhdmUucm9vdC5jaGlsZExpc3RDYWxsYmFja3MuYWRkR3JvdXBlZENhbGxiYWNrKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0ZXN0IGNoaWxkIGxpc3QgY2FsbGJhY2tcIik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5hZGRDYWxsYmFjayh0aGlzLCBfLmRlYm91bmNlKHRoaXMuZm9yY2VVcGRhdGUuYmluZCh0aGlzKSwgMCksIHRydWUpO1xuICAgICAgICB0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5zdGF0ZSh0aGlzLnNpbXBsaWZ5U3RhdGUodGhpcy53ZWF2ZS5wYXRoKExBWU9VVCkuZ2V0U3RhdGUoKSkpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLl9mb3JjZVVwZGF0ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBpZihXZWF2ZS5kZXRlY3RDaGFuZ2UodGhpcywgdGhpcy53ZWF2ZS5nZXRPYmplY3QoTEFZT1VUKSkgfHwgdGhpcy5kaXJ0eSkge1xuICAgICAgICAgICAgLy8gZGlydHkgZmxhZyB0byB0cmlnZ2VyIHJlbmRlciBvbiB3aW5kb3cgcmVzaXplXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAvL18uZGVib3VuY2UodGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMpLCAwKSgpO1xuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2F2ZVN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIG5ld1N0YXRlID0gdGhpcy5zaW1wbGlmeVN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgbmV3U3RhdGUuZmxleCA9IDE7XG4gICAgICAgIHRoaXMud2VhdmUucGF0aChMQVlPVVQpLnN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgLy8gdGVtcG9yYXJ5IGhhY2sgYmVjYXVzZSB3ZWF2ZVxuICAgICAgICAvLyBkb2Vzbid0IHByb3Blcmx5IGNhbGxiYWNrIGZvcmNlVXBkYXRlXG4gICAgICAgIC8vdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cblxuICAgIG9uRHJhZ1N0YXJ0KGlkLCBldmVudCkge1xuICAgICAgICB0aGlzLnRvb2xEcmFnZ2VkID0gaWQ7XG4gICAgICAgIHZhciB0b29sUmVmID0gaWRbMF07IC8vIHRvb2xOYW1lIGFzIHVzZWQgaW4gdGhlIHJlZiBmb3IgdGhlIHdlYXZlIHRvb2wuXG4gICAgICAgIHZhciBlbGVtZW50ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzW3Rvb2xSZWZdKTtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShlbGVtZW50LCAwLCAwKTtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsIG51bGwpO1xuICAgIH1cblxuICAgIGhpZGVPdmVybGF5KCkge1xuICAgICAgICB2YXIgdG9vbE92ZXJsYXlTdHlsZSA9IF8uY2xvbmUodGhpcy5yZWZzW1RPT0xPVkVSTEFZXS5zdGF0ZS5zdHlsZSk7XG4gICAgICAgIHRvb2xPdmVybGF5U3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRvb2xPdmVybGF5U3R5bGUubGVmdCA9IHRvb2xPdmVybGF5U3R5bGUudG9wID0gdG9vbE92ZXJsYXlTdHlsZS53aWR0aCA9IHRvb2xPdmVybGF5U3R5bGUuaGVpZ2h0ID0gMDtcbiAgICAgICAgdGhpcy5yZWZzW1RPT0xPVkVSTEFZXS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzdHlsZTogdG9vbE92ZXJsYXlTdHlsZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkRyYWdFbmQoKSB7XG4gICAgICAgIGlmKHRoaXMudG9vbERyYWdnZWQgJiYgdGhpcy50b29sT3Zlcikge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQodGhpcy50b29sRHJhZ2dlZCwgdGhpcy50b29sT3ZlciwgdGhpcy5kcm9wWm9uZSk7XG4gICAgICAgICAgICB0aGlzLnRvb2xEcmFnZ2VkID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZHJvcFpvbmUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oaWRlT3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25EcmFnT3Zlcih0b29sT3ZlciwgZXZlbnQpIHtcbiAgICAgICAgaWYoIXRoaXMudG9vbERyYWdnZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihfLmlzRXF1YWwodGhpcy50b29sRHJhZ2dlZCwgdG9vbE92ZXIpKSB7XG4gICAgICAgICAgICAvLyBoaWRlIHRoZSBvdmVybGF5IGlmIGhvdmVyaW5nIG92ZXIgdGhlIHRvb2wgYmVpbmcgZHJhZ2dlZFxuICAgICAgICAgICAgdGhpcy50b29sT3ZlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhpZGVPdmVybGF5KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9vbE5vZGUgPSB0aGlzLnJlZnNbTEFZT1VUXS5nZXRET01Ob2RlRnJvbUlkKHRvb2xPdmVyKTtcbiAgICAgICAgdmFyIHRvb2xOb2RlUG9zaXRpb24gPSB0b29sTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB2YXIgdG9vbE92ZXJsYXlTdHlsZSA9IF8uY2xvbmUodGhpcy5yZWZzW1RPT0xPVkVSTEFZXS5zdGF0ZS5zdHlsZSk7XG4gICAgICAgIHZhciBkcm9wWm9uZSA9IHRoaXMuZ2V0RHJvcFpvbmUodG9vbE92ZXIsIGV2ZW50KTtcbiAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS5sZWZ0ID0gdG9vbE5vZGVQb3NpdGlvbi5sZWZ0O1xuICAgICAgICB0b29sT3ZlcmxheVN0eWxlLnRvcCA9IHRvb2xOb2RlUG9zaXRpb24udG9wO1xuICAgICAgICB0b29sT3ZlcmxheVN0eWxlLndpZHRoID0gdG9vbE5vZGVQb3NpdGlvbi53aWR0aDtcbiAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS5oZWlnaHQgPSB0b29sTm9kZVBvc2l0aW9uLmhlaWdodDtcbiAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgICAgaWYoZHJvcFpvbmUgPT09IExFRlQpIHtcbiAgICAgICAgICAgIHRvb2xPdmVybGF5U3R5bGUud2lkdGggPSB0b29sTm9kZVBvc2l0aW9uLndpZHRoIC8gMjtcbiAgICAgICAgfSBlbHNlIGlmKGRyb3Bab25lID09PSBSSUdIVCkge1xuICAgICAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS5sZWZ0ID0gdG9vbE5vZGVQb3NpdGlvbi5sZWZ0ICsgdG9vbE5vZGVQb3NpdGlvbi53aWR0aCAvIDI7XG4gICAgICAgICAgICB0b29sT3ZlcmxheVN0eWxlLndpZHRoID0gdG9vbE5vZGVQb3NpdGlvbi53aWR0aCAvIDI7XG4gICAgICAgIH0gZWxzZSBpZihkcm9wWm9uZSA9PT0gQk9UVE9NKSB7XG4gICAgICAgICAgICB0b29sT3ZlcmxheVN0eWxlLnRvcCA9IHRvb2xOb2RlUG9zaXRpb24udG9wICsgdG9vbE5vZGVQb3NpdGlvbi5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS5oZWlnaHQgPSB0b29sTm9kZVBvc2l0aW9uLmhlaWdodCAvIDI7XG4gICAgICAgIH0gZWxzZSBpZihkcm9wWm9uZSA9PT0gVE9QKSB7XG4gICAgICAgICAgICB0b29sT3ZlcmxheVN0eWxlLmhlaWdodCA9IHRvb2xOb2RlUG9zaXRpb24uaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkcm9wWm9uZSAhPT0gdGhpcy5kcm9wWm9uZSB8fCAhXy5pc0VxdWFsKHRvb2xPdmVyLCB0aGlzLnRvb2xPdmVyKSkge1xuICAgICAgICAgICAgdGhpcy5yZWZzW1RPT0xPVkVSTEFZXS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHRvb2xPdmVybGF5U3R5bGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcm9wWm9uZSA9IGRyb3Bab25lO1xuICAgICAgICB0aGlzLnRvb2xPdmVyID0gdG9vbE92ZXI7XG4gICAgfVxuXG4gICAgZ2V0RHJvcFpvbmUoaWQsIGV2ZW50KSB7XG4gICAgICAgIGlmKHRoaXMudG9vbERyYWdnZWQpIHtcbiAgICAgICAgICAgIGlmKCFfLmlzRXF1YWwodGhpcy50b29sRHJhZ2dlZCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvb2xOb2RlID0gdGhpcy5yZWZzW0xBWU9VVF0uZ2V0RE9NTm9kZUZyb21JZChpZCk7XG4gICAgICAgICAgICAgICAgdmFyIHRvb2xOb2RlUG9zaXRpb24gPSB0b29sTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHg6ICh0b29sTm9kZVBvc2l0aW9uLnJpZ2h0IC0gdG9vbE5vZGVQb3NpdGlvbi5sZWZ0KSAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHk6ICh0b29sTm9kZVBvc2l0aW9uLmJvdHRvbSAtIHRvb2xOb2RlUG9zaXRpb24udG9wKSAvIDJcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIG1vdXNlUG9zUmVsYXRpdmVUb0NlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCAtICh0b29sTm9kZVBvc2l0aW9uLmxlZnQgKyBjZW50ZXIueCksXG4gICAgICAgICAgICAgICAgICAgIHk6IGV2ZW50LmNsaWVudFkgLSAodG9vbE5vZGVQb3NpdGlvbi50b3AgKyBjZW50ZXIueSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIG1vdXNlTm9ybSA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogKG1vdXNlUG9zUmVsYXRpdmVUb0NlbnRlci54KSAvICh0b29sTm9kZVBvc2l0aW9uLndpZHRoIC8gMiksXG4gICAgICAgICAgICAgICAgICAgIHk6IChtb3VzZVBvc1JlbGF0aXZlVG9DZW50ZXIueSkgLyAodG9vbE5vZGVQb3NpdGlvbi5oZWlnaHQgLyAyKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgbW91c2VQb2xhckNvb3JkID0ge1xuICAgICAgICAgICAgICAgICAgICByOiBNYXRoLnNxcnQobW91c2VOb3JtLnggKiBtb3VzZU5vcm0ueCArIG1vdXNlTm9ybS55ICogbW91c2VOb3JtLnkpLFxuICAgICAgICAgICAgICAgICAgICB0aGV0YTogTWF0aC5hdGFuMihtb3VzZU5vcm0ueSwgbW91c2VOb3JtLngpXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciB6b25lcyA9IFtSSUdIVCwgQk9UVE9NLCBMRUZULCBUT1BdO1xuXG4gICAgICAgICAgICAgICAgdmFyIHpvbmVJbmRleCA9IE1hdGgucm91bmQoKG1vdXNlUG9sYXJDb29yZC50aGV0YSAvICgyICogTWF0aC5QSSkgKiA0KSArIDQpICUgNDtcblxuICAgICAgICAgICAgICAgIGlmKG1vdXNlUG9sYXJDb29yZC5yIDwgMC4zNCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gem9uZXNbem9uZUluZGV4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaW1wbGlmeVN0YXRlKHN0YXRlKSB7XG4gICAgXHRpZiAoIXN0YXRlKVxuICAgIFx0XHRyZXR1cm4ge307XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHN0YXRlLmNoaWxkcmVuO1xuXG4gICAgICAgIGlmICghY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5U3RhdGUoY2hpbGRyZW5bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNpbXBsZUNoaWxkcmVuID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5zaW1wbGlmeVN0YXRlKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiBjaGlsZC5kaXJlY3Rpb24gPT09IHN0YXRlLmRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZENoaWxkcmVuID0gY2hpbGQuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGNoaWxkQ2hpbGRyZW4ubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZENoaWxkID0gY2hpbGRDaGlsZHJlbltpaV07XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkQ2hpbGQuZmxleCAqPSBjaGlsZC5mbGV4O1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVDaGlsZHJlbi5wdXNoKGNoaWxkQ2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNpbXBsZUNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmNoaWxkcmVuID0gc2ltcGxlQ2hpbGRyZW47XG4gICAgICAgIHZhciB0b3RhbFNpemVDaGlsZHJlbiA9IF8uc3VtKF8ubWFwKGNoaWxkcmVuLCBcImZsZXhcIikpO1xuXG4gICAgICAgIC8vU2NhbGUgZmxleCB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAxIHNvIHRoZXkgc3VtIHRvIDEsIGF2b2lkaW5nIGFuIGFwcGFyZW50XG4gICAgICAgIC8vZmxleCBidWcgd2hlcmUgc3BhY2UgaXMgbG9zdCBpZiBzdW0gb2YgZmxleCB2YWx1ZXMgaXMgbGVzcyB0aGFuIDEuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN0YXRlLmNoaWxkcmVuW2ldLmZsZXggPSBTdGFuZGFyZExpYi5ub3JtYWxpemUoc3RhdGUuY2hpbGRyZW5baV0uZmxleCwgMCwgdG90YWxTaXplQ2hpbGRyZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIHVwZGF0ZUxheW91dCh0b29sRHJhZ2dlZCwgdG9vbERyb3BwZWRPbiwgZHJvcFpvbmUpIHtcblxuICAgICAgICBpZighdGhpcy50b29sRHJhZ2dlZCB8fCAhdGhpcy50b29sT3ZlciB8fCAhdGhpcy5kcm9wWm9uZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld1N0YXRlID0gXy5jbG9uZURlZXAodGhpcy53ZWF2ZS5wYXRoKExBWU9VVCkuZ2V0U3RhdGUoKSk7XG4gICAgICAgIHZhciBzcmMgPSBTdGFuZGFyZExpYi5maW5kRGVlcChuZXdTdGF0ZSwge2lkOiB0b29sRHJhZ2dlZH0pO1xuICAgICAgICB2YXIgZGVzdCA9IFN0YW5kYXJkTGliLmZpbmREZWVwKG5ld1N0YXRlLCB7aWQ6IHRvb2xEcm9wcGVkT259KTtcbiAgICAgICAgaWYoXy5pc0VxdWFsKHNyYy5pZCwgZGVzdC5pZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGRyb3Bab25lID09PSBcImNlbnRlclwiKSB7XG4gICAgICAgICAgICB2YXIgc3JjSWQgPSBzcmMuaWQ7XG4gICAgICAgICAgICBzcmMuaWQgPSBkZXN0LmlkO1xuICAgICAgICAgICAgZGVzdC5pZCA9IHNyY0lkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNyY1BhcmVudEFycmF5ID0gU3RhbmRhcmRMaWIuZmluZERlZXAobmV3U3RhdGUsIChvYmopID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopICYmIG9iai5pbmRleE9mKHNyYykgPj0gMDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzcmNQYXJlbnRBcnJheS5zcGxpY2Uoc3JjUGFyZW50QXJyYXkuaW5kZXhPZihzcmMpLCAxKTtcblxuICAgICAgICAgICAgZGVsZXRlIGRlc3QuaWQ7XG4gICAgICAgICAgICBkZXN0LmRpcmVjdGlvbiA9IChkcm9wWm9uZSA9PT0gVE9QIHx8IGRyb3Bab25lID09PSBCT1RUT00pID8gVkVSVElDQUwgOiBIT1JJWk9OVEFMO1xuXG4gICAgICAgICAgICBkZXN0LmNoaWxkcmVuID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xEcmFnZ2VkLFxuICAgICAgICAgICAgICAgICAgICBmbGV4OiAwLjVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xEcm9wcGVkT24sXG4gICAgICAgICAgICAgICAgICAgIGZsZXg6IDAuNVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZihkcm9wWm9uZSA9PT0gQk9UVE9NIHx8IGRyb3Bab25lID09PSBSSUdIVCkge1xuICAgICAgICAgICAgICAgIGRlc3QuY2hpbGRyZW4ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2F2ZVN0YXRlKG5ld1N0YXRlKTtcbiAgICB9XG5cbiAgICByZW5kZXIgKCkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdmFyIG5ld1N0YXRlID0gdGhpcy53ZWF2ZS5wYXRoKExBWU9VVCkuZ2V0U3RhdGUoKTtcblxuICAgICAgICB2YXIgcGF0aHMgPSB0aGlzLndlYXZlLnBhdGgoKS5nZXRDaGlsZHJlbigpO1xuICAgICAgICB2YXIgcmVjdDtcbiAgICAgICAgaWYodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHBhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IHBhdGhzW2ldO1xuICAgICAgICAgICAgdmFyIGltcGwgPSBwYXRoLmdldFR5cGUoKTtcbiAgICAgICAgICAgIGlmKGltcGwgPT09IFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6RXh0ZXJuYWxUb29sXCIgJiYgcGF0aC5nZXRUeXBlKFwidG9vbENsYXNzXCIpKSB7XG4gICAgICAgICAgICAgICAgaW1wbCA9IHBhdGguZ2V0U3RhdGUoXCJ0b29sQ2xhc3NcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW1wbCA9PT0gXCJ3ZWF2ZWpzLmNvcmUuTGlua2FibGVIYXNoTWFwXCIgJiYgcGF0aC5nZXRUeXBlKFwiY2xhc3NcIikpXG4gICAgICAgICAgICBpbXBsID0gcGF0aC5nZXRTdGF0ZShcImNsYXNzXCIpO1xuICAgICAgICAgICAgaW1wbCA9IGdldFRvb2xJbXBsZW1lbnRhdGlvbihpbXBsKTtcbiAgICAgICAgICAgIHZhciB0b29sTmFtZSA9IHBhdGguZ2V0UGF0aCgpWzBdO1xuICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgICAgICB2YXIgdG9vbFJlY3Q7XG4gICAgICAgICAgICB2YXIgdG9vbFBvc2l0aW9uO1xuICAgICAgICAgICAgaWYoaW1wbCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMucmVmc1tMQVlPVVRdICYmIHJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoaXMucmVmc1tMQVlPVVRdLmdldERPTU5vZGVGcm9tSWQocGF0aC5nZXRQYXRoKCkpO1xuICAgICAgICAgICAgICAgICAgICBpZihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVjdCA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sUG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0b29sUmVjdC50b3AgLSByZWN0LnRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0b29sUmVjdC5sZWZ0IC0gcmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0b29sUmVjdC5yaWdodCAtIHRvb2xSZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0b29sUmVjdC5ib3R0b20gLSB0b29sUmVjdC50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKDxXZWF2ZVRvb2wgcmVmPXt0b29sTmFtZX0ga2V5PXt0b29sTmFtZX0gdG9vbFBhdGg9e3BhdGh9IHN0eWxlPXt0b29sUG9zaXRpb259XG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3RoaXMub25EcmFnT3Zlci5iaW5kKHRoaXMsIHBhdGguZ2V0UGF0aCgpKX0gb25EcmFnU3RhcnQ9e3RoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzLCBwYXRoLmdldFBhdGgoKSl9IG9uRHJhZ0VuZD17dGhpcy5vbkRyYWdFbmQuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAgICAgLz4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj17KGVsdCkgPT4geyB0aGlzLmVsZW1lbnQgPSBlbHQ7IH19IHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBkaXNwbGF5OiBcImZsZXhcIiwgcG9zaXRpb246IFwicmVsYXRpdmVcIn19PlxuICAgICAgICAgICAgICAgICAgICA8TGF5b3V0IGtleT17TEFZT1VUfSByZWY9e0xBWU9VVH0gc3RhdGU9e18uY2xvbmVEZWVwKG5ld1N0YXRlKX0gb25TdGF0ZUNoYW5nZT17dGhpcy5zYXZlU3RhdGUuYmluZCh0aGlzKX0vPlxuICAgICAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICAgICAgICAgIDxUb29sT3ZlcmxheSByZWY9e1RPT0xPVkVSTEFZfS8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydCBkZWZhdWx0IFdlYXZlTGF5b3V0TWFuYWdlcjtcbiIsImltcG9ydCBqcXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuaW1wb3J0IGxvZGFzaCBmcm9tIFwibG9kYXNoXCI7XG5cbmZ1bmN0aW9uIHBlcmNlbnRUb051bWJlcihwZXJjZW50U3RyaW5nKVxue1xuICAgIGlmIChwZXJjZW50U3RyaW5nLmVuZHNXaXRoKFwiJVwiKSlcbiAgICB7XG4gICAgICAgIHZhciBwZXJjZW50VmFsdWUgPSBOdW1iZXIocGVyY2VudFN0cmluZy5zdWJzdHJpbmcoMCwgcGVyY2VudFN0cmluZy5sZW5ndGggLSAxKSk7XG4gICAgICAgIHJldHVybiBwZXJjZW50VmFsdWUgLyAxMDAuMDtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihwZXJjZW50U3RyaW5nKTtcbiAgICB9XG59XG5cbmNsYXNzIFdlYXZlUGFuZWwge1xuXG4gICAgY29uc3RydWN0b3IocGFyZW50LCB0b29sUGF0aCwgVG9vbENsYXNzKSB7XG4gICAgICAgIHRoaXMudG9vbFBhdGggPSB0b29sUGF0aDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgICAgICAgdGhpcy5wbG90TWFuYWdlclBhdGggPSB0b29sUGF0aC5wdXNoKFwiY2hpbGRyZW5cIiwgXCJ2aXN1YWxpemF0aW9uXCIsIFwicGxvdE1hbmFnZXJcIik7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSB0b29sUGF0aC5nZXRQYXRoKCkucG9wKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGpxdWVyeShcIjxkaXY+PC9kaXY+XCIpLmFwcGVuZFRvKHBhcmVudCkuYXR0cihcImlkXCIsIHRoaXMudG9vbE5hbWUpXG4gICAgICAgICAgICAuY3NzKFwiYm9yZGVyU3R5bGVcIiwgXCJzb2xpZFwiKVxuICAgICAgICAgICAgLmNzcyhcImJvcmRlckNvbG9yXCIsIFwiNEQ1MjU4XCIpXG4gICAgICAgICAgICAuY3NzKFwiYm9yZGVyV2lkdGhcIiwgXCIycHhcIilcbiAgICAgICAgICAgIC5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwicmdiYSgyNTUsIDI1NSwgMjU1LCAxLjApXCIpXG4gICAgICAgICAgICAuY3NzKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKTtcblxuICAgICAgICB0aGlzLnRvb2wgPSBuZXcgVG9vbENsYXNzKHRoaXMuZWxlbWVudCwgdG9vbFBhdGgpO1xuICAgICAgICB2YXIgYm91bmRGdW5jID0gbG9kYXNoLmRlYm91bmNlKHRoaXMuX3BhbmVsQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuXG4gICAgICAgIGpxdWVyeSh3aW5kb3cpLnJlc2l6ZShib3VuZEZ1bmMpO1xuXG4gICAgICAgIFtcInBhbmVsWVwiLCBcInBhbmVsWFwiLCBcInBhbmVsSGVpZ2h0XCIsIFwicGFuZWxXaWR0aFwiLCBcIm1heGltaXplZFwiLCBcInpPcmRlclwiLCBcInBhbmVsQm9yZGVyQ29sb3JcIl0uZm9yRWFjaChcbiAgICAgICAgICAgIChpdGVtKSA9PiB7IHRoaXMudG9vbFBhdGgucHVzaChpdGVtKS5hZGRDYWxsYmFjayhib3VuZEZ1bmMsIHRydWUsIGZhbHNlKTsgfVxuICAgICAgICAsIHRoaXMpO1xuXG4gICAgfVxuXG4gICAgX3BhbmVsQ2hhbmdlZCgpIHtcbiAgICAgICAgdmFyIHRvcCwgbGVmdCwgaGVpZ2h0LCB3aWR0aDtcbiAgICAgICAgdmFyIHRvb2xQYXRoID0gdGhpcy50b29sUGF0aDtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50O1xuXG4gICAgICAgIGlmICh0b29sUGF0aC5nZXRTdGF0ZShcIm1heGltaXplZFwiKSlcbiAgICAgICAge1xuICAgICAgICAgICAgdG9wID0gMDtcbiAgICAgICAgICAgIGxlZnQgPSAwO1xuICAgICAgICAgICAgaGVpZ2h0ID0ganF1ZXJ5KHBhcmVudCkuaGVpZ2h0KCk7XG4gICAgICAgICAgICB3aWR0aCA9IGpxdWVyeShwYXJlbnQpLndpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0b3AgPSBwZXJjZW50VG9OdW1iZXIodG9vbFBhdGguZ2V0U3RhdGUoXCJwYW5lbFlcIikpICoganF1ZXJ5KHBhcmVudCkuaGVpZ2h0KCk7XG4gICAgICAgICAgICBsZWZ0ID0gcGVyY2VudFRvTnVtYmVyKHRvb2xQYXRoLmdldFN0YXRlKFwicGFuZWxYXCIpKSAqIGpxdWVyeShwYXJlbnQpLndpZHRoKCk7XG4gICAgICAgICAgICBoZWlnaHQgPSBwZXJjZW50VG9OdW1iZXIodG9vbFBhdGguZ2V0U3RhdGUoXCJwYW5lbEhlaWdodFwiKSkgKiBqcXVlcnkocGFyZW50KS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHdpZHRoID0gcGVyY2VudFRvTnVtYmVyKHRvb2xQYXRoLmdldFN0YXRlKFwicGFuZWxXaWR0aFwiKSkgKiBqcXVlcnkocGFyZW50KS53aWR0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50LmNzcyhcImJvcmRlckNvbG9yXCIsIHRvb2xQYXRoLmdldFN0YXRlKFwicGFuZWxCb3JkZXJDb2xvclwiKSk7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIsIFwiYWJzb2x1dGVcIilcbiAgICAgICAgICAgIC5jc3Moe3RvcCwgbGVmdCwgaGVpZ2h0LCB3aWR0aCwgXCJtYXgtaGVpZ2h0XCI6IGhlaWdodCwgXCJtYXgtd2lkdGhcIjogd2lkdGh9KVxuICAgICAgICAgICAgLmNzcyh7XCItd2Via2l0LXRyYW5zZm9ybVwiOiBcInRyYW5zbGF0ZVooMClcIn0pOyAvKiBJbiBXZWJraXQsIGZvcmNlcyB0aGUgZGl2IHRvIGJlIGEgY29tcG9zaXRpbmcgbGF5ZXIuICovXG4gICAgICAgIHRoaXMuX3VwZGF0ZUNvbnRlbnRzKCk7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLnRvb2wuZGVzdHJveSgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVQYW5lbDtcbiIsImltcG9ydCBqcXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuaW1wb3J0IGxvZGFzaCBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgV2VhdmVQYW5lbCBmcm9tIFwiLi9XZWF2ZVBhbmVsLmpzXCI7XG4vKipcbiAqIFdlYXZlIHBhbmVsIG1hbmFnZXIgXCJzaW5nbGV0b25cIiBtb2R1bGVcbiAqL1xuXG52YXIgdG9vbFJlZ2lzdHJ5ID0gbnVsbDtcbnZhciB0b29scyA9IHt9O1xudmFyIHdlYXZlUm9vdEVsbXQgPSBudWxsO1xudmFyIHdlYXZlUm9vdFBhdGggPSBudWxsO1xuXG5mdW5jdGlvbiBfY3JlYXRlVG9vbChwYXJlbnQsIHBhdGgpIHtcbiAgICB2YXIgVG9vbENsYXNzID0gdG9vbFJlZ2lzdHJ5W3BhdGguZ2V0VHlwZSgpXTtcbiAgICB2YXIgcGFuZWw7XG5cbiAgICBpZiAoVG9vbENsYXNzKVxuICAgIHtcbiAgICAgICAgcGFuZWwgPSBuZXcgV2VhdmVQYW5lbChwYXJlbnQsIHBhdGgsIFRvb2xDbGFzcyk7XG4gICAgfVxuICAgIHJldHVybiBwYW5lbDtcbn1cblxuZnVuY3Rpb24gX3Rvb2xzQ2hhbmdlZCgpIHtcbiAgICB2YXIgdG9vbE5hbWVzID0gbG9kYXNoLmtleXModG9vbHMpO1xuICAgIHZhciBuZXdOYW1lcyA9IHdlYXZlUm9vdFBhdGguZ2V0TmFtZXMoKTtcblxuICAgIHZhciByZW1vdmVkVG9vbE5hbWVzID0gbG9kYXNoLmRpZmZlcmVuY2UodG9vbE5hbWVzLCBuZXdOYW1lcyk7XG4gICAgdmFyIGFkZGVkVG9vbE5hbWVzID0gbG9kYXNoLmRpZmZlcmVuY2UobmV3TmFtZXMsIHRvb2xOYW1lcyk7XG5cbiAgICByZW1vdmVkVG9vbE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdG9vbHNbbmFtZV0uZGVzdHJveSgpO1xuICAgICAgICBkZWxldGUgdG9vbHNbbmFtZV07XG4gICAgfSk7XG5cbiAgICBhZGRlZFRvb2xOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciB0b29sID0gX2NyZWF0ZVRvb2wod2VhdmVSb290RWxtdCwgd2VhdmVSb290UGF0aC5wdXNoKG5hbWUpKTtcbiAgICAgICAgaWYgKHRvb2wpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRvb2xzW25hbWVdID0gdG9vbDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIHpJbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaWR4IGluIG5ld05hbWVzKVxuICAgIHtcbiAgICAgICAgbGV0IHRvb2wgPSB0b29sc1tuZXdOYW1lc1tpZHhdXTtcblxuICAgICAgICBpZiAoIXRvb2wpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1vZGlmaWVyID0gOTAwMCAqIHRvb2wudG9vbFBhdGgucHVzaChcInpPcmRlclwiKS5nZXRTdGF0ZSgpO1xuICAgICAgICB0b29sLmVsZW1lbnQuY3NzKFwiei1pbmRleFwiLCB6SW5kZXggKyBtb2RpZmllcik7XG5cbiAgICAgICAgekluZGV4Kys7XG4gICAgfVxufVxuXG4vLyBwdWJsaWNseSBleHBvc2VkIGZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oYXNDbGFzc05hbWUsIGpzQ2xhc3MpIHtcbiAgICBpZiAoIXRvb2xSZWdpc3RyeSlcbiAgICB7XG4gICAgICAgIHRvb2xSZWdpc3RyeSA9IHt9O1xuICAgIH1cbiAgICB0b29sUmVnaXN0cnlbYXNDbGFzc05hbWVdID0ganNDbGFzcztcbn1cblxuLy8gcHVibGljbHkgZXhwb3NlZCBmdW5jdGlvblxuLy8gaW5pdGlhbGl6ZSB0aGUgd2VhdmUgcGFuZWwgbWFuYWdlclxuLy8gYnkgc2V0dGluZyB1cCB0aGUgY2FsbGJhY2suXG5leHBvcnQgZnVuY3Rpb24gaW5pdChyb290LCB3ZWF2ZSkge1xuICAgIHdlYXZlUm9vdEVsbXQgPSBqcXVlcnkocm9vdCk7XG4gICAgd2VhdmVSb290UGF0aCA9IHdlYXZlLnBhdGgoKTtcbiAgICB3ZWF2ZVJvb3RQYXRoLmdldFZhbHVlKFwiY2hpbGRMaXN0Q2FsbGJhY2tzLmFkZEdyb3VwZWRDYWxsYmFja1wiKShudWxsLCBfdG9vbHNDaGFuZ2VkLCB0cnVlKTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL291dHRzL3V0aWxzL1N0YW5kYXJkTGliLmpzXCI7XG5pbXBvcnQgSlNaaXAgZnJvbSBcImpzemlwXCI7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IFdlYXZlTGF5b3V0TWFuYWdlciBmcm9tIFwiLi9XZWF2ZUxheW91dE1hbmFnZXIuanN4XCI7XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbi8qZ2xvYmFsIFdlYXZlLCB3ZWF2ZWpzKi9cblxuLy8gdGVtcG9yYXJ5IHNvbHV0aW9uXG53ZWF2ZWpzLnV0aWwuSlMuSlNaaXAgPSBKU1ppcDtcblxudmFyIHdlYXZlID0gd2luZG93LndlYXZlIHx8IChvcGVuZXIgJiYgb3BlbmVyLndlYXZlKTtcblxudmFyIHVybFBhcmFtcyA9IFN0YW5kYXJkTGliLmdldFVybFBhcmFtcygpO1xuaWYgKCF3ZWF2ZSAmJiB1cmxQYXJhbXMuZmlsZSkge1xuICAgIHdpbmRvdy53ZWF2ZSA9IHdlYXZlID0gbmV3IFdlYXZlKCk7XG4gICAgd2VhdmVqcy5jb3JlLldlYXZlQXJjaGl2ZS5sb2FkVXJsKHdlYXZlLCB1cmxQYXJhbXMuZmlsZSkudGhlbihyZW5kZXIpO1xufVxuZWxzZSB7XG4gICAgcmVuZGVyKCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICBpZih3ZWF2ZSkge1xuICAgICAgICAkKCgpID0+IHtcbiAgICAgICAgICAgIFJlYWN0RE9NLnJlbmRlcig8V2VhdmVMYXlvdXRNYW5hZ2VyIHdlYXZlPXt3ZWF2ZX0vPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3ZWF2ZUVsdFwiKSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIm1pc3Npbmcgd2VhdmUgaW5zdGFuY2UuXCIpO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgZDMgZnJvbSBcImQzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFic3RyYWN0V2VhdmVUb29sIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuXG5cdGNvbnN0cnVjdG9yKHByb3BzKSB7XG5cdFx0c3VwZXIocHJvcHMpO1xuXHRcdHRoaXMudG9vbFBhdGggPSBwcm9wcy50b29sUGF0aDtcblx0XHR0aGlzLnBhdGhzID0ge307XG5cdH1cblxuXHRnZXRFbGVtZW50U2l6ZSgpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0d2lkdGg6IHRoaXMud3JhcHBlci5jbGllbnRXaWR0aCxcblx0XHRcdGhlaWdodDogdGhpcy53cmFwcGVyLmNsaWVudEhlaWdodFxuXHRcdH07XG5cdH1cblxuXHQvLyB0aGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgcGF0aCBjb25maWd1cmF0aW9uc1xuXHQvLyBhIHBhdGggY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGEgcGF0aCBvYmplY3QgbmFtZSwgdGhlIHdlYXZlIHBhdGggYW5kIGFuXG5cdC8vIG9wdGlvbmFsIGNhbGxiYWNrIG9yIGFycmF5IG9mIGNhbGxiYWNrc1xuXHRpbml0aWFsaXplUGF0aHMocHJvcGVydGllcykge1xuXHRcdHByb3BlcnRpZXMuZm9yRWFjaCgocGF0aENvbmYpID0+IHtcblx0XHRcdHRoaXMucGF0aHNbcGF0aENvbmYubmFtZV0gPSBwYXRoQ29uZi5wYXRoO1xuXHRcdFx0aWYocGF0aENvbmYuY2FsbGJhY2tzKSB7XG5cdFx0XHRcdHZhciBjYWxsYmFja3MgPSBBcnJheS5pc0FycmF5KHBhdGhDb25mLmNhbGxiYWNrcykgPyBwYXRoQ29uZi5jYWxsYmFja3MgOiBbcGF0aENvbmYuY2FsbGJhY2tzXTtcblx0XHRcdFx0Y2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wYXRoc1twYXRoQ29uZi5uYW1lXS5hZGRDYWxsYmFjayh0aGlzLCBjYWxsYmFjaywgdHJ1ZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Y29tcG9uZW50RGlkVXBkYXRlICgpIHtcblx0fVxuXG5cdGNvbXBvbmVudERpZE1vdW50KCkge1xuXHR9XG5cblx0Y29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdH1cblxuXHRoYW5kbGVDbGljayhldmVudCkge1xuXG5cdH1cblxuXHRyZW5kZXIoKSB7XG5cdFx0cmV0dXJuIDxkaXYgcmVmPXsoZWx0KSA9PiB7IHRoaXMud3JhcHBlciA9IGVsdDsgfX0gc3R5bGU9e3RoaXMucHJvcHMuc3R5bGV9PlxuXHRcdFx0PGRpdiByZWY9eyhlbHQpID0+IHt0aGlzLmVsZW1lbnQgPSBlbHQ7IH19IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gc3R5bGU9e3t3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIsIG1heEhlaWdodDogXCIxMDAlXCJ9fT48L2Rpdj5cblx0XHQ8L2Rpdj47XG5cdH1cblxuXHRjdXN0b21Gb2N1cyhhcnJheSwgdHlwZSwgZmlsdGVyKSB7XG5cdFx0YXJyYXkuZm9yRWFjaCggKGluZGV4KSA9PiB7XG5cdFx0XHRkMy5zZWxlY3QoZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKHR5cGUpLmZpbHRlcihmaWx0ZXIpWzBdW2luZGV4XSkuc3R5bGUoXCJvcGFjaXR5XCIsMS4wKTtcblx0XHR9KTtcblx0fVxuXG5cdGN1c3RvbURlRm9jdXMoYXJyYXksIHR5cGUsIGZpbHRlcikge1xuXHRcdGFycmF5LmZvckVhY2goIChpbmRleCkgPT4ge1xuXHRcdFx0ZDMuc2VsZWN0KGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbCh0eXBlKS5maWx0ZXIoZmlsdGVyKVswXVtpbmRleF0pLnN0eWxlKFwib3BhY2l0eVwiLDAuMyk7XG5cdFx0fSk7XG5cdH1cbn1cbiIsImltcG9ydCB7cmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb259IGZyb20gXCIuLi8uLi9vdXR0cy9XZWF2ZVRvb2wuanN4XCI7XG5pbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5cbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbC5qc3hcIjtcblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCBMYXllciBmcm9tIFwiLi9tYXAvbGF5ZXJzL0xheWVyLmpzXCI7XG5pbXBvcnQgRmVhdHVyZUxheWVyIGZyb20gXCIuL21hcC9sYXllcnMvRmVhdHVyZUxheWVyLmpzXCI7XG5pbXBvcnQgR2VvbWV0cnlMYXllciBmcm9tIFwiLi9tYXAvbGF5ZXJzL0dlb21ldHJ5TGF5ZXIuanNcIjtcbmltcG9ydCBUaWxlTGF5ZXIgZnJvbSBcIi4vbWFwL2xheWVycy9UaWxlTGF5ZXIuanNcIjtcbmltcG9ydCBJbWFnZUdseXBoTGF5ZXIgZnJvbSBcIi4vbWFwL2xheWVycy9JbWFnZUdseXBoTGF5ZXIuanNcIjtcbmltcG9ydCBTY2F0dGVyUGxvdExheWVyIGZyb20gXCIuL21hcC9sYXllcnMvU2NhdHRlclBsb3RMYXllci5qc1wiO1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG4vKmdsb2JhbCB3ZWF2ZWpzKi9cblxuaW1wb3J0IHtQYW5DbHVzdGVyLCBJbnRlcmFjdGlvbk1vZGVDbHVzdGVyfSBmcm9tIFwiLi9tYXAvY29udHJvbHMuanNcIjtcbmltcG9ydCB3ZWF2ZU1hcEludGVyYWN0aW9ucyBmcm9tIFwiLi9tYXAvaW50ZXJhY3Rpb25zLmpzXCI7XG5cbmNsYXNzIFdlYXZlT3BlbkxheWVyc01hcCBleHRlbmRzIEFic3RyYWN0V2VhdmVUb29sIHtcblxuXHRjb25zdHJ1Y3Rvcihwcm9wcylcblx0e1xuXHRcdHN1cGVyKHByb3BzKTtcblxuXHRcdHRoaXMubGF5ZXJzID0ge307XG5cdH1cblxuXHRjb21wb25lbnREaWRNb3VudCgpXG5cdHtcblx0XHRzdXBlci5jb21wb25lbnREaWRNb3VudCgpO1xuXG5cdFx0dGhpcy5pbnRlcmFjdGlvbk1vZGVQYXRoID0gdGhpcy50b29sUGF0aC53ZWF2ZS5wYXRoKFwiV2VhdmVQcm9wZXJ0aWVzXCIsIFwidG9vbEludGVyYWN0aW9uc1wiLCBcImRlZmF1bHREcmFnTW9kZVwiKTtcblxuXHRcdHRoaXMubWFwID0gbmV3IG9sLk1hcCh7XG5cdFx0XHRpbnRlcmFjdGlvbnM6IHdlYXZlTWFwSW50ZXJhY3Rpb25zKHRoaXMpLFxuXHRcdFx0Y29udHJvbHM6IFtdLFxuXHRcdFx0dGFyZ2V0OiB0aGlzLmVsZW1lbnRcblx0XHR9KTtcblxuXG5cdFx0dGhpcy56b29tQnV0dG9ucyA9IG5ldyBvbC5jb250cm9sLlpvb20oKTtcblx0XHR0aGlzLnNsaWRlciA9IG5ldyBvbC5jb250cm9sLlpvb21TbGlkZXIoKTtcblx0XHR0aGlzLnBhbiA9IG5ldyBQYW5DbHVzdGVyKCk7XG5cblx0XHR0aGlzLnRvb2xQYXRoLnB1c2goXCJwcm9qZWN0aW9uU1JTXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMub25Qcm9qZWN0aW9uQ2hhbmdlZCwgdHJ1ZSk7XG5cdFx0dGhpcy50b29sUGF0aC5wdXNoKFwic2hvd1pvb21Db250cm9sc1wiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLm9uWm9vbUNvbnRyb2xUb2dnbGUsIHRydWUpO1xuXHRcdHRoaXMudG9vbFBhdGgucHVzaChcInNob3dNb3VzZU1vZGVDb250cm9sc1wiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLm9uTW91c2VNb2RlQ29udHJvbFRvZ2dsZSwgdHJ1ZSk7XG5cblx0XHR0aGlzLm1vdXNlTW9kZUJ1dHRvbnMgPSBuZXcgSW50ZXJhY3Rpb25Nb2RlQ2x1c3Rlcih7aW50ZXJhY3Rpb25Nb2RlUGF0aDogdGhpcy5pbnRlcmFjdGlvbk1vZGVQYXRofSk7XG5cblx0XHR0aGlzLnBsb3R0ZXJzUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaChcImNoaWxkcmVuXCIsIFwidmlzdWFsaXphdGlvblwiLCBcInBsb3RNYW5hZ2VyXCIsIFwicGxvdHRlcnNcIik7XG5cdFx0dGhpcy5sYXllclNldHRpbmdzUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaChcImNoaWxkcmVuXCIsIFwidmlzdWFsaXphdGlvblwiLCBcInBsb3RNYW5hZ2VyXCIsIFwibGF5ZXJTZXR0aW5nc1wiKTtcblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoKFwiY2hpbGRyZW5cIiwgXCJ2aXN1YWxpemF0aW9uXCIsIFwicGxvdE1hbmFnZXJcIiwgXCJ6b29tQm91bmRzXCIpO1xuXG5cdFx0dGhpcy5wbG90dGVyc1BhdGguZ2V0T2JqZWN0KCkuY2hpbGRMaXN0Q2FsbGJhY2tzLmFkZEdyb3VwZWRDYWxsYmFjayh0aGlzLCB0aGlzLnBsb3R0ZXJzQ2hhbmdlZCwgdHJ1ZSk7XG5cblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuZ2V0U2Vzc2lvbkNlbnRlciwgdHJ1ZSk7XG5cdH1cblxuXHRvblByb2plY3Rpb25DaGFuZ2VkKClcblx0e1xuXHRcdGxldCBwcm9qZWN0aW9uU1JTID0gdGhpcy50b29sUGF0aC5wdXNoKFwicHJvamVjdGlvblNSU1wiKS5nZXRTdGF0ZSgpIHx8IFwiRVBTRzozODU3XCI7XG5cdFx0bGV0IHZpZXcgPSBuZXcgb2wuVmlldyh7cHJvamVjdGlvbjogcHJvamVjdGlvblNSU30pO1xuXG5cdFx0dGhpcy5jZW50ZXJDYWxsYmFja0hhbmRsZSA9IHZpZXcub24oXCJjaGFuZ2U6Y2VudGVyXCIsIHRoaXMuc2V0U2Vzc2lvbkNlbnRlciwgdGhpcyk7XG5cdFx0dGhpcy5yZXNvbHV0aW9uQ2FsbGJhY2tIYW5kbGUgPSB2aWV3Lm9uKFwiY2hhbmdlOnJlc29sdXRpb25cIiwgdGhpcy5zZXRTZXNzaW9uWm9vbSwgdGhpcyk7XG5cdFx0dGhpcy5tYXAuc2V0Vmlldyh2aWV3KTtcblxuXHRcdHRoaXMuZ2V0U2Vzc2lvbkNlbnRlcigpO1xuXHR9XG5cblx0cmVzaXplKClcblx0e1xuXHRcdHRoaXMubWFwLnVwZGF0ZVNpemUoKTtcblx0XHR2YXIgdmlld3BvcnQgPSB0aGlzLm1hcC5nZXRWaWV3cG9ydCgpO1xuXHRcdHZhciBzY3JlZW5Cb3VuZHMgPSBuZXcgd2VhdmVqcy5nZW9tLkJvdW5kczJEKDAsIDAsIHZpZXdwb3J0LmNsaWVudFdpZHRoLCB2aWV3cG9ydC5jbGllbnRIZWlnaHQpO1xuXHRcdHRoaXMuem9vbUJvdW5kc1BhdGguZ2V0T2JqZWN0KCkuc2V0U2NyZWVuQm91bmRzKHNjcmVlbkJvdW5kcywgdHJ1ZSk7XG5cdH1cblxuXHR1cGRhdGVDb250cm9sUG9zaXRpb25zKClcblx0e1xuXHRcdGlmICh0aGlzLnRvb2xQYXRoLnB1c2goXCJzaG93Wm9vbUNvbnRyb2xzXCIpLmdldFN0YXRlKCkpXG5cdFx0e1xuXHRcdFx0anF1ZXJ5KHRoaXMuZWxlbWVudCkuZmluZChcIi5vbC1jb250cm9sLnBhbkNsdXN0ZXJcIikuY3NzKHt0b3A6IFwiMC41ZW1cIiwgbGVmdDogXCIwLjVlbVwifSk7XG5cdFx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5maW5kKFwiLm9sLWNvbnRyb2wub2wtem9vbVwiKS5jc3Moe3RvcDogXCI1LjVlbVwiLCBsZWZ0OiBcIjIuMDc1ZW1cIn0pO1xuXHRcdFx0anF1ZXJ5KHRoaXMuZWxlbWVudCkuZmluZChcIi5vbC1jb250cm9sLm9sLXpvb21zbGlkZXJcIikuY3NzKHt0b3A6IFwiOS4yNWVtXCIsIGxlZnQ6IFwiMi4wNzVlbVwifSk7XG5cdFx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5maW5kKFwiLm9sLWNvbnRyb2wuaU1vZGVDbHVzdGVyXCIpLmNzcyh7dG9wOiBcIjIwLjc1ZW1cIiwgbGVmdDogXCIwLjZlbVwifSk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5maW5kKFwiLm9sLWNvbnRyb2xcIik7XG5cdFx0fVxuXHR9XG5cblxuXHRvbk1vdXNlTW9kZUNvbnRyb2xUb2dnbGUoKVxuXHR7XG5cdFx0bGV0IHNob3dNb3VzZU1vZGVDb250cm9scyA9IHRoaXMudG9vbFBhdGgucHVzaChcInNob3dNb3VzZU1vZGVDb250cm9sc1wiKS5nZXRTdGF0ZSgpO1xuXHRcdGlmIChzaG93TW91c2VNb2RlQ29udHJvbHMpXG5cdFx0e1xuXHRcdFx0dGhpcy5tYXAuYWRkQ29udHJvbCh0aGlzLm1vdXNlTW9kZUJ1dHRvbnMpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzLm1vdXNlTW9kZUJ1dHRvbnMpO1xuXHRcdH1cblx0XHR0aGlzLnVwZGF0ZUNvbnRyb2xQb3NpdGlvbnMoKTtcblx0fVxuXG5cblx0b25ab29tQ29udHJvbFRvZ2dsZSgpXG5cdHtcblx0XHRsZXQgc2hvd1pvb21Db250cm9scyA9IHRoaXMudG9vbFBhdGgucHVzaChcInNob3dab29tQ29udHJvbHNcIikuZ2V0U3RhdGUoKTtcblx0XHRpZiAoc2hvd1pvb21Db250cm9scylcblx0XHR7XG5cdFx0XHR0aGlzLm1hcC5hZGRDb250cm9sKHRoaXMuc2xpZGVyKTtcblx0XHRcdHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5wYW4pO1xuXHRcdFx0dGhpcy5tYXAuYWRkQ29udHJvbCh0aGlzLnpvb21CdXR0b25zKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMubWFwLnJlbW92ZUNvbnRyb2wodGhpcy5zbGlkZXIpO1xuXHRcdFx0dGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzLnBhbik7XG5cdFx0XHR0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMuem9vbUJ1dHRvbnMpO1xuXHRcdH1cblx0XHR0aGlzLnVwZGF0ZUNvbnRyb2xQb3NpdGlvbnMoKTtcblx0fVxuXG5cdHNldFNlc3Npb25DZW50ZXIoKVxuXHR7XG5cdFx0dmFyIFt4Q2VudGVyLCB5Q2VudGVyXSA9IHRoaXMubWFwLmdldFZpZXcoKS5nZXRDZW50ZXIoKTtcblxuXHRcdHZhciB6b29tQm91bmRzID0gdGhpcy56b29tQm91bmRzUGF0aC5nZXRPYmplY3QoKTtcblx0XHQvLyByZW1vdmUgY2FsbGJhY2sgdGVtcG9yYXJpbHkgdG8gYXZvaWQgdHJpZ2dlcmluZyBkdWUgdG8gcm91bmRpbmcgZXJyb3I/XG5cdFx0Ly8gVE9ETyAtIGF2b2lkIHJvdW5kaW5nIGVycm9yXG5cdFx0dGhpcy56b29tQm91bmRzUGF0aC5yZW1vdmVDYWxsYmFjayh0aGlzLCB0aGlzLmdldFNlc3Npb25DZW50ZXIpO1xuXG5cdFx0dmFyIGRhdGFCb3VuZHMgPSBuZXcgd2VhdmVqcy5nZW9tLkJvdW5kczJEKCk7XG5cdFx0em9vbUJvdW5kcy5nZXREYXRhQm91bmRzKGRhdGFCb3VuZHMpO1xuXHRcdGRhdGFCb3VuZHMuc2V0WENlbnRlcih4Q2VudGVyKTtcblx0XHRkYXRhQm91bmRzLnNldFlDZW50ZXIoeUNlbnRlcik7XG5cdFx0em9vbUJvdW5kcy5zZXREYXRhQm91bmRzKGRhdGFCb3VuZHMpO1xuXG5cdFx0dGhpcy56b29tQm91bmRzUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLmdldFNlc3Npb25DZW50ZXIpO1xuXHR9XG5cblx0c2V0U2Vzc2lvblpvb20oKVxuXHR7XG5cdFx0dmFyIHJlc29sdXRpb24gPSB0aGlzLm1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpO1xuXG5cdFx0dmFyIHpvb21Cb3VuZHMgPSB0aGlzLnpvb21Cb3VuZHNQYXRoLmdldE9iamVjdCgpO1xuXHRcdC8vIHJlbW92ZSBjYWxsYmFjayB0ZW1wb3JhcmlseSB0byBhdm9pZCB0cmlnZ2VyaW5nIGR1ZSB0byByb3VuZGluZyBlcnJvcj9cblx0XHQvLyBUT0RPIC0gYXZvaWQgcm91bmRpbmcgZXJyb3Jcblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoLnJlbW92ZUNhbGxiYWNrKHRoaXMsIHRoaXMuZ2V0U2Vzc2lvbkNlbnRlcik7XG5cblx0XHR2YXIgZGF0YUJvdW5kcyA9IG5ldyB3ZWF2ZWpzLmdlb20uQm91bmRzMkQoKTtcblx0XHR2YXIgc2NyZWVuQm91bmRzID0gbmV3IHdlYXZlanMuZ2VvbS5Cb3VuZHMyRCgpO1xuXHRcdHpvb21Cb3VuZHMuZ2V0RGF0YUJvdW5kcyhkYXRhQm91bmRzKTtcblx0XHR6b29tQm91bmRzLmdldFNjcmVlbkJvdW5kcyhzY3JlZW5Cb3VuZHMpO1xuXHRcdGRhdGFCb3VuZHMuc2V0V2lkdGgoc2NyZWVuQm91bmRzLmdldFdpZHRoKCkgKiByZXNvbHV0aW9uKTtcblx0XHRkYXRhQm91bmRzLnNldEhlaWdodChzY3JlZW5Cb3VuZHMuZ2V0SGVpZ2h0KCkgKiByZXNvbHV0aW9uKTtcblx0XHRkYXRhQm91bmRzLm1ha2VTaXplUG9zaXRpdmUoKTtcblx0XHR6b29tQm91bmRzLnNldERhdGFCb3VuZHMoZGF0YUJvdW5kcyk7XG5cblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuZ2V0U2Vzc2lvbkNlbnRlcik7XG5cdH1cblxuXHRnZXRTZXNzaW9uQ2VudGVyKClcblx0e1xuXHRcdHZhciB6b29tQm91bmRzID0gdGhpcy56b29tQm91bmRzUGF0aC5nZXRPYmplY3QoKTtcblx0XHR2YXIgZGF0YUJvdW5kcyA9IG5ldyB3ZWF2ZWpzLmdlb20uQm91bmRzMkQoKTtcblx0XHR6b29tQm91bmRzLmdldERhdGFCb3VuZHMoZGF0YUJvdW5kcyk7XG5cdFx0dmFyIGNlbnRlciA9IFtkYXRhQm91bmRzLmdldFhDZW50ZXIoKSwgZGF0YUJvdW5kcy5nZXRZQ2VudGVyKCldO1xuXHRcdHZhciBzY2FsZSA9IHpvb21Cb3VuZHMuZ2V0WFNjYWxlKCk7XG5cblx0XHR0aGlzLm1hcC5nZXRWaWV3KCkudW4oXCJjaGFuZ2U6Y2VudGVyXCIsIHRoaXMuc2V0U2Vzc2lvbkNlbnRlciwgdGhpcyk7XG5cdFx0dGhpcy5tYXAuZ2V0VmlldygpLnVuKFwiY2hhbmdlOnJlc29sdXRpb25cIiwgdGhpcy5zZXRTZXNzaW9uWm9vbSwgdGhpcyk7XG5cblx0XHR0aGlzLm1hcC5nZXRWaWV3KCkuc2V0Q2VudGVyKGNlbnRlcik7XG5cdFx0dGhpcy5tYXAuZ2V0VmlldygpLnNldFJlc29sdXRpb24oMSAvIHNjYWxlKTtcblxuXHRcdGxvZGFzaC5kZWZlcigoKSA9PiB7XG5cdFx0XHR0aGlzLm1hcC5nZXRWaWV3KCkub24oXCJjaGFuZ2U6Y2VudGVyXCIsIHRoaXMuc2V0U2Vzc2lvbkNlbnRlciwgdGhpcyk7XG5cdFx0XHR0aGlzLm1hcC5nZXRWaWV3KCkub24oXCJjaGFuZ2U6cmVzb2x1dGlvblwiLCB0aGlzLnNldFNlc3Npb25ab29tLCB0aGlzKTtcblx0XHR9KTtcblx0fVxuXG5cdHBsb3R0ZXJzQ2hhbmdlZCgpXG5cdHtcblx0XHR2YXIgb2xkTmFtZXMgPSBsb2Rhc2gua2V5cyh0aGlzLmxheWVycyk7XG5cdFx0dmFyIG5ld05hbWVzID0gdGhpcy5wbG90dGVyc1BhdGguZ2V0TmFtZXMoKTtcblxuXHRcdHZhciByZW1vdmVkTmFtZXMgPSBsb2Rhc2guZGlmZmVyZW5jZShvbGROYW1lcywgbmV3TmFtZXMpO1xuXHRcdHZhciBhZGRlZE5hbWVzID0gbG9kYXNoLmRpZmZlcmVuY2UobmV3TmFtZXMsIG9sZE5hbWVzKTtcblxuXHRcdHJlbW92ZWROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0XHRpZiAodGhpcy5sYXllcnNbbmFtZV0pIHsgdGhpcy5sYXllcnNbbmFtZV0uZGVzdHJveSgpOyB9XG5cdFx0XHRkZWxldGUgdGhpcy5sYXllcnNbbmFtZV07XG5cdFx0fSwgdGhpcyk7XG5cblx0XHRhZGRlZE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdHRoaXMubGF5ZXJzW25hbWVdID0gTGF5ZXIubmV3TGF5ZXIodGhpcywgbmFtZSk7XG5cdFx0fSwgdGhpcyk7XG5cdFx0LyogKi9cblx0XHRmb3IgKGxldCBpZHggaW4gbmV3TmFtZXMpXG5cdFx0e1xuXHRcdFx0bGV0IGxheWVyID0gdGhpcy5sYXllcnNbbmV3TmFtZXNbaWR4XV07XG5cblx0XHRcdGlmICghbGF5ZXIgfHwgIWxheWVyLmxheWVyKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRsYXllci5sYXllci5zZXRaSW5kZXgoaWR4ICsgMik7XG5cdFx0fVxuXHR9XG5cblx0ZGVzdHJveSgpXG5cdHtcblxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdlYXZlT3BlbkxheWVyc01hcDtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpNYXBUb29sXCIsIFdlYXZlT3BlbkxheWVyc01hcCk7XG4iLCJpbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBqcXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuaW1wb3J0IGxvZGFzaCBmcm9tIFwibG9kYXNoXCI7XG5cbi8vIHZhciBpbmhlcml0cyA9IGZ1bmN0aW9uKGNoaWxkQ3RvciwgcGFyZW50Q3Rvcikge1xuLy8gICAvKiogQGNvbnN0cnVjdG9yICovXG4vLyAgIGZ1bmN0aW9uIHRlbXBDdG9yKCkge31cbi8vICAgdGVtcEN0b3IucHJvdG90eXBlID0gcGFyZW50Q3Rvci5wcm90b3R5cGU7XG4vLyAgIGNoaWxkQ3Rvci5zdXBlckNsYXNzXyA9IHBhcmVudEN0b3IucHJvdG90eXBlO1xuLy8gICBjaGlsZEN0b3IucHJvdG90eXBlID0gbmV3IHRlbXBDdG9yKCk7XG4vLyAgIC8qKiBAb3ZlcnJpZGUgKi9cbi8vICAgY2hpbGRDdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNoaWxkQ3Rvcjtcbi8vIH07XG5cbi8vIHZhciBDdXN0b21EcmFnQm94RXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgaW5uZXJFdmVudCkge1xuLy8gXHRvbC5NYXBFdmVudC5jYWxsKHRoaXMsIHR5cGUsIGlubmVyRXZlbnQubWFwLCBpbm5lckV2ZW50LmZyYW1lU3RhdGUpXG4vLyBcdHRoaXMuaW5uZXJFdmVudCA9IGlubmVyRXZlbnQ7XG4vLyB9O1xuXG4vLyBjb25zb2xlLmxvZyhvbC5NYXBCcm93c2VyRXZlbnQpO1xuLy8gaW5oZXJpdHMoQ3VzdG9tRHJhZ0JveEV2ZW50LCBvbC5NYXBCcm93c2VyRXZlbnQpO1xuLy9cbmNsYXNzIEJveENvbnRyb2wgZXh0ZW5kcyBvbC5jb250cm9sLkNvbnRyb2wge1xuXHRjb25zdHJ1Y3RvcihvcHRfb3B0aW9ucykge1xuXHRcdGxldCBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG5cdFx0bGV0IGVsZW1lbnQgPSBqcXVlcnkoXCI8ZGl2PlwiKS5jc3Moe1xuXHRcdFx0cG9zaXRpb246IFwiYWJzb2x1dGVcIixcblx0XHR9KS5hZGRDbGFzcygnb2wtYm94Jyk7XG5cblx0XHRzdXBlcih7ZWxlbWVudDogZWxlbWVudFswXSwgdGFyZ2V0OiBvcHRpb25zLnRhcmdldH0pO1xuXHR9XG5cblx0c2V0UGl4ZWxzKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKVxuXHR7XG5cdFx0dGhpcy5zdGFydFBpeGVsID0gc3RhcnRQaXhlbDtcblx0XHR0aGlzLmVuZFBpeGVsID0gZW5kUGl4ZWw7XG5cblx0XHRsZXQgW2xlZnQsIHRvcF0gPSBzdGFydFBpeGVsO1xuXHRcdGxldCBbcmlnaHQsIGJvdHRvbV0gPSBlbmRQaXhlbDtcblxuXHRcdFt0b3AsIGJvdHRvbV0gPSBsb2Rhc2guc29ydEJ5KFt0b3AsIGJvdHRvbV0pO1xuXHRcdFtsZWZ0LCByaWdodF0gPSBsb2Rhc2guc29ydEJ5KFtsZWZ0LCByaWdodF0pO1xuXG4gXHRcdGxldCBoZWlnaHQgPSBib3R0b20gLSB0b3A7XG5cdFx0bGV0IHdpZHRoID0gcmlnaHQgLSBsZWZ0O1xuXG5cdFx0anF1ZXJ5KHRoaXMuZWxlbWVudCkuY3NzKHt0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHR9KTtcblxuXHRcdHRoaXMudXBkYXRlR2VvbWV0cnkoKTtcblx0fVxuXG5cdHVwZGF0ZUdlb21ldHJ5KClcblx0e1xuXHRcdGxldCBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsO1xuXHRcdGxldCBlbmRQaXhlbCA9IHRoaXMuZW5kUGl4ZWw7XG5cdFx0dmFyIHBpeGVscyA9IFtcblx0XHRcdHN0YXJ0UGl4ZWwsXG5cdFx0XHRbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuXHRcdFx0ZW5kUGl4ZWwsXG5cdFx0XHRbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dXG5cdFx0XTtcblx0XHR2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcblxuXHRcdHZhciBjb29yZGluYXRlcyA9IHBpeGVscy5tYXAobWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwsIG1hcCk7XG5cdFx0Ly8gY2xvc2UgdGhlIHBvbHlnb25cblx0XHRjb29yZGluYXRlc1s0XSA9IGNvb3JkaW5hdGVzWzBdLnNsaWNlKCk7XG5cblx0XHRpZiAoIXRoaXMuZ2VvbWV0cnlfKSB7XG5cdFx0XHR0aGlzLmdlb21ldHJ5XyA9IG5ldyBvbC5nZW9tLlBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuXHRcdH1cblx0fVxuXG5cblx0Z2V0R2VvbWV0cnkoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuZ2VvbWV0cnlfO1xuXHR9XG59XG5cbnZhciBDdXN0b21EcmFnQm94ID0gZnVuY3Rpb24gKG9wdF9vcHRpb25zKSB7XG5cdFx0b2wuaW50ZXJhY3Rpb24uUG9pbnRlci5jYWxsKHRoaXMsIHtcblx0XHRcdGhhbmRsZURvd25FdmVudDogQ3VzdG9tRHJhZ0JveC5oYW5kbGVEb3duRXZlbnQsXG5cdFx0XHRoYW5kbGVEcmFnRXZlbnQ6IEN1c3RvbURyYWdCb3guaGFuZGxlRHJhZ0V2ZW50LFxuXHRcdFx0aGFuZGxlVXBFdmVudDogQ3VzdG9tRHJhZ0JveC5oYW5kbGVVcEV2ZW50XG5cdFx0fSk7XG5cblx0XHRsZXQgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuXHRcdHRoaXMuYm94Q29udHJvbCA9IG5ldyBCb3hDb250cm9sKCk7XG5cblx0XHR0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuXHRcdHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBvbC5ldmVudHMuY29uZGl0aW9uLmFsd2F5cztcbn07XG5cbm9sLmluaGVyaXRzKEN1c3RvbURyYWdCb3gsIG9sLmludGVyYWN0aW9uLlBvaW50ZXIpO1xuXG5DdXN0b21EcmFnQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMuYm94Q29udHJvbC5nZXRHZW9tZXRyeSgpO1xufVxuXG5DdXN0b21EcmFnQm94LmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcblx0aWYgKCFvbC5ldmVudHMuY29uZGl0aW9uLm1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHRoaXMuYm94Q29udHJvbC5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcblx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnYm94ZHJhZycsIGlubmVyRXZlbnQ6IG1hcEJyb3dzZXJFdmVudH0pO1xufVxuXG5DdXN0b21EcmFnQm94LmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcblx0aWYgKCFvbC5ldmVudHMuY29uZGl0aW9uLm1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG5cdFx0dGhpcy5zdGFydFBpeGVsXyA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcblx0XHR0aGlzLmJveENvbnRyb2wuc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuXHRcdHRoaXMuYm94Q29udHJvbC5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgdGhpcy5zdGFydFBpeGVsXyk7XG5cdFx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnYm94c3RhcnQnLCBpbm5lckV2ZW50OiBtYXBCcm93c2VyRXZlbnR9KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxuQ3VzdG9tRHJhZ0JveC5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuXHRpZiAoIW9sLmV2ZW50cy5jb25kaXRpb24ubW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHRoaXMuYm94Q29udHJvbC5zZXRNYXAobnVsbCk7XG5cblx0dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnYm94ZW5kJywgaW5uZXJFdmVudDogbWFwQnJvd3NlckV2ZW50fSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEN1c3RvbURyYWdCb3g7XG4iLCJpbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBqcXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuZXhwb3J0IGNsYXNzIFBhbkNsdXN0ZXIge1xuXHRjb25zdHJ1Y3RvcihvcHRPcHRpb25zKVxuXHR7XG5cdFx0dmFyIG9wdGlvbnMgPSBvcHRPcHRpb25zIHx8IHt9O1xuXHRcdGxldCBwYXJlbnQgPSBqcXVlcnkoYFxuXHRcdDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDApXCIgY2xhc3M9XCJvbC11bnNlbGVjdGFibGUgb2wtY29udHJvbCBwYW5DbHVzdGVyXCI+XG5cdFx0XHQ8dGFibGUgc3R5bGU9XCJmb250LXNpemU6NzUlXCI+XG5cdFx0XHRcdDx0cj5cblx0XHRcdFx0XHQ8dGQ+PC90ZD48dGQgY2xhc3M9XCJvbC1jb250cm9sXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPjxidXR0b24gY2xhc3M9XCJwYW5DbHVzdGVyIE5cIj5OPC9idXR0b24+PC90ZD48dGQ+PC90ZD5cblx0XHRcdFx0PC90cj5cblx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdDx0ZCBjbGFzcz1cIm9sLWNvbnRyb2xcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+PGJ1dHRvbiBjbGFzcz1cInBhbkNsdXN0ZXIgV1wiPlc8L2J1dHRvbj48L3RkPlxuXHRcdFx0XHRcdDx0ZCBjbGFzcz1cIm9sLWNvbnRyb2xcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+PGJ1dHRvbiBjbGFzcz1cInBhbkNsdXN0ZXIgWCBmYSBmYS1hcnJvd3MtYWx0XCI+PC9idXR0b24+PC90ZD5cblx0XHRcdFx0XHQ8dGQgY2xhc3M9XCJvbC1jb250cm9sXCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPjxidXR0b24gY2xhc3M9XCJwYW5DbHVzdGVyIEVcIj5FPC9idXR0b24+PC90ZD5cblx0XHRcdFx0PC90cj5cblx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdDx0ZD48L3RkPjx0ZCBjbGFzcz1cIm9sLWNvbnRyb2xcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+PGJ1dHRvbiBjbGFzcz1cInBhbkNsdXN0ZXIgU1wiPlM8L2J1dHRvbj48L3RkPjx0ZD48L3RkPlxuXHRcdFx0XHQ8L3RyPlxuXHRcdFx0PC90YWJsZT5cblx0XHQ8L2Rpdj5gKTtcblxuXHRcdHZhciBkaXJlY3Rpb25zID0ge1xuXHRcdFx0TjogWzAsIDFdLFxuXHRcdFx0RTogWzEsIDBdLFxuXHRcdFx0UzogWzAsIC0xXSxcblx0XHRcdFc6IFstMSwgMF0sXG5cdFx0XHRYOiBbbnVsbCwgbnVsbF1cblx0XHR9O1xuXG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xuXG5cdFx0bGV0IHBhbiA9IGZ1bmN0aW9uICh4U2lnbiwgeVNpZ24pXG5cdFx0e1xuXHRcdFx0bGV0IHBhblBlcmNlbnQgPSAwLjM7XG5cdFx0XHRsZXQgbWFwID0gc2VsZi5nZXRNYXAoKTtcblx0XHRcdGxldCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcblx0XHRcdGxldCBleHRlbnQgPSB2aWV3LmNhbGN1bGF0ZUV4dGVudChtYXAuZ2V0U2l6ZSgpKTtcblxuXHRcdFx0bGV0IGV4dGVudFdpZHRoID0gTWF0aC5hYnMoZXh0ZW50WzBdIC0gZXh0ZW50WzJdKTtcblx0XHRcdGxldCBleHRlbnRIZWlnaHQgPSBNYXRoLmFicyhleHRlbnRbMV0gLSBleHRlbnRbM10pO1xuXG5cdFx0XHRsZXQgY2VudGVyID0gdmlldy5nZXRDZW50ZXIoKTtcblxuXHRcdFx0Y2VudGVyWzBdICs9IGV4dGVudFdpZHRoICogeFNpZ24gKiBwYW5QZXJjZW50O1xuXHRcdFx0Y2VudGVyWzFdICs9IGV4dGVudEhlaWdodCAqIHlTaWduICogcGFuUGVyY2VudDtcblxuXHRcdFx0dmlldy5zZXRDZW50ZXIoY2VudGVyKTtcblx0XHR9O1xuXG5cdFx0bGV0IHpvb21FeHRlbnQgPSBmdW5jdGlvbiAoKVxuXHRcdHtcblx0XHRcdGxldCBtYXAgPSBzZWxmLmdldE1hcCgpO1xuXHRcdFx0bGV0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuXHRcdFx0bGV0IGV4dGVudCA9IHZpZXcuZ2V0UHJvamVjdGlvbigpLmdldEV4dGVudCgpO1xuXHRcdFx0bGV0IHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuXHRcdFx0dmlldy5maXQoZXh0ZW50LCBzaXplKTtcblx0XHR9O1xuXG5cdFx0Zm9yIChsZXQgZGlyZWN0aW9uIGluIGRpcmVjdGlvbnMpXG5cdFx0e1xuXHRcdFx0bGV0IHhTaWduID0gZGlyZWN0aW9uc1tkaXJlY3Rpb25dWzBdO1xuXHRcdFx0bGV0IHlTaWduID0gZGlyZWN0aW9uc1tkaXJlY3Rpb25dWzFdO1xuXG5cdFx0XHRsZXQgYnV0dG9uID0gcGFyZW50LmZpbmQoXCIucGFuQ2x1c3Rlci5cIiArIGRpcmVjdGlvbik7XG5cblx0XHRcdGlmICh4U2lnbiAhPT0gbnVsbClcblx0XHRcdHtcblx0XHRcdFx0YnV0dG9uLmNsaWNrKHBhbi5iaW5kKHRoaXMsIHhTaWduLCB5U2lnbikpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRidXR0b24uY2xpY2soem9vbUV4dGVudC5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRvbC5jb250cm9sLkNvbnRyb2wuY2FsbCh0aGlzLCB7ZWxlbWVudDogcGFyZW50WzBdLCB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0fSk7XG5cdH1cbn1cblxub2wuaW5oZXJpdHMoUGFuQ2x1c3Rlciwgb2wuY29udHJvbC5Db250cm9sKTtcblxuZXhwb3J0IGNsYXNzIEludGVyYWN0aW9uTW9kZUNsdXN0ZXIge1xuXHRjb25zdHJ1Y3RvciAob3B0T3B0aW9ucylcblx0e1xuXHRcdHZhciBpbnRlcmFjdGlvbk1vZGVQYXRoID0gb3B0T3B0aW9ucy5pbnRlcmFjdGlvbk1vZGVQYXRoO1xuXHRcdHZhciBvcHRpb25zID0gb3B0T3B0aW9ucyB8fCB7fTtcblx0XHR2YXIgYnV0dG9uVGFibGUgPSBqcXVlcnkoYFxuXHRcdFx0PHRhYmxlIGNsYXNzPVwib2wtdW5zZWxlY3RhYmxlIG9sLWNvbnRyb2wgaU1vZGVDbHVzdGVyXCI+XG5cdFx0XHRcdDx0ciBzdHlsZT1cImZvbnQtc2l6ZTogODAlXCI+XG5cdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJpTW9kZUNsdXN0ZXIgcGFuIGZhIGZhLWhhbmQtZ3JhYi1vXCI+PC9idXR0b24+PC90ZD5cblx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImlNb2RlQ2x1c3RlciBzZWxlY3QgZmEgZmEtbW91c2UtcG9pbnRlclwiPjwvYnV0dG9uPjwvdGQ+XG5cdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJpTW9kZUNsdXN0ZXIgem9vbSBmYSBmYS1zZWFyY2gtcGx1c1wiPjwvYnV0dG9uPjwvdGQ+XG5cdFx0XHRcdDwvdHI+XG5cdFx0XHQ8L3RhYmxlPlxuXHRcdGApO1xuXG5cdFx0YnV0dG9uVGFibGUuZmluZChcImJ1dHRvbi5pTW9kZUNsdXN0ZXIucGFuXCIpLmNsaWNrKCAoKSA9PiBpbnRlcmFjdGlvbk1vZGVQYXRoLnN0YXRlKFwicGFuXCIpICk7XG5cdFx0YnV0dG9uVGFibGUuZmluZChcImJ1dHRvbi5pTW9kZUNsdXN0ZXIuc2VsZWN0XCIpLmNsaWNrKCAoKSA9PiBpbnRlcmFjdGlvbk1vZGVQYXRoLnN0YXRlKFwic2VsZWN0XCIpICk7XG5cdFx0YnV0dG9uVGFibGUuZmluZChcImJ1dHRvbi5pTW9kZUNsdXN0ZXIuem9vbVwiKS5jbGljayggKCkgPT4gaW50ZXJhY3Rpb25Nb2RlUGF0aC5zdGF0ZShcInpvb21cIikgKTtcblxuXHRcdGludGVyYWN0aW9uTW9kZVBhdGguYWRkQ2FsbGJhY2sodGhpcywgKCkgPT4ge1xuXHRcdFx0YnV0dG9uVGFibGUuZmluZChcImJ1dHRvbi5pTW9kZUNsdXN0ZXJcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0XHRidXR0b25UYWJsZS5maW5kKFwiYnV0dG9uLmlNb2RlQ2x1c3Rlci5cIiArIGludGVyYWN0aW9uTW9kZVBhdGguZ2V0U3RhdGUoKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cdFx0fSwgdHJ1ZSk7XG5cblx0XHRvbC5jb250cm9sLkNvbnRyb2wuY2FsbCh0aGlzLCB7ZWxlbWVudDogYnV0dG9uVGFibGVbMF0sIHRhcmdldDogb3B0aW9ucy50YXJnZXR9KTtcblx0fVxufVxuXG5vbC5pbmhlcml0cyhJbnRlcmFjdGlvbk1vZGVDbHVzdGVyLCBvbC5jb250cm9sLkNvbnRyb2wpO1xuIiwiaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vbGF5ZXJzL0ZlYXR1cmVMYXllci5qc1wiO1xuaW1wb3J0IEN1c3RvbURyYWdCb3ggZnJvbSBcIi4vQ3VzdG9tRHJhZ0JveC5qc1wiO1xuLypnbG9iYWwgV2VhdmUqL1xuXG5mdW5jdGlvbiBnZXRQcm9iZUludGVyYWN0aW9uKG1hcFRvb2wpXG57XG5cdHJldHVybiBuZXcgb2wuaW50ZXJhY3Rpb24uUG9pbnRlcih7XG5cdFx0aGFuZGxlTW92ZUV2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdC8vIHdlYXZlcGF0aCAtPiBrZXlzdHJpbmcgLT4gemluZGV4XG5cdFx0XHRsZXQgZDJkX2tleVNldF9rZXlTdHJpbmdfekluZGV4ID0gbmV3IE1hcCgpO1xuXHRcdFx0LyogV2UgbmVlZCB0byBoYXZlIHNldHMgZm9yIGFsbCB0aGUgbGF5ZXJzIHNvIHRoYXQgcHJvYmluZyBvdmVyIGFuIGVtcHR5IGFyZWEgY29ycmVjdGx5IGVtcHRpZXMgdGhlIGtleXNldCAqL1xuXHRcdFx0bWFwVG9vbC5tYXAuZ2V0TGF5ZXJzKCkuZm9yRWFjaChcblx0XHRcdFx0ZnVuY3Rpb24gKGxheWVyKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGV0IHdlYXZlTGF5ZXJPYmplY3QgPSBsYXllci5nZXQoXCJsYXllck9iamVjdFwiKTtcblxuXHRcdFx0XHRcdGlmICh3ZWF2ZUxheWVyT2JqZWN0LnByb2JlS2V5U2V0ICYmICFkMmRfa2V5U2V0X2tleVN0cmluZ196SW5kZXguZ2V0KHdlYXZlTGF5ZXJPYmplY3QucHJvYmVLZXlTZXQpKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGQyZF9rZXlTZXRfa2V5U3RyaW5nX3pJbmRleC5zZXQod2VhdmVMYXllck9iamVjdC5wcm9iZUtleVNldC5nZXRPYmplY3QoKSwgbmV3IE1hcCgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1hcFRvb2wpO1xuXHRcdFx0bWFwVG9vbC5tYXAuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKGV2ZW50LnBpeGVsLFxuXHRcdFx0XHRmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsZXQgd2VhdmVMYXllck9iamVjdCA9IGxheWVyLmdldChcImxheWVyT2JqZWN0XCIpO1xuXG5cdFx0XHRcdFx0bGV0IG1hcF9rZXlTdHJpbmdfekluZGV4ID0gZDJkX2tleVNldF9rZXlTdHJpbmdfekluZGV4LmdldCh3ZWF2ZUxheWVyT2JqZWN0LnByb2JlS2V5U2V0LmdldE9iamVjdCgpKTtcblxuXHRcdFx0XHRcdC8qIE5vIG5lZWQgdG8gY2hlY2sgaGVyZSwgd2UgY3JlYXRlZCBvbmUgZm9yIGV2ZXJ5IHByb2JlS2V5U2V0IGluIHRoZSBwcmlvciBmb3JFYWNoICovXG5cblx0XHRcdFx0XHRtYXBfa2V5U3RyaW5nX3pJbmRleC5zZXQoZmVhdHVyZS5nZXRJZCgpLCBsYXllci5nZXRaSW5kZXgoKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZ1bmN0aW9uIChsYXllcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBsYXllci5nZXRTZWxlY3RhYmxlKCkgJiYgbGF5ZXIgaW5zdGFuY2VvZiBGZWF0dXJlTGF5ZXI7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRmb3IgKGxldCB3ZWF2ZUtleVNldCBvZiBkMmRfa2V5U2V0X2tleVN0cmluZ196SW5kZXgua2V5cygpKVxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgbWFwX2tleVN0cmluZ196SW5kZXggPSBkMmRfa2V5U2V0X2tleVN0cmluZ196SW5kZXguZ2V0KHdlYXZlS2V5U2V0KTtcblxuXHRcdFx0XHRsZXQgdG9wID0ge2tleTogbnVsbCwgaW5kZXg6IC1JbmZpbml0eX07XG5cblx0XHRcdFx0Zm9yIChsZXQga2V5IG9mIG1hcF9rZXlTdHJpbmdfekluZGV4LmtleXMoKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxldCBpbmRleCA9IG1hcF9rZXlTdHJpbmdfekluZGV4LmdldChrZXkpO1xuXHRcdFx0XHRcdGlmIChpbmRleCA+IHRvcC5pbmRleClcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0b3AuaW5kZXggPSBpbmRleDtcblx0XHRcdFx0XHRcdHRvcC5rZXkgPSBrZXk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRvcC5rZXkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRXZWF2ZS5nZXRQYXRoKHdlYXZlS2V5U2V0KS5zZXRLZXlzKFt0b3Aua2V5XSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0V2VhdmUuZ2V0UGF0aCh3ZWF2ZUtleVNldCkuc2V0S2V5cyhbXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXREcmFnU2VsZWN0KG1hcFRvb2wsIHByb2JlSW50ZXJhY3Rpb24pXG57XG5cdGxldCBBREQgPSBcIitcIjtcblx0bGV0IFNVQlRSQUNUID0gXCItXCI7XG5cdGxldCBTRVQgPSBcIj1cIjtcblx0bGV0IGRyYWdTZWxlY3QgPSBuZXcgQ3VzdG9tRHJhZ0JveCgpO1xuXHRsZXQgbW9kZSA9IFNFVDtcblxuXHRmdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24oZXh0ZW50KSB7XG5cdFx0bGV0IHNlbGVjdGVkRmVhdHVyZXMgPSBuZXcgU2V0KCk7XG5cdFx0bGV0IHNlbGVjdEZlYXR1cmUgPSAoZmVhdHVyZSkgPT4geyBzZWxlY3RlZEZlYXR1cmVzLmFkZChmZWF0dXJlLmdldElkKCkpOyB9O1xuXG5cdFx0Zm9yIChsZXQgd2VhdmVMYXllck5hbWUgb2YgbG9kYXNoLmtleXMobWFwVG9vbC5sYXllcnMpKVxuXHRcdHtcblx0XHRcdGxldCB3ZWF2ZUxheWVyID0gbWFwVG9vbC5sYXllcnNbd2VhdmVMYXllck5hbWVdO1xuXHRcdFx0bGV0IG9sTGF5ZXIgPSB3ZWF2ZUxheWVyLmxheWVyO1xuXHRcdFx0bGV0IHNlbGVjdGFibGUgPSBvbExheWVyLmdldChcInNlbGVjdGFibGVcIik7XG5cblx0XHRcdGlmICh3ZWF2ZUxheWVyIGluc3RhbmNlb2YgRmVhdHVyZUxheWVyICYmIHNlbGVjdGFibGUpXG5cdFx0XHR7XG5cdFx0XHRcdGxldCBrZXlTZXQgPSB3ZWF2ZUxheWVyLnNlbGVjdGlvbktleVNldDtcblx0XHRcdFx0bGV0IHNvdXJjZSA9IG9sTGF5ZXIuZ2V0U291cmNlKCk7XG5cblx0XHRcdFx0c291cmNlLmZvckVhY2hGZWF0dXJlSW50ZXJzZWN0aW5nRXh0ZW50KGV4dGVudCwgc2VsZWN0RmVhdHVyZSk7XG5cblx0XHRcdFx0bGV0IGtleXMgPSBBcnJheS5mcm9tKHNlbGVjdGVkRmVhdHVyZXMpO1xuXG5cdFx0XHRcdHN3aXRjaCAobW9kZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNhc2UgU0VUOlxuXHRcdFx0XHRcdFx0a2V5U2V0LnNldEtleXMoa2V5cyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIEFERDpcblx0XHRcdFx0XHRcdGtleVNldC5hZGRLZXlzKGtleXMpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBTVUJUUkFDVDpcblx0XHRcdFx0XHRcdGtleVNldC5yZW1vdmVLZXlzKGtleXMpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRkcmFnU2VsZWN0Lm9uKCdib3hzdGFydCcsIGZ1bmN0aW9uIChkcmFnQm94RXZlbnQpIHtcblx0XHRwcm9iZUludGVyYWN0aW9uLnNldEFjdGl2ZShmYWxzZSk7XG5cblx0XHRsZXQgZXZlbnQgPSBkcmFnQm94RXZlbnQuaW5uZXJFdmVudC5vcmlnaW5hbEV2ZW50O1xuXHRcdGlmIChldmVudC5jdHJsS2V5KVxuXHRcdHtcblx0XHRcdG1vZGUgPSBBREQ7XG5cdFx0XHRpZiAoZXZlbnQuc2hpZnRLZXkpXG5cdFx0XHR7XG5cdFx0XHRcdG1vZGUgPSBTVUJUUkFDVDtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdG1vZGUgPSBTRVQ7XG5cdFx0fVxuXHR9KTtcblxuXHRkcmFnU2VsZWN0Lm9uKCdib3hlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0bGV0IGV4dGVudCA9IGRyYWdTZWxlY3QuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcblxuXHRcdHVwZGF0ZVNlbGVjdGlvbihleHRlbnQpO1xuXHRcdHByb2JlSW50ZXJhY3Rpb24uc2V0QWN0aXZlKHRydWUpO1xuXHRcdG1vZGUgPSBTRVQ7XG5cdH0pO1xuXG5cdGRyYWdTZWxlY3Qub24oJ2JveGRyYWcnLCBsb2Rhc2guZGVib3VuY2UoZnVuY3Rpb24oKSB7XG5cdFx0bGV0IGV4dGVudCA9IGRyYWdTZWxlY3QuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcblxuXHRcdHVwZGF0ZVNlbGVjdGlvbihleHRlbnQpO1xuXHR9KSk7XG5cblx0cmV0dXJuIGRyYWdTZWxlY3Q7XG59XG5cbmZ1bmN0aW9uIHdlYXZlTWFwSW50ZXJhY3Rpb25zKG1hcFRvb2wpXG57XG5cblx0bGV0IHByb2JlSW50ZXJhY3Rpb24gPSBnZXRQcm9iZUludGVyYWN0aW9uKG1hcFRvb2wpO1xuXHRsZXQgZHJhZ1NlbGVjdCA9IGdldERyYWdTZWxlY3QobWFwVG9vbCwgcHJvYmVJbnRlcmFjdGlvbik7XG5cdGxldCBkcmFnUGFuID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYWdQYW4oe30pO1xuXHRsZXQgZHJhZ1pvb20gPSBuZXcgb2wuaW50ZXJhY3Rpb24uRHJhZ1pvb20oe2NvbmRpdGlvbjogb2wuZXZlbnRzLmNvbmRpdGlvbi5hbHdheXN9KTtcblxuXHRtYXBUb29sLmludGVyYWN0aW9uTW9kZVBhdGguYWRkQ2FsbGJhY2sobWFwVG9vbCwgKCkgPT4ge1xuXHRcdGxldCBpbnRlcmFjdGlvbk1vZGUgPSBtYXBUb29sLmludGVyYWN0aW9uTW9kZVBhdGguZ2V0U3RhdGUoKTtcblx0XHRkcmFnUGFuLnNldEFjdGl2ZShpbnRlcmFjdGlvbk1vZGUgPT09IFwicGFuXCIpO1xuXHRcdGRyYWdTZWxlY3Quc2V0QWN0aXZlKGludGVyYWN0aW9uTW9kZSA9PT0gXCJzZWxlY3RcIik7XG5cdFx0ZHJhZ1pvb20uc2V0QWN0aXZlKGludGVyYWN0aW9uTW9kZSA9PT0gXCJ6b29tXCIpO1xuXHR9LCB0cnVlKTtcblxuXHRsZXQgaW50ZXJhY3Rpb25Db2xsZWN0aW9uID0gb2wuaW50ZXJhY3Rpb24uZGVmYXVsdHMoe2RyYWdQYW46IGZhbHNlfSk7XG5cdGZvciAobGV0IGludGVyYWN0aW9uIG9mIFtkcmFnUGFuLCBkcmFnWm9vbSwgZHJhZ1NlbGVjdCwgcHJvYmVJbnRlcmFjdGlvbl0pXG5cdFx0aW50ZXJhY3Rpb25Db2xsZWN0aW9uLnB1c2goaW50ZXJhY3Rpb24pO1xuXG5cdHJldHVybiBpbnRlcmFjdGlvbkNvbGxlY3Rpb247XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdlYXZlTWFwSW50ZXJhY3Rpb25zO1xuIiwiaW1wb3J0IExheWVyIGZyb20gXCIuL0xheWVyLmpzXCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uLy4uLy4uLy4uL291dHRzL3V0aWxzL1N0YW5kYXJkTGliLmpzXCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBvbCBmcm9tIFwib3BlbmxheWVyc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGZWF0dXJlTGF5ZXIgZXh0ZW5kcyBMYXllciB7XG5cdC8qIEEgRmVhdHVyZUxheWVyIGFzc3VtZXMgdGhhdCBlYWNoIGZlYXR1cmUgd2lsbCBoYXZlIG11bHRpcGxlIGN1c3RvbSBzdHlsZSBwcm9wZXJ0aWVzIG9uIGVhY2ggZmVhdHVyZSwgd2hpY2ggYXJlIG1hbmFnZWQgYmFzZWQgb24gc2VsZWN0aW9uLiAqL1xuXHRjb25zdHJ1Y3RvcihwYXJlbnQsIGxheWVyTmFtZSlcblx0e1xuXHRcdHN1cGVyKHBhcmVudCwgbGF5ZXJOYW1lKTtcblxuXHRcdHRoaXMubGF5ZXIgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKCk7XG5cdFx0dGhpcy5zb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7d3JhcFg6IGZhbHNlfSk7XG5cblx0XHQvKiBFdmVyeSBmZWF0dXJlIHRoYXQgaXMgYWRkZWQgc2hvdWxkIHJlZ2lzdGVyIGEgaGFuZGxlciB0byBhdXRvbWF0aWNhbGx5IHJlY29tcHV0ZSB0aGUgbWV0YXN0eWxlcyB3aGVuIHRoZSBzdHlsZXMgY2hhbmdlLiAqL1xuXHRcdHRoaXMuc291cmNlLm9uKFwiYWRkZmVhdHVyZVwiLCB0aGlzLm9uRmVhdHVyZUFkZCwgdGhpcyk7XG5cblx0XHR0aGlzLmNoYW5nZWRJdGVtcyA9IG5ldyBTZXQoKTtcblx0XHR0aGlzLnByb2JlZFNldCA9IG5ldyBTZXQoKTtcblx0XHR0aGlzLnNlbGVjdGVkU2V0ID0gbmV3IFNldCgpO1xuXHRcdHRoaXMuZmlsdGVyZWRTZXQgPSBuZXcgU2V0KCk7XG5cblx0XHR0aGlzLnNlbGVjdGlvbktleVNldCA9IHRoaXMubGF5ZXJQYXRoLnNlbGVjdGlvbl9rZXlzZXQ7XG5cdFx0dGhpcy5wcm9iZUtleVNldCA9IHRoaXMubGF5ZXJQYXRoLnByb2JlX2tleXNldDtcblx0XHR0aGlzLnN1YnNldEZpbHRlciA9IHRoaXMubGF5ZXJQYXRoLnN1YnNldF9maWx0ZXI7Ly9wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIik7XG5cblx0XHRsZXQgc2VsZWN0aW9uS2V5SGFuZGxlciA9IHRoaXMudXBkYXRlU2V0RnJvbUtleVNldC5iaW5kKHRoaXMsIHRoaXMuc2VsZWN0aW9uS2V5U2V0LCB0aGlzLnNlbGVjdGVkU2V0KTtcblx0XHRsZXQgcHJvYmVLZXlIYW5kbGVyID0gdGhpcy51cGRhdGVTZXRGcm9tS2V5U2V0LmJpbmQodGhpcywgdGhpcy5wcm9iZUtleVNldCwgdGhpcy5wcm9iZWRTZXQpO1xuXG5cdFx0dGhpcy5zZWxlY3Rpb25LZXlTZXQuYWRkS2V5U2V0Q2FsbGJhY2soc2VsZWN0aW9uS2V5SGFuZGxlcik7XG5cdFx0dGhpcy5wcm9iZUtleVNldC5hZGRLZXlTZXRDYWxsYmFjayhwcm9iZUtleUhhbmRsZXIpO1xuXG5cdFx0dGhpcy5zdWJzZXRGaWx0ZXIuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVGaWx0ZXJlZEtleVNldCwgdHJ1ZSk7XG5cdFx0dGhpcy5zZXR0aW5nc1BhdGgucHVzaChcInNlbGVjdGFibGVcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVNZXRhU3R5bGVzKTtcblx0fVxuXG5cdG9uRmVhdHVyZUFkZCh2ZWN0b3JFdmVudClcblx0e1xuXHRcdHZlY3RvckV2ZW50LmZlYXR1cmUub24oXCJwcm9wZXJ0eWNoYW5nZVwiLCB0aGlzLm9uRmVhdHVyZVByb3BlcnR5Q2hhbmdlLCB0aGlzKTtcblx0fVxuXG5cdG9uRmVhdHVyZVByb3BlcnR5Q2hhbmdlKG9iamVjdEV2ZW50KVxuXHR7XG5cdFx0bGV0IHByb3BlcnR5TmFtZSA9IG9iamVjdEV2ZW50LmtleTtcblx0XHRsZXQgZmVhdHVyZSA9IG9iamVjdEV2ZW50LnRhcmdldDtcblxuXHRcdGlmICghbG9kYXNoLmNvbnRhaW5zKEZlYXR1cmVMYXllci5TdHlsZXMsIHByb3BlcnR5TmFtZSkpXG5cdFx0e1xuXHRcdFx0LyogVGhlIHByb3BlcnR5IHRoYXQgY2hhbmdlZCBpc24ndCBvbmUgb2Ygb3VyIG1ldGFTdHlsZSBwcm9wZXJ0aWVzLCBzbyB3ZSBkb24ndCBjYXJlLiAqL1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0LyogVGhlIHByb3BlcnR5IHRoYXQgY2hhbmdlZCB3YXMgYSBtZXRhc3R5bGUsIGFuZCBhcyBzdWNoIHRoZSBzdHlsZSBzaG91bGQgYmUgcmVjb21wdXRlZCAqL1xuXHRcdFx0bG9kYXNoLmRlZmVyKHRoaXMudXBkYXRlTWV0YVN0eWxlLmJpbmQodGhpcyksIGZlYXR1cmUpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyB0b0NvbG9yQXJyYXkoY29sb3JTdHJpbmcsIGFscGhhKVxuXHR7XG5cdFx0dmFyIGNvbG9yQXJyYXk7XG5cdFx0aWYgKGNvbG9yU3RyaW5nWzBdID09PSBcIiNcIilcblx0XHR7XG5cdFx0XHRjb2xvckFycmF5ID0gb2wuY29sb3IuYXNBcnJheShjb2xvclN0cmluZyk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRjb2xvckFycmF5ID0gb2wuY29sb3IuYXNBcnJheShcIiNcIiArIFN0YW5kYXJkTGliLmRlY2ltYWxUb0hleChOdW1iZXIoY29sb3JTdHJpbmcpKSk7XG5cdFx0fVxuXG5cdFx0Y29sb3JBcnJheSA9IFtdLmNvbmNhdChjb2xvckFycmF5KTsgLyogU2hvdWxkIG5vdCBiZSBtb2RpZmllZCBzaW5jZSBpdCBpcyBjYWNoZWQgaW4gb2wuY29sb3IuYXNBcnJheSAqL1xuXG5cdFx0aWYgKCFjb2xvckFycmF5KSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb2xvckFycmF5WzNdID0gTnVtYmVyKGFscGhhKTtcblx0XHRyZXR1cm4gY29sb3JBcnJheTtcblx0fVxuXG5cdHN0YXRpYyB0b0NvbG9yUkdCQShjb2xvclN0cmluZywgYWxwaGEpXG5cdHtcblx0XHR2YXIgY29sb3JBcnJheSA9IEZlYXR1cmVMYXllci50b0NvbG9yQXJyYXkoY29sb3JTdHJpbmcsIGFscGhhKTtcblx0XHRyZXR1cm4gb2wuY29sb3IuYXNTdHJpbmcoY29sb3JBcnJheSk7XG5cdH1cblxuXHR1cGRhdGVTZXRGcm9tS2V5U2V0KGtleVNldCwgc2V0LCBkaWZmKVxuXHR7XG5cdFx0bGV0IHdhc0VtcHR5ID0gc2V0LnNpemUgPT09IDA7XG5cblx0XHR0aGlzLmNoYW5nZWRJdGVtcy5jbGVhcigpO1xuXG5cdFx0Zm9yIChsZXQga2V5IG9mIGRpZmYuYWRkZWQpXG5cdFx0e1xuXHRcdFx0c2V0LmFkZChrZXkpO1xuXHRcdFx0dGhpcy5jaGFuZ2VkSXRlbXMuYWRkKGtleSk7XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQga2V5IG9mIGRpZmYucmVtb3ZlZClcblx0XHR7XG5cdFx0XHRzZXQuZGVsZXRlKGtleSk7XG5cdFx0XHR0aGlzLmNoYW5nZWRJdGVtcy5hZGQoa2V5KTtcblx0XHR9XG5cblx0XHRsZXQgaXNFbXB0eSA9IHNldC5zaXplID09PSAwO1xuXG5cdFx0LyogSWYgYSBzZXQgYmVjb21lcyBlbXB0eSBvciBub25lbXB0eSwgd2Ugc2hvdWxkIHJlY29tcHV0ZSBhbGwgdGhlIHN0eWxlcy4gT3RoZXJ3aXNlLCBvbmx5IHJlY29tcHV0ZSB0aGUgc3R5bGVzIG9mIHRoZSBmZWF0dXJlcyB3aGljaCBjaGFuZ2VkLiAqL1xuXHRcdGlmIChpc0VtcHR5ICE9PSB3YXNFbXB0eSlcblx0XHR7XG5cdFx0XHR0aGlzLnVwZGF0ZU1ldGFTdHlsZXMoKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMuY2hhbmdlZEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmVJZClcblx0XHRcdHtcblx0XHRcdFx0bGV0IGZlYXR1cmUgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlQnlJZChmZWF0dXJlSWQpO1xuXHRcdFx0XHRpZiAoZmVhdHVyZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlTWV0YVN0eWxlKGZlYXR1cmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVGaWx0ZXJlZEtleVNldCgpXG5cdHtcblx0XHRsZXQgc291cmNlS2V5cyA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVzKCkubWFwKGZlYXR1cmUgPT4gZmVhdHVyZS5nZXRJZCgpKTtcblxuXG5cdFx0dGhpcy5maWx0ZXJlZFNldC5jbGVhcigpO1xuXG5cdFx0dmFyIGZpbHRlcmVkS2V5cyA9IHRoaXMuc3Vic2V0RmlsdGVyLmZpbHRlcktleXMoc291cmNlS2V5cyk7XG5cdFx0Zm9yIChsZXQga2V5IG9mIGZpbHRlcmVkS2V5cylcblx0XHR7XG5cdFx0XHR0aGlzLmZpbHRlcmVkU2V0LmFkZChrZXkpO1xuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlTWV0YVN0eWxlcygpO1xuXHR9XG5cblx0dXBkYXRlTWV0YVN0eWxlcygpXG5cdHtcblx0XHR0aGlzLnRlbXBTZWxlY3RhYmxlID0gdGhpcy5zZXR0aW5nc1BhdGgucHVzaChcInNlbGVjdGFibGVcIikuZ2V0U3RhdGUoKTtcblxuXHRcdHRoaXMuc291cmNlLmZvckVhY2hGZWF0dXJlKHRoaXMudXBkYXRlTWV0YVN0eWxlLCB0aGlzKTtcblx0fVxuXG5cdHVwZGF0ZU1ldGFTdHlsZShmZWF0dXJlKVxuXHR7XG5cdFx0bGV0IGlkID0gZmVhdHVyZS5nZXRJZCgpO1xuXHRcdGxldCBudWxsU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe30pO1xuXHRcdGxldCB1bnNlbGVjdGVkU3R5bGUgPSBmZWF0dXJlLmdldChcInVuc2VsZWN0ZWRTdHlsZVwiKSB8fCBudWxsU3R5bGU7XG5cdFx0bGV0IG5vcm1hbFN0eWxlID0gZmVhdHVyZS5nZXQoXCJub3JtYWxTdHlsZVwiKSB8fCBudWxsU3R5bGU7XG5cdFx0bGV0IHNlbGVjdGVkU3R5bGUgPSBmZWF0dXJlLmdldChcInNlbGVjdGVkU3R5bGVcIikgfHwgbnVsbFN0eWxlO1xuXHRcdGxldCBwcm9iZWRTdHlsZSA9IGZlYXR1cmUuZ2V0KFwicHJvYmVkU3R5bGVcIikgfHwgbnVsbFN0eWxlO1xuXHRcdGxldCB6T3JkZXIgPSBmZWF0dXJlLmdldChcInpPcmRlclwiKSB8fCAwO1xuXHRcdGxldCByZXBsYWNlID0gZmVhdHVyZS5nZXQoXCJyZXBsYWNlXCIpO1xuXHRcdGxldCBuZXdTdHlsZTtcblxuXHRcdGlmICghdGhpcy5maWx0ZXJlZFNldC5oYXMoaWQpKVxuXHRcdHtcblx0XHRcdGZlYXR1cmUuc2V0U3R5bGUobnVsbFN0eWxlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMudGVtcFNlbGVjdGFibGUpXG5cdFx0e1xuXHRcdFx0ZmVhdHVyZS5zZXRTdHlsZShub3JtYWxTdHlsZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLnNlbGVjdGVkU2V0LmhhcyhpZCkgJiYgIXRoaXMucHJvYmVkU2V0LmhhcyhpZCkgJiYgdGhpcy5zZWxlY3RlZFNldC5zaXplID4gMClcblx0XHR7XG5cdFx0XHRpZiAocmVwbGFjZSlcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSB1bnNlbGVjdGVkU3R5bGU7XG5cdFx0XHRcdG5ld1N0eWxlLnNldFpJbmRleCh6T3JkZXIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRuZXdTdHlsZSA9IFtdLmNvbmNhdCh1bnNlbGVjdGVkU3R5bGUpO1xuXHRcdFx0XHRuZXdTdHlsZVswXS5zZXRaSW5kZXgoek9yZGVyKTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0bmV3U3R5bGUgPSBbXS5jb25jYXQobm9ybWFsU3R5bGUpO1xuXHRcdFx0bmV3U3R5bGVbMF0uc2V0WkluZGV4KHpPcmRlcik7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRTZXQuaGFzKGlkKSlcblx0XHR7XG5cdFx0XHRpZiAocmVwbGFjZSlcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSBzZWxlY3RlZFN0eWxlO1xuXHRcdFx0XHRuZXdTdHlsZS5zZXRaSW5kZXgoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgLSAzKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSBuZXdTdHlsZS5jb25jYXQoc2VsZWN0ZWRTdHlsZSk7XG5cdFx0XHRcdG5ld1N0eWxlWzBdLnNldFpJbmRleChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAtIDMpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByb2JlZFNldC5oYXMoaWQpKVxuXHRcdHtcblx0XHRcdGlmIChyZXBsYWNlKVxuXHRcdFx0e1xuXHRcdFx0XHRuZXdTdHlsZSA9IHByb2JlZFN0eWxlO1xuXHRcdFx0XHRuZXdTdHlsZS5zZXRaSW5kZXgoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRuZXdTdHlsZSA9IG5ld1N0eWxlLmNvbmNhdChwcm9iZWRTdHlsZSk7XG5cdFx0XHRcdG5ld1N0eWxlWzBdLnNldFpJbmRleChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZmVhdHVyZS5zZXRTdHlsZShuZXdTdHlsZSk7XG5cdH1cblxuXHRzdGF0aWMgb2xGaWxsRnJvbVdlYXZlRmlsbChmaWxsLCBmYWRlKVxuXHR7XG5cdFx0aWYgKGZhZGUgPT09IHVuZGVmaW5lZCkgZmFkZSA9IDE7XG5cblx0XHRsZXQgY29sb3IgPSBmaWxsLmNvbG9yICYmIEZlYXR1cmVMYXllci50b0NvbG9yQXJyYXkoZmlsbC5jb2xvciwgZmlsbC5hbHBoYSAqIGZhZGUpIHx8IFswLCAwLCAwLCAwXTtcblx0XHRyZXR1cm4gbmV3IG9sLnN0eWxlLkZpbGwoe2NvbG9yfSk7XG5cdH1cblxuXHRzdGF0aWMgb2xTdHJva2VGcm9tV2VhdmVTdHJva2Uoc3Ryb2tlLCBmYWRlKVxuXHR7XG5cdFx0aWYgKGZhZGUgPT09IHVuZGVmaW5lZCkgZmFkZSA9IDE7XG5cblx0XHRsZXQgY29sb3IgPSBzdHJva2UuY29sb3IgJiYgRmVhdHVyZUxheWVyLnRvQ29sb3JBcnJheShzdHJva2UuY29sb3IsIHN0cm9rZS5hbHBoYSAqIGZhZGUpIHx8IFswLCAwLCAwLCAxXTtcblxuXHRcdGxldCBsaW5lQ2FwID0gc3Ryb2tlLmxpbmVDYXAgPT09IFwibm9uZVwiID8gXCJidXR0XCIgOiBzdHJva2UubGluZUNhcCB8fCBcInJvdW5kXCI7XG5cdFx0bGV0IGxpbmVKb2luID0gc3Ryb2tlLmxpbmVKb2luID09PSBudWxsID8gXCJyb3VuZFwiIDogc3Ryb2tlLmxpbmVKb2luIHx8IFwicm91bmRcIjtcblx0XHRsZXQgbWl0ZXJMaW1pdCA9IE51bWJlcihzdHJva2UubWl0ZXJMaW1pdCk7XG5cdFx0bGV0IHdpZHRoID0gTnVtYmVyKHN0cm9rZS53ZWlnaHQpO1xuXG5cdFx0cmV0dXJuIG5ldyBvbC5zdHlsZS5TdHJva2Uoe2NvbG9yLCBsaW5lQ2FwLCBsaW5lSm9pbiwgbWl0ZXJMaW1pdCwgd2lkdGh9KTtcblx0fVxuXG5cdHN0YXRpYyBnZXRPbFByb2JlZFN0eWxlKGJhc2VTdHJva2VTdHlsZSlcblx0e1xuXHRcdGxldCB3aWR0aCA9IGJhc2VTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuXG5cdFx0cmV0dXJuIFtcblx0XHRcdFx0bmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0XHRzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuXHRcdFx0XHRcdFx0Y29sb3I6IFswLCAwLCAwLCAxXSxcblx0XHRcdFx0XHRcdHdpZHRoOiB3aWR0aCArIEZlYXR1cmVMYXllci5QUk9CRV9IQUxPX1dJRFRIICsgRmVhdHVyZUxheWVyLlBST0JFX0xJTkVfV0lEVEhcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHR6SW5kZXg6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIC0gMlxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0XHRzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuXHRcdFx0XHRcdFx0Y29sb3I6IFsyNTUsIDI1NSwgMjU1LCAxXSxcblx0XHRcdFx0XHRcdHdpZHRoOiB3aWR0aCArIEZlYXR1cmVMYXllci5QUk9CRV9IQUxPX1dJRFRIXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0ekluZGV4OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAtIDFcblx0XHRcdFx0fSlcblx0XHRdO1xuXHR9XG5cblx0c3RhdGljIGdldE9sU2VsZWN0aW9uU3R5bGUoYmFzZVN0cm9rZVN0eWxlKVxuXHR7XG5cdFx0bGV0IHdpZHRoID0gYmFzZVN0cm9rZVN0eWxlLmdldFdpZHRoKCk7XG5cdFx0bGV0IGxpbmVDYXAgPSBiYXNlU3Ryb2tlU3R5bGUuZ2V0TGluZUNhcCgpO1xuXHRcdGxldCBsaW5lSm9pbiA9IGJhc2VTdHJva2VTdHlsZS5nZXRMaW5lSm9pbigpO1xuXHRcdGxldCBtaXRlckxpbWl0ID0gYmFzZVN0cm9rZVN0eWxlLmdldE1pdGVyTGltaXQoKTtcblxuXHRcdHJldHVybiBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0c3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcblx0XHRcdFx0XHRjb2xvcjogWzAsIDAsIDAsIDAuNV0sXG5cdFx0XHRcdFx0d2lkdGg6IHdpZHRoICsgRmVhdHVyZUxheWVyLlNFTEVDVF9XSURUSCxcblx0XHRcdFx0XHRsaW5lQ2FwLCBsaW5lSm9pbiwgbWl0ZXJMaW1pdH0pLFxuXHRcdFx0XHR6SW5kZXg6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIC0gNFxuXHRcdH0pXTtcblx0fVxufVxuXG5GZWF0dXJlTGF5ZXIuU0VMRUNUX1dJRFRIID0gNTtcbkZlYXR1cmVMYXllci5QUk9CRV9IQUxPX1dJRFRIID0gNDtcbkZlYXR1cmVMYXllci5QUk9CRV9MSU5FX1dJRFRIID0gMTtcblxuRmVhdHVyZUxheWVyLlN0eWxlcyA9IHtcblx0Tk9STUFMOiBcIm5vcm1hbFN0eWxlXCIsXG5cdFVOU0VMRUNURUQ6IFwidW5zZWxlY3RlZFN0eWxlXCIsIC8qIEZvciB0aGUgY2FzZSB3aGVyZSBhIHNlbGVjdGlvbiBoYXMgYmVlbiBtYWRlIGluIHRoZSBsYXllciBidXQgdGhlIGVsZW1lbnQgaXMgbm90IG9uZSBvZiB0aGVtLiAqL1xuXHRTRUxFQ1RFRDogXCJzZWxlY3RlZFN0eWxlXCIsXG5cdFBST0JFRDogXCJwcm9iZWRTdHlsZVwiXG59O1xuXG5leHBvcnQgZGVmYXVsdCBGZWF0dXJlTGF5ZXI7XG4iLCJpbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCB7cmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi9MYXllci5qc1wiO1xuaW1wb3J0IEZlYXR1cmVMYXllciBmcm9tIFwiLi9GZWF0dXJlTGF5ZXIuanNcIjtcbi8qZ2xvYmFsIHdlYXZlanMqL1xuXG5jbGFzcyBHZW9tZXRyeUxheWVyIGV4dGVuZHMgRmVhdHVyZUxheWVyIHtcblx0Y29uc3RydWN0b3IocGFyZW50LCBsYXllck5hbWUpXG5cdHtcblx0XHRzdXBlcihwYXJlbnQsIGxheWVyTmFtZSk7XG5cblx0XHR0aGlzLmdlb0pzb25QYXJzZXIgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKTtcblxuXHRcdHRoaXMuZ2VvQ29sdW1uUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJnZW9tZXRyeUNvbHVtblwiKTtcblx0XHR0aGlzLmZpbGxTdHlsZVBhdGggPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwiZmlsbFwiKTtcblx0XHR0aGlzLmxpbmVTdHlsZVBhdGggPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwibGluZVwiKTtcblxuXHRcdHRoaXMuZ2VvQ29sdW1uUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZUdlb21ldHJ5RGF0YSwgdHJ1ZSk7XG5cdFx0dGhpcy5wcm9qZWN0aW9uUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZUdlb21ldHJ5RGF0YSwgdHJ1ZSk7XG5cblx0XHR0aGlzLmZpbGxTdHlsZVBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEpO1xuXHRcdHRoaXMubGluZVN0eWxlUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSwgdHJ1ZSk7XG5cdH1cblxuXHR1cGRhdGVHZW9tZXRyeURhdGEoKVxuXHR7XG5cdFx0dmFyIHByb2plY3Rpb25TcGVjID0gdGhpcy5nZW9Db2x1bW5QYXRoLmdldE9iamVjdChcImludGVybmFsRHluYW1pY0NvbHVtblwiLCBudWxsKS5nZXRNZXRhZGF0YSgncHJvamVjdGlvbicpO1xuXHRcblx0XHR2YXIgb3V0cHV0UHJvamVjdGlvbiA9IHRoaXMucHJvamVjdGlvblBhdGguZ2V0U3RhdGUoKSB8fCBcIkVQU0c6Mzg1N1wiO1xuXHRcdHZhciBpbnB1dFByb2plY3Rpb24gPSBwcm9qZWN0aW9uU3BlYyB8fCBvdXRwdXRQcm9qZWN0aW9uO1xuXG5cdFx0dGhpcy5zb3VyY2UuY2xlYXIoKTtcblxuXHRcdHZhciBrZXlzID0gdGhpcy5nZW9Db2x1bW5QYXRoLnB1c2goJ2ludGVybmFsRHluYW1pY0NvbHVtbicpLmdldEtleXMoKTtcblx0XHR2YXIgaWRjID0gdGhpcy5nZW9Db2x1bW5QYXRoLmdldE9iamVjdChcImludGVybmFsRHluYW1pY0NvbHVtblwiKTtcblx0XHR2YXIgcmF3R2VvbWV0cmllcyA9IHdlYXZlanMuZGF0YS5Db2x1bW5VdGlscy5nZXRHZW9Kc29uR2VvbWV0cmllcyhpZGMsIGlkYy5rZXlzKTtcblxuXHRcdGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGtleXMubGVuZ3RoOyBpZHgrKylcblx0XHR7XG5cdFx0XHRsZXQgaWQgPSBrZXlzW2lkeF07XG5cblx0XHRcdGxldCBnZW9tZXRyeSA9IHRoaXMuZ2VvSnNvblBhcnNlci5yZWFkR2VvbWV0cnkocmF3R2VvbWV0cmllc1tpZHhdLCB7ZGF0YVByb2plY3Rpb246IGlucHV0UHJvamVjdGlvbiwgZmVhdHVyZVByb2plY3Rpb246IG91dHB1dFByb2plY3Rpb259KTtcblxuXHRcdFx0bGV0IGZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSh7Z2VvbWV0cnl9KTtcblx0XHRcdGZlYXR1cmUuc2V0SWQoaWQpO1xuXG5cdFx0XHR0aGlzLnNvdXJjZS5hZGRGZWF0dXJlKGZlYXR1cmUpO1xuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlU3R5bGVEYXRhKCk7XG5cdFx0dGhpcy51cGRhdGVGaWx0ZXJlZEtleVNldCgpO1xuXHR9XG5cblx0dXBkYXRlU3R5bGVEYXRhKClcblx0e1xuXHRcdHZhciBzdHlsZVJlY29yZHMgPSB0aGlzLmxheWVyUGF0aC5yZXRyaWV2ZVJlY29yZHMoe1xuXHRcdFx0ZmlsbDoge1xuXHRcdFx0XHRjb2xvcjogdGhpcy5maWxsU3R5bGVQYXRoLnB1c2goXCJjb2xvclwiKSxcblx0XHRcdFx0YWxwaGE6IHRoaXMuZmlsbFN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG5cdFx0XHRcdGltYWdlVVJMOiB0aGlzLmZpbGxTdHlsZVBhdGgucHVzaChcImltYWdlVVJMXCIpXG5cdFx0XHR9LFxuXHRcdFx0c3Ryb2tlOiB7XG5cdFx0XHRcdGNvbG9yOiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcImNvbG9yXCIpLFxuXHRcdFx0XHRhbHBoYTogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJhbHBoYVwiKSxcblx0XHRcdFx0d2VpZ2h0OiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcIndlaWdodFwiKSxcblx0XHRcdFx0bGluZUNhcDogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJjYXBzXCIpLFxuXHRcdFx0XHRsaW5lSm9pbjogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJqb2ludHNcIiksXG5cdFx0XHRcdG1pdGVyTGltaXQ6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwibWl0ZXJMaW1pdFwiKVxuXHRcdFx0fVxuXHRcdH0sIHRoaXMuZ2VvQ29sdW1uUGF0aCk7XG5cblx0XHR0aGlzLnJhd1N0eWxlcyA9IHN0eWxlUmVjb3JkcztcblxuXHRcdGZvciAobGV0IHJlY29yZCBvZiBzdHlsZVJlY29yZHMpXG5cdFx0e1xuXHRcdFx0bGV0IG9sU3Ryb2tlID0gRmVhdHVyZUxheWVyLm9sU3Ryb2tlRnJvbVdlYXZlU3Ryb2tlKHJlY29yZC5zdHJva2UpO1xuXHRcdFx0bGV0IG9sRmlsbCA9IEZlYXR1cmVMYXllci5vbEZpbGxGcm9tV2VhdmVGaWxsKHJlY29yZC5maWxsKTtcblxuXHRcdFx0bGV0IG9sU3Ryb2tlRmFkZWQgPSBGZWF0dXJlTGF5ZXIub2xTdHJva2VGcm9tV2VhdmVTdHJva2UocmVjb3JkLnN0cm9rZSwgMC41KTtcblx0XHRcdGxldCBvbEZpbGxGYWRlZCA9IEZlYXR1cmVMYXllci5vbEZpbGxGcm9tV2VhdmVGaWxsKHJlY29yZC5maWxsLCAwLjUpO1xuXG5cdFx0XHRsZXQgbm9ybWFsU3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0ZmlsbDogb2xGaWxsLFxuXHRcdFx0XHRzdHJva2U6IG9sU3Ryb2tlLFxuXHRcdFx0XHR6SW5kZXg6IDBcblx0XHRcdH0pXTtcblxuXHRcdFx0bGV0IHVuc2VsZWN0ZWRTdHlsZSA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoe1xuXHRcdFx0XHRmaWxsOiBvbEZpbGxGYWRlZCxcblx0XHRcdFx0c3Ryb2tlOiBvbFN0cm9rZUZhZGVkLFxuXHRcdFx0XHR6SW5kZXg6IDBcblx0XHRcdH0pXTtcblxuXHRcdFx0bGV0IHNlbGVjdGVkU3R5bGUgPSBGZWF0dXJlTGF5ZXIuZ2V0T2xTZWxlY3Rpb25TdHlsZShvbFN0cm9rZSk7XG5cdFx0XHRsZXQgcHJvYmVkU3R5bGUgPSBGZWF0dXJlTGF5ZXIuZ2V0T2xQcm9iZWRTdHlsZShvbFN0cm9rZSk7XG5cblx0XHRcdGxldCBmZWF0dXJlID0gdGhpcy5zb3VyY2UuZ2V0RmVhdHVyZUJ5SWQocmVjb3JkLmlkKTtcblxuXHRcdFx0aWYgKGZlYXR1cmUpXG5cdFx0XHR7XG5cdFx0XHRcdGZlYXR1cmUuc2V0UHJvcGVydGllcyh7bm9ybWFsU3R5bGUsIHVuc2VsZWN0ZWRTdHlsZSwgc2VsZWN0ZWRTdHlsZSwgcHJvYmVkU3R5bGV9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnlMYXllcjtcblxucmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi5wbG90dGVyczo6R2VvbWV0cnlQbG90dGVyXCIsIEdlb21ldHJ5TGF5ZXIpO1xuIiwiaW1wb3J0IEZlYXR1cmVMYXllciBmcm9tIFwiLi9GZWF0dXJlTGF5ZXIuanNcIjtcbmltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5cbmNsYXNzIEdseXBoTGF5ZXIgZXh0ZW5kcyBGZWF0dXJlTGF5ZXIge1xuXG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXG5cdFx0dGhpcy5wcm9qZWN0aW9uUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZUxvY2F0aW9ucyk7XG5cdFx0dGhpcy5sYXllclBhdGgucHVzaChcInNvdXJjZVByb2plY3Rpb25cIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVMb2NhdGlvbnMpO1xuXG5cdFx0dGhpcy5sYXllclBhdGgucHVzaChcImRhdGFYXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlTG9jYXRpb25zKTtcblx0XHR0aGlzLmxheWVyUGF0aC5wdXNoKFwiZGF0YVlcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVMb2NhdGlvbnMsIHRydWUpO1xuXHR9XG5cblx0X2dldEZlYXR1cmVJZHMoKSB7XG5cdFx0cmV0dXJuIGxvZGFzaC5tYXAodGhpcy5zb3VyY2UuZ2V0RmVhdHVyZXMoKSwgKGl0ZW0pID0+IGl0ZW0uZ2V0SWQoKSk7XG5cdH1cblxuXHRzdGF0aWMgX3RvUG9pbnQoZGF0dW0sIGZpZWxkMSwgZmllbGQyKSB7XG5cdFx0aWYgKHR5cGVvZiBkYXR1bSA9PT0gXCJvYmplY3RcIilcblx0XHR7XG5cdFx0XHRsZXQgZmlyc3RQb2x5ID0gZGF0dW1bMF07XG5cdFx0XHRyZXR1cm4gKGZpcnN0UG9seS5ib3VuZHNbZmllbGQxXSArIGZpcnN0UG9seS5ib3VuZHNbZmllbGQyXSkgLyAyO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0cmV0dXJuIGRhdHVtO1xuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZUxvY2F0aW9ucygpIHtcblx0XHQvKiBVcGRhdGUgZmVhdHVyZSBsb2NhdGlvbnMgKi9cblx0XHR2YXIgcmVjb3JkcyA9IHRoaXMubGF5ZXJQYXRoLnJldHJpZXZlUmVjb3JkcyhbXCJkYXRhWFwiLCBcImRhdGFZXCJdLCB0aGlzLmxheWVyUGF0aC5wdXNoKFwiZGF0YVhcIikpO1xuXG5cdFx0dmFyIHJlY29yZElkcyA9IGxvZGFzaC5wbHVjayhyZWNvcmRzLCBcImlkXCIpO1xuXG5cdFx0dmFyIHJlbW92ZWRJZHMgPSBsb2Rhc2guZGlmZmVyZW5jZSh0aGlzLl9nZXRGZWF0dXJlSWRzKCksIHJlY29yZElkcyk7XG5cblx0XHR2YXIgcmF3UHJvaiA9IHRoaXMubGF5ZXJQYXRoLmdldFN0YXRlKFwic291cmNlUHJvamVjdGlvblwiKSB8fCBcIkVQU0c6NDMyNlwiO1xuXHRcdHZhciBtYXBQcm9qID0gdGhpcy5wcm9qZWN0aW9uUGF0aC5nZXRTdGF0ZSgpIHx8IFwiRVBTRzozODU3XCI7XG5cblx0XHRmb3IgKGxldCBpZCBvZiByZW1vdmVkSWRzKVxuXHRcdHtcblx0XHRcdGxldCBmZWF0dXJlID0gdGhpcy5zb3VyY2UuZ2V0RmVhdHVyZUJ5SWQoaWQpO1xuXHRcdFx0dGhpcy5zb3VyY2UucmVtb3ZlRmVhdHVyZShmZWF0dXJlKTtcblx0XHR9XG5cblx0XHRmb3IgKGxldCByZWNvcmQgb2YgcmVjb3Jkcylcblx0XHR7XG5cdFx0XHRsZXQgZmVhdHVyZSA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVCeUlkKHJlY29yZC5pZCk7XG5cblx0XHRcdGlmICghZmVhdHVyZSlcblx0XHRcdHtcblx0XHRcdFx0ZmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlKHt9KTtcblx0XHRcdFx0ZmVhdHVyZS5zZXRJZChyZWNvcmQuaWQpO1xuXHRcdFx0XHR0aGlzLnNvdXJjZS5hZGRGZWF0dXJlKGZlYXR1cmUpO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgZGF0YVgsIGRhdGFZO1xuXG5cdFx0XHRkYXRhWCA9IEdseXBoTGF5ZXIuX3RvUG9pbnQocmVjb3JkLmRhdGFYLCBcInhNaW5cIiwgXCJ4TWF4XCIpO1xuXHRcdFx0ZGF0YVkgPSBHbHlwaExheWVyLl90b1BvaW50KHJlY29yZC5kYXRhWSwgXCJ5TWluXCIsIFwieU1heFwiKTtcblxuXHRcdFx0bGV0IHBvaW50ID0gbmV3IG9sLmdlb20uUG9pbnQoW2RhdGFYLCBkYXRhWV0pO1xuXHRcdFx0cG9pbnQudHJhbnNmb3JtKHJhd1Byb2osIG1hcFByb2opO1xuXHRcdFx0ZmVhdHVyZS5zZXRHZW9tZXRyeShwb2ludCk7XG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlRmlsdGVyZWRLZXlTZXQoKTtcblx0XHR0aGlzLnVwZGF0ZVN0eWxlRGF0YSgpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdseXBoTGF5ZXI7XG4iLCJpbXBvcnQganF1ZXJ5IGZyb20gXCJqcXVlcnlcIjtcblxuY2xhc3MgTWFwMkQge1xuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblx0XHR0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG5cdH1cblxuXHRnZXQoZmlyc3RLZXksIHNlY29uZEtleSlcblx0e1xuXHRcdGxldCBzZWNvbmRNYXAgPSB0aGlzLl9tYXAuZ2V0KGZpcnN0S2V5KTtcblx0XHRyZXR1cm4gc2Vjb25kTWFwICYmIHNlY29uZE1hcC5nZXQoc2Vjb25kS2V5KTtcblx0fVxuXG5cdHNldChmaXJzdEtleSwgc2Vjb25kS2V5LCB2YWx1ZSlcblx0e1xuXHRcdGxldCBzZWNvbmRNYXAgPSB0aGlzLl9tYXAuZ2V0KGZpcnN0S2V5KTtcblx0XHRpZiAoIXNlY29uZE1hcClcblx0XHR7XG5cdFx0XHRzZWNvbmRNYXAgPSBuZXcgTWFwKCk7XG5cdFx0XHR0aGlzLl9tYXAuc2V0KGZpcnN0S2V5LCBzZWNvbmRNYXApO1xuXHRcdH1cblxuXHRcdHNlY29uZE1hcC5zZXQoc2Vjb25kS2V5LCB2YWx1ZSk7XG5cdH1cbn1cbmNsYXNzIEltYWdlR2x5cGhDYWNoZSB7XG5cdGNvbnN0cnVjdG9yKClcblx0e1xuXHRcdHRoaXMuYmFzZUltYWdlRWxlbWVudHMgPSBuZXcgTWFwKCk7XG5cdFx0dGhpcy5jYW52YXNNYXAgPSBuZXcgTWFwMkQoKTtcblx0XHR0aGlzLmltYWdlTWFwID0gbmV3IE1hcDJEKCk7XG5cdH1cblxuXHRyZXF1ZXN0QmFzZUltYWdlRWxlbWVudCh1cmwsIGNhbGxiYWNrKVxuXHR7XG5cdFx0bGV0IGltYWdlRWxlbWVudCA9IHRoaXMuYmFzZUltYWdlRWxlbWVudHMuZ2V0KHVybCk7XG5cblx0XHRpZiAoIWltYWdlRWxlbWVudClcblx0XHR7XG5cdFx0XHRpbWFnZUVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcblx0XHRcdGltYWdlRWxlbWVudC5zcmMgPSB1cmw7XG5cdFx0XHR0aGlzLmJhc2VJbWFnZUVsZW1lbnRzLnNldCh1cmwsIGltYWdlRWxlbWVudCk7XG5cdFx0fVxuXG5cdFx0aWYgKGltYWdlRWxlbWVudC5jb21wbGV0ZSlcblx0XHR7XG5cdFx0XHRjYWxsYmFjayhpbWFnZUVsZW1lbnQpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0anF1ZXJ5KGltYWdlRWxlbWVudCkub25lKFwibG9hZFwiLCAoKSA9PiBjYWxsYmFjayhpbWFnZUVsZW1lbnQpKTtcblx0XHR9XG5cdH1cblxuXHRnZXRDYWNoZWRDYW52YXModXJsLCBjb2xvcilcblx0e1xuXHRcdGxldCBjYW52YXMgPSB0aGlzLmNhbnZhc01hcC5nZXQodXJsLCBjb2xvcik7XG5cdFx0bGV0IGZyZXNoQ2FudmFzID0gZmFsc2U7XG5cblx0XHRpZiAoIWNhbnZhcylcblx0XHR7XG5cdFx0XHRmcmVzaENhbnZhcyA9IHRydWU7XG5cdFx0XHRjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHRcdFx0dGhpcy5jYW52YXNNYXAuc2V0KHVybCwgY29sb3IsIGNhbnZhcyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtjYW52YXMsIGZyZXNoQ2FudmFzfTtcblx0fVxuXG5cdHJlcXVlc3REYXRhVXJsKHVybCwgY29sb3IsIGNhbGxiYWNrKVxuXHR7XG5cdFx0bGV0IHtjYW52YXMsIGZyZXNoQ2FudmFzfSA9IHRoaXMuZ2V0Q2FjaGVkQ2FudmFzKHVybCwgY29sb3IpO1xuXHRcdC8qIElmIGZyZXNoQ2FudmFzIGlzIHRydWUsIHRoaXMgbWVhbnMgdGhhdCB3ZSBqdXN0IGNyZWF0ZWQgdGhlIGNhbnZhcyBhbmQgaGF2ZW4ndCByZW5kZXJlZCB0byBpdC4gVGltZSB0byBkbyB0aGF0LiAqL1xuXHRcdGlmIChmcmVzaENhbnZhcylcblx0XHR7XG5cdFx0XHR0aGlzLnJlcXVlc3RCYXNlSW1hZ2VFbGVtZW50KHVybCwgZnVuY3Rpb24gKGltYWdlRWxlbWVudCkge1xuXHRcdFx0XHRbY2FudmFzLmhlaWdodCwgY2FudmFzLndpZHRoXSA9IFtpbWFnZUVsZW1lbnQubmF0dXJhbEhlaWdodCwgaW1hZ2VFbGVtZW50Lm5hdHVyYWxXaWR0aF07XG5cdFx0XHRcdGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdFx0XHRjdHguZmlsbFN0eWxlID0gY29sb3I7XG5cdFx0XHRcdGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG5cdFx0XHRcdGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLWF0b3BcIjtcblx0XHRcdFx0Y3R4LmRyYXdJbWFnZShpbWFnZUVsZW1lbnQsIDAsIDApO1xuXG5cdFx0XHRcdGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcIm11bHRpcGx5XCI7XG5cdFx0XHRcdGN0eC5kcmF3SW1hZ2UoaW1hZ2VFbGVtZW50LCAwLCAwKTtcblxuXHRcdFx0XHRjYWxsYmFjayhjYW52YXMudG9EYXRhVVJMKCkpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRjYWxsYmFjayhjYW52YXMudG9EYXRhVVJMKCkpO1xuXHRcdH1cblx0fVxuXG5cdGdldEltYWdlKHVybCwgY29sb3IpXG5cdHtcblx0XHRsZXQgaW1hZ2UgPSB0aGlzLmltYWdlTWFwLmdldCh1cmwsIGNvbG9yKTtcblxuXHRcdGlmICghaW1hZ2UpXG5cdFx0e1xuXHRcdFx0aW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblx0XHRcdHRoaXMucmVxdWVzdERhdGFVcmwodXJsLCBjb2xvciwgZnVuY3Rpb24gKGRhdGFVcmwpIHtcblx0XHRcdFx0aW1hZ2Uuc3JjID0gZGF0YVVybDtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBpbWFnZTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZUdseXBoQ2FjaGU7XG4iLCJpbXBvcnQganF1ZXJ5IGZyb20gXCJqcXVlcnlcIjtcbmltcG9ydCBvbCBmcm9tIFwib3BlbmxheWVyc1wiO1xuaW1wb3J0IEdseXBoTGF5ZXIgZnJvbSBcIi4vR2x5cGhMYXllci5qc1wiO1xuaW1wb3J0IEZlYXR1cmVMYXllciBmcm9tIFwiLi9GZWF0dXJlTGF5ZXIuanNcIjtcbmltcG9ydCBJbWFnZUdseXBoQ2FjaGUgZnJvbSBcIi4vSW1hZ2VHbHlwaENhY2hlLmpzXCI7XG5pbXBvcnQge3JlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4vTGF5ZXIuanNcIjtcblxuY2xhc3MgSW1hZ2VHbHlwaExheWVyIGV4dGVuZHMgR2x5cGhMYXllciB7XG5cblx0Y29uc3RydWN0b3IocGFyZW50LCBsYXllck5hbWUpXG5cdHtcblx0XHRzdXBlcihwYXJlbnQsIGxheWVyTmFtZSk7XG5cblx0XHR0aGlzLmltYWdlR2x5cGhDYWNoZSA9IG5ldyBJbWFnZUdseXBoQ2FjaGUoKTtcblxuXHRcdHRoaXMubGF5ZXJQYXRoLnB1c2goXCJpbWFnZVNpemVcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEpO1xuXHRcdHRoaXMubGF5ZXJQYXRoLnB1c2goXCJpbWFnZVVSTFwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSwgdHJ1ZSk7XG5cdH1cblxuXHRzZXRJY29uU3R5bGUoZmVhdHVyZSwgaW1nLCBpY29uU2l6ZSlcblx0e1xuXHRcdGxldCBzdHlsZXMgPSB7fTtcblxuXHRcdGlmICghaW1nLmNvbXBsZXRlIHx8ICFpbWcuc3JjKVxuXHRcdHtcblx0XHRcdGpxdWVyeShpbWcpLm9uZShcImxvYWRcIiwgdGhpcy5zZXRJY29uU3R5bGUuYmluZCh0aGlzLCBmZWF0dXJlLCBpbWcsIGljb25TaXplKSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bGV0IG1heERpbSA9IE1hdGgubWF4KGltZy5uYXR1cmFsSGVpZ2h0LCBpbWcubmF0dXJhbFdpZHRoKTtcblxuXHRcdGxldCBzY2FsZSA9IGljb25TaXplIC8gbWF4RGltO1xuXG5cdFx0bGV0IGltZ1NpemUgPSBbaW1nLm5hdHVyYWxXaWR0aCwgaW1nLm5hdHVyYWxIZWlnaHRdO1xuXG5cdFx0Zm9yIChsZXQgc3R5bGVQcmVmaXggb2YgW1wibm9ybWFsXCIsIFwic2VsZWN0ZWRcIiwgXCJwcm9iZWRcIiwgXCJ1bnNlbGVjdGVkXCJdKVxuXHRcdHtcblx0XHRcdGxldCBpY29uO1xuXHRcdFx0aWYgKHN0eWxlUHJlZml4ID09PSBcInByb2JlZFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRpY29uID0gbmV3IG9sLnN0eWxlLkljb24oe2ltZywgaW1nU2l6ZSwgc2NhbGU6IHNjYWxlICogMi4wfSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGljb24gPSBuZXcgb2wuc3R5bGUuSWNvbih7aW1nLCBpbWdTaXplLCBzY2FsZX0pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3R5bGVQcmVmaXggPT09IFwidW5zZWxlY3RlZFwiKVxuXHRcdFx0e1xuXHRcdFx0XHRpY29uLnNldE9wYWNpdHkoMSAvIDMpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNbc3R5bGVQcmVmaXggKyBcIlN0eWxlXCJdID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtpbWFnZTogaWNvbn0pO1xuXHRcdH1cblxuXHRcdHN0eWxlcy5yZXBsYWNlID0gdHJ1ZTtcblxuXHRcdGZlYXR1cmUuc2V0UHJvcGVydGllcyhzdHlsZXMpO1xuXHR9XG5cblx0dXBkYXRlU3R5bGVEYXRhKCkge1xuXHRcdC8qIFVwZGF0ZSBmZWF0dXJlIHN0eWxlcyAqL1xuXG5cdFx0dmFyIHJlY29yZHMgPSB0aGlzLmxheWVyUGF0aC5yZXRyaWV2ZVJlY29yZHMoW1wiYWxwaGFcIiwgXCJjb2xvclwiLCBcImltYWdlVVJMXCIsIFwiaW1hZ2VTaXplXCJdLCB0aGlzLmxheWVyUGF0aC5wdXNoKFwiZGF0YVhcIikpO1xuXG5cdFx0dGhpcy5yYXdTdHlsZVJlY29yZHMgPSByZWNvcmRzO1xuXG5cdFx0Zm9yIChsZXQgcmVjb3JkIG9mIHJlY29yZHMpXG5cdFx0e1xuXHRcdFx0bGV0IGZlYXR1cmUgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlQnlJZChyZWNvcmQuaWQpO1xuXG5cdFx0XHRpZiAoIWZlYXR1cmUpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgaW1hZ2VTaXplID0gTnVtYmVyKHJlY29yZC5pbWFnZVNpemUpO1xuXHRcdFx0bGV0IGNvbG9yID0gRmVhdHVyZUxheWVyLnRvQ29sb3JSR0JBKHJlY29yZC5jb2xvciwgcmVjb3JkLmFscGhhKTtcblxuXHRcdFx0aWYgKCFyZWNvcmQuaW1hZ2VVUkwpXG5cdFx0XHR7XG5cdFx0XHRcdGZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgaW1nID0gdGhpcy5pbWFnZUdseXBoQ2FjaGUuZ2V0SW1hZ2UocmVjb3JkLmltYWdlVVJMLCBjb2xvcik7XG5cblx0XHRcdHRoaXMuc2V0SWNvblN0eWxlKGZlYXR1cmUsIGltZywgaW1hZ2VTaXplKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VHbHlwaExheWVyO1xuXG5yZWdpc3RlckxheWVySW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnBsb3R0ZXJzOjpJbWFnZUdseXBoUGxvdHRlclwiLCBJbWFnZUdseXBoTGF5ZXIpO1xuIiwiaW1wb3J0IGxvZGFzaCBmcm9tIFwibG9kYXNoXCI7XG5cbmV4cG9ydCB2YXIgbGF5ZXJSZWdpc3RyeSA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9uKGFzQ2xhc3NOYW1lLCBqc0NsYXNzKVxue1xuXHRpZiAoIWxheWVyUmVnaXN0cnkpXG5cdHtcblx0XHRsYXllclJlZ2lzdHJ5ID0ge307XG5cdH1cblx0bGF5ZXJSZWdpc3RyeVthc0NsYXNzTmFtZV0gPSBqc0NsYXNzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3TGF5ZXIocGFyZW50LCBsYXllck5hbWUpXG57XG5cdHZhciBwYXRoID0gcGFyZW50LnBsb3R0ZXJzUGF0aC5wdXNoKGxheWVyTmFtZSk7XG5cdGxldCBsYXllclR5cGUgPSBwYXRoLmdldFR5cGUoKTtcblx0bGV0IExheWVyQ2xhc3MgPSBsYXllclJlZ2lzdHJ5W2xheWVyVHlwZV07XG5cdGlmICghTGF5ZXJDbGFzcylcblx0e1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdHJldHVybiBuZXcgTGF5ZXJDbGFzcyhwYXJlbnQsIGxheWVyTmFtZSk7XG5cdH1cbn1cblxuY2xhc3MgTGF5ZXIge1xuXG5cdHN0YXRpYyBuZXdMYXllcihwYXJlbnQsIGxheWVyTmFtZSlcblx0e1xuXHRcdHJldHVybiBuZXdMYXllcihwYXJlbnQsIGxheWVyTmFtZSk7XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihwYXJlbnQsIGxheWVyTmFtZSlcblx0e1xuXHRcdHRoaXMubGF5ZXJQYXRoID0gcGFyZW50LnBsb3R0ZXJzUGF0aC5wdXNoKGxheWVyTmFtZSk7XG5cdFx0dGhpcy5zZXR0aW5nc1BhdGggPSBwYXJlbnQubGF5ZXJTZXR0aW5nc1BhdGgucHVzaChsYXllck5hbWUpO1xuXHRcdHRoaXMucHJvamVjdGlvblBhdGggPSBwYXJlbnQudG9vbFBhdGgucHVzaChcInByb2plY3Rpb25TUlNcIik7XG5cdFx0dGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cdFx0dGhpcy5sYXllck5hbWUgPSBsYXllck5hbWU7XG5cdFx0dGhpcy5sYXllciA9IG51bGw7XG5cdFx0dGhpcy5fbGF5ZXJSZWFkeUNhbGxiYWNrcyA9IHt9O1xuXG5cdFx0dGhpcy5saW5rUHJvcGVydHkodGhpcy5zZXR0aW5nc1BhdGgucHVzaChcImFscGhhXCIpLCBcIm9wYWNpdHlcIik7XG5cdFx0dGhpcy5saW5rUHJvcGVydHkodGhpcy5zZXR0aW5nc1BhdGgucHVzaChcInZpc2libGVcIiksIFwidmlzaWJsZVwiKTtcblx0XHR0aGlzLmxpbmtQcm9wZXJ0eSh0aGlzLnNldHRpbmdzUGF0aC5wdXNoKFwic2VsZWN0YWJsZVwiKSwgXCJzZWxlY3RhYmxlXCIpO1xuXHRcdC8qIFRPRE8gbWF4IGFuZCBtaW52aXNpYmxlc2NhbGUsIG1hcCB0byBtaW4vbWF4IHJlc29sdXRpb24uICovXG5cdH1cblxuXHRnZXQgc291cmNlKCkge1xuXHRcdHJldHVybiB0aGlzLmxheWVyICYmIHRoaXMubGF5ZXIuZ2V0U291cmNlKCk7XG5cdH1cblxuXHRzZXQgc291cmNlKHZhbHVlKSB7XG5cdFx0dGhpcy5sYXllci5zZXRTb3VyY2UodmFsdWUpO1xuXHR9XG5cblx0LyogSGFuZGxlcyBpbml0aWFsIGFwcGx5IG9mIGxpbmtlZCBwcm9wZXJ0aWVzLCBhZGRpbmcvcmVtb3ZpbmcgZnJvbSBtYXAgKi9cblx0c2V0IGxheWVyKHZhbHVlKSB7XG5cdFx0aWYgKHRoaXMuX2xheWVyICE9IG51bGwpIHtcblx0XHRcdHRoaXMucGFyZW50Lm1hcC5yZW1vdmVMYXllcih0aGlzLl9sYXllcik7XG5cdFx0fVxuXG5cdFx0dGhpcy5fbGF5ZXIgPSB2YWx1ZTtcblxuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0dGhpcy5wYXJlbnQubWFwLmFkZExheWVyKHZhbHVlKTtcblxuXHRcdFx0dmFsdWUuc2V0KFwibGF5ZXJPYmplY3RcIiwgdGhpcyk7IC8qIE5lZWQgdG8gc3RvcmUgdGhpcyBiYWNrcmVmICovXG5cblx0XHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0XHRmb3IgKGxldCBuYW1lIGluIHRoaXMuX2xheWVyUmVhZHlDYWxsYmFja3MpIHtcblx0XHRcdFx0XHR0aGlzLl9sYXllclJlYWR5Q2FsbGJhY2tzW25hbWVdKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRnZXQgbGF5ZXIoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2xheWVyO1xuXHR9XG5cblx0bGlua1Byb3BlcnR5KHByb3BlcnR5UGF0aCwgcHJvcGVydHlOYW1lLCBpblRyYW5zZm9ybSlcblx0e1xuXHRcdC8qIGNoYW5nZSBpbiBwYXRoIG1vZGlmeWluZyBwcm9wZXJ0eU5hbWUgKi9cblx0XHRpblRyYW5zZm9ybSA9IGluVHJhbnNmb3JtIHx8IGxvZGFzaC5pZGVudGl0eTtcblxuXHRcdHZhciBjYWxsYmFjayA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMubGF5ZXIpIHtcblx0XHRcdFx0XHR0aGlzLmxheWVyLnNldChwcm9wZXJ0eU5hbWUsIGluVHJhbnNmb3JtKHByb3BlcnR5UGF0aC5nZXRTdGF0ZSgpKSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHR0aGlzLl9sYXllclJlYWR5Q2FsbGJhY2tzW3Byb3BlcnR5TmFtZV0gPSBjYWxsYmFjaztcblxuXHRcdHByb3BlcnR5UGF0aC5hZGRDYWxsYmFjayh0aGlzLCBjYWxsYmFjaywgZmFsc2UsIGZhbHNlKTtcblx0fVxuXG5cdGRlc3Ryb3koKVxuXHR7XG5cdFx0dGhpcy5sYXllciA9IHVuZGVmaW5lZDtcblx0fVxufVxuZXhwb3J0IGRlZmF1bHQgTGF5ZXI7XG4iLCJpbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vLi4vLi4vLi4vb3V0dHMvdXRpbHMvU3RhbmRhcmRMaWIuanNcIjtcbmltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vRmVhdHVyZUxheWVyLmpzXCI7XG5pbXBvcnQge3JlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4vTGF5ZXIuanNcIjtcbmltcG9ydCBHbHlwaExheWVyIGZyb20gXCIuL0dseXBoTGF5ZXIuanNcIjtcbmltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuXG5jbGFzcyBTY2F0dGVyUGxvdExheWVyIGV4dGVuZHMgR2x5cGhMYXllciB7XG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXG5cdFx0dGhpcy5zaXplQnkgPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwic2l6ZUJ5XCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlU3R5bGVEYXRhLCB0cnVlKTtcblxuXHRcdHRoaXMuZmlsbFN0eWxlUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJmaWxsXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlU3R5bGVEYXRhKTtcblx0XHR0aGlzLmxpbmVTdHlsZVBhdGggPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwibGluZVwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSk7XG5cdFx0dGhpcy5tYXhSYWRpdXNQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcIm1heFNjcmVlblJhZGl1c1wiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSk7XG5cdFx0dGhpcy5taW5SYWRpdXNQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcIm1pblNjcmVlblJhZGl1c1wiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSk7XG5cblx0XHR0aGlzLmRlZmF1bHRSYWRpdXNQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcImRlZmF1bHRTY3JlZW5SYWRpdXNcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEsIHRydWUpO1xuXHR9XG5cblx0dXBkYXRlU3R5bGVEYXRhKClcblx0e1xuXHRcdHZhciBzdHlsZVJlY29yZHMgPSB0aGlzLmxheWVyUGF0aC5yZXRyaWV2ZVJlY29yZHMoe1xuXHRcdFx0ZmlsbDoge1xuXHRcdFx0XHRjb2xvcjogdGhpcy5maWxsU3R5bGVQYXRoLnB1c2goXCJjb2xvclwiKSxcblx0XHRcdFx0YWxwaGE6IHRoaXMuZmlsbFN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG5cdFx0XHRcdGltYWdlVVJMOiB0aGlzLmZpbGxTdHlsZVBhdGgucHVzaChcImltYWdlVVJMXCIpXG5cdFx0XHR9LFxuXHRcdFx0c3Ryb2tlOiB7XG5cdFx0XHRcdGNvbG9yOiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcImNvbG9yXCIpLFxuXHRcdFx0XHRhbHBoYTogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJhbHBoYVwiKSxcblx0XHRcdFx0d2VpZ2h0OiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcIndlaWdodFwiKSxcblx0XHRcdFx0bGluZUNhcDogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJjYXBzXCIpLFxuXHRcdFx0XHRsaW5lSm9pbjogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJqb2ludHNcIiksXG5cdFx0XHRcdG1pdGVyTGltaXQ6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwibWl0ZXJMaW1pdFwiKVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dmFyIHN0eWxlUmVjb3Jkc0luZGV4ID0gbG9kYXNoLmluZGV4Qnkoc3R5bGVSZWNvcmRzLCBcImlkXCIpO1xuXG5cdFx0dmFyIHNpemVCeU51bWVyaWMgPSB0aGlzLmxheWVyUGF0aC5yZXRyaWV2ZVJlY29yZHMoe3NpemVCeTogdGhpcy5zaXplQnl9LCB7ZGF0YVR5cGU6IFwibnVtYmVyXCJ9KTtcblxuXHRcdGZvciAobGV0IHJlY29yZCBvZiBzaXplQnlOdW1lcmljKVxuXHRcdHtcblx0XHRcdGxldCBpZCA9IHJlY29yZC5pZDtcblx0XHRcdGxldCBmdWxsUmVjb3JkID0gc3R5bGVSZWNvcmRzSW5kZXhbaWRdO1xuXHRcdFx0aWYgKGZ1bGxSZWNvcmQpXG5cdFx0XHR7XG5cdFx0XHRcdGZ1bGxSZWNvcmQuc2l6ZUJ5ID0gcmVjb3JkLnNpemVCeTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLnJhd1N0eWxlcyA9IHN0eWxlUmVjb3JkcztcblxuXHRcdGxldCBzaXplQnkgPSBsb2Rhc2gucGx1Y2soc3R5bGVSZWNvcmRzLCBcInNpemVCeVwiKTtcblx0XHRsZXQgc2l6ZUJ5TWF4ID0gbG9kYXNoLm1heChzaXplQnkpO1xuXHRcdGxldCBzaXplQnlNaW4gPSBsb2Rhc2gubWluKHNpemVCeSk7XG5cdFx0bGV0IGFic01heCA9IE1hdGgubWF4KHNpemVCeU1heCwgc2l6ZUJ5TWluKTtcblx0XHRsZXQgbWluU2NyZWVuUmFkaXVzID0gdGhpcy5taW5SYWRpdXNQYXRoLmdldFN0YXRlKCk7XG5cdFx0bGV0IG1heFNjcmVlblJhZGl1cyA9IHRoaXMubWF4UmFkaXVzUGF0aC5nZXRTdGF0ZSgpO1xuXHRcdGxldCBkZWZhdWx0U2NyZWVuUmFkaXVzID0gdGhpcy5kZWZhdWx0UmFkaXVzUGF0aC5nZXRTdGF0ZSgpO1xuXG5cdFx0c3R5bGVSZWNvcmRzID0gbG9kYXNoLnNvcnRCeU9yZGVyKHN0eWxlUmVjb3JkcywgW1wic2l6ZUJ5XCIsIFwiaWRcIl0sIFtcImRlc2NcIl0sIFtcImFzY1wiXSk7XG5cblx0XHRsZXQgek9yZGVyID0gMDtcblxuXHRcdGZvciAobGV0IHJlY29yZCBvZiBzdHlsZVJlY29yZHMpXG5cdFx0e1xuXHRcdFx0bGV0IHNjcmVlblJhZGl1cztcblxuXHRcdFx0bGV0IG5vcm1TaXplID0gU3RhbmRhcmRMaWIubm9ybWFsaXplKE1hdGguYWJzKHJlY29yZC5zaXplQnkpLCAwLCBhYnNNYXgpO1xuXG5cdFx0XHRpZiAoaXNOYU4obm9ybVNpemUpIHx8IHJlY29yZC5zaXplQnkgPT09IG51bGwpXG5cdFx0XHR7XG5cdFx0XHRcdHNjcmVlblJhZGl1cyA9IGRlZmF1bHRTY3JlZW5SYWRpdXM7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHNjcmVlblJhZGl1cyA9IG1pblNjcmVlblJhZGl1cyArIChub3JtU2l6ZSAqIChtYXhTY3JlZW5SYWRpdXMgLSBtaW5TY3JlZW5SYWRpdXMpKTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IG9sU3Ryb2tlID0gRmVhdHVyZUxheWVyLm9sU3Ryb2tlRnJvbVdlYXZlU3Ryb2tlKHJlY29yZC5zdHJva2UpO1xuXHRcdFx0bGV0IG9sRmlsbCA9IEZlYXR1cmVMYXllci5vbEZpbGxGcm9tV2VhdmVGaWxsKHJlY29yZC5maWxsKTtcblxuXHRcdFx0bGV0IG9sU3Ryb2tlRmFkZWQgPSBGZWF0dXJlTGF5ZXIub2xTdHJva2VGcm9tV2VhdmVTdHJva2UocmVjb3JkLnN0cm9rZSwgMC41KTtcblx0XHRcdGxldCBvbEZpbGxGYWRlZCA9IEZlYXR1cmVMYXllci5vbEZpbGxGcm9tV2VhdmVGaWxsKHJlY29yZC5maWxsLCAwLjUpO1xuXG5cdFx0XHRsZXQgb2xTZWxlY3Rpb25TdHlsZSA9IEZlYXR1cmVMYXllci5nZXRPbFNlbGVjdGlvblN0eWxlKG9sU3Ryb2tlKTtcblx0XHRcdGxldCBvbFByb2JlZFN0eWxlID0gRmVhdHVyZUxheWVyLmdldE9sUHJvYmVkU3R5bGUob2xTdHJva2UpO1xuXG5cdFx0XHRsZXQgbm9ybWFsU3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0aW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuXHRcdFx0XHRcdGZpbGw6IG9sRmlsbCwgc3Ryb2tlOiBvbFN0cm9rZSxcblx0XHRcdFx0XHRyYWRpdXM6IHNjcmVlblJhZGl1c1xuXHRcdFx0XHR9KVxuXHRcdFx0fSldO1xuXG5cdFx0XHRsZXQgdW5zZWxlY3RlZFN0eWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcblx0XHRcdFx0XHRmaWxsOiBvbEZpbGxGYWRlZCwgc3Ryb2tlOiBvbFN0cm9rZUZhZGVkLFxuXHRcdFx0XHRcdHJhZGl1czogc2NyZWVuUmFkaXVzXG5cdFx0XHRcdH0pXG5cdFx0XHR9KV07XG5cblx0XHRcdGxldCBzZWxlY3RlZFN0eWxlID0gW1xuXHRcdFx0XHRuZXcgb2wuc3R5bGUuU3R5bGUoe1xuXHRcdFx0XHRcdGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcblx0XHRcdFx0XHRcdHN0cm9rZTogb2xTZWxlY3Rpb25TdHlsZVswXS5nZXRTdHJva2UoKSxcblx0XHRcdFx0XHRcdHJhZGl1czogc2NyZWVuUmFkaXVzXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0ekluZGV4OiBvbFNlbGVjdGlvblN0eWxlWzBdLmdldFpJbmRleCgpXG5cdFx0XHRcdH0pXG5cdFx0XHRdO1xuXG5cdFx0XHRsZXQgcHJvYmVkU3R5bGUgPSBbXG5cdFx0XHRcdG5ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdFx0aW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuXHRcdFx0XHRcdFx0c3Ryb2tlOiBvbFByb2JlZFN0eWxlWzBdLmdldFN0cm9rZSgpLFxuXHRcdFx0XHRcdFx0cmFkaXVzOiBzY3JlZW5SYWRpdXNcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHR6SW5kZXg6IG9sUHJvYmVkU3R5bGVbMF0uZ2V0WkluZGV4KClcblx0XHRcdFx0fSksXG5cdFx0XHRcdG5ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdFx0aW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuXHRcdFx0XHRcdFx0c3Ryb2tlOiBvbFByb2JlZFN0eWxlWzFdLmdldFN0cm9rZSgpLFxuXHRcdFx0XHRcdFx0cmFkaXVzOiBzY3JlZW5SYWRpdXNcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHR6SW5kZXg6IG9sUHJvYmVkU3R5bGVbMV0uZ2V0WkluZGV4KClcblx0XHRcdFx0fSlcblx0XHRcdF07XG5cblx0XHRcdGxldCBmZWF0dXJlID0gdGhpcy5zb3VyY2UuZ2V0RmVhdHVyZUJ5SWQocmVjb3JkLmlkKTtcblxuXHRcdFx0aWYgKGZlYXR1cmUpXG5cdFx0XHR7XG5cdFx0XHRcdGZlYXR1cmUuc2V0UHJvcGVydGllcyh7bm9ybWFsU3R5bGUsIHVuc2VsZWN0ZWRTdHlsZSwgc2VsZWN0ZWRTdHlsZSwgcHJvYmVkU3R5bGUsIHpPcmRlcn0pO1xuXHRcdFx0fVxuXG5cdFx0XHR6T3JkZXIrKztcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NhdHRlclBsb3RMYXllcjtcblxucmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi5wbG90dGVyczo6U2NhdHRlclBsb3RQbG90dGVyXCIsIFNjYXR0ZXJQbG90TGF5ZXIpO1xuIiwiaW1wb3J0IExheWVyIGZyb20gXCIuL0xheWVyLmpzXCI7XG5pbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCB7cmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi9MYXllci5qc1wiO1xuXG5jbGFzcyBUaWxlTGF5ZXIgZXh0ZW5kcyBMYXllciB7XG5cblx0Y29uc3RydWN0b3IocGFyZW50LCBsYXllck5hbWUpXG5cdHtcblx0XHRzdXBlcihwYXJlbnQsIGxheWVyTmFtZSk7XG5cblx0XHR0aGlzLmxheWVyID0gbmV3IG9sLmxheWVyLlRpbGUoKTtcblx0XHR0aGlzLnNlcnZpY2VQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcInNlcnZpY2VcIiwgbnVsbCk7XG5cdFx0dGhpcy5vbGRQcm92aWRlck5hbWUgPSBudWxsO1xuXG5cdFx0dGhpcy5zZXJ2aWNlUGF0aC5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVRpbGVTb3VyY2UsIHRydWUpO1xuXHRcdHRoaXMucHJvamVjdGlvblBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVWYWxpZEV4dGVudHMsIHRydWUpO1xuXHR9XG5cblx0dXBkYXRlVmFsaWRFeHRlbnRzKClcblx0e1xuXHRcdHZhciBwcm9qID0gb2wucHJvai5nZXQodGhpcy5wcm9qZWN0aW9uUGF0aC5nZXRTdGF0ZSgpIHx8IFwiRVBTRzozODU3XCIpO1xuXHRcdGlmIChwcm9qKVxuXHRcdFx0dGhpcy5sYXllci5zZXRFeHRlbnQocHJvai5nZXRFeHRlbnQoKSk7XG5cdFx0ZWxzZVxuXHRcdFx0Y29uc29sZS5sb2coJ2ludmFsaWQgcHJvaiAtPiBubyBleHRlbnQnKTtcblx0fVxuXHRnZXRDdXN0b21XTVNTb3VyY2UoKVxuXHR7XG5cdFx0dmFyIGN1c3RvbVdNU1BhdGggPSB0aGlzLnNlcnZpY2VQYXRoO1xuXG5cdFx0aWYgKGN1c3RvbVdNU1BhdGgucHVzaChcIndtc1VSTFwiKS5nZXRUeXBlKCkpIHtcblx0XHRcdGxldCB1cmwgPSBjdXN0b21XTVNQYXRoLmdldFN0YXRlKFwid21zVVJMXCIpO1xuXHRcdFx0bGV0IGF0dHJpYnV0aW9ucyA9IGN1c3RvbVdNU1BhdGguZ2V0U3RhdGUoXCJjcmVkaXRJbmZvXCIpO1xuXHRcdFx0bGV0IHByb2plY3Rpb24gPSBjdXN0b21XTVNQYXRoLmdldFN0YXRlKFwidGlsZVByb2plY3Rpb25TUlNcIik7XG5cblx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLlhZWih7XG5cdFx0XHRcdHVybCwgYXR0cmlidXRpb25zLCBwcm9qZWN0aW9uXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRnZXRNb2Rlc3RNYXBzU291cmNlKClcblx0e1xuXHRcdHZhciBwcm92aWRlck5hbWVQYXRoID0gdGhpcy5zZXJ2aWNlUGF0aC5wdXNoKFwicHJvdmlkZXJOYW1lXCIpO1xuXG5cdFx0aWYgKHByb3ZpZGVyTmFtZVBhdGguZ2V0VHlwZSgpKSB7XG5cdFx0XHRsZXQgcHJvdmlkZXJOYW1lID0gcHJvdmlkZXJOYW1lUGF0aC5nZXRTdGF0ZSgpO1xuXG5cdFx0XHRpZiAocHJvdmlkZXJOYW1lID09PSB0aGlzLm9sZFByb3ZpZGVyTmFtZSkge1xuXHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXG5cdFx0XHRzd2l0Y2ggKHByb3ZpZGVyTmFtZSlcblx0XHRcdHtcblx0XHRcdFx0Y2FzZSBcIlN0YW1lbiBXYXRlckNvbG9yXCI6XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBvbC5zb3VyY2UuU3RhbWVuKHtsYXllcjogXCJ3YXRlcmNvbG9yXCIsIHdyYXBYOiBmYWxzZX0pO1xuXHRcdFx0XHRjYXNlIFwiU3RhbWVuIFRvbmVyXCI6XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBvbC5zb3VyY2UuU3RhbWVuKHtsYXllcjogXCJ0b25lclwiLCB3cmFwWDogZmFsc2V9KTtcblx0XHRcdFx0Y2FzZSBcIk9wZW4gTWFwUXVlc3QgQWVyaWFsXCI6XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBvbC5zb3VyY2UuTWFwUXVlc3Qoe2xheWVyOiBcInNhdFwiLCB3cmFwWDogZmFsc2V9KTtcblx0XHRcdFx0Y2FzZSBcIk9wZW4gTWFwUXVlc3RcIjpcblx0XHRcdFx0XHRyZXR1cm4gbmV3IG9sLnNvdXJjZS5NYXBRdWVzdCh7bGF5ZXI6IFwib3NtXCIsIHdyYXBYOiBmYWxzZX0pO1xuXHRcdFx0XHRjYXNlIFwiT3BlbiBTdHJlZXQgTWFwXCI6XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBvbC5zb3VyY2UuT1NNKHt3cmFwWDogZmFsc2V9KTtcblx0XHRcdFx0Y2FzZSBcIkJsdWUgTWFyYmxlIE1hcFwiOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLlRpbGVXTVMoe3VybDogXCJodHRwOi8vbmVvd21zLnNjaS5nc2ZjLm5hc2EuZ292L3dtcy93bXNcIiwgd3JhcFg6IGZhbHNlfSk7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlVGlsZVNvdXJjZSgpXG5cdHtcblx0XHR2YXIgc2VydmljZURyaXZlck5hbWUgPSB0aGlzLnNlcnZpY2VQYXRoLmdldFR5cGUoKTtcblx0XHR2YXIgbmV3TGF5ZXIgPSBudWxsO1xuXHRcdHN3aXRjaCAoc2VydmljZURyaXZlck5hbWUpXG5cdFx0e1xuXHRcdFx0Y2FzZSBcIndlYXZlLnNlcnZpY2VzLndtczo6TW9kZXN0TWFwc1dNU1wiOlxuXHRcdFx0XHRuZXdMYXllciA9IHRoaXMuZ2V0TW9kZXN0TWFwc1NvdXJjZSgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJ3ZWF2ZS5zZXJ2aWNlcy53bXM6OkN1c3RvbVdNU1wiOlxuXHRcdFx0XHRuZXdMYXllciA9IHRoaXMuZ2V0Q3VzdG9tV01TU291cmNlKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0bmV3TGF5ZXIgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChuZXdMYXllciAhPT0gdW5kZWZpbmVkKVxuXHRcdHtcblx0XHRcdHRoaXMuc291cmNlID0gbmV3TGF5ZXI7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcblxucmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi5wbG90dGVyczo6V01TUGxvdHRlclwiLCBUaWxlTGF5ZXIpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuLy9cbi8qIGdsb2JhbCBXZWF2ZSwgd2VhdmVqcyAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXJjaGFydCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIDxkaXY+PC9kaXY+O1xuICB9XG5cbn1cblxuLyoqXG4gKiBNZXRhZGF0YVxuICpcbiAqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgQXJyYXkuPE9iamVjdD4+fVxuICovXG5CYXJjaGFydC5wcm90b3R5cGUuRkxFWEpTX0NMQVNTX0lORk8gPSB7IG5hbWVzOiBbeyBuYW1lOiAnQmFyY2hhcnQnLCBxTmFtZTogJ3dlYXZlanMudG9vbHMuQmFyY2hhcnQnfV0sIGludGVyZmFjZXM6IFt3ZWF2ZWpzLmFwaS5jb3JlLklMaW5rYWJsZU9iamVjdF0gfTtcbldlYXZlLnJlZ2lzdGVyQ2xhc3MoJ3dlYXZlanMudG9vbHMuQmFyY2hhcnQnLCBCYXJjaGFydCk7XG4iLCJpbXBvcnQgQWJzdHJhY3RXZWF2ZVRvb2wgZnJvbSBcIi4uLy4uL291dHRzL3Rvb2xzL0Fic3RyYWN0V2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IGMzIGZyb20gXCJjM1wiO1xuaW1wb3J0IGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uLy4uL291dHRzL1dlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBGb3JtYXRVdGlscyBmcm9tIFwiLi4vdXRpbHMvRm9ybWF0VXRpbHNcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuY2xhc3MgV2VhdmVDM0xpbmVDaGFydCBleHRlbmRzIEFic3RyYWN0V2VhdmVUb29sIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMua2V5VG9JbmRleCA9IHt9O1xuICAgICAgICB0aGlzLmluZGV4VG9LZXkgPSB7fTtcbiAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbCA9IHt9O1xuICAgIH1cblxuICAgIF9zZWxlY3Rpb25LZXlzQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5cyA9IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEluZGljZXMgPSBzZWxlY3RlZEtleXMubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmtleVRvSW5kZXgpO1xuICAgICAgICB2YXIgaW5kaWNlcyA9IGtleXMubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdW5zZWxlY3RlZEluZGljZXMgPSBfLmRpZmZlcmVuY2UoaW5kaWNlcywgc2VsZWN0ZWRJbmRpY2VzKTtcbiAgICAgICAgaWYoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy91bmZvY3VzIGFsbCBjaXJjbGVzXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuZmlsdGVyKFwiLmMzLXNoYXBlXCIpLnN0eWxlKFwib3BhY2l0eVwiLCBcIjAuMVwiKTtcblxuICAgICAgICAgICAgc2VsZWN0ZWRJbmRpY2VzLmZvckVhY2goIChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vY3VzdG9tIHN0eWxlIGZvciBjaXJjbGVzIG9uIHNlbGVjdGVkIGxpbmVzXG4gICAgICAgICAgICAgICAgdmFyIGNpcmNsZUNvdW50ID0gZDMuc2VsZWN0KGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbChcImdcIikuZmlsdGVyKFwiLmMzLWNoYXJ0LWxpbmVcIikuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKVtpbmRleF0pWzBdWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDaXJjbGVzID0gXy5yYW5nZSgwLGNpcmNsZUNvdW50KTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENpcmNsZXMuZm9yRWFjaCggKGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGQzLnNlbGVjdChkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJnXCIpLmZpbHRlcihcIi5jMy1jaGFydC1saW5lXCIpLnNlbGVjdEFsbChcImNpcmNsZVwiKS5maWx0ZXIoXCIuYzMtc2hhcGVcIilbaW5kZXhdKVswXVswXVtpXSkuc3R5bGUoe29wYWNpdHk6IDEuMCwgXCJzdHJva2Utb3BhY2l0eVwiOiAxLjB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGUuYzMtbGluZVwiLCB7b3BhY2l0eTogMC4xfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHNlbGVjdGVkSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlLmMzLWxpbmVcIiwge29wYWNpdHk6IDEuMH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5zZWxlY3QoW1wieVwiXSwgc2VsZWN0ZWRJbmRpY2VzLCB0cnVlKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL2ZvY3VzIGFsbCBjaXJjbGVzXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuZmlsdGVyKFwiLmMzLXNoYXBlXCIpLnN0eWxlKHtvcGFjaXR5OiAxLjAsIFwic3Ryb2tlLW9wYWNpdHlcIjogMC4wfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKGluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZS5jMy1saW5lXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2VsZWN0KFtcInlcIl0sIFtdLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcm9iZWRLZXlzQ2hhbmdlZCgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5cyA9IHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LmdldEtleXMoKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkSW5kaWNlcyA9IHNlbGVjdGVkS2V5cy5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMua2V5VG9JbmRleCk7XG4gICAgICAgIHZhciBpbmRpY2VzID0ga2V5cy5tYXAoKGtleSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdW5zZWxlY3RlZEluZGljZXMgPSBfLmRpZmZlcmVuY2UoaW5kaWNlcywgc2VsZWN0ZWRJbmRpY2VzKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgLy91bmZvY3VzIGFsbCBjaXJjbGVzXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuZmlsdGVyKFwiLmMzLXNoYXBlXCIpLnN0eWxlKHtvcGFjaXR5OiAwLjEsIFwic3Ryb2tlLW9wYWNpdHlcIjogMC4wfSk7XG5cbiAgICAgICAgICAgIHNlbGVjdGVkSW5kaWNlcy5mb3JFYWNoKCAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAvL2N1c3RvbSBzdHlsZSBmb3IgY2lyY2xlcyBvbiBwcm9iZWQgbGluZXNcbiAgICAgICAgICAgICAgICB2YXIgY2lyY2xlQ291bnQgPSBkMy5zZWxlY3QoZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiZ1wiKS5maWx0ZXIoXCIuYzMtY2hhcnQtbGluZVwiKS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuZmlsdGVyKFwiLmMzLXNoYXBlXCIpW2luZGV4XSlbMF1bMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZENpcmNsZXMgPSBfLnJhbmdlKDAsY2lyY2xlQ291bnQpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2lyY2xlcy5mb3JFYWNoKCAoaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoZDMuc2VsZWN0KGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbChcImdcIikuZmlsdGVyKFwiLmMzLWNoYXJ0LWxpbmVcIikuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKVtpbmRleF0pWzBdWzBdW2ldKS5zdHlsZSh7b3BhY2l0eTogMS4wLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUodW5zZWxlY3RlZEluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZS5jMy1saW5lXCIsIHtvcGFjaXR5OiAwLjF9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGUuYzMtbGluZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlU3R5bGUoKSB7XG4gICAgICAgIGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbChcImNpcmNsZVwiKS5zdHlsZShcIm9wYWNpdHlcIiwgMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJzdHJva2Utb3BhY2l0eVwiLCAwLjApO1xuICAgIH1cblxuICAgIF9kYXRhQ2hhbmdlZCgpIHtcbiAgICAgICAgdGhpcy5jb2x1bW5MYWJlbHMgPSBbXTtcbiAgICAgICAgdGhpcy5jb2x1bW5OYW1lcyA9IFtdO1xuXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucGF0aHMuY29sdW1ucy5nZXRDaGlsZHJlbigpO1xuXG4gICAgICAgIHRoaXMueUxhYmVsQ29sdW1uUGF0aCA9IGNoaWxkcmVuWzBdO1xuXG4gICAgICAgIGxldCBudW1lcmljTWFwcGluZyA9IHtcbiAgICAgICAgICAgIGNvbHVtbnM6IGNoaWxkcmVuLFxuICAgICAgICAgICAgeUxhYmVsOiB0aGlzLnlMYWJlbENvbHVtblBhdGhcbiAgICAgICAgfTtcblxuXG4gICAgICAgIGxldCBzdHJpbmdNYXBwaW5nID0ge1xuICAgICAgICAgICAgY29sdW1uczogY2hpbGRyZW4sXG4gICAgICAgICAgICBsaW5lOiB7XG4gICAgICAgICAgICAgICAgLy9hbHBoYTogdGhpcy5fbGluZVN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMucGF0aHMubGluZVN0eWxlLnB1c2goXCJjb2xvclwiKVxuICAgICAgICAgICAgICAgIC8vY2FwczogdGhpcy5fbGluZVN0eWxlUGF0aC5wdXNoKFwiY2Fwc1wiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHlMYWJlbDogdGhpcy55TGFiZWxDb2x1bW5QYXRoXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChsZXQgaWR4IGluIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpZHhdO1xuICAgICAgICAgICAgbGV0IHRpdGxlID0gY2hpbGQuZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpO1xuICAgICAgICAgICAgbGV0IG5hbWUgPSBjaGlsZC5nZXRQYXRoKCkucG9wKCk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkxhYmVscy5wdXNoKHRpdGxlKTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uTmFtZXMucHVzaChuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubnVtZXJpY1JlY29yZHMgPSB0aGlzLnBhdGhzLnBsb3R0ZXIucmV0cmlldmVSZWNvcmRzKG51bWVyaWNNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJudW1iZXJcIn0pO1xuICAgICAgICB0aGlzLnN0cmluZ1JlY29yZHMgPSB0aGlzLnBhdGhzLnBsb3R0ZXIucmV0cmlldmVSZWNvcmRzKHN0cmluZ01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcInN0cmluZ1wifSk7XG5cbiAgICAgICAgdGhpcy5yZWNvcmRzID0gXy56aXAodGhpcy5udW1lcmljUmVjb3JkcywgdGhpcy5zdHJpbmdSZWNvcmRzKTtcbiAgICAgICAgdGhpcy5yZWNvcmRzID0gXy5zb3J0QnkodGhpcy5yZWNvcmRzLCBbMCwgXCJpZFwiXSk7XG5cbiAgICAgICAgaWYodGhpcy5yZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICBbdGhpcy5udW1lcmljUmVjb3JkcywgdGhpcy5zdHJpbmdSZWNvcmRzXSA9IF8udW56aXAodGhpcy5yZWNvcmRzKTtcblxuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG4gICAgICAgIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHRoaXMua2V5VG9JbmRleFtyZWNvcmQuaWRdID0gaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmluZGV4VG9LZXlbaW5kZXhdID0gcmVjb3JkLmlkO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN0cmluZ1JlY29yZHMuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHZhciBudW1lcmljUmVjb3JkID0gdGhpcy5udW1lcmljUmVjb3Jkc1tpbmRleF07XG4gICAgICAgICAgdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFtudW1lcmljUmVjb3JkLnlMYWJlbF0gPSByZWNvcmQueUxhYmVsO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY29sdW1ucyA9IFtdO1xuXG4gICAgICAgIGNvbHVtbnMgPSB0aGlzLm51bWVyaWNSZWNvcmRzLm1hcChmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wQXJyID0gW107XG4gICAgICAgICAgICB0ZW1wQXJyLnB1c2gocmVjb3JkLmlkKTtcbiAgICAgICAgICAgIF8ua2V5cyhyZWNvcmQuY29sdW1ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgdGVtcEFyci5wdXNoKHJlY29yZC5jb2x1bW5zW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcEFycjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb2xvcnMgPSB7fTtcbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb2xvcnNbcmVjb3JkLmlkXSA9IHJlY29yZC5saW5lLmNvbG9yIHx8IFwiI0MwQ0REMVwiO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY2hhcnRUeXBlID0gXCJsaW5lXCI7XG4gICAgICAgIGlmKHRoaXMucGF0aHMucGxvdHRlci5wdXNoKFwiY3VydmVUeXBlXCIpLmdldFN0YXRlKCkgPT09IFwiZG91YmxlXCIpIHtcbiAgICAgICAgICAgIGNoYXJ0VHlwZSA9IFwic3BsaW5lXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNoYXJ0LmxvYWQoe2NvbHVtbnM6IGNvbHVtbnMsIGNvbG9yczogdGhpcy5jb2xvcnMsIHR5cGU6IGNoYXJ0VHlwZSwgdW5sb2FkOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlc2l6aW5nXCIpO1xuICAgICAgICAvL3ZhciBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBuZXdFbGVtZW50U2l6ZSA9IHRoaXMuZ2V0RWxlbWVudFNpemUoKTtcbiAgICAgICAgaWYoIV8uaXNFcXVhbChuZXdFbGVtZW50U2l6ZSwgdGhpcy5lbGVtZW50U2l6ZSkpIHtcbiAgICAgICAgICB0aGlzLmNoYXJ0LnJlc2l6ZShuZXdFbGVtZW50U2l6ZSk7XG4gICAgICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG5ld0VsZW1lbnRTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8vdmFyIGVuZCA9IERhdGUubm93KCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coZW5kIC0gc3RhcnQpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAvKiBDbGVhbnVwIGNhbGxiYWNrcyAqL1xuICAgICAgICAvL3RoaXMudGVhcmRvd25DYWxsYmFja3MoKTtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICAgICAgdGhpcy5jaGFydC5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIHZhciBkYXRhQ2hhbmdlZCA9IF8uZGVib3VuY2UodGhpcy5fZGF0YUNoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbktleVNldENoYW5nZWQgPSB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgcHJvYmVLZXlTZXRDaGFuZ2VkID0gXy5kZWJvdW5jZSh0aGlzLl9wcm9iZWRLZXlzQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgcGxvdHRlclBhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwicGxvdFwiKTtcbiAgICAgICAgdmFyIG1hcHBpbmcgPSBbXG4gICAgICAgICAgeyBuYW1lOiBcInBsb3R0ZXJcIiwgcGF0aDogcGxvdHRlclBhdGgsIGNhbGxiYWNrczogbnVsbH0sXG4gICAgICAgICAgeyBuYW1lOiBcImNvbHVtbnNcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImNvbHVtbnNcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwibGluZVN0eWxlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsaW5lU3R5bGVcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiY3VydmVUeXBlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJjdXJ2ZVR5cGVcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwiZmlsdGVyZWRLZXlTZXRcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImZpbHRlcmVkS2V5U2V0XCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcInNlbGVjdGlvbktleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQsIGNhbGxiYWNrczogc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZH0sXG4gICAgICAgICAgeyBuYW1lOiBcInByb2JlS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LCBjYWxsYmFja3M6IHByb2JlS2V5U2V0Q2hhbmdlZH1cbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLmluaXRpYWxpemVQYXRocyhtYXBwaW5nKTtcblxuICAgICAgICB0aGlzLmMzQ29uZmlnID0ge1xuICAgICAgICAgICAgLy9zaXplOiB0aGlzLmdldEVsZW1lbnRTaXplKCksXG4gICAgICAgICAgICBwYWRkaW5nOiB7XG4gICAgICAgICAgICAgIHRvcDogMjAsXG4gICAgICAgICAgICAgIGJvdHRvbTogMjAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAzMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zOiBbXSxcbiAgICAgICAgICAgICAgICB4U29ydDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25jbGljazogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMua2V5RG93biAmJiBkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW2QuaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25zZWxlY3RlZDogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5hZGRLZXlzKFtkLmlkXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9udW5zZWxlY3RlZDogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5yZW1vdmVLZXlzKFtkLmlkXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ubW91c2VvdmVyOiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuc2V0S2V5cyhbZC5pZF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3V0OiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF4aXM6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpbGluZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uTGFiZWxzW2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpbGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnlMYWJlbENvbHVtblBhdGggJiYgdGhpcy55TGFiZWxDb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgnZGF0YVR5cGUnKVwiKSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsW251bV0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRm9ybWF0VXRpbHMuZGVmYXVsdE51bWJlckZvcm1hdHRpbmcobnVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmR0bzogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnJlbmRlcmVkOiB0aGlzLl91cGRhdGVTdHlsZS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jaGFydCA9IGMzLmdlbmVyYXRlKHRoaXMuYzNDb25maWcpO1xuICAgIH1cblxuICAgIGhhbmRsZUNsaWNrKGV2ZW50Ok1vdXNlRXZlbnQpOnZvaWQge1xuICAgICAgICBpZighdGhpcy5mbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdG9nZ2xlS2V5KGV2ZW50OktleWJvYXJkRXZlbnQpOnZvaWQge1xuICAgICAgICBpZigoZXZlbnQua2V5Q29kZSA9PT0gMTcpfHwoZXZlbnQua2V5Q29kZSA9PT0gOTEpIHx8IChldmVudC5rZXlDb2RlID09PSAyMjQpKSB7XG4gICAgICAgICAgICB0aGlzLmtleURvd24gPSAhdGhpcy5rZXlEb3duO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXZWF2ZUMzTGluZUNoYXJ0O1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OkxpbmVDaGFydFRvb2xcIiwgV2VhdmVDM0xpbmVDaGFydCk7XG4iLCJpbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vLi4vb3V0dHMvV2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7cm91bmR9IGZyb20gXCJkM1wiO1xuaW1wb3J0IHtCb290c3RyYXBUYWJsZSwgVGFibGVIZWFkZXJDb2x1bW59IGZyb20gJ3JlYWN0LWJvb3RzdHJhcC10YWJsZSc7XG4vL2ltcG9ydCBSZWFjdERhdGFHcmlkIGZyb20gXCJyZWFjdC1kYXRhZ3JpZFwiO1xuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuLi8uLi9vdXR0cy90b29scy9BYnN0cmFjdFdlYXZlVG9vbC5qc3hcIjtcblxuY2xhc3MgV2VhdmVSZWFjdFRhYmxlIGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHZhciBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudCA/IHRoaXMuZ2V0RWxlbWVudFNpemUoKSA6IG51bGw7XG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgICAgIDxEYXRhVGFibGUgdG9vbFBhdGg9e3RoaXMudG9vbFBhdGh9IHdpZHRoPXtlbGVtZW50U2l6ZS53aWR0aCArIFwicHhcIn0gaGVpZ2h0PXtlbGVtZW50U2l6ZS5oZWlnaHQgKyBcInB4XCJ9Lz5cbiAgICAgICAgLCB0aGlzLmVsZW1lbnQpO1xuICAgIH1cbn1cblxuY2xhc3MgRGF0YVRhYmxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy50b29sUGF0aCA9IHByb3BzLnRvb2xQYXRoO1xuICAgICAgICB0aGlzLl9jb2x1bW5zUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaChcImNvbHVtbnNcIik7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMuX2NvbHVtbnNQYXRoLmFkZENhbGxiYWNrKHRoaXMsIF8uZGVib3VuY2UodGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMpLCAwKSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnRvb2xQYXRoLnB1c2goXCJmaWx0ZXJlZEtleVNldFwiKS5hZGRDYWxsYmFjayh0aGlzLCBfLmRlYm91bmNlKHRoaXMuZm9yY2VVcGRhdGUuYmluZCh0aGlzKSwgMCksIHRydWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy50b29sUGF0aC5wdXNoKFwic2VsZWN0aW9uS2V5U2V0XCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuX3NlbGVjdGlvbktleXNDaGFuZ2VkLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICAgIF9zZWxlY3Rpb25LZXlzQ2hhbmdlZCAoKSB7XG4gICAgICAgIC8vIHZhciBrZXlzID0gdGhpcy50b29sUGF0aC5wdXNoKFwic2VsZWN0aW9uS2V5U2V0XCIsIG51bGwpLmdldEtleXMoKTtcbiAgICAgICAgLy8gdmFyIHNlbGVjdGlvbiA9IHt9O1xuICAgICAgICAvLyBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAvLyAgICAgc2VsZWN0aW9uW2tleV0gPSB7fTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAvLyAgICAgc2VsZWN0ZWQ6IHNlbGVjdGlvblxuICAgICAgICAvLyB9KTtcbiAgICB9XG5cbiAgICBvblNlbGVjdGlvbkNoYW5nZShzZWxlY3RlZElkcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZElkc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sUGF0aC5wdXNoKFwic2VsZWN0aW9uS2V5U2V0XCIsIG51bGwpLnNldEtleXMoXy5rZXlzKHNlbGVjdGVkSWRzKSk7XG4gICAgfVxuXG4gICAgY3VzdG9tRm9ybWF0KGNlbGwsIHJvdykge1xuICAgICAgICBpZih0eXBlb2YgY2VsbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJvdW5kKGNlbGwsIDIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2VsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9jb2x1bW5zUGF0aC5yZXRyaWV2ZVJlY29yZHModGhpcy5fY29sdW1uc1BhdGguZ2V0TmFtZXMoKSwgdGhpcy50b29sUGF0aC5wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIikpIHx8IFtdO1xuXG4gICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5fY29sdW1uc1BhdGguZ2V0Q2hpbGRyZW4oKS5tYXAoKGNvbHVtblBhdGgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogY29sdW1uUGF0aC5nZXRQYXRoKCkucG9wKCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IGNvbHVtblBhdGguZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb2x1bW5zLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJpZFwiLFxuICAgICAgICAgICAgdGl0bGU6IFwiaWRcIlxuICAgICAgICB9KTtcblxuICAgICAgICAvL3ZhciBjb2x1bW5XaWR0aCA9IHRoaXMucHJvcHMuY29udGFpbmVyLmNsaWVudFdpZHRoIC8gY29sdW1ucy5sZW5ndGg7XG5cbiAgICAgICAgdmFyIGNvbHVtbkhlYWRlcnMgPSBjb2x1bW5zLm1hcCgoY29sdW1uLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiA8VGFibGVIZWFkZXJDb2x1bW4gZGF0YUZpZWxkPXtjb2x1bW4ubmFtZX0ga2V5PXtpbmRleH0gZGF0YUFsaWduPVwibGVmdFwiIGRhdGFGb3JtYXQ9e3RoaXMuY3VzdG9tRm9ybWF0fSBkYXRhU29ydD17dHJ1ZX0+e2NvbHVtbi50aXRsZX08L1RhYmxlSGVhZGVyQ29sdW1uPjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIDxCb290c3RyYXBUYWJsZSBkYXRhPXtkYXRhfSBrZXlGaWVsZD1cImlkXCIgc3RyaXBlZD17dHJ1ZX0gaG92ZXI9e3RydWV9IHdpZHRoPXt0aGlzLnByb3BzLndpZHRofSBoZWlnaHQ9e3RoaXMucHJvcHMuaGVpZ2h0fT5cbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uSGVhZGVyc1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDwvQm9vdHN0cmFwVGFibGU+O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVSZWFjdFRhYmxlO1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OlRhYmxlVG9vbFwiLCBXZWF2ZVJlYWN0VGFibGUpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtMaXN0R3JvdXBJdGVtLCBMaXN0R3JvdXB9IGZyb20gXCJyZWFjdC1ib290c3RyYXBcIjtcbmltcG9ydCB7cmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb259IGZyb20gXCIuLi8uLi9vdXR0cy9XZWF2ZVRvb2wuanN4XCI7XG5pbXBvcnQgQWJzdHJhY3RXZWF2ZVRvb2wgZnJvbSBcIi4uLy4uL291dHRzL3Rvb2xzL0Fic3RyYWN0V2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuXG5jb25zdCBzZXNzaW9uU3RhdGVNZW51U3R5bGUgPSB7d2lkdGg6IFwiMTAwJVwifTtcblxuY2xhc3MgU2Vzc2lvblN0YXRlTWVudVRvb2wgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy50b29sUGF0aC5wdXNoKFwiY2hvaWNlc1wiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB0aGlzLnRvb2xQYXRoLnB1c2goXCJzZWxlY3RlZENob2ljZVwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuXG4gIH1cblxuICBoYW5kbGVJdGVtQ2xpY2soaW5kZXgsIGV2ZW50KSB7XG4gICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgIHRoaXMudG9vbFBhdGguc3RhdGUoXCJzZWxlY3RlZENob2ljZVwiLCB0aGlzLmNob2ljZXMuZ2V0TmFtZXMoKVtpbmRleF0pO1xuICAgICB2YXIgdGFyZ2V0cyA9IHRoaXMudG9vbFBhdGgucHVzaChcInRhcmdldHNcIik7XG4gICAgIHZhciBjaG9pY2UgPSB0aGlzLmNob2ljZXMuZ2V0U3RhdGUoaW5kZXgpO1xuICAgICB0YXJnZXRzLmZvckVhY2goY2hvaWNlLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgIHRoaXMucHVzaChrZXksIG51bGwpLnN0YXRlKHZhbHVlKVxuICAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcblxuICAgIHRoaXMuY2hvaWNlcyA9IHRoaXMudG9vbFBhdGgucHVzaChcImNob2ljZXNcIik7XG4gICAgdmFyIHNlbGVjdGVkQ2hvaWNlID0gdGhpcy50b29sUGF0aC5nZXRTdGF0ZShcInNlbGVjdGVkQ2hvaWNlXCIpO1xuXG4gICAgdmFyIG1lbnVzID0gdGhpcy5jaG9pY2VzLmdldE5hbWVzKCkubWFwKChjaG9pY2UsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gY2hvaWNlID09PSBzZWxlY3RlZENob2ljZSA/IDxMaXN0R3JvdXBJdGVtIGFjdGl2ZSBrZXk9e2luZGV4fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUl0ZW1DbGljay5iaW5kKHRoaXMsIGluZGV4KX0+e2Nob2ljZX08L0xpc3RHcm91cEl0ZW0+XG4gICAgOiA8TGlzdEdyb3VwSXRlbSBrZXk9e2luZGV4fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUl0ZW1DbGljay5iaW5kKHRoaXMsIGluZGV4KX0+e2Nob2ljZX08L0xpc3RHcm91cEl0ZW0+O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICg8ZGl2IHN0eWxlPXtzZXNzaW9uU3RhdGVNZW51U3R5bGV9PlxuICAgICAgPExpc3RHcm91cD5cbiAgICAgICAge1xuICAgICAgICAgIG1lbnVzXG4gICAgICAgIH1cbiAgICAgIDwvTGlzdEdyb3VwPlxuICAgIDwvZGl2Pik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2Vzc2lvblN0YXRlTWVudVRvb2w7XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwid2VhdmUudWk6OlNlc3Npb25TdGF0ZU1lbnVUb29sXCIsIFNlc3Npb25TdGF0ZU1lbnVUb29sKTtcbiIsImltcG9ydCBkMyBmcm9tIFwiZDNcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtYXRVdGlscyB7XG5cblx0Ly8gdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBkZWZhdWx0IG51bWJlciBmb3JtYXRpbmcuXG5cdC8vIGZvciBudW1iZXIgdmFsdWVzLCB3ZSByb3VuZCB0aGVtIHRvIGF0IG1vc3QgNCBkZWNpbWFsIHBsYWNlc1xuXHQvLyB1bmxlc3MgdGhlIG51bWJlciBpcyB2ZXJ5IHNtYWxsLCBpbiB3aGljaCBjYXNlIHdlIGp1c3QgcmV0dXJuIGl0XG5cdHN0YXRpYyBkZWZhdWx0TnVtYmVyRm9ybWF0dGluZyh4KSB7XG5cdFx0aWYoeCA8IDAuMDAwMSkge1xuXHRcdFx0cmV0dXJuIHg7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBkMy5yb3VuZCh4LCA0KTtcblx0XHR9XG5cdH1cbn1cbiJdfQ==
