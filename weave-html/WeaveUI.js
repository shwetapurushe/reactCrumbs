(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.WeaveUI = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrapTable=t(require("react"),require("react-dom")):e.ReactBootstrapTable=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=n(o),a=r(40),s=n(a),l=r(34);"undefined"!=typeof window&&(window.BootstrapTable=i["default"],window.TableHeaderColumn=s["default"],window.TableDataSet=l.TableDataSet),t["default"]={BootstrapTable:i["default"],TableHeaderColumn:s["default"],TableDataSet:l.TableDataSet},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=r(4),f=n(p),h=r(5),v=n(h),y=r(9),m=n(y),g=r(30),b=n(g),w=r(32),E=n(w),_=r(33),P=n(_),T=r(34),S=r(36),O=n(S),C=function(e){function t(e){var r=this;o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this._scrollHeader=function(e){r.refs.header.refs.container.scrollLeft=e.currentTarget.scrollLeft},this._adjustHeaderWidth=function(){var e=r.refs.header.refs.container.childNodes[0],t=r.refs.body.refs.container.childNodes[0];e.offsetWidth!==t.offsetWidth&&(e.style.width=t.offsetWidth+"px");var n=r.refs.body.getBodyHeaderDomProp();r.refs.header.fitHeader(n,r.refs.body.refs.container.scrollHeight>r.refs.body.refs.container.clientHeight)},this._attachCellEditFunc(),Array.isArray(this.props.data)?this.store=new T.TableDataStore(this.props.data):(this.store=new T.TableDataStore(this.props.data.getData()),this.props.data.clear(),this.props.data.on("change",function(e){r.store.setData(e),r.setState({data:r.getTableData(r.props)})})),this.initTable(this.props),this.props.selectRow&&this.props.selectRow.selected&&this.store.setSelectedRowKey(this.props.selectRow.selected),this.state={data:this.getTableData(this.props),selectedRowKeys:this.store.getSelectedRowKeys()}}return i(t,e),a(t,[{key:"initTable",value:function(e){var t=e.keyField,r={};if("string"==typeof t&&t.length||u["default"].Children.forEach(e.children,function(e){if(e.props.isKey){if(null!=t)throw"Error. Multiple key column be detected in TableHeaderColumn.";t=e.props.dataField}},this),u["default"].Children.forEach(e.children,function(e){e.props.sortFunc&&(r[e.props.dataField]=e.props.sortFunc)},this),null==t)throw"Error. No any key column defined in TableHeaderColumn.Use 'isKey={true}' to specify an unique column after version 0.5.4.";this.store.setProps({isPagination:e.pagination,keyField:t,customSortFuncMap:r,multiColumnSearch:e.multiColumnSearch,remote:this.isRemoteDataSource()})}},{key:"getTableData",value:function(e){var t=[];if(e.pagination){var r=e.options.page,n=e.options.sizePerPage;r||(r=this.refs.pagination?this.refs.pagination.getCurrentPage():1),n||(n=this.refs.pagination?this.refs.pagination.getSizePerPage():f["default"].SIZE_PER_PAGE),r>=e.data.length/n&&(r=1),t=this.store.page(r,n).get()}else t=this.store.get();return t}},{key:"componentWillReceiveProps",value:function(e){if(this.initTable(e),Array.isArray(e.data)){this.store.setData(e.data);var t=this.getTableData(e);this.setState({data:t})}e.selectRow&&e.selectRow.selected&&(this.store.setSelectedRowKey(e.selectRow.selected),this.setState({selectedRowKeys:e.selectRow.selected}))}},{key:"componentDidMount",value:function(){this._adjustHeaderWidth(),window.addEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.addEventListener("scroll",this._scrollHeader)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._adjustHeaderWidth),this.refs.body.refs.container.removeEventListener("scroll",this._scrollHeader)}},{key:"componentDidUpdate",value:function(){this._adjustHeaderWidth(),this._attachCellEditFunc(),this.props.options.afterTableComplete&&this.props.options.afterTableComplete()}},{key:"_attachCellEditFunc",value:function(){this.props.cellEdit&&(this.props.cellEdit.__onCompleteEdit__=this.handleEditCell.bind(this),this.props.cellEdit.mode!==f["default"].CELL_EDIT_NONE&&(this.props.selectRow.clickToSelect=!1))}},{key:"isRemoteDataSource",value:function(e){return(e||this.props).remote}},{key:"render",value:function(){var e=((0,d["default"])("react-bs-table"),this.props.children),t={height:this.props.height,maxHeight:this.props.maxHeight};Array.isArray(this.props.children)||(e=[this.props.children]);var r=e.map(function(e,t){return{name:e.props.dataField,align:e.props.dataAlign,sort:e.props.dataSort,format:e.props.dataFormat,editable:e.props.editable,hidden:e.props.hidden,className:e.props.columnClassName,width:e.props.width,text:e.props.children,index:t}},this),n=this.renderPagination(),o=this.renderToolBar(),i=this.renderTableFilter(r),a=this.isSelectAll();return u["default"].createElement("div",{className:"react-bs-container",ref:"table"},o,u["default"].createElement("div",{className:"react-bs-table-container",style:t},u["default"].createElement(v["default"],{ref:"header",rowSelectType:this.props.selectRow.mode,hideSelectColumn:this.props.selectRow.hideSelectColumn,sortName:this.props.options.sortName,sortOrder:this.props.options.sortOrder,onSort:this.handleSort.bind(this),onSelectAllRow:this.handleSelectAllRow.bind(this),bordered:this.props.bordered,condensed:this.props.condensed,isSelectAll:a},this.props.children),u["default"].createElement(m["default"],{height:this.props.height,maxHeight:this.props.maxHeight,ref:"body",data:this.state.data,columns:r,trClassName:this.props.trClassName,striped:this.props.striped,bordered:this.props.bordered,hover:this.props.hover,keyField:this.store.getKeyField(),condensed:this.props.condensed,selectRow:this.props.selectRow,cellEdit:this.props.cellEdit,selectedRowKeys:this.state.selectedRowKeys,onRowClick:this.handleRowClick.bind(this),onSelectRow:this.handleSelectRow.bind(this),noDataText:this.props.options.noDataText})),i,n)}},{key:"isSelectAll",value:function(){var e=this.store.getSelectedRowKeys(),t=this.store.getAllRowkey();return e.length!==t.length?0===e.length?!1:"indeterminate":!0}},{key:"handleSort",value:function(e,t){if(this.props.options.onSortChange&&this.props.options.onSortChange(t,e,this.props),!this.isRemoteDataSource()){var r=this.store.sort(e,t).get();this.setState({data:r})}}},{key:"handlePaginationData",value:function(e,t){var r=this.props.options.onPageChange;if(r&&r(e,t),!this.isRemoteDataSource()){var n=this.store.page(e,t).get();this.setState({data:n})}}},{key:"handleRowClick",value:function(e){this.props.options.onRowClick&&this.props.options.onRowClick(e)}},{key:"handleSelectAllRow",value:function(e){var t=e.currentTarget.checked,r=[],n=!0;this.props.selectRow.onSelectAll&&(n=this.props.selectRow.onSelectAll(t,t?this.store.get():[])),("undefined"==typeof n||n!==!1)&&(t&&(r=this.store.getAllRowkey()),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleSelectRow",value:function(e,t){var r=this.store.getSelectedRowKeys(),n=e[this.store.getKeyField()],o=!0;this.props.selectRow.onSelect&&(o=this.props.selectRow.onSelect(e,t)),("undefined"==typeof o||o!==!1)&&(this.props.selectRow.mode===f["default"].ROW_SELECT_SINGLE?r=t?[n]:[]:t?r.push(n):r=r.filter(function(e){return n!==e}),this.store.setSelectedRowKey(r),this.setState({selectedRowKeys:r}))}},{key:"handleEditCell",value:function(e,t,r){var n=void 0;u["default"].Children.forEach(this.props.children,function(e,t){return t==r?(n=e.props.dataField,!1):void 0});var o=this.store.edit(e,t,n).get();this.setState({data:o}),this.props.cellEdit.afterSaveCell&&this.props.cellEdit.afterSaveCell(this.state.data[t],n,e)}},{key:"handleAddRowBegin",value:function(){this.refs.body}},{key:"handleAddRow",value:function(e){var t=void 0;try{this.store.add(e)}catch(r){return r}if(this.props.pagination){var n=this.refs.pagination.getSizePerPage(),o=Math.ceil(this.store.getDataNum()/n);t=this.store.page(o,n).get(),this.setState({data:t}),this.refs.pagination.changePage(o)}else t=this.store.get(),this.setState({data:t});this.props.options.afterInsertRow&&this.props.options.afterInsertRow(e)}},{key:"getSizePerPage",value:function(){return this.props.pagination?this.refs.pagination.getSizePerPage():void 0}},{key:"getCurrentPage",value:function(){return this.props.pagination?this.refs.pagination.getCurrentPage():void 0}},{key:"handleDropRow",value:function(e){var t=this,r=e?e:this.store.getSelectedRowKeys();r&&r.length>0&&(this.props.options.handleConfirmDeleteRow?this.props.options.handleConfirmDeleteRow(function(){t.deleteRow(r)}):confirm("Are you sure want delete?")&&this.deleteRow(r))}},{key:"deleteRow",value:function(e){var t=void 0;if(this.store.remove(e),this.store.setSelectedRowKey([]),this.props.pagination){var r=this.refs.pagination.getSizePerPage(),n=Math.ceil(this.store.getDataNum()/r),o=this.refs.pagination.getCurrentPage();o>n&&(o=n),t=this.store.page(o,r).get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys()}),this.refs.pagination.changePage(o)}else t=this.store.get(),this.setState({data:t,selectedRowKeys:this.store.getSelectedRowKeys()});this.props.options.afterDeleteRow&&this.props.options.afterDeleteRow(e)}},{key:"handleFilterData",value:function(e){this.store.filter(e);var t=void 0;if(this.props.pagination){var r=this.refs.pagination.getSizePerPage();t=this.store.page(1,r).get(),this.refs.pagination.changePage(1)}else t=this.store.get();this.props.options.afterColumnFilter&&this.props.options.afterColumnFilter(e,this.store.getDataIgnoringPagination()),this.setState({data:t})}},{key:"handleExportCSV",value:function(){var e=this.store.getDataIgnoringPagination(),t=[];this.props.children.map(function(e){e.props.hidden===!1&&t.push(e.props.dataField)}),(0,O["default"])(e,t,this.props.csvFileName)}},{key:"handleSearch",value:function(e){this.store.search(e);var t=void 0;if(this.props.pagination){var r=this.refs.pagination.getSizePerPage();t=this.store.page(1,r).get(),this.refs.pagination.changePage(1)}else t=this.store.get();this.props.options.afterSearch&&this.props.options.afterSearch(e,this.store.getDataIgnoringPagination()),this.setState({data:t})}},{key:"renderPagination",value:function(){if(this.props.pagination){var e=void 0;return e=this.isRemoteDataSource()?this.props.fetchInfo.dataTotalSize:this.store.getDataNum(),u["default"].createElement("div",null,u["default"].createElement(b["default"],{ref:"pagination",currPage:this.props.options.page||1,changePage:this.handlePaginationData.bind(this),sizePerPage:this.props.options.sizePerPage||f["default"].SIZE_PER_PAGE_LIST[0],sizePerPageList:this.props.options.sizePerPageList||f["default"].SIZE_PER_PAGE_LIST,paginationSize:this.props.options.paginationSize||f["default"].PAGINATION_SIZE,remote:this.isRemoteDataSource(),dataSize:e,onSizePerPageList:this.props.options.onSizePerPageList}))}return null}},{key:"renderToolBar",value:function(){var e=void 0;return e=Array.isArray(this.props.children)?this.props.children.map(function(e){var t=e.props;return{name:t.children,field:t.dataField,autoValue:t.autoValue||!1,editable:t.editable&&"function"==typeof t.editable?t.editable():t.editable,format:t.format?format:!1}}):[{name:this.props.children.props.children,field:this.props.children.props.dataField,editable:this.props.children.props.editable}],this.props.insertRow||this.props.deleteRow||this.props.search||this.props.exportCSV?u["default"].createElement("div",{className:"tool-bar"},u["default"].createElement(E["default"],{enableInsert:this.props.insertRow,enableDelete:this.props.deleteRow,enableSearch:this.props.search,enableExportCSV:this.props.exportCSV,columns:e,searchPlaceholder:this.props.searchPlaceholder,onAddRow:this.handleAddRow.bind(this),onAddRowBegin:this.handleAddRowBegin.bind(this),onDropRow:this.handleDropRow.bind(this),onSearch:this.handleSearch.bind(this),onExportCSV:this.handleExportCSV.bind(this)})):null}},{key:"renderTableFilter",value:function(e){return this.props.columnFilter?u["default"].createElement(P["default"],{columns:e,rowSelectType:this.props.selectRow.mode,onFilter:this.handleFilterData.bind(this)}):null}}]),t}(u["default"].Component);C.propTypes={keyField:u["default"].PropTypes.string,height:u["default"].PropTypes.string,maxHeight:u["default"].PropTypes.string,data:u["default"].PropTypes.oneOfType([u["default"].PropTypes.array,u["default"].PropTypes.object]),remote:u["default"].PropTypes.bool,striped:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,hover:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,pagination:u["default"].PropTypes.bool,searchPlaceholder:u["default"].PropTypes.string,selectRow:u["default"].PropTypes.shape({mode:u["default"].PropTypes.string,bgColor:u["default"].PropTypes.string,selected:u["default"].PropTypes.array,onSelect:u["default"].PropTypes.func,onSelectAll:u["default"].PropTypes.func,clickToSelect:u["default"].PropTypes.bool,hideSelectColumn:u["default"].PropTypes.bool,clickToSelectAndEditCell:u["default"].PropTypes.bool}),cellEdit:u["default"].PropTypes.shape({mode:u["default"].PropTypes.string,blurToSave:u["default"].PropTypes.bool,afterSaveCell:u["default"].PropTypes.func}),insertRow:u["default"].PropTypes.bool,deleteRow:u["default"].PropTypes.bool,search:u["default"].PropTypes.bool,columnFilter:u["default"].PropTypes.bool,trClassName:u["default"].PropTypes.any,options:u["default"].PropTypes.shape({sortName:u["default"].PropTypes.string,sortOrder:u["default"].PropTypes.string,afterTableComplete:u["default"].PropTypes.func,afterDeleteRow:u["default"].PropTypes.func,afterInsertRow:u["default"].PropTypes.func,afterSearch:u["default"].PropTypes.func,afterColumnFilter:u["default"].PropTypes.func,onRowClick:u["default"].PropTypes.func,page:u["default"].PropTypes.number,sizePerPageList:u["default"].PropTypes.array,sizePerPage:u["default"].PropTypes.number,paginationSize:u["default"].PropTypes.number,onSortChange:u["default"].PropTypes.func,onPageChange:u["default"].PropTypes.func,onSizePerPageList:u["default"].PropTypes.func,noDataText:u["default"].PropTypes.string,handleConfirmDeleteRow:u["default"].PropTypes.func}),fetchInfo:u["default"].PropTypes.shape({dataTotalSize:u["default"].PropTypes.number}),exportCSV:u["default"].PropTypes.bool,csvFileName:u["default"].PropTypes.string},C.defaultProps={height:"100%",maxHeight:void 0,striped:!1,bordered:!0,hover:!1,condensed:!1,pagination:!1,searchPlaceholder:void 0,selectRow:{mode:f["default"].ROW_SELECT_NONE,bgColor:f["default"].ROW_SELECT_BG_COLOR,selected:[],onSelect:void 0,onSelectAll:void 0,clickToSelect:!1,hideSelectColumn:!1,clickToSelectAndEditCell:!1},cellEdit:{mode:f["default"].CELL_EDIT_NONE,blurToSave:!1,afterSaveCell:void 0},insertRow:!1,deleteRow:!1,search:!1,multiColumnSearch:!1,columnFilter:!1,trClassName:"",options:{sortName:void 0,sortOrder:f["default"].SORT_DESC,afterTableComplete:void 0,afterDeleteRow:void 0,afterInsertRow:void 0,afterSearch:void 0,afterColumnFilter:void 0,onRowClick:void 0,page:void 0,sizePerPageList:f["default"].SIZE_PER_PAGE_LIST,sizePerPage:void 0,paginationSize:f["default"].PAGINATION_SIZE,onSizePerPageList:void 0,noDataText:void 0,handleConfirmDeleteRow:void 0},fetchInfo:{dataTotalSize:0},exportCSV:!1,csvFileName:void 0},t["default"]=C,e.exports=t["default"]},function(t,r){t.exports=e},function(e,t,r){var n,o;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(r.apply(null,n));else if("object"===o)for(var a in n)i.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=r:(n=[],o=function(){return r}.apply(t,n),!(void 0!==o&&(e.exports=o)))}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={SORT_DESC:"desc",SORT_ASC:"asc",SIZE_PER_PAGE:10,NEXT_PAGE:">",LAST_PAGE:">>",PRE_PAGE:"<",FIRST_PAGE:"<<",ROW_SELECT_BG_COLOR:"",ROW_SELECT_NONE:"none",ROW_SELECT_SINGLE:"radio",ROW_SELECT_MULTI:"checkbox",CELL_EDIT_NONE:"none",CELL_EDIT_CLICK:"click",CELL_EDIT_DBCLICK:"dbclick",SIZE_PER_PAGE_LIST:[10,25,30,50],PAGINATION_SIZE:5,NO_DATA_TEXT:"There is no data to display"},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(6),d=n(c),p=r(4),f=n(p),h=r(7),v=n(h),y=r(3),m=n(y),g=r(8),b=n(g),w=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.update(this.props.checked)}},{key:"componentWillReceiveProps",value:function(e){this.update(e.checked)}},{key:"update",value:function(e){d["default"].findDOMNode(this).indeterminate="indeterminate"===e}},{key:"render",value:function(){return u["default"].createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.props.onChange})}}]),t}(u["default"].Component),E=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.selectRowColumnWidth=null}return i(t,e),a(t,[{key:"clearSortCaret",value:function(e,t){for(var r=this.refs.header,n=0;n<r.childElementCount;n++){var o=r.childNodes[n].childNodes[0];o.getElementsByClassName("order").length>0&&o.removeChild(o.getElementsByClassName("order")[0])}this.props.onSort(e,t)}},{key:"componentDidMount",value:function(){if(this.props.sortName){this.clearSortCaret(this.props.sortOrder,this.props.sortName);for(var e=this.refs.header,t=0;t<e.childElementCount;t++){var r=e.childNodes[t].childNodes[0];if(r.getAttribute("data-field")===this.props.sortName){r.appendChild(v["default"].renderSortCaret(this.props.sortOrder));break}}}}},{key:"render",value:function(){var e=(0,m["default"])("table-header"),t=(0,m["default"])("table","table-hover",{"table-bordered":this.props.bordered,"table-condensed":this.props.condensed}),r=this.props.hideSelectColumn?null:this.renderSelectRowHeader();return this._attachClearSortCaretFunc(),u["default"].createElement("div",{ref:"container",className:e},u["default"].createElement("table",{className:t},u["default"].createElement("thead",null,u["default"].createElement("tr",{ref:"header"},r,this.props.children))))}},{key:"renderSelectRowHeader",value:function(){return this.props.rowSelectType==f["default"].ROW_SELECT_SINGLE?u["default"].createElement(b["default"],{width:this.selectRowColumnWidth}):this.props.rowSelectType==f["default"].ROW_SELECT_MULTI?u["default"].createElement(b["default"],{width:this.selectRowColumnWidth},u["default"].createElement(w,{onChange:this.props.onSelectAllRow,checked:this.props.isSelectAll})):null}},{key:"_attachClearSortCaretFunc",value:function(){if(Array.isArray(this.props.children))for(var e=0;e<this.props.children.length;e++)this.props.children[e]=u["default"].cloneElement(this.props.children[e],{key:e,clearSortCaret:this.clearSortCaret.bind(this)});else this.props.children=u["default"].cloneElement(this.props.children,{key:0,clearSortCaret:this.clearSortCaret.bind(this)})}},{key:"fitHeader",value:function(e,t){if(Array.isArray(this.props.children)){var r=this.props.rowSelectType!=f["default"].ROW_SELECT_SINGLE&&this.props.rowSelectType!=f["default"].ROW_SELECT_MULTI||this.props.hideSelectColumn?0:1;1==r&&(this.selectRowColumnWidth=e[0].width);for(var n=0;n<this.props.children.length;n++)this.props.children[n]=u["default"].cloneElement(this.props.children[n],{width:e[n+r].width+"px"})}else this.props.children=u["default"].cloneElement(this.props.children,{width:e[0].width+"px"});this.props.condensed&&(this.refs.container.style.height="36px"),this.forceUpdate(),t&&(this.refs.container.style.marginRight=v["default"].getScrollBarWidth()+"px")}}]),t}(u["default"].Component);E.propTypes={rowSelectType:u["default"].PropTypes.string,onSort:u["default"].PropTypes.func,onSelectAllRow:u["default"].PropTypes.func,sortName:u["default"].PropTypes.string,sortOrder:u["default"].PropTypes.string,hideSelectColumn:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,isSelectAll:u["default"].PropTypes.oneOf([!0,"indeterminate",!1])},E.defaultProps={},t["default"]=E,e.exports=t["default"]},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),a=r(4),s=n(a),l=r(3),u=n(l);t["default"]={renderSortCaret:function(e){var t=document.createElement("span");t.className="order",e==s["default"].SORT_ASC&&(t.className+=" dropup");var r=document.createElement("span");return r.className="caret",r.style.margin="10px 5px",t.appendChild(r),t},renderReactSortCaret:function(e){var t=(0,u["default"])("order",{dropup:e==s["default"].SORT_ASC});return i["default"].createElement("span",{className:t},i["default"].createElement("span",{className:"caret",style:{margin:"10px 5px"}}))},getScrollBarWidth:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return r==n&&(n=t.clientWidth),document.body.removeChild(t),r-n}},e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=(n(c),r(4)),p=(n(d),function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"render",value:function(){var e={width:parseInt(this.props.width)?this.props.width:35};return u["default"].createElement("th",{style:e},u["default"].createElement("div",{className:"th-inner table-header-column"},this.props.children))}}]),t}(u["default"].Component));t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=n(c),p=r(7),f=n(p),h=r(10),v=n(h),y=r(11),m=n(y),g=r(12),b=n(g),w=r(3),E=n(w),_=function(e){return e&&"function"==typeof e},P=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currEditCell:null},this.editing=!1}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.adjustBody()}},{key:"componentDidUpdate",value:function(){this.adjustBody()}},{key:"render",value:function(){var e=(0,E["default"])("table-container"),t=(0,E["default"])("table",{"table-striped":this.props.striped,"table-bordered":this.props.bordered,"table-hover":this.props.hover,"table-condensed":this.props.condensed}),r=this._isSelectRowDefined(),n=this.renderTableHeader(r),o=this.props.data.map(function(e,t){var n=this.props.columns.map(function(r,n){var o=e[r.name];if(this.editing&&r.name!==this.props.keyField&&r.editable&&null!=this.state.currEditCell&&this.state.currEditCell.rid==t&&this.state.currEditCell.cid==n){var i=r.format?function(t){return r.format(t,e).replace(/<.*?>/g,"")}:!1;return u["default"].createElement(b["default"],{completeEdit:this.handleCompleteEditCell.bind(this),editable:_(r.editable)?r.editable(o,e,t,n):r.editable,format:r.format?i:!1,key:n,blurToSave:this.props.cellEdit.blurToSave,rowIndex:t,colIndex:n},o)}var a=_(r.className)?r.className(o,e,t,n):r.className;if("undefined"!=typeof r.format){var s=r.format(o,e);return u["default"].isValidElement(s)||(s=u["default"].createElement("div",{dangerouslySetInnerHTML:{__html:s}})),u["default"].createElement(m["default"],{dataAlign:r.align,key:n,className:a,cellEdit:this.props.cellEdit,onEdit:this.handleEditCell.bind(this),width:r.width},s)}return u["default"].createElement(m["default"],{dataAlign:r.align,key:n,className:a,cellEdit:this.props.cellEdit,hidden:r.hidden,onEdit:this.handleEditCell.bind(this),width:r.width},o)},this),o=-1!=this.props.selectedRowKeys.indexOf(e[this.props.keyField]),i=r&&!this.props.selectRow.hideSelectColumn?this.renderSelectRowColumn(o):null,a=_(this.props.trClassName)?this.props.trClassName(e,t):this.props.trClassName;return u["default"].createElement(v["default"],{isSelected:o,key:t,className:a,selectRow:r?this.props.selectRow:void 0,enableCellEdit:this.props.cellEdit.mode!==d["default"].CELL_EDIT_NONE,onRowClick:this.handleRowClick.bind(this),onSelectRow:this.handleSelectRow.bind(this)},i,n)},this);0===o.length&&o.push(u["default"].createElement(v["default"],{key:"##table-empty##"},u["default"].createElement("td",{colSpan:this.props.columns.length+(r?1:0),style:{textAlign:"center"}},this.props.noDataText||d["default"].NO_DATA_TEXT))),this.editing=!1;var i=this.calculateContainerHeight().toString();return u["default"].createElement("div",{ref:"container",className:e,style:{height:i}},u["default"].createElement("table",{ref:"body",className:t},n,u["default"].createElement("tbody",null,o)))}},{key:"renderTableHeader",value:function(e){var t=null;if(e){var r={width:35,minWidth:35};t=this.props.selectRow.hideSelectColumn?null:u["default"].createElement("th",{style:r,key:-1})}var n=this.props.columns.map(function(e,t){var r=null==e.width?e.width:parseInt(e.width),n={display:e.hidden?"none":null,width:r,maxWidth:r},o=e.sort?f["default"].renderReactSortCaret(d["default"].SORT_DESC):null;return u["default"].createElement("th",{style:n,key:t,className:e.className},e.text,o)});return u["default"].createElement("thead",{ref:"header"},u["default"].createElement("tr",null,t,n))}},{key:"handleRowClick",value:function(e){var t,r;this.props.data.forEach(function(n,o){o==e-1&&(t=n[this.props.keyField],r=n)},this),this.props.onRowClick(r)}},{key:"handleSelectRow",value:function(e,t){var r,n;this.props.data.forEach(function(t,o){o==e-1&&(r=t[this.props.keyField],n=t)},this),this.props.onSelectRow(n,t)}},{key:"handleSelectRowColumChange",value:function(e){this.props.selectRow.clickToSelect&&this.props.selectRow.clickToSelectAndEditCell||this.handleSelectRow(e.currentTarget.parentElement.parentElement.rowIndex,e.currentTarget.checked)}},{key:"handleEditCell",value:function(e,t){this.editing=!0,this._isSelectRowDefined()&&(t--,this.props.selectRow.hideSelectColumn&&t++),e--;var r={currEditCell:{rid:e,cid:t}};if(this.props.selectRow.clickToSelectAndEditCell){var n=-1!=this.props.selectedRowKeys.indexOf(this.props.data[e][this.props.keyField]);this.handleSelectRow(e+1,!n)}this.setState(r)}},{key:"cancelEdit",value:function(){var e=this.state.currEditCell;e&&this.handleCompleteEditCell(null,e.rid,e.cid)}},{key:"handleCompleteEditCell",value:function(e,t,r){this.setState({currEditCell:null}),null!=e&&this.props.cellEdit.__onCompleteEdit__(e,t,r)}},{key:"renderSelectRowColumn",value:function(e){return this.props.selectRow.mode==d["default"].ROW_SELECT_SINGLE?u["default"].createElement(m["default"],null,u["default"].createElement("input",{type:"radio",name:"selection",checked:e,onChange:this.handleSelectRowColumChange.bind(this)})):u["default"].createElement(m["default"],null,u["default"].createElement("input",{type:"checkbox",checked:e,onChange:this.handleSelectRowColumChange.bind(this)}))}},{key:"getBodyHeaderDomProp",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=[],r=0;r<e.length;r++)t.push({width:e[r].offsetWidth});return t}},{key:"adjustBody",value:function(){this.hardFixHeaderWidth(),this.props.condensed&&(this.refs.body.style.marginTop="-36px"),this.props.maxHeight&&parseInt(this.props.maxHeight)<this.refs.container.offsetHeight&&(this.refs.container.style.height=this.props.maxHeight-42+"px")}},{key:"hardFixHeaderWidth",value:function(){for(var e=this.refs.header.childNodes[0].childNodes,t=0;t<e.length;t++)e[t].style.width=e[t].offsetWidth+"px"}},{key:"calculateContainerHeight",value:function(){return"100%"==this.props.height?this.props.height:parseInt(this.props.height)-42}},{key:"_isSelectRowDefined",value:function(){return this.props.selectRow.mode==d["default"].ROW_SELECT_SINGLE||this.props.selectRow.mode==d["default"].ROW_SELECT_MULTI}}]),t}(u["default"].Component);P.propTypes={height:u["default"].PropTypes.string,data:u["default"].PropTypes.array,columns:u["default"].PropTypes.array,striped:u["default"].PropTypes.bool,bordered:u["default"].PropTypes.bool,hover:u["default"].PropTypes.bool,condensed:u["default"].PropTypes.bool,keyField:u["default"].PropTypes.string,selectedRowKeys:u["default"].PropTypes.array,onRowClick:u["default"].PropTypes.func,onSelectRow:u["default"].PropTypes.func,noDataText:u["default"].PropTypes.string},t["default"]=P,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(2),c=n(u),d=r(4),p=(n(d),function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),s(t,[{key:"rowClick",value:function(e){"INPUT"!==e.target.tagName&&(this.props.selectRow&&this.props.selectRow.clickToSelect&&this.props.onSelectRow(e.currentTarget.rowIndex,!this.props.isSelected),this.props.onRowClick&&this.props.onRowClick(e.currentTarget.rowIndex))}},{key:"render",value:function(){var e={style:{backgroundColor:this.props.isSelected?this.props.selectRow.bgColor:null},className:(this.props.isSelected&&this.props.selectRow.className?this.props.selectRow.className:"")+(this.props.className||"")};return this.props.selectRow&&!this.props.enableCellEdit&&(this.props.selectRow.clickToSelect||this.props.selectRow.clickToSelectAndEditCell)||this.props.onRowClick?c["default"].createElement("tr",a({},e,{onClick:this.rowClick.bind(this)}),this.props.children):c["default"].createElement("tr",e,this.props.children)}}]),t}(c["default"].Component));p.propTypes={isSelected:c["default"].PropTypes.bool,enableCellEdit:c["default"].PropTypes.bool,onRowClick:c["default"].PropTypes.func,onSelectRow:c["default"].PropTypes.func},p.defaultProps={onRowClick:void 0},t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(2),c=n(u),d=r(4),p=n(d),f=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),s(t,[{key:"handleCellEdit",value:function(e){if(this.props.cellEdit.mode==p["default"].CELL_EDIT_DBCLICK)if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();t.removeAllRanges()}this.props.onEdit(e.currentTarget.parentElement.rowIndex,e.currentTarget.cellIndex)}},{key:"render",value:function(){var e=null==this.props.width?this.props.width:parseInt(this.props.width),t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.className;this.props.width&&(r+=" col-md-"+e);var n={};return this.props.cellEdit&&(this.props.cellEdit.mode==p["default"].CELL_EDIT_CLICK?n.onClick=this.handleCellEdit.bind(this):this.props.cellEdit.mode==p["default"].CELL_EDIT_DBCLICK&&(n.onDoubleClick=this.handleCellEdit.bind(this))),c["default"].createElement("td",a({style:t,className:r},n),this.props.children)}}]),t}(c["default"].Component);f.propTypes={dataAlign:c["default"].PropTypes.string,hidden:c["default"].PropTypes.bool,className:c["default"].PropTypes.string},f.defaultProps={dataAlign:"left",hidden:!1,className:""},t["default"]=f,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=(n(c),r(13)),p=n(d),f=r(14),h=n(f),v=r(3),y=n(v),m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.timeouteClear=0,this.state={shakeEditor:!1}}return i(t,e),a(t,[{key:"handleKeyPress",value:function(e){if(13==e.keyCode){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}else 27==e.keyCode&&this.props.completeEdit(null,this.props.rowIndex,this.props.colIndex)}},{key:"handleBlur",value:function(e){if(this.props.blurToSave){var t="checkbox"==e.currentTarget.type?this._getCheckBoxValue(e):e.currentTarget.value;if(!this.validator(t))return;this.props.completeEdit(t,this.props.rowIndex,this.props.colIndex)}}},{key:"validator",value:function(e){var t=this;if(t.props.editable.validator){var r=t.props.editable.validator(e);if(r!==!0){t.refs.notifier.notice("error",r,"Pressed ESC can cancel");var n=t.refs.inputRef;return t.clearTimeout(),t.setState({shakeEditor:!0}),t.timeouteClear=setTimeout(function(){t.setState({shakeEditor:!1})},300),n.focus(),!1}}return!0}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){0!=this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"componentDidMount",value:function(){var e=this.refs.inputRef;e.focus()}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var e=this.props.editable,t=this.props.format,r={ref:"inputRef",onKeyDown:this.handleKeyPress.bind(this),onBlur:this.handleBlur.bind(this)};e.placeholder&&(r.placeholder=e.placeholder);var n=(0,y["default"])({animated:this.state.shakeEditor,shake:this.state.shakeEditor});return u["default"].createElement("td",{ref:"td",style:{position:"relative"}},(0,p["default"])(e,r,t,n,this.props.children||""),u["default"].createElement(h["default"],{ref:"notifier"}))}},{key:"_getCheckBoxValue",value:function(e){var t="",r=e.currentTarget.value.split(":");return t=e.currentTarget.checked?r[0]:r[1]}}]),t}(u["default"].Component);m.propTypes={completeEdit:u["default"].PropTypes.func,rowIndex:u["default"].PropTypes.number,colIndex:u["default"].PropTypes.number,blurToSave:u["default"].PropTypes.bool},t["default"]=m,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(2),a=n(i),s=function(e,t,r,n,i){if(e===!0||"string"==typeof e){var s=e===!0?"text":e;return a["default"].createElement("input",o({},t,{type:s,defaultValue:i,className:(n||"")+" form-control editor edit-text"}))}if(!e){var s=e===!0?"text":e;return a["default"].createElement("input",o({},t,{type:s,defaultValue:i,disabled:"disabled",className:(n||"")+" form-control editor edit-text"}))}if(e.type){if(e.style&&(t.style=e.style),t.className=(n||"")+" form-control editor edit-"+e.type+(e.className?" "+e.className:""),"select"===e.type){var l=[],u=e.options.values;if(Array.isArray(u)){var c;l=u.map(function(e,t){return c=r?r(e):e,a["default"].createElement("option",{key:"option"+t,value:e},c)})}return a["default"].createElement("select",o({},t,{defaultValue:i}),l)}if("textarea"===e.type){e.cols&&(t.cols=e.cols),e.rows&&(t.rows=e.rows);var d=t.onKeyDown,p=null;return d&&(t.onKeyDown=function(e){13!=e.keyCode&&d(e)},p=a["default"].createElement("butto",{className:"btn btn-info btn-xs textarea-save-btn",onClick:d},"save")),a["default"].createElement("div",null,a["default"].createElement("textarea",o({},t,{defaultValue:i})),p)}if("checkbox"===e.type){var f="true:false";e.options&&e.options.values&&(f=e.options.values),t.className=t.className.replace("form-control",""),t.className+=" checkbox pull-right";var h=i&&i.toString()==f.split(":")[0]?!0:!1;return a["default"].createElement("input",o({},t,{type:"checkbox",value:f,defaultChecked:h}))}return a["default"].createElement("input",o({},t,{type:s,defaultValue:i}))}return a["default"].createElement("input",o({},t,{type:"text",className:(n||"")+" form-control editor edit-text"}))};t["default"]=s,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=(n(c),r(15)),p=n(d),f=p["default"].ToastContainer,h=u["default"].createFactory(p["default"].ToastMessage.animation),v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"notice",value:function(e,t,r){this.refs.toastr[e](t,r,{mode:"single",timeOut:5e3,extendedTimeOut:1e3,showAnimation:"animated  bounceIn",hideAnimation:"animated bounceOut"})}},{key:"render",value:function(){return u["default"].createElement(f,{ref:"toastr",toastMessageFactory:h,id:"toast-container",className:"toast-top-right"})}}]),t}(u["default"].Component);t["default"]=v,e.exports=t["default"]},function(e,t,r){"use strict";t.ToastContainer=r(16),t.ToastMessage=r(23)},function(e,t,r){"use strict";function n(){}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(2),a=r(17),s=i.createFactory(r(23));e.exports=i.createClass({displayName:"ToastContainer",error:function(e,t,r){this._notify(this.props.toastType.error,e,t,r)},info:function(e,t,r){this._notify(this.props.toastType.info,e,t,r)},success:function(e,t,r){this._notify(this.props.toastType.success,e,t,r)},warning:function(e,t,r){this._notify(this.props.toastType.warning,e,t,r)},clear:function(){var e,t=this.refs;for(e in t)t[e].hideToast(!1)},getDefaultProps:function(){return{toastType:{error:"error",info:"info",success:"success",warning:"warning"},id:"toast-container",toastMessageFactory:s,preventDuplicates:!1,newestOnTop:!0,onClick:n}},getInitialState:function(){return{toasts:[],toastId:0,previousMessage:null}},render:function(){return this._render(this.props,this.state)},_notify:function(e,t,r){var n=this,o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],i=this.props,s=this.state;if(!i.preventDuplicates||s.previousMessage!==t){var l=s.toastId++,u=l,c=a(o,{$merge:{type:e,title:r,message:t,toastId:u,key:l,ref:"toasts__"+l,handleOnClick:function(e){return"function"==typeof o.handleOnClick&&o.handleOnClick(),n._handle_toast_on_click(e)},handleRemove:this._handle_toast_remove}}),d={};d[""+(i.newestOnTop?"$unshift":"$push")]=[c];var p=a(s,{toasts:d,previousMessage:{$set:t}});this.setState(p)}},_handle_toast_on_click:function(e){this.props.onClick(e),e.defaultPrevented||(e.preventDefault(),e.stopPropagation())},_handle_toast_remove:function(e){var t=this,r=this.state;r.toasts[""+(this.props.newestOnTop?"reduceRight":"reduce")](function(n,o,i){return n||o.toastId!==e?!1:(t.setState(a(r,{toasts:{$splice:[[i,1]]}})),!0)},!1)},_render:function(e,t){return i.createElement("div",o({},e,{"aria-live":"polite",role:"alert"}),t.toasts.map(function(t){return e.toastMessageFactory(t)}))}})},function(e,t,r){e.exports=r(18)},function(e,t,r){(function(t){"use strict";function n(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?a(new e.constructor,e):e}function o(e,r,n){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected target of %s to be an array; got %s.",n,e):l(!1);var o=r[n];Array.isArray(o)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,o):l(!1)}function i(e,r){if("object"!=typeof r?"production"!==t.env.NODE_ENV?l(!1,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",y.join(", "),f):l(!1):void 0,u.call(r,f))return 1!==Object.keys(r).length?"production"!==t.env.NODE_ENV?l(!1,"Cannot have more than one key in an object with %s",f):l(!1):void 0,r[f];var s=n(e);if(u.call(r,h)){var g=r[h];g&&"object"==typeof g?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): %s expects a spec of type 'object'; got %s",h,g):l(!1),s&&"object"==typeof s?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): %s expects a target of type 'object'; got %s",h,s):l(!1),
a(s,r[h])}u.call(r,c)&&(o(e,r,c),r[c].forEach(function(e){s.push(e)})),u.call(r,d)&&(o(e,r,d),r[d].forEach(function(e){s.unshift(e)})),u.call(r,p)&&(Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"Expected %s target to be an array; got %s",p,e):l(!1),Array.isArray(r[p])?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,r[p]):l(!1),r[p].forEach(function(e){Array.isArray(e)?void 0:"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",p,r[p]):l(!1),s.splice.apply(s,e)})),u.call(r,v)&&("function"!=typeof r[v]?"production"!==t.env.NODE_ENV?l(!1,"update(): expected spec of %s to be a function; got %s.",v,r[v]):l(!1):void 0,s=r[v](s));for(var b in r)m.hasOwnProperty(b)&&m[b]||(s[b]=i(e[b],r[b]));return s}var a=r(20),s=r(21),l=r(22),u={}.hasOwnProperty,c=s({$push:null}),d=s({$unshift:null}),p=s({$splice:null}),f=s({$set:null}),h=s({$merge:null}),v=s({$apply:null}),y=[c,d,p,f,h,v],m={};y.forEach(function(e){m[e]=!0}),e.exports=i}).call(t,r(19))},function(e,t){function r(){u=!1,a.length?l=a.concat(l):c=-1,l.length&&n()}function n(){if(!u){var e=setTimeout(r);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var a,s=e.exports={},l=[],u=!1,c=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new o(e,t)),1!==l.length||u||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var r=Object(e),n=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i){var a=Object(i);for(var s in a)n.call(a,s)&&(r[s]=a[s])}}return r}e.exports=r},function(e,t){"use strict";var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=r},function(e,t,r){(function(t){"use strict";function r(e,r,n,o,i,a,s,l){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,a,s,l],d=0;u=new Error(r.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r}).call(t,r(19))},function(e,t,r){"use strict";function n(){}var o=r(2),i=r(17),a=r(3),s={displayName:"ToastMessage",getDefaultProps:function(){var e={error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"};return{className:"toast",iconClassNames:e,titleClassName:"toast-title",messageClassName:"toast-message",tapToDismiss:!0,closeButton:!1}},handleOnClick:function(e){var t=this.props;t.handleOnClick(e),t.tapToDismiss&&this.hideToast(!0)},_handle_close_button_click:function(e){e.stopPropagation(),this.hideToast(!0)},_handle_remove:function(){var e=this.props;e.handleRemove(e.toastId)},_render_close_button:function(e){return e.closeButton?o.createElement("button",{className:"toast-close-button",role:"button",onClick:this._handle_close_button_click,dangerouslySetInnerHTML:{__html:"&times;"}}):!1},_render_title_element:function(e){return e.title?o.createElement("div",{className:e.titleClassName},e.title):!1},_render_message_element:function(e){return e.message?o.createElement("div",{className:e.messageClassName},e.message):!1},render:function(){var e=this.props,t=e.iconClassName||e.iconClassNames[e.type],r={};return r[e.className]=!0,r[t]=!0,o.createElement("div",{className:a(r),style:e.style||{},onClick:this.handleOnClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this._render_close_button(e),this._render_title_element(e),this._render_message_element(e))}},l=o.createClass(i(s,{displayName:{$set:"ToastMessage.animation"},mixins:{$set:[r(24)]}})),u=o.createClass(i(s,{displayName:{$set:"ToastMessage.jQuery"},mixins:{$set:[r(29)]}}));s.handleMouseEnter=n,s.handleMouseLeave=n,s.hideToast=n;var c=e.exports=o.createClass(s);c.animation=l,c.jQuery=u},function(e,t,r){"use strict";var n=r(25),o=r(27),i=r(6),a=17,s=Object.prototype.toString;e.exports={getDefaultProps:function(){return{transition:null,showAnimation:"animated bounceIn",hideAnimation:"animated bounceOut",timeOut:5e3,extendedTimeOut:1e3}},componentWillMount:function(){this.classNameQueue=[],this.isHiding=!1,this.intervalId=null},componentDidMount:function(){var e=this,t=this.props;this._show(t);var r=function a(){e.isHiding&&(e._set_is_hiding(!1),o.removeEndEventListener(n,a),e._handle_remove())},n=i.findDOMNode(this);o.addEndEventListener(n,r),0<t.timeOut&&this._set_interval_id(setTimeout(this.hideToast,t.timeOut))},componentWillUnmount:function(){this.intervalId&&clearTimeout(this.intervalId)},_set_transition:function(e){var t=e?"leave":"enter",r=i.findDOMNode(this),a=this.props.transition+"-"+t,s=a+"-active",l=function u(e){e&&e.target!==r||(n.removeClass(r,a),n.removeClass(r,s),o.removeEndEventListener(r,u))};o.addEndEventListener(r,l),n.addClass(r,a),this._queue_class(s)},_clear_transition:function(e){var t=i.findDOMNode(this),r=e?"leave":"enter",o=this.props.transition+"-"+r,a=o+"-active";n.removeClass(t,o),n.removeClass(t,a)},_set_animation:function(e){var t=i.findDOMNode(this),r=this._get_animation_classes(e),a=function s(e){e&&e.target!==t||(r.forEach(function(e){n.removeClass(t,e)}),o.removeEndEventListener(t,s))};o.addEndEventListener(t,a),r.forEach(function(e){n.addClass(t,e)})},_get_animation_classes:function(e){var t=this.props,r=e?t.hideAnimation:t.showAnimation;return"[object Array]"===s.call(r)?r:"string"==typeof r?r.split(" "):void 0},_clear_animation:function(e){var t=this,r=this._get_animation_classes(e);r.forEach(function(e){n.removeClass(i.findDOMNode(t),e)})},_queue_class:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this._flush_class_name_queue,a))},_flush_class_name_queue:function(){this.isMounted()&&this.classNameQueue.forEach(n.addClass.bind(n,i.findDOMNode(this))),this.classNameQueue.length=0,this.timeout=null},_show:function(){var e=this.props;e.transition?this._set_transition():e.showAnimation&&this._set_animation()},handleMouseEnter:function(){if(clearTimeout(this.intervalId),this._set_interval_id(null),this.isHiding){this._set_is_hiding(!1);var e=this.props;e.hideAnimation?this._clear_animation(!0):e.transition&&this._clear_transition(!0)}},handleMouseLeave:function(){var e=this.props;!this.isHiding&&(0<e.timeOut||0<e.extendedTimeOut)&&this._set_interval_id(setTimeout(this.hideToast,e.extendedTimeOut))},hideToast:function(e){var t=this.props;this.isHiding||null==this.intervalId&&!e||(this._set_is_hiding(!0),t.transition?this._set_transition(!0):t.hideAnimation?this._set_animation(!0):this._handle_remove())},_set_interval_id:function(e){this.intervalId=e},_set_is_hiding:function(e){this.isHiding=e}}},function(e,t,r){(function(t){"use strict";var n=r(26),o={addClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',r):n(!1):void 0,r&&(e.classList?e.classList.add(r):o.hasClass(e,r)||(e.className=e.className+" "+r)),e},removeClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',r):n(!1):void 0,r&&(e.classList?e.classList.remove(r):o.hasClass(e,r)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,r){return(r?o.addClass:o.removeClass)(e,t)},hasClass:function(e,r){return/\s/.test(r)?"production"!==t.env.NODE_ENV?n(!1,"CSS.hasClass takes only a single class name."):n(!1):void 0,e.classList?!!r&&e.classList.contains(r):(" "+e.className+" ").indexOf(" "+r+" ")>-1}};e.exports=o}).call(t,r(19))},function(e,t,r){(function(t){"use strict";function r(e,r,n,o,i,a,s,l){if("production"!==t.env.NODE_ENV&&void 0===r)throw new Error("invariant requires an error message argument");if(!e){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,a,s,l],d=0;u=new Error(r.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r}).call(t,r(19))},function(e,t,r){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition;for(var r in s){var n=s[r];for(var o in n)if(o in t){l.push(n[o]);break}}}function o(e,t,r){e.addEventListener(t,r,!1)}function i(e,t,r){e.removeEventListener(t,r,!1)}var a=r(28),s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},l=[];a.canUseDOM&&n();var u={addEndEventListener:function(e,t){return 0===l.length?void window.setTimeout(t,0):void l.forEach(function(r){o(e,r,t)})},removeEndEventListener:function(e,t){0!==l.length&&l.forEach(function(r){i(e,r,t)})}};e.exports=u},function(e,t){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e[t.showMethod]({duration:t.showDuration,easing:t.showEasing})}var i=r(6),a=n(i);e.exports={getDefaultProps:function(){return{style:{display:"none"},showMethod:"fadeIn",showDuration:300,showEasing:"swing",hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",timeOut:5e3,extendedTimeOut:1e3}},getInitialState:function(){return{intervalId:null,isHiding:!1}},componentDidMount:function(){var e=this.props;o(this._get_$_node(),e),0<e.timeOut&&this._set_interval_id(setTimeout(this.hideToast,e.timeOut))},handleMouseEnter:function(){clearTimeout(this.state.intervalId),this._set_interval_id(null),this._set_is_hiding(!1),o(this._get_$_node().stop(!0,!0),this.props)},handleMouseLeave:function(){var e=this.props;!this.state.isHiding&&(0<e.timeOut||0<e.extendedTimeOut)&&this._set_interval_id(setTimeout(this.hideToast,e.extendedTimeOut))},hideToast:function(e){var t=this.state,r=this.props;t.isHiding||null==t.intervalId&&!e||(this.setState({isHiding:!0}),this._get_$_node()[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:this._handle_remove}))},_get_$_node:function(){return jQuery(a["default"].findDOMNode(this))},_set_interval_id:function(e){this.setState({intervalId:e})},_set_is_hiding:function(e){this.setState({isHiding:e})}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(31),d=n(c),p=r(4),f=n(p),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currPage,sizePerPage:this.props.sizePerPage}}return i(t,e),a(t,[{key:"changePage",value:function(e){e=e==f["default"].PRE_PAGE?this.state.currentPage-1<1?1:this.state.currentPage-1:e==f["default"].NEXT_PAGE?this.state.currentPage+1>this.totalPages?this.totalPages:this.state.currentPage+1:e==f["default"].LAST_PAGE?this.totalPages:e==f["default"].FIRST_PAGE?1:parseInt(e),e!=this.state.currentPage&&(this.setState({currentPage:e}),this.props.changePage(e,this.state.sizePerPage))}},{key:"componentWillReceiveProps",value:function(e){this.props.remote&&(e.currPage||e.sizePerPage)&&this.setState({currentPage:e.currPage,sizePerPage:e.sizePerPage})}},{key:"changeSizePerPage",value:function(e){e.preventDefault();var t=parseInt(e.currentTarget.text);t!=this.state.sizePerPage&&(this.totalPages=Math.ceil(this.props.dataSize/t),this.state.currentPage>this.totalPages&&(this.state.currentPage=this.totalPages),this.setState({sizePerPage:t,currentPage:this.state.currentPage}),this.props.changePage(this.state.currentPage,t),this.props.onSizePerPageList&&this.props.onSizePerPageList(t))}},{key:"render",value:function(){var e=this;this.totalPages=Math.ceil(this.props.dataSize/this.state.sizePerPage);var t=this.makePage(),r={"float":"right",marginTop:"0px"},n=this.props.sizePerPageList.map(function(t){return u["default"].createElement("li",{key:t,role:"presentation"},u["default"].createElement("a",{role:"menuitem",tabIndex:"-1",href:"#",onClick:e.changeSizePerPage.bind(e)},t))});return u["default"].createElement("div",{className:"row",style:{marginTop:15}},u["default"].createElement("div",{className:"col-md-6"},this.props.sizePerPageList.length>1?u["default"].createElement("div",{className:"dropdown"},u["default"].createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:"pageDropDown","data-toggle":"dropdown","aria-expanded":"true"},this.state.sizePerPage,u["default"].createElement("span",null," ",u["default"].createElement("span",{className:"caret"}))),u["default"].createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"pageDropDown"},n)):""),u["default"].createElement("div",{className:"col-md-6"},u["default"].createElement("ul",{className:"pagination",style:r},t)))}},{key:"makePage",value:function(){var e=this.getPages();return e.map(function(e){var t=e===this.state.currentPage,r=!1;return 1!=this.state.currentPage||e!==f["default"].FIRST_PAGE&&e!==f["default"].PRE_PAGE||(r=!0),this.state.currentPage!=this.totalPages||e!==f["default"].NEXT_PAGE&&e!==f["default"].LAST_PAGE||(r=!0),u["default"].createElement(d["default"],{changePage:this.changePage.bind(this),active:t,disable:r,key:e},e)},this)}},{key:"getPages",value:function(){var e=1,t=this.totalPages;e=Math.max(this.state.currentPage-Math.floor(this.props.paginationSize/2),1),t=e+this.props.paginationSize-1,t>this.totalPages&&(t=this.totalPages,e=t-this.props.paginationSize+1);for(var r=[f["default"].FIRST_PAGE,f["default"].PRE_PAGE],n=e;t>=n;n++)n>0&&r.push(n);return r.push(f["default"].NEXT_PAGE),r.push(f["default"].LAST_PAGE),r}},{key:"getCurrentPage",value:function(){return this.state.currentPage}},{key:"getSizePerPage",value:function(){return this.state.sizePerPage}}]),t}(u["default"].Component);h.propTypes={currPage:u["default"].PropTypes.number,sizePerPage:u["default"].PropTypes.number,dataSize:u["default"].PropTypes.number,changePage:u["default"].PropTypes.func,sizePerPageList:u["default"].PropTypes.array,paginationSize:u["default"].PropTypes.number,remote:u["default"].PropTypes.bool,onSizePerPageList:u["default"].PropTypes.func},h.defaultProps={sizePerPage:f["default"].SIZE_PER_PAGE},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),a(t,[{key:"pageBtnClick",value:function(e){e.preventDefault(),this.props.changePage(e.currentTarget.text)}},{key:"render",value:function(){var e=(0,d["default"])({active:this.props.active,disabled:this.props.disable});return u["default"].createElement("li",{className:e},u["default"].createElement("a",{href:"#",onClick:this.pageBtnClick.bind(this)},this.props.children))}}]),t}(u["default"].Component);p.propTypes={changePage:u["default"].PropTypes.func,active:u["default"].PropTypes.bool,disable:u["default"].PropTypes.bool},t["default"]=p,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=n(c),p=r(4),f=(n(p),r(13)),h=n(f),v=r(14),y=n(v),m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.timeouteClear=0,this.state={isInsertRowTrigger:!0,validateState:null,shakeEditor:!1}}return i(t,e),a(t,[{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.timeouteClear&&(clearTimeout(this.timeouteClear),this.timeouteClear=0)})},{key:"checkAndParseForm",value:function(){var e,t,r=this,n={},o=!0,i={};return this.props.columns.forEach(function(r,a){if(r.autoValue)e="function"==typeof r.autoValue?r.autoValue():"autovalue-"+(new Date).getTime();else{var s=this.refs[r.field+a];if(e=s.value,r.editable&&"checkbox"==r.editable.type){var l=s.value.split(":");e=s.checked?l[0]:l[1]}r.editable&&r.editable.validator&&(t=r.editable.validator(e),t!==!0&&(o=!1,i[r.field]=t))}n[r.field]=e},this),o?n:(r.clearTimeout(),this.setState({validateState:i,shakeEditor:!0}),r.refs.notifier.notice("error","Form validate errors, please checking!","Pressed ESC can cancel"),r.timeouteClear=setTimeout(function(){r.setState({shakeEditor:!1})},300),null)}},{key:"handleSaveBtnClick",value:function(e){var t=this.checkAndParseForm();if(t){var r=this.props.onAddRow(t);if(r){var n=this;n.refs.notifier.notice("error",r,"Pressed ESC can cancel"),n.clearTimeout(),n.setState({shakeEditor:!0,validateState:"this is hack for prevent bootstrap modal hide"}),n.timeouteClear=setTimeout(function(){n.setState({shakeEditor:!1})},300)}else this.setState({validateState:null,shakeEditor:!1}),this.refs.form.reset()}}},{key:"handleDropRowBtnClick",value:function(e){this.props.onDropRow()}},{key:"handleCloseBtn",value:function(e){this.refs.warning.style.display="none"}},{key:"handleKeyUp",value:function(e){this.props.onSearch(e.currentTarget.value)}},{key:"handleExportCSV",value:function(){this.props.onExportCSV()}},{key:"render",value:function(){var e="bs-table-modal-sm"+(new Date).getTime(),t=this.props.enableInsert?u["default"].createElement("button",{type:"button",onClick:this.props.onAddRowBegin,className:"btn btn-info","data-toggle":"modal","data-target":"."+e},u["default"].createElement("i",{className:"glyphicon glyphicon-plus"})," New"):null,r=this.props.enableDelete?u["default"].createElement("button",{type:"button",className:"btn btn-warning","data-toggle":"tooltip","data-placement":"right",title:"Drop selected row",onClick:this.handleDropRowBtnClick.bind(this)},u["default"].createElement("i",{className:"glyphicon glyphicon-trash"})," Delete"):null,n=this.props.enableSearch?u["default"].createElement("div",{className:"form-group form-group-sm"},u["default"].createElement("input",{className:"form-control",type:"text",placeholder:this.props.searchPlaceholder?this.props.searchPlaceholder:"Search",onKeyUp:this.handleKeyUp.bind(this)})):null,o=this.props.enableInsert?this.renderInsertRowModal(e):null,i=this.props.enableExportCSV?u["default"].createElement("button",{type:"button",className:"btn btn-success",onClick:this.handleExportCSV.bind(this)},u["default"].createElement("i",{className:"glyphicon glyphicon-export"})," Export to CSV"):null;return u["default"].createElement("div",{className:"row"},u["default"].createElement("div",{className:"col-xs-9"},u["default"].createElement("div",{className:"btn-group btn-group-sm",role:"group"},i,t,r)),u["default"].createElement("div",{className:"col-xs-3"},n),u["default"].createElement(y["default"],{ref:"notifier"}),o)}},{key:"renderInsertRowModal",value:function(e){var t=this.state.validateState||{},r=this.props.columns.map(function(e,r){var n=e.editable,o=e.format,i={ref:e.field+r,placeholder:n.placeholder?n.placeholder:e.name};if(e.autoValue)return null;var a=t[e.field]?u["default"].createElement("span",{className:"help-block bg-danger"},t[e.field]):null;return u["default"].createElement("div",{className:"form-group",key:e.field},u["default"].createElement("label",null,e.name),(0,h["default"])(n,i,o,""),a)}),n=(0,d["default"])("modal","fade",e,{"in":this.state.shakeEditor||this.state.validateState}),o=(0,d["default"])("modal-dialog","modal-sm",{animated:this.state.shakeEditor,shake:this.state.shakeEditor});return u["default"].createElement("div",{ref:"modal",className:n,tabIndex:"-1",role:"dialog"},u["default"].createElement("div",{className:o},u["default"].createElement("div",{className:"modal-content"},u["default"].createElement("div",{className:"modal-header"},u["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},u["default"].createElement("span",{"aria-hidden":"true"},"×")),u["default"].createElement("h4",{className:"modal-title"},"New Record")),u["default"].createElement("div",{className:"modal-body"},u["default"].createElement("form",{ref:"form"},r)),u["default"].createElement("div",{className:"modal-footer"},u["default"].createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),u["default"].createElement("button",{type:"button",className:"btn btn-info",onClick:this.handleSaveBtnClick.bind(this)},"Save")))))}}]),t}(u["default"].Component);m.propTypes={onAddRow:u["default"].PropTypes.func,onDropRow:u["default"].PropTypes.func,enableInsert:u["default"].PropTypes.bool,enableDelete:u["default"].PropTypes.bool,enableSearch:u["default"].PropTypes.bool,columns:u["default"].PropTypes.array,searchPlaceholder:u["default"].PropTypes.string},m.defaultProps={enableInsert:!1,enableDelete:!1,enableSearch:!1},t["default"]=m,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(4),d=n(c),p=r(3),f=n(p),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.filterObj={}}return i(t,e),a(t,[{key:"handleKeyUp",value:function(e){""===e.currentTarget.value.trim()?delete this.filterObj[e.currentTarget.name]:this.filterObj[e.currentTarget.name]=e.currentTarget.value,this.props.onFilter(this.filterObj)}},{key:"render",value:function(){var e=(0,f["default"])("table",{"table-striped":this.props.striped,"table-condensed":this.props.condensed}),t=null;if(this.props.rowSelectType==d["default"].ROW_SELECT_SINGLE||this.props.rowSelectType==d["default"].ROW_SELECT_MULTI){var r={width:35,paddingLeft:0,paddingRight:0};t=u["default"].createElement("th",{style:r,key:-1},"Filter")}var n=this.props.columns.map(function(e){var t={display:e.hidden?"none":null,width:e.width};return u["default"].createElement("th",{key:e.name,style:t},u["default"].createElement("div",{className:"th-inner table-header-column"},u["default"].createElement("input",{size:"10",type:"text",placeholder:e.name,name:e.name,onKeyUp:this.handleKeyUp.bind(this)})))},this);return u["default"].createElement("table",{className:e,style:{marginTop:5}},u["default"].createElement("thead",null,u["default"].createElement("tr",{style:{borderBottomStyle:"hidden"}},t,n)))}}]),t}(u["default"].Component);h.propTypes={columns:u["default"].PropTypes.array,rowSelectType:u["default"].PropTypes.string,onFilter:u["default"].PropTypes.func},t["default"]=h,e.exports=t["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,n){return r=r.toLowerCase(),e.sort(function(e,o){return n?n(e,o,r):r==c["default"].SORT_DESC?e[t]>o[t]?-1:e[t]<o[t]?1:0:e[t]<o[t]?-1:e[t]>o[t]?1:0}),e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},u=r(4),c=n(u),d=r(35).EventEmitter,p=function(e){function t(e){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.data=e}return i(t,e),s(t,[{key:"setData",value:function(e){this.emit("change",e)}},{key:"clear",value:function(){this.data=null}},{key:"getData",value:function(){return this.data}}]),t}(d);t.TableDataSet=p;var f=function(){function e(t){o(this,e),this.data=t,this.customSortFuncMap=null,this.filteredData=null,this.isOnFilter=!1,this.filterObj=null,this.searchText=null,this.sortObj=null,this.pageObj={},this.selected=[],this.multiColumnSearch=!1,this.remote=!1}return s(e,[{key:"setProps",value:function(e){this.keyField=e.keyField,this.enablePagination=e.isPagination,this.customSortFuncMap=e.customSortFuncMap,this.remote=e.remote,this.multiColumnSearch=e.multiColumnSearch}},{key:"setData",value:function(e){this.data=e,this.isOnFilter&&(null!==this.filterObj&&this.filter(this.filterObj),null!==this.searchText&&this.search(this.searchText)),this.sortObj&&this.sort(this.sortObj.order,this.sortObj.sortField)}},{key:"setSelectedRowKey",value:function(e){this.selected=e}},{key:"getSelectedRowKeys",value:function(){return this.selected}},{key:"getCurrentDisplayData",value:function(){return this.isOnFilter?this.filteredData:this.data}},{key:"sort",value:function(e,t){this.sortObj={order:e,sortField:t};var r=this.getCurrentDisplayData(),n=this.customSortFuncMap[t];return r=a(r,t,e,n),this}},{key:"page",value:function(e,t){return this.pageObj.end=e*t-1,this.pageObj.start=this.pageObj.end-(t-1),this}},{key:"edit",value:function(e,t,r){var n=this.getCurrentDisplayData(),o=void 0;return this.enablePagination?(n[this.pageObj.start+t][r]=e,o=n[this.pageObj.start+t][this.keyField]):(n[t][r]=e,o=n[t][this.keyField]),this.isOnFilter&&this.data.forEach(function(t){t[this.keyField]===o&&(t[r]=e)},this),this}},{key:"add",value:function(e){if(!e[this.keyField]||""===e[this.keyField].toString())throw this.keyField+" can't be empty value.";var t=this.getCurrentDisplayData();t.forEach(function(t){if(t[this.keyField].toString()===e[this.keyField].toString())throw this.keyField+" "+e[this.keyField]+" already exists"},this),t.push(e),this.isOnFilter&&this.data.push(e)}},{key:"remove",value:function(e){var t=this.getCurrentDisplayData(),r=t.filter(function(t){return-1==e.indexOf(t[this.keyField])},this);this.isOnFilter?(this.data=this.data.filter(function(t){return-1==e.indexOf(t[this.keyField])},this),this.filteredData=r):this.data=r}},{key:"filter",value:function(e){0==Object.keys(e).length?(this.filteredData=null,this.isOnFilter=!1,this.filterObj=null):(this.filterObj=e,this.filteredData=this.data.filter(function(t){var r=!0;for(var n in e)if(-1==t[n].toString().toLowerCase().indexOf(e[n].toLowerCase())){r=!1;break}return r}),this.isOnFilter=!0);
}},{key:"search",value:function(e){if(""===e.trim())this.filteredData=null,this.isOnFilter=!1,this.searchText=null;else{this.searchText=e;var t=[];this.filteredData=this.data.filter(function(r){var n=!1;this.multiColumnSearch?t=e.split(" "):t.push(e);for(var o in r)if(r[o]&&(t.forEach(function(e){-1!==r[o].toString().toLowerCase().indexOf(e.toLowerCase())&&(n=!0)}),n))break;return n},this),this.isOnFilter=!0}}},{key:"getDataIgnoringPagination",value:function(){var e=this.getCurrentDisplayData();return e}},{key:"get",value:function(){var e=this.getCurrentDisplayData();if(0==e.length)return e;if(this.remote||!this.enablePagination)return e;for(var t=[],r=this.pageObj.start;r<=this.pageObj.end&&(t.push(e[r]),r+1!=e.length);r++);return t}},{key:"getKeyField",value:function(){return this.keyField}},{key:"getDataNum",value:function(){return this.getCurrentDisplayData().length}},{key:"isChangedPage",value:function(){return this.pageObj.start&&this.pageObj.end?!0:!1}},{key:"getAllRowkey",value:function(){return this.data.map(function(e){return e[this.keyField]},this)}}]),e}();t.TableDataStore=f},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),o=u.length,l=0;o>l;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function n(e,t){var r="";return 0===e.length?r:(r+=t.join(",")+"\n",e.map(function(e){t.map(function(t){var n=e[t]?'"'+e[t]+'"':"";r+=n+","}),r+="\n"}),r)}if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof window)var o=r(37),i=o.saveAs;var a=function(e,t,r){var o=n(e,t);"undefined"!=typeof window&&i(new Blob([o],{type:"text/plain;charset=utf-8"}),r||"spreadsheet.csv")};t["default"]=a,e.exports=t["default"]},function(e,t,r){var n,o,i=i||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=e.webkitRequestFileSystem,l=e.requestFileSystem||s||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",d=0,p=500,f=function(t){var n=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};e.chrome?n():setTimeout(n,p)},h=function(e,t,r){t=[].concat(t);for(var n=t.length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,r||e)}catch(i){u(i)}}},v=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},y=function(t,u,p){p||(t=v(t));var y,m,g,b=this,w=t.type,E=!1,_=function(){h(b,"writestart progress write writeend".split(" "))},P=function(){if(m&&a&&"undefined"!=typeof FileReader){var n=new FileReader;return n.onloadend=function(){var e=n.result;m.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),b.readyState=b.DONE,_()},n.readAsDataURL(t),void(b.readyState=b.INIT)}if((E||!y)&&(y=r().createObjectURL(t)),m)m.location.href=y;else{var o=e.open(y,"_blank");void 0==o&&a&&(e.location.href=y)}b.readyState=b.DONE,_(),f(y)},T=function(e){return function(){return b.readyState!==b.DONE?e.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return b.readyState=b.INIT,u||(u="download"),o?(y=r().createObjectURL(t),n.href=y,n.download=u,void setTimeout(function(){i(n),_(),f(y),b.readyState=b.DONE})):(e.chrome&&w&&w!==c&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,c),E=!0),s&&"download"!==u&&(u+=".download"),(w===c||s)&&(m=e),l?(d+=t.size,void l(e.TEMPORARY,d,T(function(e){e.root.getDirectory("saved",S,T(function(e){var r=function(){e.getFile(u,S,T(function(e){e.createWriter(T(function(r){r.onwriteend=function(t){m.location.href=e.toURL(),b.readyState=b.DONE,h(b,"writeend",t),f(e)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&P()},"writestart progress write abort".split(" ").forEach(function(e){r["on"+e]=b["on"+e]}),r.write(t),b.abort=function(){r.abort(),b.readyState=b.DONE},b.readyState=b.WRITING}),P)}),P)};e.getFile(u,{create:!1},T(function(e){e.remove(),r()}),T(function(e){e.code===e.NOT_FOUND_ERR?r():P()}))}),P)}),P)):void P())},m=y.prototype,g=function(e,t,r){return new y(e,t,r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return r||(e=v(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(m.abort=function(){var e=this;e.readyState=e.DONE,h(e,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof e&&e.exports?e.exports.saveAs=i:null!==r(38)&&null!=r(39)&&(n=[],o=function(){return i}.apply(t,n),!(void 0!==o&&(e.exports=o)))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,a=r;n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,r=a,n=!0,s=u=void 0}},l=r(2),u=n(l),c=r(3),d=(n(c),r(4)),p=n(d),f=r(7),h=n(f),v=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"handleColumnClick",value:function(e){if(this.props.dataSort){var t=this.refs.innerDiv;this.order=this.order==p["default"].SORT_DESC?p["default"].SORT_ASC:p["default"].SORT_DESC,this.props.clearSortCaret(this.order,this.props.dataField),t.appendChild(h["default"].renderSortCaret(this.order))}}},{key:"componentDidMount",value:function(){this.refs.innerDiv.setAttribute("data-field",this.props.dataField)}},{key:"render",value:function(){var e=null!==this.props.width?parseInt(this.props.width):null,t={textAlign:this.props.dataAlign,display:this.props.hidden?"none":null,width:e,maxWidth:e},r=this.props.className+" "+(this.props.dataSort?"sort-column":"");return u["default"].createElement("th",{className:r,style:t},u["default"].createElement("div",{ref:"innerDiv",className:"th-inner table-header-column",onClick:this.handleColumnClick.bind(this)},this.props.children))}}]),t}(u["default"].Component);v.propTypes={dataField:u["default"].PropTypes.string,dataAlign:u["default"].PropTypes.string,dataSort:u["default"].PropTypes.bool,clearSortCaret:u["default"].PropTypes.func,dataFormat:u["default"].PropTypes.func,isKey:u["default"].PropTypes.bool,editable:u["default"].PropTypes.any,hidden:u["default"].PropTypes.bool,className:u["default"].PropTypes.string,width:u["default"].PropTypes.string,sortFunc:u["default"].PropTypes.func,columnClassName:u["default"].PropTypes.any},v.defaultProps={dataAlign:"left",dataSort:!1,dataFormat:void 0,isKey:!1,editable:!0,clearSortCaret:void 0,hidden:!1,className:"",width:null,sortFunc:void 0,columnClassName:""},t["default"]=v,e.exports=t["default"]}])});
},{"react":"react","react-dom":"react-dom"}],2:[function(require,module,exports){
'use strict';

var React = require('react');
var moment = require('moment');
var assign = require('object-assign');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var toMoment = require('./toMoment');
var onEnter = require('./onEnter');
var assign = require('object-assign');

var TODAY;

function emptyFn() {}

var DecadeView = React.createClass({

    displayName: 'DecadeView',

    getDefaultProps: function getDefaultProps() {
        return asConfig();
    },

    /**
     * Returns all the years in the decade of the given value
     *
     * @param  {Moment/Date/Number} value
     * @return {Moment[]}
     */
    getYearsInDecade: function getYearsInDecade(value) {
        var year = moment(value).get('year');
        var offset = year % 10;

        year = year - offset - 1;

        var result = [];
        var i = 0;

        var start = moment(year, 'YYYY').startOf('year');

        for (; i < 12; i++) {
            result.push(moment(start));
            start.add(1, 'year');
        }

        return result;
    },

    render: function render() {

        TODAY = +moment().startOf('day');

        var props = assign({}, this.props);

        var viewMoment = props.viewMoment = moment(this.props.viewDate);

        if (props.date) {
            props.moment = moment(props.date).startOf('year');
        }

        var yearsInView = this.getYearsInDecade(viewMoment);

        return React.createElement(
            'div',
            { className: 'dp-table dp-decade-view' },
            this.renderYears(props, yearsInView)
        );
    },

    /**
     * Render the given array of days
     * @param  {Moment[]} days
     * @return {React.DOM}
     */
    renderYears: function renderYears(props, days) {
        var nodes = days.map(function (date, index, arr) {
            return this.renderYear(props, date, index, arr);
        }, this);
        var len = days.length;
        var buckets = [];
        var bucketsLen = Math.ceil(len / 4);

        var i = 0;

        for (; i < bucketsLen; i++) {
            buckets.push(nodes.slice(i * 4, (i + 1) * 4));
        }

        return buckets.map(function (bucket, i) {
            return React.createElement(
                'div',
                { key: "row" + i, className: 'dp-row' },
                bucket
            );
        });
    },

    renderYear: function renderYear(props, date, index, arr) {
        var yearText = FORMAT.year(date, props.yearFormat);
        var classes = ["dp-cell dp-year"];

        var dateTimestamp = +date;

        if (dateTimestamp == props.moment) {
            classes.push('dp-value');
        }

        if (!index) {
            classes.push('dp-prev');
        }

        if (index == arr.length - 1) {
            classes.push('dp-next');
        }

        var onClick = this.handleClick.bind(this, props, date);

        return React.createElement(
            'div',
            {
                role: 'link',
                tabIndex: '1',
                key: yearText,
                className: classes.join(' '),
                onClick: onClick,
                onKeyUp: onEnter(onClick)
            },
            yearText
        );
    },

    handleClick: function handleClick(props, date, event) {
        event.target.value = date;(props.onSelect || emptyFn)(date, event);
    }
});

DecadeView.getHeaderText = function (value, props) {
    var year = moment(value).get('year');
    var offset = year % 10;

    year = year - offset - 1;

    return year + ' - ' + (year + 11);
};

module.exports = DecadeView;
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],3:[function(require,module,exports){
'use strict';

var React = require('react');
var P = React.PropTypes;
var onEnter = require('./onEnter');

module.exports = React.createClass({

  displayName: 'DatePickerHeader',

  propTypes: {
    onChange: P.func,
    onPrev: P.func,
    onNext: P.func,
    colspan: P.number,
    children: P.node
  },

  render: function render() {

    var props = this.props;

    return React.createElement(
      'div',
      { className: 'dp-header' },
      React.createElement(
        'div',
        { className: 'dp-nav-table' },
        React.createElement(
          'div',
          { className: 'dp-row' },
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-prev-nav dp-nav-cell dp-cell',
              onClick: props.onPrev,
              onKeyUp: onEnter(props.onPrev)
            },
            props.prevText
          ),
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-nav-view dp-cell',
              colSpan: props.colspan,
              onClick: props.onChange,
              onKeyUp: onEnter(props.onChange)
            },
            props.children
          ),
          React.createElement(
            'div',
            {
              tabIndex: '1',
              role: 'link',
              className: 'dp-next-nav dp-nav-cell dp-cell',
              onClick: props.onNext,
              onKeyUp: onEnter(props.onNext)
            },
            props.nextText
          )
        )
      )
    );
  }

});
},{"./onEnter":8,"react":"react"}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var React = require('react');
var moment = require('moment');
var assign = require('object-assign');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var onEnter = require('./onEnter');
var toMoment = require('./toMoment');

var TODAY;

function emptyFn() {}

var MonthView = React.createClass({

  displayName: 'MonthView',

  /**
   * Formats the given date in the specified format.
   * @method format
   *
   * @param  {Date/String/Moment} value
   * @param  {String} [format] If none specified, #dateFormat will be used
   *
   * @return {String}
   */

  formatAsDay: function formatAsDay(moment, dayDisplayFormat) {
    return moment.format(dayDisplayFormat || 'D');
  },

  getDefaultProps: function getDefaultProps() {
    return asConfig();
  },

  getWeekStartMoment: function getWeekStartMoment(value) {
    var weekStartDay = this.weekStartDay;
    var clone = this.toMoment(value).day(weekStartDay);

    return clone;
  },

  /**
   * Returns all the days in the specified month.
   *
   * @param  {Moment/Date/Number} value
   * @return {Moment[]}
   */
  getDaysInMonth: function getDaysInMonth(value) {
    var first = this.toMoment(value).startOf('month');
    var beforeFirst = this.toMoment(value).startOf('month').add(-1, 'days');
    var start = this.getWeekStartMoment(first);
    var result = [];
    var i = 0;

    if (beforeFirst.isBefore(start)
    // and it doen't start with a full week before and the week has at least 1 day from current month (default)
     && (this.props.alwaysShowPrevWeek || !start.isSame(first))) {
      start.add(-1, 'weeks');
    }

    for (; i < 42; i++) {
      result.push(this.toMoment(start));
      start.add(1, 'days');
    }

    return result;
  },

  render: function render() {

    var props = assign({}, this.props);

    this.toMoment = function (value, dateFormat) {
      return toMoment(value, dateFormat || props.dateFormat, { locale: props.locale });
    };

    TODAY = +this.toMoment().startOf('day');

    var dateFormat = props.dateFormat;
    var viewMoment = props.viewMoment = this.toMoment(props.viewDate, dateFormat);

    var weekStartDay = props.weekStartDay;

    if (weekStartDay == null) {
      weekStartDay = props.localeData._week ? props.localeData._week.dow : null;
    }

    this.weekStartDay = props.weekStartDay = weekStartDay;

    if (props.minDate && moment.isMoment(props.minDate)) {
      props.minDate.startOf('day');
    }

    props.minDate && (props.minDate = +this.toMoment(props.minDate, dateFormat));
    props.maxDate && (props.maxDate = +this.toMoment(props.maxDate, dateFormat));

    this.monthFirst = this.toMoment(viewMoment).startOf('month');
    this.monthLast = this.toMoment(viewMoment).endOf('month');

    if (props.date) {
      props.moment = this.toMoment(props.date).startOf('day');
    }

    var daysInView = this.getDaysInMonth(viewMoment);

    return React.createElement(
      'div',
      { className: 'dp-table dp-month-view' },
      this.renderWeekDayNames(),
      this.renderDays(props, daysInView)
    );
  },

  /**
   * Render the given array of days
   * @param  {Moment[]} days
   * @return {React.DOM}
   */
  renderDays: function renderDays(props, days) {
    var nodes = days.map(function (date) {
      return this.renderDay(props, date);
    }, this);

    var len = days.length;
    var buckets = [];
    var bucketsLen = Math.ceil(len / 7);

    var i = 0;

    for (; i < bucketsLen; i++) {
      buckets.push(nodes.slice(i * 7, (i + 1) * 7));
    }

    return buckets.map(function (bucket, i) {
      return React.createElement(
        'div',
        { key: "row" + i, className: 'dp-week dp-row' },
        bucket
      );
    });
  },

  renderDay: function renderDay(props, date) {
    var dayText = FORMAT.day(date, props.dayFormat);
    var classes = ["dp-cell dp-day"];

    var dateTimestamp = +date;

    if (dateTimestamp == TODAY) {
      classes.push('dp-current');
    } else if (dateTimestamp < this.monthFirst) {
      classes.push('dp-prev');
    } else if (dateTimestamp > this.monthLast) {
      classes.push('dp-next');
    }

    var beforeMinDate;

    if (props.minDate && date < props.minDate) {
      classes.push('dp-disabled dp-before-min');
      beforeMinDate = true;
    }

    var afterMaxDate;
    if (props.maxDate && date > props.maxDate) {
      classes.push('dp-disabled dp-after-max');
      afterMaxDate = true;
    }

    if (dateTimestamp == props.moment) {
      classes.push('dp-value');
    }

    var mom = this.toMoment(date);
    var onClick = this.handleClick.bind(this, props, date, dateTimestamp);

    var renderDayProps = {
      role: 'link',
      tabIndex: 1,
      key: dayText,
      text: dayText,
      date: mom,
      moment: mom,
      className: classes.join(' '),
      style: {},
      onClick: onClick,
      onKeyUp: onEnter(onClick),
      children: dayText
    };

    if (beforeMinDate) {
      renderDayProps.isDisabled = true;
      renderDayProps.beforeMinDate = true;
    }
    if (afterMaxDate) {
      renderDayProps.isDisabled = true;
      renderDayProps.afterMaxDate = true;
    }

    if (typeof props.onRenderDay === 'function') {
      renderDayProps = props.onRenderDay(renderDayProps);
    }

    var defaultRenderFunction = React.DOM.div;
    var renderFunction = props.renderDay || defaultRenderFunction;

    var result = renderFunction(renderDayProps);

    if (result === undefined) {
      result = defaultRenderFunction(renderDayProps);
    }

    return result;
  },

  getWeekDayNames: function getWeekDayNames(props) {
    props = props || this.props;

    var names = props.weekDayNames;
    var weekStartDay = this.weekStartDay;

    if (typeof names == 'function') {
      names = names(weekStartDay, props.locale);
    } else if (Array.isArray(names)) {

      names = [].concat(names);

      var index = weekStartDay;

      while (index > 0) {
        names.push(names.shift());
        index--;
      }
    }

    return names;
  },

  renderWeekDayNames: function renderWeekDayNames() {
    var names = this.getWeekDayNames();

    return React.createElement(
      'div',
      { className: 'dp-row dp-week-day-names' },
      names.map(function (name, index) {
        return React.createElement(
          'div',
          { key: index, className: 'dp-cell dp-week-day-name' },
          name
        );
      })
    );
  },

  handleClick: function handleClick(props, date, timestamp, event) {
    if (props.minDate && timestamp < props.minDate) {
      return;
    }
    if (props.maxDate && timestamp > props.maxDate) {
      return;
    }

    event.target.value = date;(props.onChange || emptyFn)(date, event);
  }
});

MonthView.getHeaderText = function (moment, props) {
  return toMoment(moment, null, { locale: props.locale }).format('MMMM YYYY');
};

exports['default'] = MonthView;
module.exports = exports['default'];
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],5:[function(require,module,exports){
'use strict';

var React = require('react');
var moment = require('moment');

var FORMAT = require('./utils/format');
var asConfig = require('./utils/asConfig');
var toMoment = require('./toMoment');
var onEnter = require('./onEnter');
var assign = require('object-assign');

var TODAY;

function emptyFn() {}

var YearView = React.createClass({

    displayName: 'YearView',

    getDefaultProps: function getDefaultProps() {

        return asConfig();
    },

    /**
     * Returns all the days in the specified month.
     *
     * @param  {Moment/Date/Number} value
     * @return {Moment[]}
     */
    getMonthsInYear: function getMonthsInYear(value) {
        var start = moment(value).startOf('year');
        var result = [];
        var i = 0;

        for (; i < 12; i++) {
            result.push(moment(start));
            start.add(1, 'month');
        }

        return result;
    },

    render: function render() {

        TODAY = +moment().startOf('day');

        var props = assign({}, this.props);

        var viewMoment = props.viewMoment = moment(this.props.viewDate);

        if (props.date) {
            props.moment = moment(props.date).startOf('month');
        }

        var monthsInView = this.getMonthsInYear(viewMoment);

        return React.createElement(
            'div',
            { className: 'dp-table dp-year-view' },
            this.renderMonths(props, monthsInView)
        );
    },

    /**
     * Render the given array of days
     * @param  {Moment[]} days
     * @return {React.DOM}
     */
    renderMonths: function renderMonths(props, days) {
        var nodes = days.map(function (date) {
            return this.renderMonth(props, date);
        }, this);
        var len = days.length;
        var buckets = [];
        var bucketsLen = Math.ceil(len / 4);

        var i = 0;

        for (; i < bucketsLen; i++) {
            buckets.push(nodes.slice(i * 4, (i + 1) * 4));
        }

        return buckets.map(function (bucket, i) {
            return React.createElement(
                'div',
                { key: "row" + i, className: 'dp-row' },
                bucket
            );
        });
    },

    renderMonth: function renderMonth(props, date) {
        var monthText = FORMAT.month(date, props.monthFormat);
        var classes = ["dp-cell dp-month"];

        var dateTimestamp = +date;

        if (dateTimestamp == props.moment) {
            classes.push('dp-value');
        }

        var onClick = this.handleClick.bind(this, props, date);

        return React.createElement(
            'div',
            {
                tabIndex: '1',
                role: 'link',
                key: monthText,
                className: classes.join(' '),
                onClick: onClick,
                onKeyUp: onEnter(onClick)
            },
            monthText
        );
    },

    handleClick: function handleClick(props, date, event) {
        event.target.value = date;(props.onSelect || emptyFn)(date, event);
    }
});

YearView.getHeaderText = function (moment, props) {
    return toMoment(moment, null, { locale: props.locale }).format('YYYY');
};

module.exports = YearView;
},{"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"./utils/format":11,"moment":13,"object-assign":14,"react":"react"}],6:[function(require,module,exports){
'use strict';

var getWeekDayNames = require('./utils/getWeekDayNames');

// console.log(getWeekDayNames())

module.exports = {

    //the names of week days to be displayed in month view - first should be sunday
    weekDayNames: getWeekDayNames,

    //the day to display as first day of week. defaults to 0, which is sunday
    weekStartDay: null,

    locale: null,

    //the format in which days should be displayed in month view
    dayFormat: 'D',

    //the format in which months should be displayed in year view
    monthFormat: 'MMMM',

    //the format in which years should be displayed in decade view
    yearFormat: 'YYYY',

    //text for navigating to prev period
    navPrev: '‹',

    //text for navigating to next period
    navNext: '›',

    //the view to render initially. Possible values are: 'month', 'year', 'decade'
    view: null,

    //the date to mark as selected in the date picker.
    //Can be a Date object, a moment object or a string.
    //If it's a string, it will be parsed using dateFormat
    date: null,

    minDate: null,

    maxDate: null,

    //the date where to open the picker. defaults to today if no date and no viewDate specified
    viewDate: null,

    //if the date property is given as string, it will be parsed using this format
    dateFormat: 'YYYY-MM-DD',

    onRenderDay: null,
    renderDay: null,

    alwaysShowPrevWeek: false
};
},{"./utils/getWeekDayNames":12}],7:[function(require,module,exports){
'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var React = require('react');

var moment = require('moment');
var assign = require('object-assign');
var asConfig = require('./utils/asConfig');

var MonthView = require('./MonthView');
var YearView = require('./YearView');
var DecadeView = require('./DecadeView');
var Header = require('./Header');

var toMoment = require('./toMoment');

var hasOwn = function hasOwn(obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
};

var onEnter = require('./onEnter');

var Views = {
    month: MonthView,
    year: YearView,
    decade: DecadeView
};

function emptyFn() {}

var DatePicker = React.createClass({

    displayName: 'DatePicker',

    propTypes: {
        todayText: React.PropTypes.string,
        gotoSelectedText: React.PropTypes.string,

        renderFooter: React.PropTypes.func,
        onChange: React.PropTypes.func,

        date: React.PropTypes.any,
        viewDate: React.PropTypes.any
    },

    getViewOrder: function getViewOrder() {
        return this.props.viewOrder || ['month', 'year', 'decade'];
    },

    getDefaultProps: function getDefaultProps() {
        var props = assign({}, asConfig(), {
            isDatePicker: true,
            navOnDateClick: true,
            defaultStyle: {
                boxSizing: 'border-box'
            }
        });

        delete props.viewDate;
        delete props.date;

        return props;
    },

    getInitialState: function getInitialState() {
        return {
            view: this.props.defaultView,
            viewDate: this.props.defaultViewDate,
            defaultDate: this.props.defaultDate
        };
    },

    getViewName: function getViewName() {
        var view = this.props.view != null ? this.props.view : this.state.view;

        return view || 'month';
    },

    addViewIndex: function addViewIndex(amount) {
        var viewName = this.getViewName();

        var order = this.getViewOrder();
        var index = order.indexOf(viewName);

        index += amount;

        return index % order.length;
    },

    getNextViewName: function getNextViewName() {
        return this.getViewOrder()[this.addViewIndex(1)];
    },

    getPrevViewName: function getPrevViewName() {
        return this.getViewOrder()[this.addViewIndex(-1)];
    },

    getView: function getView() {
        var views = this.props.views || Views;
        return views[this.getViewName()] || views.month;
    },

    getViewFactory: function getViewFactory() {
        var view = this.getView();

        if (React.createFactory && view && view.prototype && typeof view.prototype.render == 'function') {
            view.__factory = view.__factory || React.createFactory(view);
            view = view.__factory;
        }

        return view;
    },

    getViewDate: function getViewDate() {
        var date = hasOwn(this.props, 'viewDate') ? this.props.viewDate : this.state.viewDate;

        date = date || this.viewMoment || this.getDate() || new Date();

        if (moment.isMoment(date)) {
            //in order to strip the locale - the date picker may have had its locale changed
            //between two render calls. If we don't strip this, moment(mom) returns a new moment
            //with the locale of mom, which is not what we want
            date = +date;
        }

        date = this.toMoment(date);

        return date;
    },

    getDate: function getDate() {
        var date;

        if (hasOwn(this.props, 'date')) {
            date = this.props.date;
        } else {
            date = this.state.defaultDate;
        }

        return date ? this.toMoment(date) : null;
    },

    render: function render() {

        var props = assign({}, this.props);

        this.toMoment = function (value, dateFormat) {
            return toMoment(value, dateFormat || props.dateFormat, { locale: props.locale });
        };

        var view = this.getViewFactory();

        props.date = this.getDate();

        var dateString = props.date == null ? '' : props.date.format(this.props.dateFormat);

        props.viewDate = this.viewMoment = this.getViewDate();
        props.locale = this.props.locale;
        props.localeData = moment.localeData(props.locale);

        props.renderDay = this.props.renderDay;
        props.onRenderDay = this.props.onRenderDay;

        // props.onChange  = this.handleChange
        // props.onSelect  = this.handleSelect

        var className = (this.props.className || '') + ' date-picker';

        props.style = this.prepareStyle(props);

        var viewProps = props;
        var viewProps = asConfig(props);

        viewProps.dateString = dateString;
        viewProps.localeData = props.localeData;
        viewProps.onSelect = this.handleSelect;
        viewProps.onChange = this.handleChange;

        return React.createElement(
            'div',
            _extends({}, this.props, { className: className, style: props.style }),
            this.renderHeader(view, props),
            React.createElement(
                'div',
                { className: 'dp-body', style: { flex: 1 } },
                view(viewProps)
            ),
            this.renderFooter(props)
        );
    },

    prepareStyle: function prepareStyle(props) {
        return assign({}, props.defaultStyle, props.style);
    },

    renderFooter: function renderFooter(props) {
        if (this.props.hideFooter) {
            return;
        }

        if (this.props.today) {
            console.warn('Please use "todayText" prop instead of "today"!');
        }
        if (this.props.gotoSelected) {
            console.warn('Please use "gotoSelectedText" prop instead of "gotoSelected"!');
        }

        var todayText = this.props.todayText || 'Today';
        var gotoSelectedText = this.props.gotoSelectedText || 'Go to selected';

        var footerProps = {
            todayText: todayText,
            gotoSelectedText: gotoSelectedText,
            gotoToday: this.gotoNow,
            gotoSelected: this.gotoSelected.bind(this, props),
            date: props.date,
            viewDate: props.viewDate
        };

        var result;
        if (typeof this.props.footerFactory == 'function') {
            result = this.props.footerFactory(footerProps);
        }

        if (result !== undefined) {
            return result;
        }

        return React.createElement(
            'div',
            { className: 'dp-footer' },
            React.createElement(
                'div',
                {
                    tabIndex: '1',
                    role: 'link',
                    className: 'dp-footer-today',
                    onClick: footerProps.gotoToday,
                    onKeyUp: onEnter(footerProps.gotoToday)
                },
                todayText
            ),
            React.createElement(
                'div',
                {
                    tabIndex: '1',
                    role: 'link',
                    className: 'dp-footer-selected',
                    onClick: footerProps.gotoSelected,
                    onKeyUp: onEnter(footerProps.gotoSelected)
                },
                gotoSelectedText
            )
        );
    },

    gotoNow: function gotoNow() {
        this.gotoDate(+new Date());
    },

    gotoSelected: function gotoSelected(props) {
        this.gotoDate(props.date || +new Date());
    },

    gotoDate: function gotoDate(value) {

        this.setView('month');

        this.setViewDate(value);
    },

    getViewColspan: function getViewColspan() {
        var map = {
            month: 5,
            year: 2,
            decade: 2
        };

        return map[this.getViewName()];
    },

    renderHeader: function renderHeader(view, props) {

        if (this.props.hideHeader) {
            return;
        }

        props = props || this.props;

        var viewDate = this.getViewDate();
        var headerText = this.getView().getHeaderText(viewDate, props);

        var colspan = this.getViewColspan();
        var prev = this.props.navPrev;
        var next = this.props.navNext;

        return React.createElement(
            Header,
            {
                prevText: prev,
                nextText: next,
                colspan: colspan,
                onPrev: this.handleNavPrev,
                onNext: this.handleNavNext,
                onChange: this.handleViewChange
            },
            headerText
        );
    },

    handleRenderDay: function handleRenderDay(date) {
        return (this.props.renderDay || emptyFn)(date) || [];
    },

    handleViewChange: function handleViewChange() {
        this.setView(this.getNextViewName());
    },

    /**
     * Use this method to set the view.
     *
     * @param {String} view 'month'/'year'/'decade'
     *
     * It calls onViewChange, and if the view is uncontrolled, also sets it is state,
     * so the datepicker gets re-rendered view the new view
     *
     */
    setView: function setView(view) {

        if (typeof this.props.onViewChange == 'function') {
            this.props.onViewChange(view);
        }

        if (this.props.view == null) {
            this.setState({
                view: view
            });
        }
    },

    setViewDate: function setViewDate(moment) {

        moment = this.toMoment(moment);

        var fn = this.props.onViewDateChange;

        if (typeof fn == 'function') {

            var text = moment.format(this.props.dateFormat);
            var view = this.getViewName();

            fn(text, moment, view);
        }

        if (!hasOwn(this.props, 'viewDate')) {
            this.setState({
                viewDate: moment
            });
        }
    },

    getNext: function getNext() {
        var current = this.getViewDate();
        var toMoment = this.toMoment;

        return ({
            month: function month() {
                return toMoment(current).add(1, 'month');
            },
            year: function year() {
                return toMoment(current).add(1, 'year');
            },
            decade: function decade() {
                return toMoment(current).add(10, 'year');
            }
        })[this.getViewName()]();
    },

    getPrev: function getPrev() {
        var current = this.getViewDate();
        var toMoment = this.toMoment;

        return ({
            month: function month() {
                return toMoment(current).add(-1, 'month');
            },
            year: function year() {
                return toMoment(current).add(-1, 'year');
            },
            decade: function decade() {
                return toMoment(current).add(-10, 'year');
            }
        })[this.getViewName()]();
    },

    handleNavigation: function handleNavigation(direction, event) {
        var viewMoment = direction == -1 ? this.getPrev() : this.getNext();

        this.setViewDate(viewMoment);

        if (typeof this.props.onNav === 'function') {
            var text = viewMoment.format(this.props.dateFormat);
            var view = this.getViewName();

            this.props.onNav(text, viewMoment, view, direction, event);
        }
    },

    handleNavPrev: function handleNavPrev(event) {
        this.handleNavigation(-1, event);
    },

    handleNavNext: function handleNavNext(event) {
        this.handleNavigation(1, event);
    },

    handleChange: function handleChange(date, event) {
        date = this.toMoment(date);

        if (this.props.navOnDateClick) {
            var viewDate = this.toMoment(this.getViewDate());

            //it's not enough to compare months, since the year can change as well
            //
            //also it's ok to hardcode the format here
            var viewMonth = viewDate.format('YYYY-MM');
            var dateMonth = date.format('YYYY-MM');

            if (dateMonth > viewMonth) {
                this.handleNavNext(event);
            } else if (dateMonth < viewMonth) {
                this.handleNavPrev(event);
            }
        }

        var text = date.format(this.props.dateFormat);

        if (!hasOwn(this.props, 'date')) {
            this.setState({
                defaultDate: text
            });
        }

        ;(this.props.onChange || emptyFn)(text, date, event);
    },

    handleSelect: function handleSelect(date, event) {
        var viewName = this.getViewName();

        var property = ({
            decade: 'year',
            year: 'month'
        })[viewName];

        var value = date.get(property);
        var viewMoment = this.toMoment(this.getViewDate()).set(property, value);
        var view = this.getPrevViewName();

        this.setViewDate(viewMoment);

        this.setView(view);

        if (typeof this.props.onSelect === 'function') {
            var text = viewMoment.format(this.props.dateFormat);
            this.props.onSelect(text, viewMoment, view, event);
        }
    }

});

DatePicker.views = Views;

var PT = React.PropTypes;

DatePicker.propTypes = {

    /**
     * Function to be called when user selects a date.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {Event} event
     *
     * @type {Function}
     */
    onChange: PT.func,

    /**
     * Function to be called when the user navigates to the next/prev month/year/decade
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view The name of the current view (eg: "month")
     * @param {Number} direction 1 or -1. 1 if the right arrow, to nav to next period was pressed. -1 if the left arrow, to nav to the prev period was pressed.
     * @param {Event} event
     *
     * @type {Function}
     */
    onNav: PT.func,

    /**
     * Function to be called when the user selects a year/month.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view The name of the view displayed after following the selection. For now, either "year" or "month"
     *
     * @type {Function}
     */
    onSelect: PT.func,

    /**
     * A function that should return a React DOM for the day cell. The first param is the props object.
     * You can use this to have full control over what gets rendered for a day.
     *
     * @param {Object} dayProps The props object passed to day rendering
     *
     * @type {Function}
     */
    renderDay: PT.func,

    /**
     * A function that can manipulate the props object for a day, and SHOULD return a props object (a new one, or the same).
     * Use this for CUSTOM DAY STYLING.
     * You can use this to take full control over the styles/css classes/attributes applied to the day cell in the month view.
     *
     * @param {Object} dayProps
     * @return {Object} dayProps
     *
     * @type {Function}
     */
    onRenderDay: PT.func,

    /******************************************/
    /********** VIEW-related props ************/
    /******************************************/

    /**
     * The default view to show in the picker. This is an uncontrolled prop.
     * If none specified, the default view will be "month"
     *
     * @type {String}
     */
    defaultView: PT.string,

    /**
     * The view to show in the picker. This is a CONTROLLED prop!
     *
     * When using this controlled prop, make sure you update it when `onViewChange` function is called
     * if you want to navigate to another view, as expected.
     *
     * @type {String}
     */
    view: PT.string,

    /**
     * A function to be called when navigating to another view date.
     *
     * Called with the following params:
     *
     * @param {String} dateText Date formatted as string
     * @param {Moment} moment Moment.js instance
     * @param {String} view the name of the view displayed after the navigation occurs.
     *
     * @type {Function}
     */
    onViewDateChange: PT.func,

    /**
     * A function to be called when the view is changed.
     * If you're using the controlled `view` prop, make sure you update the `view` prop in this function if you want to navigate to another view, as expected.
     *
     * @param {String} nextView One of "month", "year", "decade"
     *
     * @type {Function}
     */
    onViewChange: PT.func,

    /**
     * Defaults to true. If specified as false, will not navigate to the date that was clicked, even if that date is in the prev/next month
     * @type {Boolean}
     */
    navOnDateClick: PT.bool
};

module.exports = DatePicker;
},{"./DecadeView":2,"./Header":3,"./MonthView":4,"./YearView":5,"./onEnter":8,"./toMoment":9,"./utils/asConfig":10,"moment":13,"object-assign":14,"react":"react"}],8:[function(require,module,exports){
'use strict';

module.exports = function onKeyUp(fn) {
  return function (event) {
    if (event.key == 'Enter') {
      fn(event);
    }
  };
};
},{}],9:[function(require,module,exports){
'use strict';

var moment = require('moment');
var CONFIG = require('./config');

/**
 * This function will be used to convert a date to a moment.
 *
 * It accepts input as sring, date or moment
 *
 * @param  {String/Date/Moment} value
 * @param  {String} [dateFormat] if value is string, it will be parsed to a moment using this format
 * @param  {Object} [config]
 * @param  {Boolean} [config.strict] whether to perform strict parsing on strings
 * @return {Moment}
 */
module.exports = function (value, dateFormat, config) {
    var strict = !!(config && config.strict);
    var locale = config && config.locale;

    dateFormat = dateFormat || CONFIG.dateFormat;

    if (typeof value == 'string') {
        return moment(value, dateFormat, locale, strict);
    }

    // return moment.isMoment(value)?
    // 			value:
    return moment(value == null ? new Date() : value, undefined, locale, strict);
};
},{"./config":6,"moment":13}],10:[function(require,module,exports){
'use strict';

var assign = require('object-assign');

var CONFIG = require('../config');
var KEYS = Object.keys(CONFIG);

function copyList(src, target, list) {
    if (src) {
        list.forEach(function (key) {
            target[key] = src[key];
        });
    }

    return target;
}

/**
 * Returns an object that copies from given source object
 * on the resulting object only the properties also found in cfg.
 *
 * If no cfg specified, CONFIG is assumed
 *
 * @param  {object} source
 * @param  {Object} [cfg] If not specied, CONFIG will be used
 *
 * @return {Object}
 */
module.exports = function asConfig(source, cfg) {

    var keys = KEYS;

    if (cfg) {
        keys = Object.keys(cfg);
    }

    cfg = cfg || CONFIG;

    if (!source) {
        return assign({}, cfg);
    }

    return copyList(source, assign({}, cfg), keys);
};
},{"../config":6,"object-assign":14}],11:[function(require,module,exports){
'use strict';

var CONFIG = require('../config');
var toMoment = require('../toMoment');

function f(mom, format) {
    return toMoment(mom).format(format);
}

module.exports = {
    day: function day(mom, format) {
        return f(mom, format || CONFIG.dayFormat);
    },

    month: function month(mom, format) {
        return f(mom, format || CONFIG.monthFormat);
    },

    year: function year(mom, format) {
        return f(mom, format || CONFIG.yearFormat);
    }
};
},{"../config":6,"../toMoment":9}],12:[function(require,module,exports){
'use strict';

var moment = require('moment');

var DEFAULT_WEEK_START_DAY = moment().startOf('week').format('d') * 1;

module.exports = function getWeekDayNames(startDay, locale) {

	var weekDays;

	if (locale) {
		var data = moment.localeData(locale);

		weekDays = data && data._weekdaysShort ? data._weekdaysShort : weekDays;
	}

	weekDays = (weekDays || moment.weekdaysShort()).concat();

	var names = weekDays;
	var index = startDay == null ? DEFAULT_WEEK_START_DAY : startDay;

	while (index > 0) {
		names.push(names.shift());
		index--;
	}

	return names;
};
},{"moment":13}],13:[function(require,module,exports){
//! moment.js
//! version : 2.11.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

;(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    global.moment = factory()
}(this, function () { 'use strict';

    var hookCallback;

    function utils_hooks__hooks () {
        return hookCallback.apply(null, arguments);
    }

    // This is done to register the method called with moment()
    // without creating circular dependencies.
    function setHookCallback (callback) {
        hookCallback = callback;
    }

    function isArray(input) {
        return Object.prototype.toString.call(input) === '[object Array]';
    }

    function isDate(input) {
        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
    }

    function map(arr, fn) {
        var res = [], i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function hasOwnProp(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }

    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function create_utc__createUTC (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, true).utc();
    }

    function defaultParsingFlags() {
        // We need to deep clone this object.
        return {
            empty           : false,
            unusedTokens    : [],
            unusedInput     : [],
            overflow        : -2,
            charsLeftOver   : 0,
            nullInput       : false,
            invalidMonth    : null,
            invalidFormat   : false,
            userInvalidated : false,
            iso             : false
        };
    }

    function getParsingFlags(m) {
        if (m._pf == null) {
            m._pf = defaultParsingFlags();
        }
        return m._pf;
    }

    function valid__isValid(m) {
        if (m._isValid == null) {
            var flags = getParsingFlags(m);
            m._isValid = !isNaN(m._d.getTime()) &&
                flags.overflow < 0 &&
                !flags.empty &&
                !flags.invalidMonth &&
                !flags.invalidWeekday &&
                !flags.nullInput &&
                !flags.invalidFormat &&
                !flags.userInvalidated;

            if (m._strict) {
                m._isValid = m._isValid &&
                    flags.charsLeftOver === 0 &&
                    flags.unusedTokens.length === 0 &&
                    flags.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function valid__createInvalid (flags) {
        var m = create_utc__createUTC(NaN);
        if (flags != null) {
            extend(getParsingFlags(m), flags);
        }
        else {
            getParsingFlags(m).userInvalidated = true;
        }

        return m;
    }

    function isUndefined(input) {
        return input === void 0;
    }

    // Plugins that add properties should also add the key here (null value),
    // so we can properly clone ourselves.
    var momentProperties = utils_hooks__hooks.momentProperties = [];

    function copyConfig(to, from) {
        var i, prop, val;

        if (!isUndefined(from._isAMomentObject)) {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (!isUndefined(from._i)) {
            to._i = from._i;
        }
        if (!isUndefined(from._f)) {
            to._f = from._f;
        }
        if (!isUndefined(from._l)) {
            to._l = from._l;
        }
        if (!isUndefined(from._strict)) {
            to._strict = from._strict;
        }
        if (!isUndefined(from._tzm)) {
            to._tzm = from._tzm;
        }
        if (!isUndefined(from._isUTC)) {
            to._isUTC = from._isUTC;
        }
        if (!isUndefined(from._offset)) {
            to._offset = from._offset;
        }
        if (!isUndefined(from._pf)) {
            to._pf = getParsingFlags(from);
        }
        if (!isUndefined(from._locale)) {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (!isUndefined(val)) {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    var updateInProgress = false;

    // Moment prototype object
    function Moment(config) {
        copyConfig(this, config);
        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            utils_hooks__hooks.updateOffset(this);
            updateInProgress = false;
        }
    }

    function isMoment (obj) {
        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
    }

    function absFloor (number) {
        if (number < 0) {
            return Math.ceil(number);
        } else {
            return Math.floor(number);
        }
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            value = absFloor(coercedNumber);
        }

        return value;
    }

    // compare two arrays, return the number of differences
    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function Locale() {
    }

    // internal storage for locale config files
    var locales = {};
    var globalLocale;

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0, j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        // TODO: Find a better way to register and load all the locales in Node
        if (!locales[name] && !isUndefined(module) &&
                module && module.exports) {
            try {
                oldLocale = globalLocale._abbr;
                require('./locale/' + name);
                // because defineLocale currently also sets the global locale, we
                // want to undo that for lazy loaded locales
                locale_locales__getSetGlobalLocale(oldLocale);
            } catch (e) { }
        }
        return locales[name];
    }

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    function locale_locales__getSetGlobalLocale (key, values) {
        var data;
        if (key) {
            if (isUndefined(values)) {
                data = locale_locales__getLocale(key);
            }
            else {
                data = defineLocale(key, values);
            }

            if (data) {
                // moment.duration._locale = moment._locale = data;
                globalLocale = data;
            }
        }

        return globalLocale._abbr;
    }

    function defineLocale (name, values) {
        if (values !== null) {
            values.abbr = name;
            locales[name] = locales[name] || new Locale();
            locales[name].set(values);

            // backwards compat for now: also set the locale
            locale_locales__getSetGlobalLocale(name);

            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    }

    // returns locale data
    function locale_locales__getLocale (key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return globalLocale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    }

    var aliases = {};

    function addUnitAlias (unit, shorthand) {
        var lowerCase = unit.toLowerCase();
        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
    }

    function normalizeUnits(units) {
        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    function isFunction(input) {
        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
    }

    function makeGetSet (unit, keepTime) {
        return function (value) {
            if (value != null) {
                get_set__set(this, unit, value);
                utils_hooks__hooks.updateOffset(this, keepTime);
                return this;
            } else {
                return get_set__get(this, unit);
            }
        };
    }

    function get_set__get (mom, unit) {
        return mom.isValid() ?
            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
    }

    function get_set__set (mom, unit, value) {
        if (mom.isValid()) {
            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }

    // MOMENTS

    function getSet (units, value) {
        var unit;
        if (typeof units === 'object') {
            for (unit in units) {
                this.set(unit, units[unit]);
            }
        } else {
            units = normalizeUnits(units);
            if (isFunction(this[units])) {
                return this[units](value);
            }
        }
        return this;
    }

    function zeroFill(number, targetLength, forceSign) {
        var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
        return (sign ? (forceSign ? '+' : '') : '-') +
            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
    }

    var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;

    var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;

    var formatFunctions = {};

    var formatTokenFunctions = {};

    // token:    'M'
    // padded:   ['MM', 2]
    // ordinal:  'Mo'
    // callback: function () { this.month() + 1 }
    function addFormatToken (token, padded, ordinal, callback) {
        var func = callback;
        if (typeof callback === 'string') {
            func = function () {
                return this[callback]();
            };
        }
        if (token) {
            formatTokenFunctions[token] = func;
        }
        if (padded) {
            formatTokenFunctions[padded[0]] = function () {
                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            };
        }
        if (ordinal) {
            formatTokenFunctions[ordinal] = function () {
                return this.localeData().ordinal(func.apply(this, arguments), token);
            };
        }
    }

    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens), i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function (mom) {
            var output = '';
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());
        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }

    var match1         = /\d/;            //       0 - 9
    var match2         = /\d\d/;          //      00 - 99
    var match3         = /\d{3}/;         //     000 - 999
    var match4         = /\d{4}/;         //    0000 - 9999
    var match6         = /[+-]?\d{6}/;    // -999999 - 999999
    var match1to2      = /\d\d?/;         //       0 - 99
    var match3to4      = /\d\d\d\d?/;     //     999 - 9999
    var match5to6      = /\d\d\d\d\d\d?/; //   99999 - 999999
    var match1to3      = /\d{1,3}/;       //       0 - 999
    var match1to4      = /\d{1,4}/;       //       0 - 9999
    var match1to6      = /[+-]?\d{1,6}/;  // -999999 - 999999

    var matchUnsigned  = /\d+/;           //       0 - inf
    var matchSigned    = /[+-]?\d+/;      //    -inf - inf

    var matchOffset    = /Z|[+-]\d\d:?\d\d/gi; // +00:00 -00:00 +0000 -0000 or Z
    var matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z

    var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/; // 123456789 123456789.123

    // any word (or two) characters or numbers including two/three word month in arabic.
    // includes scottish gaelic two word and hyphenated months
    var matchWord = /[0-9]*(a[mn]\s?)?['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;


    var regexes = {};

    function addRegexToken (token, regex, strictRegex) {
        regexes[token] = isFunction(regex) ? regex : function (isStrict) {
            return (isStrict && strictRegex) ? strictRegex : regex;
        };
    }

    function getParseRegexForToken (token, config) {
        if (!hasOwnProp(regexes, token)) {
            return new RegExp(unescapeFormat(token));
        }

        return regexes[token](config._strict, config._locale);
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function unescapeFormat(s) {
        return s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        }).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    var tokens = {};

    function addParseToken (token, callback) {
        var i, func = callback;
        if (typeof token === 'string') {
            token = [token];
        }
        if (typeof callback === 'number') {
            func = function (input, array) {
                array[callback] = toInt(input);
            };
        }
        for (i = 0; i < token.length; i++) {
            tokens[token[i]] = func;
        }
    }

    function addWeekParseToken (token, callback) {
        addParseToken(token, function (input, array, config, token) {
            config._w = config._w || {};
            callback(input, config._w, config, token);
        });
    }

    function addTimeToArrayFromToken(token, input, config) {
        if (input != null && hasOwnProp(tokens, token)) {
            tokens[token](input, config._a, config, token);
        }
    }

    var YEAR = 0;
    var MONTH = 1;
    var DATE = 2;
    var HOUR = 3;
    var MINUTE = 4;
    var SECOND = 5;
    var MILLISECOND = 6;
    var WEEK = 7;
    var WEEKDAY = 8;

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }

    // FORMATTING

    addFormatToken('M', ['MM', 2], 'Mo', function () {
        return this.month() + 1;
    });

    addFormatToken('MMM', 0, 0, function (format) {
        return this.localeData().monthsShort(this, format);
    });

    addFormatToken('MMMM', 0, 0, function (format) {
        return this.localeData().months(this, format);
    });

    // ALIASES

    addUnitAlias('month', 'M');

    // PARSING

    addRegexToken('M',    match1to2);
    addRegexToken('MM',   match1to2, match2);
    addRegexToken('MMM',  matchWord);
    addRegexToken('MMMM', matchWord);

    addParseToken(['M', 'MM'], function (input, array) {
        array[MONTH] = toInt(input) - 1;
    });

    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
        var month = config._locale.monthsParse(input, token, config._strict);
        // if we didn't find a month name, mark the date as invalid.
        if (month != null) {
            array[MONTH] = month;
        } else {
            getParsingFlags(config).invalidMonth = input;
        }
    });

    // LOCALES

    var MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;
    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');
    function localeMonths (m, format) {
        return isArray(this._months) ? this._months[m.month()] :
            this._months[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sept_Oct_Nov_Dec'.split('_');
    function localeMonthsShort (m, format) {
        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :
            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    function localeMonthsParse (monthName, format, strict) {
        var i, mom, regex;

        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
        }

        for (i = 0; i < 12; i++) {
            // make the regex if we don't have it already
            mom = create_utc__createUTC([2000, i]);
            if (strict && !this._longMonthsParse[i]) {
                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
            }
            if (!strict && !this._monthsParse[i]) {
                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                return i;
            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                return i;
            } else if (!strict && this._monthsParse[i].test(monthName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function setMonth (mom, value) {
        var dayOfMonth;

        if (!mom.isValid()) {
            // No op
            return mom;
        }

        // TODO: Move this out of here!
        if (typeof value === 'string') {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (typeof value !== 'number') {
                return mom;
            }
        }

        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function getSetMonth (value) {
        if (value != null) {
            setMonth(this, value);
            utils_hooks__hooks.updateOffset(this, true);
            return this;
        } else {
            return get_set__get(this, 'Month');
        }
    }

    function getDaysInMonth () {
        return daysInMonth(this.year(), this.month());
    }

    function checkOverflow (m) {
        var overflow;
        var a = m._a;

        if (a && getParsingFlags(m).overflow === -2) {
            overflow =
                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :
                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :
                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :
                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :
                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :
                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }
            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
                overflow = WEEK;
            }
            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
                overflow = WEEKDAY;
            }

            getParsingFlags(m).overflow = overflow;
        }

        return m;
    }

    function warn(msg) {
        if (utils_hooks__hooks.suppressDeprecationWarnings === false && !isUndefined(console) && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;

        return extend(function () {
            if (firstTime) {
                warn(msg + '\nArguments: ' + Array.prototype.slice.call(arguments).join(', ') + '\n' + (new Error()).stack);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    var deprecations = {};

    function deprecateSimple(name, msg) {
        if (!deprecations[name]) {
            warn(msg);
            deprecations[name] = true;
        }
    }

    utils_hooks__hooks.suppressDeprecationWarnings = false;

    // iso 8601 regex
    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
    var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
    var basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;

    var tzRegex = /Z|[+-]\d\d(?::?\d\d)?/;

    var isoDates = [
        ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
        ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
        ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
        ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
        ['YYYY-DDD', /\d{4}-\d{3}/],
        ['YYYY-MM', /\d{4}-\d\d/, false],
        ['YYYYYYMMDD', /[+-]\d{10}/],
        ['YYYYMMDD', /\d{8}/],
        // YYYYMM is NOT allowed by the standard
        ['GGGG[W]WWE', /\d{4}W\d{3}/],
        ['GGGG[W]WW', /\d{4}W\d{2}/, false],
        ['YYYYDDD', /\d{7}/]
    ];

    // iso time formats and regexes
    var isoTimes = [
        ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
        ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
        ['HH:mm:ss', /\d\d:\d\d:\d\d/],
        ['HH:mm', /\d\d:\d\d/],
        ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
        ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
        ['HHmmss', /\d\d\d\d\d\d/],
        ['HHmm', /\d\d\d\d/],
        ['HH', /\d\d/]
    ];

    var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

    // date from iso format
    function configFromISO(config) {
        var i, l,
            string = config._i,
            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
            allowTime, dateFormat, timeFormat, tzFormat;

        if (match) {
            getParsingFlags(config).iso = true;

            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(match[1])) {
                    dateFormat = isoDates[i][0];
                    allowTime = isoDates[i][2] !== false;
                    break;
                }
            }
            if (dateFormat == null) {
                config._isValid = false;
                return;
            }
            if (match[3]) {
                for (i = 0, l = isoTimes.length; i < l; i++) {
                    if (isoTimes[i][1].exec(match[3])) {
                        // match[2] should be 'T' or space
                        timeFormat = (match[2] || ' ') + isoTimes[i][0];
                        break;
                    }
                }
                if (timeFormat == null) {
                    config._isValid = false;
                    return;
                }
            }
            if (!allowTime && timeFormat != null) {
                config._isValid = false;
                return;
            }
            if (match[4]) {
                if (tzRegex.exec(match[4])) {
                    tzFormat = 'Z';
                } else {
                    config._isValid = false;
                    return;
                }
            }
            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
            configFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function configFromString(config) {
        var matched = aspNetJsonRegex.exec(config._i);

        if (matched !== null) {
            config._d = new Date(+matched[1]);
            return;
        }

        configFromISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    utils_hooks__hooks.createFromInputFallback = deprecate(
        'moment construction falls back to js Date. This is ' +
        'discouraged and will be removed in upcoming major ' +
        'release. Please refer to ' +
        'https://github.com/moment/moment/issues/1407 for more info.',
        function (config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    function createDate (y, m, d, h, M, s, ms) {
        //can't just apply() to create a date:
        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
        var date = new Date(y, m, d, h, M, s, ms);

        //the date constructor remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {
            date.setFullYear(y);
        }
        return date;
    }

    function createUTCDate (y) {
        var date = new Date(Date.UTC.apply(null, arguments));

        //the Date.UTC function remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    // FORMATTING

    addFormatToken(0, ['YY', 2], 0, function () {
        return this.year() % 100;
    });

    addFormatToken(0, ['YYYY',   4],       0, 'year');
    addFormatToken(0, ['YYYYY',  5],       0, 'year');
    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

    // ALIASES

    addUnitAlias('year', 'y');

    // PARSING

    addRegexToken('Y',      matchSigned);
    addRegexToken('YY',     match1to2, match2);
    addRegexToken('YYYY',   match1to4, match4);
    addRegexToken('YYYYY',  match1to6, match6);
    addRegexToken('YYYYYY', match1to6, match6);

    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
    addParseToken('YYYY', function (input, array) {
        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);
    });
    addParseToken('YY', function (input, array) {
        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // HELPERS

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    // HOOKS

    utils_hooks__hooks.parseTwoDigitYear = function (input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    // MOMENTS

    var getSetYear = makeGetSet('FullYear', false);

    function getIsLeapYear () {
        return isLeapYear(this.year());
    }

    // start-of-first-week - start-of-year
    function firstWeekOffset(year, dow, doy) {
        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)
            fwd = 7 + dow - doy,
            // first-week day local weekday -- which local weekday is fwd
            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;

        return -fwdlw + fwd - 1;
    }

    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
        var localWeekday = (7 + weekday - dow) % 7,
            weekOffset = firstWeekOffset(year, dow, doy),
            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
            resYear, resDayOfYear;

        if (dayOfYear <= 0) {
            resYear = year - 1;
            resDayOfYear = daysInYear(resYear) + dayOfYear;
        } else if (dayOfYear > daysInYear(year)) {
            resYear = year + 1;
            resDayOfYear = dayOfYear - daysInYear(year);
        } else {
            resYear = year;
            resDayOfYear = dayOfYear;
        }

        return {
            year: resYear,
            dayOfYear: resDayOfYear
        };
    }

    function weekOfYear(mom, dow, doy) {
        var weekOffset = firstWeekOffset(mom.year(), dow, doy),
            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
            resWeek, resYear;

        if (week < 1) {
            resYear = mom.year() - 1;
            resWeek = week + weeksInYear(resYear, dow, doy);
        } else if (week > weeksInYear(mom.year(), dow, doy)) {
            resWeek = week - weeksInYear(mom.year(), dow, doy);
            resYear = mom.year() + 1;
        } else {
            resYear = mom.year();
            resWeek = week;
        }

        return {
            week: resWeek,
            year: resYear
        };
    }

    function weeksInYear(year, dow, doy) {
        var weekOffset = firstWeekOffset(year, dow, doy),
            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
    }

    // Pick the first defined of two or three arguments.
    function defaults(a, b, c) {
        if (a != null) {
            return a;
        }
        if (b != null) {
            return b;
        }
        return c;
    }

    function currentDateArray(config) {
        // hooks is actually the exported moment object
        var nowValue = new Date(utils_hooks__hooks.now());
        if (config._useUTC) {
            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
        }
        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function configFromArray (config) {
        var i, date, input = [], currentDate, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear) {
            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse)) {
                getParsingFlags(config)._overflowDayOfYear = true;
            }

            date = createUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
                config._a[MINUTE] === 0 &&
                config._a[SECOND] === 0 &&
                config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);
            week = defaults(w.W, 1);
            weekday = defaults(w.E, 1);
            if (weekday < 1 || weekday > 7) {
                weekdayOverflow = true;
            }
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);
            week = defaults(w.w, 1);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < 0 || weekday > 6) {
                    weekdayOverflow = true;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from begining of week
                weekday = w.e + dow;
                if (w.e < 0 || w.e > 6) {
                    weekdayOverflow = true;
                }
            } else {
                // default to begining of week
                weekday = dow;
            }
        }
        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
            getParsingFlags(config)._overflowWeeks = true;
        } else if (weekdayOverflow != null) {
            getParsingFlags(config)._overflowWeekday = true;
        } else {
            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
            config._a[YEAR] = temp.year;
            config._dayOfYear = temp.dayOfYear;
        }
    }

    // constant that refers to the ISO standard
    utils_hooks__hooks.ISO_8601 = function () {};

    // date from string and format string
    function configFromStringAndFormat(config) {
        // TODO: Move this to another part of the creation flow to prevent circular deps
        if (config._f === utils_hooks__hooks.ISO_8601) {
            configFromISO(config);
            return;
        }

        config._a = [];
        getParsingFlags(config).empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    getParsingFlags(config).unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    getParsingFlags(config).empty = false;
                }
                else {
                    getParsingFlags(config).unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            else if (config._strict && !parsedInput) {
                getParsingFlags(config).unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            getParsingFlags(config).unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (getParsingFlags(config).bigHour === true &&
                config._a[HOUR] <= 12 &&
                config._a[HOUR] > 0) {
            getParsingFlags(config).bigHour = undefined;
        }
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);

        configFromArray(config);
        checkOverflow(config);
    }


    function meridiemFixWrap (locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // this is not supposed to happen
            return hour;
        }
    }

    // date from string and array of format strings
    function configFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            getParsingFlags(config).invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._f = config._f[i];
            configFromStringAndFormat(tempConfig);

            if (!valid__isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += getParsingFlags(tempConfig).charsLeftOver;

            //or tokens
            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

            getParsingFlags(tempConfig).score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    function configFromObject(config) {
        if (config._d) {
            return;
        }

        var i = normalizeObjectUnits(config._i);
        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {
            return obj && parseInt(obj, 10);
        });

        configFromArray(config);
    }

    function createFromConfig (config) {
        var res = new Moment(checkOverflow(prepareConfig(config)));
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    function prepareConfig (config) {
        var input = config._i,
            format = config._f;

        config._locale = config._locale || locale_locales__getLocale(config._l);

        if (input === null || (format === undefined && input === '')) {
            return valid__createInvalid({nullInput: true});
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (isMoment(input)) {
            return new Moment(checkOverflow(input));
        } else if (isArray(format)) {
            configFromStringAndArray(config);
        } else if (format) {
            configFromStringAndFormat(config);
        } else if (isDate(input)) {
            config._d = input;
        } else {
            configFromInput(config);
        }

        if (!valid__isValid(config)) {
            config._d = null;
        }

        return config;
    }

    function configFromInput(config) {
        var input = config._i;
        if (input === undefined) {
            config._d = new Date(utils_hooks__hooks.now());
        } else if (isDate(input)) {
            config._d = new Date(+input);
        } else if (typeof input === 'string') {
            configFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function (obj) {
                return parseInt(obj, 10);
            });
            configFromArray(config);
        } else if (typeof(input) === 'object') {
            configFromObject(config);
        } else if (typeof(input) === 'number') {
            // from milliseconds
            config._d = new Date(input);
        } else {
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    function createLocalOrUTC (input, format, locale, strict, isUTC) {
        var c = {};

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c._isAMomentObject = true;
        c._useUTC = c._isUTC = isUTC;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;

        return createFromConfig(c);
    }

    function local__createLocal (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, false);
    }

    var prototypeMin = deprecate(
         'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',
         function () {
             var other = local__createLocal.apply(null, arguments);
             if (this.isValid() && other.isValid()) {
                 return other < this ? this : other;
             } else {
                 return valid__createInvalid();
             }
         }
     );

    var prototypeMax = deprecate(
        'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',
        function () {
            var other = local__createLocal.apply(null, arguments);
            if (this.isValid() && other.isValid()) {
                return other > this ? this : other;
            } else {
                return valid__createInvalid();
            }
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return local__createLocal();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (!moments[i].isValid() || moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    // TODO: Use [].sort instead?
    function min () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    }

    function max () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    }

    var now = Date.now || function () {
        return +(new Date());
    };

    function Duration (duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 36e5; // 1000 * 60 * 60
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = locale_locales__getLocale();

        this._bubble();
    }

    function isDuration (obj) {
        return obj instanceof Duration;
    }

    // FORMATTING

    function offset (token, separator) {
        addFormatToken(token, 0, 0, function () {
            var offset = this.utcOffset();
            var sign = '+';
            if (offset < 0) {
                offset = -offset;
                sign = '-';
            }
            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
        });
    }

    offset('Z', ':');
    offset('ZZ', '');

    // PARSING

    addRegexToken('Z',  matchShortOffset);
    addRegexToken('ZZ', matchShortOffset);
    addParseToken(['Z', 'ZZ'], function (input, array, config) {
        config._useUTC = true;
        config._tzm = offsetFromString(matchShortOffset, input);
    });

    // HELPERS

    // timezone chunker
    // '+10:00' > ['10',  '00']
    // '-1530'  > ['-15', '30']
    var chunkOffset = /([\+\-]|\d\d)/gi;

    function offsetFromString(matcher, string) {
        var matches = ((string || '').match(matcher) || []);
        var chunk   = matches[matches.length - 1] || [];
        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];
        var minutes = +(parts[1] * 60) + toInt(parts[2]);

        return parts[0] === '+' ? minutes : -minutes;
    }

    // Return a moment from input, that is local/utc/zone equivalent to model.
    function cloneWithOffset(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (isMoment(input) || isDate(input) ? +input : +local__createLocal(input)) - (+res);
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(+res._d + diff);
            utils_hooks__hooks.updateOffset(res, false);
            return res;
        } else {
            return local__createLocal(input).local();
        }
    }

    function getDateOffset (m) {
        // On Firefox.24 Date#getTimezoneOffset returns a floating point.
        // https://github.com/moment/moment/pull/1871
        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
    }

    // HOOKS

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    utils_hooks__hooks.updateOffset = function () {};

    // MOMENTS

    // keepLocalTime = true means only change the timezone, without
    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
    // +0200, so we adjust the time as needed, to be valid.
    //
    // Keeping the time actually adds/subtracts (one hour)
    // from the actual represented time. That is why we call updateOffset
    // a second time. In case it wants us to change the offset again
    // _changeInProgress == true case, then we have to adjust, because
    // there is no such time in the given timezone.
    function getSetOffset (input, keepLocalTime) {
        var offset = this._offset || 0,
            localAdjust;
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        if (input != null) {
            if (typeof input === 'string') {
                input = offsetFromString(matchShortOffset, input);
            } else if (Math.abs(input) < 16) {
                input = input * 60;
            }
            if (!this._isUTC && keepLocalTime) {
                localAdjust = getDateOffset(this);
            }
            this._offset = input;
            this._isUTC = true;
            if (localAdjust != null) {
                this.add(localAdjust, 'm');
            }
            if (offset !== input) {
                if (!keepLocalTime || this._changeInProgress) {
                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);
                } else if (!this._changeInProgress) {
                    this._changeInProgress = true;
                    utils_hooks__hooks.updateOffset(this, true);
                    this._changeInProgress = null;
                }
            }
            return this;
        } else {
            return this._isUTC ? offset : getDateOffset(this);
        }
    }

    function getSetZone (input, keepLocalTime) {
        if (input != null) {
            if (typeof input !== 'string') {
                input = -input;
            }

            this.utcOffset(input, keepLocalTime);

            return this;
        } else {
            return -this.utcOffset();
        }
    }

    function setOffsetToUTC (keepLocalTime) {
        return this.utcOffset(0, keepLocalTime);
    }

    function setOffsetToLocal (keepLocalTime) {
        if (this._isUTC) {
            this.utcOffset(0, keepLocalTime);
            this._isUTC = false;

            if (keepLocalTime) {
                this.subtract(getDateOffset(this), 'm');
            }
        }
        return this;
    }

    function setOffsetToParsedOffset () {
        if (this._tzm) {
            this.utcOffset(this._tzm);
        } else if (typeof this._i === 'string') {
            this.utcOffset(offsetFromString(matchOffset, this._i));
        }
        return this;
    }

    function hasAlignedHourOffset (input) {
        if (!this.isValid()) {
            return false;
        }
        input = input ? local__createLocal(input).utcOffset() : 0;

        return (this.utcOffset() - input) % 60 === 0;
    }

    function isDaylightSavingTime () {
        return (
            this.utcOffset() > this.clone().month(0).utcOffset() ||
            this.utcOffset() > this.clone().month(5).utcOffset()
        );
    }

    function isDaylightSavingTimeShifted () {
        if (!isUndefined(this._isDSTShifted)) {
            return this._isDSTShifted;
        }

        var c = {};

        copyConfig(c, this);
        c = prepareConfig(c);

        if (c._a) {
            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);
            this._isDSTShifted = this.isValid() &&
                compareArrays(c._a, other.toArray()) > 0;
        } else {
            this._isDSTShifted = false;
        }

        return this._isDSTShifted;
    }

    function isLocal () {
        return this.isValid() ? !this._isUTC : false;
    }

    function isUtcOffset () {
        return this.isValid() ? this._isUTC : false;
    }

    function isUtc () {
        return this.isValid() ? this._isUTC && this._offset === 0 : false;
    }

    // ASP.NET json date format regex
    var aspNetRegex = /(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;

    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
    var isoRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;

    function create__createDuration (input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            diffRes;

        if (isDuration(input)) {
            duration = {
                ms : input._milliseconds,
                d  : input._days,
                M  : input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y  : 0,
                d  : toInt(match[DATE])        * sign,
                h  : toInt(match[HOUR])        * sign,
                m  : toInt(match[MINUTE])      * sign,
                s  : toInt(match[SECOND])      * sign,
                ms : toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = isoRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y : parseIso(match[2], sign),
                M : parseIso(match[3], sign),
                d : parseIso(match[4], sign),
                h : parseIso(match[5], sign),
                m : parseIso(match[6], sign),
                s : parseIso(match[7], sign),
                w : parseIso(match[8], sign)
            };
        } else if (duration == null) {// checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    }

    create__createDuration.fn = Duration.prototype;

    function parseIso (inp, sign) {
        // We'd normally use ~~inp for this, but unfortunately it also
        // converts floats to ints.
        // inp may be undefined, so careful calling replace on it.
        var res = inp && parseFloat(inp.replace(',', '.'));
        // apply sign while we're at it
        return (isNaN(res) ? 0 : res) * sign;
    }

    function positiveMomentsDifference(base, other) {
        var res = {milliseconds: 0, months: 0};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        if (!(base.isValid() && other.isValid())) {
            return {milliseconds: 0, months: 0};
        }

        other = cloneWithOffset(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    // TODO: remove 'name' arg after deprecation is removed
    function createAdder(direction, name) {
        return function (val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');
                tmp = val; val = period; period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = create__createDuration(val, period);
            add_subtract__addSubtract(this, dur, direction);
            return this;
        };
    }

    function add_subtract__addSubtract (mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;

        if (!mom.isValid()) {
            // No op
            return;
        }

        updateOffset = updateOffset == null ? true : updateOffset;

        if (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        if (days) {
            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);
        }
        if (months) {
            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            utils_hooks__hooks.updateOffset(mom, days || months);
        }
    }

    var add_subtract__add      = createAdder(1, 'add');
    var add_subtract__subtract = createAdder(-1, 'subtract');

    function moment_calendar__calendar (time, formats) {
        // We want to compare the start of today, vs this.
        // Getting start-of-today depends on whether we're local/utc/offset or not.
        var now = time || local__createLocal(),
            sod = cloneWithOffset(now, this).startOf('day'),
            diff = this.diff(sod, 'days', true),
            format = diff < -6 ? 'sameElse' :
                diff < -1 ? 'lastWeek' :
                diff < 0 ? 'lastDay' :
                diff < 1 ? 'sameDay' :
                diff < 2 ? 'nextDay' :
                diff < 7 ? 'nextWeek' : 'sameElse';

        var output = formats && (isFunction(formats[format]) ? formats[format]() : formats[format]);

        return this.format(output || this.localeData().calendar(format, this, local__createLocal(now)));
    }

    function clone () {
        return new Moment(this);
    }

    function isAfter (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return +this > +localInput;
        } else {
            return +localInput < +this.clone().startOf(units);
        }
    }

    function isBefore (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
        if (units === 'millisecond') {
            return +this < +localInput;
        } else {
            return +this.clone().endOf(units) < +localInput;
        }
    }

    function isBetween (from, to, units) {
        return this.isAfter(from, units) && this.isBefore(to, units);
    }

    function isSame (input, units) {
        var localInput = isMoment(input) ? input : local__createLocal(input),
            inputMs;
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units || 'millisecond');
        if (units === 'millisecond') {
            return +this === +localInput;
        } else {
            inputMs = +localInput;
            return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));
        }
    }

    function isSameOrAfter (input, units) {
        return this.isSame(input, units) || this.isAfter(input,units);
    }

    function isSameOrBefore (input, units) {
        return this.isSame(input, units) || this.isBefore(input,units);
    }

    function diff (input, units, asFloat) {
        var that,
            zoneDelta,
            delta, output;

        if (!this.isValid()) {
            return NaN;
        }

        that = cloneWithOffset(input, this);

        if (!that.isValid()) {
            return NaN;
        }

        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;

        units = normalizeUnits(units);

        if (units === 'year' || units === 'month' || units === 'quarter') {
            output = monthDiff(this, that);
            if (units === 'quarter') {
                output = output / 3;
            } else if (units === 'year') {
                output = output / 12;
            }
        } else {
            delta = this - that;
            output = units === 'second' ? delta / 1e3 : // 1000
                units === 'minute' ? delta / 6e4 : // 1000 * 60
                units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60
                units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst
                units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst
                delta;
        }
        return asFloat ? output : absFloor(output);
    }

    function monthDiff (a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        return -(wholeMonthDiff + adjust);
    }

    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';

    function toString () {
        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
    }

    function moment_format__toISOString () {
        var m = this.clone().utc();
        if (0 < m.year() && m.year() <= 9999) {
            if (isFunction(Date.prototype.toISOString)) {
                // native implementation is ~50x faster, use it when we can
                return this.toDate().toISOString();
            } else {
                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        } else {
            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
        }
    }

    function format (inputString) {
        var output = formatMoment(this, inputString || utils_hooks__hooks.defaultFormat);
        return this.localeData().postformat(output);
    }

    function from (time, withoutSuffix) {
        if (this.isValid() &&
                ((isMoment(time) && time.isValid()) ||
                 local__createLocal(time).isValid())) {
            return create__createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function fromNow (withoutSuffix) {
        return this.from(local__createLocal(), withoutSuffix);
    }

    function to (time, withoutSuffix) {
        if (this.isValid() &&
                ((isMoment(time) && time.isValid()) ||
                 local__createLocal(time).isValid())) {
            return create__createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function toNow (withoutSuffix) {
        return this.to(local__createLocal(), withoutSuffix);
    }

    // If passed a locale key, it will set the locale for this
    // instance.  Otherwise, it will return the locale configuration
    // variables for this instance.
    function locale (key) {
        var newLocaleData;

        if (key === undefined) {
            return this._locale._abbr;
        } else {
            newLocaleData = locale_locales__getLocale(key);
            if (newLocaleData != null) {
                this._locale = newLocaleData;
            }
            return this;
        }
    }

    var lang = deprecate(
        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
        function (key) {
            if (key === undefined) {
                return this.localeData();
            } else {
                return this.locale(key);
            }
        }
    );

    function localeData () {
        return this._locale;
    }

    function startOf (units) {
        units = normalizeUnits(units);
        // the following switch intentionally omits break keywords
        // to utilize falling through the cases.
        switch (units) {
        case 'year':
            this.month(0);
            /* falls through */
        case 'quarter':
        case 'month':
            this.date(1);
            /* falls through */
        case 'week':
        case 'isoWeek':
        case 'day':
            this.hours(0);
            /* falls through */
        case 'hour':
            this.minutes(0);
            /* falls through */
        case 'minute':
            this.seconds(0);
            /* falls through */
        case 'second':
            this.milliseconds(0);
        }

        // weeks are a special case
        if (units === 'week') {
            this.weekday(0);
        }
        if (units === 'isoWeek') {
            this.isoWeekday(1);
        }

        // quarters are also special
        if (units === 'quarter') {
            this.month(Math.floor(this.month() / 3) * 3);
        }

        return this;
    }

    function endOf (units) {
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond') {
            return this;
        }
        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
    }

    function to_type__valueOf () {
        return +this._d - ((this._offset || 0) * 60000);
    }

    function unix () {
        return Math.floor(+this / 1000);
    }

    function toDate () {
        return this._offset ? new Date(+this) : this._d;
    }

    function toArray () {
        var m = this;
        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
    }

    function toObject () {
        var m = this;
        return {
            years: m.year(),
            months: m.month(),
            date: m.date(),
            hours: m.hours(),
            minutes: m.minutes(),
            seconds: m.seconds(),
            milliseconds: m.milliseconds()
        };
    }

    function toJSON () {
        // JSON.stringify(new Date(NaN)) === 'null'
        return this.isValid() ? this.toISOString() : 'null';
    }

    function moment_valid__isValid () {
        return valid__isValid(this);
    }

    function parsingFlags () {
        return extend({}, getParsingFlags(this));
    }

    function invalidAt () {
        return getParsingFlags(this).overflow;
    }

    function creationData() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }

    // FORMATTING

    addFormatToken(0, ['gg', 2], 0, function () {
        return this.weekYear() % 100;
    });

    addFormatToken(0, ['GG', 2], 0, function () {
        return this.isoWeekYear() % 100;
    });

    function addWeekYearFormatToken (token, getter) {
        addFormatToken(0, [token, token.length], 0, getter);
    }

    addWeekYearFormatToken('gggg',     'weekYear');
    addWeekYearFormatToken('ggggg',    'weekYear');
    addWeekYearFormatToken('GGGG',  'isoWeekYear');
    addWeekYearFormatToken('GGGGG', 'isoWeekYear');

    // ALIASES

    addUnitAlias('weekYear', 'gg');
    addUnitAlias('isoWeekYear', 'GG');

    // PARSING

    addRegexToken('G',      matchSigned);
    addRegexToken('g',      matchSigned);
    addRegexToken('GG',     match1to2, match2);
    addRegexToken('gg',     match1to2, match2);
    addRegexToken('GGGG',   match1to4, match4);
    addRegexToken('gggg',   match1to4, match4);
    addRegexToken('GGGGG',  match1to6, match6);
    addRegexToken('ggggg',  match1to6, match6);

    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
        week[token.substr(0, 2)] = toInt(input);
    });

    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // MOMENTS

    function getSetWeekYear (input) {
        return getSetWeekYearHelper.call(this,
                input,
                this.week(),
                this.weekday(),
                this.localeData()._week.dow,
                this.localeData()._week.doy);
    }

    function getSetISOWeekYear (input) {
        return getSetWeekYearHelper.call(this,
                input, this.isoWeek(), this.isoWeekday(), 1, 4);
    }

    function getISOWeeksInYear () {
        return weeksInYear(this.year(), 1, 4);
    }

    function getWeeksInYear () {
        var weekInfo = this.localeData()._week;
        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
    }

    function getSetWeekYearHelper(input, week, weekday, dow, doy) {
        var weeksTarget;
        if (input == null) {
            return weekOfYear(this, dow, doy).year;
        } else {
            weeksTarget = weeksInYear(input, dow, doy);
            if (week > weeksTarget) {
                week = weeksTarget;
            }
            return setWeekAll.call(this, input, week, weekday, dow, doy);
        }
    }

    function setWeekAll(weekYear, week, weekday, dow, doy) {
        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);

        // console.log("got", weekYear, week, weekday, "set", date.toISOString());
        this.year(date.getUTCFullYear());
        this.month(date.getUTCMonth());
        this.date(date.getUTCDate());
        return this;
    }

    // FORMATTING

    addFormatToken('Q', 0, 'Qo', 'quarter');

    // ALIASES

    addUnitAlias('quarter', 'Q');

    // PARSING

    addRegexToken('Q', match1);
    addParseToken('Q', function (input, array) {
        array[MONTH] = (toInt(input) - 1) * 3;
    });

    // MOMENTS

    function getSetQuarter (input) {
        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
    }

    // FORMATTING

    addFormatToken('w', ['ww', 2], 'wo', 'week');
    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

    // ALIASES

    addUnitAlias('week', 'w');
    addUnitAlias('isoWeek', 'W');

    // PARSING

    addRegexToken('w',  match1to2);
    addRegexToken('ww', match1to2, match2);
    addRegexToken('W',  match1to2);
    addRegexToken('WW', match1to2, match2);

    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    });

    // HELPERS

    // LOCALES

    function localeWeek (mom) {
        return weekOfYear(mom, this._week.dow, this._week.doy).week;
    }

    var defaultLocaleWeek = {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    };

    function localeFirstDayOfWeek () {
        return this._week.dow;
    }

    function localeFirstDayOfYear () {
        return this._week.doy;
    }

    // MOMENTS

    function getSetWeek (input) {
        var week = this.localeData().week(this);
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    function getSetISOWeek (input) {
        var week = weekOfYear(this, 1, 4).week;
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    // FORMATTING

    addFormatToken('D', ['DD', 2], 'Do', 'date');

    // ALIASES

    addUnitAlias('date', 'D');

    // PARSING

    addRegexToken('D',  match1to2);
    addRegexToken('DD', match1to2, match2);
    addRegexToken('Do', function (isStrict, locale) {
        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;
    });

    addParseToken(['D', 'DD'], DATE);
    addParseToken('Do', function (input, array) {
        array[DATE] = toInt(input.match(match1to2)[0], 10);
    });

    // MOMENTS

    var getSetDayOfMonth = makeGetSet('Date', true);

    // FORMATTING

    addFormatToken('d', 0, 'do', 'day');

    addFormatToken('dd', 0, 0, function (format) {
        return this.localeData().weekdaysMin(this, format);
    });

    addFormatToken('ddd', 0, 0, function (format) {
        return this.localeData().weekdaysShort(this, format);
    });

    addFormatToken('dddd', 0, 0, function (format) {
        return this.localeData().weekdays(this, format);
    });

    addFormatToken('e', 0, 0, 'weekday');
    addFormatToken('E', 0, 0, 'isoWeekday');

    // ALIASES

    addUnitAlias('day', 'd');
    addUnitAlias('weekday', 'e');
    addUnitAlias('isoWeekday', 'E');

    // PARSING

    addRegexToken('d',    match1to2);
    addRegexToken('e',    match1to2);
    addRegexToken('E',    match1to2);
    addRegexToken('dd',   matchWord);
    addRegexToken('ddd',  matchWord);
    addRegexToken('dddd', matchWord);

    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
        var weekday = config._locale.weekdaysParse(input, token, config._strict);
        // if we didn't get a weekday name, mark the date as invalid
        if (weekday != null) {
            week.d = weekday;
        } else {
            getParsingFlags(config).invalidWeekday = input;
        }
    });

    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
        week[token] = toInt(input);
    });

    // HELPERS

    function parseWeekday(input, locale) {
        if (typeof input !== 'string') {
            return input;
        }

        if (!isNaN(input)) {
            return parseInt(input, 10);
        }

        input = locale.weekdaysParse(input);
        if (typeof input === 'number') {
            return input;
        }

        return null;
    }

    // LOCALES

    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');
    function localeWeekdays (m, format) {
        return isArray(this._weekdays) ? this._weekdays[m.day()] :
            this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];
    }

    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');
    function localeWeekdaysShort (m) {
        return this._weekdaysShort[m.day()];
    }

    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');
    function localeWeekdaysMin (m) {
        return this._weekdaysMin[m.day()];
    }

    function localeWeekdaysParse (weekdayName, format, strict) {
        var i, mom, regex;

        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._minWeekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._fullWeekdaysParse = [];
        }

        for (i = 0; i < 7; i++) {
            // make the regex if we don't have it already

            mom = local__createLocal([2000, 1]).day(i);
            if (strict && !this._fullWeekdaysParse[i]) {
                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\.?') + '$', 'i');
                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\.?') + '$', 'i');
                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\.?') + '$', 'i');
            }
            if (!this._weekdaysParse[i]) {
                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function getSetDayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (input != null) {
            input = parseWeekday(input, this.localeData());
            return this.add(input - day, 'd');
        } else {
            return day;
        }
    }

    function getSetLocaleDayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return input == null ? weekday : this.add(input - weekday, 'd');
    }

    function getSetISODayOfWeek (input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        // behaves the same as moment#day except
        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
        // as a setter, sunday should belong to the previous week.
        return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);
    }

    // FORMATTING

    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

    // ALIASES

    addUnitAlias('dayOfYear', 'DDD');

    // PARSING

    addRegexToken('DDD',  match1to3);
    addRegexToken('DDDD', match3);
    addParseToken(['DDD', 'DDDD'], function (input, array, config) {
        config._dayOfYear = toInt(input);
    });

    // HELPERS

    // MOMENTS

    function getSetDayOfYear (input) {
        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
    }

    // FORMATTING

    function hFormat() {
        return this.hours() % 12 || 12;
    }

    addFormatToken('H', ['HH', 2], 0, 'hour');
    addFormatToken('h', ['hh', 2], 0, hFormat);

    addFormatToken('hmm', 0, 0, function () {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
    });

    addFormatToken('hmmss', 0, 0, function () {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    addFormatToken('Hmm', 0, 0, function () {
        return '' + this.hours() + zeroFill(this.minutes(), 2);
    });

    addFormatToken('Hmmss', 0, 0, function () {
        return '' + this.hours() + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    function meridiem (token, lowercase) {
        addFormatToken(token, 0, 0, function () {
            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
        });
    }

    meridiem('a', true);
    meridiem('A', false);

    // ALIASES

    addUnitAlias('hour', 'h');

    // PARSING

    function matchMeridiem (isStrict, locale) {
        return locale._meridiemParse;
    }

    addRegexToken('a',  matchMeridiem);
    addRegexToken('A',  matchMeridiem);
    addRegexToken('H',  match1to2);
    addRegexToken('h',  match1to2);
    addRegexToken('HH', match1to2, match2);
    addRegexToken('hh', match1to2, match2);

    addRegexToken('hmm', match3to4);
    addRegexToken('hmmss', match5to6);
    addRegexToken('Hmm', match3to4);
    addRegexToken('Hmmss', match5to6);

    addParseToken(['H', 'HH'], HOUR);
    addParseToken(['a', 'A'], function (input, array, config) {
        config._isPm = config._locale.isPM(input);
        config._meridiem = input;
    });
    addParseToken(['h', 'hh'], function (input, array, config) {
        array[HOUR] = toInt(input);
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmm', function (input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmmss', function (input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('Hmm', function (input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
    });
    addParseToken('Hmmss', function (input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
    });

    // LOCALES

    function localeIsPM (input) {
        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
        // Using charAt should be more compatible.
        return ((input + '').toLowerCase().charAt(0) === 'p');
    }

    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;
    function localeMeridiem (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    }


    // MOMENTS

    // Setting the hour should keep the time, because the user explicitly
    // specified which hour he wants. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    var getSetHour = makeGetSet('Hours', true);

    // FORMATTING

    addFormatToken('m', ['mm', 2], 0, 'minute');

    // ALIASES

    addUnitAlias('minute', 'm');

    // PARSING

    addRegexToken('m',  match1to2);
    addRegexToken('mm', match1to2, match2);
    addParseToken(['m', 'mm'], MINUTE);

    // MOMENTS

    var getSetMinute = makeGetSet('Minutes', false);

    // FORMATTING

    addFormatToken('s', ['ss', 2], 0, 'second');

    // ALIASES

    addUnitAlias('second', 's');

    // PARSING

    addRegexToken('s',  match1to2);
    addRegexToken('ss', match1to2, match2);
    addParseToken(['s', 'ss'], SECOND);

    // MOMENTS

    var getSetSecond = makeGetSet('Seconds', false);

    // FORMATTING

    addFormatToken('S', 0, 0, function () {
        return ~~(this.millisecond() / 100);
    });

    addFormatToken(0, ['SS', 2], 0, function () {
        return ~~(this.millisecond() / 10);
    });

    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
    addFormatToken(0, ['SSSS', 4], 0, function () {
        return this.millisecond() * 10;
    });
    addFormatToken(0, ['SSSSS', 5], 0, function () {
        return this.millisecond() * 100;
    });
    addFormatToken(0, ['SSSSSS', 6], 0, function () {
        return this.millisecond() * 1000;
    });
    addFormatToken(0, ['SSSSSSS', 7], 0, function () {
        return this.millisecond() * 10000;
    });
    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
        return this.millisecond() * 100000;
    });
    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
        return this.millisecond() * 1000000;
    });


    // ALIASES

    addUnitAlias('millisecond', 'ms');

    // PARSING

    addRegexToken('S',    match1to3, match1);
    addRegexToken('SS',   match1to3, match2);
    addRegexToken('SSS',  match1to3, match3);

    var token;
    for (token = 'SSSS'; token.length <= 9; token += 'S') {
        addRegexToken(token, matchUnsigned);
    }

    function parseMs(input, array) {
        array[MILLISECOND] = toInt(('0.' + input) * 1000);
    }

    for (token = 'S'; token.length <= 9; token += 'S') {
        addParseToken(token, parseMs);
    }
    // MOMENTS

    var getSetMillisecond = makeGetSet('Milliseconds', false);

    // FORMATTING

    addFormatToken('z',  0, 0, 'zoneAbbr');
    addFormatToken('zz', 0, 0, 'zoneName');

    // MOMENTS

    function getZoneAbbr () {
        return this._isUTC ? 'UTC' : '';
    }

    function getZoneName () {
        return this._isUTC ? 'Coordinated Universal Time' : '';
    }

    var momentPrototype__proto = Moment.prototype;

    momentPrototype__proto.add               = add_subtract__add;
    momentPrototype__proto.calendar          = moment_calendar__calendar;
    momentPrototype__proto.clone             = clone;
    momentPrototype__proto.diff              = diff;
    momentPrototype__proto.endOf             = endOf;
    momentPrototype__proto.format            = format;
    momentPrototype__proto.from              = from;
    momentPrototype__proto.fromNow           = fromNow;
    momentPrototype__proto.to                = to;
    momentPrototype__proto.toNow             = toNow;
    momentPrototype__proto.get               = getSet;
    momentPrototype__proto.invalidAt         = invalidAt;
    momentPrototype__proto.isAfter           = isAfter;
    momentPrototype__proto.isBefore          = isBefore;
    momentPrototype__proto.isBetween         = isBetween;
    momentPrototype__proto.isSame            = isSame;
    momentPrototype__proto.isSameOrAfter     = isSameOrAfter;
    momentPrototype__proto.isSameOrBefore    = isSameOrBefore;
    momentPrototype__proto.isValid           = moment_valid__isValid;
    momentPrototype__proto.lang              = lang;
    momentPrototype__proto.locale            = locale;
    momentPrototype__proto.localeData        = localeData;
    momentPrototype__proto.max               = prototypeMax;
    momentPrototype__proto.min               = prototypeMin;
    momentPrototype__proto.parsingFlags      = parsingFlags;
    momentPrototype__proto.set               = getSet;
    momentPrototype__proto.startOf           = startOf;
    momentPrototype__proto.subtract          = add_subtract__subtract;
    momentPrototype__proto.toArray           = toArray;
    momentPrototype__proto.toObject          = toObject;
    momentPrototype__proto.toDate            = toDate;
    momentPrototype__proto.toISOString       = moment_format__toISOString;
    momentPrototype__proto.toJSON            = toJSON;
    momentPrototype__proto.toString          = toString;
    momentPrototype__proto.unix              = unix;
    momentPrototype__proto.valueOf           = to_type__valueOf;
    momentPrototype__proto.creationData      = creationData;

    // Year
    momentPrototype__proto.year       = getSetYear;
    momentPrototype__proto.isLeapYear = getIsLeapYear;

    // Week Year
    momentPrototype__proto.weekYear    = getSetWeekYear;
    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;

    // Quarter
    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;

    // Month
    momentPrototype__proto.month       = getSetMonth;
    momentPrototype__proto.daysInMonth = getDaysInMonth;

    // Week
    momentPrototype__proto.week           = momentPrototype__proto.weeks        = getSetWeek;
    momentPrototype__proto.isoWeek        = momentPrototype__proto.isoWeeks     = getSetISOWeek;
    momentPrototype__proto.weeksInYear    = getWeeksInYear;
    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;

    // Day
    momentPrototype__proto.date       = getSetDayOfMonth;
    momentPrototype__proto.day        = momentPrototype__proto.days             = getSetDayOfWeek;
    momentPrototype__proto.weekday    = getSetLocaleDayOfWeek;
    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;
    momentPrototype__proto.dayOfYear  = getSetDayOfYear;

    // Hour
    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;

    // Minute
    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;

    // Second
    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;

    // Millisecond
    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;

    // Offset
    momentPrototype__proto.utcOffset            = getSetOffset;
    momentPrototype__proto.utc                  = setOffsetToUTC;
    momentPrototype__proto.local                = setOffsetToLocal;
    momentPrototype__proto.parseZone            = setOffsetToParsedOffset;
    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;
    momentPrototype__proto.isDST                = isDaylightSavingTime;
    momentPrototype__proto.isDSTShifted         = isDaylightSavingTimeShifted;
    momentPrototype__proto.isLocal              = isLocal;
    momentPrototype__proto.isUtcOffset          = isUtcOffset;
    momentPrototype__proto.isUtc                = isUtc;
    momentPrototype__proto.isUTC                = isUtc;

    // Timezone
    momentPrototype__proto.zoneAbbr = getZoneAbbr;
    momentPrototype__proto.zoneName = getZoneName;

    // Deprecations
    momentPrototype__proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
    momentPrototype__proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);
    momentPrototype__proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779', getSetZone);

    var momentPrototype = momentPrototype__proto;

    function moment__createUnix (input) {
        return local__createLocal(input * 1000);
    }

    function moment__createInZone () {
        return local__createLocal.apply(null, arguments).parseZone();
    }

    var defaultCalendar = {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    };

    function locale_calendar__calendar (key, mom, now) {
        var output = this._calendar[key];
        return isFunction(output) ? output.call(mom, now) : output;
    }

    var defaultLongDateFormat = {
        LTS  : 'h:mm:ss A',
        LT   : 'h:mm A',
        L    : 'MM/DD/YYYY',
        LL   : 'MMMM D, YYYY',
        LLL  : 'MMMM D, YYYY h:mm A',
        LLLL : 'dddd, MMMM D, YYYY h:mm A'
    };

    function longDateFormat (key) {
        var format = this._longDateFormat[key],
            formatUpper = this._longDateFormat[key.toUpperCase()];

        if (format || !formatUpper) {
            return format;
        }

        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {
            return val.slice(1);
        });

        return this._longDateFormat[key];
    }

    var defaultInvalidDate = 'Invalid date';

    function invalidDate () {
        return this._invalidDate;
    }

    var defaultOrdinal = '%d';
    var defaultOrdinalParse = /\d{1,2}/;

    function ordinal (number) {
        return this._ordinal.replace('%d', number);
    }

    function preParsePostFormat (string) {
        return string;
    }

    var defaultRelativeTime = {
        future : 'in %s',
        past   : '%s ago',
        s  : 'a few seconds',
        m  : 'a minute',
        mm : '%d minutes',
        h  : 'an hour',
        hh : '%d hours',
        d  : 'a day',
        dd : '%d days',
        M  : 'a month',
        MM : '%d months',
        y  : 'a year',
        yy : '%d years'
    };

    function relative__relativeTime (number, withoutSuffix, string, isFuture) {
        var output = this._relativeTime[string];
        return (isFunction(output)) ?
            output(number, withoutSuffix, string, isFuture) :
            output.replace(/%d/i, number);
    }

    function pastFuture (diff, output) {
        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
        return isFunction(format) ? format(output) : format.replace(/%s/i, output);
    }

    function locale_set__set (config) {
        var prop, i;
        for (i in config) {
            prop = config[i];
            if (isFunction(prop)) {
                this[i] = prop;
            } else {
                this['_' + i] = prop;
            }
        }
        // Lenient ordinal parsing accepts just a number in addition to
        // number + (possibly) stuff coming from _ordinalParseLenient.
        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\d{1,2}/).source);
    }

    var prototype__proto = Locale.prototype;

    prototype__proto._calendar       = defaultCalendar;
    prototype__proto.calendar        = locale_calendar__calendar;
    prototype__proto._longDateFormat = defaultLongDateFormat;
    prototype__proto.longDateFormat  = longDateFormat;
    prototype__proto._invalidDate    = defaultInvalidDate;
    prototype__proto.invalidDate     = invalidDate;
    prototype__proto._ordinal        = defaultOrdinal;
    prototype__proto.ordinal         = ordinal;
    prototype__proto._ordinalParse   = defaultOrdinalParse;
    prototype__proto.preparse        = preParsePostFormat;
    prototype__proto.postformat      = preParsePostFormat;
    prototype__proto._relativeTime   = defaultRelativeTime;
    prototype__proto.relativeTime    = relative__relativeTime;
    prototype__proto.pastFuture      = pastFuture;
    prototype__proto.set             = locale_set__set;

    // Month
    prototype__proto.months       =        localeMonths;
    prototype__proto._months      = defaultLocaleMonths;
    prototype__proto.monthsShort  =        localeMonthsShort;
    prototype__proto._monthsShort = defaultLocaleMonthsShort;
    prototype__proto.monthsParse  =        localeMonthsParse;

    // Week
    prototype__proto.week = localeWeek;
    prototype__proto._week = defaultLocaleWeek;
    prototype__proto.firstDayOfYear = localeFirstDayOfYear;
    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;

    // Day of Week
    prototype__proto.weekdays       =        localeWeekdays;
    prototype__proto._weekdays      = defaultLocaleWeekdays;
    prototype__proto.weekdaysMin    =        localeWeekdaysMin;
    prototype__proto._weekdaysMin   = defaultLocaleWeekdaysMin;
    prototype__proto.weekdaysShort  =        localeWeekdaysShort;
    prototype__proto._weekdaysShort = defaultLocaleWeekdaysShort;
    prototype__proto.weekdaysParse  =        localeWeekdaysParse;

    // Hours
    prototype__proto.isPM = localeIsPM;
    prototype__proto._meridiemParse = defaultLocaleMeridiemParse;
    prototype__proto.meridiem = localeMeridiem;

    function lists__get (format, index, field, setter) {
        var locale = locale_locales__getLocale();
        var utc = create_utc__createUTC().set(setter, index);
        return locale[field](utc, format);
    }

    function list (format, index, field, count, setter) {
        if (typeof format === 'number') {
            index = format;
            format = undefined;
        }

        format = format || '';

        if (index != null) {
            return lists__get(format, index, field, setter);
        }

        var i;
        var out = [];
        for (i = 0; i < count; i++) {
            out[i] = lists__get(format, i, field, setter);
        }
        return out;
    }

    function lists__listMonths (format, index) {
        return list(format, index, 'months', 12, 'month');
    }

    function lists__listMonthsShort (format, index) {
        return list(format, index, 'monthsShort', 12, 'month');
    }

    function lists__listWeekdays (format, index) {
        return list(format, index, 'weekdays', 7, 'day');
    }

    function lists__listWeekdaysShort (format, index) {
        return list(format, index, 'weekdaysShort', 7, 'day');
    }

    function lists__listWeekdaysMin (format, index) {
        return list(format, index, 'weekdaysMin', 7, 'day');
    }

    locale_locales__getSetGlobalLocale('en', {
        monthsParse : [/^jan/i, /^feb/i, /^mar/i, /^apr/i, /^may/i, /^jun/i, /^jul/i, /^aug/i, /^sep/i, /^oct/i, /^nov/i, /^dec/i],
        longMonthsParse : [/^january$/i, /^february$/i, /^march$/i, /^april$/i, /^may$/i, /^june$/i, /^july$/i, /^august$/i, /^september$/i, /^october$/i, /^november$/i, /^december$/i],
        shortMonthsParse : [/^jan$/i, /^feb$/i, /^mar$/i, /^apr$/i, /^may$/i, /^jun$/i, /^jul$/i, /^aug/i, /^sept?$/i, /^oct$/i, /^nov$/i, /^dec$/i],
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    // Side effect imports
    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);
    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);

    var mathAbs = Math.abs;

    function duration_abs__abs () {
        var data           = this._data;

        this._milliseconds = mathAbs(this._milliseconds);
        this._days         = mathAbs(this._days);
        this._months       = mathAbs(this._months);

        data.milliseconds  = mathAbs(data.milliseconds);
        data.seconds       = mathAbs(data.seconds);
        data.minutes       = mathAbs(data.minutes);
        data.hours         = mathAbs(data.hours);
        data.months        = mathAbs(data.months);
        data.years         = mathAbs(data.years);

        return this;
    }

    function duration_add_subtract__addSubtract (duration, input, value, direction) {
        var other = create__createDuration(input, value);

        duration._milliseconds += direction * other._milliseconds;
        duration._days         += direction * other._days;
        duration._months       += direction * other._months;

        return duration._bubble();
    }

    // supports only 2.0-style add(1, 's') or add(duration)
    function duration_add_subtract__add (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, 1);
    }

    // supports only 2.0-style subtract(1, 's') or subtract(duration)
    function duration_add_subtract__subtract (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, -1);
    }

    function absCeil (number) {
        if (number < 0) {
            return Math.floor(number);
        } else {
            return Math.ceil(number);
        }
    }

    function bubble () {
        var milliseconds = this._milliseconds;
        var days         = this._days;
        var months       = this._months;
        var data         = this._data;
        var seconds, minutes, hours, years, monthsFromDays;

        // if we have a mix of positive and negative values, bubble down first
        // check: https://github.com/moment/moment/issues/2166
        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||
                (milliseconds <= 0 && days <= 0 && months <= 0))) {
            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
            days = 0;
            months = 0;
        }

        // The following code bubbles up values, see the tests for
        // examples of what that means.
        data.milliseconds = milliseconds % 1000;

        seconds           = absFloor(milliseconds / 1000);
        data.seconds      = seconds % 60;

        minutes           = absFloor(seconds / 60);
        data.minutes      = minutes % 60;

        hours             = absFloor(minutes / 60);
        data.hours        = hours % 24;

        days += absFloor(hours / 24);

        // convert days to months
        monthsFromDays = absFloor(daysToMonths(days));
        months += monthsFromDays;
        days -= absCeil(monthsToDays(monthsFromDays));

        // 12 months -> 1 year
        years = absFloor(months / 12);
        months %= 12;

        data.days   = days;
        data.months = months;
        data.years  = years;

        return this;
    }

    function daysToMonths (days) {
        // 400 years have 146097 days (taking into account leap year rules)
        // 400 years have 12 months === 4800
        return days * 4800 / 146097;
    }

    function monthsToDays (months) {
        // the reverse of daysToMonths
        return months * 146097 / 4800;
    }

    function as (units) {
        var days;
        var months;
        var milliseconds = this._milliseconds;

        units = normalizeUnits(units);

        if (units === 'month' || units === 'year') {
            days   = this._days   + milliseconds / 864e5;
            months = this._months + daysToMonths(days);
            return units === 'month' ? months : months / 12;
        } else {
            // handle milliseconds separately because of floating point math errors (issue #1867)
            days = this._days + Math.round(monthsToDays(this._months));
            switch (units) {
                case 'week'   : return days / 7     + milliseconds / 6048e5;
                case 'day'    : return days         + milliseconds / 864e5;
                case 'hour'   : return days * 24    + milliseconds / 36e5;
                case 'minute' : return days * 1440  + milliseconds / 6e4;
                case 'second' : return days * 86400 + milliseconds / 1000;
                // Math.floor prevents floating point math errors here
                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;
                default: throw new Error('Unknown unit ' + units);
            }
        }
    }

    // TODO: Use this.as('ms')?
    function duration_as__valueOf () {
        return (
            this._milliseconds +
            this._days * 864e5 +
            (this._months % 12) * 2592e6 +
            toInt(this._months / 12) * 31536e6
        );
    }

    function makeAs (alias) {
        return function () {
            return this.as(alias);
        };
    }

    var asMilliseconds = makeAs('ms');
    var asSeconds      = makeAs('s');
    var asMinutes      = makeAs('m');
    var asHours        = makeAs('h');
    var asDays         = makeAs('d');
    var asWeeks        = makeAs('w');
    var asMonths       = makeAs('M');
    var asYears        = makeAs('y');

    function duration_get__get (units) {
        units = normalizeUnits(units);
        return this[units + 's']();
    }

    function makeGetter(name) {
        return function () {
            return this._data[name];
        };
    }

    var milliseconds = makeGetter('milliseconds');
    var seconds      = makeGetter('seconds');
    var minutes      = makeGetter('minutes');
    var hours        = makeGetter('hours');
    var days         = makeGetter('days');
    var months       = makeGetter('months');
    var years        = makeGetter('years');

    function weeks () {
        return absFloor(this.days() / 7);
    }

    var round = Math.round;
    var thresholds = {
        s: 45,  // seconds to minute
        m: 45,  // minutes to hour
        h: 22,  // hours to day
        d: 26,  // days to month
        M: 11   // months to year
    };

    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function duration_humanize__relativeTime (posNegDuration, withoutSuffix, locale) {
        var duration = create__createDuration(posNegDuration).abs();
        var seconds  = round(duration.as('s'));
        var minutes  = round(duration.as('m'));
        var hours    = round(duration.as('h'));
        var days     = round(duration.as('d'));
        var months   = round(duration.as('M'));
        var years    = round(duration.as('y'));

        var a = seconds < thresholds.s && ['s', seconds]  ||
                minutes <= 1           && ['m']           ||
                minutes < thresholds.m && ['mm', minutes] ||
                hours   <= 1           && ['h']           ||
                hours   < thresholds.h && ['hh', hours]   ||
                days    <= 1           && ['d']           ||
                days    < thresholds.d && ['dd', days]    ||
                months  <= 1           && ['M']           ||
                months  < thresholds.M && ['MM', months]  ||
                years   <= 1           && ['y']           || ['yy', years];

        a[2] = withoutSuffix;
        a[3] = +posNegDuration > 0;
        a[4] = locale;
        return substituteTimeAgo.apply(null, a);
    }

    // This function allows you to set a threshold for relative time strings
    function duration_humanize__getSetRelativeTimeThreshold (threshold, limit) {
        if (thresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return thresholds[threshold];
        }
        thresholds[threshold] = limit;
        return true;
    }

    function humanize (withSuffix) {
        var locale = this.localeData();
        var output = duration_humanize__relativeTime(this, !withSuffix, locale);

        if (withSuffix) {
            output = locale.pastFuture(+this, output);
        }

        return locale.postformat(output);
    }

    var iso_string__abs = Math.abs;

    function iso_string__toISOString() {
        // for ISO strings we do not use the normal bubbling rules:
        //  * milliseconds bubble up until they become hours
        //  * days do not bubble at all
        //  * months bubble up until they become years
        // This is because there is no context-free conversion between hours and days
        // (think of clock changes)
        // and also not between days and months (28-31 days per month)
        var seconds = iso_string__abs(this._milliseconds) / 1000;
        var days         = iso_string__abs(this._days);
        var months       = iso_string__abs(this._months);
        var minutes, hours, years;

        // 3600 seconds -> 60 minutes -> 1 hour
        minutes           = absFloor(seconds / 60);
        hours             = absFloor(minutes / 60);
        seconds %= 60;
        minutes %= 60;

        // 12 months -> 1 year
        years  = absFloor(months / 12);
        months %= 12;


        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
        var Y = years;
        var M = months;
        var D = days;
        var h = hours;
        var m = minutes;
        var s = seconds;
        var total = this.asSeconds();

        if (!total) {
            // this is the same as C#'s (Noda) and python (isodate)...
            // but not other JS (goog.date)
            return 'P0D';
        }

        return (total < 0 ? '-' : '') +
            'P' +
            (Y ? Y + 'Y' : '') +
            (M ? M + 'M' : '') +
            (D ? D + 'D' : '') +
            ((h || m || s) ? 'T' : '') +
            (h ? h + 'H' : '') +
            (m ? m + 'M' : '') +
            (s ? s + 'S' : '');
    }

    var duration_prototype__proto = Duration.prototype;

    duration_prototype__proto.abs            = duration_abs__abs;
    duration_prototype__proto.add            = duration_add_subtract__add;
    duration_prototype__proto.subtract       = duration_add_subtract__subtract;
    duration_prototype__proto.as             = as;
    duration_prototype__proto.asMilliseconds = asMilliseconds;
    duration_prototype__proto.asSeconds      = asSeconds;
    duration_prototype__proto.asMinutes      = asMinutes;
    duration_prototype__proto.asHours        = asHours;
    duration_prototype__proto.asDays         = asDays;
    duration_prototype__proto.asWeeks        = asWeeks;
    duration_prototype__proto.asMonths       = asMonths;
    duration_prototype__proto.asYears        = asYears;
    duration_prototype__proto.valueOf        = duration_as__valueOf;
    duration_prototype__proto._bubble        = bubble;
    duration_prototype__proto.get            = duration_get__get;
    duration_prototype__proto.milliseconds   = milliseconds;
    duration_prototype__proto.seconds        = seconds;
    duration_prototype__proto.minutes        = minutes;
    duration_prototype__proto.hours          = hours;
    duration_prototype__proto.days           = days;
    duration_prototype__proto.weeks          = weeks;
    duration_prototype__proto.months         = months;
    duration_prototype__proto.years          = years;
    duration_prototype__proto.humanize       = humanize;
    duration_prototype__proto.toISOString    = iso_string__toISOString;
    duration_prototype__proto.toString       = iso_string__toISOString;
    duration_prototype__proto.toJSON         = iso_string__toISOString;
    duration_prototype__proto.locale         = locale;
    duration_prototype__proto.localeData     = localeData;

    // Deprecations
    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);
    duration_prototype__proto.lang = lang;

    // Side effect imports

    // FORMATTING

    addFormatToken('X', 0, 0, 'unix');
    addFormatToken('x', 0, 0, 'valueOf');

    // PARSING

    addRegexToken('x', matchSigned);
    addRegexToken('X', matchTimestamp);
    addParseToken('X', function (input, array, config) {
        config._d = new Date(parseFloat(input, 10) * 1000);
    });
    addParseToken('x', function (input, array, config) {
        config._d = new Date(toInt(input));
    });

    // Side effect imports


    utils_hooks__hooks.version = '2.11.0';

    setHookCallback(local__createLocal);

    utils_hooks__hooks.fn                    = momentPrototype;
    utils_hooks__hooks.min                   = min;
    utils_hooks__hooks.max                   = max;
    utils_hooks__hooks.now                   = now;
    utils_hooks__hooks.utc                   = create_utc__createUTC;
    utils_hooks__hooks.unix                  = moment__createUnix;
    utils_hooks__hooks.months                = lists__listMonths;
    utils_hooks__hooks.isDate                = isDate;
    utils_hooks__hooks.locale                = locale_locales__getSetGlobalLocale;
    utils_hooks__hooks.invalid               = valid__createInvalid;
    utils_hooks__hooks.duration              = create__createDuration;
    utils_hooks__hooks.isMoment              = isMoment;
    utils_hooks__hooks.weekdays              = lists__listWeekdays;
    utils_hooks__hooks.parseZone             = moment__createInZone;
    utils_hooks__hooks.localeData            = locale_locales__getLocale;
    utils_hooks__hooks.isDuration            = isDuration;
    utils_hooks__hooks.monthsShort           = lists__listMonthsShort;
    utils_hooks__hooks.weekdaysMin           = lists__listWeekdaysMin;
    utils_hooks__hooks.defineLocale          = defineLocale;
    utils_hooks__hooks.weekdaysShort         = lists__listWeekdaysShort;
    utils_hooks__hooks.normalizeUnits        = normalizeUnits;
    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;
    utils_hooks__hooks.prototype             = momentPrototype;

    var _moment = utils_hooks__hooks;

    return _moment;

}));
},{}],14:[function(require,module,exports){
/* eslint-disable no-unused-vars */
'use strict';
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

module.exports = Object.assign || function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (Object.getOwnPropertySymbols) {
			symbols = Object.getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};

},{}],15:[function(require,module,exports){
module.exports=function(n){function t(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t){"use strict";function e(n){return a.js+n[0].toUpperCase()+n.substr(1)}function i(n){return Object.keys(n).reduce(function(t,i){return-1!==s.indexOf(i)?t[e(i)]=n[i]:t[i]=n[i],t},{})}function r(n){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("safari")&&-1===t.indexOf("chrome")?!function(){var t=function(n,t,e){n[e]=n[t],delete n[t]};"flex"===n.display&&(n.display="-webkit-flex"),["alignItems","justifyContent","flexDirection","flex","flexWrap"].forEach(function(i){t(n,i,e(i))})}():-1!==navigator.appVersion.indexOf("MSIE 10")&&"flex"===n.display&&(n.display="-ms-flexbox"),n}function o(n){return Object.keys(n).reduce(function(t,e){return t[e]=r(i(n[e])),t},{})}var a=function(){var n=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||""===n.OLink&&["","o"])[1];return{dom:"ms"===t?"MS":t,lowercase:t,css:"-"+t+"-",js:"ms"===t?t:t[0].toUpperCase()+t.substr(1)}}(),s=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appearance","backfaceVisibility","backgroundClip","borderImage","borderImageSlice","boxSizing","boxShadow","contentColumns","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","perspective","perspectiveOrigin","userSelect"];t.prefix=o}]);
},{}],16:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../typings/react/react.d.ts"/>

var toolOverlayStyle = {
    background: "#000",
    opacity: .2,
    zIndex: 3,
    boxSizing: "border-box",
    backgroundClip: "padding",
    position: "absolute",
    visibility: "hidden",
    pointerEvents: "none"
};

var ToolOverlay = function (_React$Component) {
    _inherits(ToolOverlay, _React$Component);

    function ToolOverlay(props) {
        _classCallCheck(this, ToolOverlay);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ToolOverlay).call(this, props));

        _this.state = {
            style: toolOverlayStyle
        };
        return _this;
    }

    _createClass(ToolOverlay, [{
        key: "render",
        value: function render() {
            return React.createElement("div", { style: this.state.style });
        }
    }]);

    return ToolOverlay;
}(React.Component);

exports.default = ToolOverlay;

},{"react":"react"}],17:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WeaveTool = undefined;
exports.registerToolImplementation = registerToolImplementation;
exports.getToolImplementation = getToolImplementation;

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

var _ui = require("./react-ui/ui");

var _ui2 = _interopRequireDefault(_ui);

var _StandardLib = require("./utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../typings/react/react.d.ts"/>
///<reference path="../typings/react/react-dom.d.ts"/>
///<reference path="../typings/lodash/lodash.d.ts"/>
///<reference path="../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>
///<reference path="../typings/react-bootstrap/react-bootstrap.d.ts"/>

var toolRegistry = {};
var grabberStyle = {
    width: "16",
    height: "16",
    cursor: "move",
    background: "url(http://placehold.it/32x32)"
};
function registerToolImplementation(asClassName, jsClass) {
    toolRegistry[asClassName] = jsClass;
}
function getToolImplementation(asClassName) {
    return toolRegistry[asClassName];
}

var WeaveTool = exports.WeaveTool = function (_React$Component) {
    _inherits(WeaveTool, _React$Component);

    function WeaveTool(props) {
        _classCallCheck(this, WeaveTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveTool).call(this, props));

        _this.toolPath = _this.props.toolPath;
        _this.toolProps = _this.props.toolProps;
        _this.state = {
            showControls: false
        };
        var toolType = _this.toolPath ? _this.toolPath.getType() : _this.props.toolClass;
        if (toolType === "weave.visualization.tools::ExternalTool" && _this.toolPath.getType("toolClass")) {
            toolType = _this.toolPath.getState("toolClass");
        }
        if (toolType === "weavejs.core.LinkableHashMap" && _this.toolPath.getType("class")) toolType = _this.toolPath.getState("class");
        _this.ToolClass = getToolImplementation(toolType);
        return _this;
    }

    _createClass(WeaveTool, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.element = ReactDOM.findDOMNode(this.refs["toolDiv"]);
            if (React.Component.isPrototypeOf(this.ToolClass)) {
                this.tool = this.refs["tool"];
            } else {
                this.tool = new this.ToolClass(_.merge({ element: ReactDOM.findDOMNode(this.refs["toolDiv"]), toolPath: this.toolPath }, this.toolProps));
            }
            if (this.toolPath) {
                this.toolPath.addCallback(this, this.forceUpdate);
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            if (this.tool.destroy) {
                this.tool.destroy();
            }
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (this.tool && this.tool.resize) {
                this.tool.resize();
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var windowBar = {
                width: "100%",
                height: 25,
                backgroundColor: this.state.showControls ? "#f8f8f8" : ""
            };
            var titleStyle = {
                cursor: "move",
                height: 25,
                textAlign: "center",
                overflow: "hidden",
                whiteSpace: "nowrap",
                flex: 1,
                textOverflow: "ellipsis"
            };
            var transitions = {
                visibility: this.state.showControls ? "visible" : "hidden",
                opacity: this.state.showControls ? 0.7 : 0,
                transition: this.state.showControls ? "visibiliy 0s 0.1s, opacity 0.1s linear" : "visibility 0s 0.1s, opacity 0.1s linear"
            };
            var leftControls = {
                marginLeft: 5,
                marginTop: 2,
                width: 20
            };
            var rightControls = {
                marginTop: 2,
                width: 38
            };
            _StandardLib2.default.merge(leftControls, transitions);
            _StandardLib2.default.merge(rightControls, transitions);
            var toolHeight = this.props.style ? this.props.style.height - 25 : 320;
            var toolWidth = this.props.style ? this.props.style.width : 320;
            var reactTool;
            if (React.Component.isPrototypeOf(this.ToolClass)) {
                reactTool = React.createElement(this.ToolClass, _.merge({ key: "tool", ref: "tool", toolPath: this.toolPath, style: { height: toolHeight, width: toolWidth } }, this.toolProps));
            }
            return React.createElement(
                _ui2.default.VBox,
                { style: this.props.style, onMouseEnter: function onMouseEnter() {
                        _this2.setState({ showControls: true });
                    }, onMouseLeave: function onMouseLeave() {
                        _this2.setState({ showControls: false });
                    }, onDragOver: this.props.onDragOver, onDragEnd: this.props.onDragEnd },
                React.createElement(
                    _ui2.default.HBox,
                    { ref: "header", style: windowBar, draggable: true, onDragStart: this.props.onDragStart },
                    React.createElement(
                        "p",
                        { style: titleStyle },
                        this.title
                    )
                ),
                reactTool ? reactTool : React.createElement("div", { ref: "toolDiv", style: { width: toolWidth, height: toolHeight } })
            );
        }
    }, {
        key: "title",
        get: function get() {
            if (this.toolPath) {
                return this.toolPath.getValue("this.hasOwnProperty('title') ? this.title : ''") || (this.toolPath.getType('title') ? this.toolPath.getState('title') : '') || this.toolPath.getPath().pop();
            } else {
                return this.tool ? this.tool.title : "";
            }
        }
    }]);

    return WeaveTool;
}(React.Component);

},{"./react-ui/ui":23,"./utils/StandardLib":31,"lodash":"lodash","react":"react","react-dom":"react-dom"}],18:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _Resizer = require("./Resizer");

var _Resizer2 = _interopRequireDefault(_Resizer);

var _ResizerOverlay = require("./ResizerOverlay");

var _ResizerOverlay2 = _interopRequireDefault(_ResizerOverlay);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react/react-dom.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>

var RESIZEROVERLAY = "resizer";
var HORIZONTAL = "horizontal";

var Layout = function (_React$Component) {
    _inherits(Layout, _React$Component);

    function Layout(props, state) {
        _classCallCheck(this, Layout);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Layout).call(this, props, state));

        _this.panelDragging = false;
        var ps = props.state || {};
        _this.state = { id: ps.id, direction: ps.direction, children: ps.children, flex: ps.flex };
        _this.minSize = 16;
        _this.dragging = false;
        return _this;
    }

    _createClass(Layout, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            document.addEventListener("mouseup", this.boundMouseUp = this.onMouseUp.bind(this));
            document.addEventListener("mousedown", this.boundMouseDown = this.onMouseDown.bind(this));
            document.addEventListener("mousemove", this.boundMouseMove = this.onMouseMove.bind(this));
        }
    }, {
        key: "componentWillReceiveProps",
        value: function componentWillReceiveProps(nextProps) {
            this.setState(_StandardLib2.default.includeMissingPropertyPlaceholders(this.state, nextProps.state));
        }
    }, {
        key: "compoenentWillUnmount",
        value: function compoenentWillUnmount() {
            document.removeEventListener("mousedown", this.boundMouseDown);
            document.removeEventListener("mouseup", this.boundMouseUp);
            document.removeEventListener("mouseMove", this.boundMouseMove);
        }
    }, {
        key: "shouldComponentUpdate",
        value: function shouldComponentUpdate(nextProps, nextState) {
            return !_.isEqual(this.state, nextState) || !_.isEqual(this.state, nextProps.state);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (this.props.onStateChange && this.state) {
                this.props.onStateChange(this.state);
            }
        }
    }, {
        key: "getDOMNodeFromId",
        value: function getDOMNodeFromId(id) {
            var component = this.getComponentFromId(id);
            if (component) {
                return component.element;
            }
        }
    }, {
        key: "getComponentFromId",
        value: function getComponentFromId(id) {
            if (this.state.id && _.isEqual(this.state.id, id)) {
                return this;
            } else {
                for (var i = 0; i < this.childNames.length; i++) {
                    var component = this.refs[this.childNames[i]].getComponentFromId(id);
                    if (component) {
                        return component;
                    }
                }
            }
        }
    }, {
        key: "onMouseDown",
        value: function onMouseDown(event) {
            var _this2 = this;

            this.resizerNames.forEach(function (resizerName) {
                var resizer = _this2.refs[resizerName];
                if (resizer && resizer.state && resizer.state.active) {
                    var overlayRange = _this2.getResizerRange(resizer);
                    overlayRange[0] += _this2.minSize;
                    overlayRange[1] -= _this2.minSize;
                    _this2.refs[RESIZEROVERLAY].setState({
                        active: true,
                        range: overlayRange
                    });
                }
            });
        }
    }, {
        key: "onMouseMove",
        value: function onMouseMove(event) {}
    }, {
        key: "getResizerRange",
        value: function getResizerRange(resizer) {
            var direction = resizer.props.direction;
            var pane1 = this.refs[resizer.props.pane1];
            var pane2 = this.refs[resizer.props.pane2];
            var element1 = ReactDOM.findDOMNode(pane1);
            var element2 = ReactDOM.findDOMNode(pane2);
            var rect = this.element.getBoundingClientRect();
            var pageLeft = window.pageXOffset + rect.left;
            var pageTop = window.pageYOffset + rect.top;
            if (direction === HORIZONTAL) {
                return [element1.offsetLeft + pageLeft, element2.offsetLeft + element2.clientWidth + pageLeft];
            } else {
                return [element1.offsetTop + pageTop, element2.offsetTop + element2.clientHeight + pageTop];
            }
        }
    }, {
        key: "onMouseUp",
        value: function onMouseUp(event) {
            var _this3 = this;

            var newState = _.cloneDeep(this.state);
            this.resizerNames.forEach(function (resizerName) {
                var resizer = _this3.refs[resizerName];
                var resizerOverlay = _this3.refs[RESIZEROVERLAY];
                if (resizer && resizer.state && resizer.state.active) {
                    var range = _this3.getResizerRange(resizer);
                    var begin = range[0];
                    var end = range[1];
                    var mousePos = _this3.state.direction === HORIZONTAL ? event.pageX : event.pageY;
                    var size = _this3.state.direction === HORIZONTAL ? _this3.element.clientWidth : _this3.element.clientHeight;
                    mousePos = Math.max(begin + _this3.minSize, Math.min(mousePos, end - _this3.minSize));
                    var ref1 = resizer.props.pane1;
                    var ref2 = resizer.props.pane2;
                    var pane1 = _this3.refs[ref1];
                    var pane2 = _this3.refs[ref2];
                    var index1 = _this3.childNames.indexOf(ref1);
                    var index2 = _this3.childNames.indexOf(ref2);
                    var flex1 = (mousePos - begin) / size;
                    var flex2 = (end - mousePos) / size;
                    newState.children[index1].flex = flex1;
                    newState.children[index2].flex = flex2;
                    pane1.setState({
                        flex: flex1
                    });
                    pane2.setState({
                        flex: flex2
                    });
                    resizer.setState({
                        active: false
                    });
                    resizerOverlay.setState({
                        active: false
                    });
                    _this3.setState(newState);
                }
            });
            this.panelDragging = false;
        }
    }, {
        key: "handleStateChange",
        value: function handleStateChange(childRef, newState) {
            var stateCopy = _.cloneDeep(this.state);
            var index = this.childNames.indexOf(childRef);
            stateCopy.children[index] = newState;
            this.setState(stateCopy);
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            this.childNames = [];
            this.resizerNames = [];
            var style = {
                display: "flex",
                flex: this.state.flex,
                position: "relative",
                outline: "none",
                overflow: "hidden",
                userSelect: "none",
                flexDirection: this.state.direction === HORIZONTAL ? "row" : "column"
            };
            if (this.state.direction === HORIZONTAL) {
                style.height = "100%";
            } else {
                style.width = "100%";
            }
            if (this.state.children && this.state.children.length > 0) {
                var newChildren = new Array(this.state.children.length * 2 - 1);
                this.state.children.forEach(function (childState, i) {
                    var ref = "child" + i;
                    _this4.childNames[i] = ref;
                    newChildren[i * 2] = React.createElement(Layout, { onStateChange: _this4.handleStateChange.bind(_this4, ref), ref: ref, state: childState, key: i * 2 });
                });
                var i;
                for (i = 1; i < newChildren.length - 1; i += 2) {
                    var resizerName = "resizer" + i / 2;
                    this.resizerNames.push(resizerName);
                    var resizer = React.createElement(_Resizer2.default, { ref: resizerName, key: i, direction: this.state.direction, pane1: newChildren[i - 1].ref, pane2: newChildren[i + 1].ref });
                    newChildren[i] = resizer;
                }
            }
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement(
                "div",
                { ref: function ref(elt) {
                        _this4.element = elt;
                    }, style: prefixed.styles },
                newChildren,
                React.createElement(_ResizerOverlay2.default, { ref: RESIZEROVERLAY, key: RESIZEROVERLAY, direction: this.state.direction })
            );
        }
    }]);

    return Layout;
}(React.Component);

exports.default = Layout;

},{"../utils/StandardLib":31,"./Resizer":19,"./ResizerOverlay":20,"lodash":"lodash","react":"react","react-dom":"react-dom","react-vendor-prefix":15}],19:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react/react-dom.d.ts"/>
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>

var HORIZONTAL = "horizontal";
var resizerStyle = {};
resizerStyle.basic = {
    background: "#000",
    opacity: .1,
    zIndex: 1,
    boxSizing: "border-box",
    backgroundClip: "padding"
};
resizerStyle.vertical = {
    height: "4px",
    cursor: "row-resize",
    width: "100%"
};
resizerStyle.horizontal = {
    width: "4px",
    cursor: "col-resize",
    height: "100%"
};

var Resizer = function (_React$Component) {
    _inherits(Resizer, _React$Component);

    function Resizer(props) {
        _classCallCheck(this, Resizer);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Resizer).call(this, props));

        _this.state = {
            active: false
        };
        return _this;
    }

    _createClass(Resizer, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this.element.addEventListener("mousedown", this.boundMouseDown = this.onMouseDown.bind(this));
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            this.element.removeEventListener("mousedown", this.boundMouseDown);
        }
    }, {
        key: "onMouseDown",
        value: function onMouseDown() {
            this.setState({
                active: true
            });
        }
    }, {
        key: "render",
        value: function render() {
            var _this2 = this;

            var direction = this.props.direction;
            var style = resizerStyle.basic;
            _StandardLib2.default.merge(style, resizerStyle[direction]);
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement("span", { ref: function ref(elt) {
                    _this2.element = elt;
                }, style: prefixed.styles });
        }
    }]);

    return Resizer;
}(React.Component);

exports.default = Resizer;

},{"../utils/StandardLib":31,"react":"react","react-vendor-prefix":15}],20:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _reactVendorPrefix = require("react-vendor-prefix");

var VendorPrefix = _interopRequireWildcard(_reactVendorPrefix);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts" />
/// <reference path="../../typings/react-vendor-prefix/react-vendor-prefix.d.ts"/>
/// <reference path="../../typings/react/react-dom.d.ts"/>

var HORIZONTAL = "horizontal";
var mouseevents = ["mouseover", "mouseout", "mouseleave"];
var resizerStyle = {};
resizerStyle.basic = {
    background: "#000",
    opacity: .3,
    zIndex: 1,
    boxSizing: "border-box",
    backgroundClip: "padding",
    position: "absolute"
};
resizerStyle.vertical = {
    height: "4px",
    cursor: "row-resize",
    width: "100%"
};
resizerStyle.horizontal = {
    width: "4px",
    cursor: "col-resize",
    height: "100%"
};
;

var ResizerOverlay = function (_React$Component) {
    _inherits(ResizerOverlay, _React$Component);

    function ResizerOverlay(props) {
        _classCallCheck(this, ResizerOverlay);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ResizerOverlay).call(this, props));

        _this.state = {
            active: false,
            range: [],
            x: NaN,
            y: NaN
        };
        return _this;
    }

    _createClass(ResizerOverlay, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            document.addEventListener("mousemove", this._onMouseMove = this.onMouseMove.bind(this), true);
            mouseevents.forEach(function (mouseevent) {
                return document.addEventListener(mouseevent, _this2._stopEventPropagation = _this2.stopEventPropagation.bind(_this2), true);
            });
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            var _this3 = this;

            document.removeEventListener("mousemove", this._onMouseMove);
            mouseevents.forEach(function (mouseevent) {
                return document.removeEventListener(mouseevent, _this3._stopEventPropagation);
            });
        }
    }, {
        key: "stopEventPropagation",
        value: function stopEventPropagation(event) {
            if (this.state.active) {
                event.stopImmediatePropagation();
            }
        }
    }, {
        key: "onMouseMove",
        value: function onMouseMove(event) {
            if (this.state.active) {
                event.stopImmediatePropagation();
                var container = this.element.parentNode;
                var rect = container.getBoundingClientRect();
                var left = window.pageXOffset + rect.left;
                var top = window.pageYOffset + rect.top;
                var mousePos = this.props.direction === HORIZONTAL ? event.pageX : event.pageY;
                mousePos = Math.max(this.state.range[0], Math.min(mousePos, this.state.range[1]));
                if (this.props.direction === HORIZONTAL) {
                    this.setState({
                        x: mousePos - left,
                        y: NaN
                    });
                } else {
                    this.setState({
                        x: NaN,
                        y: mousePos - top
                    });
                }
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this4 = this;

            var direction = this.props.direction;
            var style = {};
            _StandardLib2.default.merge(style, resizerStyle.basic);
            _StandardLib2.default.merge(style, resizerStyle[direction]);
            if (this.state.active) {
                style.visibility = "visible";
                style.left = this.state.x;
                style.top = this.state.y;
            } else {
                style.visibility = "hidden";
            }
            var prefixed = VendorPrefix.prefix({ styles: style });
            return React.createElement("span", { ref: function ref(elt) {
                    _this4.element = elt;
                }, style: prefixed.styles });
        }
    }]);

    return ResizerOverlay;
}(React.Component);

exports.default = ResizerOverlay;

},{"../utils/StandardLib":31,"react":"react","react-vendor-prefix":15}],21:[function(require,module,exports){
"use strict";

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts"/>

var HBox = function (_React$Component) {
    _inherits(HBox, _React$Component);

    function HBox(props, state) {
        _classCallCheck(this, HBox);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(HBox).call(this, props));
    }

    _createClass(HBox, [{
        key: "render",
        value: function render() {
            var style = this.props.style || {};
            var otherProps = {};
            for (var key in this.props) {
                if (key !== "style") {
                    otherProps[key] = this.props[key];
                }
            }
            style = style || {};
            style.display = "flex";
            style.flexDirection = "row";
            return React.createElement(
                "div",
                _extends({ style: style }, otherProps),
                this.props.children
            );
        }
    }]);

    return HBox;
}(React.Component);

exports.default = HBox;

},{"react":"react"}],22:[function(require,module,exports){
"use strict";

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/react/react.d.ts"/>

var VBox = function (_React$Component) {
    _inherits(VBox, _React$Component);

    function VBox(props, state) {
        _classCallCheck(this, VBox);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(VBox).call(this, props));
    }

    _createClass(VBox, [{
        key: "render",
        value: function render() {
            var style = this.props.style || {};
            var otherProps = {};
            for (var key in this.props) {
                if (key !== "style") {
                    otherProps[key] = this.props[key];
                }
            }
            style.display = "flex";
            style.flexDirection = "column";
            return React.createElement(
                "div",
                _extends({ style: style }, otherProps),
                this.props.children
            );
        }
    }]);

    return VBox;
}(React.Component);

exports.default = VBox;

},{"react":"react"}],23:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _HBox = require("./HBox");

var _HBox2 = _interopRequireDefault(_HBox);

var _VBox = require("./VBox");

var _VBox2 = _interopRequireDefault(_VBox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
    HBox: _HBox2.default,
    VBox: _VBox2.default
};

},{"./HBox":21,"./VBox":22}],24:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/react/react-dom.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>

var AbstractWeaveTool = function (_React$Component) {
    _inherits(AbstractWeaveTool, _React$Component);

    function AbstractWeaveTool(props) {
        _classCallCheck(this, AbstractWeaveTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AbstractWeaveTool).call(this, props));

        _this.toolPath = props.toolPath;
        _this.paths = {};
        return _this;
    }

    _createClass(AbstractWeaveTool, [{
        key: "getElementSize",
        value: function getElementSize() {
            return {
                width: this.wrapper.clientWidth,
                height: this.wrapper.clientHeight
            };
        }
        // this function accepts an arry of path configurations
        // a path config is an object with a path object name, the weave path and an
        // optional callback or array of callbacks

    }, {
        key: "initializePaths",
        value: function initializePaths(properties) {
            var _this2 = this;

            properties.forEach(function (pathConf) {
                _this2.paths[pathConf.name] = pathConf.path;
                if (pathConf.callbacks) {
                    var callbacks = Array.isArray(pathConf.callbacks) ? pathConf.callbacks : [pathConf.callbacks];
                    callbacks.forEach(function (callback) {
                        _this2.paths[pathConf.name].addCallback(_this2, callback, true);
                    });
                }
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {}
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {}
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {}
    }, {
        key: "handleClick",
        value: function handleClick(event) {}
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            return React.createElement(
                "div",
                { ref: function ref(elt) {
                        _this3.wrapper = elt;
                    }, style: this.props.style },
                React.createElement("div", { ref: function ref(elt) {
                        _this3.element = elt;
                    }, onClick: this.handleClick.bind(this), style: { width: "100%", height: "100%", maxHeight: "100%" } })
            );
        }
    }, {
        key: "customStyle",
        value: function customStyle(array, type, filter, style) {
            var _this4 = this;

            array.forEach(function (index) {
                d3.select(d3.select(_this4.element).selectAll(type).filter(filter)[0][index]).style(style);
            });
        }
    }]);

    return AbstractWeaveTool;
}(React.Component);

exports.default = AbstractWeaveTool;

},{"d3":"d3","react":"react"}],25:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _c = require("c3");

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../utils/StandardLib.ts"/>

var WeaveC3Barchart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3Barchart, _AbstractWeaveTool);

    function WeaveC3Barchart(props) {
        _classCallCheck(this, WeaveC3Barchart);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3Barchart).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        _this.xAxisValueToLabel = {};
        _this.c3Config = {
            //size: this.getElementSize(),
            padding: {
                top: 20,
                bottom: 20,
                right: 30
            },
            data: {
                json: [],
                type: "bar",
                xSort: false,
                selection: {
                    enabled: true,
                    multiple: true,
                    draggable: true
                },
                labels: {
                    format: function format(v, id, i, j) {
                        if (_this.showValueLabels) {
                            return v;
                        } else {
                            return "";
                        }
                    }
                },
                order: null,
                color: function color(_color, d) {
                    if (_this.heightColumnNames.length === 1 && d.hasOwnProperty("index")) {
                        // find the corresponding index of numericRecords in stringRecords
                        var id = _this.indexToKey[d.index];
                        var index = _.pluck(_this.stringRecords, "id").indexOf(id);
                        return _this.stringRecords[index] ? _this.stringRecords[index]["color"] : "#C0CDD1";
                    } else {
                        return _color || "#C0CDD1";
                    }
                },
                onclick: function onclick(d) {
                    if (!_this.keyDown && d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.setKeys([_this.indexToKey[d.index]]);
                    }
                },
                onselected: function onselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.addKeys([_this.indexToKey[d.index]]);
                    }
                },
                onunselected: function onunselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.selection_keyset.removeKeys([_this.indexToKey[d.index]]);
                    }
                },
                onmouseover: function onmouseover(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([_this.indexToKey[d.index]]);
                    }
                },
                onmouseout: function onmouseout(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([]);
                    }
                }
            },
            axis: {
                x: {
                    type: "category",
                    label: {
                        text: "",
                        position: "outer-center"
                    },
                    tick: {
                        fit: false,
                        multiline: true,
                        format: function format(num) {
                            if (_this.stringRecords && _this.stringRecords[num]) {
                                return _this.stringRecords[num]["xLabel"];
                            } else {
                                return "";
                            }
                        }
                    }
                },
                y: {
                    label: {
                        text: "",
                        position: "outer-middle"
                    },
                    tick: {
                        fit: false,
                        multiline: false,
                        format: function format(num) {
                            if (_this.yLabelColumnPath && _this.yLabelColumnDataType !== "number") {
                                return _this.yAxisValueToLabel[num] || "";
                            } else if (_this.groupingMode === "percentStack") {
                                return d3.format(".0%")(num);
                            } else {
                                return String(_FormatUtils2.default.defaultNumberFormatting(num));
                            }
                        }
                    }
                }
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            },
            bindto: null,
            bar: {
                width: {
                    ratio: 0.8
                }
            },
            legend: {
                show: false
            },
            onrendered: function onrendered() {
                _this.busy = false;
            }
        };
        return _this;
    }

    _createClass(WeaveC3Barchart, [{
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {
            var _this2 = this;

            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedIndices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, selectedIndices, true);
            } else {
                this.customStyle(indices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, [], true);
            }
        }
    }, {
        key: "probedKeysChanged",
        value: function probedKeysChanged() {
            var _this3 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this.selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "rotateAxes",
        value: function rotateAxes() {
            // this.c3Config.axis.rotated = this.paths.horizontalMode.getState();
            // setTimeout(() => {
            //   this.busy = true;
            //   c3.generate(this.c3Config);
            // }, 10);
        }
    }, {
        key: "_axisChanged",
        value: function _axisChanged() {
            if (!this.chart) return;
            if (this.busy) {
                setTimeout(this._axisChanged, 20);
                return;
            }
            var xLabel = this.paths.xAxis.push("overrideAxisName").getState() || "Sorted by " + this.paths.sortColumn.getObject().getMetadata('title');
            var yLabel = this.paths.yAxis.push("overrideAxisName").getState() || (this.heightColumnsLabels ? this.heightColumnsLabels.join(", ") : "");
            this.chart.axis.labels({
                x: xLabel,
                y: yLabel
            });
            this.c3Config.axis.x.label = { text: xLabel, position: "outer-center" };
            this.c3Config.axis.y.label = { text: yLabel, position: "outer-middle" };
        }
    }, {
        key: "handleShowValueLabels",
        value: function handleShowValueLabels() {
            this.showValueLabels = this.paths.showValueLabels.getState();
            this.chart.flush();
        }
    }, {
        key: "_updateColumns",
        value: function _updateColumns() {
            this.heightColumnNames = [];
            this.heightColumnsLabels = [];
            var heightColumns = this.paths.heightColumns.getChildren();
            for (var idx in heightColumns) {
                var column = heightColumns[idx];
                var title = column.getValue("this.getMetadata('title')");
                var name = column.getPath().pop();
                this.heightColumnsLabels.push(title);
                this.heightColumnNames.push(name);
            }
        }
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this4 = this;

            if (!this.chart) {
                return;
            }
            if (this.busy) {
                return;
            }
            this._updateColumns();
            var heightColumns = this.paths.heightColumns.getChildren();
            var numericMapping = {
                sort: this.paths.sortColumn,
                xLabel: this.paths.labelColumn
            };
            var stringMapping = {
                sort: this.paths.sortColumn,
                color: this.paths.colorColumn,
                xLabel: this.paths.labelColumn
            };
            heightColumns.forEach(function (column, idx) {
                var name = column.getPath().pop();
                numericMapping[name] = column; // all height columns as numeric value for the chart
                if (idx === 0) {
                    _this4.yLabelColumnPath = column;
                    stringMapping["yLabel"] = column; // only using the first column to label the y axis
                    numericMapping["yLabel"] = column;
                }
            });
            this.yLabelColumnDataType = this.yLabelColumnPath.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            if (!this.numericRecords.length) return;
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.records = _.zip(this.numericRecords, this.stringRecords);
            this.records = _.sortByAll(this.records, [[0, "sort"], [0, "id"]]);
            if (this.records.length) {
                ;

                var _$unzip = _.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.yAxisValueToLabel = {};
            this.xAxisValueToLabel = {};
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                if (record) {
                    _this4.keyToIndex[record["id"]] = index;
                    _this4.indexToKey[index] = record["id"];
                }
            });
            this.stringRecords.forEach(function (record, index) {
                var numericRecord = _this4.numericRecords[index];
                if (numericRecord) {
                    _this4.yAxisValueToLabel[numericRecord["yLabel"]] = record["yLabel"];
                    _this4.xAxisValueToLabel[numericRecord["xLabel"]] = record["xLabel"];
                }
            });
            this.groupingMode = this.paths.groupingMode.getState();
            //var horizontalMode = this.paths.plotter.push("horizontalMode").getState();
            // set axis rotation mode
            //this.chart.load({axes: { rotated: horizontalMode }});
            if (this.groupingMode === "stack") {
                this.chart.groups([this.heightColumnNames]);
            } else if (this.groupingMode === "group") {
                this.chart.groups([]);
            } else if (this.groupingMode === "percentStack") {
                this.chart.groups([this.heightColumnNames]);
            }
            if (this.groupingMode === "percentStack" && this.heightColumnNames.length > 1) {
                // normalize the height columns to be percentages.
                var newValues = this.numericRecords.map(function (record) {
                    var heights;
                    if (record) {
                        heights = _.pick(record, _this4.heightColumnNames);
                        var sum = 0;
                        _.keys(heights).forEach(function (key) {
                            sum += heights[key];
                        });
                        _.keys(heights).forEach(function (key) {
                            heights[key] = heights[key] / sum;
                        });
                    }
                    return heights;
                });
                this.numericRecords = newValues;
            }
            ;
            var keys = { x: "", value: [] };
            // if label column is specified
            if (this.paths.labelColumn.getState().length) {
                keys.x = "xLabel";
            }
            keys.value = this.heightColumnNames;
            var colors = {};
            if (this.heightColumnNames.length > 1) {
                this.colorRamp = this.paths.chartColors.getState();
                this.heightColumnNames.map(function (name, index) {
                    var color = _StandardLib2.default.interpolateColor(index / (_this4.heightColumnNames.length - 1), _this4.colorRamp);
                    colors[name] = "#" + _StandardLib2.default.decimalToHex(color);
                });
                colors = {};
            }
            var data = _.cloneDeep(this.c3Config.data);
            data.json = this.numericRecords;
            data.colors = colors;
            data.keys = keys;
            data.unload = true;
            data.done = function () {
                _this4.busy = false;
            };
            this.c3Config.data = data;
            this.busy = true;
            this.chart.load(data);
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {}
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentDidUpdate", this).call(this);
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            this.chart.destroy();
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentWillUnmount", this).call(this);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            _get(Object.getPrototypeOf(WeaveC3Barchart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = _.debounce(this._axisChanged.bind(this), 100);
            var dataChanged = _.debounce(this._dataChanged.bind(this), 100);
            var handleShowValueLabels = _.debounce(this.handleShowValueLabels.bind(this), 10);
            var selectionKeySetChanged = this.selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this.probedKeysChanged.bind(this), 100);
            var rotateAxes = _.debounce(this.rotateAxes.bind(this), 10);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "heightColumns", path: plotterPath.push("heightColumns"), callbacks: [dataChanged, axisChanged] }, { name: "labelColumn", path: plotterPath.push("labelColumn"), callbacks: [dataChanged, axisChanged] }, { name: "sortColumn", path: plotterPath.push("sortColumn"), callbacks: [dataChanged, axisChanged] }, { name: "colorColumn", path: plotterPath.push("colorColumn"), callbacks: dataChanged }, { name: "chartColors", path: plotterPath.push("chartColors"), callbacks: dataChanged }, { name: "groupingMode", path: plotterPath.push("groupingMode"), callbacks: dataChanged }, { name: "horizontalMode", path: plotterPath.push("horizontalMode"), callbacks: rotateAxes }, { name: "showValueLabels", path: plotterPath.push("showValueLabels"), callbacks: handleShowValueLabels }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config.bindto = this.element;
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3Barchart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3Barchart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::CompoundBarChartTool", WeaveC3Barchart);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"c3":"c3","d3":"d3","lodash":"lodash"}],26:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _react = require("react");

var React = _interopRequireWildcard(_react);

var _ui = require("../react-ui/ui");

var _ui2 = _interopRequireDefault(_ui);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _reactDom = require("react-dom");

var ReactDOM = _interopRequireWildcard(_reactDom);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/d3/d3.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
/// <reference path="../../typings/weave/WeavePath.d.ts"/>
///<reference path="../react-ui/ui.tsx"/>
///<reference path="../../typings/react/react-dom.d.ts"/>

var SHAPE_TYPE_CIRCLE = "circle";
var SHAPE_TYPE_SQUARE = "square";
var SHAPE_TYPE_LINE = "line";

var WeaveC3ColorLegend = function (_AbstractWeaveTool) {
    _inherits(WeaveC3ColorLegend, _AbstractWeaveTool);

    function WeaveC3ColorLegend(props) {
        _classCallCheck(this, WeaveC3ColorLegend);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3ColorLegend).call(this, props));
    }

    _createClass(WeaveC3ColorLegend, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            var elementSize = this.element ? this.getElementSize() : null;
            ReactDOM.render(React.createElement(ColorLegend, { toolPath: this.toolPath, width: elementSize.width, height: elementSize.height }), this.element);
        }
    }]);

    return WeaveC3ColorLegend;
}(_AbstractWeaveTool3.default);

var ColorLegend = function (_React$Component) {
    _inherits(ColorLegend, _React$Component);

    function ColorLegend(props) {
        _classCallCheck(this, ColorLegend);

        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(ColorLegend).call(this, props));

        console.log(React);
        _this2.toolPath = props.toolPath;
        _this2.plotterPath = _this2.toolPath.pushPlotter("plot");
        _this2.dynamicColorColumnPath = _this2.plotterPath.push("dynamicColorColumn", null);
        _this2.binningDefinition = _this2.dynamicColorColumnPath.push("internalDynamicColumn").push(null).push("binningDefinition").push(null);
        _this2.binnedColumnPath = _this2.dynamicColorColumnPath.push("internalDynamicColumn", null);
        return _this2;
    }

    _createClass(ColorLegend, [{
        key: "setupCallbacks",
        value: function setupCallbacks() {
            this.dynamicColorColumnPath.addCallback(this, this.forceUpdate);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            this.setupCallbacks();
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {}
    }, {
        key: "drawContinuousPlot",
        value: function drawContinuousPlot() {}
        //drawBinnedPlot(numberOfBins:number) {
        //    // clear the svg and rerender everything
        //    this.svg.selectAll("*").remove();
        //
        //    var width:number = this.element.clientWidth;
        //    var height:number = this.element.clientHeight;
        //
        //    var shapeSize:number = this.plotterPath.getState("shapeSize");
        //    var shapeType:string = this.plotterPath.getState("shapeType");
        //
        //    var ramp:any[] = this.dynamicColorColumnPath.getState("ramp");
        //
        //    var yScale:Function = d3.scale.linear().domain([0, numberOfBins + 1]).range([0, height]);
        //
        //    var yMap:Function = (d:number):number => { return yScale(d); };
        //
        //    if(width && height && numberOfBins) {
        //        this.svg.attr("width", width).attr("height", height);
        //    }
        //
        //    this.svg.append("text")
        //            .attr("y", yMap(0.5))
        //            .attr("x", 10)
        //            .text(this.dynamicColorColumnPath.getValue("this.getMetadata('title')"))
        //             .attr("font-family", "sans-serif")
        //             .attr("font-size", "12px");
        //
        //    shapeSize = _.max([1, _.min([shapeSize, height / numberOfBins])]);
        //
        //    let r:number = (shapeSize / 100 * height / numberOfBins) / 2;
        //
        //    var textLabelFunction:Function = this.binnedColumnPath.getValue("this.deriveStringFromNumber.bind(this)            ");
        //
        //    for(var i = 0; i < numberOfBins; i++) {
        //        switch(shapeType) {
        //            case SHAPE_TYPE_CIRCLE :
        //                this.svg.append("circle")
        //                         .attr("cx", 25)
        //                         .attr("cy", yMap(i + 1))
        //                         .attr("r", r)
        //                         .style("fill", "#" + StandardLib.decimalToHex(StandardLib.interpolateColor(StandardLib.normalize(i, 0, numberOfBins - 1), ramp)))
        //                         .style("stroke", "black")
        //                         .style("stroke-opacity", 0.5);
        //                this.svg.append("text")
        //                         .attr("x", 50)
        //                         .attr("y", yMap(i + 1) + r / 2)
        //                         .text(textLabelFunction(i))
        //                         .attr("font-family", "sans-serif")
        //                         .attr("font-size", "12px");
        //                break;
        //            case SHAPE_TYPE_SQUARE :
        //                break;
        //
        //            case SHAPE_TYPE_LINE :
        //                break;
        //        }
        //    }
        //}

    }, {
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {}
    }, {
        key: "visualizationChanged",
        value: function visualizationChanged() {}
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {}
    }, {
        key: "render",
        value: function render() {
            this.numberOfBins = this.binnedColumnPath.getValue("this.numberOfBins");
            if (this.numberOfBins) {
                //Binned plot case
                var width = this.props.width;
                var height = this.props.height;
                var shapeSize = this.plotterPath.getState("shapeSize");
                var shapeType = this.plotterPath.getState("shapeType");
                var ramp = this.dynamicColorColumnPath.getState("ramp");
                var yScale = d3.scale.linear().domain([0, this.numberOfBins + 1]).range([0, height]);
                var yMap = function yMap(d) {
                    return yScale(d);
                };
                shapeSize = _.max([1, _.min([shapeSize, height / this.numberOfBins])]);
                var r = shapeSize / 100 * height / this.numberOfBins / 2;
                var textLabelFunction = this.binnedColumnPath.getValue("this.deriveStringFromNumber.bind(this)            ");
                var elements = [];
                for (var i = 0; i < this.numberOfBins; i++) {
                    switch (shapeType) {
                        case SHAPE_TYPE_CIRCLE:
                            {
                                elements.push(React.createElement(
                                    _ui2.default.HBox,
                                    { key: i, style: { width: "100%", flex: 1.0 } },
                                    React.createElement(
                                        _ui2.default.HBox,
                                        { style: { width: "100%", flex: 0.2, position: "relative", padding: "0px 0px 0px 0px", minWidth: "10px" } },
                                        React.createElement(
                                            "svg",
                                            { style: { position: "absolute" }, viewBox: "0 0 100 100", width: "100%", height: "100%" },
                                            React.createElement("circle", { cx: "50%", cy: "50%", r: "45%", style: { fill: "#" + _StandardLib2.default.decimalToHex(_StandardLib2.default.interpolateColor(_StandardLib2.default.normalize(i, 0, this.numberOfBins - 1), ramp)), stroke: "black", strokeOpacity: 0.5 } })
                                        )
                                    ),
                                    React.createElement(
                                        _ui2.default.HBox,
                                        { style: { width: "100%", flex: 0.8 } },
                                        React.createElement(
                                            "span",
                                            { style: { textAlign: "left", verticalAlign: "middle", overflow: "hidden", whiteSpace: "nowrap", textOverflow: "ellipsis" } },
                                            textLabelFunction(i)
                                        )
                                    )
                                ));
                            }
                            break;
                        case SHAPE_TYPE_SQUARE:
                            break;
                        case SHAPE_TYPE_LINE:
                            break;
                    }
                }
                return React.createElement(
                    "div",
                    { style: { width: "100%", height: "100%" } },
                    React.createElement(
                        _ui2.default.VBox,
                        { style: { height: "100%", flex: 1.0 } },
                        React.createElement(
                            _ui2.default.HBox,
                            { style: { width: "100%", flex: 0.1 } },
                            React.createElement(
                                "svg",
                                { width: "100%", height: "100%" },
                                React.createElement(
                                    "text",
                                    { y: yMap(0.5), x: 10, fontFamily: "sans-serif", fontSize: "12px" },
                                    this.dynamicColorColumnPath.getValue("this.getMetadata('title')")
                                )
                            )
                        ),
                        React.createElement(
                            _ui2.default.HBox,
                            { style: { width: "100%", flex: 0.9 } },
                            React.createElement(
                                _ui2.default.VBox,
                                { style: { flex: 1.0 } },
                                " ",
                                elements
                            )
                        )
                    )
                );
            } else {
                //Continuous plot case
                return React.createElement("svg", null);
            }
        }
    }]);

    return ColorLegend;
}(React.Component);

exports.default = WeaveC3ColorLegend;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::ColorBinLegendTool", WeaveC3ColorLegend);

},{"../WeaveTool":17,"../react-ui/ui":23,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"d3":"d3","lodash":"lodash","react":"react","react-dom":"react-dom"}],27:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _StandardLib = require("../utils/StandardLib");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _c = require("c3");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>

var WeaveC3Histogram = function (_AbstractWeaveTool) {
    _inherits(WeaveC3Histogram, _AbstractWeaveTool);

    function WeaveC3Histogram(props) {
        _classCallCheck(this, WeaveC3Histogram);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3Histogram).call(this, props));

        _this.busy = false;
        _this.idToRecord = {};
        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.c3Config = {
            //size: this.getElementSize(),
            padding: {
                top: 20,
                bottom: 20,
                right: 30
            },
            data: {
                columns: [],
                selection: {
                    enabled: true,
                    multiple: true,
                    draggable: true
                },
                type: "bar",
                color: function color(_color, d) {
                    if (d && d.hasOwnProperty("index")) {
                        var decColor = _this.paths.fillStyle.push("color").push("internalDynamicColumn", null).getValue("this.getColorFromDataValue.bind(this)")(d.index).toString(16);
                        return "#" + _StandardLib2.default.decimalToHex(decColor);
                    }
                    return "#C0CDD1";
                },
                onclick: function onclick(d) {
                    if (!_this.keyDown && d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.setKeys(selectedIds);
                    }
                },
                onselected: function onselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.addKeys(selectedIds);
                    }
                },
                onunselected: function onunselected(d) {
                    _this.flag = true;
                    if (d && d.hasOwnProperty("index")) {
                        var unSelectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.selection_keyset.removeKeys(unSelectedIds);
                    }
                },
                onmouseover: function onmouseover(d) {
                    if (d && d.hasOwnProperty("index")) {
                        var selectedIds = _this.paths.binnedColumn.getValue("this.getKeysFromBinIndex.bind(this)")(d.index).map(function (qKey) {
                            return _this.toolPath.qkeyToString(qKey);
                        });
                        _this.toolPath.probe_keyset.setKeys(selectedIds);
                    }
                },
                onmouseout: function onmouseout(d) {
                    if (d && d.hasOwnProperty("index")) {
                        _this.toolPath.probe_keyset.setKeys([]);
                    }
                }
            },
            bindto: _this.element,
            legend: {
                show: false
            },
            axis: {
                x: {
                    type: "category",
                    label: {
                        text: "",
                        position: "outer-center"
                    },
                    tick: {
                        multiline: false,
                        format: function format(num) {
                            return _this.paths.binnedColumn.getValue("this.deriveStringFromNumber.bind(this)")(num);
                        }
                    }
                },
                y: {
                    label: {
                        text: "",
                        position: "outer-middle"
                    },
                    tick: {
                        fit: false,
                        format: function format(num) {
                            return String(_FormatUtils2.default.defaultNumberFormatting(num));
                        }
                    }
                },
                rotated: false
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            },
            bar: {
                width: {
                    ratio: 0.95
                }
            },
            onrendered: _this._updateStyle.bind(_this)
        };
        return _this;
    }

    _createClass(WeaveC3Histogram, [{
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedRecords = _.filter(this.numericRecords, function (record) {
                return _.includes(selectedKeys, record["id"]);
            });
            var selectedBinIndices = _.pluck(_.uniq(selectedRecords, 'binnedColumn'), 'binnedColumn');
            var binIndices = _.pluck(_.uniq(this.numericRecords, 'binnedColumn'), 'binnedColumn');
            var unselectedBinIndices = _.difference(binIndices, selectedBinIndices);
            if (selectedBinIndices.length) {
                this.customStyle(unselectedBinIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedBinIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this.customStyle(binIndices, "path", ".c3-shape", { opacity: 1.0 });
                this.chart.select(this.heightColumnNames, [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedRecords = _.filter(this.numericRecords, function (record) {
                return _.includes(selectedKeys, record["id"]);
            });
            var selectedBinIndices = _.pluck(_.uniq(selectedRecords, 'binnedColumn'), 'binnedColumn');
            var binIndices = _.pluck(_.uniq(this.numericRecords, 'binnedColumn'), 'binnedColumn');
            var unselectedBinIndices = _.difference(binIndices, selectedBinIndices);
            if (selectedBinIndices.length) {
                this.customStyle(unselectedBinIndices, "path", ".c3-shape", { opacity: 0.3 });
                this.customStyle(selectedBinIndices, "path", ".c3-shape", { opacity: 1.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "rotateAxes",
        value: function rotateAxes() {
            //this.c3Config.axis.rotated = true;
            //this.forceUpdate();
        }
    }, {
        key: "_axisChanged",
        value: function _axisChanged() {
            if (!this.chart) return;
            if (this.busy) return;
            this.chart.axis.labels({
                x: this.paths.xAxis.push("overrideAxisName").getState() || this.paths.binnedColumn.getValue("this.getMetadata('title')"),
                y: function () {
                    var overrideAxisName = this.paths.yAxis.push("overrideAxisName").getState();
                    if (overrideAxisName) {
                        return overrideAxisName;
                    } else {
                        if (this.paths.columnToAggregate.getState().length) {
                            switch (this.paths.aggregationMethod.getState()) {
                                case "count":
                                    return "Number of records";
                                case "sum":
                                    return "Sum of " + this.paths.columnToAggregate.getValue("this.getMetadata('title')");
                                case "mean":
                                    return "Mean of " + this.paths.columnToAggregate.getValue("this.getMetadata('title')");
                            }
                        } else {
                            return "Number of records";
                        }
                    }
                }.bind(this)()
            });
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {}
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this2 = this;

            if (!this.chart) return;
            if (this.busy) {
                return;
            }
            var numericMapping = {
                binnedColumn: this.paths.binnedColumn,
                columnToAggregate: this.paths.columnToAggregate
            };
            var stringMapping = {
                binnedColumn: this.paths.binnedColumn
            };
            this.binnedColumnDataType = this.paths.binnedColumn.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.idToRecord = {};
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.idToRecord[record["id"]] = record;
                _this2.keyToIndex[record["id"]] = index;
                _this2.indexToKey[index] = record["id"];
            });
            this.numberOfBins = this.paths.binnedColumn.getValue("this.numberOfBins");
            this.histData = [];
            // this._columnToAggregatePath.getValue("this.getInternalColumn()");
            var columnToAggregateNameIsDefined = this.paths.columnToAggregate.getState().length > 0;
            for (var iBin = 0; iBin < this.numberOfBins; iBin++) {
                var recordsInBin = _.filter(this.numericRecords, { binnedColumn: iBin });
                if (recordsInBin) {
                    var obj = { height: 0 };
                    if (columnToAggregateNameIsDefined) {
                        obj.height = this.getAggregateValue(recordsInBin, "columnToAggregate", this.paths.aggregationMethod.getState());
                        this.histData.push(obj);
                    } else {
                        obj.height = this.getAggregateValue(recordsInBin, "binnedColumn", "count");
                        this.histData.push(obj);
                    }
                }
            }
            var keys = { value: ["height"] };
            this._axisChanged();
            this.busy = true;
            this.chart.load({ json: this.histData, keys: keys, unload: true, done: function done() {
                    _this2.busy = false;
                } });
        }
    }, {
        key: "getAggregateValue",
        value: function getAggregateValue(records, columnToAggregateName, aggregationMethod) {
            var count = 0;
            var sum = 0;
            if (!Array.isArray(records)) {
                return 0;
            }
            records.forEach(function (record) {
                count++;
                sum += record[columnToAggregateName];
            });
            if (aggregationMethod === "mean") {
                return sum / count; // convert sum to mean
            }
            if (aggregationMethod === "count") {
                return count; // use count of finite values
            }
            // sum
            return sum;
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentDidUpdate", this).call(this);
            //console.log("component did update");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
            //console.log(end - start);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            _get(Object.getPrototypeOf(WeaveC3Histogram.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = _.debounce(this._axisChanged.bind(this), 100);
            var dataChanged = _.debounce(this._dataChanged.bind(this), 100);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this._probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "binnedColumn", path: plotterPath.push("binnedColumn"), callbacks: [dataChanged, axisChanged] }, { name: "columnToAggregate", path: plotterPath.push("columnToAggregate"), callbacks: dataChanged }, { name: "aggregationMethod", path: plotterPath.push("aggregationMethod"), callbacks: [dataChanged, axisChanged] }, { name: "fillStyle", path: plotterPath.push("fillStyle"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("lineStyle"), callbacks: dataChanged }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config.bindto = this.element;
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3Histogram;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3Histogram;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::HistogramTool", WeaveC3Histogram);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"../utils/StandardLib":31,"./AbstractWeaveTool":24,"c3":"c3","lodash":"lodash"}],28:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _c = require("c3");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /// <reference path="../../typings/c3/c3.d.ts"/>
/// <reference path="../../typings/lodash/lodash.d.ts"/>
/// <reference path="../../typings/d3/d3.d.ts"/>
/// <reference path="../../typings/react/react.d.ts"/>
/// <reference path="../../typings/weave/WeavePath.d.ts"/>

;

var WeaveC3PieChart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3PieChart, _AbstractWeaveTool);

    function WeaveC3PieChart(props) {
        _classCallCheck(this, WeaveC3PieChart);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3PieChart).call(this, props));
    }

    _createClass(WeaveC3PieChart, [{
        key: "selectionKeysChanged",
        value: function selectionKeysChanged() {
            if (!this.chart) return;
            var keys = this.toolPath.selection_keyset.getKeys();
            if (keys.length) {
                this.chart.focus(keys);
            } else {
                this.chart.focus();
            }
        }
    }, {
        key: "probedKeysChanged",
        value: function probedKeysChanged() {
            var keys = this.toolPath.probe_keyset.getKeys();
            if (keys.length) {
                this.chart.focus(keys);
            } else {
                this.selectionKeysChanged();
            }
        }
    }, {
        key: "updateStyle",
        value: function updateStyle() {}
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "dataChanged",
        value: function dataChanged() {
            var _this2 = this;

            if (!this.chart) return;
            var numericMapping = {
                data: this.paths.data
            };
            var stringMapping = {
                fill: {
                    color: this.paths.fillStyle.push("color")
                },
                line: {},
                label: this.paths.label
            };
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.keyToIndex = {};
            this.indexToKey = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.indexToKey[index] = record["id"];
                _this2.keyToIndex[record["id"]] = index;
            });
            var columns = [];
            columns = this.numericRecords.map(function (record) {
                var tempArr = [record["id"], record["data"]];
                return tempArr;
            });
            var chartType = "pie";
            if (this.paths.plotter.getState("innerRadius") > 0) {
                chartType = "donut";
            }
            this.colors = {};
            this.stringRecords.forEach(function (record) {
                _this2.colors[record["id"]] = record["fill"]["color"] || "#C0CDD1";
            });
            this.chart.load({
                columns: columns,
                type: chartType,
                colors: this.colors,
                unload: true
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentDidUpdate", this).call(this);
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this3 = this;

            _get(Object.getPrototypeOf(WeaveC3PieChart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var dataChanged = _.debounce(this.dataChanged.bind(this), 100);
            var selectionKeySetChanged = this.selectionKeysChanged.bind(this);
            var probeKeySetChanged = _.debounce(this.probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var manifest = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "data", path: plotterPath.push("data"), callbacks: dataChanged }, { name: "label", path: plotterPath.push("label"), callbacks: dataChanged }, { name: "fillStyle", path: plotterPath.push("fill"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("line"), callbacks: dataChanged }, { name: "innerRadius", path: plotterPath.push("innerRadius"), callbacks: dataChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(manifest);
            this.c3Config = {
                //size: this.getElementSize(),
                bindto: this.element,
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    columns: [],
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    type: "pie",
                    onclick: function onclick(d) {
                        if (!_this3.keyDown && d && d.hasOwnProperty("index")) {
                            _this3.toolPath.selection_keyset.setKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onselected: function onselected(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.selection_keyset.addKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        if (d && d.hasOwnProperty("data")) {
                            // d has a different structure than "onselected" argument
                            _this3.toolPath.selection_keyset.setKeys([]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.probe_keyset.setKeys([_this3.indexToKey[d.index]]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this3.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                pie: {
                    label: {
                        show: true,
                        format: function format(value, ratio, id) {
                            if (_this3.stringRecords && _this3.stringRecords.length) {
                                var record = _this3.stringRecords[_this3.keyToIndex[id]];
                                if (record && record["label"]) {
                                    return record["label"];
                                }
                                return String(value);
                            }
                        }
                    }
                },
                donut: {
                    label: {
                        show: true,
                        format: function format(value, ratio, id) {
                            if (_this3.stringRecords && _this3.stringRecords.length) {
                                var record = _this3.stringRecords[_this3.keyToIndex[id]];
                                if (record && record["label"]) {
                                    return record["label"];
                                }
                                return String(value);
                            }
                        }
                    }
                },
                legend: {
                    show: false
                },
                onrendered: this.updateStyle.bind(this)
            };
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3PieChart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3PieChart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::PieChartTool", WeaveC3PieChart);

},{"../WeaveTool":17,"./AbstractWeaveTool":24,"c3":"c3","lodash":"lodash"}],29:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("./AbstractWeaveTool");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _WeaveTool = require("../WeaveTool");

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

var _FormatUtils = require("../utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _c = require("c3");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } ///<reference path="../../typings/c3/c3.d.ts"/>
///<reference path="../../typings/d3/d3.d.ts"/>
///<reference path="../../typings/lodash/lodash.d.ts"/>
///<reference path="../../typings/react/react.d.ts"/>
///<reference path="../../typings/weave/WeavePath.d.ts"/>

/* private
 * @param records array or records
 * @param attributes array of attributes to be normalized
 */

var WeaveC3ScatterPlot = function (_AbstractWeaveTool) {
    _inherits(WeaveC3ScatterPlot, _AbstractWeaveTool);

    function WeaveC3ScatterPlot(props) {
        _classCallCheck(this, WeaveC3ScatterPlot);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3ScatterPlot).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        _this.xAxisValueToLabel = {};
        return _this;
    }

    _createClass(WeaveC3ScatterPlot, [{
        key: "normalizeRecords",
        value: function normalizeRecords(records, attributes) {
            // to avoid computing the stats at each iteration.
            var columnStatsCache = {};
            attributes.forEach(function (attr) {
                columnStatsCache[attr] = {
                    min: _.min(_.pluck(records, attr)),
                    max: _.max(_.pluck(records, attr))
                };
            });
            return records.map(function (record) {
                var obj = {};
                attributes.forEach(function (attr) {
                    var min = columnStatsCache[attr].min;
                    var max = columnStatsCache[attr].max;
                    if (!min) min = 0;
                    if (max - min === 0) {
                        return 0;
                    }
                    if (record[attr]) {
                        // console.log( (record[attr] - min) / (max - min));
                        obj[attr] = (record[attr] - min) / (max - min);
                    } else {
                        // if any of the value above is null then
                        // we can't normalize
                        obj[attr] = null;
                    }
                });
                return obj;
            });
        }
    }, {
        key: "axisChanged",
        value: function axisChanged() {
            if (this.busy) {
                this.busy++;
                return;
            }
            this.chart.axis.labels({
                x: this.paths.xAxis.getState("overrideAxisName") || this.paths.dataX.getValue("this.getMetadata('title')"),
                y: this.paths.yAxis.getState("overrideAxisName") || this.paths.dataY.getValue("this.getMetadata('title')")
            });
        }
    }, {
        key: "dataChanged",
        value: function dataChanged() {
            var _this2 = this;

            if (this.busy) {
                this.busy++;
                return;
            }
            var numericMapping = {
                point: {
                    x: this.paths.dataX,
                    y: this.paths.dataY
                },
                size: this.paths.sizeBy
            };
            var stringMapping = {
                point: {
                    x: this.paths.dataX,
                    y: this.paths.dataY
                },
                fill: {
                    //alpha: this._fillStylePath.push("alpha"),
                    color: this.paths.fill.push("color")
                },
                line: {
                    //alpha: this._lineStylePath.push("alpha"),
                    color: this.paths.line.push("color")
                }
            };
            this.dataXType = this.paths.dataX.getValue("this.getMetadata('dataType')");
            this.dataYType = this.paths.dataY.getValue("this.getMetadata('dataType')");
            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });
            this.records = _.zip(this.numericRecords, this.stringRecords);
            this.records = _.sortByOrder(this.records, ["size", "id"], ["desc", "asc"]);
            if (this.records.length) {
                ;

                var _$unzip = _.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.keyToIndex = {};
            this.indexToKey = {};
            this.yAxisValueToLabel = {};
            this.xAxisValueToLabel = {};
            this.numericRecords.forEach(function (record, index) {
                _this2.keyToIndex[record["id"]] = index;
                _this2.indexToKey[index] = record["id"];
            });
            this.stringRecords.forEach(function (record, index) {
                _this2.xAxisValueToLabel[_this2.numericRecords[index]["point"]["x"]] = record["point"]["x"];
                _this2.yAxisValueToLabel[_this2.numericRecords[index]["point"]["y"]] = record["point"]["y"];
            });
            this.normalizedRecords = this.normalizeRecords(this.numericRecords, ["size"]);
            this.plotterState = this.paths.plotter.getUntypedState ? this.paths.plotter.getUntypedState() : this.paths.plotter.getState();
            this.normalizedPointSizes = this.normalizedRecords.map(function (normalizedRecord) {
                if (_this2.plotterState && _this2.plotterState.sizeBy.length) {
                    var minScreenRadius = _this2.plotterState.minScreenRadius;
                    var maxScreenRadius = _this2.plotterState.maxScreenRadius;
                    return (normalizedRecord && normalizedRecord["size"] ? minScreenRadius + normalizedRecord["size"] * (maxScreenRadius - minScreenRadius) : _this2.plotterState.defaultScreenRadius) || 3;
                } else {
                    return _this2.plotterState.defaultScreenRadius || 3;
                }
            });
            this.axisChanged();
            this.busy = 1;
            this.chart.load({ data: _.pluck(this.numericRecords, "point"), unload: true, done: function done() {
                    if (_this2.busy > 1) {
                        _this2.busy = 0;
                        _this2.dataChanged();
                    } else {
                        _this2.busy = 0;
                    }
                } });
        }
    }, {
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            var _this3 = this;

            if (!this.chart) return;
            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "circle", ".c3-shape", { opacity: 0.3, "stroke-opacity": 0.0 });
                this.customStyle(selectedIndices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 1.0 });
                this.chart.select(["y"], selectedIndices, true);
            } else {
                this.customStyle(indices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 0.0 });
                this.chart.select(["y"], [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var _this4 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this4.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this4.keyToIndex[key]);
            });
            var unselectedIndices = _.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                this.customStyle(unselectedIndices, "circle", ".c3-shape", { opacity: 0.3, "stroke-opacity": 0.0 });
                this.customStyle(selectedIndices, "circle", ".c3-shape", { opacity: 1.0, "stroke-opacity": 0.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {
            d3.select(this.element).selectAll("circle").style("opacity", 1).style("stroke", "black").style("stroke-opacity", 0.0);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentDidUpdate", this).call(this);
            //console.log("resizing");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            this.chart.destroy();
            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentWillUnmount", this).call(this);
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            _get(Object.getPrototypeOf(WeaveC3ScatterPlot.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var axisChanged = this.axisChanged.bind(this);
            var dataChanged = this.dataChanged.bind(this);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = this._probedKeysChanged.bind(this);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: dataChanged }, { name: "dataX", path: plotterPath.push("dataX"), callbacks: [dataChanged, axisChanged] }, { name: "dataY", path: plotterPath.push("dataY"), callbacks: [dataChanged, axisChanged] }, { name: "sizeBy", path: plotterPath.push("sizeBy"), callbacks: dataChanged }, { name: "fill", path: plotterPath.push("fill"), callbacks: [dataChanged] }, { name: "line", path: plotterPath.push("line"), callbacks: dataChanged }, { name: "xAxis", path: this.toolPath.pushPlotter("xAxis"), callbacks: axisChanged }, { name: "yAxis", path: this.toolPath.pushPlotter("yAxis"), callbacks: axisChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];
            this.initializePaths(mapping);
            this.c3Config = {
                bindto: this.element,
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    rows: [],
                    x: "x",
                    xSort: false,
                    type: "scatter",
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    color: function color(_color, d) {
                        if (_this5.stringRecords && d.hasOwnProperty("index")) {
                            // find the corresponding index of numericRecords in stringRecords
                            var id = _this5.indexToKey[d.index];
                            var index = _.pluck(_this5.stringRecords, "id").indexOf(id);
                            var record = _this5.stringRecords[index];
                            return record && record["fill"] && record["fill"]["color"] ? record["fill"]["color"] : "#000000";
                        }
                        return "#000000";
                    },
                    onclick: function onclick(d) {
                        if (!_this5.keyDown && d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.setKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onselected: function onselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.addKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.removeKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([_this5.indexToKey[d.index]]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                legend: {
                    show: false
                },
                axis: {
                    x: {
                        label: {
                            text: "",
                            position: "outer-center"
                        },
                        tick: {
                            fit: false,
                            rotate: 0,
                            format: function format(num) {
                                if (_this5.paths.dataX && _this5.xAxisValueToLabel && _this5.dataXType !== "number") {
                                    return _this5.xAxisValueToLabel[num] || "";
                                } else {
                                    return String(_FormatUtils2.default.defaultNumberFormatting(num));
                                }
                            }
                        }
                    },
                    y: {
                        label: {
                            text: "",
                            position: "outer-middle"
                        },
                        tick: {
                            format: function format(num) {
                                if (_this5.paths.dataY && _this5.yAxisValueToLabel && _this5.dataYType !== "number") {
                                    return _this5.yAxisValueToLabel[num] || "";
                                } else {
                                    return String(_FormatUtils2.default.defaultNumberFormatting(num));
                                }
                            }
                        }
                    }
                },
                grid: {
                    x: {
                        show: true
                    },
                    y: {
                        show: true
                    }
                },
                point: {
                    r: function r(d) {
                        if (d.hasOwnProperty("index")) {
                            return _this5.normalizedPointSizes[d.index];
                        }
                    }
                },
                onrendered: this._updateStyle.bind(this)
            };
            this.chart = (0, _c.generate)(this.c3Config);
        }
    }]);

    return WeaveC3ScatterPlot;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3ScatterPlot;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::ScatterPlotTool", WeaveC3ScatterPlot);

},{"../WeaveTool":17,"../utils/FormatUtils":30,"./AbstractWeaveTool":24,"c3":"c3","d3":"d3","lodash":"lodash"}],30:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /// <reference path="../../typings/d3/d3.d.ts"/>

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FormatUtils = function () {
    function FormatUtils() {
        _classCallCheck(this, FormatUtils);
    }

    _createClass(FormatUtils, null, [{
        key: "defaultNumberFormatting",

        // this function returns the default number formating.
        // for number values, we round them to at most 4 decimal places
        // unless the number is very small, in which case we just return it
        value: function defaultNumberFormatting(x) {
            if (x < 0.0001) {
                return x;
            } else {
                return d3.round(x, 4);
            }
        }
    }]);

    return FormatUtils;
}();

exports.default = FormatUtils;

},{"d3":"d3"}],31:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /// <reference path="../../typings/lodash/lodash.d.ts"/>

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _lodash = require("lodash");

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var StandardLib = function () {
    function StandardLib() {
        _classCallCheck(this, StandardLib);
    }

    _createClass(StandardLib, null, [{
        key: "findDeep",

        /**
           * Searches for the first nested object with matching properties
           * @param roo The root Object.
           * @param match Either an Object with properties to match, or a Function that checks for a match.
         *
         * @returns returns an object with the matching properties
           */
        value: function findDeep(root, match) {
            if (typeof match !== "function") {
                match = _.matches(match);
            }
            if (match(root)) {
                return root;
            }
            if ((typeof root === "undefined" ? "undefined" : _typeof(root)) == "object") {
                var key;
                for (key in root) {
                    var found = this.findDeep(root[key], match);
                    if (found) return found;
                }
            }
        }
        /**
          * Adds undefined values to new state for properties in
          * current state not found in new state.
          */

    }, {
        key: "includeMissingPropertyPlaceholders",
        value: function includeMissingPropertyPlaceholders(currentState, newState) {
            var key;
            for (key in currentState) {
                if (!newState.hasOwnProperty(key)) {
                    newState[key] = undefined;
                }
            }
            return newState;
        }
        /**
          * Calculates an interpolated color for a normalized value.
          * @param normValue A Number between 0 and 1.
          * @param colors An Array or list of colors to interpolate between.  Normalized values of 0 and 1 will be mapped to the first and last colors.
          * @return An interpolated color associated with the given normValue based on the list of color values.
          */

    }, {
        key: "interpolateColor",
        value: function interpolateColor(normValue) {
            for (var _len = arguments.length, colors = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                colors[_key - 1] = arguments[_key];
            }

            // handle an array of colors as the second parameter
            if (colors.length === 1 && Array.isArray(colors[0])) {
                colors = colors[0];
            }
            // handle invalid parameters
            if (normValue < 0 || normValue > 1 || colors.length === 0) {
                return NaN;
            }
            // find the min and max colors we want to interpolate between
            var maxIndex = Math.floor(colors.length - 1);
            var leftIndex = Math.floor(maxIndex * normValue);
            var rightIndex = Math.floor(leftIndex + 1);
            // handle boundary condition
            if (rightIndex === colors.length) {
                return parseInt(colors[leftIndex], 16);
            }
            var minColor = colors[leftIndex];
            var maxColor = colors[rightIndex];
            // normalize the norm value between the two norm values associated with the surrounding colors
            normValue = normValue * maxIndex - leftIndex;
            var percentLeft = 1 - normValue; // relevance of minColor
            var percentRight = normValue; // relevance of maxColor
            var R = 0xFF0000;
            var G = 0x00FF00;
            var B = 0x0000FF;
            return percentLeft * (minColor & R) + percentRight * (maxColor & R) & R | percentLeft * (minColor & G) + percentRight * (maxColor & G) & G | percentLeft * (minColor & B) + percentRight * (maxColor & B) & B;
        }
        /**
        * This function converts a decimal number to a 6 digit hexadecimal string
        * @param dec A decimal number
        * @return the hexadecimal value of the decimal number
        */

    }, {
        key: "decimalToHex",
        value: function decimalToHex(dec) {
            return _.padLeft(dec.toString(16), 6, "0");
        }
        /**
         * This function return the normalized value between a range
         * if no range is provided, the default range will be 0 and 1
         *
         * @param value The value to be normalized
         * @param min the range min value
         * @param max the range max value
         */

    }, {
        key: "normalize",
        value: function normalize(value, min, max) {
            if (!min) {
                min = 0;
            }
            if (!max) {
                max = 1;
            }
            return (value - min) / (max - min);
        }
        /**
         *  This function takes merges an object into another
         *
         * @param into {object} the object to merge into
         * @param obj {obj} the object to merge from
         */

    }, {
        key: "merge",
        value: function merge(into, obj) {
            var attr;
            for (attr in obj) {
                into[attr] = obj[attr];
            }
        }
        /**
         * Temporary polyfill workaround for String.startsWith
         * for projects that are targetting es5
         *
         *  determines whether a string begins with the characters of another string, returning true or false as appropriate.
         *
         * @param str {string} the str string in which to search for in str.startsWith
         * @param searchString {string} The characters to be searched for at the start of this string.
         * @param position {number?} Optional. The position in this string at which to begin searching for searchString; defaults to 0.
         *
         * @returns true or false
         *
         */

    }, {
        key: "startsWith",
        value: function startsWith(str, searchString, position) {
            position = position || 0;
            return str.indexOf(searchString, position) === position;
        }
    }, {
        key: "resolveRelative",
        value: function resolveRelative(path, base) {
            // Upper directory
            if (StandardLib.startsWith(path, "../")) {
                return StandardLib.resolveRelative(path.slice(3), base.replace(/\/[^\/]*$/, ""));
            }
            // Relative to the root
            if (StandardLib.startsWith(path, "/")) {
                var match = base.match(/(\w*:\/\/)?[^\/]*\//) || [base];
                return match[0] + path.slice(1);
            }
            //relative to the current directory
            return base.replace(/\/[^\/]*$/, "") + "/" + path;
        }
    }, {
        key: "getDataBounds",
        value: function getDataBounds(column) {
            return {
                min: _.min(column),
                max: _.max(column)
            };
        }
        /**
         *
         *   This function return and object whose keys are url
         *   parameters and value
         */

    }, {
        key: "getUrlParams",
        value: function getUrlParams() {
            var queryParams = {};
            var query = window.location.search.substring(1);
            if (!query) {
                return {};
            }
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (typeof queryParams[pair[0]] === "undefined") {
                    queryParams[pair[0]] = decodeURIComponent(pair[1]);
                } else if (typeof queryParams[pair[0]] === "string") {
                    var arr = [queryParams[pair[0]], decodeURIComponent(pair[1])];
                    queryParams[pair[0]] = arr;
                } else {
                    queryParams[pair[0]].push(decodeURIComponent(pair[1]));
                }
            }
            return queryParams;
        }
    }]);

    return StandardLib;
}();

exports.default = StandardLib;

},{"lodash":"lodash"}],32:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactBootstrap = require("react-bootstrap");

var bs = _interopRequireWildcard(_reactBootstrap);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeaveTool = require("../outts/WeaveTool.jsx");

var _reactDatePicker = require("react-date-picker");

var _reactDatePicker2 = _interopRequireDefault(_reactDatePicker);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var customSearchStyle = {
    display: "flex",
    flexDirection: "row",
    height: 30,
    width: "100%"
};

var inputStyle = {
    flex: 1,
    paddingLeft: 4,
    paddingRight: 4
};

var searchButtonStyle = {
    flex: 1
};

var glyphStyle = {
    fontSize: "12px"
};

var CustomSearchTool = function (_React$Component) {
    _inherits(CustomSearchTool, _React$Component);

    function CustomSearchTool(props) {
        _classCallCheck(this, CustomSearchTool);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CustomSearchTool).call(this, props));

        _this.props.toolPath.request("ExternalTool");

        _this.state = {
            searchObject: _this.props.toolPath.push("searchValues").request("LinkableVariable").getState() || {}
        };
        _this.searchFields = _this.props.toolPath.push("searchFields").request("LinkableVariable").getState() || [];

        _this.updateStateFuncs = {};
        _this.searchFields.forEach(function (field) {
            this.updateStateFuncs[field.label] = this.updateState.bind(this, field.label);
        }, _this);

        _this.debouncedComponentDidUpdate = _lodash2.default.debounce(function () {
            _this.props.toolPath.state("searchValues", _this.state.searchObject);
        }, 2000);
        return _this;
    }

    _createClass(CustomSearchTool, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            this.props.toolPath.addCallback(this, this.handleWeaveState, true, false);
            this.props.toolPath.push("searchFields").addCallback(this, function () {
                _this2.searchFields = _this2.props.toolPath.getState("searchFields") || [];
                _this2.updateStateFuncs = {};
                _this2.searchFields.forEach(function (field) {
                    _this2.updateStateFuncs[field.label] = _this2.updateState.bind(_this2, field.label);
                }, _this2);
            }, true);
        }
    }, {
        key: "handleWeaveState",
        value: function handleWeaveState() {
            this.setState({
                searchObject: this.props.toolPath.getState("searchValues") || {}
            });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            // this.debouncedComponentDidUpdate();
        }
    }, {
        key: "submitSearch",
        value: function submitSearch(event) {
            this.props.toolPath.state("searchValues", this.state.searchObject);
            if (event) {
                event.preventDefault();
            }
        }
    }, {
        key: "updateState",
        value: function updateState(label, event, callback) {
            var components = _lodash2.default.clone(this.state.searchObject);
            components[label] = event.target.value;
            this.setState({
                searchObject: components
            }, callback);
        }
    }, {
        key: "updateDateField",
        value: function updateDateField(label, value, moment) {
            // TODO use moment object to manipulate format
            var components = _lodash2.default.clone(this.state.searchObject);
            components[label] = value;
            this.setState({
                searchObject: components
            });
        }
    }, {
        key: "updateStateDateField",
        value: function updateStateDateField(label, event) {
            var datePicker = this.refs["datePicker" + label];

            // set the datepicker date so that it moves to that view
            if (datePicker) {
                if (isNaN(Date.parse(event.target.value)) === false) {
                    datePicker.gotoDate(new Date(event.target.value));
                }
            }
            this.updateStateFuncs[label](event);
        }
    }, {
        key: "removeSearchOption",
        value: function removeSearchOption(key) {
            var _this3 = this;

            var components = _lodash2.default.clone(this.state.searchObject);
            delete components[key];
            this.setState({
                searchObject: components
            }, function () {
                if (!Object.keys(_this3.state.searchObject).length) {
                    _this3.submitSearch();
                }
            });
        }
    }, {
        key: "handleDropdownSelect",
        value: function handleDropdownSelect(event, eventKey) {
            var components = _lodash2.default.clone(this.state.searchObject);
            components[eventKey] = this.state.searchObject[eventKey] || "";
            this.setState({
                searchObject: components
            });
        }
    }, {
        key: "render",
        value: function render() {
            var menuItems = this.searchFields.map(function (searchField, index) {
                return _react2.default.createElement(
                    bs.MenuItem,
                    { key: index, eventKey: searchField.label },
                    " ",
                    searchField.label,
                    " "
                );
            });

            var inputs = [];

            for (var i in this.searchFields) {
                var label = this.searchFields[i].label;
                var type = this.searchFields[i].type;

                if (this.state.searchObject.hasOwnProperty(label)) {

                    var closeButton = _react2.default.createElement(
                        bs.Button,
                        { className: "close-button", key: "close" + i, tabIndex: -1, onClick: this.removeSearchOption.bind(this, label), bsSize: this.props.bsSize },
                        _react2.default.createElement(bs.Glyphicon, { glyph: "remove", style: glyphStyle })
                    );

                    var searchInput = "";

                    if (type === "date") {
                        var dateFormat = this.searchFields[i].dateFormat || "MM/DD/YYYY";
                        var datePicker = _react2.default.createElement(
                            bs.Popover,
                            { id: "date picker" },
                            _react2.default.createElement(_reactDatePicker2.default, { ref: "datePicker" + label, dateFormat: dateFormat, date: this.state.searchObject[label], onChange: this.updateDateField.bind(this, label) })
                        );

                        searchInput = _react2.default.createElement(
                            "div",
                            { style: inputStyle, key: "searchInput" + i },
                            _react2.default.createElement(
                                bs.OverlayTrigger,
                                { trigger: "click", rootClose: true, placement: "bottom", overlay: datePicker },
                                _react2.default.createElement(bs.Input, {
                                    bsSize: this.props.bsSize,
                                    value: this.state.searchObject[label],
                                    ref: label,
                                    type: "text",
                                    addonBefore: label,
                                    buttonAfter: closeButton,
                                    hasFeedback: true,
                                    placeholder: dateFormat,
                                    onChange: this.updateStateDateField.bind(this, label) })
                            )
                        );
                    } else if (type === "text") {
                        searchInput = _react2.default.createElement(
                            "div",
                            { style: inputStyle, key: "searchInput" + i },
                            _react2.default.createElement(bs.Input, {
                                bsSize: this.props.bsSize,
                                value: this.state.searchObject[label],
                                ref: label,
                                type: "text",
                                addonBefore: label,
                                buttonAfter: closeButton,
                                hasFeedback: true,
                                placeholder: "Enter " + label,
                                onChange: this.updateStateFuncs[label] })
                        );
                    }
                    inputs.push(searchInput);
                }
            }
            return _react2.default.createElement(
                "div",
                { style: customSearchStyle },
                _react2.default.createElement(
                    bs.Dropdown,
                    { id: "dropdown", title: "Dropdown", bsSize: this.props.bsSize, bsStyle: "primary", onSelect: this.handleDropdownSelect.bind(this) },
                    _react2.default.createElement(
                        bs.Dropdown.Toggle,
                        { bsStyle: "primary" },
                        _react2.default.createElement(bs.Glyphicon, { glyph: "search" })
                    ),
                    _react2.default.createElement(
                        bs.Dropdown.Menu,
                        null,
                        menuItems
                    )
                ),
                _react2.default.createElement(
                    "form",
                    { onsubmit: this.submitSearch.bind(this), style: customSearchStyle },
                    inputs,
                    Object.keys(this.state.searchObject).length ? _react2.default.createElement(
                        "div",
                        { style: { float: "right" } },
                        _react2.default.createElement(
                            bs.ButtonInput,
                            { type: "submit", bsStyle: "primary", onClick: this.submitSearch.bind(this) },
                            " Search "
                        )
                    ) : null
                )
            );
        }
    }]);

    return CustomSearchTool;
}(_react2.default.Component);

exports.default = CustomSearchTool;

(0, _WeaveTool.registerToolImplementation)("CustomSearchTool", CustomSearchTool);

},{"../outts/WeaveTool.jsx":17,"lodash":"lodash","react":"react","react-bootstrap":"react-bootstrap","react-date-picker":7}],33:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _Layout = require("../outts/react-flexible-layout/Layout.jsx");

var _Layout2 = _interopRequireDefault(_Layout);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeavePanel = require("./WeavePanel.js");

var _WeavePanel2 = _interopRequireDefault(_WeavePanel);

var _WeavePanelManager = require("./WeavePanelManager.js");

var WeavePanelManager = _interopRequireWildcard(_WeavePanelManager);

var _weaveC3Barchart = require("../outts/tools/weave-c3-barchart.jsx");

var _weaveC3Barchart2 = _interopRequireDefault(_weaveC3Barchart);

var _weaveC3Scatterplot = require("../outts/tools/weave-c3-scatterplot.jsx");

var _weaveC3Scatterplot2 = _interopRequireDefault(_weaveC3Scatterplot);

var _weaveC3Colorlegend = require("../outts/tools/weave-c3-colorlegend.jsx");

var _weaveC3Colorlegend2 = _interopRequireDefault(_weaveC3Colorlegend);

var _weaveC3Linechart = require("./tools/weave-c3-linechart.jsx");

var _weaveC3Linechart2 = _interopRequireDefault(_weaveC3Linechart);

var _weaveC3Piechart = require("../outts/tools/weave-c3-piechart.jsx");

var _weaveC3Piechart2 = _interopRequireDefault(_weaveC3Piechart);

var _weaveC3Histogram = require("../outts/tools/weave-c3-histogram.jsx");

var _weaveC3Histogram2 = _interopRequireDefault(_weaveC3Histogram);

var _weaveBarchart = require("./tools/weave-barchart.jsx");

var _weaveBarchart2 = _interopRequireDefault(_weaveBarchart);

var _map = require("./tools/map.js");

var _map2 = _interopRequireDefault(_map);

var _weaveReactTable = require("./tools/weave-react-table.jsx");

var _weaveReactTable2 = _interopRequireDefault(_weaveReactTable);

var _weaveSessionStateMenu = require("./tools/weave-session-state-menu.jsx");

var _weaveSessionStateMenu2 = _interopRequireDefault(_weaveSessionStateMenu);

var _CustomSearchTool = require("./CustomSearchTool.jsx");

var _CustomSearchTool2 = _interopRequireDefault(_CustomSearchTool);

var _WeaveTool = require("../outts/WeaveTool.jsx");

var _ToolOverlay = require("../outts/ToolOverlay.jsx");

var _ToolOverlay2 = _interopRequireDefault(_ToolOverlay);

var _StandardLib = require("../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
/* global Weave, weavejs */

var LAYOUT = "Layout";

var LEFT = "left";
var RIGHT = "right";
var TOP = "top";
var BOTTOM = "bottom";
var VERTICAL = "vertical";
var HORIZONTAL = "horizontal";

var TOOLOVERLAY = "tooloverlay";

var WeaveLayoutManager = function (_React$Component) {
    _inherits(WeaveLayoutManager, _React$Component);

    function WeaveLayoutManager(props) {
        _classCallCheck(this, WeaveLayoutManager);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveLayoutManager).call(this, props));

        _this.weave = _this.props.weave || new Weave();
        _this.weave.path(LAYOUT).request("FlexibleLayout");
        _this.margin = 8;
        return _this;
    }

    _createClass(WeaveLayoutManager, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this2 = this;

            window.addEventListener("resize", this._forceUpdate = _lodash2.default.throttle(function () {
                _this2.dirty = true;_this2.forceUpdate();
            }, 30));
            this.weave.root.childListCallbacks.addGroupedCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true);
            this.weave.root.childListCallbacks.addGroupedCallback(this, function () {
                console.log("test child list callback");
            });
            this.weave.path(LAYOUT).addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true);
            this.weave.path(LAYOUT).state(this.simplifyState(this.weave.path(LAYOUT).getState()));
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            window.removeEventListener("resize", this._forceUpdate);
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            if (Weave.detectChange(this, this.weave.getObject(LAYOUT)) || this.dirty) {
                // dirty flag to trigger render on window resize
                this.dirty = false;
                //_.debounce(this.forceUpdate.bind(this), 0)();
                this.forceUpdate();
            }
        }
    }, {
        key: "saveState",
        value: function saveState(newState) {
            newState = this.simplifyState(newState);
            newState.flex = 1;
            this.weave.path(LAYOUT).state(newState);
            // temporary hack because weave
            // doesn't properly callback forceUpdate
            //this.forceUpdate();
        }
    }, {
        key: "onDragStart",
        value: function onDragStart(id, event) {
            this.toolDragged = id;
            var toolRef = id[0]; // toolName as used in the ref for the weave tool.
            var element = _reactDom2.default.findDOMNode(this.refs[toolRef]);
            event.dataTransfer.setDragImage(element, 0, 0);
            event.dataTransfer.setData('text/html', null);
        }
    }, {
        key: "hideOverlay",
        value: function hideOverlay() {
            var toolOverlayStyle = _lodash2.default.clone(this.refs[TOOLOVERLAY].state.style);
            toolOverlayStyle.visibility = "hidden";
            toolOverlayStyle.left = toolOverlayStyle.top = toolOverlayStyle.width = toolOverlayStyle.height = 0;
            this.refs[TOOLOVERLAY].setState({
                style: toolOverlayStyle
            });
        }
    }, {
        key: "onDragEnd",
        value: function onDragEnd() {
            if (this.toolDragged && this.toolOver) {
                this.updateLayout(this.toolDragged, this.toolOver, this.dropZone);
                this.toolDragged = null;
                this.dropZone = null;
                this.hideOverlay();
            }
        }
    }, {
        key: "onDragOver",
        value: function onDragOver(toolOver, event) {
            if (!this.toolDragged) {
                return;
            }
            if (_lodash2.default.isEqual(this.toolDragged, toolOver)) {
                // hide the overlay if hovering over the tool being dragged
                this.toolOver = null;
                this.hideOverlay();
                return;
            }

            var toolNode = this.refs[LAYOUT].getDOMNodeFromId(toolOver);
            var toolNodePosition = toolNode.getBoundingClientRect();

            var toolOverlayStyle = _lodash2.default.clone(this.refs[TOOLOVERLAY].state.style);
            var dropZone = this.getDropZone(toolOver, event);
            toolOverlayStyle.left = toolNodePosition.left;
            toolOverlayStyle.top = toolNodePosition.top;
            toolOverlayStyle.width = toolNodePosition.width;
            toolOverlayStyle.height = toolNodePosition.height;
            toolOverlayStyle.visibility = "visible";

            if (dropZone === LEFT) {
                toolOverlayStyle.width = toolNodePosition.width / 2;
            } else if (dropZone === RIGHT) {
                toolOverlayStyle.left = toolNodePosition.left + toolNodePosition.width / 2;
                toolOverlayStyle.width = toolNodePosition.width / 2;
            } else if (dropZone === BOTTOM) {
                toolOverlayStyle.top = toolNodePosition.top + toolNodePosition.height / 2;
                toolOverlayStyle.height = toolNodePosition.height / 2;
            } else if (dropZone === TOP) {
                toolOverlayStyle.height = toolNodePosition.height / 2;
            }

            if (dropZone !== this.dropZone || !_lodash2.default.isEqual(toolOver, this.toolOver)) {
                this.refs[TOOLOVERLAY].setState({
                    style: toolOverlayStyle
                });
            }

            this.dropZone = dropZone;
            this.toolOver = toolOver;
        }
    }, {
        key: "getDropZone",
        value: function getDropZone(id, event) {
            if (this.toolDragged) {
                if (!_lodash2.default.isEqual(this.toolDragged, id)) {
                    var toolNode = this.refs[LAYOUT].getDOMNodeFromId(id);
                    var toolNodePosition = toolNode.getBoundingClientRect();

                    var center = {
                        x: (toolNodePosition.right - toolNodePosition.left) / 2,
                        y: (toolNodePosition.bottom - toolNodePosition.top) / 2
                    };

                    var mousePosRelativeToCenter = {
                        x: event.clientX - (toolNodePosition.left + center.x),
                        y: event.clientY - (toolNodePosition.top + center.y)
                    };

                    var mouseNorm = {
                        x: mousePosRelativeToCenter.x / (toolNodePosition.width / 2),
                        y: mousePosRelativeToCenter.y / (toolNodePosition.height / 2)
                    };

                    var mousePolarCoord = {
                        r: Math.sqrt(mouseNorm.x * mouseNorm.x + mouseNorm.y * mouseNorm.y),
                        theta: Math.atan2(mouseNorm.y, mouseNorm.x)
                    };

                    var zones = [RIGHT, BOTTOM, LEFT, TOP];

                    var zoneIndex = Math.round(mousePolarCoord.theta / (2 * Math.PI) * 4 + 4) % 4;

                    if (mousePolarCoord.r < 0.34) {
                        return "center";
                    } else {
                        return zones[zoneIndex];
                    }
                }
            }
        }
    }, {
        key: "simplifyState",
        value: function simplifyState(state) {
            if (!state) return {};
            var children = state.children;

            if (!children) {
                return state;
            }

            if (children.length === 1) {
                return this.simplifyState(children[0]);
            }

            var simpleChildren = [];

            for (var i = 0; i < children.length; i++) {
                var child = this.simplifyState(children[i]);
                if (child.children && child.direction === state.direction) {
                    var childChildren = child.children;
                    for (var ii = 0; ii < childChildren.length; ii++) {
                        var childChild = childChildren[ii];
                        childChild.flex *= child.flex;
                        simpleChildren.push(childChild);
                    }
                } else {
                    simpleChildren.push(child);
                }
            }
            state.children = simpleChildren;
            var totalSizeChildren = _lodash2.default.sum(_lodash2.default.map(children, "flex"));

            //Scale flex values between 0 and 1 so they sum to 1, avoiding an apparent
            //flex bug where space is lost if sum of flex values is less than 1.
            for (var i = 0; i < state.children.length; i++) {
                state.children[i].flex = _StandardLib2.default.normalize(state.children[i].flex, 0, totalSizeChildren);
            }

            return state;
        }
    }, {
        key: "updateLayout",
        value: function updateLayout(toolDragged, toolDroppedOn, dropZone) {

            if (!this.toolDragged || !this.toolOver || !this.dropZone) {
                return;
            }

            var newState = _lodash2.default.cloneDeep(this.weave.path(LAYOUT).getState());
            var src = _StandardLib2.default.findDeep(newState, { id: toolDragged });
            var dest = _StandardLib2.default.findDeep(newState, { id: toolDroppedOn });
            if (_lodash2.default.isEqual(src.id, dest.id)) {
                return;
            }

            if (dropZone === "center") {
                var srcId = src.id;
                src.id = dest.id;
                dest.id = srcId;
            } else {
                var srcParentArray = _StandardLib2.default.findDeep(newState, function (obj) {
                    return Array.isArray(obj) && obj.indexOf(src) >= 0;
                });

                srcParentArray.splice(srcParentArray.indexOf(src), 1);

                delete dest.id;
                dest.direction = dropZone === TOP || dropZone === BOTTOM ? VERTICAL : HORIZONTAL;

                dest.children = [{
                    id: toolDragged,
                    flex: 0.5
                }, {
                    id: toolDroppedOn,
                    flex: 0.5
                }];
                if (dropZone === BOTTOM || dropZone === RIGHT) {
                    dest.children.reverse();
                }
            }
            this.saveState(newState);
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var children = [];
            var newState = this.weave.path(LAYOUT).getState();

            var paths = this.weave.path().getChildren();
            var rect;
            if (this.element) {
                rect = this.element.getBoundingClientRect();
            }

            for (var i = 0; i < paths.length; i++) {
                var path = paths[i];
                var impl = path.getType();
                if (impl === "weave.visualization.tools::ExternalTool" && path.getType("toolClass")) {
                    impl = path.getState("toolClass");
                }
                if (impl === "weavejs.core.LinkableHashMap" && path.getType("class")) impl = path.getState("class");
                impl = (0, _WeaveTool.getToolImplementation)(impl);
                var toolName = path.getPath()[0];
                var node;
                var toolRect;
                var toolPosition;
                if (impl) {
                    if (this.refs[LAYOUT] && rect) {
                        node = this.refs[LAYOUT].getDOMNodeFromId(path.getPath());
                        if (node) {
                            toolRect = node.getBoundingClientRect();
                            toolPosition = {
                                top: toolRect.top - rect.top,
                                left: toolRect.left - rect.left,
                                width: toolRect.right - toolRect.left,
                                height: toolRect.bottom - toolRect.top,
                                position: "absolute"
                            };
                        }
                    }
                    children.push(_react2.default.createElement(_WeaveTool.WeaveTool, { ref: toolName, key: toolName, toolPath: path, style: toolPosition,
                        onDragOver: this.onDragOver.bind(this, path.getPath()), onDragStart: this.onDragStart.bind(this, path.getPath()), onDragEnd: this.onDragEnd.bind(this)
                    }));
                }
            }

            return _react2.default.createElement(
                "div",
                { ref: function ref(elt) {
                        _this3.element = elt;
                    }, style: { width: "100%", height: "100%", display: "flex", position: "relative" } },
                _react2.default.createElement(_Layout2.default, { key: LAYOUT, ref: LAYOUT, state: _lodash2.default.cloneDeep(newState), onStateChange: this.saveState.bind(this) }),
                children,
                _react2.default.createElement(_ToolOverlay2.default, { ref: TOOLOVERLAY })
            );
        }
    }]);

    return WeaveLayoutManager;
}(_react2.default.Component);

exports.default = WeaveLayoutManager;

},{"../outts/ToolOverlay.jsx":16,"../outts/WeaveTool.jsx":17,"../outts/react-flexible-layout/Layout.jsx":18,"../outts/tools/weave-c3-barchart.jsx":25,"../outts/tools/weave-c3-colorlegend.jsx":26,"../outts/tools/weave-c3-histogram.jsx":27,"../outts/tools/weave-c3-piechart.jsx":28,"../outts/tools/weave-c3-scatterplot.jsx":29,"../outts/utils/StandardLib.js":31,"./CustomSearchTool.jsx":32,"./WeavePanel.js":34,"./WeavePanelManager.js":35,"./tools/map.js":37,"./tools/weave-barchart.jsx":49,"./tools/weave-c3-linechart.jsx":50,"./tools/weave-react-table.jsx":51,"./tools/weave-session-state-menu.jsx":52,"lodash":"lodash","react":"react","react-dom":"react-dom"}],34:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function percentToNumber(percentString) {
    if (percentString.endsWith("%")) {
        var percentValue = Number(percentString.substring(0, percentString.length - 1));
        return percentValue / 100.0;
    } else {
        return Number(percentString);
    }
}

var WeavePanel = function () {
    function WeavePanel(parent, toolPath, ToolClass) {
        var _this = this;

        _classCallCheck(this, WeavePanel);

        this.toolPath = toolPath;
        this.parent = parent;

        this.plotManagerPath = toolPath.push("children", "visualization", "plotManager");
        this.toolName = toolPath.getPath().pop();
        this.element = (0, _jquery2.default)("<div></div>").appendTo(parent).attr("id", this.toolName).css("borderStyle", "solid").css("borderColor", "4D5258").css("borderWidth", "2px").css("background", "rgba(255, 255, 255, 1.0)").css("position", "absolute");

        this.tool = new ToolClass(this.element, toolPath);
        var boundFunc = _lodash2.default.debounce(this._panelChanged.bind(this), 100);

        (0, _jquery2.default)(window).resize(boundFunc);

        ["panelY", "panelX", "panelHeight", "panelWidth", "maximized", "zOrder", "panelBorderColor"].forEach(function (item) {
            _this.toolPath.push(item).addCallback(boundFunc, true, false);
        }, this);
    }

    _createClass(WeavePanel, [{
        key: "_panelChanged",
        value: function _panelChanged() {
            var top, left, height, width;
            var toolPath = this.toolPath;
            var parent = this.parent;

            if (toolPath.getState("maximized")) {
                top = 0;
                left = 0;
                height = (0, _jquery2.default)(parent).height();
                width = (0, _jquery2.default)(parent).width();
            } else {
                top = percentToNumber(toolPath.getState("panelY")) * (0, _jquery2.default)(parent).height();
                left = percentToNumber(toolPath.getState("panelX")) * (0, _jquery2.default)(parent).width();
                height = percentToNumber(toolPath.getState("panelHeight")) * (0, _jquery2.default)(parent).height();
                width = percentToNumber(toolPath.getState("panelWidth")) * (0, _jquery2.default)(parent).width();
            }

            this.element.css("borderColor", toolPath.getState("panelBorderColor"));

            this.element.css("position", "absolute").css({ top: top, left: left, height: height, width: width, "max-height": height, "max-width": width }).css({ "-webkit-transform": "translateZ(0)" }); /* In Webkit, forces the div to be a compositing layer. */
            this._updateContents();
        }
    }, {
        key: "destroy",
        value: function destroy() {
            this.element.remove();
            this.tool.destroy();
        }
    }]);

    return WeavePanel;
}();

exports.default = WeavePanel;

},{"jquery":"jquery","lodash":"lodash"}],35:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.registerToolImplementation = registerToolImplementation;
exports.init = init;

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeavePanel = require("./WeavePanel.js");

var _WeavePanel2 = _interopRequireDefault(_WeavePanel);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Weave panel manager "singleton" module
 */

var toolRegistry = null;
var tools = {};
var weaveRootElmt = null;
var weaveRootPath = null;

function _createTool(parent, path) {
    var ToolClass = toolRegistry[path.getType()];
    var panel;

    if (ToolClass) {
        panel = new _WeavePanel2.default(parent, path, ToolClass);
    }
    return panel;
}

function _toolsChanged() {
    var toolNames = _lodash2.default.keys(tools);
    var newNames = weaveRootPath.getNames();

    var removedToolNames = _lodash2.default.difference(toolNames, newNames);
    var addedToolNames = _lodash2.default.difference(newNames, toolNames);

    removedToolNames.forEach(function (name) {
        tools[name].destroy();
        delete tools[name];
    });

    addedToolNames.forEach(function (name) {
        var tool = _createTool(weaveRootElmt, weaveRootPath.push(name));
        if (tool) {
            tools[name] = tool;
        }
    });

    var zIndex = 0;
    for (var idx in newNames) {
        var tool = tools[newNames[idx]];

        if (!tool) {
            continue;
        }

        var modifier = 9000 * tool.toolPath.push("zOrder").getState();
        tool.element.css("z-index", zIndex + modifier);

        zIndex++;
    }
}

// publicly exposed function
function registerToolImplementation(asClassName, jsClass) {
    if (!toolRegistry) {
        toolRegistry = {};
    }
    toolRegistry[asClassName] = jsClass;
}

// publicly exposed function
// initialize the weave panel manager
// by setting up the callback.
function init(root, weave) {
    weaveRootElmt = (0, _jquery2.default)(root);
    weaveRootPath = weave.path();
    weaveRootPath.getValue("childListCallbacks.addGroupedCallback")(null, _toolsChanged, true);
}

},{"./WeavePanel.js":34,"jquery":"jquery","lodash":"lodash"}],36:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.loadLayout = exports.getUrlParams = exports.MenuTool = exports.DataTable = exports.Map = exports.Histogram = exports.PieChart = exports.LineChart = exports.ColorLegend = exports.ScatterPlot = exports.Barchart = exports.Layout = undefined;

var _WeaveLayoutManager = require("./WeaveLayoutManager");

var _WeaveLayoutManager2 = _interopRequireDefault(_WeaveLayoutManager);

var _weaveC3Barchart = require("../outts/tools/weave-c3-barchart.jsx");

var _weaveC3Barchart2 = _interopRequireDefault(_weaveC3Barchart);

var _weaveC3Scatterplot = require("../outts/tools/weave-c3-scatterplot.jsx");

var _weaveC3Scatterplot2 = _interopRequireDefault(_weaveC3Scatterplot);

var _weaveC3Colorlegend = require("../outts/tools/weave-c3-colorlegend.jsx");

var _weaveC3Colorlegend2 = _interopRequireDefault(_weaveC3Colorlegend);

var _weaveC3Linechart = require("./tools/weave-c3-linechart.jsx");

var _weaveC3Linechart2 = _interopRequireDefault(_weaveC3Linechart);

var _weaveC3Piechart = require("../outts/tools/weave-c3-piechart.jsx");

var _weaveC3Piechart2 = _interopRequireDefault(_weaveC3Piechart);

var _weaveC3Histogram = require("../outts/tools/weave-c3-histogram.jsx");

var _weaveC3Histogram2 = _interopRequireDefault(_weaveC3Histogram);

var _map = require("./tools/map.js");

var _map2 = _interopRequireDefault(_map);

var _weaveReactTable = require("./tools/weave-react-table.jsx");

var _weaveReactTable2 = _interopRequireDefault(_weaveReactTable);

var _weaveSessionStateMenu = require("./tools/weave-session-state-menu.jsx");

var _weaveSessionStateMenu2 = _interopRequireDefault(_weaveSessionStateMenu);

var _StandardLib = require("../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _jszip = require("jszip");

var _jszip2 = _interopRequireDefault(_jszip);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*global Weave, weavejs*/

weavejs.util.JS.JSZip = _jszip2.default;

// var WeaveUI = {
//     Layout: WeaveLayoutManager,
//     Barchart: WeaveC3Barchart,
//     ScatterPlot: WeaveC3ScatterPlot,
//     ColorLegend: WeaveC3ColorLegend,
//     LineChart: WeaveC3LineChart,
//     PieChart: WeaveC3PieChart,
//     Histogram: WeaveC3Histogram,
//     Map: WeaveOpenLayersMap,
//     DataTable: WeaveReactTable,
//     MenuTool: SessionStateMenuTool,
//     getUrlParams: StandardLib.getUrlParams,
//     loadLayout: function(weave, fileName, targetEltId, callback) {
//
//         function render() {
//             ReactDOM.render(
//                 <WeaveUI.Layout weave={weave}/>,
//                 document.getElementById(targetEltId),
//                 callback
//             );
//         }
//
//         weavejs.core.WeaveArchive.loadUrl(weave, fileName).then(render, e => {
//             console.error(e)
//         });
//
//     }
// };
//
// // namespace WeaveUI
// export default WeaveUI;

var Layout = exports.Layout = _WeaveLayoutManager2.default;
var Barchart = exports.Barchart = _weaveC3Barchart2.default;
var ScatterPlot = exports.ScatterPlot = _weaveC3Scatterplot2.default;
var ColorLegend = exports.ColorLegend = _weaveC3Colorlegend2.default;
var LineChart = exports.LineChart = _weaveC3Linechart2.default;
var PieChart = exports.PieChart = _weaveC3Piechart2.default;
var Histogram = exports.Histogram = _weaveC3Histogram2.default;
var Map = exports.Map = _map2.default;
var DataTable = exports.DataTable = _weaveReactTable2.default;
var MenuTool = exports.MenuTool = _weaveSessionStateMenu2.default;
var getUrlParams = exports.getUrlParams = _StandardLib2.default.getUrlParams;

var loadLayout = exports.loadLayout = function loadLayout(weave, fileName, targetEltId, callback) {

    function render() {
        _reactDom2.default.render(_react2.default.createElement(WeaveUI.Layout, { weave: weave }), document.getElementById(targetEltId), callback);
    }

    if (!fileName && weave) {
        render();
    }

    weavejs.core.WeaveArchive.loadUrl(weave, fileName).then(render, function (e) {
        console.error(e);
    });
};

},{"../outts/tools/weave-c3-barchart.jsx":25,"../outts/tools/weave-c3-colorlegend.jsx":26,"../outts/tools/weave-c3-histogram.jsx":27,"../outts/tools/weave-c3-piechart.jsx":28,"../outts/tools/weave-c3-scatterplot.jsx":29,"../outts/utils/StandardLib.js":31,"./WeaveLayoutManager":33,"./tools/map.js":37,"./tools/weave-c3-linechart.jsx":50,"./tools/weave-react-table.jsx":51,"./tools/weave-session-state-menu.jsx":52,"jszip":"jszip","react":"react","react-dom":"react-dom"}],37:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _Layer = require("./map/layers/Layer.js");

var _Layer2 = _interopRequireDefault(_Layer);

var _FeatureLayer = require("./map/layers/FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _GeometryLayer = require("./map/layers/GeometryLayer.js");

var _GeometryLayer2 = _interopRequireDefault(_GeometryLayer);

var _TileLayer = require("./map/layers/TileLayer.js");

var _TileLayer2 = _interopRequireDefault(_TileLayer);

var _ImageGlyphLayer = require("./map/layers/ImageGlyphLayer.js");

var _ImageGlyphLayer2 = _interopRequireDefault(_ImageGlyphLayer);

var _ScatterPlotLayer = require("./map/layers/ScatterPlotLayer.js");

var _ScatterPlotLayer2 = _interopRequireDefault(_ScatterPlotLayer);

var _controls = require("./map/controls.js");

var _interactions = require("./map/interactions.js");

var _interactions2 = _interopRequireDefault(_interactions);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/* eslint-disable */

/* eslint-enable */

/*global weavejs*/

var WeaveOpenLayersMap = function (_AbstractWeaveTool) {
	_inherits(WeaveOpenLayersMap, _AbstractWeaveTool);

	function WeaveOpenLayersMap(props) {
		_classCallCheck(this, WeaveOpenLayersMap);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveOpenLayersMap).call(this, props));

		_this.layers = {};
		return _this;
	}

	_createClass(WeaveOpenLayersMap, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			_get(Object.getPrototypeOf(WeaveOpenLayersMap.prototype), "componentDidMount", this).call(this);

			this.interactionModePath = this.toolPath.weave.path("WeaveProperties", "toolInteractions", "defaultDragMode");

			this.map = new _openlayers2.default.Map({
				interactions: (0, _interactions2.default)(this),
				controls: [],
				target: this.element
			});

			this.zoomButtons = new _openlayers2.default.control.Zoom();
			this.slider = new _openlayers2.default.control.ZoomSlider();
			this.pan = new _controls.PanCluster();

			this.toolPath.push("projectionSRS").addCallback(this, this.onProjectionChanged, true);
			this.toolPath.push("showZoomControls").addCallback(this, this.onZoomControlToggle, true);
			this.toolPath.push("showMouseModeControls").addCallback(this, this.onMouseModeControlToggle, true);

			this.mouseModeButtons = new _controls.InteractionModeCluster({ interactionModePath: this.interactionModePath });

			this.plottersPath = this.toolPath.push("children", "visualization", "plotManager", "plotters");
			this.layerSettingsPath = this.toolPath.push("children", "visualization", "plotManager", "layerSettings");
			this.zoomBoundsPath = this.toolPath.push("children", "visualization", "plotManager", "zoomBounds");

			this.plottersPath.getObject().childListCallbacks.addGroupedCallback(this, this.plottersChanged, true);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter, true);
		}
	}, {
		key: "onProjectionChanged",
		value: function onProjectionChanged() {
			var projectionSRS = this.toolPath.push("projectionSRS").getState() || "EPSG:3857";
			var view = new _openlayers2.default.View({ projection: projectionSRS });

			this.centerCallbackHandle = view.on("change:center", this.setSessionCenter, this);
			this.resolutionCallbackHandle = view.on("change:resolution", this.setSessionZoom, this);
			this.map.setView(view);

			this.getSessionCenter();
		}
	}, {
		key: "resize",
		value: function resize() {
			this.map.updateSize();
			var viewport = this.map.getViewport();
			var screenBounds = new weavejs.geom.Bounds2D(0, 0, viewport.clientWidth, viewport.clientHeight);
			this.zoomBoundsPath.getObject().setScreenBounds(screenBounds, true);
		}
	}, {
		key: "updateControlPositions",
		value: function updateControlPositions() {
			if (this.toolPath.push("showZoomControls").getState()) {
				(0, _jquery2.default)(this.element).find(".ol-control.panCluster").css({ top: "0.5em", left: "0.5em" });
				(0, _jquery2.default)(this.element).find(".ol-control.ol-zoom").css({ top: "5.5em", left: "2.075em" });
				(0, _jquery2.default)(this.element).find(".ol-control.ol-zoomslider").css({ top: "9.25em", left: "2.075em" });
				(0, _jquery2.default)(this.element).find(".ol-control.iModeCluster").css({ top: "20.75em", left: "0.6em" });
			} else {
				(0, _jquery2.default)(this.element).find(".ol-control");
			}
		}
	}, {
		key: "onMouseModeControlToggle",
		value: function onMouseModeControlToggle() {
			var showMouseModeControls = this.toolPath.push("showMouseModeControls").getState();
			if (showMouseModeControls) {
				this.map.addControl(this.mouseModeButtons);
			} else {
				this.map.removeControl(this.mouseModeButtons);
			}
			this.updateControlPositions();
		}
	}, {
		key: "onZoomControlToggle",
		value: function onZoomControlToggle() {
			var showZoomControls = this.toolPath.push("showZoomControls").getState();
			if (showZoomControls) {
				this.map.addControl(this.slider);
				this.map.addControl(this.pan);
				this.map.addControl(this.zoomButtons);
			} else {
				this.map.removeControl(this.slider);
				this.map.removeControl(this.pan);
				this.map.removeControl(this.zoomButtons);
			}
			this.updateControlPositions();
		}
	}, {
		key: "setSessionCenter",
		value: function setSessionCenter() {
			var _map$getView$getCente = this.map.getView().getCenter();

			var _map$getView$getCente2 = _slicedToArray(_map$getView$getCente, 2);

			var xCenter = _map$getView$getCente2[0];
			var yCenter = _map$getView$getCente2[1];

			var zoomBounds = this.zoomBoundsPath.getObject();
			// remove callback temporarily to avoid triggering due to rounding error?
			// TODO - avoid rounding error
			this.zoomBoundsPath.removeCallback(this, this.getSessionCenter);

			var dataBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			dataBounds.setXCenter(xCenter);
			dataBounds.setYCenter(yCenter);
			zoomBounds.setDataBounds(dataBounds);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter);
		}
	}, {
		key: "setSessionZoom",
		value: function setSessionZoom() {
			var resolution = this.map.getView().getResolution();

			var zoomBounds = this.zoomBoundsPath.getObject();
			// remove callback temporarily to avoid triggering due to rounding error?
			// TODO - avoid rounding error
			this.zoomBoundsPath.removeCallback(this, this.getSessionCenter);

			var dataBounds = new weavejs.geom.Bounds2D();
			var screenBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			zoomBounds.getScreenBounds(screenBounds);
			dataBounds.setWidth(screenBounds.getWidth() * resolution);
			dataBounds.setHeight(screenBounds.getHeight() * resolution);
			dataBounds.makeSizePositive();
			zoomBounds.setDataBounds(dataBounds);

			this.zoomBoundsPath.addCallback(this, this.getSessionCenter);
		}
	}, {
		key: "getSessionCenter",
		value: function getSessionCenter() {
			var _this2 = this;

			var zoomBounds = this.zoomBoundsPath.getObject();
			var dataBounds = new weavejs.geom.Bounds2D();
			zoomBounds.getDataBounds(dataBounds);
			var center = [dataBounds.getXCenter(), dataBounds.getYCenter()];
			var scale = zoomBounds.getXScale();

			this.map.getView().un("change:center", this.setSessionCenter, this);
			this.map.getView().un("change:resolution", this.setSessionZoom, this);

			this.map.getView().setCenter(center);
			this.map.getView().setResolution(1 / scale);

			_lodash2.default.defer(function () {
				_this2.map.getView().on("change:center", _this2.setSessionCenter, _this2);
				_this2.map.getView().on("change:resolution", _this2.setSessionZoom, _this2);
			});
		}
	}, {
		key: "plottersChanged",
		value: function plottersChanged() {
			var oldNames = _lodash2.default.keys(this.layers);
			var newNames = this.plottersPath.getNames();

			var removedNames = _lodash2.default.difference(oldNames, newNames);
			var addedNames = _lodash2.default.difference(newNames, oldNames);

			removedNames.forEach(function (name) {
				if (this.layers[name]) {
					this.layers[name].destroy();
				}
				delete this.layers[name];
			}, this);

			addedNames.forEach(function (name) {
				this.layers[name] = _Layer2.default.newLayer(this, name);
			}, this);
			/* */
			for (var idx in newNames) {
				var layer = this.layers[newNames[idx]];

				if (!layer || !layer.layer) {
					continue;
				}

				layer.layer.setZIndex(idx + 2);
			}
		}
	}, {
		key: "destroy",
		value: function destroy() {}
	}]);

	return WeaveOpenLayersMap;
}(_AbstractWeaveTool3.default);

exports.default = WeaveOpenLayersMap;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::MapTool", WeaveOpenLayersMap);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"./map/controls.js":39,"./map/interactions.js":40,"./map/layers/FeatureLayer.js":41,"./map/layers/GeometryLayer.js":42,"./map/layers/ImageGlyphLayer.js":45,"./map/layers/Layer.js":46,"./map/layers/ScatterPlotLayer.js":47,"./map/layers/TileLayer.js":48,"jquery":"jquery","lodash":"lodash","openlayers":"openlayers"}],38:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// var inherits = function(childCtor, parentCtor) {
//   /** @constructor */
//   function tempCtor() {}
//   tempCtor.prototype = parentCtor.prototype;
//   childCtor.superClass_ = parentCtor.prototype;
//   childCtor.prototype = new tempCtor();
//   /** @override */
//   childCtor.prototype.constructor = childCtor;
// };

// var CustomDragBoxEvent = function (type, innerEvent) {
// 	ol.MapEvent.call(this, type, innerEvent.map, innerEvent.frameState)
// 	this.innerEvent = innerEvent;
// };

// console.log(ol.MapBrowserEvent);
// inherits(CustomDragBoxEvent, ol.MapBrowserEvent);
//

var BoxControl = function (_ol$control$Control) {
	_inherits(BoxControl, _ol$control$Control);

	function BoxControl(opt_options) {
		_classCallCheck(this, BoxControl);

		var options = opt_options ? opt_options : {};

		var element = (0, _jquery2.default)("<div>").css({
			position: "absolute"
		}).addClass('ol-box');

		return _possibleConstructorReturn(this, Object.getPrototypeOf(BoxControl).call(this, { element: element[0], target: options.target }));
	}

	_createClass(BoxControl, [{
		key: "setPixels",
		value: function setPixels(startPixel, endPixel) {
			this.startPixel = startPixel;
			this.endPixel = endPixel;

			var _startPixel = _slicedToArray(startPixel, 2);

			var left = _startPixel[0];
			var top = _startPixel[1];

			var _endPixel = _slicedToArray(endPixel, 2);

			var right = _endPixel[0];
			var bottom = _endPixel[1];

			var _lodash$sortBy = _lodash2.default.sortBy([top, bottom]);

			var _lodash$sortBy2 = _slicedToArray(_lodash$sortBy, 2);

			top = _lodash$sortBy2[0];
			bottom = _lodash$sortBy2[1];

			var _lodash$sortBy3 = _lodash2.default.sortBy([left, right]);

			var _lodash$sortBy4 = _slicedToArray(_lodash$sortBy3, 2);

			left = _lodash$sortBy4[0];
			right = _lodash$sortBy4[1];

			var height = bottom - top;
			var width = right - left;

			(0, _jquery2.default)(this.element).css({ top: top, left: left, width: width, height: height });

			this.updateGeometry();
		}
	}, {
		key: "updateGeometry",
		value: function updateGeometry() {
			var startPixel = this.startPixel;
			var endPixel = this.endPixel;
			var pixels = [startPixel, [startPixel[0], endPixel[1]], endPixel, [endPixel[0], startPixel[1]]];
			var map = this.getMap();

			var coordinates = pixels.map(map.getCoordinateFromPixel, map);
			// close the polygon
			coordinates[4] = coordinates[0].slice();

			if (!this.geometry_) {
				this.geometry_ = new _openlayers2.default.geom.Polygon([coordinates]);
			} else {
				this.geometry_.setCoordinates([coordinates]);
			}
		}
	}, {
		key: "getGeometry",
		value: function getGeometry() {
			return this.geometry_;
		}
	}]);

	return BoxControl;
}(_openlayers2.default.control.Control);

var CustomDragBox = function CustomDragBox(opt_options) {
	_openlayers2.default.interaction.Pointer.call(this, {
		handleDownEvent: CustomDragBox.handleDownEvent,
		handleDragEvent: CustomDragBox.handleDragEvent,
		handleUpEvent: CustomDragBox.handleUpEvent
	});

	var options = opt_options ? opt_options : {};

	this.boxControl = new BoxControl();

	this.startPixel_ = null;

	this.condition_ = options.condition ? options.condition : _openlayers2.default.events.condition.always;
};

_openlayers2.default.inherits(CustomDragBox, _openlayers2.default.interaction.Pointer);

CustomDragBox.prototype.getGeometry = function () {
	return this.boxControl.getGeometry();
};

CustomDragBox.handleDragEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return;
	}
	this.boxControl.setPixels(this.startPixel_, mapBrowserEvent.pixel);
	this.dispatchEvent({ type: 'boxdrag', innerEvent: mapBrowserEvent });
};

CustomDragBox.handleDownEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return false;
	}

	if (this.condition_(mapBrowserEvent)) {
		this.startPixel_ = mapBrowserEvent.pixel;
		this.boxControl.setMap(mapBrowserEvent.map);
		this.boxControl.setPixels(this.startPixel_, this.startPixel_);
		this.dispatchEvent({ type: 'boxstart', innerEvent: mapBrowserEvent });
		return true;
	} else {
		return false;
	}
};

CustomDragBox.handleUpEvent = function (mapBrowserEvent) {
	if (!_openlayers2.default.events.condition.mouseOnly(mapBrowserEvent)) {
		return true;
	}

	this.boxControl.setMap(null);

	this.dispatchEvent({ type: 'boxend', innerEvent: mapBrowserEvent });
};

exports.default = CustomDragBox;

},{"jquery":"jquery","lodash":"lodash","openlayers":"openlayers"}],39:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.InteractionModeCluster = exports.PanCluster = undefined;

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PanCluster = exports.PanCluster = function PanCluster(optOptions) {
	_classCallCheck(this, PanCluster);

	var options = optOptions || {};
	var parent = (0, _jquery2.default)("\n\t\t<div style=\"background-color: rgba(0,0,0,0)\" class=\"ol-unselectable ol-control panCluster\">\n\t\t\t<table style=\"font-size:75%\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td><td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster N\">N</button></td><td></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster W\">W</button></td>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster X fa fa-arrows-alt\"></button></td>\n\t\t\t\t\t<td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster E\">E</button></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td><td class=\"ol-control\" style=\"position:relative\"><button class=\"panCluster S\">S</button></td><td></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>");

	var directions = {
		N: [0, 1],
		E: [1, 0],
		S: [0, -1],
		W: [-1, 0],
		X: [null, null]
	};

	var self = this;

	var pan = function pan(xSign, ySign) {
		var panPercent = 0.3;
		var map = self.getMap();
		var view = map.getView();
		var extent = view.calculateExtent(map.getSize());

		var extentWidth = Math.abs(extent[0] - extent[2]);
		var extentHeight = Math.abs(extent[1] - extent[3]);

		var center = view.getCenter();

		center[0] += extentWidth * xSign * panPercent;
		center[1] += extentHeight * ySign * panPercent;

		view.setCenter(center);
	};

	var zoomExtent = function zoomExtent() {
		var map = self.getMap();
		var view = map.getView();
		var extent = view.getProjection().getExtent();
		var size = map.getSize();
		view.fit(extent, size);
	};

	for (var direction in directions) {
		var xSign = directions[direction][0];
		var ySign = directions[direction][1];

		var button = parent.find(".panCluster." + direction);

		if (xSign !== null) {
			button.click(pan.bind(this, xSign, ySign));
		} else {
			button.click(zoomExtent.bind(this));
		}
	}

	_openlayers2.default.control.Control.call(this, { element: parent[0], target: options.target });
};

_openlayers2.default.inherits(PanCluster, _openlayers2.default.control.Control);

var InteractionModeCluster = exports.InteractionModeCluster = function InteractionModeCluster(optOptions) {
	_classCallCheck(this, InteractionModeCluster);

	var interactionModePath = optOptions.interactionModePath;
	var options = optOptions || {};
	var buttonTable = (0, _jquery2.default)("\n\t\t\t<table class=\"ol-unselectable ol-control iModeCluster\">\n\t\t\t\t<tr style=\"font-size: 80%\">\n\t\t\t\t\t<td><button class=\"iModeCluster pan fa fa-hand-grab-o\"></button></td>\n\t\t\t\t\t<td><button class=\"iModeCluster select fa fa-mouse-pointer\"></button></td>\n\t\t\t\t\t<td><button class=\"iModeCluster zoom fa fa-search-plus\"></button></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t");

	buttonTable.find("button.iModeCluster.pan").click(function () {
		return interactionModePath.state("pan");
	});
	buttonTable.find("button.iModeCluster.select").click(function () {
		return interactionModePath.state("select");
	});
	buttonTable.find("button.iModeCluster.zoom").click(function () {
		return interactionModePath.state("zoom");
	});

	interactionModePath.addCallback(this, function () {
		buttonTable.find("button.iModeCluster").removeClass("active");
		buttonTable.find("button.iModeCluster." + interactionModePath.getState()).addClass("active");
	}, true);

	_openlayers2.default.control.Control.call(this, { element: buttonTable[0], target: options.target });
};

_openlayers2.default.inherits(InteractionModeCluster, _openlayers2.default.control.Control);

},{"jquery":"jquery","openlayers":"openlayers"}],40:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _FeatureLayer = require("./layers/FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _CustomDragBox = require("./CustomDragBox.js");

var _CustomDragBox2 = _interopRequireDefault(_CustomDragBox);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*global Weave*/

function getProbeInteraction(mapTool) {
	return new _openlayers2.default.interaction.Pointer({
		handleMoveEvent: function handleMoveEvent(event) {
			// weavepath -> keystring -> zindex
			var d2d_keySet_keyString_zIndex = new Map();
			/* We need to have sets for all the layers so that probing over an empty area correctly empties the keyset */
			mapTool.map.getLayers().forEach(function (layer) {
				var weaveLayerObject = layer.get("layerObject");

				if (weaveLayerObject.probeKeySet && !d2d_keySet_keyString_zIndex.get(weaveLayerObject.probeKeySet)) {
					d2d_keySet_keyString_zIndex.set(weaveLayerObject.probeKeySet.getObject(), new Map());
				}
			}, mapTool);
			mapTool.map.forEachFeatureAtPixel(event.pixel, function (feature, layer) {
				var weaveLayerObject = layer.get("layerObject");

				var map_keyString_zIndex = d2d_keySet_keyString_zIndex.get(weaveLayerObject.probeKeySet.getObject());

				/* No need to check here, we created one for every probeKeySet in the prior forEach */

				map_keyString_zIndex.set(feature.getId(), layer.getZIndex());
			}, function (layer) {
				return layer.getSelectable() && layer instanceof _FeatureLayer2.default;
			});

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = d2d_keySet_keyString_zIndex.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var weaveKeySet = _step.value;

					var map_keyString_zIndex = d2d_keySet_keyString_zIndex.get(weaveKeySet);

					var top = { key: null, index: -Infinity };

					var _iteratorNormalCompletion2 = true;
					var _didIteratorError2 = false;
					var _iteratorError2 = undefined;

					try {
						for (var _iterator2 = map_keyString_zIndex.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
							var key = _step2.value;

							var index = map_keyString_zIndex.get(key);
							if (index > top.index) {
								top.index = index;
								top.key = key;
							}
						}
					} catch (err) {
						_didIteratorError2 = true;
						_iteratorError2 = err;
					} finally {
						try {
							if (!_iteratorNormalCompletion2 && _iterator2.return) {
								_iterator2.return();
							}
						} finally {
							if (_didIteratorError2) {
								throw _iteratorError2;
							}
						}
					}

					if (top.key) {
						Weave.getPath(weaveKeySet).setKeys([top.key]);
					} else {
						Weave.getPath(weaveKeySet).setKeys([]);
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	});
}

function getDragSelect(mapTool, probeInteraction) {
	var ADD = "+";
	var SUBTRACT = "-";
	var SET = "=";
	var dragSelect = new _CustomDragBox2.default();
	var mode = SET;

	function updateSelection(extent) {
		var selectedFeatures = new Set();
		var selectFeature = function selectFeature(feature) {
			selectedFeatures.add(feature.getId());
		};

		var _iteratorNormalCompletion3 = true;
		var _didIteratorError3 = false;
		var _iteratorError3 = undefined;

		try {
			for (var _iterator3 = _lodash2.default.keys(mapTool.layers)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
				var weaveLayerName = _step3.value;

				var weaveLayer = mapTool.layers[weaveLayerName];
				var olLayer = weaveLayer.layer;
				var selectable = olLayer.get("selectable");

				if (weaveLayer instanceof _FeatureLayer2.default && selectable) {
					var keySet = weaveLayer.selectionKeySet;
					var source = olLayer.getSource();

					source.forEachFeatureIntersectingExtent(extent, selectFeature);

					var keys = Array.from(selectedFeatures);

					switch (mode) {
						case SET:
							keySet.setKeys(keys);
							break;
						case ADD:
							keySet.addKeys(keys);
							break;
						case SUBTRACT:
							keySet.removeKeys(keys);
							break;
					}
				}
			}
		} catch (err) {
			_didIteratorError3 = true;
			_iteratorError3 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion3 && _iterator3.return) {
					_iterator3.return();
				}
			} finally {
				if (_didIteratorError3) {
					throw _iteratorError3;
				}
			}
		}
	}

	dragSelect.on('boxstart', function (dragBoxEvent) {
		probeInteraction.setActive(false);

		var event = dragBoxEvent.innerEvent.originalEvent;
		if (event.ctrlKey) {
			mode = ADD;
			if (event.shiftKey) {
				mode = SUBTRACT;
			}
		} else {
			mode = SET;
		}
	});

	dragSelect.on('boxend', function () {
		var extent = dragSelect.getGeometry().getExtent();

		updateSelection(extent);
		probeInteraction.setActive(true);
		mode = SET;
	});

	dragSelect.on('boxdrag', _lodash2.default.debounce(function () {
		var extent = dragSelect.getGeometry().getExtent();

		updateSelection(extent);
	}));

	return dragSelect;
}

function weaveMapInteractions(mapTool) {

	var probeInteraction = getProbeInteraction(mapTool);
	var dragSelect = getDragSelect(mapTool, probeInteraction);
	var dragPan = new _openlayers2.default.interaction.DragPan({});
	var dragZoom = new _openlayers2.default.interaction.DragZoom({ condition: _openlayers2.default.events.condition.always });

	mapTool.interactionModePath.addCallback(mapTool, function () {
		var interactionMode = mapTool.interactionModePath.getState();
		dragPan.setActive(interactionMode === "pan");
		dragSelect.setActive(interactionMode === "select");
		dragZoom.setActive(interactionMode === "zoom");
	}, true);

	var interactionCollection = _openlayers2.default.interaction.defaults({ dragPan: false });
	var _arr = [dragPan, dragZoom, dragSelect, probeInteraction];
	for (var _i = 0; _i < _arr.length; _i++) {
		var interaction = _arr[_i];
		interactionCollection.push(interaction);
	}return interactionCollection;
}

exports.default = weaveMapInteractions;

},{"./CustomDragBox.js":38,"./layers/FeatureLayer.js":41,"lodash":"lodash","openlayers":"openlayers"}],41:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Layer2 = require("./Layer.js");

var _Layer3 = _interopRequireDefault(_Layer2);

var _StandardLib = require("../../../../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FeatureLayer = function (_Layer) {
	_inherits(FeatureLayer, _Layer);

	/* A FeatureLayer assumes that each feature will have multiple custom style properties on each feature, which are managed based on selection. */

	function FeatureLayer(parent, layerName) {
		_classCallCheck(this, FeatureLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(FeatureLayer).call(this, parent, layerName));

		_this.updateMetaStyle = _this.updateMetaStyle.bind(_this);
		_this.debounced_updateMetaStyles = _lodash2.default.debounce(_this.updateMetaStyles.bind(_this), 0);

		_this.layer = new _openlayers2.default.layer.Vector();
		_this.source = new _openlayers2.default.source.Vector({ wrapX: false });

		/* Every feature that is added should register a handler to automatically recompute the metastyles when the styles change. */
		_this.source.on("addfeature", _this.onFeatureAdd, _this);

		_this.changedItems = new Set();
		_this.probedSet = new Set();
		_this.selectedSet = new Set();
		_this.filteredSet = new Set();

		_this.selectionKeySet = _this.layerPath.selection_keyset;
		_this.probeKeySet = _this.layerPath.probe_keyset;
		_this.subsetFilter = _this.layerPath.subset_filter; //push("filteredKeySet");

		var selectionKeyHandler = _this.updateSetFromKeySet.bind(_this, _this.selectionKeySet, _this.selectedSet);
		var probeKeyHandler = _this.updateSetFromKeySet.bind(_this, _this.probeKeySet, _this.probedSet);

		_this.selectionKeySet.addKeySetCallback(selectionKeyHandler);
		_this.probeKeySet.addKeySetCallback(probeKeyHandler);

		_this.subsetFilter.addCallback(_this, _this.updateFilteredKeySet, true);
		_this.settingsPath.push("selectable").addCallback(_this, _this.updateMetaStyles);
		return _this;
	}

	_createClass(FeatureLayer, [{
		key: "onFeatureAdd",
		value: function onFeatureAdd(vectorEvent) {
			vectorEvent.feature.on("propertychange", this.onFeaturePropertyChange, this);
		}
	}, {
		key: "onFeaturePropertyChange",
		value: function onFeaturePropertyChange(objectEvent) {
			var propertyName = objectEvent.key;
			var feature = objectEvent.target;

			if (!_lodash2.default.contains(FeatureLayer.Styles, propertyName)) {
				/* The property that changed isn't one of our metaStyle properties, so we don't care. */
				return;
			} else {
				/* The property that changed was a metastyle, and as such the style should be recomputed */
				//lodash.defer(this.updateMetaStyle, feature);
				this.debounced_updateMetaStyles();
			}
		}
	}, {
		key: "updateSetFromKeySet",
		value: function updateSetFromKeySet(keySet, set, diff) {
			if (!this.source) return; //HACK

			var wasEmpty = set.size === 0;

			this.changedItems.clear();

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = diff.added[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var key = _step.value;

					set.add(key);
					this.changedItems.add(key);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = diff.removed[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var key = _step2.value;

					set.delete(key);
					this.changedItems.add(key);
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}

			var isEmpty = set.size === 0;

			/* If a set becomes empty or nonempty, we should recompute all the styles. Otherwise, only recompute the styles of the features which changed. */
			if (isEmpty !== wasEmpty) {
				this.updateMetaStyles();
			} else {
				this.changedItems.forEach(function (featureId) {
					var feature = this.source.getFeatureById(featureId);
					if (feature) {
						this.updateMetaStyle(feature);
					}
				}, this);
			}
		}
	}, {
		key: "updateFilteredKeySet",
		value: function updateFilteredKeySet() {
			if (!this.source) return; //HACK

			var sourceKeys = this.source.getFeatures().map(function (feature) {
				return feature.getId();
			});

			this.filteredSet.clear();

			var filteredKeys = this.subsetFilter.filterKeys(sourceKeys);
			var _iteratorNormalCompletion3 = true;
			var _didIteratorError3 = false;
			var _iteratorError3 = undefined;

			try {
				for (var _iterator3 = filteredKeys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
					var key = _step3.value;

					this.filteredSet.add(key);
				}
			} catch (err) {
				_didIteratorError3 = true;
				_iteratorError3 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion3 && _iterator3.return) {
						_iterator3.return();
					}
				} finally {
					if (_didIteratorError3) {
						throw _iteratorError3;
					}
				}
			}

			this.updateMetaStyles();
		}
	}, {
		key: "updateMetaStyles",
		value: function updateMetaStyles() {
			if (!this.source) return; //HACK

			this.tempSelectable = this.settingsPath.push("selectable").getState();

			this.source.forEachFeature(this.updateMetaStyle, this);
		}
	}, {
		key: "updateMetaStyle",
		value: function updateMetaStyle(feature) {
			var id = feature.getId();
			var nullStyle = new _openlayers2.default.style.Style({});
			var unselectedStyle = feature.get("unselectedStyle") || nullStyle;
			var normalStyle = feature.get("normalStyle") || nullStyle;
			var selectedStyle = feature.get("selectedStyle") || nullStyle;
			var probedStyle = feature.get("probedStyle") || nullStyle;
			var zOrder = feature.get("zOrder") || 0;
			var replace = feature.get("replace");
			var newStyle = undefined;

			if (!this.filteredSet.has(id)) {
				feature.setStyle(nullStyle);
				return;
			}

			if (!this.tempSelectable) {
				feature.setStyle(normalStyle);
				return;
			}

			if (!this.selectedSet.has(id) && !this.probedSet.has(id) && this.selectedSet.size > 0) {
				if (replace) {
					newStyle = unselectedStyle;
					newStyle.setZIndex(zOrder);
				} else {
					newStyle = [].concat(unselectedStyle);
					newStyle[0].setZIndex(zOrder);
				}
			} else {
				newStyle = [].concat(normalStyle);
				newStyle[0].setZIndex(zOrder);
			}

			if (this.selectedSet.has(id)) {
				if (replace) {
					newStyle = selectedStyle;
					newStyle.setZIndex(Number.MAX_SAFE_INTEGER - 3);
				} else {
					newStyle = newStyle.concat(selectedStyle);
					newStyle[0].setZIndex(Number.MAX_SAFE_INTEGER - 3);
				}
			}

			if (this.probedSet.has(id)) {
				if (replace) {
					newStyle = probedStyle;
					newStyle.setZIndex(Number.MAX_SAFE_INTEGER);
				} else {
					newStyle = newStyle.concat(probedStyle);
					newStyle[0].setZIndex(Number.MAX_SAFE_INTEGER);
				}
			}

			feature.setStyle(newStyle);
		}
	}], [{
		key: "toColorArray",
		value: function toColorArray(colorString, alpha) {
			var colorArray;
			if (colorString[0] === "#") {
				colorArray = _openlayers2.default.color.asArray(colorString);
			} else {
				colorArray = _openlayers2.default.color.asArray("#" + _StandardLib2.default.decimalToHex(Number(colorString)));
			}

			colorArray = [].concat(colorArray); /* Should not be modified since it is cached in ol.color.asArray */

			if (!colorArray) {
				return null;
			}

			colorArray[3] = Number(alpha);
			return colorArray;
		}
	}, {
		key: "toColorRGBA",
		value: function toColorRGBA(colorString, alpha) {
			var colorArray = FeatureLayer.toColorArray(colorString, alpha);
			return _openlayers2.default.color.asString(colorArray);
		}
	}, {
		key: "olFillFromWeaveFill",
		value: function olFillFromWeaveFill(fill, fade) {
			if (fade === undefined) fade = 1;

			var color = fill.color && FeatureLayer.toColorArray(fill.color, fill.alpha * fade) || [0, 0, 0, 0];
			return new _openlayers2.default.style.Fill({ color: color });
		}
	}, {
		key: "olStrokeFromWeaveStroke",
		value: function olStrokeFromWeaveStroke(stroke, fade) {
			if (fade === undefined) fade = 1;

			var color = stroke.color && FeatureLayer.toColorArray(stroke.color, stroke.alpha * fade) || [0, 0, 0, 1];

			var lineCap = stroke.lineCap === "none" ? "butt" : stroke.lineCap || "round";
			var lineJoin = stroke.lineJoin === null ? "round" : stroke.lineJoin || "round";
			var miterLimit = Number(stroke.miterLimit);
			var width = Number(stroke.weight);

			return new _openlayers2.default.style.Stroke({ color: color, lineCap: lineCap, lineJoin: lineJoin, miterLimit: miterLimit, width: width });
		}
	}, {
		key: "getOlProbedStyle",
		value: function getOlProbedStyle(baseStrokeStyle) {
			var width = baseStrokeStyle.getWidth();

			return [new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [0, 0, 0, 1],
					width: width + FeatureLayer.PROBE_HALO_WIDTH + FeatureLayer.PROBE_LINE_WIDTH
				}),
				zIndex: Number.MAX_SAFE_INTEGER - 2
			}), new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [255, 255, 255, 1],
					width: width + FeatureLayer.PROBE_HALO_WIDTH
				}),
				zIndex: Number.MAX_SAFE_INTEGER - 1
			})];
		}
	}, {
		key: "getOlSelectionStyle",
		value: function getOlSelectionStyle(baseStrokeStyle) {
			var width = baseStrokeStyle.getWidth();
			var lineCap = baseStrokeStyle.getLineCap();
			var lineJoin = baseStrokeStyle.getLineJoin();
			var miterLimit = baseStrokeStyle.getMiterLimit();

			return [new _openlayers2.default.style.Style({
				stroke: new _openlayers2.default.style.Stroke({
					color: [0, 0, 0, 0.5],
					width: width + FeatureLayer.SELECT_WIDTH,
					lineCap: lineCap, lineJoin: lineJoin, miterLimit: miterLimit }),
				zIndex: Number.MAX_SAFE_INTEGER - 4
			})];
		}
	}]);

	return FeatureLayer;
}(_Layer3.default);

exports.default = FeatureLayer;

FeatureLayer.SELECT_WIDTH = 5;
FeatureLayer.PROBE_HALO_WIDTH = 4;
FeatureLayer.PROBE_LINE_WIDTH = 1;

FeatureLayer.Styles = {
	NORMAL: "normalStyle",
	UNSELECTED: "unselectedStyle", /* For the case where a selection has been made in the layer but the element is not one of them. */
	SELECTED: "selectedStyle",
	PROBED: "probedStyle"
};

exports.default = FeatureLayer;

},{"../../../../outts/utils/StandardLib.js":31,"./Layer.js":46,"lodash":"lodash","openlayers":"openlayers"}],42:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _Layer = require("./Layer.js");

var _FeatureLayer2 = require("./FeatureLayer.js");

var _FeatureLayer3 = _interopRequireDefault(_FeatureLayer2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*global weavejs*/

var GeometryLayer = function (_FeatureLayer) {
	_inherits(GeometryLayer, _FeatureLayer);

	function GeometryLayer(parent, layerName) {
		_classCallCheck(this, GeometryLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GeometryLayer).call(this, parent, layerName));

		_this.geoJsonParser = new _openlayers2.default.format.GeoJSON();

		_this.geoColumnPath = _this.layerPath.push("geometryColumn");
		_this.fillStylePath = _this.layerPath.push("fill");
		_this.lineStylePath = _this.layerPath.push("line");

		_this.geoColumnPath.addCallback(_this, _this.updateGeometryData, true);
		_this.projectionPath.addCallback(_this, _this.updateGeometryData, true);

		_this.fillStylePath.addCallback(_this, _this.updateStyleData);
		_this.lineStylePath.addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(GeometryLayer, [{
		key: "updateGeometryData",
		value: function updateGeometryData() {
			var projectionSpec = this.geoColumnPath.getObject("internalDynamicColumn", null).getMetadata('projection');

			var outputProjection = this.projectionPath.getState() || "EPSG:3857";
			var inputProjection = projectionSpec || outputProjection;

			this.source.clear();

			var keys = this.geoColumnPath.push('internalDynamicColumn').getKeys();
			var idc = this.geoColumnPath.getObject("internalDynamicColumn");
			var rawGeometries = weavejs.data.ColumnUtils.getGeoJsonGeometries(idc, idc.keys);

			for (var idx = 0; idx < keys.length; idx++) {
				var id = keys[idx];

				var geometry = this.geoJsonParser.readGeometry(rawGeometries[idx], { dataProjection: inputProjection, featureProjection: outputProjection });

				var feature = new _openlayers2.default.Feature({ geometry: geometry });
				feature.setId(id);

				this.source.addFeature(feature);
			}

			this.updateStyleData();
			this.updateFilteredKeySet();
		}
	}, {
		key: "updateStyleData",
		value: function updateStyleData() {
			var styleRecords = this.layerPath.retrieveRecords({
				fill: {
					color: this.fillStylePath.push("color"),
					alpha: this.fillStylePath.push("alpha"),
					imageURL: this.fillStylePath.push("imageURL")
				},
				stroke: {
					color: this.lineStylePath.push("color"),
					alpha: this.lineStylePath.push("alpha"),
					weight: this.lineStylePath.push("weight"),
					lineCap: this.lineStylePath.push("caps"),
					lineJoin: this.lineStylePath.push("joints"),
					miterLimit: this.lineStylePath.push("miterLimit")
				}
			}, this.geoColumnPath);

			this.rawStyles = styleRecords;

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = styleRecords[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var olStroke = _FeatureLayer3.default.olStrokeFromWeaveStroke(record.stroke);
					var olFill = _FeatureLayer3.default.olFillFromWeaveFill(record.fill);

					var olStrokeFaded = _FeatureLayer3.default.olStrokeFromWeaveStroke(record.stroke, 0.5);
					var olFillFaded = _FeatureLayer3.default.olFillFromWeaveFill(record.fill, 0.5);

					var normalStyle = [new _openlayers2.default.style.Style({
						fill: olFill,
						stroke: olStroke,
						zIndex: 0
					})];

					var unselectedStyle = [new _openlayers2.default.style.Style({
						fill: olFillFaded,
						stroke: olStrokeFaded,
						zIndex: 0
					})];

					var selectedStyle = _FeatureLayer3.default.getOlSelectionStyle(olStroke);
					var probedStyle = _FeatureLayer3.default.getOlProbedStyle(olStroke);

					var feature = this.source.getFeatureById(record.id);

					if (feature) {
						feature.setProperties({ normalStyle: normalStyle, unselectedStyle: unselectedStyle, selectedStyle: selectedStyle, probedStyle: probedStyle });
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	}]);

	return GeometryLayer;
}(_FeatureLayer3.default);

exports.default = GeometryLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::GeometryPlotter", GeometryLayer);

},{"./FeatureLayer.js":41,"./Layer.js":46,"openlayers":"openlayers"}],43:[function(require,module,exports){
"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _FeatureLayer2 = require("./FeatureLayer.js");

var _FeatureLayer3 = _interopRequireDefault(_FeatureLayer2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GlyphLayer = function (_FeatureLayer) {
	_inherits(GlyphLayer, _FeatureLayer);

	function GlyphLayer(parent, layerName) {
		_classCallCheck(this, GlyphLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(GlyphLayer).call(this, parent, layerName));

		_this.projectionPath.addCallback(_this, _this.updateLocations);
		_this.layerPath.push("sourceProjection").addCallback(_this, _this.updateLocations);

		_this.layerPath.push("dataX").addCallback(_this, _this.updateLocations);
		_this.layerPath.push("dataY").addCallback(_this, _this.updateLocations, true);
		return _this;
	}

	_createClass(GlyphLayer, [{
		key: "_getFeatureIds",
		value: function _getFeatureIds() {
			return _lodash2.default.map(this.source.getFeatures(), function (item) {
				return item.getId();
			});
		}
	}, {
		key: "updateLocations",
		value: function updateLocations() {
			/* Update feature locations */
			var records = this.layerPath.retrieveRecords(["dataX", "dataY"], this.layerPath.push("dataX"));

			var recordIds = _lodash2.default.pluck(records, "id");

			var removedIds = _lodash2.default.difference(this._getFeatureIds(), recordIds);

			var rawProj = this.layerPath.getState("sourceProjection") || "EPSG:4326";
			var mapProj = this.projectionPath.getState() || "EPSG:3857";

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = removedIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var id = _step.value;

					var feature = this.source.getFeatureById(id);
					this.source.removeFeature(feature);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = records[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var record = _step2.value;

					var feature = this.source.getFeatureById(record.id);

					if (!feature) {
						feature = new _openlayers2.default.Feature({});
						feature.setId(record.id);
						this.source.addFeature(feature);
					}

					var dataX = undefined,
					    dataY = undefined;

					dataX = GlyphLayer._toPoint(record.dataX, "xMin", "xMax");
					dataY = GlyphLayer._toPoint(record.dataY, "yMin", "yMax");

					var point = new _openlayers2.default.geom.Point([dataX, dataY]);
					point.transform(rawProj, mapProj);
					feature.setGeometry(point);
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}

			this.updateFilteredKeySet();
			this.updateStyleData();
		}
	}], [{
		key: "_toPoint",
		value: function _toPoint(datum, field1, field2) {
			if ((typeof datum === "undefined" ? "undefined" : _typeof(datum)) === "object") {
				var firstPoly = datum[0];
				return (firstPoly.bounds[field1] + firstPoly.bounds[field2]) / 2;
			} else {
				return datum;
			}
		}
	}]);

	return GlyphLayer;
}(_FeatureLayer3.default);

exports.default = GlyphLayer;

},{"./FeatureLayer.js":41,"lodash":"lodash","openlayers":"openlayers"}],44:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Map2D = function () {
	function Map2D() {
		_classCallCheck(this, Map2D);

		this._map = new Map();
	}

	_createClass(Map2D, [{
		key: "get",
		value: function get(firstKey, secondKey) {
			var secondMap = this._map.get(firstKey);
			return secondMap && secondMap.get(secondKey);
		}
	}, {
		key: "set",
		value: function set(firstKey, secondKey, value) {
			var secondMap = this._map.get(firstKey);
			if (!secondMap) {
				secondMap = new Map();
				this._map.set(firstKey, secondMap);
			}

			secondMap.set(secondKey, value);
		}
	}]);

	return Map2D;
}();

var ImageGlyphCache = function () {
	function ImageGlyphCache() {
		_classCallCheck(this, ImageGlyphCache);

		this.baseImageElements = new Map();
		this.canvasMap = new Map2D();
		this.imageMap = new Map2D();
	}

	_createClass(ImageGlyphCache, [{
		key: "requestBaseImageElement",
		value: function requestBaseImageElement(url, callback) {
			var imageElement = this.baseImageElements.get(url);

			if (!imageElement) {
				imageElement = new Image();
				imageElement.src = url;
				this.baseImageElements.set(url, imageElement);
			}

			if (imageElement.complete) {
				callback(imageElement);
			} else {
				(0, _jquery2.default)(imageElement).one("load", function () {
					return callback(imageElement);
				});
			}
		}
	}, {
		key: "getCachedCanvas",
		value: function getCachedCanvas(url, color) {
			var canvas = this.canvasMap.get(url, color);
			var freshCanvas = false;

			if (!canvas) {
				freshCanvas = true;
				canvas = document.createElement("canvas");
				this.canvasMap.set(url, color, canvas);
			}

			return { canvas: canvas, freshCanvas: freshCanvas };
		}
	}, {
		key: "requestDataUrl",
		value: function requestDataUrl(url, color, callback) {
			var _getCachedCanvas = this.getCachedCanvas(url, color);

			var canvas = _getCachedCanvas.canvas;
			var freshCanvas = _getCachedCanvas.freshCanvas;
			/* If freshCanvas is true, this means that we just created the canvas and haven't rendered to it. Time to do that. */

			if (freshCanvas) {
				this.requestBaseImageElement(url, function (imageElement) {
					var _ref = [imageElement.naturalHeight, imageElement.naturalWidth];
					canvas.height = _ref[0];
					canvas.width = _ref[1];

					var ctx = canvas.getContext("2d");
					ctx.fillStyle = color;
					ctx.fillRect(0, 0, canvas.width, canvas.height);

					ctx.globalCompositeOperation = "destination-atop";
					ctx.drawImage(imageElement, 0, 0);

					ctx.globalCompositeOperation = "multiply";
					ctx.drawImage(imageElement, 0, 0);

					callback(canvas.toDataURL());
				});
			} else {
				callback(canvas.toDataURL());
			}
		}
	}, {
		key: "getImage",
		value: function getImage(url, color) {
			var image = this.imageMap.get(url, color);

			if (!image) {
				image = new Image();
				this.requestDataUrl(url, color, function (dataUrl) {
					image.src = dataUrl;
				});
			}

			return image;
		}
	}]);

	return ImageGlyphCache;
}();

exports.default = ImageGlyphCache;

},{"jquery":"jquery"}],45:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _jquery = require("jquery");

var _jquery2 = _interopRequireDefault(_jquery);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _GlyphLayer2 = require("./GlyphLayer.js");

var _GlyphLayer3 = _interopRequireDefault(_GlyphLayer2);

var _FeatureLayer = require("./FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _ImageGlyphCache = require("./ImageGlyphCache.js");

var _ImageGlyphCache2 = _interopRequireDefault(_ImageGlyphCache);

var _Layer = require("./Layer.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ImageGlyphLayer = function (_GlyphLayer) {
	_inherits(ImageGlyphLayer, _GlyphLayer);

	function ImageGlyphLayer(parent, layerName) {
		_classCallCheck(this, ImageGlyphLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ImageGlyphLayer).call(this, parent, layerName));

		_this.imageGlyphCache = new _ImageGlyphCache2.default();

		_this.layerPath.push("imageSize").addCallback(_this, _this.updateStyleData);
		_this.layerPath.push("imageURL").addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(ImageGlyphLayer, [{
		key: "setIconStyle",
		value: function setIconStyle(feature, img, iconSize) {
			var styles = {};

			if (!img.complete || !img.src) {
				(0, _jquery2.default)(img).one("load", this.setIconStyle.bind(this, feature, img, iconSize));
				return;
			}

			var maxDim = Math.max(img.naturalHeight, img.naturalWidth);

			var scale = iconSize / maxDim;

			var imgSize = [img.naturalWidth, img.naturalHeight];

			var _arr = ["normal", "selected", "probed", "unselected"];
			for (var _i = 0; _i < _arr.length; _i++) {
				var stylePrefix = _arr[_i];
				var icon = undefined;
				if (stylePrefix === "probed") {
					icon = new _openlayers2.default.style.Icon({ img: img, imgSize: imgSize, scale: scale * 2.0 });
				} else {
					icon = new _openlayers2.default.style.Icon({ img: img, imgSize: imgSize, scale: scale });
				}

				if (stylePrefix === "unselected") {
					icon.setOpacity(1 / 3);
				}

				styles[stylePrefix + "Style"] = new _openlayers2.default.style.Style({ image: icon });
			}

			styles.replace = true;

			feature.setProperties(styles);
		}
	}, {
		key: "updateStyleData",
		value: function updateStyleData() {
			/* Update feature styles */

			var records = this.layerPath.retrieveRecords(["alpha", "color", "imageURL", "imageSize"], this.layerPath.push("dataX"));

			this.rawStyleRecords = records;

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = records[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var feature = this.source.getFeatureById(record.id);

					if (!feature) {
						continue;
					}

					var imageSize = Number(record.imageSize);
					var color = _FeatureLayer2.default.toColorRGBA(record.color, record.alpha);

					if (!record.imageURL) {
						feature.setStyle(null);
						continue;
					}

					var img = this.imageGlyphCache.getImage(record.imageURL, color);

					this.setIconStyle(feature, img, imageSize);
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}
		}
	}]);

	return ImageGlyphLayer;
}(_GlyphLayer3.default);

exports.default = ImageGlyphLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::ImageGlyphPlotter", ImageGlyphLayer);

},{"./FeatureLayer.js":41,"./GlyphLayer.js":43,"./ImageGlyphCache.js":44,"./Layer.js":46,"jquery":"jquery","openlayers":"openlayers"}],46:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.newLayer = exports.layerRegistry = undefined;
exports.registerLayerImplementation = registerLayerImplementation;

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var layerRegistry = exports.layerRegistry = {};

function registerLayerImplementation(asClassName, jsClass) {
	if (!layerRegistry) {
		exports.layerRegistry = layerRegistry = {};
	}
	layerRegistry[asClassName] = jsClass;
}

function _newLayer(parent, layerName) {
	var path = parent.plottersPath.push(layerName);
	var layerType = path.getType();
	var LayerClass = layerRegistry[layerType];
	if (!LayerClass) {
		return null;
	} else {
		return new LayerClass(parent, layerName);
	}
}

exports.newLayer = _newLayer;

var Layer = function () {
	_createClass(Layer, null, [{
		key: "newLayer",
		value: function newLayer(parent, layerName) {
			return _newLayer(parent, layerName);
		}
	}]);

	function Layer(parent, layerName) {
		_classCallCheck(this, Layer);

		this.layerPath = parent.plottersPath.push(layerName);
		this.settingsPath = parent.layerSettingsPath.push(layerName);
		this.projectionPath = parent.toolPath.push("projectionSRS");
		this.parent = parent;
		this.layerName = layerName;
		this.layer = null;
		this._layerReadyCallbacks = {};

		this.linkProperty(this.settingsPath.push("alpha"), "opacity");
		this.linkProperty(this.settingsPath.push("visible"), "visible");
		this.linkProperty(this.settingsPath.push("selectable"), "selectable");
		/* TODO max and minvisiblescale, map to min/max resolution. */
	}

	_createClass(Layer, [{
		key: "linkProperty",
		value: function linkProperty(propertyPath, propertyName, inTransform) {
			var _this = this;

			/* change in path modifying propertyName */
			inTransform = inTransform || _lodash2.default.identity;

			var callback = function callback() {
				if (_this.layer) {
					_this.layer.set(propertyName, inTransform(propertyPath.getState()));
				}
			};

			this._layerReadyCallbacks[propertyName] = callback;

			propertyPath.addCallback(this, callback, false, false);
		}
	}, {
		key: "destroy",
		value: function destroy() {
			this.layer = undefined;
		}
	}, {
		key: "source",
		get: function get() {
			return this.layer && this.layer.getSource();
		},
		set: function set(value) {
			this.layer.setSource(value);
		}

		/* Handles initial apply of linked properties, adding/removing from map */

	}, {
		key: "layer",
		set: function set(value) {
			if (this._layer != null) {
				this.parent.map.removeLayer(this._layer);
			}

			this._layer = value;

			if (value) {
				this.parent.map.addLayer(value);

				value.set("layerObject", this); /* Need to store this backref */

				if (value) {
					for (var name in this._layerReadyCallbacks) {
						this._layerReadyCallbacks[name]();
					}
				}
			}
		},
		get: function get() {
			return this._layer;
		}
	}]);

	return Layer;
}();

exports.default = Layer;

},{"lodash":"lodash"}],47:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

var _StandardLib = require("../../../../outts/utils/StandardLib.js");

var _StandardLib2 = _interopRequireDefault(_StandardLib);

var _FeatureLayer = require("./FeatureLayer.js");

var _FeatureLayer2 = _interopRequireDefault(_FeatureLayer);

var _Layer = require("./Layer.js");

var _GlyphLayer2 = require("./GlyphLayer.js");

var _GlyphLayer3 = _interopRequireDefault(_GlyphLayer2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ScatterPlotLayer = function (_GlyphLayer) {
	_inherits(ScatterPlotLayer, _GlyphLayer);

	function ScatterPlotLayer(parent, layerName) {
		_classCallCheck(this, ScatterPlotLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(ScatterPlotLayer).call(this, parent, layerName));

		_this.sizeBy = _this.layerPath.push("sizeBy").addCallback(_this, _this.updateStyleData, true);

		_this.fillStylePath = _this.layerPath.push("fill").addCallback(_this, _this.updateStyleData);
		_this.lineStylePath = _this.layerPath.push("line").addCallback(_this, _this.updateStyleData);
		_this.maxRadiusPath = _this.layerPath.push("maxScreenRadius").addCallback(_this, _this.updateStyleData);
		_this.minRadiusPath = _this.layerPath.push("minScreenRadius").addCallback(_this, _this.updateStyleData);

		_this.defaultRadiusPath = _this.layerPath.push("defaultScreenRadius").addCallback(_this, _this.updateStyleData, true);
		return _this;
	}

	_createClass(ScatterPlotLayer, [{
		key: "updateStyleData",
		value: function updateStyleData() {
			var styleRecords = this.layerPath.retrieveRecords({
				fill: {
					color: this.fillStylePath.push("color"),
					alpha: this.fillStylePath.push("alpha"),
					imageURL: this.fillStylePath.push("imageURL")
				},
				stroke: {
					color: this.lineStylePath.push("color"),
					alpha: this.lineStylePath.push("alpha"),
					weight: this.lineStylePath.push("weight"),
					lineCap: this.lineStylePath.push("caps"),
					lineJoin: this.lineStylePath.push("joints"),
					miterLimit: this.lineStylePath.push("miterLimit")
				}
			});

			var styleRecordsIndex = _lodash2.default.indexBy(styleRecords, "id");

			var sizeByNumeric = this.layerPath.retrieveRecords({ sizeBy: this.sizeBy }, { dataType: "number" });

			var _iteratorNormalCompletion = true;
			var _didIteratorError = false;
			var _iteratorError = undefined;

			try {
				for (var _iterator = sizeByNumeric[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
					var record = _step.value;

					var id = record.id;
					var fullRecord = styleRecordsIndex[id];
					if (fullRecord) {
						fullRecord.sizeBy = record.sizeBy;
					}
				}
			} catch (err) {
				_didIteratorError = true;
				_iteratorError = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion && _iterator.return) {
						_iterator.return();
					}
				} finally {
					if (_didIteratorError) {
						throw _iteratorError;
					}
				}
			}

			this.rawStyles = styleRecords;

			var sizeBy = _lodash2.default.pluck(styleRecords, "sizeBy");
			var sizeByMax = _lodash2.default.max(sizeBy);
			var sizeByMin = _lodash2.default.min(sizeBy);
			var absMax = Math.max(sizeByMax, sizeByMin);
			var minScreenRadius = this.minRadiusPath.getState();
			var maxScreenRadius = this.maxRadiusPath.getState();
			var defaultScreenRadius = this.defaultRadiusPath.getState();

			styleRecords = _lodash2.default.sortByOrder(styleRecords, ["sizeBy", "id"], ["desc"], ["asc"]);

			var zOrder = 0;

			var _iteratorNormalCompletion2 = true;
			var _didIteratorError2 = false;
			var _iteratorError2 = undefined;

			try {
				for (var _iterator2 = styleRecords[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
					var record = _step2.value;

					var screenRadius = undefined;

					var normSize = _StandardLib2.default.normalize(Math.abs(record.sizeBy), 0, absMax);

					if (isNaN(normSize) || record.sizeBy === null) {
						screenRadius = defaultScreenRadius;
					} else {
						screenRadius = minScreenRadius + normSize * (maxScreenRadius - minScreenRadius);
					}

					var olStroke = _FeatureLayer2.default.olStrokeFromWeaveStroke(record.stroke);
					var olFill = _FeatureLayer2.default.olFillFromWeaveFill(record.fill);

					var olStrokeFaded = _FeatureLayer2.default.olStrokeFromWeaveStroke(record.stroke, 0.5);
					var olFillFaded = _FeatureLayer2.default.olFillFromWeaveFill(record.fill, 0.5);

					var olSelectionStyle = _FeatureLayer2.default.getOlSelectionStyle(olStroke);
					var olProbedStyle = _FeatureLayer2.default.getOlProbedStyle(olStroke);

					var normalStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							fill: olFill, stroke: olStroke,
							radius: screenRadius
						})
					})];

					var unselectedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							fill: olFillFaded, stroke: olStrokeFaded,
							radius: screenRadius
						})
					})];

					var selectedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olSelectionStyle[0].getStroke(),
							radius: screenRadius
						}),
						zIndex: olSelectionStyle[0].getZIndex()
					})];

					var probedStyle = [new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olProbedStyle[0].getStroke(),
							radius: screenRadius
						}),
						zIndex: olProbedStyle[0].getZIndex()
					}), new _openlayers2.default.style.Style({
						image: new _openlayers2.default.style.Circle({
							stroke: olProbedStyle[1].getStroke(),
							radius: screenRadius
						}),
						zIndex: olProbedStyle[1].getZIndex()
					})];

					var feature = this.source.getFeatureById(record.id);

					if (feature) {
						feature.setProperties({ normalStyle: normalStyle, unselectedStyle: unselectedStyle, selectedStyle: selectedStyle, probedStyle: probedStyle, zOrder: zOrder });
					}

					zOrder++;
				}
			} catch (err) {
				_didIteratorError2 = true;
				_iteratorError2 = err;
			} finally {
				try {
					if (!_iteratorNormalCompletion2 && _iterator2.return) {
						_iterator2.return();
					}
				} finally {
					if (_didIteratorError2) {
						throw _iteratorError2;
					}
				}
			}
		}
	}]);

	return ScatterPlotLayer;
}(_GlyphLayer3.default);

exports.default = ScatterPlotLayer;

(0, _Layer.registerLayerImplementation)("weave.visualization.plotters::ScatterPlotPlotter", ScatterPlotLayer);

},{"../../../../outts/utils/StandardLib.js":31,"./FeatureLayer.js":41,"./GlyphLayer.js":43,"./Layer.js":46,"lodash":"lodash","openlayers":"openlayers"}],48:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _Layer2 = require("./Layer.js");

var _Layer3 = _interopRequireDefault(_Layer2);

var _openlayers = require("openlayers");

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TileLayer = function (_Layer) {
	_inherits(TileLayer, _Layer);

	function TileLayer(parent, layerName) {
		_classCallCheck(this, TileLayer);

		var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(TileLayer).call(this, parent, layerName));

		_this.layer = new _openlayers2.default.layer.Tile();
		_this.servicePath = _this.layerPath.push("service", null);
		_this.oldProviderName = null;

		_this.servicePath.addCallback(_this, _this.updateTileSource, true);
		_this.projectionPath.addCallback(_this, _this.updateValidExtents, true);
		return _this;
	}

	_createClass(TileLayer, [{
		key: "updateValidExtents",
		value: function updateValidExtents() {
			var proj = _openlayers2.default.proj.get(this.projectionPath.getState() || "EPSG:3857");
			if (proj) this.layer.setExtent(proj.getExtent());else console.log('invalid proj -> no extent');
		}
	}, {
		key: "getCustomWMSSource",
		value: function getCustomWMSSource() {
			var customWMSPath = this.servicePath;

			if (customWMSPath.push("wmsURL").getType()) {
				var url = customWMSPath.getState("wmsURL");
				var attributions = customWMSPath.getState("creditInfo");
				var projection = customWMSPath.getState("tileProjectionSRS");

				return new _openlayers2.default.source.XYZ({
					url: url, attributions: attributions, projection: projection
				});
			}
		}
	}, {
		key: "getModestMapsSource",
		value: function getModestMapsSource() {
			var providerNamePath = this.servicePath.push("providerName");

			if (providerNamePath.getType()) {
				var providerName = providerNamePath.getState();

				if (providerName === this.oldProviderName) {
					return undefined;
				}

				switch (providerName) {
					case "Stamen WaterColor":
						return new _openlayers2.default.source.Stamen({ layer: "watercolor", wrapX: false });
					case "Stamen Toner":
						return new _openlayers2.default.source.Stamen({ layer: "toner", wrapX: false });
					case "Open MapQuest Aerial":
						return new _openlayers2.default.source.MapQuest({ layer: "sat", wrapX: false });
					case "Open MapQuest":
						return new _openlayers2.default.source.MapQuest({ layer: "osm", wrapX: false });
					case "Open Street Map":
						return new _openlayers2.default.source.OSM({ wrapX: false });
					case "Blue Marble Map":
						return new _openlayers2.default.source.TileWMS({ url: "http://neowms.sci.gsfc.nasa.gov/wms/wms", wrapX: false });
					default:
						return null;
				}
			}
		}
	}, {
		key: "updateTileSource",
		value: function updateTileSource() {
			var serviceDriverName = this.servicePath.getType();
			var newLayer = null;
			switch (serviceDriverName) {
				case "weave.services.wms::ModestMapsWMS":
					newLayer = this.getModestMapsSource();
					break;
				case "weave.services.wms::CustomWMS":
					newLayer = this.getCustomWMSSource();
					break;
				default:
					newLayer = null;
			}

			if (newLayer !== undefined) {
				this.source = newLayer;
			}
		}
	}]);

	return TileLayer;
}(_Layer3.default);

exports.default = TileLayer;

(0, _Layer2.registerLayerImplementation)("weave.visualization.plotters::WMSPlotter", TileLayer);

},{"./Layer.js":46,"openlayers":"openlayers"}],49:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//
/* global Weave, weavejs */

var Barchart = function (_React$Component) {
  _inherits(Barchart, _React$Component);

  function Barchart(props) {
    _classCallCheck(this, Barchart);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(Barchart).call(this, props));
  }

  _createClass(Barchart, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement('div', null);
    }
  }]);

  return Barchart;
}(_react2.default.Component);

/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */

exports.default = Barchart;
Barchart.prototype.FLEXJS_CLASS_INFO = { names: [{ name: 'Barchart', qName: 'weavejs.tools.Barchart' }], interfaces: [weavejs.api.core.ILinkableObject] };
Weave.registerClass('weavejs.tools.Barchart', Barchart);

},{"react":"react"}],50:[function(require,module,exports){
"use strict";

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _c = require("c3");

var _c2 = _interopRequireDefault(_c);

var _d = require("d3");

var _d2 = _interopRequireDefault(_d);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _FormatUtils = require("../../outts/utils/FormatUtils");

var _FormatUtils2 = _interopRequireDefault(_FormatUtils);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var WeaveC3LineChart = function (_AbstractWeaveTool) {
    _inherits(WeaveC3LineChart, _AbstractWeaveTool);

    function WeaveC3LineChart(props) {
        _classCallCheck(this, WeaveC3LineChart);

        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveC3LineChart).call(this, props));

        _this.keyToIndex = {};
        _this.indexToKey = {};
        _this.yAxisValueToLabel = {};
        return _this;
    }

    _createClass(WeaveC3LineChart, [{
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            var _this2 = this;

            if (!this.chart) return;

            var selectedKeys = this.toolPath.selection_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this2.keyToIndex[key]);
            });

            var unselectedIndices = _lodash2.default.difference(indices, selectedIndices);
            if (selectedIndices.length) {
                //unfocus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style("opacity", "0.1");

                selectedIndices.forEach(function (index) {
                    //custom style for circles on selected lines
                    var circleCount = _d2.default.select(_d2.default.select(_this2.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0].length;
                    var selectedCircles = _lodash2.default.range(0, circleCount);
                    selectedCircles.forEach(function (i) {
                        _d2.default.select(_d2.default.select(_d2.default.select(_this2.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0][i]).style({ opacity: 1.0, "stroke-opacity": 1.0 });
                    });
                });

                this.customStyle(unselectedIndices, "path", ".c3-shape.c3-line", { opacity: 0.1 });
                this.customStyle(selectedIndices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
                this.chart.select(["y"], selectedIndices, true);
            } else {
                //focus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style({ opacity: 1.0, "stroke-opacity": 0.0 });
                this.customStyle(indices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
                this.chart.select(["y"], [], true);
            }
        }
    }, {
        key: "_probedKeysChanged",
        value: function _probedKeysChanged() {
            var _this3 = this;

            var selectedKeys = this.toolPath.probe_keyset.getKeys();
            var selectedIndices = selectedKeys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var keys = Object.keys(this.keyToIndex);
            var indices = keys.map(function (key) {
                return Number(_this3.keyToIndex[key]);
            });
            var unselectedIndices = _lodash2.default.difference(indices, selectedIndices);

            if (selectedIndices.length) {
                //unfocus all circles
                _d2.default.select(this.element).selectAll("circle").filter(".c3-shape").style({ opacity: 0.1, "stroke-opacity": 0.0 });

                selectedIndices.forEach(function (index) {
                    //custom style for circles on probed lines
                    var circleCount = _d2.default.select(_d2.default.select(_this3.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0].length;
                    var selectedCircles = _lodash2.default.range(0, circleCount);
                    selectedCircles.forEach(function (i) {
                        _d2.default.select(_d2.default.select(_d2.default.select(_this3.element).selectAll("g").filter(".c3-chart-line").selectAll("circle").filter(".c3-shape")[index])[0][0][i]).style({ opacity: 1.0, "stroke-opacity": 0.0 });
                    });
                });

                this.customStyle(unselectedIndices, "path", ".c3-shape.c3-line", { opacity: 0.1 });
                this.customStyle(selectedIndices, "path", ".c3-shape.c3-line", { opacity: 1.0 });
            } else {
                this._selectionKeysChanged();
            }
        }
    }, {
        key: "_updateStyle",
        value: function _updateStyle() {
            _d2.default.select(this.element).selectAll("circle").style("opacity", 1).style("stroke", "black").style("stroke-opacity", 0.0);
        }
    }, {
        key: "_dataChanged",
        value: function _dataChanged() {
            var _this4 = this;

            this.columnLabels = [];
            this.columnNames = [];

            var children = this.paths.columns.getChildren();

            this.yLabelColumnPath = children[0];

            var numericMapping = {
                columns: children,
                yLabel: this.yLabelColumnPath
            };

            var stringMapping = {
                columns: children,
                line: {
                    //alpha: this._lineStylePath.push("alpha"),
                    color: this.paths.lineStyle.push("color")
                    //caps: this._lineStylePath.push("caps")
                },
                yLabel: this.yLabelColumnPath
            };

            for (var idx in children) {
                var child = children[idx];
                var title = child.getValue("this.getMetadata('title')");
                var name = child.getPath().pop();
                this.columnLabels.push(title);
                this.columnNames.push(name);
            }

            this.numericRecords = this.paths.plotter.retrieveRecords(numericMapping, { keySet: this.paths.filteredKeySet, dataType: "number" });
            this.stringRecords = this.paths.plotter.retrieveRecords(stringMapping, { keySet: this.paths.filteredKeySet, dataType: "string" });

            this.records = _lodash2.default.zip(this.numericRecords, this.stringRecords);
            this.records = _lodash2.default.sortBy(this.records, [0, "id"]);

            if (this.records.length) {
                ;

                var _$unzip = _lodash2.default.unzip(this.records);

                var _$unzip2 = _slicedToArray(_$unzip, 2);

                this.numericRecords = _$unzip2[0];
                this.stringRecords = _$unzip2[1];
            }this.keyToIndex = {};
            this.indexToKey = {};
            this.yAxisValueToLabel = {};

            this.numericRecords.forEach(function (record, index) {
                _this4.keyToIndex[record.id] = index;
                _this4.indexToKey[index] = record.id;
            });

            this.stringRecords.forEach(function (record, index) {
                var numericRecord = _this4.numericRecords[index];
                _this4.yAxisValueToLabel[numericRecord.yLabel] = record.yLabel;
            });

            var columns = [];

            columns = this.numericRecords.map(function (record) {
                var tempArr = [];
                tempArr.push(record.id);
                _lodash2.default.keys(record.columns).forEach(function (key) {
                    tempArr.push(record.columns[key]);
                });
                return tempArr;
            });

            this.colors = {};
            this.stringRecords.forEach(function (record) {
                _this4.colors[record.id] = record.line.color || "#C0CDD1";
            });

            var chartType = "line";
            if (this.paths.plotter.push("curveType").getState() === "double") {
                chartType = "spline";
            }

            this.chart.load({ columns: columns, colors: this.colors, type: chartType, unload: true });
        }
    }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentDidUpdate", this).call(this);
            //console.log("resizing");
            //var start = Date.now();
            var newElementSize = this.getElementSize();
            if (!_lodash2.default.isEqual(newElementSize, this.elementSize)) {
                this.chart.resize(newElementSize);
                this.elementSize = newElementSize;
            }
            //var end = Date.now();
            //console.log(end - start);
        }
    }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
            /* Cleanup callbacks */
            //this.teardownCallbacks();
            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentWillUnmount", this).call(this);
            this.chart.destroy();
        }
    }, {
        key: "componentDidMount",
        value: function componentDidMount() {
            var _this5 = this;

            _get(Object.getPrototypeOf(WeaveC3LineChart.prototype), "componentDidMount", this).call(this);
            document.addEventListener("keydown", this.toggleKey.bind(this));
            document.addEventListener("keyup", this.toggleKey.bind(this));
            var dataChanged = _lodash2.default.debounce(this._dataChanged.bind(this), 100);
            var selectionKeySetChanged = this._selectionKeysChanged.bind(this);
            var probeKeySetChanged = _lodash2.default.debounce(this._probedKeysChanged.bind(this), 100);
            var plotterPath = this.toolPath.pushPlotter("plot");
            var mapping = [{ name: "plotter", path: plotterPath, callbacks: null }, { name: "columns", path: plotterPath.push("columns"), callbacks: dataChanged }, { name: "lineStyle", path: plotterPath.push("lineStyle"), callbacks: dataChanged }, { name: "curveType", path: plotterPath.push("curveType"), callbacks: dataChanged }, { name: "filteredKeySet", path: plotterPath.push("filteredKeySet"), callbacks: dataChanged }, { name: "selectionKeySet", path: this.toolPath.selection_keyset, callbacks: selectionKeySetChanged }, { name: "probeKeySet", path: this.toolPath.probe_keyset, callbacks: probeKeySetChanged }];

            this.initializePaths(mapping);

            this.c3Config = {
                //size: this.getElementSize(),
                padding: {
                    top: 20,
                    bottom: 20,
                    right: 30
                },
                data: {
                    columns: [],
                    xSort: false,
                    selection: {
                        enabled: true,
                        multiple: true,
                        draggable: true
                    },
                    onclick: function onclick(d) {
                        if (!_this5.keyDown && d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.setKeys([d.id]);
                        }
                    },
                    onselected: function onselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.addKeys([d.id]);
                        }
                    },
                    onunselected: function onunselected(d) {
                        _this5.flag = true;
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.selection_keyset.removeKeys([d.id]);
                        }
                    },
                    onmouseover: function onmouseover(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([d.id]);
                        }
                    },
                    onmouseout: function onmouseout(d) {
                        if (d && d.hasOwnProperty("index")) {
                            _this5.toolPath.probe_keyset.setKeys([]);
                        }
                    }
                },
                tooltip: {
                    show: false
                },
                grid: {
                    x: {
                        show: true
                    },
                    y: {
                        show: true
                    }
                },
                axis: {
                    x: {
                        tick: {
                            multiline: false,
                            rotate: 0,
                            format: function format(d) {
                                return _this5.columnLabels[d];
                            }
                        }
                    },
                    y: {
                        tick: {
                            multiline: true,
                            format: function format(num) {
                                if (_this5.yLabelColumnPath && _this5.yLabelColumnPath.getValue("this.getMetadata('dataType')") !== "number") {
                                    return _this5.yAxisValueToLabel[num] || "";
                                } else {
                                    return _FormatUtils2.default.defaultNumberFormatting(num);
                                }
                            }
                        }
                    }
                },
                bindto: this.element,
                legend: {
                    show: false
                },
                onrendered: this._updateStyle.bind(this)
            };

            this.chart = _c2.default.generate(this.c3Config);
        }
    }, {
        key: "handleClick",
        value: function handleClick(event) {
            if (!this.flag) {
                this.toolPath.selection_keyset.setKeys([]);
            }
            this.flag = false;
        }
    }, {
        key: "toggleKey",
        value: function toggleKey(event) {
            if (event.keyCode === 17 || event.keyCode === 91 || event.keyCode === 224) {
                this.keyDown = !this.keyDown;
            }
        }
    }]);

    return WeaveC3LineChart;
}(_AbstractWeaveTool3.default);

exports.default = WeaveC3LineChart;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::LineChartTool", WeaveC3LineChart);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"../../outts/utils/FormatUtils":30,"c3":"c3","d3":"d3","lodash":"lodash","react":"react"}],51:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactDom = require("react-dom");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _d = require("d3");

var _reactBootstrapTable = require("react-bootstrap-table");

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
//import ReactDataGrid from "react-datagrid";

var WeaveReactTable = function (_AbstractWeaveTool) {
    _inherits(WeaveReactTable, _AbstractWeaveTool);

    function WeaveReactTable(props) {
        _classCallCheck(this, WeaveReactTable);

        return _possibleConstructorReturn(this, Object.getPrototypeOf(WeaveReactTable).call(this, props));
    }

    _createClass(WeaveReactTable, [{
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
            var elementSize = this.element ? this.getElementSize() : null;
            _reactDom2.default.render(_react2.default.createElement(DataTable, { toolPath: this.toolPath, width: elementSize.width + "px", height: elementSize.height + "px" }), this.element);
        }
    }]);

    return WeaveReactTable;
}(_AbstractWeaveTool3.default);

var DataTable = function (_React$Component) {
    _inherits(DataTable, _React$Component);

    function DataTable(props) {
        _classCallCheck(this, DataTable);

        var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(DataTable).call(this, props));

        _this2.toolPath = props.toolPath;
        _this2._columnsPath = _this2.toolPath.push("columns");
        return _this2;
    }

    _createClass(DataTable, [{
        key: "componentDidMount",
        value: function componentDidMount() {
            this._columnsPath.addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true, false);
            this.toolPath.push("filteredKeySet").addCallback(this, _lodash2.default.debounce(this.forceUpdate.bind(this), 0), true, false);
            this.toolPath.push("selectionKeySet").addCallback(this, this._selectionKeysChanged, true, false);
        }
    }, {
        key: "_selectionKeysChanged",
        value: function _selectionKeysChanged() {
            // var keys = this.toolPath.push("selectionKeySet", null).getKeys();
            // var selection = {};
            // keys.forEach((key) => {
            //     selection[key] = {};
            // });
            // this.setState({
            //     selected: selection
            // });
        }
    }, {
        key: "onSelectionChange",
        value: function onSelectionChange(selectedIds) {
            this.setState({
                selected: selectedIds
            });
            this.toolPath.push("selectionKeySet", null).setKeys(_lodash2.default.keys(selectedIds));
        }
    }, {
        key: "customFormat",
        value: function customFormat(cell, row) {
            if (typeof cell === "number") {
                return (0, _d.round)(cell, 2);
            } else {
                return cell;
            }
        }
    }, {
        key: "render",
        value: function render() {
            var _this3 = this;

            var data = this._columnsPath.retrieveRecords(this._columnsPath.getNames(), this.toolPath.push("filteredKeySet")) || [];

            var columns = this._columnsPath.getChildren().map(function (columnPath) {
                return {
                    name: columnPath.getPath().pop(),
                    title: columnPath.getValue("this.getMetadata('title')")
                };
            });

            columns.push({
                name: "id",
                title: "id"
            });

            //var columnWidth = this.props.container.clientWidth / columns.length;

            var columnHeaders = columns.map(function (column, index) {
                return _react2.default.createElement(
                    _reactBootstrapTable.TableHeaderColumn,
                    { dataField: column.name, key: index, dataAlign: "left", dataFormat: _this3.customFormat, dataSort: true },
                    column.title
                );
            });

            return _react2.default.createElement(
                _reactBootstrapTable.BootstrapTable,
                { data: data, keyField: "id", striped: true, hover: true, width: this.props.width, height: this.props.height },
                columnHeaders
            );
        }
    }]);

    return DataTable;
}(_react2.default.Component);

exports.default = WeaveReactTable;

(0, _WeaveTool.registerToolImplementation)("weave.visualization.tools::TableTool", WeaveReactTable);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"d3":"d3","lodash":"lodash","react":"react","react-bootstrap-table":1,"react-dom":"react-dom"}],52:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _reactBootstrap = require("react-bootstrap");

var _WeaveTool = require("../../outts/WeaveTool.jsx");

var _AbstractWeaveTool2 = require("../../outts/tools/AbstractWeaveTool.jsx");

var _AbstractWeaveTool3 = _interopRequireDefault(_AbstractWeaveTool2);

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var sessionStateMenuStyle = { width: "100%" };

var SessionStateMenuTool = function (_AbstractWeaveTool) {
  _inherits(SessionStateMenuTool, _AbstractWeaveTool);

  function SessionStateMenuTool(props) {
    _classCallCheck(this, SessionStateMenuTool);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(SessionStateMenuTool).call(this, props));

    _this.toolPath.push("choices").addCallback(_this, _this.forceUpdate);
    _this.toolPath.push("selectedChoice").addCallback(_this, _this.forceUpdate);
    return _this;
  }

  _createClass(SessionStateMenuTool, [{
    key: "componentDidMount",
    value: function componentDidMount() {}
  }, {
    key: "handleItemClick",
    value: function handleItemClick(index, event) {
      console.log(index);
      this.toolPath.state("selectedChoice", this.choices.getNames()[index]);
      var targets = this.toolPath.push("targets");
      var choice = this.choices.getState(index);
      targets.forEach(choice, function (value, key) {
        this.push(key, null).state(value);
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      this.choices = this.toolPath.push("choices");
      var selectedChoice = this.toolPath.getState("selectedChoice");

      var menus = this.choices.getNames().map(function (choice, index) {
        return choice === selectedChoice ? _react2.default.createElement(
          _reactBootstrap.ListGroupItem,
          { active: true, key: index, onClick: _this2.handleItemClick.bind(_this2, index) },
          choice
        ) : _react2.default.createElement(
          _reactBootstrap.ListGroupItem,
          { key: index, onClick: _this2.handleItemClick.bind(_this2, index) },
          choice
        );
      });

      return _react2.default.createElement(
        "div",
        { style: sessionStateMenuStyle },
        _react2.default.createElement(
          _reactBootstrap.ListGroup,
          null,
          menus
        )
      );
    }
  }]);

  return SessionStateMenuTool;
}(_AbstractWeaveTool3.default);

exports.default = SessionStateMenuTool;

(0, _WeaveTool.registerToolImplementation)("weave.ui::SessionStateMenuTool", SessionStateMenuTool);

},{"../../outts/WeaveTool.jsx":17,"../../outts/tools/AbstractWeaveTool.jsx":24,"lodash":"lodash","react":"react","react-bootstrap":"react-bootstrap"}]},{},[36])(36)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwLXRhYmxlL2Rpc3QvcmVhY3QtYm9vdHN0cmFwLXRhYmxlLm1pbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvRGVjYWRlVmlldy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvSGVhZGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9Nb250aFZpZXcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL1llYXJWaWV3LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9jb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi9vbkVudGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL2xpYi90b01vbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvdXRpbHMvYXNDb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZGF0ZS1waWNrZXIvbGliL3V0aWxzL2Zvcm1hdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC1kYXRlLXBpY2tlci9saWIvdXRpbHMvZ2V0V2Vla0RheU5hbWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL25vZGVfbW9kdWxlcy9tb21lbnQvbW9tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRhdGUtcGlja2VyL25vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LXZlbmRvci1wcmVmaXgvZGlzdC9pbmRleC5qcyIsInNyY3RzXFxUb29sT3ZlcmxheS50c3giLCJzcmN0c1xcV2VhdmVUb29sLnRzeCIsInNyY3RzXFxyZWFjdC1mbGV4aWJsZS1sYXlvdXRcXExheW91dC50c3giLCJzcmN0c1xccmVhY3QtZmxleGlibGUtbGF5b3V0XFxSZXNpemVyLnRzeCIsInNyY3RzXFxyZWFjdC1mbGV4aWJsZS1sYXlvdXRcXFJlc2l6ZXJPdmVybGF5LnRzeCIsInNyY3RzXFxyZWFjdC11aVxcSEJveC50c3giLCJzcmN0c1xccmVhY3QtdWlcXFZCb3gudHN4Iiwic3JjdHNcXHJlYWN0LXVpXFx1aS50c3giLCJzcmN0c1xcdG9vbHNcXEFic3RyYWN0V2VhdmVUb29sLnRzeCIsInNyY3RzXFx0b29sc1xcd2VhdmUtYzMtYmFyY2hhcnQudHN4Iiwic3JjdHNcXHRvb2xzXFx3ZWF2ZS1jMy1jb2xvcmxlZ2VuZC50c3giLCJzcmN0c1xcdG9vbHNcXHdlYXZlLWMzLWhpc3RvZ3JhbS50c3giLCJzcmN0c1xcdG9vbHNcXHdlYXZlLWMzLXBpZWNoYXJ0LnRzeCIsInNyY3RzXFx0b29sc1xcd2VhdmUtYzMtc2NhdHRlcnBsb3QudHN4Iiwic3JjdHNcXHV0aWxzXFxGb3JtYXRVdGlscy50cyIsInNyY3RzXFx1dGlsc1xcU3RhbmRhcmRMaWIudHMiLCJzcmNcXEN1c3RvbVNlYXJjaFRvb2wuanN4Iiwic3JjXFxXZWF2ZUxheW91dE1hbmFnZXIuanN4Iiwic3JjXFxXZWF2ZVBhbmVsLmpzIiwic3JjXFxXZWF2ZVBhbmVsTWFuYWdlci5qcyIsInNyY1xcV2VhdmVVSS5qc3giLCJzcmNcXHRvb2xzXFxtYXAuanMiLCJzcmNcXHRvb2xzXFxtYXBcXEN1c3RvbURyYWdCb3guanMiLCJzcmNcXHRvb2xzXFxtYXBcXGNvbnRyb2xzLmpzIiwic3JjXFx0b29sc1xcbWFwXFxpbnRlcmFjdGlvbnMuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcRmVhdHVyZUxheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXEdlb21ldHJ5TGF5ZXIuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcR2x5cGhMYXllci5qcyIsInNyY1xcdG9vbHNcXG1hcFxcbGF5ZXJzXFxJbWFnZUdseXBoQ2FjaGUuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcSW1hZ2VHbHlwaExheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXExheWVyLmpzIiwic3JjXFx0b29sc1xcbWFwXFxsYXllcnNcXFNjYXR0ZXJQbG90TGF5ZXIuanMiLCJzcmNcXHRvb2xzXFxtYXBcXGxheWVyc1xcVGlsZUxheWVyLmpzIiwic3JjXFx0b29sc1xcd2VhdmUtYmFyY2hhcnQuanN4Iiwic3JjXFx0b29sc1xcd2VhdmUtYzMtbGluZWNoYXJ0LmpzeCIsInNyY1xcdG9vbHNcXHdlYXZlLXJlYWN0LXRhYmxlLmpzeCIsInNyY1xcdG9vbHNcXHdlYXZlLXNlc3Npb24tc3RhdGUtbWVudS5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvN0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LEFBQUksT0FBQyxLQUFLLENBQUMsU0FBUyxLQUFLLFVBQVUsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdEYsd0JBQUksSUFBSSxHQUFVLEFBQUksT0FBQyxLQUFLLENBQUMsU0FBUyxLQUFLLFVBQVUsR0FBRyxBQUFJLE9BQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxBQUFJLE9BQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUU3Ryw0QkFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEFBQUksT0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxHQUFHLEFBQUksT0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBRWxGLHdCQUFJLElBQUksR0FBVSxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN0Qyx3QkFBSSxJQUFJLEdBQVUsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFFdEMsd0JBQUksS0FBSyxHQUFXLEFBQUksT0FBQyxJQUFJLENBQUMsSUFBSSxDQUFXLENBQUM7QUFDOUMsd0JBQUksS0FBSyxHQUFXLEFBQUksT0FBQyxJQUFJLENBQUMsSUFBSSxDQUFXLENBQUM7QUFHOUMsd0JBQUksTUFBTSxHQUFVLEFBQUksT0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xELHdCQUFJLE1BQU0sR0FBVSxBQUFJLE9BQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUVsRCx3QkFBSSxLQUFLLEdBQVUsQ0FBQyxRQUFRLEdBQUcsS0FBSyxBQUFDLElBQUcsSUFBSSxDQUFDO0FBQzdDLHdCQUFJLEtBQUssR0FBVyxDQUFDLEdBQUcsR0FBRyxRQUFRLEFBQUMsSUFBRyxJQUFJLENBQUM7QUFFNUMsNEJBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztBQUN2Qyw0QkFBUSxDQUFDLFFBQVEs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QUFHLENBQUMsVUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFLO0FBQ3pELGVBQU8sTUFBTSxLQUFLLGNBQWMsR0FBRzswQkFuQ2pDLGFBQWE7WUFtQ21DLE1BQU0sTUFBQSxFQUFDLEdBQUcsRUFBRSxLQUFLLEFBQUMsRUFBQyxPQUFPLEVBQUUsT0FBSyxlQUFlLENBQUMsSUFBSSxTQUFPLEtBQUssQ0FBQyxBQUFDO1VBQUUsTUFBTTtTQUFpQixHQUM5STswQkFwQ0UsYUFBYTtZQW9DQSxHQUFHLEVBQUUsS0FBSyxBQUFDLEVBQUMsT0FBTyxFQUFFLE9BQUssZUFBZSxDQUFDLElBQUksU0FBTyxLQUFLLENBQUMsQUFBQztVQUFFLE1BQU07U0FBaUIsQ0FBQztPQUN0RyxDQUFDLENBQUM7O0FBRUgsYUFBUTs7VUFBSyxLQUFLLEVBQUUscUJBQXFCLEFBQUM7UUFDeEM7MEJBeENpQixTQUFTOztVQTBDdEIsS0FBSztTQUVHO09BQ1IsQ0FBRTtLQUNUOzs7U0F2Q0csb0JBQW9COzs7a0JBMENYLG9CQUFvQjs7QUFFbkMsZUFsRFEsMEJBQTBCLEVBa0RQLGdDQUFnQyxFQUFFLG9CQUFvQixDQUFDLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dChyZXF1aXJlKFwicmVhY3RcIikscmVxdWlyZShcInJlYWN0LWRvbVwiKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJyZWFjdFwiLFwicmVhY3QtZG9tXCJdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuUmVhY3RCb290c3RyYXBUYWJsZT10KHJlcXVpcmUoXCJyZWFjdFwiKSxyZXF1aXJlKFwicmVhY3QtZG9tXCIpKTplLlJlYWN0Qm9vdHN0cmFwVGFibGU9dChlLlJlYWN0LGUuUmVhY3RET00pfSh0aGlzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2V4cG9ydHM6e30saWQ6bixsb2FkZWQ6ITF9O3JldHVybiBlW25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubG9hZGVkPSEwLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4gdC5tPWUsdC5jPXIsdC5wPVwiXCIsdCgwKX0oW2Z1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89cigxKSxpPW4obyksYT1yKDQwKSxzPW4oYSksbD1yKDM0KTtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93LkJvb3RzdHJhcFRhYmxlPWlbXCJkZWZhdWx0XCJdLHdpbmRvdy5UYWJsZUhlYWRlckNvbHVtbj1zW1wiZGVmYXVsdFwiXSx3aW5kb3cuVGFibGVEYXRhU2V0PWwuVGFibGVEYXRhU2V0KSx0W1wiZGVmYXVsdFwiXT17Qm9vdHN0cmFwVGFibGU6aVtcImRlZmF1bHRcIl0sVGFibGVIZWFkZXJDb2x1bW46c1tcImRlZmF1bHRcIl0sVGFibGVEYXRhU2V0OmwuVGFibGVEYXRhU2V0fSxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoMyksZD1uKGMpLHA9cig0KSxmPW4ocCksaD1yKDUpLHY9bihoKSx5PXIoOSksbT1uKHkpLGc9cigzMCksYj1uKGcpLHc9cigzMiksRT1uKHcpLF89cigzMyksUD1uKF8pLFQ9cigzNCksUz1yKDM2KSxPPW4oUyksQz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciByPXRoaXM7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuX3Njcm9sbEhlYWRlcj1mdW5jdGlvbihlKXtyLnJlZnMuaGVhZGVyLnJlZnMuY29udGFpbmVyLnNjcm9sbExlZnQ9ZS5jdXJyZW50VGFyZ2V0LnNjcm9sbExlZnR9LHRoaXMuX2FkanVzdEhlYWRlcldpZHRoPWZ1bmN0aW9uKCl7dmFyIGU9ci5yZWZzLmhlYWRlci5yZWZzLmNvbnRhaW5lci5jaGlsZE5vZGVzWzBdLHQ9ci5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuY2hpbGROb2Rlc1swXTtlLm9mZnNldFdpZHRoIT09dC5vZmZzZXRXaWR0aCYmKGUuc3R5bGUud2lkdGg9dC5vZmZzZXRXaWR0aCtcInB4XCIpO3ZhciBuPXIucmVmcy5ib2R5LmdldEJvZHlIZWFkZXJEb21Qcm9wKCk7ci5yZWZzLmhlYWRlci5maXRIZWFkZXIobixyLnJlZnMuYm9keS5yZWZzLmNvbnRhaW5lci5zY3JvbGxIZWlnaHQ+ci5yZWZzLmJvZHkucmVmcy5jb250YWluZXIuY2xpZW50SGVpZ2h0KX0sdGhpcy5fYXR0YWNoQ2VsbEVkaXRGdW5jKCksQXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmRhdGEpP3RoaXMuc3RvcmU9bmV3IFQuVGFibGVEYXRhU3RvcmUodGhpcy5wcm9wcy5kYXRhKToodGhpcy5zdG9yZT1uZXcgVC5UYWJsZURhdGFTdG9yZSh0aGlzLnByb3BzLmRhdGEuZ2V0RGF0YSgpKSx0aGlzLnByb3BzLmRhdGEuY2xlYXIoKSx0aGlzLnByb3BzLmRhdGEub24oXCJjaGFuZ2VcIixmdW5jdGlvbihlKXtyLnN0b3JlLnNldERhdGEoZSksci5zZXRTdGF0ZSh7ZGF0YTpyLmdldFRhYmxlRGF0YShyLnByb3BzKX0pfSkpLHRoaXMuaW5pdFRhYmxlKHRoaXMucHJvcHMpLHRoaXMucHJvcHMuc2VsZWN0Um93JiZ0aGlzLnByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZCYmdGhpcy5zdG9yZS5zZXRTZWxlY3RlZFJvd0tleSh0aGlzLnByb3BzLnNlbGVjdFJvdy5zZWxlY3RlZCksdGhpcy5zdGF0ZT17ZGF0YTp0aGlzLmdldFRhYmxlRGF0YSh0aGlzLnByb3BzKSxzZWxlY3RlZFJvd0tleXM6dGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKX19cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJpbml0VGFibGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmtleUZpZWxkLHI9e307aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQubGVuZ3RofHx1W1wiZGVmYXVsdFwiXS5DaGlsZHJlbi5mb3JFYWNoKGUuY2hpbGRyZW4sZnVuY3Rpb24oZSl7aWYoZS5wcm9wcy5pc0tleSl7aWYobnVsbCE9dCl0aHJvd1wiRXJyb3IuIE11bHRpcGxlIGtleSBjb2x1bW4gYmUgZGV0ZWN0ZWQgaW4gVGFibGVIZWFkZXJDb2x1bW4uXCI7dD1lLnByb3BzLmRhdGFGaWVsZH19LHRoaXMpLHVbXCJkZWZhdWx0XCJdLkNoaWxkcmVuLmZvckVhY2goZS5jaGlsZHJlbixmdW5jdGlvbihlKXtlLnByb3BzLnNvcnRGdW5jJiYocltlLnByb3BzLmRhdGFGaWVsZF09ZS5wcm9wcy5zb3J0RnVuYyl9LHRoaXMpLG51bGw9PXQpdGhyb3dcIkVycm9yLiBObyBhbnkga2V5IGNvbHVtbiBkZWZpbmVkIGluIFRhYmxlSGVhZGVyQ29sdW1uLlVzZSAnaXNLZXk9e3RydWV9JyB0byBzcGVjaWZ5IGFuIHVuaXF1ZSBjb2x1bW4gYWZ0ZXIgdmVyc2lvbiAwLjUuNC5cIjt0aGlzLnN0b3JlLnNldFByb3BzKHtpc1BhZ2luYXRpb246ZS5wYWdpbmF0aW9uLGtleUZpZWxkOnQsY3VzdG9tU29ydEZ1bmNNYXA6cixtdWx0aUNvbHVtblNlYXJjaDplLm11bHRpQ29sdW1uU2VhcmNoLHJlbW90ZTp0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpfSl9fSx7a2V5OlwiZ2V0VGFibGVEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9W107aWYoZS5wYWdpbmF0aW9uKXt2YXIgcj1lLm9wdGlvbnMucGFnZSxuPWUub3B0aW9ucy5zaXplUGVyUGFnZTtyfHwocj10aGlzLnJlZnMucGFnaW5hdGlvbj90aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRDdXJyZW50UGFnZSgpOjEpLG58fChuPXRoaXMucmVmcy5wYWdpbmF0aW9uP3RoaXMucmVmcy5wYWdpbmF0aW9uLmdldFNpemVQZXJQYWdlKCk6ZltcImRlZmF1bHRcIl0uU0laRV9QRVJfUEFHRSkscj49ZS5kYXRhLmxlbmd0aC9uJiYocj0xKSx0PXRoaXMuc3RvcmUucGFnZShyLG4pLmdldCgpfWVsc2UgdD10aGlzLnN0b3JlLmdldCgpO3JldHVybiB0fX0se2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLmluaXRUYWJsZShlKSxBcnJheS5pc0FycmF5KGUuZGF0YSkpe3RoaXMuc3RvcmUuc2V0RGF0YShlLmRhdGEpO3ZhciB0PXRoaXMuZ2V0VGFibGVEYXRhKGUpO3RoaXMuc2V0U3RhdGUoe2RhdGE6dH0pfWUuc2VsZWN0Um93JiZlLnNlbGVjdFJvdy5zZWxlY3RlZCYmKHRoaXMuc3RvcmUuc2V0U2VsZWN0ZWRSb3dLZXkoZS5zZWxlY3RSb3cuc2VsZWN0ZWQpLHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUm93S2V5czplLnNlbGVjdFJvdy5zZWxlY3RlZH0pKX19LHtrZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYWRqdXN0SGVhZGVyV2lkdGgoKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2FkanVzdEhlYWRlcldpZHRoKSx0aGlzLnJlZnMuYm9keS5yZWZzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5fc2Nyb2xsSGVhZGVyKX19LHtrZXk6XCJjb21wb25lbnRXaWxsVW5tb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aCksdGhpcy5yZWZzLmJvZHkucmVmcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX3Njcm9sbEhlYWRlcil9fSx7a2V5OlwiY29tcG9uZW50RGlkVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9hZGp1c3RIZWFkZXJXaWR0aCgpLHRoaXMuX2F0dGFjaENlbGxFZGl0RnVuYygpLHRoaXMucHJvcHMub3B0aW9ucy5hZnRlclRhYmxlQ29tcGxldGUmJnRoaXMucHJvcHMub3B0aW9ucy5hZnRlclRhYmxlQ29tcGxldGUoKX19LHtrZXk6XCJfYXR0YWNoQ2VsbEVkaXRGdW5jXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnByb3BzLmNlbGxFZGl0JiYodGhpcy5wcm9wcy5jZWxsRWRpdC5fX29uQ29tcGxldGVFZGl0X189dGhpcy5oYW5kbGVFZGl0Q2VsbC5iaW5kKHRoaXMpLHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZSE9PWZbXCJkZWZhdWx0XCJdLkNFTExfRURJVF9OT05FJiYodGhpcy5wcm9wcy5zZWxlY3RSb3cuY2xpY2tUb1NlbGVjdD0hMSkpfX0se2tleTpcImlzUmVtb3RlRGF0YVNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybihlfHx0aGlzLnByb3BzKS5yZW1vdGV9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oKDAsZFtcImRlZmF1bHRcIl0pKFwicmVhY3QtYnMtdGFibGVcIiksdGhpcy5wcm9wcy5jaGlsZHJlbiksdD17aGVpZ2h0OnRoaXMucHJvcHMuaGVpZ2h0LG1heEhlaWdodDp0aGlzLnByb3BzLm1heEhlaWdodH07QXJyYXkuaXNBcnJheSh0aGlzLnByb3BzLmNoaWxkcmVuKXx8KGU9W3RoaXMucHJvcHMuY2hpbGRyZW5dKTt2YXIgcj1lLm1hcChmdW5jdGlvbihlLHQpe3JldHVybntuYW1lOmUucHJvcHMuZGF0YUZpZWxkLGFsaWduOmUucHJvcHMuZGF0YUFsaWduLHNvcnQ6ZS5wcm9wcy5kYXRhU29ydCxmb3JtYXQ6ZS5wcm9wcy5kYXRhRm9ybWF0LGVkaXRhYmxlOmUucHJvcHMuZWRpdGFibGUsaGlkZGVuOmUucHJvcHMuaGlkZGVuLGNsYXNzTmFtZTplLnByb3BzLmNvbHVtbkNsYXNzTmFtZSx3aWR0aDplLnByb3BzLndpZHRoLHRleHQ6ZS5wcm9wcy5jaGlsZHJlbixpbmRleDp0fX0sdGhpcyksbj10aGlzLnJlbmRlclBhZ2luYXRpb24oKSxvPXRoaXMucmVuZGVyVG9vbEJhcigpLGk9dGhpcy5yZW5kZXJUYWJsZUZpbHRlcihyKSxhPXRoaXMuaXNTZWxlY3RBbGwoKTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyZWFjdC1icy1jb250YWluZXJcIixyZWY6XCJ0YWJsZVwifSxvLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwicmVhY3QtYnMtdGFibGUtY29udGFpbmVyXCIsc3R5bGU6dH0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh2W1wiZGVmYXVsdFwiXSx7cmVmOlwiaGVhZGVyXCIscm93U2VsZWN0VHlwZTp0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlLGhpZGVTZWxlY3RDb2x1bW46dGhpcy5wcm9wcy5zZWxlY3RSb3cuaGlkZVNlbGVjdENvbHVtbixzb3J0TmFtZTp0aGlzLnByb3BzLm9wdGlvbnMuc29ydE5hbWUsc29ydE9yZGVyOnRoaXMucHJvcHMub3B0aW9ucy5zb3J0T3JkZXIsb25Tb3J0OnRoaXMuaGFuZGxlU29ydC5iaW5kKHRoaXMpLG9uU2VsZWN0QWxsUm93OnRoaXMuaGFuZGxlU2VsZWN0QWxsUm93LmJpbmQodGhpcyksYm9yZGVyZWQ6dGhpcy5wcm9wcy5ib3JkZXJlZCxjb25kZW5zZWQ6dGhpcy5wcm9wcy5jb25kZW5zZWQsaXNTZWxlY3RBbGw6YX0sdGhpcy5wcm9wcy5jaGlsZHJlbiksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChtW1wiZGVmYXVsdFwiXSx7aGVpZ2h0OnRoaXMucHJvcHMuaGVpZ2h0LG1heEhlaWdodDp0aGlzLnByb3BzLm1heEhlaWdodCxyZWY6XCJib2R5XCIsZGF0YTp0aGlzLnN0YXRlLmRhdGEsY29sdW1uczpyLHRyQ2xhc3NOYW1lOnRoaXMucHJvcHMudHJDbGFzc05hbWUsc3RyaXBlZDp0aGlzLnByb3BzLnN0cmlwZWQsYm9yZGVyZWQ6dGhpcy5wcm9wcy5ib3JkZXJlZCxob3Zlcjp0aGlzLnByb3BzLmhvdmVyLGtleUZpZWxkOnRoaXMuc3RvcmUuZ2V0S2V5RmllbGQoKSxjb25kZW5zZWQ6dGhpcy5wcm9wcy5jb25kZW5zZWQsc2VsZWN0Um93OnRoaXMucHJvcHMuc2VsZWN0Um93LGNlbGxFZGl0OnRoaXMucHJvcHMuY2VsbEVkaXQsc2VsZWN0ZWRSb3dLZXlzOnRoaXMuc3RhdGUuc2VsZWN0ZWRSb3dLZXlzLG9uUm93Q2xpY2s6dGhpcy5oYW5kbGVSb3dDbGljay5iaW5kKHRoaXMpLG9uU2VsZWN0Um93OnRoaXMuaGFuZGxlU2VsZWN0Um93LmJpbmQodGhpcyksbm9EYXRhVGV4dDp0aGlzLnByb3BzLm9wdGlvbnMubm9EYXRhVGV4dH0pKSxpLG4pfX0se2tleTpcImlzU2VsZWN0QWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnN0b3JlLmdldFNlbGVjdGVkUm93S2V5cygpLHQ9dGhpcy5zdG9yZS5nZXRBbGxSb3drZXkoKTtyZXR1cm4gZS5sZW5ndGghPT10Lmxlbmd0aD8wPT09ZS5sZW5ndGg/ITE6XCJpbmRldGVybWluYXRlXCI6ITB9fSx7a2V5OlwiaGFuZGxlU29ydFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5wcm9wcy5vcHRpb25zLm9uU29ydENoYW5nZSYmdGhpcy5wcm9wcy5vcHRpb25zLm9uU29ydENoYW5nZSh0LGUsdGhpcy5wcm9wcyksIXRoaXMuaXNSZW1vdGVEYXRhU291cmNlKCkpe3ZhciByPXRoaXMuc3RvcmUuc29ydChlLHQpLmdldCgpO3RoaXMuc2V0U3RhdGUoe2RhdGE6cn0pfX19LHtrZXk6XCJoYW5kbGVQYWdpbmF0aW9uRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5wcm9wcy5vcHRpb25zLm9uUGFnZUNoYW5nZTtpZihyJiZyKGUsdCksIXRoaXMuaXNSZW1vdGVEYXRhU291cmNlKCkpe3ZhciBuPXRoaXMuc3RvcmUucGFnZShlLHQpLmdldCgpO3RoaXMuc2V0U3RhdGUoe2RhdGE6bn0pfX19LHtrZXk6XCJoYW5kbGVSb3dDbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMub3B0aW9ucy5vblJvd0NsaWNrJiZ0aGlzLnByb3BzLm9wdGlvbnMub25Sb3dDbGljayhlKX19LHtrZXk6XCJoYW5kbGVTZWxlY3RBbGxSb3dcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmN1cnJlbnRUYXJnZXQuY2hlY2tlZCxyPVtdLG49ITA7dGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3RBbGwmJihuPXRoaXMucHJvcHMuc2VsZWN0Um93Lm9uU2VsZWN0QWxsKHQsdD90aGlzLnN0b3JlLmdldCgpOltdKSksKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBufHxuIT09ITEpJiYodCYmKHI9dGhpcy5zdG9yZS5nZXRBbGxSb3drZXkoKSksdGhpcy5zdG9yZS5zZXRTZWxlY3RlZFJvd0tleShyKSx0aGlzLnNldFN0YXRlKHtzZWxlY3RlZFJvd0tleXM6cn0pKX19LHtrZXk6XCJoYW5kbGVTZWxlY3RSb3dcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCksbj1lW3RoaXMuc3RvcmUuZ2V0S2V5RmllbGQoKV0sbz0hMDt0aGlzLnByb3BzLnNlbGVjdFJvdy5vblNlbGVjdCYmKG89dGhpcy5wcm9wcy5zZWxlY3RSb3cub25TZWxlY3QoZSx0KSksKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBvfHxvIT09ITEpJiYodGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZT09PWZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfU0lOR0xFP3I9dD9bbl06W106dD9yLnB1c2gobik6cj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gbiE9PWV9KSx0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KHIpLHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkUm93S2V5czpyfSkpfX0se2tleTpcImhhbmRsZUVkaXRDZWxsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMDt1W1wiZGVmYXVsdFwiXS5DaGlsZHJlbi5mb3JFYWNoKHRoaXMucHJvcHMuY2hpbGRyZW4sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD09cj8obj1lLnByb3BzLmRhdGFGaWVsZCwhMSk6dm9pZCAwfSk7dmFyIG89dGhpcy5zdG9yZS5lZGl0KGUsdCxuKS5nZXQoKTt0aGlzLnNldFN0YXRlKHtkYXRhOm99KSx0aGlzLnByb3BzLmNlbGxFZGl0LmFmdGVyU2F2ZUNlbGwmJnRoaXMucHJvcHMuY2VsbEVkaXQuYWZ0ZXJTYXZlQ2VsbCh0aGlzLnN0YXRlLmRhdGFbdF0sbixlKX19LHtrZXk6XCJoYW5kbGVBZGRSb3dCZWdpblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZWZzLmJvZHl9fSx7a2V5OlwiaGFuZGxlQWRkUm93XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO3RyeXt0aGlzLnN0b3JlLmFkZChlKX1jYXRjaChyKXtyZXR1cm4gcn1pZih0aGlzLnByb3BzLnBhZ2luYXRpb24pe3ZhciBuPXRoaXMucmVmcy5wYWdpbmF0aW9uLmdldFNpemVQZXJQYWdlKCksbz1NYXRoLmNlaWwodGhpcy5zdG9yZS5nZXREYXRhTnVtKCkvbik7dD10aGlzLnN0b3JlLnBhZ2UobyxuKS5nZXQoKSx0aGlzLnNldFN0YXRlKHtkYXRhOnR9KSx0aGlzLnJlZnMucGFnaW5hdGlvbi5jaGFuZ2VQYWdlKG8pfWVsc2UgdD10aGlzLnN0b3JlLmdldCgpLHRoaXMuc2V0U3RhdGUoe2RhdGE6dH0pO3RoaXMucHJvcHMub3B0aW9ucy5hZnRlckluc2VydFJvdyYmdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVySW5zZXJ0Um93KGUpfX0se2tleTpcImdldFNpemVQZXJQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5wYWdpbmF0aW9uP3RoaXMucmVmcy5wYWdpbmF0aW9uLmdldFNpemVQZXJQYWdlKCk6dm9pZCAwfX0se2tleTpcImdldEN1cnJlbnRQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5wYWdpbmF0aW9uP3RoaXMucmVmcy5wYWdpbmF0aW9uLmdldEN1cnJlbnRQYWdlKCk6dm9pZCAwfX0se2tleTpcImhhbmRsZURyb3BSb3dcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZT9lOnRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCk7ciYmci5sZW5ndGg+MCYmKHRoaXMucHJvcHMub3B0aW9ucy5oYW5kbGVDb25maXJtRGVsZXRlUm93P3RoaXMucHJvcHMub3B0aW9ucy5oYW5kbGVDb25maXJtRGVsZXRlUm93KGZ1bmN0aW9uKCl7dC5kZWxldGVSb3cocil9KTpjb25maXJtKFwiQXJlIHlvdSBzdXJlIHdhbnQgZGVsZXRlP1wiKSYmdGhpcy5kZWxldGVSb3cocikpfX0se2tleTpcImRlbGV0ZVJvd1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMDtpZih0aGlzLnN0b3JlLnJlbW92ZShlKSx0aGlzLnN0b3JlLnNldFNlbGVjdGVkUm93S2V5KFtdKSx0aGlzLnByb3BzLnBhZ2luYXRpb24pe3ZhciByPXRoaXMucmVmcy5wYWdpbmF0aW9uLmdldFNpemVQZXJQYWdlKCksbj1NYXRoLmNlaWwodGhpcy5zdG9yZS5nZXREYXRhTnVtKCkvciksbz10aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRDdXJyZW50UGFnZSgpO28+biYmKG89biksdD10aGlzLnN0b3JlLnBhZ2UobyxyKS5nZXQoKSx0aGlzLnNldFN0YXRlKHtkYXRhOnQsc2VsZWN0ZWRSb3dLZXlzOnRoaXMuc3RvcmUuZ2V0U2VsZWN0ZWRSb3dLZXlzKCl9KSx0aGlzLnJlZnMucGFnaW5hdGlvbi5jaGFuZ2VQYWdlKG8pfWVsc2UgdD10aGlzLnN0b3JlLmdldCgpLHRoaXMuc2V0U3RhdGUoe2RhdGE6dCxzZWxlY3RlZFJvd0tleXM6dGhpcy5zdG9yZS5nZXRTZWxlY3RlZFJvd0tleXMoKX0pO3RoaXMucHJvcHMub3B0aW9ucy5hZnRlckRlbGV0ZVJvdyYmdGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyRGVsZXRlUm93KGUpfX0se2tleTpcImhhbmRsZUZpbHRlckRhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnN0b3JlLmZpbHRlcihlKTt2YXIgdD12b2lkIDA7aWYodGhpcy5wcm9wcy5wYWdpbmF0aW9uKXt2YXIgcj10aGlzLnJlZnMucGFnaW5hdGlvbi5nZXRTaXplUGVyUGFnZSgpO3Q9dGhpcy5zdG9yZS5wYWdlKDEscikuZ2V0KCksdGhpcy5yZWZzLnBhZ2luYXRpb24uY2hhbmdlUGFnZSgxKX1lbHNlIHQ9dGhpcy5zdG9yZS5nZXQoKTt0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJDb2x1bW5GaWx0ZXImJnRoaXMucHJvcHMub3B0aW9ucy5hZnRlckNvbHVtbkZpbHRlcihlLHRoaXMuc3RvcmUuZ2V0RGF0YUlnbm9yaW5nUGFnaW5hdGlvbigpKSx0aGlzLnNldFN0YXRlKHtkYXRhOnR9KX19LHtrZXk6XCJoYW5kbGVFeHBvcnRDU1ZcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RvcmUuZ2V0RGF0YUlnbm9yaW5nUGFnaW5hdGlvbigpLHQ9W107dGhpcy5wcm9wcy5jaGlsZHJlbi5tYXAoZnVuY3Rpb24oZSl7ZS5wcm9wcy5oaWRkZW49PT0hMSYmdC5wdXNoKGUucHJvcHMuZGF0YUZpZWxkKX0pLCgwLE9bXCJkZWZhdWx0XCJdKShlLHQsdGhpcy5wcm9wcy5jc3ZGaWxlTmFtZSl9fSx7a2V5OlwiaGFuZGxlU2VhcmNoXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5zdG9yZS5zZWFyY2goZSk7dmFyIHQ9dm9pZCAwO2lmKHRoaXMucHJvcHMucGFnaW5hdGlvbil7dmFyIHI9dGhpcy5yZWZzLnBhZ2luYXRpb24uZ2V0U2l6ZVBlclBhZ2UoKTt0PXRoaXMuc3RvcmUucGFnZSgxLHIpLmdldCgpLHRoaXMucmVmcy5wYWdpbmF0aW9uLmNoYW5nZVBhZ2UoMSl9ZWxzZSB0PXRoaXMuc3RvcmUuZ2V0KCk7dGhpcy5wcm9wcy5vcHRpb25zLmFmdGVyU2VhcmNoJiZ0aGlzLnByb3BzLm9wdGlvbnMuYWZ0ZXJTZWFyY2goZSx0aGlzLnN0b3JlLmdldERhdGFJZ25vcmluZ1BhZ2luYXRpb24oKSksdGhpcy5zZXRTdGF0ZSh7ZGF0YTp0fSl9fSx7a2V5OlwicmVuZGVyUGFnaW5hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5wcm9wcy5wYWdpbmF0aW9uKXt2YXIgZT12b2lkIDA7cmV0dXJuIGU9dGhpcy5pc1JlbW90ZURhdGFTb3VyY2UoKT90aGlzLnByb3BzLmZldGNoSW5mby5kYXRhVG90YWxTaXplOnRoaXMuc3RvcmUuZ2V0RGF0YU51bSgpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoYltcImRlZmF1bHRcIl0se3JlZjpcInBhZ2luYXRpb25cIixjdXJyUGFnZTp0aGlzLnByb3BzLm9wdGlvbnMucGFnZXx8MSxjaGFuZ2VQYWdlOnRoaXMuaGFuZGxlUGFnaW5hdGlvbkRhdGEuYmluZCh0aGlzKSxzaXplUGVyUGFnZTp0aGlzLnByb3BzLm9wdGlvbnMuc2l6ZVBlclBhZ2V8fGZbXCJkZWZhdWx0XCJdLlNJWkVfUEVSX1BBR0VfTElTVFswXSxzaXplUGVyUGFnZUxpc3Q6dGhpcy5wcm9wcy5vcHRpb25zLnNpemVQZXJQYWdlTGlzdHx8ZltcImRlZmF1bHRcIl0uU0laRV9QRVJfUEFHRV9MSVNULHBhZ2luYXRpb25TaXplOnRoaXMucHJvcHMub3B0aW9ucy5wYWdpbmF0aW9uU2l6ZXx8ZltcImRlZmF1bHRcIl0uUEFHSU5BVElPTl9TSVpFLHJlbW90ZTp0aGlzLmlzUmVtb3RlRGF0YVNvdXJjZSgpLGRhdGFTaXplOmUsb25TaXplUGVyUGFnZUxpc3Q6dGhpcy5wcm9wcy5vcHRpb25zLm9uU2l6ZVBlclBhZ2VMaXN0fSkpfXJldHVybiBudWxsfX0se2tleTpcInJlbmRlclRvb2xCYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXZvaWQgMDtyZXR1cm4gZT1BcnJheS5pc0FycmF5KHRoaXMucHJvcHMuY2hpbGRyZW4pP3RoaXMucHJvcHMuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUucHJvcHM7cmV0dXJue25hbWU6dC5jaGlsZHJlbixmaWVsZDp0LmRhdGFGaWVsZCxhdXRvVmFsdWU6dC5hdXRvVmFsdWV8fCExLGVkaXRhYmxlOnQuZWRpdGFibGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZWRpdGFibGU/dC5lZGl0YWJsZSgpOnQuZWRpdGFibGUsZm9ybWF0OnQuZm9ybWF0P2Zvcm1hdDohMX19KTpbe25hbWU6dGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcy5jaGlsZHJlbixmaWVsZDp0aGlzLnByb3BzLmNoaWxkcmVuLnByb3BzLmRhdGFGaWVsZCxlZGl0YWJsZTp0aGlzLnByb3BzLmNoaWxkcmVuLnByb3BzLmVkaXRhYmxlfV0sdGhpcy5wcm9wcy5pbnNlcnRSb3d8fHRoaXMucHJvcHMuZGVsZXRlUm93fHx0aGlzLnByb3BzLnNlYXJjaHx8dGhpcy5wcm9wcy5leHBvcnRDU1Y/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ0b29sLWJhclwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KEVbXCJkZWZhdWx0XCJdLHtlbmFibGVJbnNlcnQ6dGhpcy5wcm9wcy5pbnNlcnRSb3csZW5hYmxlRGVsZXRlOnRoaXMucHJvcHMuZGVsZXRlUm93LGVuYWJsZVNlYXJjaDp0aGlzLnByb3BzLnNlYXJjaCxlbmFibGVFeHBvcnRDU1Y6dGhpcy5wcm9wcy5leHBvcnRDU1YsY29sdW1uczplLHNlYXJjaFBsYWNlaG9sZGVyOnRoaXMucHJvcHMuc2VhcmNoUGxhY2Vob2xkZXIsb25BZGRSb3c6dGhpcy5oYW5kbGVBZGRSb3cuYmluZCh0aGlzKSxvbkFkZFJvd0JlZ2luOnRoaXMuaGFuZGxlQWRkUm93QmVnaW4uYmluZCh0aGlzKSxvbkRyb3BSb3c6dGhpcy5oYW5kbGVEcm9wUm93LmJpbmQodGhpcyksb25TZWFyY2g6dGhpcy5oYW5kbGVTZWFyY2guYmluZCh0aGlzKSxvbkV4cG9ydENTVjp0aGlzLmhhbmRsZUV4cG9ydENTVi5iaW5kKHRoaXMpfSkpOm51bGx9fSx7a2V5OlwicmVuZGVyVGFibGVGaWx0ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wcm9wcy5jb2x1bW5GaWx0ZXI/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChQW1wiZGVmYXVsdFwiXSx7Y29sdW1uczplLHJvd1NlbGVjdFR5cGU6dGhpcy5wcm9wcy5zZWxlY3RSb3cubW9kZSxvbkZpbHRlcjp0aGlzLmhhbmRsZUZpbHRlckRhdGEuYmluZCh0aGlzKX0pOm51bGx9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7Qy5wcm9wVHlwZXM9e2tleUZpZWxkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsaGVpZ2h0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsbWF4SGVpZ2h0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsZGF0YTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMub25lT2ZUeXBlKFt1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksdVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm9iamVjdF0pLHJlbW90ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxzdHJpcGVkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGJvcmRlcmVkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGhvdmVyOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNvbmRlbnNlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxwYWdpbmF0aW9uOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLHNlYXJjaFBsYWNlaG9sZGVyOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsc2VsZWN0Um93OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zaGFwZSh7bW9kZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGJnQ29sb3I6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxzZWxlY3RlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksb25TZWxlY3Q6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25TZWxlY3RBbGw6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsY2xpY2tUb1NlbGVjdDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxoaWRlU2VsZWN0Q29sdW1uOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbH0pLGNlbGxFZGl0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zaGFwZSh7bW9kZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGJsdXJUb1NhdmU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsYWZ0ZXJTYXZlQ2VsbDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuY30pLGluc2VydFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxkZWxldGVSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsc2VhcmNoOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNvbHVtbkZpbHRlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCx0ckNsYXNzTmFtZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYW55LG9wdGlvbnM6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnNoYXBlKHtzb3J0TmFtZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLHNvcnRPcmRlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGFmdGVyVGFibGVDb21wbGV0ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxhZnRlckRlbGV0ZVJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxhZnRlckluc2VydFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxhZnRlclNlYXJjaDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxhZnRlckNvbHVtbkZpbHRlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxvblJvd0NsaWNrOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLHBhZ2U6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixzaXplUGVyUGFnZUxpc3Q6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFycmF5LHNpemVQZXJQYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIscGFnaW5hdGlvblNpemU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixvblNvcnRDaGFuZ2U6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25QYWdlQ2hhbmdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG9uU2l6ZVBlclBhZ2VMaXN0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG5vRGF0YVRleHQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxoYW5kbGVDb25maXJtRGVsZXRlUm93OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jfSksZmV0Y2hJbmZvOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zaGFwZSh7ZGF0YVRvdGFsU2l6ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyfSksZXhwb3J0Q1NWOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNzdkZpbGVOYW1lOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmd9LEMuZGVmYXVsdFByb3BzPXtoZWlnaHQ6XCIxMDAlXCIsbWF4SGVpZ2h0OnZvaWQgMCxzdHJpcGVkOiExLGJvcmRlcmVkOiEwLGhvdmVyOiExLGNvbmRlbnNlZDohMSxwYWdpbmF0aW9uOiExLHNlYXJjaFBsYWNlaG9sZGVyOnZvaWQgMCxzZWxlY3RSb3c6e21vZGU6ZltcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9OT05FLGJnQ29sb3I6ZltcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9CR19DT0xPUixzZWxlY3RlZDpbXSxvblNlbGVjdDp2b2lkIDAsb25TZWxlY3RBbGw6dm9pZCAwLGNsaWNrVG9TZWxlY3Q6ITEsaGlkZVNlbGVjdENvbHVtbjohMSxjbGlja1RvU2VsZWN0QW5kRWRpdENlbGw6ITF9LGNlbGxFZGl0Onttb2RlOmZbXCJkZWZhdWx0XCJdLkNFTExfRURJVF9OT05FLGJsdXJUb1NhdmU6ITEsYWZ0ZXJTYXZlQ2VsbDp2b2lkIDB9LGluc2VydFJvdzohMSxkZWxldGVSb3c6ITEsc2VhcmNoOiExLG11bHRpQ29sdW1uU2VhcmNoOiExLGNvbHVtbkZpbHRlcjohMSx0ckNsYXNzTmFtZTpcIlwiLG9wdGlvbnM6e3NvcnROYW1lOnZvaWQgMCxzb3J0T3JkZXI6ZltcImRlZmF1bHRcIl0uU09SVF9ERVNDLGFmdGVyVGFibGVDb21wbGV0ZTp2b2lkIDAsYWZ0ZXJEZWxldGVSb3c6dm9pZCAwLGFmdGVySW5zZXJ0Um93OnZvaWQgMCxhZnRlclNlYXJjaDp2b2lkIDAsYWZ0ZXJDb2x1bW5GaWx0ZXI6dm9pZCAwLG9uUm93Q2xpY2s6dm9pZCAwLHBhZ2U6dm9pZCAwLHNpemVQZXJQYWdlTGlzdDpmW1wiZGVmYXVsdFwiXS5TSVpFX1BFUl9QQUdFX0xJU1Qsc2l6ZVBlclBhZ2U6dm9pZCAwLHBhZ2luYXRpb25TaXplOmZbXCJkZWZhdWx0XCJdLlBBR0lOQVRJT05fU0laRSxvblNpemVQZXJQYWdlTGlzdDp2b2lkIDAsbm9EYXRhVGV4dDp2b2lkIDAsaGFuZGxlQ29uZmlybURlbGV0ZVJvdzp2b2lkIDB9LGZldGNoSW5mbzp7ZGF0YVRvdGFsU2l6ZTowfSxleHBvcnRDU1Y6ITEsY3N2RmlsZU5hbWU6dm9pZCAwfSx0W1wiZGVmYXVsdFwiXT1DLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24odCxyKXt0LmV4cG9ydHM9ZX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG87LyohXG5cdCAgQ29weXJpZ2h0IChjKSAyMDE2IEplZCBXYXRzb24uXG5cdCAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcblx0ICBodHRwOi8vamVkd2F0c29uLmdpdGh1Yi5pby9jbGFzc25hbWVzXG5cdCovXG4hZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07aWYobil7dmFyIG89dHlwZW9mIG47aWYoXCJzdHJpbmdcIj09PW98fFwibnVtYmVyXCI9PT1vKWUucHVzaChuKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkobikpZS5wdXNoKHIuYXBwbHkobnVsbCxuKSk7ZWxzZSBpZihcIm9iamVjdFwiPT09bylmb3IodmFyIGEgaW4gbilpLmNhbGwobixhKSYmblthXSYmZS5wdXNoKGEpfX1yZXR1cm4gZS5qb2luKFwiIFwiKX12YXIgaT17fS5oYXNPd25Qcm9wZXJ0eTtcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmZS5leHBvcnRzP2UuZXhwb3J0cz1yOihuPVtdLG89ZnVuY3Rpb24oKXtyZXR1cm4gcn0uYXBwbHkodCxuKSwhKHZvaWQgMCE9PW8mJihlLmV4cG9ydHM9bykpKX0oKX0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0W1wiZGVmYXVsdFwiXT17U09SVF9ERVNDOlwiZGVzY1wiLFNPUlRfQVNDOlwiYXNjXCIsU0laRV9QRVJfUEFHRToxMCxORVhUX1BBR0U6XCI+XCIsTEFTVF9QQUdFOlwiPj5cIixQUkVfUEFHRTpcIjxcIixGSVJTVF9QQUdFOlwiPDxcIixST1dfU0VMRUNUX0JHX0NPTE9SOlwiXCIsUk9XX1NFTEVDVF9OT05FOlwibm9uZVwiLFJPV19TRUxFQ1RfU0lOR0xFOlwicmFkaW9cIixST1dfU0VMRUNUX01VTFRJOlwiY2hlY2tib3hcIixDRUxMX0VESVRfTk9ORTpcIm5vbmVcIixDRUxMX0VESVRfQ0xJQ0s6XCJjbGlja1wiLENFTExfRURJVF9EQkNMSUNLOlwiZGJjbGlja1wiLFNJWkVfUEVSX1BBR0VfTElTVDpbMTAsMjUsMzAsNTBdLFBBR0lOQVRJT05fU0laRTo1LE5PX0RBVEFfVEVYVDpcIlRoZXJlIGlzIG5vIGRhdGEgdG8gZGlzcGxheVwifSxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoNiksZD1uKGMpLHA9cig0KSxmPW4ocCksaD1yKDcpLHY9bihoKSx5PXIoMyksbT1uKHkpLGc9cig4KSxiPW4oZyksdz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiY29tcG9uZW50RGlkTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlKHRoaXMucHJvcHMuY2hlY2tlZCl9fSx7a2V5OlwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMudXBkYXRlKGUuY2hlY2tlZCl9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZFtcImRlZmF1bHRcIl0uZmluZERPTU5vZGUodGhpcykuaW5kZXRlcm1pbmF0ZT1cImluZGV0ZXJtaW5hdGVcIj09PWV9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJjaGVja2JveFwiLGNoZWNrZWQ6dGhpcy5wcm9wcy5jaGVja2VkLG9uQ2hhbmdlOnRoaXMucHJvcHMub25DaGFuZ2V9KX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KSxFPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGg9bnVsbH1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcImNsZWFyU29ydENhcmV0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5yZWZzLmhlYWRlcixuPTA7bjxyLmNoaWxkRWxlbWVudENvdW50O24rKyl7dmFyIG89ci5jaGlsZE5vZGVzW25dLmNoaWxkTm9kZXNbMF07by5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3JkZXJcIikubGVuZ3RoPjAmJm8ucmVtb3ZlQ2hpbGQoby5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3JkZXJcIilbMF0pfXRoaXMucHJvcHMub25Tb3J0KGUsdCl9fSx7a2V5OlwiY29tcG9uZW50RGlkTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMucHJvcHMuc29ydE5hbWUpe3RoaXMuY2xlYXJTb3J0Q2FyZXQodGhpcy5wcm9wcy5zb3J0T3JkZXIsdGhpcy5wcm9wcy5zb3J0TmFtZSk7Zm9yKHZhciBlPXRoaXMucmVmcy5oZWFkZXIsdD0wO3Q8ZS5jaGlsZEVsZW1lbnRDb3VudDt0Kyspe3ZhciByPWUuY2hpbGROb2Rlc1t0XS5jaGlsZE5vZGVzWzBdO2lmKHIuZ2V0QXR0cmlidXRlKFwiZGF0YS1maWVsZFwiKT09PXRoaXMucHJvcHMuc29ydE5hbWUpe3IuYXBwZW5kQ2hpbGQodltcImRlZmF1bHRcIl0ucmVuZGVyU29ydENhcmV0KHRoaXMucHJvcHMuc29ydE9yZGVyKSk7YnJlYWt9fX19fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oMCxtW1wiZGVmYXVsdFwiXSkoXCJ0YWJsZS1oZWFkZXJcIiksdD0oMCxtW1wiZGVmYXVsdFwiXSkoXCJ0YWJsZVwiLFwidGFibGUtaG92ZXJcIix7XCJ0YWJsZS1ib3JkZXJlZFwiOnRoaXMucHJvcHMuYm9yZGVyZWQsXCJ0YWJsZS1jb25kZW5zZWRcIjp0aGlzLnByb3BzLmNvbmRlbnNlZH0pLHI9dGhpcy5wcm9wcy5oaWRlU2VsZWN0Q29sdW1uP251bGw6dGhpcy5yZW5kZXJTZWxlY3RSb3dIZWFkZXIoKTtyZXR1cm4gdGhpcy5fYXR0YWNoQ2xlYXJTb3J0Q2FyZXRGdW5jKCksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtyZWY6XCJjb250YWluZXJcIixjbGFzc05hbWU6ZX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRhYmxlXCIse2NsYXNzTmFtZTp0fSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhlYWRcIixudWxsLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0clwiLHtyZWY6XCJoZWFkZXJcIn0scix0aGlzLnByb3BzLmNoaWxkcmVuKSkpKX19LHtrZXk6XCJyZW5kZXJTZWxlY3RSb3dIZWFkZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGU9PWZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfU0lOR0xFP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoYltcImRlZmF1bHRcIl0se3dpZHRoOnRoaXMuc2VsZWN0Um93Q29sdW1uV2lkdGh9KTp0aGlzLnByb3BzLnJvd1NlbGVjdFR5cGU9PWZbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfTVVMVEk/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChiW1wiZGVmYXVsdFwiXSx7d2lkdGg6dGhpcy5zZWxlY3RSb3dDb2x1bW5XaWR0aH0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh3LHtvbkNoYW5nZTp0aGlzLnByb3BzLm9uU2VsZWN0QWxsUm93LGNoZWNrZWQ6dGhpcy5wcm9wcy5pc1NlbGVjdEFsbH0pKTpudWxsfX0se2tleTpcIl9hdHRhY2hDbGVhclNvcnRDYXJldEZ1bmNcIix2YWx1ZTpmdW5jdGlvbigpe2lmKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpZm9yKHZhciBlPTA7ZTx0aGlzLnByb3BzLmNoaWxkcmVuLmxlbmd0aDtlKyspdGhpcy5wcm9wcy5jaGlsZHJlbltlXT11W1wiZGVmYXVsdFwiXS5jbG9uZUVsZW1lbnQodGhpcy5wcm9wcy5jaGlsZHJlbltlXSx7a2V5OmUsY2xlYXJTb3J0Q2FyZXQ6dGhpcy5jbGVhclNvcnRDYXJldC5iaW5kKHRoaXMpfSk7ZWxzZSB0aGlzLnByb3BzLmNoaWxkcmVuPXVbXCJkZWZhdWx0XCJdLmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuLHtrZXk6MCxjbGVhclNvcnRDYXJldDp0aGlzLmNsZWFyU29ydENhcmV0LmJpbmQodGhpcyl9KX19LHtrZXk6XCJmaXRIZWFkZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkodGhpcy5wcm9wcy5jaGlsZHJlbikpe3ZhciByPXRoaXMucHJvcHMucm93U2VsZWN0VHlwZSE9ZltcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9TSU5HTEUmJnRoaXMucHJvcHMucm93U2VsZWN0VHlwZSE9ZltcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9NVUxUSXx8dGhpcy5wcm9wcy5oaWRlU2VsZWN0Q29sdW1uPzA6MTsxPT1yJiYodGhpcy5zZWxlY3RSb3dDb2x1bW5XaWR0aD1lWzBdLndpZHRoKTtmb3IodmFyIG49MDtuPHRoaXMucHJvcHMuY2hpbGRyZW4ubGVuZ3RoO24rKyl0aGlzLnByb3BzLmNoaWxkcmVuW25dPXVbXCJkZWZhdWx0XCJdLmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuW25dLHt3aWR0aDplW24rcl0ud2lkdGgrXCJweFwifSl9ZWxzZSB0aGlzLnByb3BzLmNoaWxkcmVuPXVbXCJkZWZhdWx0XCJdLmNsb25lRWxlbWVudCh0aGlzLnByb3BzLmNoaWxkcmVuLHt3aWR0aDplWzBdLndpZHRoK1wicHhcIn0pO3RoaXMucHJvcHMuY29uZGVuc2VkJiYodGhpcy5yZWZzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9XCIzNnB4XCIpLHRoaXMuZm9yY2VVcGRhdGUoKSx0JiYodGhpcy5yZWZzLmNvbnRhaW5lci5zdHlsZS5tYXJnaW5SaWdodD12W1wiZGVmYXVsdFwiXS5nZXRTY3JvbGxCYXJXaWR0aCgpK1wicHhcIil9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7RS5wcm9wVHlwZXM9e3Jvd1NlbGVjdFR5cGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxvblNvcnQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsb25TZWxlY3RBbGxSb3c6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsc29ydE5hbWU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxzb3J0T3JkZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxoaWRlU2VsZWN0Q29sdW1uOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGJvcmRlcmVkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNvbmRlbnNlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxpc1NlbGVjdEFsbDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMub25lT2YoWyEwLFwiaW5kZXRlcm1pbmF0ZVwiLCExXSl9LEUuZGVmYXVsdFByb3BzPXt9LHRbXCJkZWZhdWx0XCJdPUUsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHIpe2UuZXhwb3J0cz10fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXIoMiksaT1uKG8pLGE9cig0KSxzPW4oYSksbD1yKDMpLHU9bihsKTt0W1wiZGVmYXVsdFwiXT17cmVuZGVyU29ydENhcmV0OmZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO3QuY2xhc3NOYW1lPVwib3JkZXJcIixlPT1zW1wiZGVmYXVsdFwiXS5TT1JUX0FTQyYmKHQuY2xhc3NOYW1lKz1cIiBkcm9wdXBcIik7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7cmV0dXJuIHIuY2xhc3NOYW1lPVwiY2FyZXRcIixyLnN0eWxlLm1hcmdpbj1cIjEwcHggNXB4XCIsdC5hcHBlbmRDaGlsZChyKSx0fSxyZW5kZXJSZWFjdFNvcnRDYXJldDpmdW5jdGlvbihlKXt2YXIgdD0oMCx1W1wiZGVmYXVsdFwiXSkoXCJvcmRlclwiLHtkcm9wdXA6ZT09c1tcImRlZmF1bHRcIl0uU09SVF9BU0N9KTtyZXR1cm4gaVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInNwYW5cIix7Y2xhc3NOYW1lOnR9LGlbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIse2NsYXNzTmFtZTpcImNhcmV0XCIsc3R5bGU6e21hcmdpbjpcIjEwcHggNXB4XCJ9fSkpfSxnZXRTY3JvbGxCYXJXaWR0aDpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO2Uuc3R5bGUud2lkdGg9XCIxMDAlXCIsZS5zdHlsZS5oZWlnaHQ9XCIyMDBweFwiO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdC5zdHlsZS50b3A9XCIwcHhcIix0LnN0eWxlLmxlZnQ9XCIwcHhcIix0LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIix0LnN0eWxlLndpZHRoPVwiMjAwcHhcIix0LnN0eWxlLmhlaWdodD1cIjE1MHB4XCIsdC5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLHQuYXBwZW5kQ2hpbGQoZSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KTt2YXIgcj1lLm9mZnNldFdpZHRoO3Quc3R5bGUub3ZlcmZsb3c9XCJzY3JvbGxcIjt2YXIgbj1lLm9mZnNldFdpZHRoO3JldHVybiByPT1uJiYobj10LmNsaWVudFdpZHRoKSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLHItbn19LGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cigzKSxkPShuKGMpLHIoNCkpLHA9KG4oZCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9e3dpZHRoOnBhcnNlSW50KHRoaXMucHJvcHMud2lkdGgpP3RoaXMucHJvcHMud2lkdGg6MzV9O3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGhcIix7c3R5bGU6ZX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJ0aC1pbm5lciB0YWJsZS1oZWFkZXItY29sdW1uXCJ9LHRoaXMucHJvcHMuY2hpbGRyZW4pKX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KSk7dFtcImRlZmF1bHRcIl09cCxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoNCksZD1uKGMpLHA9cig3KSxmPW4ocCksaD1yKDEwKSx2PW4oaCkseT1yKDExKSxtPW4oeSksZz1yKDEyKSxiPW4oZyksdz1yKDMpLEU9bih3KSxfPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlfSxQPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuc3RhdGU9e2N1cnJFZGl0Q2VsbDpudWxsfSx0aGlzLmVkaXRpbmc9ITF9cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJjb21wb25lbnREaWRNb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGp1c3RCb2R5KCl9fSx7a2V5OlwiY29tcG9uZW50RGlkVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkanVzdEJvZHkoKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSgwLEVbXCJkZWZhdWx0XCJdKShcInRhYmxlLWNvbnRhaW5lclwiKSx0PSgwLEVbXCJkZWZhdWx0XCJdKShcInRhYmxlXCIse1widGFibGUtc3RyaXBlZFwiOnRoaXMucHJvcHMuc3RyaXBlZCxcInRhYmxlLWJvcmRlcmVkXCI6dGhpcy5wcm9wcy5ib3JkZXJlZCxcInRhYmxlLWhvdmVyXCI6dGhpcy5wcm9wcy5ob3ZlcixcInRhYmxlLWNvbmRlbnNlZFwiOnRoaXMucHJvcHMuY29uZGVuc2VkfSkscj10aGlzLl9pc1NlbGVjdFJvd0RlZmluZWQoKSxuPXRoaXMucmVuZGVyVGFibGVIZWFkZXIociksbz10aGlzLnByb3BzLmRhdGEubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbihyLG4pe3ZhciBvPWVbci5uYW1lXTtpZih0aGlzLmVkaXRpbmcmJnIubmFtZSE9PXRoaXMucHJvcHMua2V5RmllbGQmJnIuZWRpdGFibGUmJm51bGwhPXRoaXMuc3RhdGUuY3VyckVkaXRDZWxsJiZ0aGlzLnN0YXRlLmN1cnJFZGl0Q2VsbC5yaWQ9PXQmJnRoaXMuc3RhdGUuY3VyckVkaXRDZWxsLmNpZD09bil7dmFyIGk9ci5mb3JtYXQ/ZnVuY3Rpb24odCl7cmV0dXJuIHIuZm9ybWF0KHQsZSkucmVwbGFjZSgvPC4qPz4vZyxcIlwiKX06ITE7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoYltcImRlZmF1bHRcIl0se2NvbXBsZXRlRWRpdDp0aGlzLmhhbmRsZUNvbXBsZXRlRWRpdENlbGwuYmluZCh0aGlzKSxlZGl0YWJsZTpfKHIuZWRpdGFibGUpP3IuZWRpdGFibGUobyxlLHQsbik6ci5lZGl0YWJsZSxmb3JtYXQ6ci5mb3JtYXQ/aTohMSxrZXk6bixibHVyVG9TYXZlOnRoaXMucHJvcHMuY2VsbEVkaXQuYmx1clRvU2F2ZSxyb3dJbmRleDp0LGNvbEluZGV4Om59LG8pfXZhciBhPV8oci5jbGFzc05hbWUpP3IuY2xhc3NOYW1lKG8sZSx0LG4pOnIuY2xhc3NOYW1lO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiByLmZvcm1hdCl7dmFyIHM9ci5mb3JtYXQobyxlKTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uaXNWYWxpZEVsZW1lbnQocyl8fChzPXVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7ZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDpzfX0pKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG1bXCJkZWZhdWx0XCJdLHtkYXRhQWxpZ246ci5hbGlnbixrZXk6bixjbGFzc05hbWU6YSxjZWxsRWRpdDp0aGlzLnByb3BzLmNlbGxFZGl0LG9uRWRpdDp0aGlzLmhhbmRsZUVkaXRDZWxsLmJpbmQodGhpcyksd2lkdGg6ci53aWR0aH0scyl9cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQobVtcImRlZmF1bHRcIl0se2RhdGFBbGlnbjpyLmFsaWduLGtleTpuLGNsYXNzTmFtZTphLGNlbGxFZGl0OnRoaXMucHJvcHMuY2VsbEVkaXQsaGlkZGVuOnIuaGlkZGVuLG9uRWRpdDp0aGlzLmhhbmRsZUVkaXRDZWxsLmJpbmQodGhpcyksd2lkdGg6ci53aWR0aH0sbyl9LHRoaXMpLG89LTEhPXRoaXMucHJvcHMuc2VsZWN0ZWRSb3dLZXlzLmluZGV4T2YoZVt0aGlzLnByb3BzLmtleUZpZWxkXSksaT1yJiYhdGhpcy5wcm9wcy5zZWxlY3RSb3cuaGlkZVNlbGVjdENvbHVtbj90aGlzLnJlbmRlclNlbGVjdFJvd0NvbHVtbihvKTpudWxsLGE9Xyh0aGlzLnByb3BzLnRyQ2xhc3NOYW1lKT90aGlzLnByb3BzLnRyQ2xhc3NOYW1lKGUsdCk6dGhpcy5wcm9wcy50ckNsYXNzTmFtZTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCh2W1wiZGVmYXVsdFwiXSx7aXNTZWxlY3RlZDpvLGtleTp0LGNsYXNzTmFtZTphLHNlbGVjdFJvdzpyP3RoaXMucHJvcHMuc2VsZWN0Um93OnZvaWQgMCxlbmFibGVDZWxsRWRpdDp0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGUhPT1kW1wiZGVmYXVsdFwiXS5DRUxMX0VESVRfTk9ORSxvblJvd0NsaWNrOnRoaXMuaGFuZGxlUm93Q2xpY2suYmluZCh0aGlzKSxvblNlbGVjdFJvdzp0aGlzLmhhbmRsZVNlbGVjdFJvdy5iaW5kKHRoaXMpfSxpLG4pfSx0aGlzKTswPT09by5sZW5ndGgmJm8ucHVzaCh1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHZbXCJkZWZhdWx0XCJdLHtrZXk6XCIjI3RhYmxlLWVtcHR5IyNcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRkXCIse2NvbFNwYW46dGhpcy5wcm9wcy5jb2x1bW5zLmxlbmd0aCsocj8xOjApLHN0eWxlOnt0ZXh0QWxpZ246XCJjZW50ZXJcIn19LHRoaXMucHJvcHMubm9EYXRhVGV4dHx8ZFtcImRlZmF1bHRcIl0uTk9fREFUQV9URVhUKSkpLHRoaXMuZWRpdGluZz0hMTt2YXIgaT10aGlzLmNhbGN1bGF0ZUNvbnRhaW5lckhlaWdodCgpLnRvU3RyaW5nKCk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7cmVmOlwiY29udGFpbmVyXCIsY2xhc3NOYW1lOmUsc3R5bGU6e2hlaWdodDppfX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRhYmxlXCIse3JlZjpcImJvZHlcIixjbGFzc05hbWU6dH0sbix1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGJvZHlcIixudWxsLG8pKSl9fSx7a2V5OlwicmVuZGVyVGFibGVIZWFkZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1udWxsO2lmKGUpe3ZhciByPXt3aWR0aDozNSxtaW5XaWR0aDozNX07dD10aGlzLnByb3BzLnNlbGVjdFJvdy5oaWRlU2VsZWN0Q29sdW1uP251bGw6dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRoXCIse3N0eWxlOnIsa2V5Oi0xfSl9dmFyIG49dGhpcy5wcm9wcy5jb2x1bW5zLm1hcChmdW5jdGlvbihlLHQpe3ZhciByPW51bGw9PWUud2lkdGg/ZS53aWR0aDpwYXJzZUludChlLndpZHRoKSxuPXtkaXNwbGF5OmUuaGlkZGVuP1wibm9uZVwiOm51bGwsd2lkdGg6cixtYXhXaWR0aDpyfSxvPWUuc29ydD9mW1wiZGVmYXVsdFwiXS5yZW5kZXJSZWFjdFNvcnRDYXJldChkW1wiZGVmYXVsdFwiXS5TT1JUX0RFU0MpOm51bGw7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtzdHlsZTpuLGtleTp0LGNsYXNzTmFtZTplLmNsYXNzTmFtZX0sZS50ZXh0LG8pfSk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiLHtyZWY6XCJoZWFkZXJcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRyXCIsbnVsbCx0LG4pKX19LHtrZXk6XCJoYW5kbGVSb3dDbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9wcy5kYXRhLmZvckVhY2goZnVuY3Rpb24obixvKXtvPT1lLTEmJih0PW5bdGhpcy5wcm9wcy5rZXlGaWVsZF0scj1uKX0sdGhpcyksdGhpcy5wcm9wcy5vblJvd0NsaWNrKHIpfX0se2tleTpcImhhbmRsZVNlbGVjdFJvd1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbjt0aGlzLnByb3BzLmRhdGEuZm9yRWFjaChmdW5jdGlvbih0LG8pe289PWUtMSYmKHI9dFt0aGlzLnByb3BzLmtleUZpZWxkXSxuPXQpfSx0aGlzKSx0aGlzLnByb3BzLm9uU2VsZWN0Um93KG4sdCl9fSx7a2V5OlwiaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0JiZ0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0QW5kRWRpdENlbGx8fHRoaXMuaGFuZGxlU2VsZWN0Um93KGUuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucm93SW5kZXgsZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQpfX0se2tleTpcImhhbmRsZUVkaXRDZWxsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmVkaXRpbmc9ITAsdGhpcy5faXNTZWxlY3RSb3dEZWZpbmVkKCkmJih0LS0sdGhpcy5wcm9wcy5zZWxlY3RSb3cuaGlkZVNlbGVjdENvbHVtbiYmdCsrKSxlLS07dmFyIHI9e2N1cnJFZGl0Q2VsbDp7cmlkOmUsY2lkOnR9fTtpZih0aGlzLnByb3BzLnNlbGVjdFJvdy5jbGlja1RvU2VsZWN0QW5kRWRpdENlbGwpe3ZhciBuPS0xIT10aGlzLnByb3BzLnNlbGVjdGVkUm93S2V5cy5pbmRleE9mKHRoaXMucHJvcHMuZGF0YVtlXVt0aGlzLnByb3BzLmtleUZpZWxkXSk7dGhpcy5oYW5kbGVTZWxlY3RSb3coZSsxLCFuKX10aGlzLnNldFN0YXRlKHIpfX0se2tleTpcImNhbmNlbEVkaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdGUuY3VyckVkaXRDZWxsO2UmJnRoaXMuaGFuZGxlQ29tcGxldGVFZGl0Q2VsbChudWxsLGUucmlkLGUuY2lkKX19LHtrZXk6XCJoYW5kbGVDb21wbGV0ZUVkaXRDZWxsXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuc2V0U3RhdGUoe2N1cnJFZGl0Q2VsbDpudWxsfSksbnVsbCE9ZSYmdGhpcy5wcm9wcy5jZWxsRWRpdC5fX29uQ29tcGxldGVFZGl0X18oZSx0LHIpfX0se2tleTpcInJlbmRlclNlbGVjdFJvd0NvbHVtblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlPT1kW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX1NJTkdMRT91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KG1bXCJkZWZhdWx0XCJdLG51bGwsdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIse3R5cGU6XCJyYWRpb1wiLG5hbWU6XCJzZWxlY3Rpb25cIixjaGVja2VkOmUsb25DaGFuZ2U6dGhpcy5oYW5kbGVTZWxlY3RSb3dDb2x1bUNoYW5nZS5iaW5kKHRoaXMpfSkpOnVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQobVtcImRlZmF1bHRcIl0sbnVsbCx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7dHlwZTpcImNoZWNrYm94XCIsY2hlY2tlZDplLG9uQ2hhbmdlOnRoaXMuaGFuZGxlU2VsZWN0Um93Q29sdW1DaGFuZ2UuYmluZCh0aGlzKX0pKX19LHtrZXk6XCJnZXRCb2R5SGVhZGVyRG9tUHJvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMucmVmcy5oZWFkZXIuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzLHQ9W10scj0wO3I8ZS5sZW5ndGg7cisrKXQucHVzaCh7d2lkdGg6ZVtyXS5vZmZzZXRXaWR0aH0pO3JldHVybiB0fX0se2tleTpcImFkanVzdEJvZHlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFyZEZpeEhlYWRlcldpZHRoKCksdGhpcy5wcm9wcy5jb25kZW5zZWQmJih0aGlzLnJlZnMuYm9keS5zdHlsZS5tYXJnaW5Ub3A9XCItMzZweFwiKSx0aGlzLnByb3BzLm1heEhlaWdodCYmcGFyc2VJbnQodGhpcy5wcm9wcy5tYXhIZWlnaHQpPHRoaXMucmVmcy5jb250YWluZXIub2Zmc2V0SGVpZ2h0JiYodGhpcy5yZWZzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9dGhpcy5wcm9wcy5tYXhIZWlnaHQtNDIrXCJweFwiKX19LHtrZXk6XCJoYXJkRml4SGVhZGVyV2lkdGhcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLnJlZnMuaGVhZGVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlcyx0PTA7dDxlLmxlbmd0aDt0KyspZVt0XS5zdHlsZS53aWR0aD1lW3RdLm9mZnNldFdpZHRoK1wicHhcIn19LHtrZXk6XCJjYWxjdWxhdGVDb250YWluZXJIZWlnaHRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiMTAwJVwiPT10aGlzLnByb3BzLmhlaWdodD90aGlzLnByb3BzLmhlaWdodDpwYXJzZUludCh0aGlzLnByb3BzLmhlaWdodCktNDJ9fSx7a2V5OlwiX2lzU2VsZWN0Um93RGVmaW5lZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0Um93Lm1vZGU9PWRbXCJkZWZhdWx0XCJdLlJPV19TRUxFQ1RfU0lOR0xFfHx0aGlzLnByb3BzLnNlbGVjdFJvdy5tb2RlPT1kW1wiZGVmYXVsdFwiXS5ST1dfU0VMRUNUX01VTFRJfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1AucHJvcFR5cGVzPXtoZWlnaHQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxkYXRhOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxjb2x1bW5zOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxzdHJpcGVkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGJvcmRlcmVkOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGhvdmVyOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNvbmRlbnNlZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxrZXlGaWVsZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLHNlbGVjdGVkUm93S2V5czp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYXJyYXksb25Sb3dDbGljazp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxvblNlbGVjdFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxub0RhdGFUZXh0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmd9LHRbXCJkZWZhdWx0XCJdPVAsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgcj1hcmd1bWVudHNbdF07Zm9yKHZhciBuIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbikmJihlW25dPXJbbl0pfXJldHVybiBlfSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCksbD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sdT1yKDIpLGM9bih1KSxkPXIoNCkscD0obihkKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7byh0aGlzLHQpLGwoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBpKHQsZSkscyh0LFt7a2V5Olwicm93Q2xpY2tcIix2YWx1ZTpmdW5jdGlvbihlKXtcIklOUFVUXCIhPT1lLnRhcmdldC50YWdOYW1lJiYodGhpcy5wcm9wcy5zZWxlY3RSb3cmJnRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3QmJnRoaXMucHJvcHMub25TZWxlY3RSb3coZS5jdXJyZW50VGFyZ2V0LnJvd0luZGV4LCF0aGlzLnByb3BzLmlzU2VsZWN0ZWQpLHRoaXMucHJvcHMub25Sb3dDbGljayYmdGhpcy5wcm9wcy5vblJvd0NsaWNrKGUuY3VycmVudFRhcmdldC5yb3dJbmRleCkpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9e3N0eWxlOntiYWNrZ3JvdW5kQ29sb3I6dGhpcy5wcm9wcy5pc1NlbGVjdGVkP3RoaXMucHJvcHMuc2VsZWN0Um93LmJnQ29sb3I6bnVsbH0sY2xhc3NOYW1lOih0aGlzLnByb3BzLmlzU2VsZWN0ZWQmJnRoaXMucHJvcHMuc2VsZWN0Um93LmNsYXNzTmFtZT90aGlzLnByb3BzLnNlbGVjdFJvdy5jbGFzc05hbWU6XCJcIikrKHRoaXMucHJvcHMuY2xhc3NOYW1lfHxcIlwiKX07cmV0dXJuIHRoaXMucHJvcHMuc2VsZWN0Um93JiYhdGhpcy5wcm9wcy5lbmFibGVDZWxsRWRpdCYmKHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3R8fHRoaXMucHJvcHMuc2VsZWN0Um93LmNsaWNrVG9TZWxlY3RBbmRFZGl0Q2VsbCl8fHRoaXMucHJvcHMub25Sb3dDbGljaz9jW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidHJcIixhKHt9LGUse29uQ2xpY2s6dGhpcy5yb3dDbGljay5iaW5kKHRoaXMpfSksdGhpcy5wcm9wcy5jaGlsZHJlbik6Y1tcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRyXCIsZSx0aGlzLnByb3BzLmNoaWxkcmVuKX19XSksdH0oY1tcImRlZmF1bHRcIl0uQ29tcG9uZW50KSk7cC5wcm9wVHlwZXM9e2lzU2VsZWN0ZWQ6Y1tcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsZW5hYmxlQ2VsbEVkaXQ6Y1tcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsb25Sb3dDbGljazpjW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxvblNlbGVjdFJvdzpjW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuY30scC5kZWZhdWx0UHJvcHM9e29uUm93Q2xpY2s6dm9pZCAwfSx0W1wiZGVmYXVsdFwiXT1wLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIHI9YXJndW1lbnRzW3RdO2Zvcih2YXIgbiBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG4pJiYoZVtuXT1yW25dKX1yZXR1cm4gZX0scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLGw9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LHU9cigyKSxjPW4odSksZD1yKDQpLHA9bihkKSxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLGwoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpfXJldHVybiBpKHQsZSkscyh0LFt7a2V5OlwiaGFuZGxlQ2VsbEVkaXRcIix2YWx1ZTpmdW5jdGlvbihlKXtpZih0aGlzLnByb3BzLmNlbGxFZGl0Lm1vZGU9PXBbXCJkZWZhdWx0XCJdLkNFTExfRURJVF9EQkNMSUNLKWlmKGRvY3VtZW50LnNlbGVjdGlvbiYmZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KWRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpO2Vsc2UgaWYod2luZG93LmdldFNlbGVjdGlvbil7dmFyIHQ9d2luZG93LmdldFNlbGVjdGlvbigpO3QucmVtb3ZlQWxsUmFuZ2VzKCl9dGhpcy5wcm9wcy5vbkVkaXQoZS5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucm93SW5kZXgsZS5jdXJyZW50VGFyZ2V0LmNlbGxJbmRleCl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1udWxsPT10aGlzLnByb3BzLndpZHRoP3RoaXMucHJvcHMud2lkdGg6cGFyc2VJbnQodGhpcy5wcm9wcy53aWR0aCksdD17dGV4dEFsaWduOnRoaXMucHJvcHMuZGF0YUFsaWduLGRpc3BsYXk6dGhpcy5wcm9wcy5oaWRkZW4/XCJub25lXCI6bnVsbCx3aWR0aDplLG1heFdpZHRoOmV9LHI9dGhpcy5wcm9wcy5jbGFzc05hbWU7dGhpcy5wcm9wcy53aWR0aCYmKHIrPVwiIGNvbC1tZC1cIitlKTt2YXIgbj17fTtyZXR1cm4gdGhpcy5wcm9wcy5jZWxsRWRpdCYmKHRoaXMucHJvcHMuY2VsbEVkaXQubW9kZT09cFtcImRlZmF1bHRcIl0uQ0VMTF9FRElUX0NMSUNLP24ub25DbGljaz10aGlzLmhhbmRsZUNlbGxFZGl0LmJpbmQodGhpcyk6dGhpcy5wcm9wcy5jZWxsRWRpdC5tb2RlPT1wW1wiZGVmYXVsdFwiXS5DRUxMX0VESVRfREJDTElDSyYmKG4ub25Eb3VibGVDbGljaz10aGlzLmhhbmRsZUNlbGxFZGl0LmJpbmQodGhpcykpKSxjW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidGRcIixhKHtzdHlsZTp0LGNsYXNzTmFtZTpyfSxuKSx0aGlzLnByb3BzLmNoaWxkcmVuKX19XSksdH0oY1tcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtmLnByb3BUeXBlcz17ZGF0YUFsaWduOmNbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsaGlkZGVuOmNbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNsYXNzTmFtZTpjW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nfSxmLmRlZmF1bHRQcm9wcz17ZGF0YUFsaWduOlwibGVmdFwiLGhpZGRlbjohMSxjbGFzc05hbWU6XCJcIn0sdFtcImRlZmF1bHRcIl09ZixlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoNCksZD0obihjKSxyKDEzKSkscD1uKGQpLGY9cigxNCksaD1uKGYpLHY9cigzKSx5PW4odiksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmNhbGwodGhpcyxlKSx0aGlzLnRpbWVvdXRlQ2xlYXI9MCx0aGlzLnN0YXRlPXtzaGFrZUVkaXRvcjohMX19cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJoYW5kbGVLZXlQcmVzc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKDEzPT1lLmtleUNvZGUpe3ZhciB0PVwiY2hlY2tib3hcIj09ZS5jdXJyZW50VGFyZ2V0LnR5cGU/dGhpcy5fZ2V0Q2hlY2tCb3hWYWx1ZShlKTplLmN1cnJlbnRUYXJnZXQudmFsdWU7aWYoIXRoaXMudmFsaWRhdG9yKHQpKXJldHVybjt0aGlzLnByb3BzLmNvbXBsZXRlRWRpdCh0LHRoaXMucHJvcHMucm93SW5kZXgsdGhpcy5wcm9wcy5jb2xJbmRleCl9ZWxzZSAyNz09ZS5rZXlDb2RlJiZ0aGlzLnByb3BzLmNvbXBsZXRlRWRpdChudWxsLHRoaXMucHJvcHMucm93SW5kZXgsdGhpcy5wcm9wcy5jb2xJbmRleCl9fSx7a2V5OlwiaGFuZGxlQmx1clwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKHRoaXMucHJvcHMuYmx1clRvU2F2ZSl7dmFyIHQ9XCJjaGVja2JveFwiPT1lLmN1cnJlbnRUYXJnZXQudHlwZT90aGlzLl9nZXRDaGVja0JveFZhbHVlKGUpOmUuY3VycmVudFRhcmdldC52YWx1ZTtpZighdGhpcy52YWxpZGF0b3IodCkpcmV0dXJuO3RoaXMucHJvcHMuY29tcGxldGVFZGl0KHQsdGhpcy5wcm9wcy5yb3dJbmRleCx0aGlzLnByb3BzLmNvbEluZGV4KX19fSx7a2V5OlwidmFsaWRhdG9yXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0LnByb3BzLmVkaXRhYmxlLnZhbGlkYXRvcil7dmFyIHI9dC5wcm9wcy5lZGl0YWJsZS52YWxpZGF0b3IoZSk7aWYociE9PSEwKXt0LnJlZnMubm90aWZpZXIubm90aWNlKFwiZXJyb3JcIixyLFwiUHJlc3NlZCBFU0MgY2FuIGNhbmNlbFwiKTt2YXIgbj10LnJlZnMuaW5wdXRSZWY7cmV0dXJuIHQuY2xlYXJUaW1lb3V0KCksdC5zZXRTdGF0ZSh7c2hha2VFZGl0b3I6ITB9KSx0LnRpbWVvdXRlQ2xlYXI9c2V0VGltZW91dChmdW5jdGlvbigpe3Quc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiExfSl9LDMwMCksbi5mb2N1cygpLCExfX1yZXR1cm4hMH19LHtrZXk6XCJjbGVhclRpbWVvdXRcIix2YWx1ZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiB0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGUudG9TdHJpbmcoKX0sdH0oZnVuY3Rpb24oKXswIT10aGlzLnRpbWVvdXRlQ2xlYXImJihjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0ZUNsZWFyKSx0aGlzLnRpbWVvdXRlQ2xlYXI9MCl9KX0se2tleTpcImNvbXBvbmVudERpZE1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlZnMuaW5wdXRSZWY7ZS5mb2N1cygpfX0se2tleTpcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZW91dCgpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5lZGl0YWJsZSx0PXRoaXMucHJvcHMuZm9ybWF0LHI9e3JlZjpcImlucHV0UmVmXCIsb25LZXlEb3duOnRoaXMuaGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKSxvbkJsdXI6dGhpcy5oYW5kbGVCbHVyLmJpbmQodGhpcyl9O2UucGxhY2Vob2xkZXImJihyLnBsYWNlaG9sZGVyPWUucGxhY2Vob2xkZXIpO3ZhciBuPSgwLHlbXCJkZWZhdWx0XCJdKSh7YW5pbWF0ZWQ6dGhpcy5zdGF0ZS5zaGFrZUVkaXRvcixzaGFrZTp0aGlzLnN0YXRlLnNoYWtlRWRpdG9yfSk7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiLHtyZWY6XCJ0ZFwiLHN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9fSwoMCxwW1wiZGVmYXVsdFwiXSkoZSxyLHQsbix0aGlzLnByb3BzLmNoaWxkcmVufHxcIlwiKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGhbXCJkZWZhdWx0XCJdLHtyZWY6XCJub3RpZmllclwifSkpfX0se2tleTpcIl9nZXRDaGVja0JveFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixyPWUuY3VycmVudFRhcmdldC52YWx1ZS5zcGxpdChcIjpcIik7cmV0dXJuIHQ9ZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ/clswXTpyWzFdfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO20ucHJvcFR5cGVzPXtjb21wbGV0ZUVkaXQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMscm93SW5kZXg6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixjb2xJbmRleDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyLGJsdXJUb1NhdmU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2x9LHRbXCJkZWZhdWx0XCJdPW0sZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIG4gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmKGVbbl09cltuXSl9cmV0dXJuIGV9LGk9cigyKSxhPW4oaSkscz1mdW5jdGlvbihlLHQscixuLGkpe2lmKGU9PT0hMHx8XCJzdHJpbmdcIj09dHlwZW9mIGUpe3ZhciBzPWU9PT0hMD9cInRleHRcIjplO3JldHVybiBhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIixvKHt9LHQse3R5cGU6cyxkZWZhdWx0VmFsdWU6aSxjbGFzc05hbWU6KG58fFwiXCIpK1wiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC10ZXh0XCJ9KSl9aWYoIWUpe3ZhciBzPWU9PT0hMD9cInRleHRcIjplO3JldHVybiBhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIixvKHt9LHQse3R5cGU6cyxkZWZhdWx0VmFsdWU6aSxkaXNhYmxlZDpcImRpc2FibGVkXCIsY2xhc3NOYW1lOihufHxcIlwiKStcIiBmb3JtLWNvbnRyb2wgZWRpdG9yIGVkaXQtdGV4dFwifSkpfWlmKGUudHlwZSl7aWYoZS5zdHlsZSYmKHQuc3R5bGU9ZS5zdHlsZSksdC5jbGFzc05hbWU9KG58fFwiXCIpK1wiIGZvcm0tY29udHJvbCBlZGl0b3IgZWRpdC1cIitlLnR5cGUrKGUuY2xhc3NOYW1lP1wiIFwiK2UuY2xhc3NOYW1lOlwiXCIpLFwic2VsZWN0XCI9PT1lLnR5cGUpe3ZhciBsPVtdLHU9ZS5vcHRpb25zLnZhbHVlcztpZihBcnJheS5pc0FycmF5KHUpKXt2YXIgYztsPXUubWFwKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGM9cj9yKGUpOmUsYVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLHtrZXk6XCJvcHRpb25cIit0LHZhbHVlOmV9LGMpfSl9cmV0dXJuIGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIixvKHt9LHQse2RlZmF1bHRWYWx1ZTppfSksbCl9aWYoXCJ0ZXh0YXJlYVwiPT09ZS50eXBlKXtlLmNvbHMmJih0LmNvbHM9ZS5jb2xzKSxlLnJvd3MmJih0LnJvd3M9ZS5yb3dzKTt2YXIgZD10Lm9uS2V5RG93bixwPW51bGw7cmV0dXJuIGQmJih0Lm9uS2V5RG93bj1mdW5jdGlvbihlKXsxMyE9ZS5rZXlDb2RlJiZkKGUpfSxwPWFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b1wiLHtjbGFzc05hbWU6XCJidG4gYnRuLWluZm8gYnRuLXhzIHRleHRhcmVhLXNhdmUtYnRuXCIsb25DbGljazpkfSxcInNhdmVcIikpLGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixudWxsLGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLG8oe30sdCx7ZGVmYXVsdFZhbHVlOml9KSkscCl9aWYoXCJjaGVja2JveFwiPT09ZS50eXBlKXt2YXIgZj1cInRydWU6ZmFsc2VcIjtlLm9wdGlvbnMmJmUub3B0aW9ucy52YWx1ZXMmJihmPWUub3B0aW9ucy52YWx1ZXMpLHQuY2xhc3NOYW1lPXQuY2xhc3NOYW1lLnJlcGxhY2UoXCJmb3JtLWNvbnRyb2xcIixcIlwiKSx0LmNsYXNzTmFtZSs9XCIgY2hlY2tib3ggcHVsbC1yaWdodFwiO3ZhciBoPWkmJmkudG9TdHJpbmcoKT09Zi5zcGxpdChcIjpcIilbMF0/ITA6ITE7cmV0dXJuIGFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLG8oe30sdCx7dHlwZTpcImNoZWNrYm94XCIsdmFsdWU6ZixkZWZhdWx0Q2hlY2tlZDpofSkpfXJldHVybiBhW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIixvKHt9LHQse3R5cGU6cyxkZWZhdWx0VmFsdWU6aX0pKX1yZXR1cm4gYVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIsbyh7fSx0LHt0eXBlOlwidGV4dFwiLGNsYXNzTmFtZToobnx8XCJcIikrXCIgZm9ybS1jb250cm9sIGVkaXRvciBlZGl0LXRleHRcIn0pKX07dFtcImRlZmF1bHRcIl09cyxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaShlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCkscz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sbD1yKDIpLHU9bihsKSxjPXIoNCksZD0obihjKSxyKDE1KSkscD1uKGQpLGY9cFtcImRlZmF1bHRcIl0uVG9hc3RDb250YWluZXIsaD11W1wiZGVmYXVsdFwiXS5jcmVhdGVGYWN0b3J5KHBbXCJkZWZhdWx0XCJdLlRvYXN0TWVzc2FnZS5hbmltYXRpb24pLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcIm5vdGljZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLnJlZnMudG9hc3RyW2VdKHQscix7bW9kZTpcInNpbmdsZVwiLHRpbWVPdXQ6NWUzLGV4dGVuZGVkVGltZU91dDoxZTMsc2hvd0FuaW1hdGlvbjpcImFuaW1hdGVkICBib3VuY2VJblwiLGhpZGVBbmltYXRpb246XCJhbmltYXRlZCBib3VuY2VPdXRcIn0pfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoZix7cmVmOlwidG9hc3RyXCIsdG9hc3RNZXNzYWdlRmFjdG9yeTpoLGlkOlwidG9hc3QtY29udGFpbmVyXCIsY2xhc3NOYW1lOlwidG9hc3QtdG9wLXJpZ2h0XCJ9KX19XSksdH0odVtcImRlZmF1bHRcIl0uQ29tcG9uZW50KTt0W1wiZGVmYXVsdFwiXT12LGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuVG9hc3RDb250YWluZXI9cigxNiksdC5Ub2FzdE1lc3NhZ2U9cigyMyl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7fXZhciBvPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciByPWFyZ3VtZW50c1t0XTtmb3IodmFyIG4gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmKGVbbl09cltuXSl9cmV0dXJuIGV9LGk9cigyKSxhPXIoMTcpLHM9aS5jcmVhdGVGYWN0b3J5KHIoMjMpKTtlLmV4cG9ydHM9aS5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6XCJUb2FzdENvbnRhaW5lclwiLGVycm9yOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9ub3RpZnkodGhpcy5wcm9wcy50b2FzdFR5cGUuZXJyb3IsZSx0LHIpfSxpbmZvOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9ub3RpZnkodGhpcy5wcm9wcy50b2FzdFR5cGUuaW5mbyxlLHQscil9LHN1Y2Nlc3M6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX25vdGlmeSh0aGlzLnByb3BzLnRvYXN0VHlwZS5zdWNjZXNzLGUsdCxyKX0sd2FybmluZzpmdW5jdGlvbihlLHQscil7dGhpcy5fbm90aWZ5KHRoaXMucHJvcHMudG9hc3RUeXBlLndhcm5pbmcsZSx0LHIpfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5yZWZzO2ZvcihlIGluIHQpdFtlXS5oaWRlVG9hc3QoITEpfSxnZXREZWZhdWx0UHJvcHM6ZnVuY3Rpb24oKXtyZXR1cm57dG9hc3RUeXBlOntlcnJvcjpcImVycm9yXCIsaW5mbzpcImluZm9cIixzdWNjZXNzOlwic3VjY2Vzc1wiLHdhcm5pbmc6XCJ3YXJuaW5nXCJ9LGlkOlwidG9hc3QtY29udGFpbmVyXCIsdG9hc3RNZXNzYWdlRmFjdG9yeTpzLHByZXZlbnREdXBsaWNhdGVzOiExLG5ld2VzdE9uVG9wOiEwLG9uQ2xpY2s6bn19LGdldEluaXRpYWxTdGF0ZTpmdW5jdGlvbigpe3JldHVybnt0b2FzdHM6W10sdG9hc3RJZDowLHByZXZpb3VzTWVzc2FnZTpudWxsfX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlcih0aGlzLnByb3BzLHRoaXMuc3RhdGUpfSxfbm90aWZ5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89YXJndW1lbnRzLmxlbmd0aDw9M3x8dm9pZCAwPT09YXJndW1lbnRzWzNdP3t9OmFyZ3VtZW50c1szXSxpPXRoaXMucHJvcHMscz10aGlzLnN0YXRlO2lmKCFpLnByZXZlbnREdXBsaWNhdGVzfHxzLnByZXZpb3VzTWVzc2FnZSE9PXQpe3ZhciBsPXMudG9hc3RJZCsrLHU9bCxjPWEobyx7JG1lcmdlOnt0eXBlOmUsdGl0bGU6cixtZXNzYWdlOnQsdG9hc3RJZDp1LGtleTpsLHJlZjpcInRvYXN0c19fXCIrbCxoYW5kbGVPbkNsaWNrOmZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIG8uaGFuZGxlT25DbGljayYmby5oYW5kbGVPbkNsaWNrKCksbi5faGFuZGxlX3RvYXN0X29uX2NsaWNrKGUpfSxoYW5kbGVSZW1vdmU6dGhpcy5faGFuZGxlX3RvYXN0X3JlbW92ZX19KSxkPXt9O2RbXCJcIisoaS5uZXdlc3RPblRvcD9cIiR1bnNoaWZ0XCI6XCIkcHVzaFwiKV09W2NdO3ZhciBwPWEocyx7dG9hc3RzOmQscHJldmlvdXNNZXNzYWdlOnskc2V0OnR9fSk7dGhpcy5zZXRTdGF0ZShwKX19LF9oYW5kbGVfdG9hc3Rfb25fY2xpY2s6ZnVuY3Rpb24oZSl7dGhpcy5wcm9wcy5vbkNsaWNrKGUpLGUuZGVmYXVsdFByZXZlbnRlZHx8KGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKX0sX2hhbmRsZV90b2FzdF9yZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuc3RhdGU7ci50b2FzdHNbXCJcIisodGhpcy5wcm9wcy5uZXdlc3RPblRvcD9cInJlZHVjZVJpZ2h0XCI6XCJyZWR1Y2VcIildKGZ1bmN0aW9uKG4sbyxpKXtyZXR1cm4gbnx8by50b2FzdElkIT09ZT8hMToodC5zZXRTdGF0ZShhKHIse3RvYXN0czp7JHNwbGljZTpbW2ksMV1dfX0pKSwhMCl9LCExKX0sX3JlbmRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixvKHt9LGUse1wiYXJpYS1saXZlXCI6XCJwb2xpdGVcIixyb2xlOlwiYWxlcnRcIn0pLHQudG9hc3RzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS50b2FzdE1lc3NhZ2VGYWN0b3J5KHQpfSkpfX0pfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXIoMTgpfSxmdW5jdGlvbihlLHQscil7KGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZS5jb25jYXQoKTplJiZcIm9iamVjdFwiPT10eXBlb2YgZT9hKG5ldyBlLmNvbnN0cnVjdG9yLGUpOmV9ZnVuY3Rpb24gbyhlLHIsbil7QXJyYXkuaXNBcnJheShlKT92b2lkIDA6XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwidXBkYXRlKCk6IGV4cGVjdGVkIHRhcmdldCBvZiAlcyB0byBiZSBhbiBhcnJheTsgZ290ICVzLlwiLG4sZSk6bCghMSk7dmFyIG89cltuXTtBcnJheS5pc0FycmF5KG8pP3ZvaWQgMDpcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogZXhwZWN0ZWQgc3BlYyBvZiAlcyB0byBiZSBhbiBhcnJheTsgZ290ICVzLiBEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVyIGluIGFuIGFycmF5P1wiLG4sbyk6bCghMSl9ZnVuY3Rpb24gaShlLHIpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiByP1wicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiBZb3UgcHJvdmlkZWQgYSBrZXkgcGF0aCB0byB1cGRhdGUoKSB0aGF0IGRpZCBub3QgY29udGFpbiBvbmUgb2YgJXMuIERpZCB5b3UgZm9yZ2V0IHRvIGluY2x1ZGUgeyVzOiAuLi59P1wiLHkuam9pbihcIiwgXCIpLGYpOmwoITEpOnZvaWQgMCx1LmNhbGwocixmKSlyZXR1cm4gMSE9PU9iamVjdC5rZXlzKHIpLmxlbmd0aD9cInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJDYW5ub3QgaGF2ZSBtb3JlIHRoYW4gb25lIGtleSBpbiBhbiBvYmplY3Qgd2l0aCAlc1wiLGYpOmwoITEpOnZvaWQgMCxyW2ZdO3ZhciBzPW4oZSk7aWYodS5jYWxsKHIsaCkpe3ZhciBnPXJbaF07ZyYmXCJvYmplY3RcIj09dHlwZW9mIGc/dm9pZCAwOlwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiAlcyBleHBlY3RzIGEgc3BlYyBvZiB0eXBlICdvYmplY3QnOyBnb3QgJXNcIixoLGcpOmwoITEpLHMmJlwib2JqZWN0XCI9PXR5cGVvZiBzP3ZvaWQgMDpcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJ1cGRhdGUoKTogJXMgZXhwZWN0cyBhIHRhcmdldCBvZiB0eXBlICdvYmplY3QnOyBnb3QgJXNcIixoLHMpOmwoITEpLFxuYShzLHJbaF0pfXUuY2FsbChyLGMpJiYobyhlLHIsYykscltjXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MucHVzaChlKX0pKSx1LmNhbGwocixkKSYmKG8oZSxyLGQpLHJbZF0uZm9yRWFjaChmdW5jdGlvbihlKXtzLnVuc2hpZnQoZSl9KSksdS5jYWxsKHIscCkmJihBcnJheS5pc0FycmF5KGUpP3ZvaWQgMDpcInByb2R1Y3Rpb25cIiE9PXQuZW52Lk5PREVfRU5WP2woITEsXCJFeHBlY3RlZCAlcyB0YXJnZXQgdG8gYmUgYW4gYXJyYXk7IGdvdCAlc1wiLHAsZSk6bCghMSksQXJyYXkuaXNBcnJheShyW3BdKT92b2lkIDA6XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9sKCExLFwidXBkYXRlKCk6IGV4cGVjdGVkIHNwZWMgb2YgJXMgdG8gYmUgYW4gYXJyYXkgb2YgYXJyYXlzOyBnb3QgJXMuIERpZCB5b3UgZm9yZ2V0IHRvIHdyYXAgeW91ciBwYXJhbWV0ZXJzIGluIGFuIGFycmF5P1wiLHAscltwXSk6bCghMSkscltwXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe0FycmF5LmlzQXJyYXkoZSk/dm9pZCAwOlwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiBleHBlY3RlZCBzcGVjIG9mICVzIHRvIGJlIGFuIGFycmF5IG9mIGFycmF5czsgZ290ICVzLiBEaWQgeW91IGZvcmdldCB0byB3cmFwIHlvdXIgcGFyYW1ldGVycyBpbiBhbiBhcnJheT9cIixwLHJbcF0pOmwoITEpLHMuc3BsaWNlLmFwcGx5KHMsZSl9KSksdS5jYWxsKHIsdikmJihcImZ1bmN0aW9uXCIhPXR5cGVvZiByW3ZdP1wicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bCghMSxcInVwZGF0ZSgpOiBleHBlY3RlZCBzcGVjIG9mICVzIHRvIGJlIGEgZnVuY3Rpb247IGdvdCAlcy5cIix2LHJbdl0pOmwoITEpOnZvaWQgMCxzPXJbdl0ocykpO2Zvcih2YXIgYiBpbiByKW0uaGFzT3duUHJvcGVydHkoYikmJm1bYl18fChzW2JdPWkoZVtiXSxyW2JdKSk7cmV0dXJuIHN9dmFyIGE9cigyMCkscz1yKDIxKSxsPXIoMjIpLHU9e30uaGFzT3duUHJvcGVydHksYz1zKHskcHVzaDpudWxsfSksZD1zKHskdW5zaGlmdDpudWxsfSkscD1zKHskc3BsaWNlOm51bGx9KSxmPXMoeyRzZXQ6bnVsbH0pLGg9cyh7JG1lcmdlOm51bGx9KSx2PXMoeyRhcHBseTpudWxsfSkseT1bYyxkLHAsZixoLHZdLG09e307eS5mb3JFYWNoKGZ1bmN0aW9uKGUpe21bZV09ITB9KSxlLmV4cG9ydHM9aX0pLmNhbGwodCxyKDE5KSl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3U9ITEsYS5sZW5ndGg/bD1hLmNvbmNhdChsKTpjPS0xLGwubGVuZ3RoJiZuKCl9ZnVuY3Rpb24gbigpe2lmKCF1KXt2YXIgZT1zZXRUaW1lb3V0KHIpO3U9ITA7Zm9yKHZhciB0PWwubGVuZ3RoO3Q7KXtmb3IoYT1sLGw9W107KytjPHQ7KWEmJmFbY10ucnVuKCk7Yz0tMSx0PWwubGVuZ3RofWE9bnVsbCx1PSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gbyhlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIGkoKXt9dmFyIGEscz1lLmV4cG9ydHM9e30sbD1bXSx1PSExLGM9LTE7cy5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO2wucHVzaChuZXcgbyhlLHQpKSwxIT09bC5sZW5ndGh8fHV8fHNldFRpbWVvdXQobiwwKX0sby5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0scy50aXRsZT1cImJyb3dzZXJcIixzLmJyb3dzZXI9ITAscy5lbnY9e30scy5hcmd2PVtdLHMudmVyc2lvbj1cIlwiLHMudmVyc2lvbnM9e30scy5vbj1pLHMuYWRkTGlzdGVuZXI9aSxzLm9uY2U9aSxzLm9mZj1pLHMucmVtb3ZlTGlzdGVuZXI9aSxzLnJlbW92ZUFsbExpc3RlbmVycz1pLHMuZW1pdD1pLHMuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0scy5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0scy5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHMudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKGUsdCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHQpe2lmKG51bGw9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdC5hc3NpZ24gdGFyZ2V0IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZFwiKTtmb3IodmFyIHI9T2JqZWN0KGUpLG49T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxvPTE7bzxhcmd1bWVudHMubGVuZ3RoO28rKyl7dmFyIGk9YXJndW1lbnRzW29dO2lmKG51bGwhPWkpe3ZhciBhPU9iamVjdChpKTtmb3IodmFyIHMgaW4gYSluLmNhbGwoYSxzKSYmKHJbc109YVtzXSl9fXJldHVybiByfWUuZXhwb3J0cz1yfSxmdW5jdGlvbihlLHQpe1widXNlIHN0cmljdFwiO3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4gdDtyZXR1cm4gbnVsbH07ZS5leHBvcnRzPXJ9LGZ1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHIsbixvLGksYSxzLGwpe2lmKFwicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlYmJnZvaWQgMD09PXIpdGhyb3cgbmV3IEVycm9yKFwiaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnRcIik7aWYoIWUpe3ZhciB1O2lmKHZvaWQgMD09PXIpdT1uZXcgRXJyb3IoXCJNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLlwiKTtlbHNle3ZhciBjPVtuLG8saSxhLHMsbF0sZD0wO3U9bmV3IEVycm9yKHIucmVwbGFjZSgvJXMvZyxmdW5jdGlvbigpe3JldHVybiBjW2QrK119KSksdS5uYW1lPVwiSW52YXJpYW50IFZpb2xhdGlvblwifXRocm93IHUuZnJhbWVzVG9Qb3A9MSx1fX1lLmV4cG9ydHM9cn0pLmNhbGwodCxyKDE5KSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKCl7fXZhciBvPXIoMiksaT1yKDE3KSxhPXIoMykscz17ZGlzcGxheU5hbWU6XCJUb2FzdE1lc3NhZ2VcIixnZXREZWZhdWx0UHJvcHM6ZnVuY3Rpb24oKXt2YXIgZT17ZXJyb3I6XCJ0b2FzdC1lcnJvclwiLGluZm86XCJ0b2FzdC1pbmZvXCIsc3VjY2VzczpcInRvYXN0LXN1Y2Nlc3NcIix3YXJuaW5nOlwidG9hc3Qtd2FybmluZ1wifTtyZXR1cm57Y2xhc3NOYW1lOlwidG9hc3RcIixpY29uQ2xhc3NOYW1lczplLHRpdGxlQ2xhc3NOYW1lOlwidG9hc3QtdGl0bGVcIixtZXNzYWdlQ2xhc3NOYW1lOlwidG9hc3QtbWVzc2FnZVwiLHRhcFRvRGlzbWlzczohMCxjbG9zZUJ1dHRvbjohMX19LGhhbmRsZU9uQ2xpY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm9wczt0LmhhbmRsZU9uQ2xpY2soZSksdC50YXBUb0Rpc21pc3MmJnRoaXMuaGlkZVRvYXN0KCEwKX0sX2hhbmRsZV9jbG9zZV9idXR0b25fY2xpY2s6ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLmhpZGVUb2FzdCghMCl9LF9oYW5kbGVfcmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcztlLmhhbmRsZVJlbW92ZShlLnRvYXN0SWQpfSxfcmVuZGVyX2Nsb3NlX2J1dHRvbjpmdW5jdGlvbihlKXtyZXR1cm4gZS5jbG9zZUJ1dHRvbj9vLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7Y2xhc3NOYW1lOlwidG9hc3QtY2xvc2UtYnV0dG9uXCIscm9sZTpcImJ1dHRvblwiLG9uQ2xpY2s6dGhpcy5faGFuZGxlX2Nsb3NlX2J1dHRvbl9jbGljayxkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOlwiJnRpbWVzO1wifX0pOiExfSxfcmVuZGVyX3RpdGxlX2VsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGl0bGU/by5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTplLnRpdGxlQ2xhc3NOYW1lfSxlLnRpdGxlKTohMX0sX3JlbmRlcl9tZXNzYWdlX2VsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWVzc2FnZT9vLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOmUubWVzc2FnZUNsYXNzTmFtZX0sZS5tZXNzYWdlKTohMX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcyx0PWUuaWNvbkNsYXNzTmFtZXx8ZS5pY29uQ2xhc3NOYW1lc1tlLnR5cGVdLHI9e307cmV0dXJuIHJbZS5jbGFzc05hbWVdPSEwLHJbdF09ITAsby5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTphKHIpLHN0eWxlOmUuc3R5bGV8fHt9LG9uQ2xpY2s6dGhpcy5oYW5kbGVPbkNsaWNrLG9uTW91c2VFbnRlcjp0aGlzLmhhbmRsZU1vdXNlRW50ZXIsb25Nb3VzZUxlYXZlOnRoaXMuaGFuZGxlTW91c2VMZWF2ZX0sdGhpcy5fcmVuZGVyX2Nsb3NlX2J1dHRvbihlKSx0aGlzLl9yZW5kZXJfdGl0bGVfZWxlbWVudChlKSx0aGlzLl9yZW5kZXJfbWVzc2FnZV9lbGVtZW50KGUpKX19LGw9by5jcmVhdGVDbGFzcyhpKHMse2Rpc3BsYXlOYW1lOnskc2V0OlwiVG9hc3RNZXNzYWdlLmFuaW1hdGlvblwifSxtaXhpbnM6eyRzZXQ6W3IoMjQpXX19KSksdT1vLmNyZWF0ZUNsYXNzKGkocyx7ZGlzcGxheU5hbWU6eyRzZXQ6XCJUb2FzdE1lc3NhZ2UualF1ZXJ5XCJ9LG1peGluczp7JHNldDpbcigyOSldfX0pKTtzLmhhbmRsZU1vdXNlRW50ZXI9bixzLmhhbmRsZU1vdXNlTGVhdmU9bixzLmhpZGVUb2FzdD1uO3ZhciBjPWUuZXhwb3J0cz1vLmNyZWF0ZUNsYXNzKHMpO2MuYW5pbWF0aW9uPWwsYy5qUXVlcnk9dX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMjUpLG89cigyNyksaT1yKDYpLGE9MTcscz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2UuZXhwb3J0cz17Z2V0RGVmYXVsdFByb3BzOmZ1bmN0aW9uKCl7cmV0dXJue3RyYW5zaXRpb246bnVsbCxzaG93QW5pbWF0aW9uOlwiYW5pbWF0ZWQgYm91bmNlSW5cIixoaWRlQW5pbWF0aW9uOlwiYW5pbWF0ZWQgYm91bmNlT3V0XCIsdGltZU91dDo1ZTMsZXh0ZW5kZWRUaW1lT3V0OjFlM319LGNvbXBvbmVudFdpbGxNb3VudDpmdW5jdGlvbigpe3RoaXMuY2xhc3NOYW1lUXVldWU9W10sdGhpcy5pc0hpZGluZz0hMSx0aGlzLmludGVydmFsSWQ9bnVsbH0sY29tcG9uZW50RGlkTW91bnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wcm9wczt0aGlzLl9zaG93KHQpO3ZhciByPWZ1bmN0aW9uIGEoKXtlLmlzSGlkaW5nJiYoZS5fc2V0X2lzX2hpZGluZyghMSksby5yZW1vdmVFbmRFdmVudExpc3RlbmVyKG4sYSksZS5faGFuZGxlX3JlbW92ZSgpKX0sbj1pLmZpbmRET01Ob2RlKHRoaXMpO28uYWRkRW5kRXZlbnRMaXN0ZW5lcihuLHIpLDA8dC50aW1lT3V0JiZ0aGlzLl9zZXRfaW50ZXJ2YWxfaWQoc2V0VGltZW91dCh0aGlzLmhpZGVUb2FzdCx0LnRpbWVPdXQpKX0sY29tcG9uZW50V2lsbFVubW91bnQ6ZnVuY3Rpb24oKXt0aGlzLmludGVydmFsSWQmJmNsZWFyVGltZW91dCh0aGlzLmludGVydmFsSWQpfSxfc2V0X3RyYW5zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9cImxlYXZlXCI6XCJlbnRlclwiLHI9aS5maW5kRE9NTm9kZSh0aGlzKSxhPXRoaXMucHJvcHMudHJhbnNpdGlvbitcIi1cIit0LHM9YStcIi1hY3RpdmVcIixsPWZ1bmN0aW9uIHUoZSl7ZSYmZS50YXJnZXQhPT1yfHwobi5yZW1vdmVDbGFzcyhyLGEpLG4ucmVtb3ZlQ2xhc3MocixzKSxvLnJlbW92ZUVuZEV2ZW50TGlzdGVuZXIocix1KSl9O28uYWRkRW5kRXZlbnRMaXN0ZW5lcihyLGwpLG4uYWRkQ2xhc3MocixhKSx0aGlzLl9xdWV1ZV9jbGFzcyhzKX0sX2NsZWFyX3RyYW5zaXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9aS5maW5kRE9NTm9kZSh0aGlzKSxyPWU/XCJsZWF2ZVwiOlwiZW50ZXJcIixvPXRoaXMucHJvcHMudHJhbnNpdGlvbitcIi1cIityLGE9bytcIi1hY3RpdmVcIjtuLnJlbW92ZUNsYXNzKHQsbyksbi5yZW1vdmVDbGFzcyh0LGEpfSxfc2V0X2FuaW1hdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1pLmZpbmRET01Ob2RlKHRoaXMpLHI9dGhpcy5fZ2V0X2FuaW1hdGlvbl9jbGFzc2VzKGUpLGE9ZnVuY3Rpb24gcyhlKXtlJiZlLnRhcmdldCE9PXR8fChyLmZvckVhY2goZnVuY3Rpb24oZSl7bi5yZW1vdmVDbGFzcyh0LGUpfSksby5yZW1vdmVFbmRFdmVudExpc3RlbmVyKHQscykpfTtvLmFkZEVuZEV2ZW50TGlzdGVuZXIodCxhKSxyLmZvckVhY2goZnVuY3Rpb24oZSl7bi5hZGRDbGFzcyh0LGUpfSl9LF9nZXRfYW5pbWF0aW9uX2NsYXNzZXM6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wcm9wcyxyPWU/dC5oaWRlQW5pbWF0aW9uOnQuc2hvd0FuaW1hdGlvbjtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1zLmNhbGwocik/cjpcInN0cmluZ1wiPT10eXBlb2Ygcj9yLnNwbGl0KFwiIFwiKTp2b2lkIDB9LF9jbGVhcl9hbmltYXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX2dldF9hbmltYXRpb25fY2xhc3NlcyhlKTtyLmZvckVhY2goZnVuY3Rpb24oZSl7bi5yZW1vdmVDbGFzcyhpLmZpbmRET01Ob2RlKHQpLGUpfSl9LF9xdWV1ZV9jbGFzczpmdW5jdGlvbihlKXt0aGlzLmNsYXNzTmFtZVF1ZXVlLnB1c2goZSksdGhpcy50aW1lb3V0fHwodGhpcy50aW1lb3V0PXNldFRpbWVvdXQodGhpcy5fZmx1c2hfY2xhc3NfbmFtZV9xdWV1ZSxhKSl9LF9mbHVzaF9jbGFzc19uYW1lX3F1ZXVlOmZ1bmN0aW9uKCl7dGhpcy5pc01vdW50ZWQoKSYmdGhpcy5jbGFzc05hbWVRdWV1ZS5mb3JFYWNoKG4uYWRkQ2xhc3MuYmluZChuLGkuZmluZERPTU5vZGUodGhpcykpKSx0aGlzLmNsYXNzTmFtZVF1ZXVlLmxlbmd0aD0wLHRoaXMudGltZW91dD1udWxsfSxfc2hvdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7ZS50cmFuc2l0aW9uP3RoaXMuX3NldF90cmFuc2l0aW9uKCk6ZS5zaG93QW5pbWF0aW9uJiZ0aGlzLl9zZXRfYW5pbWF0aW9uKCl9LGhhbmRsZU1vdXNlRW50ZXI6ZnVuY3Rpb24oKXtpZihjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbElkKSx0aGlzLl9zZXRfaW50ZXJ2YWxfaWQobnVsbCksdGhpcy5pc0hpZGluZyl7dGhpcy5fc2V0X2lzX2hpZGluZyghMSk7dmFyIGU9dGhpcy5wcm9wcztlLmhpZGVBbmltYXRpb24/dGhpcy5fY2xlYXJfYW5pbWF0aW9uKCEwKTplLnRyYW5zaXRpb24mJnRoaXMuX2NsZWFyX3RyYW5zaXRpb24oITApfX0saGFuZGxlTW91c2VMZWF2ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7IXRoaXMuaXNIaWRpbmcmJigwPGUudGltZU91dHx8MDxlLmV4dGVuZGVkVGltZU91dCkmJnRoaXMuX3NldF9pbnRlcnZhbF9pZChzZXRUaW1lb3V0KHRoaXMuaGlkZVRvYXN0LGUuZXh0ZW5kZWRUaW1lT3V0KSl9LGhpZGVUb2FzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnByb3BzO3RoaXMuaXNIaWRpbmd8fG51bGw9PXRoaXMuaW50ZXJ2YWxJZCYmIWV8fCh0aGlzLl9zZXRfaXNfaGlkaW5nKCEwKSx0LnRyYW5zaXRpb24/dGhpcy5fc2V0X3RyYW5zaXRpb24oITApOnQuaGlkZUFuaW1hdGlvbj90aGlzLl9zZXRfYW5pbWF0aW9uKCEwKTp0aGlzLl9oYW5kbGVfcmVtb3ZlKCkpfSxfc2V0X2ludGVydmFsX2lkOmZ1bmN0aW9uKGUpe3RoaXMuaW50ZXJ2YWxJZD1lfSxfc2V0X2lzX2hpZGluZzpmdW5jdGlvbihlKXt0aGlzLmlzSGlkaW5nPWV9fX0sZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDI2KSxvPXthZGRDbGFzczpmdW5jdGlvbihlLHIpe3JldHVybi9cXHMvLnRlc3Qocik/XCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOVj9uKCExLCdDU1NDb3JlLmFkZENsYXNzIHRha2VzIG9ubHkgYSBzaW5nbGUgY2xhc3MgbmFtZS4gXCIlc1wiIGNvbnRhaW5zIG11bHRpcGxlIGNsYXNzZXMuJyxyKTpuKCExKTp2b2lkIDAsciYmKGUuY2xhc3NMaXN0P2UuY2xhc3NMaXN0LmFkZChyKTpvLmhhc0NsYXNzKGUscil8fChlLmNsYXNzTmFtZT1lLmNsYXNzTmFtZStcIiBcIityKSksZX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSxyKXtyZXR1cm4vXFxzLy50ZXN0KHIpP1wicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bighMSwnQ1NTQ29yZS5yZW1vdmVDbGFzcyB0YWtlcyBvbmx5IGEgc2luZ2xlIGNsYXNzIG5hbWUuIFwiJXNcIiBjb250YWlucyBtdWx0aXBsZSBjbGFzc2VzLicscik6bighMSk6dm9pZCAwLHImJihlLmNsYXNzTGlzdD9lLmNsYXNzTGlzdC5yZW1vdmUocik6by5oYXNDbGFzcyhlLHIpJiYoZS5jbGFzc05hbWU9ZS5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrcitcIig/OlxcXFxzfCQpXCIsXCJnXCIpLFwiJDFcIikucmVwbGFjZSgvXFxzKy9nLFwiIFwiKS5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLFwiXCIpKSksZX0sY29uZGl0aW9uQ2xhc3M6ZnVuY3Rpb24oZSx0LHIpe3JldHVybihyP28uYWRkQ2xhc3M6by5yZW1vdmVDbGFzcykoZSx0KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSxyKXtyZXR1cm4vXFxzLy50ZXN0KHIpP1wicHJvZHVjdGlvblwiIT09dC5lbnYuTk9ERV9FTlY/bighMSxcIkNTUy5oYXNDbGFzcyB0YWtlcyBvbmx5IGEgc2luZ2xlIGNsYXNzIG5hbWUuXCIpOm4oITEpOnZvaWQgMCxlLmNsYXNzTGlzdD8hIXImJmUuY2xhc3NMaXN0LmNvbnRhaW5zKHIpOihcIiBcIitlLmNsYXNzTmFtZStcIiBcIikuaW5kZXhPZihcIiBcIityK1wiIFwiKT4tMX19O2UuZXhwb3J0cz1vfSkuY2FsbCh0LHIoMTkpKX0sZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUscixuLG8saSxhLHMsbCl7aWYoXCJwcm9kdWN0aW9uXCIhPT10LmVudi5OT0RFX0VOViYmdm9pZCAwPT09cil0aHJvdyBuZXcgRXJyb3IoXCJpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudFwiKTtpZighZSl7dmFyIHU7aWYodm9pZCAwPT09cil1PW5ldyBFcnJvcihcIk1pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuXCIpO2Vsc2V7dmFyIGM9W24sbyxpLGEscyxsXSxkPTA7dT1uZXcgRXJyb3Ioci5yZXBsYWNlKC8lcy9nLGZ1bmN0aW9uKCl7cmV0dXJuIGNbZCsrXX0pKSx1Lm5hbWU9XCJJbnZhcmlhbnQgVmlvbGF0aW9uXCJ9dGhyb3cgdS5mcmFtZXNUb1BvcD0xLHV9fWUuZXhwb3J0cz1yfSkuY2FsbCh0LHIoMTkpKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHQ9ZS5zdHlsZTtcIkFuaW1hdGlvbkV2ZW50XCJpbiB3aW5kb3d8fGRlbGV0ZSBzLmFuaW1hdGlvbmVuZC5hbmltYXRpb24sXCJUcmFuc2l0aW9uRXZlbnRcImluIHdpbmRvd3x8ZGVsZXRlIHMudHJhbnNpdGlvbmVuZC50cmFuc2l0aW9uO2Zvcih2YXIgciBpbiBzKXt2YXIgbj1zW3JdO2Zvcih2YXIgbyBpbiBuKWlmKG8gaW4gdCl7bC5wdXNoKG5bb10pO2JyZWFrfX19ZnVuY3Rpb24gbyhlLHQscil7ZS5hZGRFdmVudExpc3RlbmVyKHQsciwhMSl9ZnVuY3Rpb24gaShlLHQscil7ZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsciwhMSl9dmFyIGE9cigyOCkscz17dHJhbnNpdGlvbmVuZDp7dHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJtb3pUcmFuc2l0aW9uRW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLG1zVHJhbnNpdGlvbjpcIk1TVHJhbnNpdGlvbkVuZFwifSxhbmltYXRpb25lbmQ6e2FuaW1hdGlvbjpcImFuaW1hdGlvbmVuZFwiLFdlYmtpdEFuaW1hdGlvbjpcIndlYmtpdEFuaW1hdGlvbkVuZFwiLE1vekFuaW1hdGlvbjpcIm1vekFuaW1hdGlvbkVuZFwiLE9BbmltYXRpb246XCJvQW5pbWF0aW9uRW5kXCIsbXNBbmltYXRpb246XCJNU0FuaW1hdGlvbkVuZFwifX0sbD1bXTthLmNhblVzZURPTSYmbigpO3ZhciB1PXthZGRFbmRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA9PT1sLmxlbmd0aD92b2lkIHdpbmRvdy5zZXRUaW1lb3V0KHQsMCk6dm9pZCBsLmZvckVhY2goZnVuY3Rpb24ocil7byhlLHIsdCl9KX0scmVtb3ZlRW5kRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihlLHQpezAhPT1sLmxlbmd0aCYmbC5mb3JFYWNoKGZ1bmN0aW9uKHIpe2koZSxyLHQpfSl9fTtlLmV4cG9ydHM9dX0sZnVuY3Rpb24oZSx0KXtcInVzZSBzdHJpY3RcIjt2YXIgcj0hKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cuZG9jdW1lbnR8fCF3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCksbj17Y2FuVXNlRE9NOnIsY2FuVXNlV29ya2VyczpcInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyLGNhblVzZUV2ZW50TGlzdGVuZXJzOnImJiEoIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyJiYhd2luZG93LmF0dGFjaEV2ZW50KSxjYW5Vc2VWaWV3cG9ydDpyJiYhIXdpbmRvdy5zY3JlZW4saXNJbldvcmtlcjohcn07ZS5leHBvcnRzPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2VbdC5zaG93TWV0aG9kXSh7ZHVyYXRpb246dC5zaG93RHVyYXRpb24sZWFzaW5nOnQuc2hvd0Vhc2luZ30pfXZhciBpPXIoNiksYT1uKGkpO2UuZXhwb3J0cz17Z2V0RGVmYXVsdFByb3BzOmZ1bmN0aW9uKCl7cmV0dXJue3N0eWxlOntkaXNwbGF5Olwibm9uZVwifSxzaG93TWV0aG9kOlwiZmFkZUluXCIsc2hvd0R1cmF0aW9uOjMwMCxzaG93RWFzaW5nOlwic3dpbmdcIixoaWRlTWV0aG9kOlwiZmFkZU91dFwiLGhpZGVEdXJhdGlvbjoxZTMsaGlkZUVhc2luZzpcInN3aW5nXCIsdGltZU91dDo1ZTMsZXh0ZW5kZWRUaW1lT3V0OjFlM319LGdldEluaXRpYWxTdGF0ZTpmdW5jdGlvbigpe3JldHVybntpbnRlcnZhbElkOm51bGwsaXNIaWRpbmc6ITF9fSxjb21wb25lbnREaWRNb3VudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7byh0aGlzLl9nZXRfJF9ub2RlKCksZSksMDxlLnRpbWVPdXQmJnRoaXMuX3NldF9pbnRlcnZhbF9pZChzZXRUaW1lb3V0KHRoaXMuaGlkZVRvYXN0LGUudGltZU91dCkpfSxoYW5kbGVNb3VzZUVudGVyOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuaW50ZXJ2YWxJZCksdGhpcy5fc2V0X2ludGVydmFsX2lkKG51bGwpLHRoaXMuX3NldF9pc19oaWRpbmcoITEpLG8odGhpcy5fZ2V0XyRfbm9kZSgpLnN0b3AoITAsITApLHRoaXMucHJvcHMpfSxoYW5kbGVNb3VzZUxlYXZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wczshdGhpcy5zdGF0ZS5pc0hpZGluZyYmKDA8ZS50aW1lT3V0fHwwPGUuZXh0ZW5kZWRUaW1lT3V0KSYmdGhpcy5fc2V0X2ludGVydmFsX2lkKHNldFRpbWVvdXQodGhpcy5oaWRlVG9hc3QsZS5leHRlbmRlZFRpbWVPdXQpKX0saGlkZVRvYXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3RhdGUscj10aGlzLnByb3BzO3QuaXNIaWRpbmd8fG51bGw9PXQuaW50ZXJ2YWxJZCYmIWV8fCh0aGlzLnNldFN0YXRlKHtpc0hpZGluZzohMH0pLHRoaXMuX2dldF8kX25vZGUoKVtyLmhpZGVNZXRob2RdKHtkdXJhdGlvbjpyLmhpZGVEdXJhdGlvbixlYXNpbmc6ci5oaWRlRWFzaW5nLGNvbXBsZXRlOnRoaXMuX2hhbmRsZV9yZW1vdmV9KSl9LF9nZXRfJF9ub2RlOmZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeShhW1wiZGVmYXVsdFwiXS5maW5kRE9NTm9kZSh0aGlzKSl9LF9zZXRfaW50ZXJ2YWxfaWQ6ZnVuY3Rpb24oZSl7dGhpcy5zZXRTdGF0ZSh7aW50ZXJ2YWxJZDplfSl9LF9zZXRfaXNfaGlkaW5nOmZ1bmN0aW9uKGUpe3RoaXMuc2V0U3RhdGUoe2lzSGlkaW5nOmV9KX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDMxKSxkPW4oYykscD1yKDQpLGY9bihwKSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuc3RhdGU9e2N1cnJlbnRQYWdlOnRoaXMucHJvcHMuY3VyclBhZ2Usc2l6ZVBlclBhZ2U6dGhpcy5wcm9wcy5zaXplUGVyUGFnZX19cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJjaGFuZ2VQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZT1lPT1mW1wiZGVmYXVsdFwiXS5QUkVfUEFHRT90aGlzLnN0YXRlLmN1cnJlbnRQYWdlLTE8MT8xOnRoaXMuc3RhdGUuY3VycmVudFBhZ2UtMTplPT1mW1wiZGVmYXVsdFwiXS5ORVhUX1BBR0U/dGhpcy5zdGF0ZS5jdXJyZW50UGFnZSsxPnRoaXMudG90YWxQYWdlcz90aGlzLnRvdGFsUGFnZXM6dGhpcy5zdGF0ZS5jdXJyZW50UGFnZSsxOmU9PWZbXCJkZWZhdWx0XCJdLkxBU1RfUEFHRT90aGlzLnRvdGFsUGFnZXM6ZT09ZltcImRlZmF1bHRcIl0uRklSU1RfUEFHRT8xOnBhcnNlSW50KGUpLGUhPXRoaXMuc3RhdGUuY3VycmVudFBhZ2UmJih0aGlzLnNldFN0YXRlKHtjdXJyZW50UGFnZTplfSksdGhpcy5wcm9wcy5jaGFuZ2VQYWdlKGUsdGhpcy5zdGF0ZS5zaXplUGVyUGFnZSkpfX0se2tleTpcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnByb3BzLnJlbW90ZSYmKGUuY3VyclBhZ2V8fGUuc2l6ZVBlclBhZ2UpJiZ0aGlzLnNldFN0YXRlKHtjdXJyZW50UGFnZTplLmN1cnJQYWdlLHNpemVQZXJQYWdlOmUuc2l6ZVBlclBhZ2V9KX19LHtrZXk6XCJjaGFuZ2VTaXplUGVyUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD1wYXJzZUludChlLmN1cnJlbnRUYXJnZXQudGV4dCk7dCE9dGhpcy5zdGF0ZS5zaXplUGVyUGFnZSYmKHRoaXMudG90YWxQYWdlcz1NYXRoLmNlaWwodGhpcy5wcm9wcy5kYXRhU2l6ZS90KSx0aGlzLnN0YXRlLmN1cnJlbnRQYWdlPnRoaXMudG90YWxQYWdlcyYmKHRoaXMuc3RhdGUuY3VycmVudFBhZ2U9dGhpcy50b3RhbFBhZ2VzKSx0aGlzLnNldFN0YXRlKHtzaXplUGVyUGFnZTp0LGN1cnJlbnRQYWdlOnRoaXMuc3RhdGUuY3VycmVudFBhZ2V9KSx0aGlzLnByb3BzLmNoYW5nZVBhZ2UodGhpcy5zdGF0ZS5jdXJyZW50UGFnZSx0KSx0aGlzLnByb3BzLm9uU2l6ZVBlclBhZ2VMaXN0JiZ0aGlzLnByb3BzLm9uU2l6ZVBlclBhZ2VMaXN0KHQpKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy50b3RhbFBhZ2VzPU1hdGguY2VpbCh0aGlzLnByb3BzLmRhdGFTaXplL3RoaXMuc3RhdGUuc2l6ZVBlclBhZ2UpO3ZhciB0PXRoaXMubWFrZVBhZ2UoKSxyPXtcImZsb2F0XCI6XCJyaWdodFwiLG1hcmdpblRvcDpcIjBweFwifSxuPXRoaXMucHJvcHMuc2l6ZVBlclBhZ2VMaXN0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImxpXCIse2tleTp0LHJvbGU6XCJwcmVzZW50YXRpb25cIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImFcIix7cm9sZTpcIm1lbnVpdGVtXCIsdGFiSW5kZXg6XCItMVwiLGhyZWY6XCIjXCIsb25DbGljazplLmNoYW5nZVNpemVQZXJQYWdlLmJpbmQoZSl9LHQpKX0pO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcInJvd1wiLHN0eWxlOnttYXJnaW5Ub3A6MTV9fSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbC1tZC02XCJ9LHRoaXMucHJvcHMuc2l6ZVBlclBhZ2VMaXN0Lmxlbmd0aD4xP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiZHJvcGRvd25cIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHtjbGFzc05hbWU6XCJidG4gYnRuLWRlZmF1bHQgZHJvcGRvd24tdG9nZ2xlXCIsdHlwZTpcImJ1dHRvblwiLGlkOlwicGFnZURyb3BEb3duXCIsXCJkYXRhLXRvZ2dsZVwiOlwiZHJvcGRvd25cIixcImFyaWEtZXhwYW5kZWRcIjpcInRydWVcIn0sdGhpcy5zdGF0ZS5zaXplUGVyUGFnZSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3BhblwiLG51bGwsXCIgXCIsdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInNwYW5cIix7Y2xhc3NOYW1lOlwiY2FyZXRcIn0pKSksdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInVsXCIse2NsYXNzTmFtZTpcImRyb3Bkb3duLW1lbnVcIixyb2xlOlwibWVudVwiLFwiYXJpYS1sYWJlbGxlZGJ5XCI6XCJwYWdlRHJvcERvd25cIn0sbikpOlwiXCIpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwiY29sLW1kLTZcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInVsXCIse2NsYXNzTmFtZTpcInBhZ2luYXRpb25cIixzdHlsZTpyfSx0KSkpfX0se2tleTpcIm1ha2VQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFBhZ2VzKCk7cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWU9PT10aGlzLnN0YXRlLmN1cnJlbnRQYWdlLHI9ITE7cmV0dXJuIDEhPXRoaXMuc3RhdGUuY3VycmVudFBhZ2V8fGUhPT1mW1wiZGVmYXVsdFwiXS5GSVJTVF9QQUdFJiZlIT09ZltcImRlZmF1bHRcIl0uUFJFX1BBR0V8fChyPSEwKSx0aGlzLnN0YXRlLmN1cnJlbnRQYWdlIT10aGlzLnRvdGFsUGFnZXN8fGUhPT1mW1wiZGVmYXVsdFwiXS5ORVhUX1BBR0UmJmUhPT1mW1wiZGVmYXVsdFwiXS5MQVNUX1BBR0V8fChyPSEwKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGRbXCJkZWZhdWx0XCJdLHtjaGFuZ2VQYWdlOnRoaXMuY2hhbmdlUGFnZS5iaW5kKHRoaXMpLGFjdGl2ZTp0LGRpc2FibGU6cixrZXk6ZX0sZSl9LHRoaXMpfX0se2tleTpcImdldFBhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0xLHQ9dGhpcy50b3RhbFBhZ2VzO2U9TWF0aC5tYXgodGhpcy5zdGF0ZS5jdXJyZW50UGFnZS1NYXRoLmZsb29yKHRoaXMucHJvcHMucGFnaW5hdGlvblNpemUvMiksMSksdD1lK3RoaXMucHJvcHMucGFnaW5hdGlvblNpemUtMSx0PnRoaXMudG90YWxQYWdlcyYmKHQ9dGhpcy50b3RhbFBhZ2VzLGU9dC10aGlzLnByb3BzLnBhZ2luYXRpb25TaXplKzEpO2Zvcih2YXIgcj1bZltcImRlZmF1bHRcIl0uRklSU1RfUEFHRSxmW1wiZGVmYXVsdFwiXS5QUkVfUEFHRV0sbj1lO3Q+PW47bisrKW4+MCYmci5wdXNoKG4pO3JldHVybiByLnB1c2goZltcImRlZmF1bHRcIl0uTkVYVF9QQUdFKSxyLnB1c2goZltcImRlZmF1bHRcIl0uTEFTVF9QQUdFKSxyfX0se2tleTpcImdldEN1cnJlbnRQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5jdXJyZW50UGFnZX19LHtrZXk6XCJnZXRTaXplUGVyUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGUuc2l6ZVBlclBhZ2V9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7aC5wcm9wVHlwZXM9e2N1cnJQYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5udW1iZXIsc2l6ZVBlclBhZ2U6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm51bWJlcixkYXRhU2l6ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyLGNoYW5nZVBhZ2U6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsc2l6ZVBlclBhZ2VMaXN0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxwYWdpbmF0aW9uU2l6ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMubnVtYmVyLHJlbW90ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxvblNpemVQZXJQYWdlTGlzdDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuY30saC5kZWZhdWx0UHJvcHM9e3NpemVQZXJQYWdlOmZbXCJkZWZhdWx0XCJdLlNJWkVfUEVSX1BBR0V9LHRbXCJkZWZhdWx0XCJdPWgsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDMpLGQ9bihjKSxwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpfXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwicGFnZUJ0bkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMucHJvcHMuY2hhbmdlUGFnZShlLmN1cnJlbnRUYXJnZXQudGV4dCl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oMCxkW1wiZGVmYXVsdFwiXSkoe2FjdGl2ZTp0aGlzLnByb3BzLmFjdGl2ZSxkaXNhYmxlZDp0aGlzLnByb3BzLmRpc2FibGV9KTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImxpXCIse2NsYXNzTmFtZTplfSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYVwiLHtocmVmOlwiI1wiLG9uQ2xpY2s6dGhpcy5wYWdlQnRuQ2xpY2suYmluZCh0aGlzKX0sdGhpcy5wcm9wcy5jaGlsZHJlbikpfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO3AucHJvcFR5cGVzPXtjaGFuZ2VQYWdlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLGFjdGl2ZTp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxkaXNhYmxlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sfSx0W1wiZGVmYXVsdFwiXT1wLGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cigzKSxkPW4oYykscD1yKDQpLGY9KG4ocCkscigxMykpLGg9bihmKSx2PXIoMTQpLHk9bih2KSxtPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLHMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMudGltZW91dGVDbGVhcj0wLHRoaXMuc3RhdGU9e2lzSW5zZXJ0Um93VHJpZ2dlcjohMCx2YWxpZGF0ZVN0YXRlOm51bGwsc2hha2VFZGl0b3I6ITF9fXJldHVybiBpKHQsZSksYSh0LFt7a2V5OlwiY29tcG9uZW50V2lsbFVubW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJUaW1lb3V0KCl9fSx7a2V5OlwiY2xlYXJUaW1lb3V0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBlLnRvU3RyaW5nKCl9LHR9KGZ1bmN0aW9uKCl7dGhpcy50aW1lb3V0ZUNsZWFyJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dGVDbGVhciksdGhpcy50aW1lb3V0ZUNsZWFyPTApfSl9LHtrZXk6XCJjaGVja0FuZFBhcnNlRm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGUsdCxyPXRoaXMsbj17fSxvPSEwLGk9e307cmV0dXJuIHRoaXMucHJvcHMuY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uKHIsYSl7aWYoci5hdXRvVmFsdWUpZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByLmF1dG9WYWx1ZT9yLmF1dG9WYWx1ZSgpOlwiYXV0b3ZhbHVlLVwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpO2Vsc2V7dmFyIHM9dGhpcy5yZWZzW3IuZmllbGQrYV07aWYoZT1zLnZhbHVlLHIuZWRpdGFibGUmJlwiY2hlY2tib3hcIj09ci5lZGl0YWJsZS50eXBlKXt2YXIgbD1zLnZhbHVlLnNwbGl0KFwiOlwiKTtlPXMuY2hlY2tlZD9sWzBdOmxbMV19ci5lZGl0YWJsZSYmci5lZGl0YWJsZS52YWxpZGF0b3ImJih0PXIuZWRpdGFibGUudmFsaWRhdG9yKGUpLHQhPT0hMCYmKG89ITEsaVtyLmZpZWxkXT10KSl9bltyLmZpZWxkXT1lfSx0aGlzKSxvP246KHIuY2xlYXJUaW1lb3V0KCksdGhpcy5zZXRTdGF0ZSh7dmFsaWRhdGVTdGF0ZTppLHNoYWtlRWRpdG9yOiEwfSksci5yZWZzLm5vdGlmaWVyLm5vdGljZShcImVycm9yXCIsXCJGb3JtIHZhbGlkYXRlIGVycm9ycywgcGxlYXNlIGNoZWNraW5nIVwiLFwiUHJlc3NlZCBFU0MgY2FuIGNhbmNlbFwiKSxyLnRpbWVvdXRlQ2xlYXI9c2V0VGltZW91dChmdW5jdGlvbigpe3Iuc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiExfSl9LDMwMCksbnVsbCl9fSx7a2V5OlwiaGFuZGxlU2F2ZUJ0bkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jaGVja0FuZFBhcnNlRm9ybSgpO2lmKHQpe3ZhciByPXRoaXMucHJvcHMub25BZGRSb3codCk7aWYocil7dmFyIG49dGhpcztuLnJlZnMubm90aWZpZXIubm90aWNlKFwiZXJyb3JcIixyLFwiUHJlc3NlZCBFU0MgY2FuIGNhbmNlbFwiKSxuLmNsZWFyVGltZW91dCgpLG4uc2V0U3RhdGUoe3NoYWtlRWRpdG9yOiEwLHZhbGlkYXRlU3RhdGU6XCJ0aGlzIGlzIGhhY2sgZm9yIHByZXZlbnQgYm9vdHN0cmFwIG1vZGFsIGhpZGVcIn0pLG4udGltZW91dGVDbGVhcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5zZXRTdGF0ZSh7c2hha2VFZGl0b3I6ITF9KX0sMzAwKX1lbHNlIHRoaXMuc2V0U3RhdGUoe3ZhbGlkYXRlU3RhdGU6bnVsbCxzaGFrZUVkaXRvcjohMX0pLHRoaXMucmVmcy5mb3JtLnJlc2V0KCl9fX0se2tleTpcImhhbmRsZURyb3BSb3dCdG5DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMucHJvcHMub25Ecm9wUm93KCl9fSx7a2V5OlwiaGFuZGxlQ2xvc2VCdG5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJlZnMud2FybmluZy5zdHlsZS5kaXNwbGF5PVwibm9uZVwifX0se2tleTpcImhhbmRsZUtleVVwXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5wcm9wcy5vblNlYXJjaChlLmN1cnJlbnRUYXJnZXQudmFsdWUpfX0se2tleTpcImhhbmRsZUV4cG9ydENTVlwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wcm9wcy5vbkV4cG9ydENTVigpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9XCJicy10YWJsZS1tb2RhbC1zbVwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpLHQ9dGhpcy5wcm9wcy5lbmFibGVJbnNlcnQ/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLHt0eXBlOlwiYnV0dG9uXCIsb25DbGljazp0aGlzLnByb3BzLm9uQWRkUm93QmVnaW4sY2xhc3NOYW1lOlwiYnRuIGJ0bi1pbmZvXCIsXCJkYXRhLXRvZ2dsZVwiOlwibW9kYWxcIixcImRhdGEtdGFyZ2V0XCI6XCIuXCIrZX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCJ9KSxcIiBOZXdcIik6bnVsbCxyPXRoaXMucHJvcHMuZW5hYmxlRGVsZXRlP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7dHlwZTpcImJ1dHRvblwiLGNsYXNzTmFtZTpcImJ0biBidG4td2FybmluZ1wiLFwiZGF0YS10b2dnbGVcIjpcInRvb2x0aXBcIixcImRhdGEtcGxhY2VtZW50XCI6XCJyaWdodFwiLHRpdGxlOlwiRHJvcCBzZWxlY3RlZCByb3dcIixvbkNsaWNrOnRoaXMuaGFuZGxlRHJvcFJvd0J0bkNsaWNrLmJpbmQodGhpcyl9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpXCIse2NsYXNzTmFtZTpcImdseXBoaWNvbiBnbHlwaGljb24tdHJhc2hcIn0pLFwiIERlbGV0ZVwiKTpudWxsLG49dGhpcy5wcm9wcy5lbmFibGVTZWFyY2g/dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXAtc21cIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlucHV0XCIse2NsYXNzTmFtZTpcImZvcm0tY29udHJvbFwiLHR5cGU6XCJ0ZXh0XCIscGxhY2Vob2xkZXI6dGhpcy5wcm9wcy5zZWFyY2hQbGFjZWhvbGRlcj90aGlzLnByb3BzLnNlYXJjaFBsYWNlaG9sZGVyOlwiU2VhcmNoXCIsb25LZXlVcDp0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcyl9KSk6bnVsbCxvPXRoaXMucHJvcHMuZW5hYmxlSW5zZXJ0P3RoaXMucmVuZGVySW5zZXJ0Um93TW9kYWwoZSk6bnVsbCxpPXRoaXMucHJvcHMuZW5hYmxlRXhwb3J0Q1NWP3VbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7dHlwZTpcImJ1dHRvblwiLGNsYXNzTmFtZTpcImJ0biBidG4tc3VjY2Vzc1wiLG9uQ2xpY2s6dGhpcy5oYW5kbGVFeHBvcnRDU1YuYmluZCh0aGlzKX0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImlcIix7Y2xhc3NOYW1lOlwiZ2x5cGhpY29uIGdseXBoaWNvbi1leHBvcnRcIn0pLFwiIEV4cG9ydCB0byBDU1ZcIik6bnVsbDtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJyb3dcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJjb2wteHMtOVwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImJ0bi1ncm91cCBidG4tZ3JvdXAtc21cIixyb2xlOlwiZ3JvdXBcIn0saSx0LHIpKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImNvbC14cy0zXCJ9LG4pLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoeVtcImRlZmF1bHRcIl0se3JlZjpcIm5vdGlmaWVyXCJ9KSxvKX19LHtrZXk6XCJyZW5kZXJJbnNlcnRSb3dNb2RhbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc3RhdGUudmFsaWRhdGVTdGF0ZXx8e30scj10aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uKGUscil7dmFyIG49ZS5lZGl0YWJsZSxvPWUuZm9ybWF0LGk9e3JlZjplLmZpZWxkK3IscGxhY2Vob2xkZXI6bi5wbGFjZWhvbGRlcj9uLnBsYWNlaG9sZGVyOmUubmFtZX07aWYoZS5hdXRvVmFsdWUpcmV0dXJuIG51bGw7dmFyIGE9dFtlLmZpZWxkXT91W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtjbGFzc05hbWU6XCJoZWxwLWJsb2NrIGJnLWRhbmdlclwifSx0W2UuZmllbGRdKTpudWxsO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcImZvcm0tZ3JvdXBcIixrZXk6ZS5maWVsZH0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImxhYmVsXCIsbnVsbCxlLm5hbWUpLCgwLGhbXCJkZWZhdWx0XCJdKShuLGksbyxcIlwiKSxhKX0pLG49KDAsZFtcImRlZmF1bHRcIl0pKFwibW9kYWxcIixcImZhZGVcIixlLHtcImluXCI6dGhpcy5zdGF0ZS5zaGFrZUVkaXRvcnx8dGhpcy5zdGF0ZS52YWxpZGF0ZVN0YXRlfSksbz0oMCxkW1wiZGVmYXVsdFwiXSkoXCJtb2RhbC1kaWFsb2dcIixcIm1vZGFsLXNtXCIse2FuaW1hdGVkOnRoaXMuc3RhdGUuc2hha2VFZGl0b3Isc2hha2U6dGhpcy5zdGF0ZS5zaGFrZUVkaXRvcn0pO3JldHVybiB1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3JlZjpcIm1vZGFsXCIsY2xhc3NOYW1lOm4sdGFiSW5kZXg6XCItMVwiLHJvbGU6XCJkaWFsb2dcIn0sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6b30sdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJtb2RhbC1jb250ZW50XCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwibW9kYWwtaGVhZGVyXCJ9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIix7dHlwZTpcImJ1dHRvblwiLGNsYXNzTmFtZTpcImNsb3NlXCIsXCJkYXRhLWRpc21pc3NcIjpcIm1vZGFsXCIsXCJhcmlhLWxhYmVsXCI6XCJDbG9zZVwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCJ9LFwiw5dcIikpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJoNFwiLHtjbGFzc05hbWU6XCJtb2RhbC10aXRsZVwifSxcIk5ldyBSZWNvcmRcIikpLHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwibW9kYWwtYm9keVwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLHtyZWY6XCJmb3JtXCJ9LHIpKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIm1vZGFsLWZvb3RlclwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse3R5cGU6XCJidXR0b25cIixjbGFzc05hbWU6XCJidG4gYnRuLWRlZmF1bHRcIixcImRhdGEtZGlzbWlzc1wiOlwibW9kYWxcIn0sXCJDbG9zZVwiKSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIse3R5cGU6XCJidXR0b25cIixjbGFzc05hbWU6XCJidG4gYnRuLWluZm9cIixvbkNsaWNrOnRoaXMuaGFuZGxlU2F2ZUJ0bkNsaWNrLmJpbmQodGhpcyl9LFwiU2F2ZVwiKSkpKSl9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7bS5wcm9wVHlwZXM9e29uQWRkUm93OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLG9uRHJvcFJvdzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxlbmFibGVJbnNlcnQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsZW5hYmxlRGVsZXRlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGVuYWJsZVNlYXJjaDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuYm9vbCxjb2x1bW5zOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxzZWFyY2hQbGFjZWhvbGRlcjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nfSxtLmRlZmF1bHRQcm9wcz17ZW5hYmxlSW5zZXJ0OiExLGVuYWJsZURlbGV0ZTohMSxlbmFibGVTZWFyY2g6ITF9LHRbXCJkZWZhdWx0XCJdPW0sZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpLHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj0hMDtuOyl7dmFyIG89ZSxpPXQsYT1yO249ITEsbnVsbD09PW8mJihvPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpO2lmKHZvaWQgMCE9PXMpe2lmKFwidmFsdWVcImluIHMpcmV0dXJuIHMudmFsdWU7dmFyIGw9cy5nZXQ7aWYodm9pZCAwPT09bClyZXR1cm47cmV0dXJuIGwuY2FsbChhKX12YXIgdT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7aWYobnVsbD09PXUpcmV0dXJuO2U9dSx0PWkscj1hLG49ITAscz11PXZvaWQgMH19LGw9cigyKSx1PW4obCksYz1yKDQpLGQ9bihjKSxwPXIoMyksZj1uKHApLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtvKHRoaXMsdCkscyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLFwiY29uc3RydWN0b3JcIix0aGlzKS5jYWxsKHRoaXMsZSksdGhpcy5maWx0ZXJPYmo9e319cmV0dXJuIGkodCxlKSxhKHQsW3trZXk6XCJoYW5kbGVLZXlVcFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1wiXCI9PT1lLmN1cnJlbnRUYXJnZXQudmFsdWUudHJpbSgpP2RlbGV0ZSB0aGlzLmZpbHRlck9ialtlLmN1cnJlbnRUYXJnZXQubmFtZV06dGhpcy5maWx0ZXJPYmpbZS5jdXJyZW50VGFyZ2V0Lm5hbWVdPWUuY3VycmVudFRhcmdldC52YWx1ZSx0aGlzLnByb3BzLm9uRmlsdGVyKHRoaXMuZmlsdGVyT2JqKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSgwLGZbXCJkZWZhdWx0XCJdKShcInRhYmxlXCIse1widGFibGUtc3RyaXBlZFwiOnRoaXMucHJvcHMuc3RyaXBlZCxcInRhYmxlLWNvbmRlbnNlZFwiOnRoaXMucHJvcHMuY29uZGVuc2VkfSksdD1udWxsO2lmKHRoaXMucHJvcHMucm93U2VsZWN0VHlwZT09ZFtcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9TSU5HTEV8fHRoaXMucHJvcHMucm93U2VsZWN0VHlwZT09ZFtcImRlZmF1bHRcIl0uUk9XX1NFTEVDVF9NVUxUSSl7dmFyIHI9e3dpZHRoOjM1LHBhZGRpbmdMZWZ0OjAscGFkZGluZ1JpZ2h0OjB9O3Q9dVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRoXCIse3N0eWxlOnIsa2V5Oi0xfSxcIkZpbHRlclwiKX12YXIgbj10aGlzLnByb3BzLmNvbHVtbnMubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PXtkaXNwbGF5OmUuaGlkZGVuP1wibm9uZVwiOm51bGwsd2lkdGg6ZS53aWR0aH07cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtrZXk6ZS5uYW1lLHN0eWxlOnR9LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7Y2xhc3NOYW1lOlwidGgtaW5uZXIgdGFibGUtaGVhZGVyLWNvbHVtblwifSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIix7c2l6ZTpcIjEwXCIsdHlwZTpcInRleHRcIixwbGFjZWhvbGRlcjplLm5hbWUsbmFtZTplLm5hbWUsb25LZXlVcDp0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcyl9KSkpfSx0aGlzKTtyZXR1cm4gdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRhYmxlXCIse2NsYXNzTmFtZTplLHN0eWxlOnttYXJnaW5Ub3A6NX19LHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiLG51bGwsdVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRyXCIse3N0eWxlOntib3JkZXJCb3R0b21TdHlsZTpcImhpZGRlblwifX0sdCxuKSkpfX1dKSx0fSh1W1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO2gucHJvcFR5cGVzPXtjb2x1bW5zOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5hcnJheSxyb3dTZWxlY3RUeXBlOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsb25GaWx0ZXI6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmN9LHRbXCJkZWZhdWx0XCJdPWgsZS5leHBvcnRzPXRbXCJkZWZhdWx0XCJdfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGkoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1mdW5jdGlvbiBhKGUsdCxyLG4pe3JldHVybiByPXIudG9Mb3dlckNhc2UoKSxlLnNvcnQoZnVuY3Rpb24oZSxvKXtyZXR1cm4gbj9uKGUsbyxyKTpyPT1jW1wiZGVmYXVsdFwiXS5TT1JUX0RFU0M/ZVt0XT5vW3RdPy0xOmVbdF08b1t0XT8xOjA6ZVt0XTxvW3RdPy0xOmVbdF0+b1t0XT8xOjB9KSxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCksbD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPSEwO247KXt2YXIgbz1lLGk9dCxhPXI7bj0hMSxudWxsPT09byYmKG89RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSk7aWYodm9pZCAwIT09cyl7aWYoXCJ2YWx1ZVwiaW4gcylyZXR1cm4gcy52YWx1ZTt2YXIgbD1zLmdldDtpZih2b2lkIDA9PT1sKXJldHVybjtyZXR1cm4gbC5jYWxsKGEpfXZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtpZihudWxsPT09dSlyZXR1cm47ZT11LHQ9aSxyPWEsbj0hMCxzPXU9dm9pZCAwfX0sdT1yKDQpLGM9bih1KSxkPXIoMzUpLkV2ZW50RW1pdHRlcixwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7byh0aGlzLHQpLGwoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSxcImNvbnN0cnVjdG9yXCIsdGhpcykuY2FsbCh0aGlzLGUpLHRoaXMuZGF0YT1lfXJldHVybiBpKHQsZSkscyh0LFt7a2V5Olwic2V0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcImNoYW5nZVwiLGUpfX0se2tleTpcImNsZWFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRhdGE9bnVsbH19LHtrZXk6XCJnZXREYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX1dKSx0fShkKTt0LlRhYmxlRGF0YVNldD1wO3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSksdGhpcy5kYXRhPXQsdGhpcy5jdXN0b21Tb3J0RnVuY01hcD1udWxsLHRoaXMuZmlsdGVyZWREYXRhPW51bGwsdGhpcy5pc09uRmlsdGVyPSExLHRoaXMuZmlsdGVyT2JqPW51bGwsdGhpcy5zZWFyY2hUZXh0PW51bGwsdGhpcy5zb3J0T2JqPW51bGwsdGhpcy5wYWdlT2JqPXt9LHRoaXMuc2VsZWN0ZWQ9W10sdGhpcy5tdWx0aUNvbHVtblNlYXJjaD0hMSx0aGlzLnJlbW90ZT0hMX1yZXR1cm4gcyhlLFt7a2V5Olwic2V0UHJvcHNcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmtleUZpZWxkPWUua2V5RmllbGQsdGhpcy5lbmFibGVQYWdpbmF0aW9uPWUuaXNQYWdpbmF0aW9uLHRoaXMuY3VzdG9tU29ydEZ1bmNNYXA9ZS5jdXN0b21Tb3J0RnVuY01hcCx0aGlzLnJlbW90ZT1lLnJlbW90ZSx0aGlzLm11bHRpQ29sdW1uU2VhcmNoPWUubXVsdGlDb2x1bW5TZWFyY2h9fSx7a2V5Olwic2V0RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZGF0YT1lLHRoaXMuaXNPbkZpbHRlciYmKG51bGwhPT10aGlzLmZpbHRlck9iaiYmdGhpcy5maWx0ZXIodGhpcy5maWx0ZXJPYmopLG51bGwhPT10aGlzLnNlYXJjaFRleHQmJnRoaXMuc2VhcmNoKHRoaXMuc2VhcmNoVGV4dCkpLHRoaXMuc29ydE9iaiYmdGhpcy5zb3J0KHRoaXMuc29ydE9iai5vcmRlcix0aGlzLnNvcnRPYmouc29ydEZpZWxkKX19LHtrZXk6XCJzZXRTZWxlY3RlZFJvd0tleVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuc2VsZWN0ZWQ9ZX19LHtrZXk6XCJnZXRTZWxlY3RlZFJvd0tleXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkfX0se2tleTpcImdldEN1cnJlbnREaXNwbGF5RGF0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNPbkZpbHRlcj90aGlzLmZpbHRlcmVkRGF0YTp0aGlzLmRhdGF9fSx7a2V5Olwic29ydFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5zb3J0T2JqPXtvcmRlcjplLHNvcnRGaWVsZDp0fTt2YXIgcj10aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpLG49dGhpcy5jdXN0b21Tb3J0RnVuY01hcFt0XTtyZXR1cm4gcj1hKHIsdCxlLG4pLHRoaXN9fSx7a2V5OlwicGFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucGFnZU9iai5lbmQ9ZSp0LTEsdGhpcy5wYWdlT2JqLnN0YXJ0PXRoaXMucGFnZU9iai5lbmQtKHQtMSksdGhpc319LHtrZXk6XCJlZGl0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCksbz12b2lkIDA7cmV0dXJuIHRoaXMuZW5hYmxlUGFnaW5hdGlvbj8oblt0aGlzLnBhZ2VPYmouc3RhcnQrdF1bcl09ZSxvPW5bdGhpcy5wYWdlT2JqLnN0YXJ0K3RdW3RoaXMua2V5RmllbGRdKTooblt0XVtyXT1lLG89blt0XVt0aGlzLmtleUZpZWxkXSksdGhpcy5pc09uRmlsdGVyJiZ0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbih0KXt0W3RoaXMua2V5RmllbGRdPT09byYmKHRbcl09ZSl9LHRoaXMpLHRoaXN9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWVbdGhpcy5rZXlGaWVsZF18fFwiXCI9PT1lW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkpdGhyb3cgdGhpcy5rZXlGaWVsZCtcIiBjYW4ndCBiZSBlbXB0eSB2YWx1ZS5cIjt2YXIgdD10aGlzLmdldEN1cnJlbnREaXNwbGF5RGF0YSgpO3QuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0W3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCk9PT1lW3RoaXMua2V5RmllbGRdLnRvU3RyaW5nKCkpdGhyb3cgdGhpcy5rZXlGaWVsZCtcIiBcIitlW3RoaXMua2V5RmllbGRdK1wiIGFscmVhZHkgZXhpc3RzXCJ9LHRoaXMpLHQucHVzaChlKSx0aGlzLmlzT25GaWx0ZXImJnRoaXMuZGF0YS5wdXNoKGUpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCkscj10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4tMT09ZS5pbmRleE9mKHRbdGhpcy5rZXlGaWVsZF0pfSx0aGlzKTt0aGlzLmlzT25GaWx0ZXI/KHRoaXMuZGF0YT10aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybi0xPT1lLmluZGV4T2YodFt0aGlzLmtleUZpZWxkXSl9LHRoaXMpLHRoaXMuZmlsdGVyZWREYXRhPXIpOnRoaXMuZGF0YT1yfX0se2tleTpcImZpbHRlclwiLHZhbHVlOmZ1bmN0aW9uKGUpezA9PU9iamVjdC5rZXlzKGUpLmxlbmd0aD8odGhpcy5maWx0ZXJlZERhdGE9bnVsbCx0aGlzLmlzT25GaWx0ZXI9ITEsdGhpcy5maWx0ZXJPYmo9bnVsbCk6KHRoaXMuZmlsdGVyT2JqPWUsdGhpcy5maWx0ZXJlZERhdGE9dGhpcy5kYXRhLmZpbHRlcihmdW5jdGlvbih0KXt2YXIgcj0hMDtmb3IodmFyIG4gaW4gZSlpZigtMT09dFtuXS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihlW25dLnRvTG93ZXJDYXNlKCkpKXtyPSExO2JyZWFrfXJldHVybiByfSksdGhpcy5pc09uRmlsdGVyPSEwKTtcbn19LHtrZXk6XCJzZWFyY2hcIix2YWx1ZTpmdW5jdGlvbihlKXtpZihcIlwiPT09ZS50cmltKCkpdGhpcy5maWx0ZXJlZERhdGE9bnVsbCx0aGlzLmlzT25GaWx0ZXI9ITEsdGhpcy5zZWFyY2hUZXh0PW51bGw7ZWxzZXt0aGlzLnNlYXJjaFRleHQ9ZTt2YXIgdD1bXTt0aGlzLmZpbHRlcmVkRGF0YT10aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKHIpe3ZhciBuPSExO3RoaXMubXVsdGlDb2x1bW5TZWFyY2g/dD1lLnNwbGl0KFwiIFwiKTp0LnB1c2goZSk7Zm9yKHZhciBvIGluIHIpaWYocltvXSYmKHQuZm9yRWFjaChmdW5jdGlvbihlKXstMSE9PXJbb10udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZS50b0xvd2VyQ2FzZSgpKSYmKG49ITApfSksbikpYnJlYWs7cmV0dXJuIG59LHRoaXMpLHRoaXMuaXNPbkZpbHRlcj0hMH19fSx7a2V5OlwiZ2V0RGF0YUlnbm9yaW5nUGFnaW5hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDdXJyZW50RGlzcGxheURhdGEoKTtyZXR1cm4gZX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCk7aWYoMD09ZS5sZW5ndGgpcmV0dXJuIGU7aWYodGhpcy5yZW1vdGV8fCF0aGlzLmVuYWJsZVBhZ2luYXRpb24pcmV0dXJuIGU7Zm9yKHZhciB0PVtdLHI9dGhpcy5wYWdlT2JqLnN0YXJ0O3I8PXRoaXMucGFnZU9iai5lbmQmJih0LnB1c2goZVtyXSkscisxIT1lLmxlbmd0aCk7cisrKTtyZXR1cm4gdH19LHtrZXk6XCJnZXRLZXlGaWVsZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5RmllbGR9fSx7a2V5OlwiZ2V0RGF0YU51bVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q3VycmVudERpc3BsYXlEYXRhKCkubGVuZ3RofX0se2tleTpcImlzQ2hhbmdlZFBhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhZ2VPYmouc3RhcnQmJnRoaXMucGFnZU9iai5lbmQ/ITA6ITF9fSx7a2V5OlwiZ2V0QWxsUm93a2V5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZVt0aGlzLmtleUZpZWxkXX0sdGhpcyl9fV0pLGV9KCk7dC5UYWJsZURhdGFTdG9yZT1mfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9ZnVuY3Rpb24gbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gaShlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWV9ZnVuY3Rpb24gYShlKXtyZXR1cm4gdm9pZCAwPT09ZX1lLmV4cG9ydHM9cixyLkV2ZW50RW1pdHRlcj1yLHIucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLHIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwLHIuZGVmYXVsdE1heExpc3RlbmVycz0xMCxyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7aWYoIW8oZSl8fDA+ZXx8aXNOYU4oZSkpdGhyb3cgVHlwZUVycm9yKFwibiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0LHIsbyxzLGwsdTtpZih0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLFwiZXJyb3JcIj09PWUmJighdGhpcy5fZXZlbnRzLmVycm9yfHxpKHRoaXMuX2V2ZW50cy5lcnJvcikmJiF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSl7aWYodD1hcmd1bWVudHNbMV0sdCBpbnN0YW5jZW9mIEVycm9yKXRocm93IHQ7dGhyb3cgVHlwZUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LicpfWlmKHI9dGhpcy5fZXZlbnRzW2VdLGEocikpcmV0dXJuITE7aWYobihyKSlzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAxOnIuY2FsbCh0aGlzKTticmVhaztjYXNlIDI6ci5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6ci5jYWxsKHRoaXMsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7YnJlYWs7ZGVmYXVsdDpzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxyLmFwcGx5KHRoaXMscyl9ZWxzZSBpZihpKHIpKWZvcihzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSx1PXIuc2xpY2UoKSxvPXUubGVuZ3RoLGw9MDtvPmw7bCsrKXVbbF0uYXBwbHkodGhpcyxzKTtyZXR1cm4hMH0sci5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbztpZighbih0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyJiZ0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLGUsbih0Lmxpc3RlbmVyKT90Lmxpc3RlbmVyOnQpLHRoaXMuX2V2ZW50c1tlXT9pKHRoaXMuX2V2ZW50c1tlXSk/dGhpcy5fZXZlbnRzW2VdLnB1c2godCk6dGhpcy5fZXZlbnRzW2VdPVt0aGlzLl9ldmVudHNbZV0sdF06dGhpcy5fZXZlbnRzW2VdPXQsaSh0aGlzLl9ldmVudHNbZV0pJiYhdGhpcy5fZXZlbnRzW2VdLndhcm5lZCYmKG89YSh0aGlzLl9tYXhMaXN0ZW5lcnMpP3IuZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnMsbyYmbz4wJiZ0aGlzLl9ldmVudHNbZV0ubGVuZ3RoPm8mJih0aGlzLl9ldmVudHNbZV0ud2FybmVkPSEwLGNvbnNvbGUuZXJyb3IoXCIobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LlwiLHRoaXMuX2V2ZW50c1tlXS5sZW5ndGgpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUudHJhY2UmJmNvbnNvbGUudHJhY2UoKSkpLHRoaXN9LHIucHJvdG90eXBlLm9uPXIucHJvdG90eXBlLmFkZExpc3RlbmVyLHIucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcihlLHIpLG98fChvPSEwLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1pZighbih0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIG89ITE7cmV0dXJuIHIubGlzdGVuZXI9dCx0aGlzLm9uKGUsciksdGhpc30sci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcixvLGEscztpZighbih0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoIXRoaXMuX2V2ZW50c3x8IXRoaXMuX2V2ZW50c1tlXSlyZXR1cm4gdGhpcztpZihyPXRoaXMuX2V2ZW50c1tlXSxhPXIubGVuZ3RoLG89LTEscj09PXR8fG4oci5saXN0ZW5lcikmJnIubGlzdGVuZXI9PT10KWRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsdCk7ZWxzZSBpZihpKHIpKXtmb3Iocz1hO3MtLSA+MDspaWYocltzXT09PXR8fHJbc10ubGlzdGVuZXImJnJbc10ubGlzdGVuZXI9PT10KXtvPXM7YnJlYWt9aWYoMD5vKXJldHVybiB0aGlzOzE9PT1yLmxlbmd0aD8oci5sZW5ndGg9MCxkZWxldGUgdGhpcy5fZXZlbnRzW2VdKTpyLnNwbGljZShvLDEpLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHQpfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQscjtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO2lmKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2V2ZW50cz17fTp0aGlzLl9ldmVudHNbZV0mJmRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHQgaW4gdGhpcy5fZXZlbnRzKVwicmVtb3ZlTGlzdGVuZXJcIiE9PXQmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHQpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz17fSx0aGlzfWlmKHI9dGhpcy5fZXZlbnRzW2VdLG4ocikpdGhpcy5yZW1vdmVMaXN0ZW5lcihlLHIpO2Vsc2UgaWYocilmb3IoO3IubGVuZ3RoOyl0aGlzLnJlbW92ZUxpc3RlbmVyKGUscltyLmxlbmd0aC0xXSk7cmV0dXJuIGRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpc30sci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW2VdP24odGhpcy5fZXZlbnRzW2VdKT9bdGhpcy5fZXZlbnRzW2VdXTp0aGlzLl9ldmVudHNbZV0uc2xpY2UoKTpbXX0sci5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXtpZih0aGlzLl9ldmVudHMpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZihuKHQpKXJldHVybiAxO2lmKHQpcmV0dXJuIHQubGVuZ3RofXJldHVybiAwfSxyLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saXN0ZW5lckNvdW50KHQpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSx0KXt2YXIgcj1cIlwiO3JldHVybiAwPT09ZS5sZW5ndGg/cjoocis9dC5qb2luKFwiLFwiKStcIlxcblwiLGUubWFwKGZ1bmN0aW9uKGUpe3QubWFwKGZ1bmN0aW9uKHQpe3ZhciBuPWVbdF0/J1wiJytlW3RdKydcIic6XCJcIjtyKz1uK1wiLFwifSkscis9XCJcXG5cIn0pLHIpfWlmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpdmFyIG89cigzNyksaT1vLnNhdmVBczt2YXIgYT1mdW5jdGlvbihlLHQscil7dmFyIG89bihlLHQpO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJmkobmV3IEJsb2IoW29dLHt0eXBlOlwidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04XCJ9KSxyfHxcInNwcmVhZHNoZWV0LmNzdlwiKX07dFtcImRlZmF1bHRcIl09YSxlLmV4cG9ydHM9dFtcImRlZmF1bHRcIl19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGk9aXx8ZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIG5hdmlnYXRvcnx8IS9NU0lFIFsxLTldXFwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXt2YXIgdD1lLmRvY3VtZW50LHI9ZnVuY3Rpb24oKXtyZXR1cm4gZS5VUkx8fGUud2Via2l0VVJMfHxlfSxuPXQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiYVwiKSxvPVwiZG93bmxvYWRcImluIG4saT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgTW91c2VFdmVudChcImNsaWNrXCIpO2UuZGlzcGF0Y2hFdmVudCh0KX0sYT0vVmVyc2lvblxcL1tcXGRcXC5dKy4qU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHM9ZS53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSxsPWUucmVxdWVzdEZpbGVTeXN0ZW18fHN8fGUubW96UmVxdWVzdEZpbGVTeXN0ZW0sdT1mdW5jdGlvbih0KXsoZS5zZXRJbW1lZGlhdGV8fGUuc2V0VGltZW91dCkoZnVuY3Rpb24oKXt0aHJvdyB0fSwwKX0sYz1cImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLGQ9MCxwPTUwMCxmPWZ1bmN0aW9uKHQpe3ZhciBuPWZ1bmN0aW9uKCl7XCJzdHJpbmdcIj09dHlwZW9mIHQ/cigpLnJldm9rZU9iamVjdFVSTCh0KTp0LnJlbW92ZSgpfTtlLmNocm9tZT9uKCk6c2V0VGltZW91dChuLHApfSxoPWZ1bmN0aW9uKGUsdCxyKXt0PVtdLmNvbmNhdCh0KTtmb3IodmFyIG49dC5sZW5ndGg7bi0tOyl7dmFyIG89ZVtcIm9uXCIrdFtuXV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbyl0cnl7by5jYWxsKGUscnx8ZSl9Y2F0Y2goaSl7dShpKX19fSx2PWZ1bmN0aW9uKGUpe3JldHVybi9eXFxzKig/OnRleHRcXC9cXFMqfGFwcGxpY2F0aW9uXFwveG1sfFxcUypcXC9cXFMqXFwreG1sKVxccyo7LipjaGFyc2V0XFxzKj1cXHMqdXRmLTgvaS50ZXN0KGUudHlwZSk/bmV3IEJsb2IoW1wiXFx1ZmVmZlwiLGVdLHt0eXBlOmUudHlwZX0pOmV9LHk9ZnVuY3Rpb24odCx1LHApe3B8fCh0PXYodCkpO3ZhciB5LG0sZyxiPXRoaXMsdz10LnR5cGUsRT0hMSxfPWZ1bmN0aW9uKCl7aChiLFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSl9LFA9ZnVuY3Rpb24oKXtpZihtJiZhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgRmlsZVJlYWRlcil7dmFyIG49bmV3IEZpbGVSZWFkZXI7cmV0dXJuIG4ub25sb2FkZW5kPWZ1bmN0aW9uKCl7dmFyIGU9bi5yZXN1bHQ7bS5sb2NhdGlvbi5ocmVmPVwiZGF0YTphdHRhY2htZW50L2ZpbGVcIitlLnNsaWNlKGUuc2VhcmNoKC9bLDtdLykpLGIucmVhZHlTdGF0ZT1iLkRPTkUsXygpfSxuLnJlYWRBc0RhdGFVUkwodCksdm9pZChiLnJlYWR5U3RhdGU9Yi5JTklUKX1pZigoRXx8IXkpJiYoeT1yKCkuY3JlYXRlT2JqZWN0VVJMKHQpKSxtKW0ubG9jYXRpb24uaHJlZj15O2Vsc2V7dmFyIG89ZS5vcGVuKHksXCJfYmxhbmtcIik7dm9pZCAwPT1vJiZhJiYoZS5sb2NhdGlvbi5ocmVmPXkpfWIucmVhZHlTdGF0ZT1iLkRPTkUsXygpLGYoeSl9LFQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGIucmVhZHlTdGF0ZSE9PWIuRE9ORT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSxTPXtjcmVhdGU6ITAsZXhjbHVzaXZlOiExfTtyZXR1cm4gYi5yZWFkeVN0YXRlPWIuSU5JVCx1fHwodT1cImRvd25sb2FkXCIpLG8/KHk9cigpLmNyZWF0ZU9iamVjdFVSTCh0KSxuLmhyZWY9eSxuLmRvd25sb2FkPXUsdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aShuKSxfKCksZih5KSxiLnJlYWR5U3RhdGU9Yi5ET05FfSkpOihlLmNocm9tZSYmdyYmdyE9PWMmJihnPXQuc2xpY2V8fHQud2Via2l0U2xpY2UsdD1nLmNhbGwodCwwLHQuc2l6ZSxjKSxFPSEwKSxzJiZcImRvd25sb2FkXCIhPT11JiYodSs9XCIuZG93bmxvYWRcIiksKHc9PT1jfHxzKSYmKG09ZSksbD8oZCs9dC5zaXplLHZvaWQgbChlLlRFTVBPUkFSWSxkLFQoZnVuY3Rpb24oZSl7ZS5yb290LmdldERpcmVjdG9yeShcInNhdmVkXCIsUyxUKGZ1bmN0aW9uKGUpe3ZhciByPWZ1bmN0aW9uKCl7ZS5nZXRGaWxlKHUsUyxUKGZ1bmN0aW9uKGUpe2UuY3JlYXRlV3JpdGVyKFQoZnVuY3Rpb24ocil7ci5vbndyaXRlZW5kPWZ1bmN0aW9uKHQpe20ubG9jYXRpb24uaHJlZj1lLnRvVVJMKCksYi5yZWFkeVN0YXRlPWIuRE9ORSxoKGIsXCJ3cml0ZWVuZFwiLHQpLGYoZSl9LHIub25lcnJvcj1mdW5jdGlvbigpe3ZhciBlPXIuZXJyb3I7ZS5jb2RlIT09ZS5BQk9SVF9FUlImJlAoKX0sXCJ3cml0ZXN0YXJ0IHByb2dyZXNzIHdyaXRlIGFib3J0XCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7cltcIm9uXCIrZV09YltcIm9uXCIrZV19KSxyLndyaXRlKHQpLGIuYWJvcnQ9ZnVuY3Rpb24oKXtyLmFib3J0KCksYi5yZWFkeVN0YXRlPWIuRE9ORX0sYi5yZWFkeVN0YXRlPWIuV1JJVElOR30pLFApfSksUCl9O2UuZ2V0RmlsZSh1LHtjcmVhdGU6ITF9LFQoZnVuY3Rpb24oZSl7ZS5yZW1vdmUoKSxyKCl9KSxUKGZ1bmN0aW9uKGUpe2UuY29kZT09PWUuTk9UX0ZPVU5EX0VSUj9yKCk6UCgpfSkpfSksUCl9KSxQKSk6dm9pZCBQKCkpfSxtPXkucHJvdG90eXBlLGc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgeShlLHQscil9O3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iP2Z1bmN0aW9uKGUsdCxyKXtyZXR1cm4gcnx8KGU9dihlKSksbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IoZSx0fHxcImRvd25sb2FkXCIpfToobS5hYm9ydD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5yZWFkeVN0YXRlPWUuRE9ORSxoKGUsXCJhYm9ydFwiKX0sbS5yZWFkeVN0YXRlPW0uSU5JVD0wLG0uV1JJVElORz0xLG0uRE9ORT0yLG0uZXJyb3I9bS5vbndyaXRlc3RhcnQ9bS5vbnByb2dyZXNzPW0ub253cml0ZT1tLm9uYWJvcnQ9bS5vbmVycm9yPW0ub253cml0ZWVuZD1udWxsLGcpfX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGZ8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8KHZvaWQgMCkuY29udGVudCk7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJmUuZXhwb3J0cz9lLmV4cG9ydHMuc2F2ZUFzPWk6bnVsbCE9PXIoMzgpJiZudWxsIT1yKDM5KSYmKG49W10sbz1mdW5jdGlvbigpe3JldHVybiBpfS5hcHBseSh0LG4pLCEodm9pZCAwIT09byYmKGUuZXhwb3J0cz1vKSkpfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKX19LGZ1bmN0aW9uKGUsdCl7KGZ1bmN0aW9uKHQpe2UuZXhwb3J0cz10fSkuY2FsbCh0LHt9KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBpKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiByJiZlKHQucHJvdG90eXBlLHIpLG4mJmUodCxuKSx0fX0oKSxzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ITA7bjspe3ZhciBvPWUsaT10LGE9cjtuPSExLG51bGw9PT1vJiYobz1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKTtpZih2b2lkIDAhPT1zKXtpZihcInZhbHVlXCJpbiBzKXJldHVybiBzLnZhbHVlO3ZhciBsPXMuZ2V0O2lmKHZvaWQgMD09PWwpcmV0dXJuO3JldHVybiBsLmNhbGwoYSl9dmFyIHU9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO2lmKG51bGw9PT11KXJldHVybjtlPXUsdD1pLHI9YSxuPSEwLHM9dT12b2lkIDB9fSxsPXIoMiksdT1uKGwpLGM9cigzKSxkPShuKGMpLHIoNCkpLHA9bihkKSxmPXIoNyksaD1uKGYpLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSxzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksXCJjb25zdHJ1Y3RvclwiLHRoaXMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLGEodCxbe2tleTpcImhhbmRsZUNvbHVtbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcm9wcy5kYXRhU29ydCl7dmFyIHQ9dGhpcy5yZWZzLmlubmVyRGl2O3RoaXMub3JkZXI9dGhpcy5vcmRlcj09cFtcImRlZmF1bHRcIl0uU09SVF9ERVNDP3BbXCJkZWZhdWx0XCJdLlNPUlRfQVNDOnBbXCJkZWZhdWx0XCJdLlNPUlRfREVTQyx0aGlzLnByb3BzLmNsZWFyU29ydENhcmV0KHRoaXMub3JkZXIsdGhpcy5wcm9wcy5kYXRhRmllbGQpLHQuYXBwZW5kQ2hpbGQoaFtcImRlZmF1bHRcIl0ucmVuZGVyU29ydENhcmV0KHRoaXMub3JkZXIpKX19fSx7a2V5OlwiY29tcG9uZW50RGlkTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVmcy5pbm5lckRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWZpZWxkXCIsdGhpcy5wcm9wcy5kYXRhRmllbGQpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bnVsbCE9PXRoaXMucHJvcHMud2lkdGg/cGFyc2VJbnQodGhpcy5wcm9wcy53aWR0aCk6bnVsbCx0PXt0ZXh0QWxpZ246dGhpcy5wcm9wcy5kYXRhQWxpZ24sZGlzcGxheTp0aGlzLnByb3BzLmhpZGRlbj9cIm5vbmVcIjpudWxsLHdpZHRoOmUsbWF4V2lkdGg6ZX0scj10aGlzLnByb3BzLmNsYXNzTmFtZStcIiBcIisodGhpcy5wcm9wcy5kYXRhU29ydD9cInNvcnQtY29sdW1uXCI6XCJcIik7cmV0dXJuIHVbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJ0aFwiLHtjbGFzc05hbWU6cixzdHlsZTp0fSx1W1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse3JlZjpcImlubmVyRGl2XCIsY2xhc3NOYW1lOlwidGgtaW5uZXIgdGFibGUtaGVhZGVyLWNvbHVtblwiLG9uQ2xpY2s6dGhpcy5oYW5kbGVDb2x1bW5DbGljay5iaW5kKHRoaXMpfSx0aGlzLnByb3BzLmNoaWxkcmVuKSl9fV0pLHR9KHVbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7di5wcm9wVHlwZXM9e2RhdGFGaWVsZDp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGRhdGFBbGlnbjp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuc3RyaW5nLGRhdGFTb3J0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5ib29sLGNsZWFyU29ydENhcmV0OnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5mdW5jLGRhdGFGb3JtYXQ6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmZ1bmMsaXNLZXk6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsZWRpdGFibGU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFueSxoaWRkZW46dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmJvb2wsY2xhc3NOYW1lOnVbXCJkZWZhdWx0XCJdLlByb3BUeXBlcy5zdHJpbmcsd2lkdGg6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLnN0cmluZyxzb3J0RnVuYzp1W1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMuZnVuYyxjb2x1bW5DbGFzc05hbWU6dVtcImRlZmF1bHRcIl0uUHJvcFR5cGVzLmFueX0sdi5kZWZhdWx0UHJvcHM9e2RhdGFBbGlnbjpcImxlZnRcIixkYXRhU29ydDohMSxkYXRhRm9ybWF0OnZvaWQgMCxpc0tleTohMSxlZGl0YWJsZTohMCxjbGVhclNvcnRDYXJldDp2b2lkIDAsaGlkZGVuOiExLGNsYXNzTmFtZTpcIlwiLHdpZHRoOm51bGwsc29ydEZ1bmM6dm9pZCAwLGNvbHVtbkNsYXNzTmFtZTpcIlwifSx0W1wiZGVmYXVsdFwiXT12LGUuZXhwb3J0cz10W1wiZGVmYXVsdFwiXX1dKX0pOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBGT1JNQVQgPSByZXF1aXJlKCcuL3V0aWxzL2Zvcm1hdCcpO1xudmFyIGFzQ29uZmlnID0gcmVxdWlyZSgnLi91dGlscy9hc0NvbmZpZycpO1xudmFyIHRvTW9tZW50ID0gcmVxdWlyZSgnLi90b01vbWVudCcpO1xudmFyIG9uRW50ZXIgPSByZXF1aXJlKCcuL29uRW50ZXInKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBUT0RBWTtcblxuZnVuY3Rpb24gZW1wdHlGbigpIHt9XG5cbnZhciBEZWNhZGVWaWV3ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gICAgZGlzcGxheU5hbWU6ICdEZWNhZGVWaWV3JyxcblxuICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgICAgICByZXR1cm4gYXNDb25maWcoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgdGhlIHllYXJzIGluIHRoZSBkZWNhZGUgb2YgdGhlIGdpdmVuIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtNb21lbnQvRGF0ZS9OdW1iZXJ9IHZhbHVlXG4gICAgICogQHJldHVybiB7TW9tZW50W119XG4gICAgICovXG4gICAgZ2V0WWVhcnNJbkRlY2FkZTogZnVuY3Rpb24gZ2V0WWVhcnNJbkRlY2FkZSh2YWx1ZSkge1xuICAgICAgICB2YXIgeWVhciA9IG1vbWVudCh2YWx1ZSkuZ2V0KCd5ZWFyJyk7XG4gICAgICAgIHZhciBvZmZzZXQgPSB5ZWFyICUgMTA7XG5cbiAgICAgICAgeWVhciA9IHllYXIgLSBvZmZzZXQgLSAxO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAgIHZhciBzdGFydCA9IG1vbWVudCh5ZWFyLCAnWVlZWScpLnN0YXJ0T2YoJ3llYXInKTtcblxuICAgICAgICBmb3IgKDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG1vbWVudChzdGFydCkpO1xuICAgICAgICAgICAgc3RhcnQuYWRkKDEsICd5ZWFyJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblxuICAgICAgICBUT0RBWSA9ICttb21lbnQoKS5zdGFydE9mKCdkYXknKTtcblxuICAgICAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICAgIHZhciB2aWV3TW9tZW50ID0gcHJvcHMudmlld01vbWVudCA9IG1vbWVudCh0aGlzLnByb3BzLnZpZXdEYXRlKTtcblxuICAgICAgICBpZiAocHJvcHMuZGF0ZSkge1xuICAgICAgICAgICAgcHJvcHMubW9tZW50ID0gbW9tZW50KHByb3BzLmRhdGUpLnN0YXJ0T2YoJ3llYXInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB5ZWFyc0luVmlldyA9IHRoaXMuZ2V0WWVhcnNJbkRlY2FkZSh2aWV3TW9tZW50KTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkcC10YWJsZSBkcC1kZWNhZGUtdmlldycgfSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyWWVhcnMocHJvcHMsIHllYXJzSW5WaWV3KVxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGdpdmVuIGFycmF5IG9mIGRheXNcbiAgICAgKiBAcGFyYW0gIHtNb21lbnRbXX0gZGF5c1xuICAgICAqIEByZXR1cm4ge1JlYWN0LkRPTX1cbiAgICAgKi9cbiAgICByZW5kZXJZZWFyczogZnVuY3Rpb24gcmVuZGVyWWVhcnMocHJvcHMsIGRheXMpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gZGF5cy5tYXAoZnVuY3Rpb24gKGRhdGUsIGluZGV4LCBhcnIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclllYXIocHJvcHMsIGRhdGUsIGluZGV4LCBhcnIpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgdmFyIGxlbiA9IGRheXMubGVuZ3RoO1xuICAgICAgICB2YXIgYnVja2V0cyA9IFtdO1xuICAgICAgICB2YXIgYnVja2V0c0xlbiA9IE1hdGguY2VpbChsZW4gLyA0KTtcblxuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yICg7IGkgPCBidWNrZXRzTGVuOyBpKyspIHtcbiAgICAgICAgICAgIGJ1Y2tldHMucHVzaChub2Rlcy5zbGljZShpICogNCwgKGkgKyAxKSAqIDQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidWNrZXRzLm1hcChmdW5jdGlvbiAoYnVja2V0LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGtleTogXCJyb3dcIiArIGksIGNsYXNzTmFtZTogJ2RwLXJvdycgfSxcbiAgICAgICAgICAgICAgICBidWNrZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW5kZXJZZWFyOiBmdW5jdGlvbiByZW5kZXJZZWFyKHByb3BzLCBkYXRlLCBpbmRleCwgYXJyKSB7XG4gICAgICAgIHZhciB5ZWFyVGV4dCA9IEZPUk1BVC55ZWFyKGRhdGUsIHByb3BzLnllYXJGb3JtYXQpO1xuICAgICAgICB2YXIgY2xhc3NlcyA9IFtcImRwLWNlbGwgZHAteWVhclwiXTtcblxuICAgICAgICB2YXIgZGF0ZVRpbWVzdGFtcCA9ICtkYXRlO1xuXG4gICAgICAgIGlmIChkYXRlVGltZXN0YW1wID09IHByb3BzLm1vbWVudCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkcC12YWx1ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpbmRleCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkcC1wcmV2Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5kZXggPT0gYXJyLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZHAtbmV4dCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9uQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcywgcHJvcHMsIGRhdGUpO1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgICAga2V5OiB5ZWFyVGV4dCxcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzZXMuam9pbignICcpLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2ssXG4gICAgICAgICAgICAgICAgb25LZXlVcDogb25FbnRlcihvbkNsaWNrKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHllYXJUZXh0XG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhwcm9wcywgZGF0ZSwgZXZlbnQpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZGF0ZTsocHJvcHMub25TZWxlY3QgfHwgZW1wdHlGbikoZGF0ZSwgZXZlbnQpO1xuICAgIH1cbn0pO1xuXG5EZWNhZGVWaWV3LmdldEhlYWRlclRleHQgPSBmdW5jdGlvbiAodmFsdWUsIHByb3BzKSB7XG4gICAgdmFyIHllYXIgPSBtb21lbnQodmFsdWUpLmdldCgneWVhcicpO1xuICAgIHZhciBvZmZzZXQgPSB5ZWFyICUgMTA7XG5cbiAgICB5ZWFyID0geWVhciAtIG9mZnNldCAtIDE7XG5cbiAgICByZXR1cm4geWVhciArICcgLSAnICsgKHllYXIgKyAxMSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERlY2FkZVZpZXc7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIFAgPSBSZWFjdC5Qcm9wVHlwZXM7XG52YXIgb25FbnRlciA9IHJlcXVpcmUoJy4vb25FbnRlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICBkaXNwbGF5TmFtZTogJ0RhdGVQaWNrZXJIZWFkZXInLFxuXG4gIHByb3BUeXBlczoge1xuICAgIG9uQ2hhbmdlOiBQLmZ1bmMsXG4gICAgb25QcmV2OiBQLmZ1bmMsXG4gICAgb25OZXh0OiBQLmZ1bmMsXG4gICAgY29sc3BhbjogUC5udW1iZXIsXG4gICAgY2hpbGRyZW46IFAubm9kZVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2RpdicsXG4gICAgICB7IGNsYXNzTmFtZTogJ2RwLWhlYWRlcicgfSxcbiAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2RwLW5hdi10YWJsZScgfSxcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RwLXJvdycgfSxcbiAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHAtcHJldi1uYXYgZHAtbmF2LWNlbGwgZHAtY2VsbCcsXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uUHJldixcbiAgICAgICAgICAgICAgb25LZXlVcDogb25FbnRlcihwcm9wcy5vblByZXYpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvcHMucHJldlRleHRcbiAgICAgICAgICApLFxuICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGFiSW5kZXg6ICcxJyxcbiAgICAgICAgICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkcC1uYXYtdmlldyBkcC1jZWxsJyxcbiAgICAgICAgICAgICAgY29sU3BhbjogcHJvcHMuY29sc3BhbixcbiAgICAgICAgICAgICAgb25DbGljazogcHJvcHMub25DaGFuZ2UsXG4gICAgICAgICAgICAgIG9uS2V5VXA6IG9uRW50ZXIocHJvcHMub25DaGFuZ2UpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvcHMuY2hpbGRyZW5cbiAgICAgICAgICApLFxuICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdGFiSW5kZXg6ICcxJyxcbiAgICAgICAgICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkcC1uZXh0LW5hdiBkcC1uYXYtY2VsbCBkcC1jZWxsJyxcbiAgICAgICAgICAgICAgb25DbGljazogcHJvcHMub25OZXh0LFxuICAgICAgICAgICAgICBvbktleVVwOiBvbkVudGVyKHByb3BzLm9uTmV4dClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9wcy5uZXh0VGV4dFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH1cblxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xuXG52YXIgRk9STUFUID0gcmVxdWlyZSgnLi91dGlscy9mb3JtYXQnKTtcbnZhciBhc0NvbmZpZyA9IHJlcXVpcmUoJy4vdXRpbHMvYXNDb25maWcnKTtcbnZhciBvbkVudGVyID0gcmVxdWlyZSgnLi9vbkVudGVyJyk7XG52YXIgdG9Nb21lbnQgPSByZXF1aXJlKCcuL3RvTW9tZW50Jyk7XG5cbnZhciBUT0RBWTtcblxuZnVuY3Rpb24gZW1wdHlGbigpIHt9XG5cbnZhciBNb250aFZpZXcgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgZGlzcGxheU5hbWU6ICdNb250aFZpZXcnLFxuXG4gIC8qKlxuICAgKiBGb3JtYXRzIHRoZSBnaXZlbiBkYXRlIGluIHRoZSBzcGVjaWZpZWQgZm9ybWF0LlxuICAgKiBAbWV0aG9kIGZvcm1hdFxuICAgKlxuICAgKiBAcGFyYW0gIHtEYXRlL1N0cmluZy9Nb21lbnR9IHZhbHVlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gW2Zvcm1hdF0gSWYgbm9uZSBzcGVjaWZpZWQsICNkYXRlRm9ybWF0IHdpbGwgYmUgdXNlZFxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZvcm1hdEFzRGF5OiBmdW5jdGlvbiBmb3JtYXRBc0RheShtb21lbnQsIGRheURpc3BsYXlGb3JtYXQpIHtcbiAgICByZXR1cm4gbW9tZW50LmZvcm1hdChkYXlEaXNwbGF5Rm9ybWF0IHx8ICdEJyk7XG4gIH0sXG5cbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIGFzQ29uZmlnKCk7XG4gIH0sXG5cbiAgZ2V0V2Vla1N0YXJ0TW9tZW50OiBmdW5jdGlvbiBnZXRXZWVrU3RhcnRNb21lbnQodmFsdWUpIHtcbiAgICB2YXIgd2Vla1N0YXJ0RGF5ID0gdGhpcy53ZWVrU3RhcnREYXk7XG4gICAgdmFyIGNsb25lID0gdGhpcy50b01vbWVudCh2YWx1ZSkuZGF5KHdlZWtTdGFydERheSk7XG5cbiAgICByZXR1cm4gY2xvbmU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHRoZSBkYXlzIGluIHRoZSBzcGVjaWZpZWQgbW9udGguXG4gICAqXG4gICAqIEBwYXJhbSAge01vbWVudC9EYXRlL051bWJlcn0gdmFsdWVcbiAgICogQHJldHVybiB7TW9tZW50W119XG4gICAqL1xuICBnZXREYXlzSW5Nb250aDogZnVuY3Rpb24gZ2V0RGF5c0luTW9udGgodmFsdWUpIHtcbiAgICB2YXIgZmlyc3QgPSB0aGlzLnRvTW9tZW50KHZhbHVlKS5zdGFydE9mKCdtb250aCcpO1xuICAgIHZhciBiZWZvcmVGaXJzdCA9IHRoaXMudG9Nb21lbnQodmFsdWUpLnN0YXJ0T2YoJ21vbnRoJykuYWRkKC0xLCAnZGF5cycpO1xuICAgIHZhciBzdGFydCA9IHRoaXMuZ2V0V2Vla1N0YXJ0TW9tZW50KGZpcnN0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGkgPSAwO1xuXG4gICAgaWYgKGJlZm9yZUZpcnN0LmlzQmVmb3JlKHN0YXJ0KVxuICAgIC8vIGFuZCBpdCBkb2VuJ3Qgc3RhcnQgd2l0aCBhIGZ1bGwgd2VlayBiZWZvcmUgYW5kIHRoZSB3ZWVrIGhhcyBhdCBsZWFzdCAxIGRheSBmcm9tIGN1cnJlbnQgbW9udGggKGRlZmF1bHQpXG4gICAgICYmICh0aGlzLnByb3BzLmFsd2F5c1Nob3dQcmV2V2VlayB8fCAhc3RhcnQuaXNTYW1lKGZpcnN0KSkpIHtcbiAgICAgIHN0YXJ0LmFkZCgtMSwgJ3dlZWtzJyk7XG4gICAgfVxuXG4gICAgZm9yICg7IGkgPCA0MjsgaSsrKSB7XG4gICAgICByZXN1bHQucHVzaCh0aGlzLnRvTW9tZW50KHN0YXJ0KSk7XG4gICAgICBzdGFydC5hZGQoMSwgJ2RheXMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXG4gICAgdmFyIHByb3BzID0gYXNzaWduKHt9LCB0aGlzLnByb3BzKTtcblxuICAgIHRoaXMudG9Nb21lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGRhdGVGb3JtYXQpIHtcbiAgICAgIHJldHVybiB0b01vbWVudCh2YWx1ZSwgZGF0ZUZvcm1hdCB8fCBwcm9wcy5kYXRlRm9ybWF0LCB7IGxvY2FsZTogcHJvcHMubG9jYWxlIH0pO1xuICAgIH07XG5cbiAgICBUT0RBWSA9ICt0aGlzLnRvTW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XG5cbiAgICB2YXIgZGF0ZUZvcm1hdCA9IHByb3BzLmRhdGVGb3JtYXQ7XG4gICAgdmFyIHZpZXdNb21lbnQgPSBwcm9wcy52aWV3TW9tZW50ID0gdGhpcy50b01vbWVudChwcm9wcy52aWV3RGF0ZSwgZGF0ZUZvcm1hdCk7XG5cbiAgICB2YXIgd2Vla1N0YXJ0RGF5ID0gcHJvcHMud2Vla1N0YXJ0RGF5O1xuXG4gICAgaWYgKHdlZWtTdGFydERheSA9PSBudWxsKSB7XG4gICAgICB3ZWVrU3RhcnREYXkgPSBwcm9wcy5sb2NhbGVEYXRhLl93ZWVrID8gcHJvcHMubG9jYWxlRGF0YS5fd2Vlay5kb3cgOiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMud2Vla1N0YXJ0RGF5ID0gcHJvcHMud2Vla1N0YXJ0RGF5ID0gd2Vla1N0YXJ0RGF5O1xuXG4gICAgaWYgKHByb3BzLm1pbkRhdGUgJiYgbW9tZW50LmlzTW9tZW50KHByb3BzLm1pbkRhdGUpKSB7XG4gICAgICBwcm9wcy5taW5EYXRlLnN0YXJ0T2YoJ2RheScpO1xuICAgIH1cblxuICAgIHByb3BzLm1pbkRhdGUgJiYgKHByb3BzLm1pbkRhdGUgPSArdGhpcy50b01vbWVudChwcm9wcy5taW5EYXRlLCBkYXRlRm9ybWF0KSk7XG4gICAgcHJvcHMubWF4RGF0ZSAmJiAocHJvcHMubWF4RGF0ZSA9ICt0aGlzLnRvTW9tZW50KHByb3BzLm1heERhdGUsIGRhdGVGb3JtYXQpKTtcblxuICAgIHRoaXMubW9udGhGaXJzdCA9IHRoaXMudG9Nb21lbnQodmlld01vbWVudCkuc3RhcnRPZignbW9udGgnKTtcbiAgICB0aGlzLm1vbnRoTGFzdCA9IHRoaXMudG9Nb21lbnQodmlld01vbWVudCkuZW5kT2YoJ21vbnRoJyk7XG5cbiAgICBpZiAocHJvcHMuZGF0ZSkge1xuICAgICAgcHJvcHMubW9tZW50ID0gdGhpcy50b01vbWVudChwcm9wcy5kYXRlKS5zdGFydE9mKCdkYXknKTtcbiAgICB9XG5cbiAgICB2YXIgZGF5c0luVmlldyA9IHRoaXMuZ2V0RGF5c0luTW9udGgodmlld01vbWVudCk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgeyBjbGFzc05hbWU6ICdkcC10YWJsZSBkcC1tb250aC12aWV3JyB9LFxuICAgICAgdGhpcy5yZW5kZXJXZWVrRGF5TmFtZXMoKSxcbiAgICAgIHRoaXMucmVuZGVyRGF5cyhwcm9wcywgZGF5c0luVmlldylcbiAgICApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIGdpdmVuIGFycmF5IG9mIGRheXNcbiAgICogQHBhcmFtICB7TW9tZW50W119IGRheXNcbiAgICogQHJldHVybiB7UmVhY3QuRE9NfVxuICAgKi9cbiAgcmVuZGVyRGF5czogZnVuY3Rpb24gcmVuZGVyRGF5cyhwcm9wcywgZGF5cykge1xuICAgIHZhciBub2RlcyA9IGRheXMubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXJEYXkocHJvcHMsIGRhdGUpO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgdmFyIGxlbiA9IGRheXMubGVuZ3RoO1xuICAgIHZhciBidWNrZXRzID0gW107XG4gICAgdmFyIGJ1Y2tldHNMZW4gPSBNYXRoLmNlaWwobGVuIC8gNyk7XG5cbiAgICB2YXIgaSA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGJ1Y2tldHNMZW47IGkrKykge1xuICAgICAgYnVja2V0cy5wdXNoKG5vZGVzLnNsaWNlKGkgKiA3LCAoaSArIDEpICogNykpO1xuICAgIH1cblxuICAgIHJldHVybiBidWNrZXRzLm1hcChmdW5jdGlvbiAoYnVja2V0LCBpKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsga2V5OiBcInJvd1wiICsgaSwgY2xhc3NOYW1lOiAnZHAtd2VlayBkcC1yb3cnIH0sXG4gICAgICAgIGJ1Y2tldFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXJEYXk6IGZ1bmN0aW9uIHJlbmRlckRheShwcm9wcywgZGF0ZSkge1xuICAgIHZhciBkYXlUZXh0ID0gRk9STUFULmRheShkYXRlLCBwcm9wcy5kYXlGb3JtYXQpO1xuICAgIHZhciBjbGFzc2VzID0gW1wiZHAtY2VsbCBkcC1kYXlcIl07XG5cbiAgICB2YXIgZGF0ZVRpbWVzdGFtcCA9ICtkYXRlO1xuXG4gICAgaWYgKGRhdGVUaW1lc3RhbXAgPT0gVE9EQVkpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZHAtY3VycmVudCcpO1xuICAgIH0gZWxzZSBpZiAoZGF0ZVRpbWVzdGFtcCA8IHRoaXMubW9udGhGaXJzdCkge1xuICAgICAgY2xhc3Nlcy5wdXNoKCdkcC1wcmV2Jyk7XG4gICAgfSBlbHNlIGlmIChkYXRlVGltZXN0YW1wID4gdGhpcy5tb250aExhc3QpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZHAtbmV4dCcpO1xuICAgIH1cblxuICAgIHZhciBiZWZvcmVNaW5EYXRlO1xuXG4gICAgaWYgKHByb3BzLm1pbkRhdGUgJiYgZGF0ZSA8IHByb3BzLm1pbkRhdGUpIHtcbiAgICAgIGNsYXNzZXMucHVzaCgnZHAtZGlzYWJsZWQgZHAtYmVmb3JlLW1pbicpO1xuICAgICAgYmVmb3JlTWluRGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGFmdGVyTWF4RGF0ZTtcbiAgICBpZiAocHJvcHMubWF4RGF0ZSAmJiBkYXRlID4gcHJvcHMubWF4RGF0ZSkge1xuICAgICAgY2xhc3Nlcy5wdXNoKCdkcC1kaXNhYmxlZCBkcC1hZnRlci1tYXgnKTtcbiAgICAgIGFmdGVyTWF4RGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGRhdGVUaW1lc3RhbXAgPT0gcHJvcHMubW9tZW50KSB7XG4gICAgICBjbGFzc2VzLnB1c2goJ2RwLXZhbHVlJyk7XG4gICAgfVxuXG4gICAgdmFyIG1vbSA9IHRoaXMudG9Nb21lbnQoZGF0ZSk7XG4gICAgdmFyIG9uQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcywgcHJvcHMsIGRhdGUsIGRhdGVUaW1lc3RhbXApO1xuXG4gICAgdmFyIHJlbmRlckRheVByb3BzID0ge1xuICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgdGFiSW5kZXg6IDEsXG4gICAgICBrZXk6IGRheVRleHQsXG4gICAgICB0ZXh0OiBkYXlUZXh0LFxuICAgICAgZGF0ZTogbW9tLFxuICAgICAgbW9tZW50OiBtb20sXG4gICAgICBjbGFzc05hbWU6IGNsYXNzZXMuam9pbignICcpLFxuICAgICAgc3R5bGU6IHt9LFxuICAgICAgb25DbGljazogb25DbGljayxcbiAgICAgIG9uS2V5VXA6IG9uRW50ZXIob25DbGljayksXG4gICAgICBjaGlsZHJlbjogZGF5VGV4dFxuICAgIH07XG5cbiAgICBpZiAoYmVmb3JlTWluRGF0ZSkge1xuICAgICAgcmVuZGVyRGF5UHJvcHMuaXNEaXNhYmxlZCA9IHRydWU7XG4gICAgICByZW5kZXJEYXlQcm9wcy5iZWZvcmVNaW5EYXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGFmdGVyTWF4RGF0ZSkge1xuICAgICAgcmVuZGVyRGF5UHJvcHMuaXNEaXNhYmxlZCA9IHRydWU7XG4gICAgICByZW5kZXJEYXlQcm9wcy5hZnRlck1heERhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcHJvcHMub25SZW5kZXJEYXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlbmRlckRheVByb3BzID0gcHJvcHMub25SZW5kZXJEYXkocmVuZGVyRGF5UHJvcHMpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0UmVuZGVyRnVuY3Rpb24gPSBSZWFjdC5ET00uZGl2O1xuICAgIHZhciByZW5kZXJGdW5jdGlvbiA9IHByb3BzLnJlbmRlckRheSB8fCBkZWZhdWx0UmVuZGVyRnVuY3Rpb247XG5cbiAgICB2YXIgcmVzdWx0ID0gcmVuZGVyRnVuY3Rpb24ocmVuZGVyRGF5UHJvcHMpO1xuXG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXN1bHQgPSBkZWZhdWx0UmVuZGVyRnVuY3Rpb24ocmVuZGVyRGF5UHJvcHMpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgZ2V0V2Vla0RheU5hbWVzOiBmdW5jdGlvbiBnZXRXZWVrRGF5TmFtZXMocHJvcHMpIHtcbiAgICBwcm9wcyA9IHByb3BzIHx8IHRoaXMucHJvcHM7XG5cbiAgICB2YXIgbmFtZXMgPSBwcm9wcy53ZWVrRGF5TmFtZXM7XG4gICAgdmFyIHdlZWtTdGFydERheSA9IHRoaXMud2Vla1N0YXJ0RGF5O1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lcyA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBuYW1lcyA9IG5hbWVzKHdlZWtTdGFydERheSwgcHJvcHMubG9jYWxlKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpKSB7XG5cbiAgICAgIG5hbWVzID0gW10uY29uY2F0KG5hbWVzKTtcblxuICAgICAgdmFyIGluZGV4ID0gd2Vla1N0YXJ0RGF5O1xuXG4gICAgICB3aGlsZSAoaW5kZXggPiAwKSB7XG4gICAgICAgIG5hbWVzLnB1c2gobmFtZXMuc2hpZnQoKSk7XG4gICAgICAgIGluZGV4LS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWVzO1xuICB9LFxuXG4gIHJlbmRlcldlZWtEYXlOYW1lczogZnVuY3Rpb24gcmVuZGVyV2Vla0RheU5hbWVzKCkge1xuICAgIHZhciBuYW1lcyA9IHRoaXMuZ2V0V2Vla0RheU5hbWVzKCk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgeyBjbGFzc05hbWU6ICdkcC1yb3cgZHAtd2Vlay1kYXktbmFtZXMnIH0sXG4gICAgICBuYW1lcy5tYXAoZnVuY3Rpb24gKG5hbWUsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsga2V5OiBpbmRleCwgY2xhc3NOYW1lOiAnZHAtY2VsbCBkcC13ZWVrLWRheS1uYW1lJyB9LFxuICAgICAgICAgIG5hbWVcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfSxcblxuICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2socHJvcHMsIGRhdGUsIHRpbWVzdGFtcCwgZXZlbnQpIHtcbiAgICBpZiAocHJvcHMubWluRGF0ZSAmJiB0aW1lc3RhbXAgPCBwcm9wcy5taW5EYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwcm9wcy5tYXhEYXRlICYmIHRpbWVzdGFtcCA+IHByb3BzLm1heERhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC50YXJnZXQudmFsdWUgPSBkYXRlOyhwcm9wcy5vbkNoYW5nZSB8fCBlbXB0eUZuKShkYXRlLCBldmVudCk7XG4gIH1cbn0pO1xuXG5Nb250aFZpZXcuZ2V0SGVhZGVyVGV4dCA9IGZ1bmN0aW9uIChtb21lbnQsIHByb3BzKSB7XG4gIHJldHVybiB0b01vbWVudChtb21lbnQsIG51bGwsIHsgbG9jYWxlOiBwcm9wcy5sb2NhbGUgfSkuZm9ybWF0KCdNTU1NIFlZWVknKTtcbn07XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IE1vbnRoVmlldztcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcblxudmFyIEZPUk1BVCA9IHJlcXVpcmUoJy4vdXRpbHMvZm9ybWF0Jyk7XG52YXIgYXNDb25maWcgPSByZXF1aXJlKCcuL3V0aWxzL2FzQ29uZmlnJyk7XG52YXIgdG9Nb21lbnQgPSByZXF1aXJlKCcuL3RvTW9tZW50Jyk7XG52YXIgb25FbnRlciA9IHJlcXVpcmUoJy4vb25FbnRlcicpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIFRPREFZO1xuXG5mdW5jdGlvbiBlbXB0eUZuKCkge31cblxudmFyIFllYXJWaWV3ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gICAgZGlzcGxheU5hbWU6ICdZZWFyVmlldycsXG5cbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblxuICAgICAgICByZXR1cm4gYXNDb25maWcoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgdGhlIGRheXMgaW4gdGhlIHNwZWNpZmllZCBtb250aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge01vbWVudC9EYXRlL051bWJlcn0gdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtNb21lbnRbXX1cbiAgICAgKi9cbiAgICBnZXRNb250aHNJblllYXI6IGZ1bmN0aW9uIGdldE1vbnRoc0luWWVhcih2YWx1ZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBtb21lbnQodmFsdWUpLnN0YXJ0T2YoJ3llYXInKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yICg7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChtb21lbnQoc3RhcnQpKTtcbiAgICAgICAgICAgIHN0YXJ0LmFkZCgxLCAnbW9udGgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXG4gICAgICAgIFRPREFZID0gK21vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xuXG4gICAgICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgICAgdmFyIHZpZXdNb21lbnQgPSBwcm9wcy52aWV3TW9tZW50ID0gbW9tZW50KHRoaXMucHJvcHMudmlld0RhdGUpO1xuXG4gICAgICAgIGlmIChwcm9wcy5kYXRlKSB7XG4gICAgICAgICAgICBwcm9wcy5tb21lbnQgPSBtb21lbnQocHJvcHMuZGF0ZSkuc3RhcnRPZignbW9udGgnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtb250aHNJblZpZXcgPSB0aGlzLmdldE1vbnRoc0luWWVhcih2aWV3TW9tZW50KTtcblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkcC10YWJsZSBkcC15ZWFyLXZpZXcnIH0sXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1vbnRocyhwcm9wcywgbW9udGhzSW5WaWV3KVxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGdpdmVuIGFycmF5IG9mIGRheXNcbiAgICAgKiBAcGFyYW0gIHtNb21lbnRbXX0gZGF5c1xuICAgICAqIEByZXR1cm4ge1JlYWN0LkRPTX1cbiAgICAgKi9cbiAgICByZW5kZXJNb250aHM6IGZ1bmN0aW9uIHJlbmRlck1vbnRocyhwcm9wcywgZGF5cykge1xuICAgICAgICB2YXIgbm9kZXMgPSBkYXlzLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTW9udGgocHJvcHMsIGRhdGUpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgdmFyIGxlbiA9IGRheXMubGVuZ3RoO1xuICAgICAgICB2YXIgYnVja2V0cyA9IFtdO1xuICAgICAgICB2YXIgYnVja2V0c0xlbiA9IE1hdGguY2VpbChsZW4gLyA0KTtcblxuICAgICAgICB2YXIgaSA9IDA7XG5cbiAgICAgICAgZm9yICg7IGkgPCBidWNrZXRzTGVuOyBpKyspIHtcbiAgICAgICAgICAgIGJ1Y2tldHMucHVzaChub2Rlcy5zbGljZShpICogNCwgKGkgKyAxKSAqIDQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidWNrZXRzLm1hcChmdW5jdGlvbiAoYnVja2V0LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGtleTogXCJyb3dcIiArIGksIGNsYXNzTmFtZTogJ2RwLXJvdycgfSxcbiAgICAgICAgICAgICAgICBidWNrZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW5kZXJNb250aDogZnVuY3Rpb24gcmVuZGVyTW9udGgocHJvcHMsIGRhdGUpIHtcbiAgICAgICAgdmFyIG1vbnRoVGV4dCA9IEZPUk1BVC5tb250aChkYXRlLCBwcm9wcy5tb250aEZvcm1hdCk7XG4gICAgICAgIHZhciBjbGFzc2VzID0gW1wiZHAtY2VsbCBkcC1tb250aFwiXTtcblxuICAgICAgICB2YXIgZGF0ZVRpbWVzdGFtcCA9ICtkYXRlO1xuXG4gICAgICAgIGlmIChkYXRlVGltZXN0YW1wID09IHByb3BzLm1vbWVudCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkcC12YWx1ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9uQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcywgcHJvcHMsIGRhdGUpO1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGFiSW5kZXg6ICcxJyxcbiAgICAgICAgICAgICAgICByb2xlOiAnbGluaycsXG4gICAgICAgICAgICAgICAga2V5OiBtb250aFRleHQsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiBvbkNsaWNrLFxuICAgICAgICAgICAgICAgIG9uS2V5VXA6IG9uRW50ZXIob25DbGljaylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb250aFRleHRcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHByb3BzLCBkYXRlLCBldmVudCkge1xuICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSBkYXRlOyhwcm9wcy5vblNlbGVjdCB8fCBlbXB0eUZuKShkYXRlLCBldmVudCk7XG4gICAgfVxufSk7XG5cblllYXJWaWV3LmdldEhlYWRlclRleHQgPSBmdW5jdGlvbiAobW9tZW50LCBwcm9wcykge1xuICAgIHJldHVybiB0b01vbWVudChtb21lbnQsIG51bGwsIHsgbG9jYWxlOiBwcm9wcy5sb2NhbGUgfSkuZm9ybWF0KCdZWVlZJyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFllYXJWaWV3OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGdldFdlZWtEYXlOYW1lcyA9IHJlcXVpcmUoJy4vdXRpbHMvZ2V0V2Vla0RheU5hbWVzJyk7XG5cbi8vIGNvbnNvbGUubG9nKGdldFdlZWtEYXlOYW1lcygpKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICAgIC8vdGhlIG5hbWVzIG9mIHdlZWsgZGF5cyB0byBiZSBkaXNwbGF5ZWQgaW4gbW9udGggdmlldyAtIGZpcnN0IHNob3VsZCBiZSBzdW5kYXlcbiAgICB3ZWVrRGF5TmFtZXM6IGdldFdlZWtEYXlOYW1lcyxcblxuICAgIC8vdGhlIGRheSB0byBkaXNwbGF5IGFzIGZpcnN0IGRheSBvZiB3ZWVrLiBkZWZhdWx0cyB0byAwLCB3aGljaCBpcyBzdW5kYXlcbiAgICB3ZWVrU3RhcnREYXk6IG51bGwsXG5cbiAgICBsb2NhbGU6IG51bGwsXG5cbiAgICAvL3RoZSBmb3JtYXQgaW4gd2hpY2ggZGF5cyBzaG91bGQgYmUgZGlzcGxheWVkIGluIG1vbnRoIHZpZXdcbiAgICBkYXlGb3JtYXQ6ICdEJyxcblxuICAgIC8vdGhlIGZvcm1hdCBpbiB3aGljaCBtb250aHMgc2hvdWxkIGJlIGRpc3BsYXllZCBpbiB5ZWFyIHZpZXdcbiAgICBtb250aEZvcm1hdDogJ01NTU0nLFxuXG4gICAgLy90aGUgZm9ybWF0IGluIHdoaWNoIHllYXJzIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4gZGVjYWRlIHZpZXdcbiAgICB5ZWFyRm9ybWF0OiAnWVlZWScsXG5cbiAgICAvL3RleHQgZm9yIG5hdmlnYXRpbmcgdG8gcHJldiBwZXJpb2RcbiAgICBuYXZQcmV2OiAn4oC5JyxcblxuICAgIC8vdGV4dCBmb3IgbmF2aWdhdGluZyB0byBuZXh0IHBlcmlvZFxuICAgIG5hdk5leHQ6ICfigLonLFxuXG4gICAgLy90aGUgdmlldyB0byByZW5kZXIgaW5pdGlhbGx5LiBQb3NzaWJsZSB2YWx1ZXMgYXJlOiAnbW9udGgnLCAneWVhcicsICdkZWNhZGUnXG4gICAgdmlldzogbnVsbCxcblxuICAgIC8vdGhlIGRhdGUgdG8gbWFyayBhcyBzZWxlY3RlZCBpbiB0aGUgZGF0ZSBwaWNrZXIuXG4gICAgLy9DYW4gYmUgYSBEYXRlIG9iamVjdCwgYSBtb21lbnQgb2JqZWN0IG9yIGEgc3RyaW5nLlxuICAgIC8vSWYgaXQncyBhIHN0cmluZywgaXQgd2lsbCBiZSBwYXJzZWQgdXNpbmcgZGF0ZUZvcm1hdFxuICAgIGRhdGU6IG51bGwsXG5cbiAgICBtaW5EYXRlOiBudWxsLFxuXG4gICAgbWF4RGF0ZTogbnVsbCxcblxuICAgIC8vdGhlIGRhdGUgd2hlcmUgdG8gb3BlbiB0aGUgcGlja2VyLiBkZWZhdWx0cyB0byB0b2RheSBpZiBubyBkYXRlIGFuZCBubyB2aWV3RGF0ZSBzcGVjaWZpZWRcbiAgICB2aWV3RGF0ZTogbnVsbCxcblxuICAgIC8vaWYgdGhlIGRhdGUgcHJvcGVydHkgaXMgZ2l2ZW4gYXMgc3RyaW5nLCBpdCB3aWxsIGJlIHBhcnNlZCB1c2luZyB0aGlzIGZvcm1hdFxuICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcblxuICAgIG9uUmVuZGVyRGF5OiBudWxsLFxuICAgIHJlbmRlckRheTogbnVsbCxcblxuICAgIGFsd2F5c1Nob3dQcmV2V2VlazogZmFsc2Vcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xudmFyIGFzQ29uZmlnID0gcmVxdWlyZSgnLi91dGlscy9hc0NvbmZpZycpO1xuXG52YXIgTW9udGhWaWV3ID0gcmVxdWlyZSgnLi9Nb250aFZpZXcnKTtcbnZhciBZZWFyVmlldyA9IHJlcXVpcmUoJy4vWWVhclZpZXcnKTtcbnZhciBEZWNhZGVWaWV3ID0gcmVxdWlyZSgnLi9EZWNhZGVWaWV3Jyk7XG52YXIgSGVhZGVyID0gcmVxdWlyZSgnLi9IZWFkZXInKTtcblxudmFyIHRvTW9tZW50ID0gcmVxdWlyZSgnLi90b01vbWVudCcpO1xuXG52YXIgaGFzT3duID0gZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59O1xuXG52YXIgb25FbnRlciA9IHJlcXVpcmUoJy4vb25FbnRlcicpO1xuXG52YXIgVmlld3MgPSB7XG4gICAgbW9udGg6IE1vbnRoVmlldyxcbiAgICB5ZWFyOiBZZWFyVmlldyxcbiAgICBkZWNhZGU6IERlY2FkZVZpZXdcbn07XG5cbmZ1bmN0aW9uIGVtcHR5Rm4oKSB7fVxuXG52YXIgRGF0ZVBpY2tlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAgIGRpc3BsYXlOYW1lOiAnRGF0ZVBpY2tlcicsXG5cbiAgICBwcm9wVHlwZXM6IHtcbiAgICAgICAgdG9kYXlUZXh0OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBnb3RvU2VsZWN0ZWRUZXh0OiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXG4gICAgICAgIHJlbmRlckZvb3RlcjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgIG9uQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblxuICAgICAgICBkYXRlOiBSZWFjdC5Qcm9wVHlwZXMuYW55LFxuICAgICAgICB2aWV3RGF0ZTogUmVhY3QuUHJvcFR5cGVzLmFueVxuICAgIH0sXG5cbiAgICBnZXRWaWV3T3JkZXI6IGZ1bmN0aW9uIGdldFZpZXdPcmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmlld09yZGVyIHx8IFsnbW9udGgnLCAneWVhcicsICdkZWNhZGUnXTtcbiAgICB9LFxuXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgYXNDb25maWcoKSwge1xuICAgICAgICAgICAgaXNEYXRlUGlja2VyOiB0cnVlLFxuICAgICAgICAgICAgbmF2T25EYXRlQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICBkZWZhdWx0U3R5bGU6IHtcbiAgICAgICAgICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkZWxldGUgcHJvcHMudmlld0RhdGU7XG4gICAgICAgIGRlbGV0ZSBwcm9wcy5kYXRlO1xuXG4gICAgICAgIHJldHVybiBwcm9wcztcbiAgICB9LFxuXG4gICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmRlZmF1bHRWaWV3LFxuICAgICAgICAgICAgdmlld0RhdGU6IHRoaXMucHJvcHMuZGVmYXVsdFZpZXdEYXRlLFxuICAgICAgICAgICAgZGVmYXVsdERhdGU6IHRoaXMucHJvcHMuZGVmYXVsdERhdGVcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgZ2V0Vmlld05hbWU6IGZ1bmN0aW9uIGdldFZpZXdOYW1lKCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMucHJvcHMudmlldyAhPSBudWxsID8gdGhpcy5wcm9wcy52aWV3IDogdGhpcy5zdGF0ZS52aWV3O1xuXG4gICAgICAgIHJldHVybiB2aWV3IHx8ICdtb250aCc7XG4gICAgfSxcblxuICAgIGFkZFZpZXdJbmRleDogZnVuY3Rpb24gYWRkVmlld0luZGV4KGFtb3VudCkge1xuICAgICAgICB2YXIgdmlld05hbWUgPSB0aGlzLmdldFZpZXdOYW1lKCk7XG5cbiAgICAgICAgdmFyIG9yZGVyID0gdGhpcy5nZXRWaWV3T3JkZXIoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gb3JkZXIuaW5kZXhPZih2aWV3TmFtZSk7XG5cbiAgICAgICAgaW5kZXggKz0gYW1vdW50O1xuXG4gICAgICAgIHJldHVybiBpbmRleCAlIG9yZGVyLmxlbmd0aDtcbiAgICB9LFxuXG4gICAgZ2V0TmV4dFZpZXdOYW1lOiBmdW5jdGlvbiBnZXROZXh0Vmlld05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpZXdPcmRlcigpW3RoaXMuYWRkVmlld0luZGV4KDEpXTtcbiAgICB9LFxuXG4gICAgZ2V0UHJldlZpZXdOYW1lOiBmdW5jdGlvbiBnZXRQcmV2Vmlld05hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpZXdPcmRlcigpW3RoaXMuYWRkVmlld0luZGV4KC0xKV07XG4gICAgfSxcblxuICAgIGdldFZpZXc6IGZ1bmN0aW9uIGdldFZpZXcoKSB7XG4gICAgICAgIHZhciB2aWV3cyA9IHRoaXMucHJvcHMudmlld3MgfHwgVmlld3M7XG4gICAgICAgIHJldHVybiB2aWV3c1t0aGlzLmdldFZpZXdOYW1lKCldIHx8IHZpZXdzLm1vbnRoO1xuICAgIH0sXG5cbiAgICBnZXRWaWV3RmFjdG9yeTogZnVuY3Rpb24gZ2V0Vmlld0ZhY3RvcnkoKSB7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG5cbiAgICAgICAgaWYgKFJlYWN0LmNyZWF0ZUZhY3RvcnkgJiYgdmlldyAmJiB2aWV3LnByb3RvdHlwZSAmJiB0eXBlb2Ygdmlldy5wcm90b3R5cGUucmVuZGVyID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZpZXcuX19mYWN0b3J5ID0gdmlldy5fX2ZhY3RvcnkgfHwgUmVhY3QuY3JlYXRlRmFjdG9yeSh2aWV3KTtcbiAgICAgICAgICAgIHZpZXcgPSB2aWV3Ll9fZmFjdG9yeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2aWV3O1xuICAgIH0sXG5cbiAgICBnZXRWaWV3RGF0ZTogZnVuY3Rpb24gZ2V0Vmlld0RhdGUoKSB7XG4gICAgICAgIHZhciBkYXRlID0gaGFzT3duKHRoaXMucHJvcHMsICd2aWV3RGF0ZScpID8gdGhpcy5wcm9wcy52aWV3RGF0ZSA6IHRoaXMuc3RhdGUudmlld0RhdGU7XG5cbiAgICAgICAgZGF0ZSA9IGRhdGUgfHwgdGhpcy52aWV3TW9tZW50IHx8IHRoaXMuZ2V0RGF0ZSgpIHx8IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgaWYgKG1vbWVudC5pc01vbWVudChkYXRlKSkge1xuICAgICAgICAgICAgLy9pbiBvcmRlciB0byBzdHJpcCB0aGUgbG9jYWxlIC0gdGhlIGRhdGUgcGlja2VyIG1heSBoYXZlIGhhZCBpdHMgbG9jYWxlIGNoYW5nZWRcbiAgICAgICAgICAgIC8vYmV0d2VlbiB0d28gcmVuZGVyIGNhbGxzLiBJZiB3ZSBkb24ndCBzdHJpcCB0aGlzLCBtb21lbnQobW9tKSByZXR1cm5zIGEgbmV3IG1vbWVudFxuICAgICAgICAgICAgLy93aXRoIHRoZSBsb2NhbGUgb2YgbW9tLCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50XG4gICAgICAgICAgICBkYXRlID0gK2RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRlID0gdGhpcy50b01vbWVudChkYXRlKTtcblxuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9LFxuXG4gICAgZ2V0RGF0ZTogZnVuY3Rpb24gZ2V0RGF0ZSgpIHtcbiAgICAgICAgdmFyIGRhdGU7XG5cbiAgICAgICAgaWYgKGhhc093bih0aGlzLnByb3BzLCAnZGF0ZScpKSB7XG4gICAgICAgICAgICBkYXRlID0gdGhpcy5wcm9wcy5kYXRlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0ZSA9IHRoaXMuc3RhdGUuZGVmYXVsdERhdGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0ZSA/IHRoaXMudG9Nb21lbnQoZGF0ZSkgOiBudWxsO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblxuICAgICAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICAgIHRoaXMudG9Nb21lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGRhdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0b01vbWVudCh2YWx1ZSwgZGF0ZUZvcm1hdCB8fCBwcm9wcy5kYXRlRm9ybWF0LCB7IGxvY2FsZTogcHJvcHMubG9jYWxlIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3RmFjdG9yeSgpO1xuXG4gICAgICAgIHByb3BzLmRhdGUgPSB0aGlzLmdldERhdGUoKTtcblxuICAgICAgICB2YXIgZGF0ZVN0cmluZyA9IHByb3BzLmRhdGUgPT0gbnVsbCA/ICcnIDogcHJvcHMuZGF0ZS5mb3JtYXQodGhpcy5wcm9wcy5kYXRlRm9ybWF0KTtcblxuICAgICAgICBwcm9wcy52aWV3RGF0ZSA9IHRoaXMudmlld01vbWVudCA9IHRoaXMuZ2V0Vmlld0RhdGUoKTtcbiAgICAgICAgcHJvcHMubG9jYWxlID0gdGhpcy5wcm9wcy5sb2NhbGU7XG4gICAgICAgIHByb3BzLmxvY2FsZURhdGEgPSBtb21lbnQubG9jYWxlRGF0YShwcm9wcy5sb2NhbGUpO1xuXG4gICAgICAgIHByb3BzLnJlbmRlckRheSA9IHRoaXMucHJvcHMucmVuZGVyRGF5O1xuICAgICAgICBwcm9wcy5vblJlbmRlckRheSA9IHRoaXMucHJvcHMub25SZW5kZXJEYXk7XG5cbiAgICAgICAgLy8gcHJvcHMub25DaGFuZ2UgID0gdGhpcy5oYW5kbGVDaGFuZ2VcbiAgICAgICAgLy8gcHJvcHMub25TZWxlY3QgID0gdGhpcy5oYW5kbGVTZWxlY3RcblxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gKHRoaXMucHJvcHMuY2xhc3NOYW1lIHx8ICcnKSArICcgZGF0ZS1waWNrZXInO1xuXG4gICAgICAgIHByb3BzLnN0eWxlID0gdGhpcy5wcmVwYXJlU3R5bGUocHJvcHMpO1xuXG4gICAgICAgIHZhciB2aWV3UHJvcHMgPSBwcm9wcztcbiAgICAgICAgdmFyIHZpZXdQcm9wcyA9IGFzQ29uZmlnKHByb3BzKTtcblxuICAgICAgICB2aWV3UHJvcHMuZGF0ZVN0cmluZyA9IGRhdGVTdHJpbmc7XG4gICAgICAgIHZpZXdQcm9wcy5sb2NhbGVEYXRhID0gcHJvcHMubG9jYWxlRGF0YTtcbiAgICAgICAgdmlld1Byb3BzLm9uU2VsZWN0ID0gdGhpcy5oYW5kbGVTZWxlY3Q7XG4gICAgICAgIHZpZXdQcm9wcy5vbkNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlO1xuXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSwgc3R5bGU6IHByb3BzLnN0eWxlIH0pLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJIZWFkZXIodmlldywgcHJvcHMpLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RwLWJvZHknLCBzdHlsZTogeyBmbGV4OiAxIH0gfSxcbiAgICAgICAgICAgICAgICB2aWV3KHZpZXdQcm9wcylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB0aGlzLnJlbmRlckZvb3Rlcihwcm9wcylcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgcHJlcGFyZVN0eWxlOiBmdW5jdGlvbiBwcmVwYXJlU3R5bGUocHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgcHJvcHMuZGVmYXVsdFN0eWxlLCBwcm9wcy5zdHlsZSk7XG4gICAgfSxcblxuICAgIHJlbmRlckZvb3RlcjogZnVuY3Rpb24gcmVuZGVyRm9vdGVyKHByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhpZGVGb290ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnRvZGF5KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BsZWFzZSB1c2UgXCJ0b2RheVRleHRcIiBwcm9wIGluc3RlYWQgb2YgXCJ0b2RheVwiIScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmdvdG9TZWxlY3RlZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdQbGVhc2UgdXNlIFwiZ290b1NlbGVjdGVkVGV4dFwiIHByb3AgaW5zdGVhZCBvZiBcImdvdG9TZWxlY3RlZFwiIScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvZGF5VGV4dCA9IHRoaXMucHJvcHMudG9kYXlUZXh0IHx8ICdUb2RheSc7XG4gICAgICAgIHZhciBnb3RvU2VsZWN0ZWRUZXh0ID0gdGhpcy5wcm9wcy5nb3RvU2VsZWN0ZWRUZXh0IHx8ICdHbyB0byBzZWxlY3RlZCc7XG5cbiAgICAgICAgdmFyIGZvb3RlclByb3BzID0ge1xuICAgICAgICAgICAgdG9kYXlUZXh0OiB0b2RheVRleHQsXG4gICAgICAgICAgICBnb3RvU2VsZWN0ZWRUZXh0OiBnb3RvU2VsZWN0ZWRUZXh0LFxuICAgICAgICAgICAgZ290b1RvZGF5OiB0aGlzLmdvdG9Ob3csXG4gICAgICAgICAgICBnb3RvU2VsZWN0ZWQ6IHRoaXMuZ290b1NlbGVjdGVkLmJpbmQodGhpcywgcHJvcHMpLFxuICAgICAgICAgICAgZGF0ZTogcHJvcHMuZGF0ZSxcbiAgICAgICAgICAgIHZpZXdEYXRlOiBwcm9wcy52aWV3RGF0ZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5mb290ZXJGYWN0b3J5ID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvcHMuZm9vdGVyRmFjdG9yeShmb290ZXJQcm9wcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkcC1mb290ZXInIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg6ICcxJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2xpbmsnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkcC1mb290ZXItdG9kYXknLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmb290ZXJQcm9wcy5nb3RvVG9kYXksXG4gICAgICAgICAgICAgICAgICAgIG9uS2V5VXA6IG9uRW50ZXIoZm9vdGVyUHJvcHMuZ290b1RvZGF5KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdG9kYXlUZXh0XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4OiAnMScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdsaW5rJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHAtZm9vdGVyLXNlbGVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogZm9vdGVyUHJvcHMuZ290b1NlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICBvbktleVVwOiBvbkVudGVyKGZvb3RlclByb3BzLmdvdG9TZWxlY3RlZClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdvdG9TZWxlY3RlZFRleHRcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgZ290b05vdzogZnVuY3Rpb24gZ290b05vdygpIHtcbiAgICAgICAgdGhpcy5nb3RvRGF0ZSgrbmV3IERhdGUoKSk7XG4gICAgfSxcblxuICAgIGdvdG9TZWxlY3RlZDogZnVuY3Rpb24gZ290b1NlbGVjdGVkKHByb3BzKSB7XG4gICAgICAgIHRoaXMuZ290b0RhdGUocHJvcHMuZGF0ZSB8fCArbmV3IERhdGUoKSk7XG4gICAgfSxcblxuICAgIGdvdG9EYXRlOiBmdW5jdGlvbiBnb3RvRGF0ZSh2YWx1ZSkge1xuXG4gICAgICAgIHRoaXMuc2V0VmlldygnbW9udGgnKTtcblxuICAgICAgICB0aGlzLnNldFZpZXdEYXRlKHZhbHVlKTtcbiAgICB9LFxuXG4gICAgZ2V0Vmlld0NvbHNwYW46IGZ1bmN0aW9uIGdldFZpZXdDb2xzcGFuKCkge1xuICAgICAgICB2YXIgbWFwID0ge1xuICAgICAgICAgICAgbW9udGg6IDUsXG4gICAgICAgICAgICB5ZWFyOiAyLFxuICAgICAgICAgICAgZGVjYWRlOiAyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG1hcFt0aGlzLmdldFZpZXdOYW1lKCldO1xuICAgIH0sXG5cbiAgICByZW5kZXJIZWFkZXI6IGZ1bmN0aW9uIHJlbmRlckhlYWRlcih2aWV3LCBwcm9wcykge1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhpZGVIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BzID0gcHJvcHMgfHwgdGhpcy5wcm9wcztcblxuICAgICAgICB2YXIgdmlld0RhdGUgPSB0aGlzLmdldFZpZXdEYXRlKCk7XG4gICAgICAgIHZhciBoZWFkZXJUZXh0ID0gdGhpcy5nZXRWaWV3KCkuZ2V0SGVhZGVyVGV4dCh2aWV3RGF0ZSwgcHJvcHMpO1xuXG4gICAgICAgIHZhciBjb2xzcGFuID0gdGhpcy5nZXRWaWV3Q29sc3BhbigpO1xuICAgICAgICB2YXIgcHJldiA9IHRoaXMucHJvcHMubmF2UHJldjtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLnByb3BzLm5hdk5leHQ7XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBIZWFkZXIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJldlRleHQ6IHByZXYsXG4gICAgICAgICAgICAgICAgbmV4dFRleHQ6IG5leHQsXG4gICAgICAgICAgICAgICAgY29sc3BhbjogY29sc3BhbixcbiAgICAgICAgICAgICAgICBvblByZXY6IHRoaXMuaGFuZGxlTmF2UHJldixcbiAgICAgICAgICAgICAgICBvbk5leHQ6IHRoaXMuaGFuZGxlTmF2TmV4dCxcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVWaWV3Q2hhbmdlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVhZGVyVGV4dFxuICAgICAgICApO1xuICAgIH0sXG5cbiAgICBoYW5kbGVSZW5kZXJEYXk6IGZ1bmN0aW9uIGhhbmRsZVJlbmRlckRheShkYXRlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5wcm9wcy5yZW5kZXJEYXkgfHwgZW1wdHlGbikoZGF0ZSkgfHwgW107XG4gICAgfSxcblxuICAgIGhhbmRsZVZpZXdDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVZpZXdDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0Vmlldyh0aGlzLmdldE5leHRWaWV3TmFtZSgpKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNldCB0aGUgdmlldy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2aWV3ICdtb250aCcvJ3llYXInLydkZWNhZGUnXG4gICAgICpcbiAgICAgKiBJdCBjYWxscyBvblZpZXdDaGFuZ2UsIGFuZCBpZiB0aGUgdmlldyBpcyB1bmNvbnRyb2xsZWQsIGFsc28gc2V0cyBpdCBpcyBzdGF0ZSxcbiAgICAgKiBzbyB0aGUgZGF0ZXBpY2tlciBnZXRzIHJlLXJlbmRlcmVkIHZpZXcgdGhlIG5ldyB2aWV3XG4gICAgICpcbiAgICAgKi9cbiAgICBzZXRWaWV3OiBmdW5jdGlvbiBzZXRWaWV3KHZpZXcpIHtcblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25WaWV3Q2hhbmdlID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25WaWV3Q2hhbmdlKHZpZXcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmlldyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB2aWV3OiB2aWV3XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzZXRWaWV3RGF0ZTogZnVuY3Rpb24gc2V0Vmlld0RhdGUobW9tZW50KSB7XG5cbiAgICAgICAgbW9tZW50ID0gdGhpcy50b01vbWVudChtb21lbnQpO1xuXG4gICAgICAgIHZhciBmbiA9IHRoaXMucHJvcHMub25WaWV3RGF0ZUNoYW5nZTtcblxuICAgICAgICBpZiAodHlwZW9mIGZuID09ICdmdW5jdGlvbicpIHtcblxuICAgICAgICAgICAgdmFyIHRleHQgPSBtb21lbnQuZm9ybWF0KHRoaXMucHJvcHMuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0Vmlld05hbWUoKTtcblxuICAgICAgICAgICAgZm4odGV4dCwgbW9tZW50LCB2aWV3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGFzT3duKHRoaXMucHJvcHMsICd2aWV3RGF0ZScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB2aWV3RGF0ZTogbW9tZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXROZXh0OiBmdW5jdGlvbiBnZXROZXh0KCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0Vmlld0RhdGUoKTtcbiAgICAgICAgdmFyIHRvTW9tZW50ID0gdGhpcy50b01vbWVudDtcblxuICAgICAgICByZXR1cm4gKHtcbiAgICAgICAgICAgIG1vbnRoOiBmdW5jdGlvbiBtb250aCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9Nb21lbnQoY3VycmVudCkuYWRkKDEsICdtb250aCcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHllYXI6IGZ1bmN0aW9uIHllYXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvTW9tZW50KGN1cnJlbnQpLmFkZCgxLCAneWVhcicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlY2FkZTogZnVuY3Rpb24gZGVjYWRlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b01vbWVudChjdXJyZW50KS5hZGQoMTAsICd5ZWFyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pW3RoaXMuZ2V0Vmlld05hbWUoKV0oKTtcbiAgICB9LFxuXG4gICAgZ2V0UHJldjogZnVuY3Rpb24gZ2V0UHJldigpIHtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldFZpZXdEYXRlKCk7XG4gICAgICAgIHZhciB0b01vbWVudCA9IHRoaXMudG9Nb21lbnQ7XG5cbiAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICBtb250aDogZnVuY3Rpb24gbW9udGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvTW9tZW50KGN1cnJlbnQpLmFkZCgtMSwgJ21vbnRoJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeWVhcjogZnVuY3Rpb24geWVhcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9Nb21lbnQoY3VycmVudCkuYWRkKC0xLCAneWVhcicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlY2FkZTogZnVuY3Rpb24gZGVjYWRlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b01vbWVudChjdXJyZW50KS5hZGQoLTEwLCAneWVhcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVt0aGlzLmdldFZpZXdOYW1lKCldKCk7XG4gICAgfSxcblxuICAgIGhhbmRsZU5hdmlnYXRpb246IGZ1bmN0aW9uIGhhbmRsZU5hdmlnYXRpb24oZGlyZWN0aW9uLCBldmVudCkge1xuICAgICAgICB2YXIgdmlld01vbWVudCA9IGRpcmVjdGlvbiA9PSAtMSA/IHRoaXMuZ2V0UHJldigpIDogdGhpcy5nZXROZXh0KCk7XG5cbiAgICAgICAgdGhpcy5zZXRWaWV3RGF0ZSh2aWV3TW9tZW50KTtcblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25OYXYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gdmlld01vbWVudC5mb3JtYXQodGhpcy5wcm9wcy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3TmFtZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uTmF2KHRleHQsIHZpZXdNb21lbnQsIHZpZXcsIGRpcmVjdGlvbiwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGhhbmRsZU5hdlByZXY6IGZ1bmN0aW9uIGhhbmRsZU5hdlByZXYoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVOYXZpZ2F0aW9uKC0xLCBldmVudCk7XG4gICAgfSxcblxuICAgIGhhbmRsZU5hdk5leHQ6IGZ1bmN0aW9uIGhhbmRsZU5hdk5leHQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVOYXZpZ2F0aW9uKDEsIGV2ZW50KTtcbiAgICB9LFxuXG4gICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZGF0ZSwgZXZlbnQpIHtcbiAgICAgICAgZGF0ZSA9IHRoaXMudG9Nb21lbnQoZGF0ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMubmF2T25EYXRlQ2xpY2spIHtcbiAgICAgICAgICAgIHZhciB2aWV3RGF0ZSA9IHRoaXMudG9Nb21lbnQodGhpcy5nZXRWaWV3RGF0ZSgpKTtcblxuICAgICAgICAgICAgLy9pdCdzIG5vdCBlbm91Z2ggdG8gY29tcGFyZSBtb250aHMsIHNpbmNlIHRoZSB5ZWFyIGNhbiBjaGFuZ2UgYXMgd2VsbFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vYWxzbyBpdCdzIG9rIHRvIGhhcmRjb2RlIHRoZSBmb3JtYXQgaGVyZVxuICAgICAgICAgICAgdmFyIHZpZXdNb250aCA9IHZpZXdEYXRlLmZvcm1hdCgnWVlZWS1NTScpO1xuICAgICAgICAgICAgdmFyIGRhdGVNb250aCA9IGRhdGUuZm9ybWF0KCdZWVlZLU1NJyk7XG5cbiAgICAgICAgICAgIGlmIChkYXRlTW9udGggPiB2aWV3TW9udGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5hdk5leHQoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlTW9udGggPCB2aWV3TW9udGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5hdlByZXYoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRleHQgPSBkYXRlLmZvcm1hdCh0aGlzLnByb3BzLmRhdGVGb3JtYXQpO1xuXG4gICAgICAgIGlmICghaGFzT3duKHRoaXMucHJvcHMsICdkYXRlJykpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGRlZmF1bHREYXRlOiB0ZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIDsodGhpcy5wcm9wcy5vbkNoYW5nZSB8fCBlbXB0eUZuKSh0ZXh0LCBkYXRlLCBldmVudCk7XG4gICAgfSxcblxuICAgIGhhbmRsZVNlbGVjdDogZnVuY3Rpb24gaGFuZGxlU2VsZWN0KGRhdGUsIGV2ZW50KSB7XG4gICAgICAgIHZhciB2aWV3TmFtZSA9IHRoaXMuZ2V0Vmlld05hbWUoKTtcblxuICAgICAgICB2YXIgcHJvcGVydHkgPSAoe1xuICAgICAgICAgICAgZGVjYWRlOiAneWVhcicsXG4gICAgICAgICAgICB5ZWFyOiAnbW9udGgnXG4gICAgICAgIH0pW3ZpZXdOYW1lXTtcblxuICAgICAgICB2YXIgdmFsdWUgPSBkYXRlLmdldChwcm9wZXJ0eSk7XG4gICAgICAgIHZhciB2aWV3TW9tZW50ID0gdGhpcy50b01vbWVudCh0aGlzLmdldFZpZXdEYXRlKCkpLnNldChwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0UHJldlZpZXdOYW1lKCk7XG5cbiAgICAgICAgdGhpcy5zZXRWaWV3RGF0ZSh2aWV3TW9tZW50KTtcblxuICAgICAgICB0aGlzLnNldFZpZXcodmlldyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IHZpZXdNb21lbnQuZm9ybWF0KHRoaXMucHJvcHMuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0KHRleHQsIHZpZXdNb21lbnQsIHZpZXcsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxufSk7XG5cbkRhdGVQaWNrZXIudmlld3MgPSBWaWV3cztcblxudmFyIFBUID0gUmVhY3QuUHJvcFR5cGVzO1xuXG5EYXRlUGlja2VyLnByb3BUeXBlcyA9IHtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVzZXIgc2VsZWN0cyBhIGRhdGUuXG4gICAgICpcbiAgICAgKiBDYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtczpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlVGV4dCBEYXRlIGZvcm1hdHRlZCBhcyBzdHJpbmdcbiAgICAgKiBAcGFyYW0ge01vbWVudH0gbW9tZW50IE1vbWVudC5qcyBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25DaGFuZ2U6IFBULmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXNlciBuYXZpZ2F0ZXMgdG8gdGhlIG5leHQvcHJldiBtb250aC95ZWFyL2RlY2FkZVxuICAgICAqXG4gICAgICogQ2FsbGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVRleHQgRGF0ZSBmb3JtYXR0ZWQgYXMgc3RyaW5nXG4gICAgICogQHBhcmFtIHtNb21lbnR9IG1vbWVudCBNb21lbnQuanMgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmlldyBUaGUgbmFtZSBvZiB0aGUgY3VycmVudCB2aWV3IChlZzogXCJtb250aFwiKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb24gMSBvciAtMS4gMSBpZiB0aGUgcmlnaHQgYXJyb3csIHRvIG5hdiB0byBuZXh0IHBlcmlvZCB3YXMgcHJlc3NlZC4gLTEgaWYgdGhlIGxlZnQgYXJyb3csIHRvIG5hdiB0byB0aGUgcHJldiBwZXJpb2Qgd2FzIHByZXNzZWQuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBvbk5hdjogUFQuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSB5ZWFyL21vbnRoLlxuICAgICAqXG4gICAgICogQ2FsbGVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVRleHQgRGF0ZSBmb3JtYXR0ZWQgYXMgc3RyaW5nXG4gICAgICogQHBhcmFtIHtNb21lbnR9IG1vbWVudCBNb21lbnQuanMgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmlldyBUaGUgbmFtZSBvZiB0aGUgdmlldyBkaXNwbGF5ZWQgYWZ0ZXIgZm9sbG93aW5nIHRoZSBzZWxlY3Rpb24uIEZvciBub3csIGVpdGhlciBcInllYXJcIiBvciBcIm1vbnRoXCJcbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBvblNlbGVjdDogUFQuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBzaG91bGQgcmV0dXJuIGEgUmVhY3QgRE9NIGZvciB0aGUgZGF5IGNlbGwuIFRoZSBmaXJzdCBwYXJhbSBpcyB0aGUgcHJvcHMgb2JqZWN0LlxuICAgICAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gaGF2ZSBmdWxsIGNvbnRyb2wgb3ZlciB3aGF0IGdldHMgcmVuZGVyZWQgZm9yIGEgZGF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRheVByb3BzIFRoZSBwcm9wcyBvYmplY3QgcGFzc2VkIHRvIGRheSByZW5kZXJpbmdcbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICByZW5kZXJEYXk6IFBULmZ1bmMsXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgY2FuIG1hbmlwdWxhdGUgdGhlIHByb3BzIG9iamVjdCBmb3IgYSBkYXksIGFuZCBTSE9VTEQgcmV0dXJuIGEgcHJvcHMgb2JqZWN0IChhIG5ldyBvbmUsIG9yIHRoZSBzYW1lKS5cbiAgICAgKiBVc2UgdGhpcyBmb3IgQ1VTVE9NIERBWSBTVFlMSU5HLlxuICAgICAqIFlvdSBjYW4gdXNlIHRoaXMgdG8gdGFrZSBmdWxsIGNvbnRyb2wgb3ZlciB0aGUgc3R5bGVzL2NzcyBjbGFzc2VzL2F0dHJpYnV0ZXMgYXBwbGllZCB0byB0aGUgZGF5IGNlbGwgaW4gdGhlIG1vbnRoIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF5UHJvcHNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGRheVByb3BzXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgb25SZW5kZXJEYXk6IFBULmZ1bmMsXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIC8qKioqKioqKioqIFZJRVctcmVsYXRlZCBwcm9wcyAqKioqKioqKioqKiovXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IHZpZXcgdG8gc2hvdyBpbiB0aGUgcGlja2VyLiBUaGlzIGlzIGFuIHVuY29udHJvbGxlZCBwcm9wLlxuICAgICAqIElmIG5vbmUgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCB2aWV3IHdpbGwgYmUgXCJtb250aFwiXG4gICAgICpcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIGRlZmF1bHRWaWV3OiBQVC5zdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyB0byBzaG93IGluIHRoZSBwaWNrZXIuIFRoaXMgaXMgYSBDT05UUk9MTEVEIHByb3AhXG4gICAgICpcbiAgICAgKiBXaGVuIHVzaW5nIHRoaXMgY29udHJvbGxlZCBwcm9wLCBtYWtlIHN1cmUgeW91IHVwZGF0ZSBpdCB3aGVuIGBvblZpZXdDaGFuZ2VgIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICAgICAqIGlmIHlvdSB3YW50IHRvIG5hdmlnYXRlIHRvIGFub3RoZXIgdmlldywgYXMgZXhwZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIHZpZXc6IFBULnN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gbmF2aWdhdGluZyB0byBhbm90aGVyIHZpZXcgZGF0ZS5cbiAgICAgKlxuICAgICAqIENhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1zOlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGVUZXh0IERhdGUgZm9ybWF0dGVkIGFzIHN0cmluZ1xuICAgICAqIEBwYXJhbSB7TW9tZW50fSBtb21lbnQgTW9tZW50LmpzIGluc3RhbmNlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZpZXcgdGhlIG5hbWUgb2YgdGhlIHZpZXcgZGlzcGxheWVkIGFmdGVyIHRoZSBuYXZpZ2F0aW9uIG9jY3Vycy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBvblZpZXdEYXRlQ2hhbmdlOiBQVC5mdW5jLFxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBjaGFuZ2VkLlxuICAgICAqIElmIHlvdSdyZSB1c2luZyB0aGUgY29udHJvbGxlZCBgdmlld2AgcHJvcCwgbWFrZSBzdXJlIHlvdSB1cGRhdGUgdGhlIGB2aWV3YCBwcm9wIGluIHRoaXMgZnVuY3Rpb24gaWYgeW91IHdhbnQgdG8gbmF2aWdhdGUgdG8gYW5vdGhlciB2aWV3LCBhcyBleHBlY3RlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuZXh0VmlldyBPbmUgb2YgXCJtb250aFwiLCBcInllYXJcIiwgXCJkZWNhZGVcIlxuICAgICAqXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIG9uVmlld0NoYW5nZTogUFQuZnVuYyxcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHRzIHRvIHRydWUuIElmIHNwZWNpZmllZCBhcyBmYWxzZSwgd2lsbCBub3QgbmF2aWdhdGUgdG8gdGhlIGRhdGUgdGhhdCB3YXMgY2xpY2tlZCwgZXZlbiBpZiB0aGF0IGRhdGUgaXMgaW4gdGhlIHByZXYvbmV4dCBtb250aFxuICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAqL1xuICAgIG5hdk9uRGF0ZUNsaWNrOiBQVC5ib29sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGVQaWNrZXI7IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG9uS2V5VXAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT0gJ0VudGVyJykge1xuICAgICAgZm4oZXZlbnQpO1xuICAgIH1cbiAgfTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG52YXIgQ09ORklHID0gcmVxdWlyZSgnLi9jb25maWcnKTtcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgdXNlZCB0byBjb252ZXJ0IGEgZGF0ZSB0byBhIG1vbWVudC5cbiAqXG4gKiBJdCBhY2NlcHRzIGlucHV0IGFzIHNyaW5nLCBkYXRlIG9yIG1vbWVudFxuICpcbiAqIEBwYXJhbSAge1N0cmluZy9EYXRlL01vbWVudH0gdmFsdWVcbiAqIEBwYXJhbSAge1N0cmluZ30gW2RhdGVGb3JtYXRdIGlmIHZhbHVlIGlzIHN0cmluZywgaXQgd2lsbCBiZSBwYXJzZWQgdG8gYSBtb21lbnQgdXNpbmcgdGhpcyBmb3JtYXRcbiAqIEBwYXJhbSAge09iamVjdH0gW2NvbmZpZ11cbiAqIEBwYXJhbSAge0Jvb2xlYW59IFtjb25maWcuc3RyaWN0XSB3aGV0aGVyIHRvIHBlcmZvcm0gc3RyaWN0IHBhcnNpbmcgb24gc3RyaW5nc1xuICogQHJldHVybiB7TW9tZW50fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWx1ZSwgZGF0ZUZvcm1hdCwgY29uZmlnKSB7XG4gICAgdmFyIHN0cmljdCA9ICEhKGNvbmZpZyAmJiBjb25maWcuc3RyaWN0KTtcbiAgICB2YXIgbG9jYWxlID0gY29uZmlnICYmIGNvbmZpZy5sb2NhbGU7XG5cbiAgICBkYXRlRm9ybWF0ID0gZGF0ZUZvcm1hdCB8fCBDT05GSUcuZGF0ZUZvcm1hdDtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG1vbWVudCh2YWx1ZSwgZGF0ZUZvcm1hdCwgbG9jYWxlLCBzdHJpY3QpO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBtb21lbnQuaXNNb21lbnQodmFsdWUpP1xuICAgIC8vIFx0XHRcdHZhbHVlOlxuICAgIHJldHVybiBtb21lbnQodmFsdWUgPT0gbnVsbCA/IG5ldyBEYXRlKCkgOiB2YWx1ZSwgdW5kZWZpbmVkLCBsb2NhbGUsIHN0cmljdCk7XG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIENPTkZJRyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpO1xudmFyIEtFWVMgPSBPYmplY3Qua2V5cyhDT05GSUcpO1xuXG5mdW5jdGlvbiBjb3B5TGlzdChzcmMsIHRhcmdldCwgbGlzdCkge1xuICAgIGlmIChzcmMpIHtcbiAgICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc3JjW2tleV07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb3BpZXMgZnJvbSBnaXZlbiBzb3VyY2Ugb2JqZWN0XG4gKiBvbiB0aGUgcmVzdWx0aW5nIG9iamVjdCBvbmx5IHRoZSBwcm9wZXJ0aWVzIGFsc28gZm91bmQgaW4gY2ZnLlxuICpcbiAqIElmIG5vIGNmZyBzcGVjaWZpZWQsIENPTkZJRyBpcyBhc3N1bWVkXG4gKlxuICogQHBhcmFtICB7b2JqZWN0fSBzb3VyY2VcbiAqIEBwYXJhbSAge09iamVjdH0gW2NmZ10gSWYgbm90IHNwZWNpZWQsIENPTkZJRyB3aWxsIGJlIHVzZWRcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXNDb25maWcoc291cmNlLCBjZmcpIHtcblxuICAgIHZhciBrZXlzID0gS0VZUztcblxuICAgIGlmIChjZmcpIHtcbiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGNmZyk7XG4gICAgfVxuXG4gICAgY2ZnID0gY2ZnIHx8IENPTkZJRztcblxuICAgIGlmICghc291cmNlKSB7XG4gICAgICAgIHJldHVybiBhc3NpZ24oe30sIGNmZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvcHlMaXN0KHNvdXJjZSwgYXNzaWduKHt9LCBjZmcpLCBrZXlzKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ09ORklHID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7XG52YXIgdG9Nb21lbnQgPSByZXF1aXJlKCcuLi90b01vbWVudCcpO1xuXG5mdW5jdGlvbiBmKG1vbSwgZm9ybWF0KSB7XG4gICAgcmV0dXJuIHRvTW9tZW50KG1vbSkuZm9ybWF0KGZvcm1hdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGRheTogZnVuY3Rpb24gZGF5KG1vbSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBmKG1vbSwgZm9ybWF0IHx8IENPTkZJRy5kYXlGb3JtYXQpO1xuICAgIH0sXG5cbiAgICBtb250aDogZnVuY3Rpb24gbW9udGgobW9tLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGYobW9tLCBmb3JtYXQgfHwgQ09ORklHLm1vbnRoRm9ybWF0KTtcbiAgICB9LFxuXG4gICAgeWVhcjogZnVuY3Rpb24geWVhcihtb20sIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gZihtb20sIGZvcm1hdCB8fCBDT05GSUcueWVhckZvcm1hdCk7XG4gICAgfVxufTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcblxudmFyIERFRkFVTFRfV0VFS19TVEFSVF9EQVkgPSBtb21lbnQoKS5zdGFydE9mKCd3ZWVrJykuZm9ybWF0KCdkJykgKiAxO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFdlZWtEYXlOYW1lcyhzdGFydERheSwgbG9jYWxlKSB7XG5cblx0dmFyIHdlZWtEYXlzO1xuXG5cdGlmIChsb2NhbGUpIHtcblx0XHR2YXIgZGF0YSA9IG1vbWVudC5sb2NhbGVEYXRhKGxvY2FsZSk7XG5cblx0XHR3ZWVrRGF5cyA9IGRhdGEgJiYgZGF0YS5fd2Vla2RheXNTaG9ydCA/IGRhdGEuX3dlZWtkYXlzU2hvcnQgOiB3ZWVrRGF5cztcblx0fVxuXG5cdHdlZWtEYXlzID0gKHdlZWtEYXlzIHx8IG1vbWVudC53ZWVrZGF5c1Nob3J0KCkpLmNvbmNhdCgpO1xuXG5cdHZhciBuYW1lcyA9IHdlZWtEYXlzO1xuXHR2YXIgaW5kZXggPSBzdGFydERheSA9PSBudWxsID8gREVGQVVMVF9XRUVLX1NUQVJUX0RBWSA6IHN0YXJ0RGF5O1xuXG5cdHdoaWxlIChpbmRleCA+IDApIHtcblx0XHRuYW1lcy5wdXNoKG5hbWVzLnNoaWZ0KCkpO1xuXHRcdGluZGV4LS07XG5cdH1cblxuXHRyZXR1cm4gbmFtZXM7XG59OyIsIi8vISBtb21lbnQuanNcbi8vISB2ZXJzaW9uIDogMi4xMS4wXG4vLyEgYXV0aG9ycyA6IFRpbSBXb29kLCBJc2tyZW4gQ2hlcm5ldiwgTW9tZW50LmpzIGNvbnRyaWJ1dG9yc1xuLy8hIGxpY2Vuc2UgOiBNSVRcbi8vISBtb21lbnRqcy5jb21cblxuOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgZ2xvYmFsLm1vbWVudCA9IGZhY3RvcnkoKVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBob29rQ2FsbGJhY2s7XG5cbiAgICBmdW5jdGlvbiB1dGlsc19ob29rc19faG9va3MgKCkge1xuICAgICAgICByZXR1cm4gaG9va0NhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBpcyBkb25lIHRvIHJlZ2lzdGVyIHRoZSBtZXRob2QgY2FsbGVkIHdpdGggbW9tZW50KClcbiAgICAvLyB3aXRob3V0IGNyZWF0aW5nIGNpcmN1bGFyIGRlcGVuZGVuY2llcy5cbiAgICBmdW5jdGlvbiBzZXRIb29rQ2FsbGJhY2sgKGNhbGxiYWNrKSB7XG4gICAgICAgIGhvb2tDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQXJyYXkoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEYXRlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIERhdGUgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hcChhcnIsIGZuKSB7XG4gICAgICAgIHZhciByZXMgPSBbXSwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgcmVzLnB1c2goZm4oYXJyW2ldLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYXNPd25Qcm9wKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLCBiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHRlbmQoYSwgYikge1xuICAgICAgICBmb3IgKHZhciBpIGluIGIpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wKGIsIGkpKSB7XG4gICAgICAgICAgICAgICAgYVtpXSA9IGJbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzT3duUHJvcChiLCAndG9TdHJpbmcnKSkge1xuICAgICAgICAgICAgYS50b1N0cmluZyA9IGIudG9TdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGFzT3duUHJvcChiLCAndmFsdWVPZicpKSB7XG4gICAgICAgICAgICBhLnZhbHVlT2YgPSBiLnZhbHVlT2Y7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVfdXRjX19jcmVhdGVVVEMgKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCB0cnVlKS51dGMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0UGFyc2luZ0ZsYWdzKCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGRlZXAgY2xvbmUgdGhpcyBvYmplY3QuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbXB0eSAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIHVudXNlZFRva2VucyAgICA6IFtdLFxuICAgICAgICAgICAgdW51c2VkSW5wdXQgICAgIDogW10sXG4gICAgICAgICAgICBvdmVyZmxvdyAgICAgICAgOiAtMixcbiAgICAgICAgICAgIGNoYXJzTGVmdE92ZXIgICA6IDAsXG4gICAgICAgICAgICBudWxsSW5wdXQgICAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGludmFsaWRNb250aCAgICA6IG51bGwsXG4gICAgICAgICAgICBpbnZhbGlkRm9ybWF0ICAgOiBmYWxzZSxcbiAgICAgICAgICAgIHVzZXJJbnZhbGlkYXRlZCA6IGZhbHNlLFxuICAgICAgICAgICAgaXNvICAgICAgICAgICAgIDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQYXJzaW5nRmxhZ3MobSkge1xuICAgICAgICBpZiAobS5fcGYgPT0gbnVsbCkge1xuICAgICAgICAgICAgbS5fcGYgPSBkZWZhdWx0UGFyc2luZ0ZsYWdzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG0uX3BmO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkX19pc1ZhbGlkKG0pIHtcbiAgICAgICAgaWYgKG0uX2lzVmFsaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGZsYWdzID0gZ2V0UGFyc2luZ0ZsYWdzKG0pO1xuICAgICAgICAgICAgbS5faXNWYWxpZCA9ICFpc05hTihtLl9kLmdldFRpbWUoKSkgJiZcbiAgICAgICAgICAgICAgICBmbGFncy5vdmVyZmxvdyA8IDAgJiZcbiAgICAgICAgICAgICAgICAhZmxhZ3MuZW1wdHkgJiZcbiAgICAgICAgICAgICAgICAhZmxhZ3MuaW52YWxpZE1vbnRoICYmXG4gICAgICAgICAgICAgICAgIWZsYWdzLmludmFsaWRXZWVrZGF5ICYmXG4gICAgICAgICAgICAgICAgIWZsYWdzLm51bGxJbnB1dCAmJlxuICAgICAgICAgICAgICAgICFmbGFncy5pbnZhbGlkRm9ybWF0ICYmXG4gICAgICAgICAgICAgICAgIWZsYWdzLnVzZXJJbnZhbGlkYXRlZDtcblxuICAgICAgICAgICAgaWYgKG0uX3N0cmljdCkge1xuICAgICAgICAgICAgICAgIG0uX2lzVmFsaWQgPSBtLl9pc1ZhbGlkICYmXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzLmNoYXJzTGVmdE92ZXIgPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3MudW51c2VkVG9rZW5zLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICBmbGFncy5iaWdIb3VyID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG0uX2lzVmFsaWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmFsaWRfX2NyZWF0ZUludmFsaWQgKGZsYWdzKSB7XG4gICAgICAgIHZhciBtID0gY3JlYXRlX3V0Y19fY3JlYXRlVVRDKE5hTik7XG4gICAgICAgIGlmIChmbGFncyAhPSBudWxsKSB7XG4gICAgICAgICAgICBleHRlbmQoZ2V0UGFyc2luZ0ZsYWdzKG0pLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MobSkudXNlckludmFsaWRhdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PT0gdm9pZCAwO1xuICAgIH1cblxuICAgIC8vIFBsdWdpbnMgdGhhdCBhZGQgcHJvcGVydGllcyBzaG91bGQgYWxzbyBhZGQgdGhlIGtleSBoZXJlIChudWxsIHZhbHVlKSxcbiAgICAvLyBzbyB3ZSBjYW4gcHJvcGVybHkgY2xvbmUgb3Vyc2VsdmVzLlxuICAgIHZhciBtb21lbnRQcm9wZXJ0aWVzID0gdXRpbHNfaG9va3NfX2hvb2tzLm1vbWVudFByb3BlcnRpZXMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNvcHlDb25maWcodG8sIGZyb20pIHtcbiAgICAgICAgdmFyIGksIHByb3AsIHZhbDtcblxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2lzQU1vbWVudE9iamVjdCkpIHtcbiAgICAgICAgICAgIHRvLl9pc0FNb21lbnRPYmplY3QgPSBmcm9tLl9pc0FNb21lbnRPYmplY3Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pKSkge1xuICAgICAgICAgICAgdG8uX2kgPSBmcm9tLl9pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fZikpIHtcbiAgICAgICAgICAgIHRvLl9mID0gZnJvbS5fZjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2wpKSB7XG4gICAgICAgICAgICB0by5fbCA9IGZyb20uX2w7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9zdHJpY3QpKSB7XG4gICAgICAgICAgICB0by5fc3RyaWN0ID0gZnJvbS5fc3RyaWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fdHptKSkge1xuICAgICAgICAgICAgdG8uX3R6bSA9IGZyb20uX3R6bTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2lzVVRDKSkge1xuICAgICAgICAgICAgdG8uX2lzVVRDID0gZnJvbS5faXNVVEM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9vZmZzZXQpKSB7XG4gICAgICAgICAgICB0by5fb2Zmc2V0ID0gZnJvbS5fb2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fcGYpKSB7XG4gICAgICAgICAgICB0by5fcGYgPSBnZXRQYXJzaW5nRmxhZ3MoZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9sb2NhbGUpKSB7XG4gICAgICAgICAgICB0by5fbG9jYWxlID0gZnJvbS5fbG9jYWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vbWVudFByb3BlcnRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChpIGluIG1vbWVudFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBwcm9wID0gbW9tZW50UHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgICAgICB2YWwgPSBmcm9tW3Byb3BdO1xuICAgICAgICAgICAgICAgIGlmICghaXNVbmRlZmluZWQodmFsKSkge1xuICAgICAgICAgICAgICAgICAgICB0b1twcm9wXSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG87XG4gICAgfVxuXG4gICAgdmFyIHVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblxuICAgIC8vIE1vbWVudCBwcm90b3R5cGUgb2JqZWN0XG4gICAgZnVuY3Rpb24gTW9tZW50KGNvbmZpZykge1xuICAgICAgICBjb3B5Q29uZmlnKHRoaXMsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuX2QgPSBuZXcgRGF0ZShjb25maWcuX2QgIT0gbnVsbCA/IGNvbmZpZy5fZC5nZXRUaW1lKCkgOiBOYU4pO1xuICAgICAgICAvLyBQcmV2ZW50IGluZmluaXRlIGxvb3AgaW4gY2FzZSB1cGRhdGVPZmZzZXQgY3JlYXRlcyBuZXcgbW9tZW50XG4gICAgICAgIC8vIG9iamVjdHMuXG4gICAgICAgIGlmICh1cGRhdGVJblByb2dyZXNzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdXBkYXRlSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MudXBkYXRlT2Zmc2V0KHRoaXMpO1xuICAgICAgICAgICAgdXBkYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNNb21lbnQgKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgTW9tZW50IHx8IChvYmogIT0gbnVsbCAmJiBvYmouX2lzQU1vbWVudE9iamVjdCAhPSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhYnNGbG9vciAobnVtYmVyKSB7XG4gICAgICAgIGlmIChudW1iZXIgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9JbnQoYXJndW1lbnRGb3JDb2VyY2lvbikge1xuICAgICAgICB2YXIgY29lcmNlZE51bWJlciA9ICthcmd1bWVudEZvckNvZXJjaW9uLFxuICAgICAgICAgICAgdmFsdWUgPSAwO1xuXG4gICAgICAgIGlmIChjb2VyY2VkTnVtYmVyICE9PSAwICYmIGlzRmluaXRlKGNvZXJjZWROdW1iZXIpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGFic0Zsb29yKGNvZXJjZWROdW1iZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8vIGNvbXBhcmUgdHdvIGFycmF5cywgcmV0dXJuIHRoZSBudW1iZXIgb2YgZGlmZmVyZW5jZXNcbiAgICBmdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycmF5MSwgYXJyYXkyLCBkb250Q29udmVydCkge1xuICAgICAgICB2YXIgbGVuID0gTWF0aC5taW4oYXJyYXkxLmxlbmd0aCwgYXJyYXkyLmxlbmd0aCksXG4gICAgICAgICAgICBsZW5ndGhEaWZmID0gTWF0aC5hYnMoYXJyYXkxLmxlbmd0aCAtIGFycmF5Mi5sZW5ndGgpLFxuICAgICAgICAgICAgZGlmZnMgPSAwLFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKGRvbnRDb252ZXJ0ICYmIGFycmF5MVtpXSAhPT0gYXJyYXkyW2ldKSB8fFxuICAgICAgICAgICAgICAgICghZG9udENvbnZlcnQgJiYgdG9JbnQoYXJyYXkxW2ldKSAhPT0gdG9JbnQoYXJyYXkyW2ldKSkpIHtcbiAgICAgICAgICAgICAgICBkaWZmcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWZmcyArIGxlbmd0aERpZmY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTG9jYWxlKCkge1xuICAgIH1cblxuICAgIC8vIGludGVybmFsIHN0b3JhZ2UgZm9yIGxvY2FsZSBjb25maWcgZmlsZXNcbiAgICB2YXIgbG9jYWxlcyA9IHt9O1xuICAgIHZhciBnbG9iYWxMb2NhbGU7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVMb2NhbGUoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgPyBrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdfJywgJy0nKSA6IGtleTtcbiAgICB9XG5cbiAgICAvLyBwaWNrIHRoZSBsb2NhbGUgZnJvbSB0aGUgYXJyYXlcbiAgICAvLyB0cnkgWydlbi1hdScsICdlbi1nYiddIGFzICdlbi1hdScsICdlbi1nYicsICdlbicsIGFzIGluIG1vdmUgdGhyb3VnaCB0aGUgbGlzdCB0cnlpbmcgZWFjaFxuICAgIC8vIHN1YnN0cmluZyBmcm9tIG1vc3Qgc3BlY2lmaWMgdG8gbGVhc3QsIGJ1dCBtb3ZlIHRvIHRoZSBuZXh0IGFycmF5IGl0ZW0gaWYgaXQncyBhIG1vcmUgc3BlY2lmaWMgdmFyaWFudCB0aGFuIHRoZSBjdXJyZW50IHJvb3RcbiAgICBmdW5jdGlvbiBjaG9vc2VMb2NhbGUobmFtZXMpIHtcbiAgICAgICAgdmFyIGkgPSAwLCBqLCBuZXh0LCBsb2NhbGUsIHNwbGl0O1xuXG4gICAgICAgIHdoaWxlIChpIDwgbmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzcGxpdCA9IG5vcm1hbGl6ZUxvY2FsZShuYW1lc1tpXSkuc3BsaXQoJy0nKTtcbiAgICAgICAgICAgIGogPSBzcGxpdC5sZW5ndGg7XG4gICAgICAgICAgICBuZXh0ID0gbm9ybWFsaXplTG9jYWxlKG5hbWVzW2kgKyAxXSk7XG4gICAgICAgICAgICBuZXh0ID0gbmV4dCA/IG5leHQuc3BsaXQoJy0nKSA6IG51bGw7XG4gICAgICAgICAgICB3aGlsZSAoaiA+IDApIHtcbiAgICAgICAgICAgICAgICBsb2NhbGUgPSBsb2FkTG9jYWxlKHNwbGl0LnNsaWNlKDAsIGopLmpvaW4oJy0nKSk7XG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0Lmxlbmd0aCA+PSBqICYmIGNvbXBhcmVBcnJheXMoc3BsaXQsIG5leHQsIHRydWUpID49IGogLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIG5leHQgYXJyYXkgaXRlbSBpcyBiZXR0ZXIgdGhhbiBhIHNoYWxsb3dlciBzdWJzdHJpbmcgb2YgdGhpcyBvbmVcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkTG9jYWxlKG5hbWUpIHtcbiAgICAgICAgdmFyIG9sZExvY2FsZSA9IG51bGw7XG4gICAgICAgIC8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgd2F5IHRvIHJlZ2lzdGVyIGFuZCBsb2FkIGFsbCB0aGUgbG9jYWxlcyBpbiBOb2RlXG4gICAgICAgIGlmICghbG9jYWxlc1tuYW1lXSAmJiAhaXNVbmRlZmluZWQobW9kdWxlKSAmJlxuICAgICAgICAgICAgICAgIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBvbGRMb2NhbGUgPSBnbG9iYWxMb2NhbGUuX2FiYnI7XG4gICAgICAgICAgICAgICAgcmVxdWlyZSgnLi9sb2NhbGUvJyArIG5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgZGVmaW5lTG9jYWxlIGN1cnJlbnRseSBhbHNvIHNldHMgdGhlIGdsb2JhbCBsb2NhbGUsIHdlXG4gICAgICAgICAgICAgICAgLy8gd2FudCB0byB1bmRvIHRoYXQgZm9yIGxhenkgbG9hZGVkIGxvY2FsZXNcbiAgICAgICAgICAgICAgICBsb2NhbGVfbG9jYWxlc19fZ2V0U2V0R2xvYmFsTG9jYWxlKG9sZExvY2FsZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9jYWxlc1tuYW1lXTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgbG9hZCBsb2NhbGUgYW5kIHRoZW4gc2V0IHRoZSBnbG9iYWwgbG9jYWxlLiAgSWZcbiAgICAvLyBubyBhcmd1bWVudHMgYXJlIHBhc3NlZCBpbiwgaXQgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IGdsb2JhbFxuICAgIC8vIGxvY2FsZSBrZXkuXG4gICAgZnVuY3Rpb24gbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZSAoa2V5LCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGxvY2FsZV9sb2NhbGVzX19nZXRMb2NhbGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBkZWZpbmVMb2NhbGUoa2V5LCB2YWx1ZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIG1vbWVudC5kdXJhdGlvbi5fbG9jYWxlID0gbW9tZW50Ll9sb2NhbGUgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGdsb2JhbExvY2FsZSA9IGRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2xvYmFsTG9jYWxlLl9hYmJyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlZmluZUxvY2FsZSAobmFtZSwgdmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbHVlcy5hYmJyID0gbmFtZTtcbiAgICAgICAgICAgIGxvY2FsZXNbbmFtZV0gPSBsb2NhbGVzW25hbWVdIHx8IG5ldyBMb2NhbGUoKTtcbiAgICAgICAgICAgIGxvY2FsZXNbbmFtZV0uc2V0KHZhbHVlcyk7XG5cbiAgICAgICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXQgZm9yIG5vdzogYWxzbyBzZXQgdGhlIGxvY2FsZVxuICAgICAgICAgICAgbG9jYWxlX2xvY2FsZXNfX2dldFNldEdsb2JhbExvY2FsZShuYW1lKTtcblxuICAgICAgICAgICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB1c2VmdWwgZm9yIHRlc3RpbmdcbiAgICAgICAgICAgIGRlbGV0ZSBsb2NhbGVzW25hbWVdO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIGxvY2FsZSBkYXRhXG4gICAgZnVuY3Rpb24gbG9jYWxlX2xvY2FsZXNfX2dldExvY2FsZSAoa2V5KSB7XG4gICAgICAgIHZhciBsb2NhbGU7XG5cbiAgICAgICAgaWYgKGtleSAmJiBrZXkuX2xvY2FsZSAmJiBrZXkuX2xvY2FsZS5fYWJicikge1xuICAgICAgICAgICAga2V5ID0ga2V5Ll9sb2NhbGUuX2FiYnI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbExvY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNBcnJheShrZXkpKSB7XG4gICAgICAgICAgICAvL3Nob3J0LWNpcmN1aXQgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgICAgICBsb2NhbGUgPSBsb2FkTG9jYWxlKGtleSk7XG4gICAgICAgICAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleSA9IFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNob29zZUxvY2FsZShrZXkpO1xuICAgIH1cblxuICAgIHZhciBhbGlhc2VzID0ge307XG5cbiAgICBmdW5jdGlvbiBhZGRVbml0QWxpYXMgKHVuaXQsIHNob3J0aGFuZCkge1xuICAgICAgICB2YXIgbG93ZXJDYXNlID0gdW5pdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBhbGlhc2VzW2xvd2VyQ2FzZV0gPSBhbGlhc2VzW2xvd2VyQ2FzZSArICdzJ10gPSBhbGlhc2VzW3Nob3J0aGFuZF0gPSB1bml0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXRzKHVuaXRzKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdW5pdHMgPT09ICdzdHJpbmcnID8gYWxpYXNlc1t1bml0c10gfHwgYWxpYXNlc1t1bml0cy50b0xvd2VyQ2FzZSgpXSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVPYmplY3RVbml0cyhpbnB1dE9iamVjdCkge1xuICAgICAgICB2YXIgbm9ybWFsaXplZElucHV0ID0ge30sXG4gICAgICAgICAgICBub3JtYWxpemVkUHJvcCxcbiAgICAgICAgICAgIHByb3A7XG5cbiAgICAgICAgZm9yIChwcm9wIGluIGlucHV0T2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcChpbnB1dE9iamVjdCwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUHJvcCA9IG5vcm1hbGl6ZVVuaXRzKHByb3ApO1xuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkSW5wdXRbbm9ybWFsaXplZFByb3BdID0gaW5wdXRPYmplY3RbcHJvcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRJbnB1dDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIEZ1bmN0aW9uIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZUdldFNldCAodW5pdCwga2VlcFRpbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBnZXRfc2V0X19zZXQodGhpcywgdW5pdCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHV0aWxzX2hvb2tzX19ob29rcy51cGRhdGVPZmZzZXQodGhpcywga2VlcFRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0X3NldF9fZ2V0KHRoaXMsIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldF9zZXRfX2dldCAobW9tLCB1bml0KSB7XG4gICAgICAgIHJldHVybiBtb20uaXNWYWxpZCgpID9cbiAgICAgICAgICAgIG1vbS5fZFsnZ2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSgpIDogTmFOO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldF9zZXRfX3NldCAobW9tLCB1bml0LCB2YWx1ZSkge1xuICAgICAgICBpZiAobW9tLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgbW9tLl9kWydzZXQnICsgKG1vbS5faXNVVEMgPyAnVVRDJyA6ICcnKSArIHVuaXRdKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1PTUVOVFNcblxuICAgIGZ1bmN0aW9uIGdldFNldCAodW5pdHMsIHZhbHVlKSB7XG4gICAgICAgIHZhciB1bml0O1xuICAgICAgICBpZiAodHlwZW9mIHVuaXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yICh1bml0IGluIHVuaXRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQodW5pdCwgdW5pdHNbdW5pdF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzW3VuaXRzXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1t1bml0c10odmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHplcm9GaWxsKG51bWJlciwgdGFyZ2V0TGVuZ3RoLCBmb3JjZVNpZ24pIHtcbiAgICAgICAgdmFyIGFic051bWJlciA9ICcnICsgTWF0aC5hYnMobnVtYmVyKSxcbiAgICAgICAgICAgIHplcm9zVG9GaWxsID0gdGFyZ2V0TGVuZ3RoIC0gYWJzTnVtYmVyLmxlbmd0aCxcbiAgICAgICAgICAgIHNpZ24gPSBudW1iZXIgPj0gMDtcbiAgICAgICAgcmV0dXJuIChzaWduID8gKGZvcmNlU2lnbiA/ICcrJyA6ICcnKSA6ICctJykgK1xuICAgICAgICAgICAgTWF0aC5wb3coMTAsIE1hdGgubWF4KDAsIHplcm9zVG9GaWxsKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkgKyBhYnNOdW1iZXI7XG4gICAgfVxuXG4gICAgdmFyIGZvcm1hdHRpbmdUb2tlbnMgPSAvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oW0hoXW1tKHNzKT98TW98TU0/TT9NP3xEb3xERERvfEREP0Q/RD98ZGRkP2Q/fGRvP3x3W298d10/fFdbb3xXXT98UW8/fFlZWVlZWXxZWVlZWXxZWVlZfFlZfGdnKGdnZz8pP3xHRyhHR0c/KT98ZXxFfGF8QXxoaD98SEg/fG1tP3xzcz98U3sxLDl9fHh8WHx6ej98Wlo/fC4pL2c7XG5cbiAgICB2YXIgbG9jYWxGb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZztcblxuICAgIHZhciBmb3JtYXRGdW5jdGlvbnMgPSB7fTtcblxuICAgIHZhciBmb3JtYXRUb2tlbkZ1bmN0aW9ucyA9IHt9O1xuXG4gICAgLy8gdG9rZW46ICAgICdNJ1xuICAgIC8vIHBhZGRlZDogICBbJ01NJywgMl1cbiAgICAvLyBvcmRpbmFsOiAgJ01vJ1xuICAgIC8vIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7IHRoaXMubW9udGgoKSArIDEgfVxuICAgIGZ1bmN0aW9uIGFkZEZvcm1hdFRva2VuICh0b2tlbiwgcGFkZGVkLCBvcmRpbmFsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgZnVuYyA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tjYWxsYmFja10oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0gPSBmdW5jO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWRkZWQpIHtcbiAgICAgICAgICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW3BhZGRlZFswXV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHplcm9GaWxsKGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgcGFkZGVkWzFdLCBwYWRkZWRbMl0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JkaW5hbCkge1xuICAgICAgICAgICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbb3JkaW5hbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm9yZGluYWwoZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0b2tlbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlRm9ybWF0dGluZ1Rva2VucyhpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQubWF0Y2goL1xcW1tcXHNcXFNdLykpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9eXFxbfFxcXSQvZywgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9cXFxcL2csICcnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KSB7XG4gICAgICAgIHZhciBhcnJheSA9IGZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSwgaSwgbGVuZ3RoO1xuXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dKSB7XG4gICAgICAgICAgICAgICAgYXJyYXlbaV0gPSBmb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldID0gcmVtb3ZlRm9ybWF0dGluZ1Rva2VucyhhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG1vbSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IGFycmF5W2ldIGluc3RhbmNlb2YgRnVuY3Rpb24gPyBhcnJheVtpXS5jYWxsKG1vbSwgZm9ybWF0KSA6IGFycmF5W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBmb3JtYXQgZGF0ZSB1c2luZyBuYXRpdmUgZGF0ZSBvYmplY3RcbiAgICBmdW5jdGlvbiBmb3JtYXRNb21lbnQobSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICghbS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBtLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0ID0gZXhwYW5kRm9ybWF0KGZvcm1hdCwgbS5sb2NhbGVEYXRhKCkpO1xuICAgICAgICBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSA9IGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdIHx8IG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpO1xuXG4gICAgICAgIHJldHVybiBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XShtKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHBhbmRGb3JtYXQoZm9ybWF0LCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIGkgPSA1O1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2VucyhpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsZS5sb25nRGF0ZUZvcm1hdChpbnB1dCkgfHwgaW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbEZvcm1hdHRpbmdUb2tlbnMubGFzdEluZGV4ID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBsb2NhbEZvcm1hdHRpbmdUb2tlbnMudGVzdChmb3JtYXQpKSB7XG4gICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShsb2NhbEZvcm1hdHRpbmdUb2tlbnMsIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2Vucyk7XG4gICAgICAgICAgICBsb2NhbEZvcm1hdHRpbmdUb2tlbnMubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgIGkgLT0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgfVxuXG4gICAgdmFyIG1hdGNoMSAgICAgICAgID0gL1xcZC87ICAgICAgICAgICAgLy8gICAgICAgMCAtIDlcbiAgICB2YXIgbWF0Y2gyICAgICAgICAgPSAvXFxkXFxkLzsgICAgICAgICAgLy8gICAgICAwMCAtIDk5XG4gICAgdmFyIG1hdGNoMyAgICAgICAgID0gL1xcZHszfS87ICAgICAgICAgLy8gICAgIDAwMCAtIDk5OVxuICAgIHZhciBtYXRjaDQgICAgICAgICA9IC9cXGR7NH0vOyAgICAgICAgIC8vICAgIDAwMDAgLSA5OTk5XG4gICAgdmFyIG1hdGNoNiAgICAgICAgID0gL1srLV0/XFxkezZ9LzsgICAgLy8gLTk5OTk5OSAtIDk5OTk5OVxuICAgIHZhciBtYXRjaDF0bzIgICAgICA9IC9cXGRcXGQ/LzsgICAgICAgICAvLyAgICAgICAwIC0gOTlcbiAgICB2YXIgbWF0Y2gzdG80ICAgICAgPSAvXFxkXFxkXFxkXFxkPy87ICAgICAvLyAgICAgOTk5IC0gOTk5OVxuICAgIHZhciBtYXRjaDV0bzYgICAgICA9IC9cXGRcXGRcXGRcXGRcXGRcXGQ/LzsgLy8gICA5OTk5OSAtIDk5OTk5OVxuICAgIHZhciBtYXRjaDF0bzMgICAgICA9IC9cXGR7MSwzfS87ICAgICAgIC8vICAgICAgIDAgLSA5OTlcbiAgICB2YXIgbWF0Y2gxdG80ICAgICAgPSAvXFxkezEsNH0vOyAgICAgICAvLyAgICAgICAwIC0gOTk5OVxuICAgIHZhciBtYXRjaDF0bzYgICAgICA9IC9bKy1dP1xcZHsxLDZ9LzsgIC8vIC05OTk5OTkgLSA5OTk5OTlcblxuICAgIHZhciBtYXRjaFVuc2lnbmVkICA9IC9cXGQrLzsgICAgICAgICAgIC8vICAgICAgIDAgLSBpbmZcbiAgICB2YXIgbWF0Y2hTaWduZWQgICAgPSAvWystXT9cXGQrLzsgICAgICAvLyAgICAtaW5mIC0gaW5mXG5cbiAgICB2YXIgbWF0Y2hPZmZzZXQgICAgPSAvWnxbKy1dXFxkXFxkOj9cXGRcXGQvZ2k7IC8vICswMDowMCAtMDA6MDAgKzAwMDAgLTAwMDAgb3IgWlxuICAgIHZhciBtYXRjaFNob3J0T2Zmc2V0ID0gL1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vZ2k7IC8vICswMCAtMDAgKzAwOjAwIC0wMDowMCArMDAwMCAtMDAwMCBvciBaXG5cbiAgICB2YXIgbWF0Y2hUaW1lc3RhbXAgPSAvWystXT9cXGQrKFxcLlxcZHsxLDN9KT8vOyAvLyAxMjM0NTY3ODkgMTIzNDU2Nzg5LjEyM1xuXG4gICAgLy8gYW55IHdvcmQgKG9yIHR3bykgY2hhcmFjdGVycyBvciBudW1iZXJzIGluY2x1ZGluZyB0d28vdGhyZWUgd29yZCBtb250aCBpbiBhcmFiaWMuXG4gICAgLy8gaW5jbHVkZXMgc2NvdHRpc2ggZ2FlbGljIHR3byB3b3JkIGFuZCBoeXBoZW5hdGVkIG1vbnRoc1xuICAgIHZhciBtYXRjaFdvcmQgPSAvWzAtOV0qKGFbbW5dXFxzPyk/WydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZcXC1dK3xbXFx1MDYwMC1cXHUwNkZGXFwvXSsoXFxzKj9bXFx1MDYwMC1cXHUwNkZGXSspezEsMn0vaTtcblxuXG4gICAgdmFyIHJlZ2V4ZXMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGFkZFJlZ2V4VG9rZW4gKHRva2VuLCByZWdleCwgc3RyaWN0UmVnZXgpIHtcbiAgICAgICAgcmVnZXhlc1t0b2tlbl0gPSBpc0Z1bmN0aW9uKHJlZ2V4KSA/IHJlZ2V4IDogZnVuY3Rpb24gKGlzU3RyaWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gKGlzU3RyaWN0ICYmIHN0cmljdFJlZ2V4KSA/IHN0cmljdFJlZ2V4IDogcmVnZXg7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGFyc2VSZWdleEZvclRva2VuICh0b2tlbiwgY29uZmlnKSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcChyZWdleGVzLCB0b2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHVuZXNjYXBlRm9ybWF0KHRva2VuKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVnZXhlc1t0b2tlbl0oY29uZmlnLl9zdHJpY3QsIGNvbmZpZy5fbG9jYWxlKTtcbiAgICB9XG5cbiAgICAvLyBDb2RlIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNTYxNDkzL2lzLXRoZXJlLWEtcmVnZXhwLWVzY2FwZS1mdW5jdGlvbi1pbi1qYXZhc2NyaXB0XG4gICAgZnVuY3Rpb24gdW5lc2NhcGVGb3JtYXQocykge1xuICAgICAgICByZXR1cm4gcy5yZXBsYWNlKCdcXFxcJywgJycpLnJlcGxhY2UoL1xcXFwoXFxbKXxcXFxcKFxcXSl8XFxbKFteXFxdXFxbXSopXFxdfFxcXFwoLikvZywgZnVuY3Rpb24gKG1hdGNoZWQsIHAxLCBwMiwgcDMsIHA0KSB7XG4gICAgICAgICAgICByZXR1cm4gcDEgfHwgcDIgfHwgcDMgfHwgcDQ7XG4gICAgICAgIH0pLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpO1xuICAgIH1cblxuICAgIHZhciB0b2tlbnMgPSB7fTtcblxuICAgIGZ1bmN0aW9uIGFkZFBhcnNlVG9rZW4gKHRva2VuLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgaSwgZnVuYyA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdG9rZW4gPSBbdG9rZW5dO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBmdW5jID0gZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIGFycmF5W2NhbGxiYWNrXSA9IHRvSW50KGlucHV0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRva2VuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0b2tlbnNbdG9rZW5baV1dID0gZnVuYztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFdlZWtQYXJzZVRva2VuICh0b2tlbiwgY2FsbGJhY2spIHtcbiAgICAgICAgYWRkUGFyc2VUb2tlbih0b2tlbiwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICAgICAgICAgICAgY29uZmlnLl93ID0gY29uZmlnLl93IHx8IHt9O1xuICAgICAgICAgICAgY2FsbGJhY2soaW5wdXQsIGNvbmZpZy5fdywgY29uZmlnLCB0b2tlbik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFRpbWVUb0FycmF5RnJvbVRva2VuKHRva2VuLCBpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIGlmIChpbnB1dCAhPSBudWxsICYmIGhhc093blByb3AodG9rZW5zLCB0b2tlbikpIHtcbiAgICAgICAgICAgIHRva2Vuc1t0b2tlbl0oaW5wdXQsIGNvbmZpZy5fYSwgY29uZmlnLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgWUVBUiA9IDA7XG4gICAgdmFyIE1PTlRIID0gMTtcbiAgICB2YXIgREFURSA9IDI7XG4gICAgdmFyIEhPVVIgPSAzO1xuICAgIHZhciBNSU5VVEUgPSA0O1xuICAgIHZhciBTRUNPTkQgPSA1O1xuICAgIHZhciBNSUxMSVNFQ09ORCA9IDY7XG4gICAgdmFyIFdFRUsgPSA3O1xuICAgIHZhciBXRUVLREFZID0gODtcblxuICAgIGZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCArIDEsIDApKS5nZXRVVENEYXRlKCk7XG4gICAgfVxuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ00nLCBbJ01NJywgMl0sICdNbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9udGgoKSArIDE7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcywgZm9ybWF0KTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdNTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsIGZvcm1hdCk7XG4gICAgfSk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ21vbnRoJywgJ00nKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ00nLCAgICBtYXRjaDF0bzIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ01NJywgICBtYXRjaDF0bzIsIG1hdGNoMik7XG4gICAgYWRkUmVnZXhUb2tlbignTU1NJywgIG1hdGNoV29yZCk7XG4gICAgYWRkUmVnZXhUb2tlbignTU1NTScsIG1hdGNoV29yZCk7XG5cbiAgICBhZGRQYXJzZVRva2VuKFsnTScsICdNTSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgICAgIGFycmF5W01PTlRIXSA9IHRvSW50KGlucHV0KSAtIDE7XG4gICAgfSk7XG5cbiAgICBhZGRQYXJzZVRva2VuKFsnTU1NJywgJ01NTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICAgICAgICB2YXIgbW9udGggPSBjb25maWcuX2xvY2FsZS5tb250aHNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcbiAgICAgICAgLy8gaWYgd2UgZGlkbid0IGZpbmQgYSBtb250aCBuYW1lLCBtYXJrIHRoZSBkYXRlIGFzIGludmFsaWQuXG4gICAgICAgIGlmIChtb250aCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhcnJheVtNT05USF0gPSBtb250aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRNb250aCA9IGlucHV0O1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMT0NBTEVTXG5cbiAgICB2YXIgTU9OVEhTX0lOX0ZPUk1BVCA9IC9EW29EXT8oXFxbW15cXFtcXF1dKlxcXXxcXHMrKStNTU1NPy87XG4gICAgdmFyIGRlZmF1bHRMb2NhbGVNb250aHMgPSAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKTtcbiAgICBmdW5jdGlvbiBsb2NhbGVNb250aHMgKG0sIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHMpID8gdGhpcy5fbW9udGhzW20ubW9udGgoKV0gOlxuICAgICAgICAgICAgdGhpcy5fbW9udGhzW01PTlRIU19JTl9GT1JNQVQudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20ubW9udGgoKV07XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydCA9ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcHRfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyk7XG4gICAgZnVuY3Rpb24gbG9jYWxlTW9udGhzU2hvcnQgKG0sIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydFttLm1vbnRoKCldIDpcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1Nob3J0W01PTlRIU19JTl9GT1JNQVQudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20ubW9udGgoKV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9jYWxlTW9udGhzUGFyc2UgKG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICAgICAgdmFyIGksIG1vbSwgcmVnZXg7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9tb250aHNQYXJzZSkge1xuICAgICAgICAgICAgdGhpcy5fbW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgIC8vIG1ha2UgdGhlIHJlZ2V4IGlmIHdlIGRvbid0IGhhdmUgaXQgYWxyZWFkeVxuICAgICAgICAgICAgbW9tID0gY3JlYXRlX3V0Y19fY3JlYXRlVVRDKFsyMDAwLCBpXSk7XG4gICAgICAgICAgICBpZiAoc3RyaWN0ICYmICF0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMubW9udGhzKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnJykgKyAnJCcsICdpJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5tb250aHNTaG9ydChtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzdHJpY3QgJiYgIXRoaXMuX21vbnRoc1BhcnNlW2ldKSB7XG4gICAgICAgICAgICAgICAgcmVnZXggPSAnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKSArICd8XicgKyB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cChyZWdleC5yZXBsYWNlKCcuJywgJycpLCAnaScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGVzdCB0aGUgcmVnZXhcbiAgICAgICAgICAgIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnTU1NTScgJiYgdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnTU1NJyAmJiB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghc3RyaWN0ICYmIHRoaXMuX21vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gc2V0TW9udGggKG1vbSwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGRheU9mTW9udGg7XG5cbiAgICAgICAgaWYgKCFtb20uaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAvLyBObyBvcFxuICAgICAgICAgICAgcmV0dXJuIG1vbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE86IE1vdmUgdGhpcyBvdXQgb2YgaGVyZSFcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhbHVlID0gbW9tLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAvLyBUT0RPOiBBbm90aGVyIHNpbGVudCBmYWlsdXJlP1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGF5T2ZNb250aCA9IE1hdGgubWluKG1vbS5kYXRlKCksIGRheXNJbk1vbnRoKG1vbS55ZWFyKCksIHZhbHVlKSk7XG4gICAgICAgIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyAnTW9udGgnXSh2YWx1ZSwgZGF5T2ZNb250aCk7XG4gICAgICAgIHJldHVybiBtb207XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2V0TW9udGggKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXRNb250aCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0X3NldF9fZ2V0KHRoaXMsICdNb250aCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF5c0luTW9udGggKCkge1xuICAgICAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyKCksIHRoaXMubW9udGgoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tPdmVyZmxvdyAobSkge1xuICAgICAgICB2YXIgb3ZlcmZsb3c7XG4gICAgICAgIHZhciBhID0gbS5fYTtcblxuICAgICAgICBpZiAoYSAmJiBnZXRQYXJzaW5nRmxhZ3MobSkub3ZlcmZsb3cgPT09IC0yKSB7XG4gICAgICAgICAgICBvdmVyZmxvdyA9XG4gICAgICAgICAgICAgICAgYVtNT05USF0gICAgICAgPCAwIHx8IGFbTU9OVEhdICAgICAgID4gMTEgID8gTU9OVEggOlxuICAgICAgICAgICAgICAgIGFbREFURV0gICAgICAgIDwgMSB8fCBhW0RBVEVdICAgICAgICA+IGRheXNJbk1vbnRoKGFbWUVBUl0sIGFbTU9OVEhdKSA/IERBVEUgOlxuICAgICAgICAgICAgICAgIGFbSE9VUl0gICAgICAgIDwgMCB8fCBhW0hPVVJdICAgICAgICA+IDI0IHx8IChhW0hPVVJdID09PSAyNCAmJiAoYVtNSU5VVEVdICE9PSAwIHx8IGFbU0VDT05EXSAhPT0gMCB8fCBhW01JTExJU0VDT05EXSAhPT0gMCkpID8gSE9VUiA6XG4gICAgICAgICAgICAgICAgYVtNSU5VVEVdICAgICAgPCAwIHx8IGFbTUlOVVRFXSAgICAgID4gNTkgID8gTUlOVVRFIDpcbiAgICAgICAgICAgICAgICBhW1NFQ09ORF0gICAgICA8IDAgfHwgYVtTRUNPTkRdICAgICAgPiA1OSAgPyBTRUNPTkQgOlxuICAgICAgICAgICAgICAgIGFbTUlMTElTRUNPTkRdIDwgMCB8fCBhW01JTExJU0VDT05EXSA+IDk5OSA/IE1JTExJU0VDT05EIDpcbiAgICAgICAgICAgICAgICAtMTtcblxuICAgICAgICAgICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dEYXlPZlllYXIgJiYgKG92ZXJmbG93IDwgWUVBUiB8fCBvdmVyZmxvdyA+IERBVEUpKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cgPSBEQVRFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrcyAmJiBvdmVyZmxvdyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdyA9IFdFRUs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtkYXkgJiYgb3ZlcmZsb3cgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cgPSBXRUVLREFZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MobSkub3ZlcmZsb3cgPSBvdmVyZmxvdztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gICAgICAgIGlmICh1dGlsc19ob29rc19faG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzID09PSBmYWxzZSAmJiAhaXNVbmRlZmluZWQoY29uc29sZSkgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RlcHJlY2F0aW9uIHdhcm5pbmc6ICcgKyBtc2cpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVwcmVjYXRlKG1zZywgZm4pIHtcbiAgICAgICAgdmFyIGZpcnN0VGltZSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZmlyc3RUaW1lKSB7XG4gICAgICAgICAgICAgICAgd2Fybihtc2cgKyAnXFxuQXJndW1lbnRzOiAnICsgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcsICcpICsgJ1xcbicgKyAobmV3IEVycm9yKCkpLnN0YWNrKTtcbiAgICAgICAgICAgICAgICBmaXJzdFRpbWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9LCBmbik7XG4gICAgfVxuXG4gICAgdmFyIGRlcHJlY2F0aW9ucyA9IHt9O1xuXG4gICAgZnVuY3Rpb24gZGVwcmVjYXRlU2ltcGxlKG5hbWUsIG1zZykge1xuICAgICAgICBpZiAoIWRlcHJlY2F0aW9uc1tuYW1lXSkge1xuICAgICAgICAgICAgd2Fybihtc2cpO1xuICAgICAgICAgICAgZGVwcmVjYXRpb25zW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHV0aWxzX2hvb2tzX19ob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MgPSBmYWxzZTtcblxuICAgIC8vIGlzbyA4NjAxIHJlZ2V4XG4gICAgLy8gMDAwMC0wMC0wMCAwMDAwLVcwMCBvciAwMDAwLVcwMC0wICsgVCArIDAwIG9yIDAwOjAwIG9yIDAwOjAwOjAwIG9yIDAwOjAwOjAwLjAwMCArICswMDowMCBvciArMDAwMCBvciArMDApXG4gICAgdmFyIGV4dGVuZGVkSXNvUmVnZXggPSAvXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pLSg/OlxcZFxcZC1cXGRcXGR8V1xcZFxcZC1cXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzo6XFxkXFxkKD86OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbXFwrXFwtXVxcZFxcZCg/Ojo/XFxkXFxkKT98XFxzKlopPyk/LztcbiAgICB2YXIgYmFzaWNJc29SZWdleCA9IC9eXFxzKigoPzpbKy1dXFxkezZ9fFxcZHs0fSkoPzpcXGRcXGRcXGRcXGR8V1xcZFxcZFxcZHxXXFxkXFxkfFxcZFxcZFxcZHxcXGRcXGQpKSg/OihUfCApKFxcZFxcZCg/OlxcZFxcZCg/OlxcZFxcZCg/OlsuLF1cXGQrKT8pPyk/KShbXFwrXFwtXVxcZFxcZCg/Ojo/XFxkXFxkKT98XFxzKlopPyk/LztcblxuICAgIHZhciB0elJlZ2V4ID0gL1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vO1xuXG4gICAgdmFyIGlzb0RhdGVzID0gW1xuICAgICAgICBbJ1lZWVlZWS1NTS1ERCcsIC9bKy1dXFxkezZ9LVxcZFxcZC1cXGRcXGQvXSxcbiAgICAgICAgWydZWVlZLU1NLUREJywgL1xcZHs0fS1cXGRcXGQtXFxkXFxkL10sXG4gICAgICAgIFsnR0dHRy1bV11XVy1FJywgL1xcZHs0fS1XXFxkXFxkLVxcZC9dLFxuICAgICAgICBbJ0dHR0ctW1ddV1cnLCAvXFxkezR9LVdcXGRcXGQvLCBmYWxzZV0sXG4gICAgICAgIFsnWVlZWS1EREQnLCAvXFxkezR9LVxcZHszfS9dLFxuICAgICAgICBbJ1lZWVktTU0nLCAvXFxkezR9LVxcZFxcZC8sIGZhbHNlXSxcbiAgICAgICAgWydZWVlZWVlNTUREJywgL1srLV1cXGR7MTB9L10sXG4gICAgICAgIFsnWVlZWU1NREQnLCAvXFxkezh9L10sXG4gICAgICAgIC8vIFlZWVlNTSBpcyBOT1QgYWxsb3dlZCBieSB0aGUgc3RhbmRhcmRcbiAgICAgICAgWydHR0dHW1ddV1dFJywgL1xcZHs0fVdcXGR7M30vXSxcbiAgICAgICAgWydHR0dHW1ddV1cnLCAvXFxkezR9V1xcZHsyfS8sIGZhbHNlXSxcbiAgICAgICAgWydZWVlZREREJywgL1xcZHs3fS9dXG4gICAgXTtcblxuICAgIC8vIGlzbyB0aW1lIGZvcm1hdHMgYW5kIHJlZ2V4ZXNcbiAgICB2YXIgaXNvVGltZXMgPSBbXG4gICAgICAgIFsnSEg6bW06c3MuU1NTUycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZFxcLlxcZCsvXSxcbiAgICAgICAgWydISDptbTpzcyxTU1NTJywgL1xcZFxcZDpcXGRcXGQ6XFxkXFxkLFxcZCsvXSxcbiAgICAgICAgWydISDptbTpzcycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZC9dLFxuICAgICAgICBbJ0hIOm1tJywgL1xcZFxcZDpcXGRcXGQvXSxcbiAgICAgICAgWydISG1tc3MuU1NTUycsIC9cXGRcXGRcXGRcXGRcXGRcXGRcXC5cXGQrL10sXG4gICAgICAgIFsnSEhtbXNzLFNTU1MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkLFxcZCsvXSxcbiAgICAgICAgWydISG1tc3MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkL10sXG4gICAgICAgIFsnSEhtbScsIC9cXGRcXGRcXGRcXGQvXSxcbiAgICAgICAgWydISCcsIC9cXGRcXGQvXVxuICAgIF07XG5cbiAgICB2YXIgYXNwTmV0SnNvblJlZ2V4ID0gL15cXC8/RGF0ZVxcKChcXC0/XFxkKykvaTtcblxuICAgIC8vIGRhdGUgZnJvbSBpc28gZm9ybWF0XG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbUlTTyhjb25maWcpIHtcbiAgICAgICAgdmFyIGksIGwsXG4gICAgICAgICAgICBzdHJpbmcgPSBjb25maWcuX2ksXG4gICAgICAgICAgICBtYXRjaCA9IGV4dGVuZGVkSXNvUmVnZXguZXhlYyhzdHJpbmcpIHx8IGJhc2ljSXNvUmVnZXguZXhlYyhzdHJpbmcpLFxuICAgICAgICAgICAgYWxsb3dUaW1lLCBkYXRlRm9ybWF0LCB0aW1lRm9ybWF0LCB0ekZvcm1hdDtcblxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmlzbyA9IHRydWU7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBpc29EYXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNvRGF0ZXNbaV1bMV0uZXhlYyhtYXRjaFsxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCA9IGlzb0RhdGVzW2ldWzBdO1xuICAgICAgICAgICAgICAgICAgICBhbGxvd1RpbWUgPSBpc29EYXRlc1tpXVsyXSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRlRm9ybWF0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWF0Y2hbM10pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gaXNvVGltZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc29UaW1lc1tpXVsxXS5leGVjKG1hdGNoWzNdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2hbMl0gc2hvdWxkIGJlICdUJyBvciBzcGFjZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUZvcm1hdCA9IChtYXRjaFsyXSB8fCAnICcpICsgaXNvVGltZXNbaV1bMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGltZUZvcm1hdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbGxvd1RpbWUgJiYgdGltZUZvcm1hdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hdGNoWzRdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR6UmVnZXguZXhlYyhtYXRjaFs0XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHpGb3JtYXQgPSAnWic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWcuX2YgPSBkYXRlRm9ybWF0ICsgKHRpbWVGb3JtYXQgfHwgJycpICsgKHR6Rm9ybWF0IHx8ICcnKTtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGF0ZSBmcm9tIGlzbyBmb3JtYXQgb3IgZmFsbGJhY2tcbiAgICBmdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nKGNvbmZpZykge1xuICAgICAgICB2YXIgbWF0Y2hlZCA9IGFzcE5ldEpzb25SZWdleC5leGVjKGNvbmZpZy5faSk7XG5cbiAgICAgICAgaWYgKG1hdGNoZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKCttYXRjaGVkWzFdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbmZpZ0Zyb21JU08oY29uZmlnKTtcbiAgICAgICAgaWYgKGNvbmZpZy5faXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWcuX2lzVmFsaWQ7XG4gICAgICAgICAgICB1dGlsc19ob29rc19faG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHV0aWxzX2hvb2tzX19ob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayA9IGRlcHJlY2F0ZShcbiAgICAgICAgJ21vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlLiBUaGlzIGlzICcgK1xuICAgICAgICAnZGlzY291cmFnZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGNvbWluZyBtYWpvciAnICtcbiAgICAgICAgJ3JlbGVhc2UuIFBsZWFzZSByZWZlciB0byAnICtcbiAgICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDA3IGZvciBtb3JlIGluZm8uJyxcbiAgICAgICAgZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLl9kID0gbmV3IERhdGUoY29uZmlnLl9pICsgKGNvbmZpZy5fdXNlVVRDID8gJyBVVEMnIDogJycpKTtcbiAgICAgICAgfVxuICAgICk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEYXRlICh5LCBtLCBkLCBoLCBNLCBzLCBtcykge1xuICAgICAgICAvL2Nhbid0IGp1c3QgYXBwbHkoKSB0byBjcmVhdGUgYSBkYXRlOlxuICAgICAgICAvL2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTgxMzQ4L2luc3RhbnRpYXRpbmctYS1qYXZhc2NyaXB0LW9iamVjdC1ieS1jYWxsaW5nLXByb3RvdHlwZS1jb25zdHJ1Y3Rvci1hcHBseVxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIE0sIHMsIG1zKTtcblxuICAgICAgICAvL3RoZSBkYXRlIGNvbnN0cnVjdG9yIHJlbWFwcyB5ZWFycyAwLTk5IHRvIDE5MDAtMTk5OVxuICAgICAgICBpZiAoeSA8IDEwMCAmJiB5ID49IDAgJiYgaXNGaW5pdGUoZGF0ZS5nZXRGdWxsWWVhcigpKSkge1xuICAgICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcih5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVVENEYXRlICh5KSB7XG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG5cbiAgICAgICAgLy90aGUgRGF0ZS5VVEMgZnVuY3Rpb24gcmVtYXBzIHllYXJzIDAtOTkgdG8gMTkwMC0xOTk5XG4gICAgICAgIGlmICh5IDwgMTAwICYmIHkgPj0gMCAmJiBpc0Zpbml0ZShkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpKSB7XG4gICAgICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnWVknLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy55ZWFyKCkgJSAxMDA7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbigwLCBbJ1lZWVknLCAgIDRdLCAgICAgICAwLCAneWVhcicpO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVknLCAgNV0sICAgICAgIDAsICd5ZWFyJyk7XG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZWVknLCA2LCB0cnVlXSwgMCwgJ3llYXInKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygneWVhcicsICd5Jyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdZJywgICAgICBtYXRjaFNpZ25lZCk7XG4gICAgYWRkUmVnZXhUb2tlbignWVknLCAgICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1lZWVknLCAgIG1hdGNoMXRvNCwgbWF0Y2g0KTtcbiAgICBhZGRSZWdleFRva2VuKCdZWVlZWScsICBtYXRjaDF0bzYsIG1hdGNoNik7XG4gICAgYWRkUmVnZXhUb2tlbignWVlZWVlZJywgbWF0Y2gxdG82LCBtYXRjaDYpO1xuXG4gICAgYWRkUGFyc2VUb2tlbihbJ1lZWVlZJywgJ1lZWVlZWSddLCBZRUFSKTtcbiAgICBhZGRQYXJzZVRva2VuKCdZWVlZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICBhcnJheVtZRUFSXSA9IGlucHV0Lmxlbmd0aCA9PT0gMiA/IHV0aWxzX2hvb2tzX19ob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCkgOiB0b0ludChpbnB1dCk7XG4gICAgfSk7XG4gICAgYWRkUGFyc2VUb2tlbignWVknLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgICAgIGFycmF5W1lFQVJdID0gdXRpbHNfaG9va3NfX2hvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbiAgICB9KTtcblxuICAgIC8vIEhFTFBFUlNcblxuICAgIGZ1bmN0aW9uIGRheXNJblllYXIoeWVhcikge1xuICAgICAgICByZXR1cm4gaXNMZWFwWWVhcih5ZWFyKSA/IDM2NiA6IDM2NTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgICAgICAgcmV0dXJuICh5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwKSB8fCB5ZWFyICUgNDAwID09PSAwO1xuICAgIH1cblxuICAgIC8vIEhPT0tTXG5cbiAgICB1dGlsc19ob29rc19faG9va3MucGFyc2VUd29EaWdpdFllYXIgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRvSW50KGlucHV0KSArICh0b0ludChpbnB1dCkgPiA2OCA/IDE5MDAgOiAyMDAwKTtcbiAgICB9O1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgdmFyIGdldFNldFllYXIgPSBtYWtlR2V0U2V0KCdGdWxsWWVhcicsIGZhbHNlKTtcblxuICAgIGZ1bmN0aW9uIGdldElzTGVhcFllYXIgKCkge1xuICAgICAgICByZXR1cm4gaXNMZWFwWWVhcih0aGlzLnllYXIoKSk7XG4gICAgfVxuXG4gICAgLy8gc3RhcnQtb2YtZmlyc3Qtd2VlayAtIHN0YXJ0LW9mLXllYXJcbiAgICBmdW5jdGlvbiBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpIHtcbiAgICAgICAgdmFyIC8vIGZpcnN0LXdlZWsgZGF5IC0tIHdoaWNoIGphbnVhcnkgaXMgYWx3YXlzIGluIHRoZSBmaXJzdCB3ZWVrICg0IGZvciBpc28sIDEgZm9yIG90aGVyKVxuICAgICAgICAgICAgZndkID0gNyArIGRvdyAtIGRveSxcbiAgICAgICAgICAgIC8vIGZpcnN0LXdlZWsgZGF5IGxvY2FsIHdlZWtkYXkgLS0gd2hpY2ggbG9jYWwgd2Vla2RheSBpcyBmd2RcbiAgICAgICAgICAgIGZ3ZGx3ID0gKDcgKyBjcmVhdGVVVENEYXRlKHllYXIsIDAsIGZ3ZCkuZ2V0VVRDRGF5KCkgLSBkb3cpICUgNztcblxuICAgICAgICByZXR1cm4gLWZ3ZGx3ICsgZndkIC0gMTtcbiAgICB9XG5cbiAgICAvL2h0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZSNDYWxjdWxhdGluZ19hX2RhdGVfZ2l2ZW5fdGhlX3llYXIuMkNfd2Vla19udW1iZXJfYW5kX3dlZWtkYXlcbiAgICBmdW5jdGlvbiBkYXlPZlllYXJGcm9tV2Vla3MoeWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICAgICAgdmFyIGxvY2FsV2Vla2RheSA9ICg3ICsgd2Vla2RheSAtIGRvdykgJSA3LFxuICAgICAgICAgICAgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSksXG4gICAgICAgICAgICBkYXlPZlllYXIgPSAxICsgNyAqICh3ZWVrIC0gMSkgKyBsb2NhbFdlZWtkYXkgKyB3ZWVrT2Zmc2V0LFxuICAgICAgICAgICAgcmVzWWVhciwgcmVzRGF5T2ZZZWFyO1xuXG4gICAgICAgIGlmIChkYXlPZlllYXIgPD0gMCkge1xuICAgICAgICAgICAgcmVzWWVhciA9IHllYXIgLSAxO1xuICAgICAgICAgICAgcmVzRGF5T2ZZZWFyID0gZGF5c0luWWVhcihyZXNZZWFyKSArIGRheU9mWWVhcjtcbiAgICAgICAgfSBlbHNlIGlmIChkYXlPZlllYXIgPiBkYXlzSW5ZZWFyKHllYXIpKSB7XG4gICAgICAgICAgICByZXNZZWFyID0geWVhciArIDE7XG4gICAgICAgICAgICByZXNEYXlPZlllYXIgPSBkYXlPZlllYXIgLSBkYXlzSW5ZZWFyKHllYXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzWWVhciA9IHllYXI7XG4gICAgICAgICAgICByZXNEYXlPZlllYXIgPSBkYXlPZlllYXI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeWVhcjogcmVzWWVhcixcbiAgICAgICAgICAgIGRheU9mWWVhcjogcmVzRGF5T2ZZZWFyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Vla09mWWVhcihtb20sIGRvdywgZG95KSB7XG4gICAgICAgIHZhciB3ZWVrT2Zmc2V0ID0gZmlyc3RXZWVrT2Zmc2V0KG1vbS55ZWFyKCksIGRvdywgZG95KSxcbiAgICAgICAgICAgIHdlZWsgPSBNYXRoLmZsb29yKChtb20uZGF5T2ZZZWFyKCkgLSB3ZWVrT2Zmc2V0IC0gMSkgLyA3KSArIDEsXG4gICAgICAgICAgICByZXNXZWVrLCByZXNZZWFyO1xuXG4gICAgICAgIGlmICh3ZWVrIDwgMSkge1xuICAgICAgICAgICAgcmVzWWVhciA9IG1vbS55ZWFyKCkgLSAxO1xuICAgICAgICAgICAgcmVzV2VlayA9IHdlZWsgKyB3ZWVrc0luWWVhcihyZXNZZWFyLCBkb3csIGRveSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2VlayA+IHdlZWtzSW5ZZWFyKG1vbS55ZWFyKCksIGRvdywgZG95KSkge1xuICAgICAgICAgICAgcmVzV2VlayA9IHdlZWsgLSB3ZWVrc0luWWVhcihtb20ueWVhcigpLCBkb3csIGRveSk7XG4gICAgICAgICAgICByZXNZZWFyID0gbW9tLnllYXIoKSArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNZZWFyID0gbW9tLnllYXIoKTtcbiAgICAgICAgICAgIHJlc1dlZWsgPSB3ZWVrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdlZWs6IHJlc1dlZWssXG4gICAgICAgICAgICB5ZWFyOiByZXNZZWFyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Vla3NJblllYXIoeWVhciwgZG93LCBkb3kpIHtcbiAgICAgICAgdmFyIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpLFxuICAgICAgICAgICAgd2Vla09mZnNldE5leHQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciArIDEsIGRvdywgZG95KTtcbiAgICAgICAgcmV0dXJuIChkYXlzSW5ZZWFyKHllYXIpIC0gd2Vla09mZnNldCArIHdlZWtPZmZzZXROZXh0KSAvIDc7XG4gICAgfVxuXG4gICAgLy8gUGljayB0aGUgZmlyc3QgZGVmaW5lZCBvZiB0d28gb3IgdGhyZWUgYXJndW1lbnRzLlxuICAgIGZ1bmN0aW9uIGRlZmF1bHRzKGEsIGIsIGMpIHtcbiAgICAgICAgaWYgKGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGIgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3VycmVudERhdGVBcnJheShjb25maWcpIHtcbiAgICAgICAgLy8gaG9va3MgaXMgYWN0dWFsbHkgdGhlIGV4cG9ydGVkIG1vbWVudCBvYmplY3RcbiAgICAgICAgdmFyIG5vd1ZhbHVlID0gbmV3IERhdGUodXRpbHNfaG9va3NfX2hvb2tzLm5vdygpKTtcbiAgICAgICAgaWYgKGNvbmZpZy5fdXNlVVRDKSB7XG4gICAgICAgICAgICByZXR1cm4gW25vd1ZhbHVlLmdldFVUQ0Z1bGxZZWFyKCksIG5vd1ZhbHVlLmdldFVUQ01vbnRoKCksIG5vd1ZhbHVlLmdldFVUQ0RhdGUoKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtub3dWYWx1ZS5nZXRGdWxsWWVhcigpLCBub3dWYWx1ZS5nZXRNb250aCgpLCBub3dWYWx1ZS5nZXREYXRlKCldO1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnQgYW4gYXJyYXkgdG8gYSBkYXRlLlxuICAgIC8vIHRoZSBhcnJheSBzaG91bGQgbWlycm9yIHRoZSBwYXJhbWV0ZXJzIGJlbG93XG4gICAgLy8gbm90ZTogYWxsIHZhbHVlcyBwYXN0IHRoZSB5ZWFyIGFyZSBvcHRpb25hbCBhbmQgd2lsbCBkZWZhdWx0IHRvIHRoZSBsb3dlc3QgcG9zc2libGUgdmFsdWUuXG4gICAgLy8gW3llYXIsIG1vbnRoLCBkYXkgLCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmRdXG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbUFycmF5IChjb25maWcpIHtcbiAgICAgICAgdmFyIGksIGRhdGUsIGlucHV0ID0gW10sIGN1cnJlbnREYXRlLCB5ZWFyVG9Vc2U7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5fZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZUFycmF5KGNvbmZpZyk7XG5cbiAgICAgICAgLy9jb21wdXRlIGRheSBvZiB0aGUgeWVhciBmcm9tIHdlZWtzIGFuZCB3ZWVrZGF5c1xuICAgICAgICBpZiAoY29uZmlnLl93ICYmIGNvbmZpZy5fYVtEQVRFXSA9PSBudWxsICYmIGNvbmZpZy5fYVtNT05USF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2lmIHRoZSBkYXkgb2YgdGhlIHllYXIgaXMgc2V0LCBmaWd1cmUgb3V0IHdoYXQgaXQgaXNcbiAgICAgICAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyKSB7XG4gICAgICAgICAgICB5ZWFyVG9Vc2UgPSBkZWZhdWx0cyhjb25maWcuX2FbWUVBUl0sIGN1cnJlbnREYXRlW1lFQVJdKTtcblxuICAgICAgICAgICAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyVG9Vc2UpKSB7XG4gICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93RGF5T2ZZZWFyID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGF0ZSA9IGNyZWF0ZVVUQ0RhdGUoeWVhclRvVXNlLCAwLCBjb25maWcuX2RheU9mWWVhcik7XG4gICAgICAgICAgICBjb25maWcuX2FbTU9OVEhdID0gZGF0ZS5nZXRVVENNb250aCgpO1xuICAgICAgICAgICAgY29uZmlnLl9hW0RBVEVdID0gZGF0ZS5nZXRVVENEYXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZhdWx0IHRvIGN1cnJlbnQgZGF0ZS5cbiAgICAgICAgLy8gKiBpZiBubyB5ZWFyLCBtb250aCwgZGF5IG9mIG1vbnRoIGFyZSBnaXZlbiwgZGVmYXVsdCB0byB0b2RheVxuICAgICAgICAvLyAqIGlmIGRheSBvZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBtb250aCBhbmQgeWVhclxuICAgICAgICAvLyAqIGlmIG1vbnRoIGlzIGdpdmVuLCBkZWZhdWx0IG9ubHkgeWVhclxuICAgICAgICAvLyAqIGlmIHllYXIgaXMgZ2l2ZW4sIGRvbid0IGRlZmF1bHQgYW55dGhpbmdcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDMgJiYgY29uZmlnLl9hW2ldID09IG51bGw7ICsraSkge1xuICAgICAgICAgICAgY29uZmlnLl9hW2ldID0gaW5wdXRbaV0gPSBjdXJyZW50RGF0ZVtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFplcm8gb3V0IHdoYXRldmVyIHdhcyBub3QgZGVmYXVsdGVkLCBpbmNsdWRpbmcgdGltZVxuICAgICAgICBmb3IgKDsgaSA8IDc7IGkrKykge1xuICAgICAgICAgICAgY29uZmlnLl9hW2ldID0gaW5wdXRbaV0gPSAoY29uZmlnLl9hW2ldID09IG51bGwpID8gKGkgPT09IDIgPyAxIDogMCkgOiBjb25maWcuX2FbaV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgMjQ6MDA6MDAuMDAwXG4gICAgICAgIGlmIChjb25maWcuX2FbSE9VUl0gPT09IDI0ICYmXG4gICAgICAgICAgICAgICAgY29uZmlnLl9hW01JTlVURV0gPT09IDAgJiZcbiAgICAgICAgICAgICAgICBjb25maWcuX2FbU0VDT05EXSA9PT0gMCAmJlxuICAgICAgICAgICAgICAgIGNvbmZpZy5fYVtNSUxMSVNFQ09ORF0gPT09IDApIHtcbiAgICAgICAgICAgIGNvbmZpZy5fbmV4dERheSA9IHRydWU7XG4gICAgICAgICAgICBjb25maWcuX2FbSE9VUl0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uZmlnLl9kID0gKGNvbmZpZy5fdXNlVVRDID8gY3JlYXRlVVRDRGF0ZSA6IGNyZWF0ZURhdGUpLmFwcGx5KG51bGwsIGlucHV0KTtcbiAgICAgICAgLy8gQXBwbHkgdGltZXpvbmUgb2Zmc2V0IGZyb20gaW5wdXQuIFRoZSBhY3R1YWwgdXRjT2Zmc2V0IGNhbiBiZSBjaGFuZ2VkXG4gICAgICAgIC8vIHdpdGggcGFyc2Vab25lLlxuICAgICAgICBpZiAoY29uZmlnLl90em0gIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uZmlnLl9kLnNldFVUQ01pbnV0ZXMoY29uZmlnLl9kLmdldFVUQ01pbnV0ZXMoKSAtIGNvbmZpZy5fdHptKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuX25leHREYXkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fYVtIT1VSXSA9IDI0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZykge1xuICAgICAgICB2YXIgdywgd2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95LCB0ZW1wLCB3ZWVrZGF5T3ZlcmZsb3c7XG5cbiAgICAgICAgdyA9IGNvbmZpZy5fdztcbiAgICAgICAgaWYgKHcuR0cgIT0gbnVsbCB8fCB3LlcgIT0gbnVsbCB8fCB3LkUgIT0gbnVsbCkge1xuICAgICAgICAgICAgZG93ID0gMTtcbiAgICAgICAgICAgIGRveSA9IDQ7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IFdlIG5lZWQgdG8gdGFrZSB0aGUgY3VycmVudCBpc29XZWVrWWVhciwgYnV0IHRoYXQgZGVwZW5kcyBvblxuICAgICAgICAgICAgLy8gaG93IHdlIGludGVycHJldCBub3cgKGxvY2FsLCB1dGMsIGZpeGVkIG9mZnNldCkuIFNvIGNyZWF0ZVxuICAgICAgICAgICAgLy8gYSBub3cgdmVyc2lvbiBvZiBjdXJyZW50IGNvbmZpZyAodGFrZSBsb2NhbC91dGMvb2Zmc2V0IGZsYWdzLCBhbmRcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBub3cpLlxuICAgICAgICAgICAgd2Vla1llYXIgPSBkZWZhdWx0cyh3LkdHLCBjb25maWcuX2FbWUVBUl0sIHdlZWtPZlllYXIobG9jYWxfX2NyZWF0ZUxvY2FsKCksIDEsIDQpLnllYXIpO1xuICAgICAgICAgICAgd2VlayA9IGRlZmF1bHRzKHcuVywgMSk7XG4gICAgICAgICAgICB3ZWVrZGF5ID0gZGVmYXVsdHMody5FLCAxKTtcbiAgICAgICAgICAgIGlmICh3ZWVrZGF5IDwgMSB8fCB3ZWVrZGF5ID4gNykge1xuICAgICAgICAgICAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb3cgPSBjb25maWcuX2xvY2FsZS5fd2Vlay5kb3c7XG4gICAgICAgICAgICBkb3kgPSBjb25maWcuX2xvY2FsZS5fd2Vlay5kb3k7XG5cbiAgICAgICAgICAgIHdlZWtZZWFyID0gZGVmYXVsdHMody5nZywgY29uZmlnLl9hW1lFQVJdLCB3ZWVrT2ZZZWFyKGxvY2FsX19jcmVhdGVMb2NhbCgpLCBkb3csIGRveSkueWVhcik7XG4gICAgICAgICAgICB3ZWVrID0gZGVmYXVsdHMody53LCAxKTtcblxuICAgICAgICAgICAgaWYgKHcuZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gd2Vla2RheSAtLSBsb3cgZGF5IG51bWJlcnMgYXJlIGNvbnNpZGVyZWQgbmV4dCB3ZWVrXG4gICAgICAgICAgICAgICAgd2Vla2RheSA9IHcuZDtcbiAgICAgICAgICAgICAgICBpZiAod2Vla2RheSA8IDAgfHwgd2Vla2RheSA+IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheU92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHcuZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gbG9jYWwgd2Vla2RheSAtLSBjb3VudGluZyBzdGFydHMgZnJvbSBiZWdpbmluZyBvZiB3ZWVrXG4gICAgICAgICAgICAgICAgd2Vla2RheSA9IHcuZSArIGRvdztcbiAgICAgICAgICAgICAgICBpZiAody5lIDwgMCB8fCB3LmUgPiA2KSB7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHRvIGJlZ2luaW5nIG9mIHdlZWtcbiAgICAgICAgICAgICAgICB3ZWVrZGF5ID0gZG93O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWVrIDwgMSB8fCB3ZWVrID4gd2Vla3NJblllYXIod2Vla1llYXIsIGRvdywgZG95KSkge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93V2Vla3MgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHdlZWtkYXlPdmVyZmxvdyAhPSBudWxsKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrZGF5ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXAgPSBkYXlPZlllYXJGcm9tV2Vla3Mod2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95KTtcbiAgICAgICAgICAgIGNvbmZpZy5fYVtZRUFSXSA9IHRlbXAueWVhcjtcbiAgICAgICAgICAgIGNvbmZpZy5fZGF5T2ZZZWFyID0gdGVtcC5kYXlPZlllYXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb25zdGFudCB0aGF0IHJlZmVycyB0byB0aGUgSVNPIHN0YW5kYXJkXG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLklTT184NjAxID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAvLyBkYXRlIGZyb20gc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nXG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpIHtcbiAgICAgICAgLy8gVE9ETzogTW92ZSB0aGlzIHRvIGFub3RoZXIgcGFydCBvZiB0aGUgY3JlYXRpb24gZmxvdyB0byBwcmV2ZW50IGNpcmN1bGFyIGRlcHNcbiAgICAgICAgaWYgKGNvbmZpZy5fZiA9PT0gdXRpbHNfaG9va3NfX2hvb2tzLklTT184NjAxKSB7XG4gICAgICAgICAgICBjb25maWdGcm9tSVNPKGNvbmZpZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25maWcuX2EgPSBbXTtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHkgPSB0cnVlO1xuXG4gICAgICAgIC8vIFRoaXMgYXJyYXkgaXMgdXNlZCB0byBtYWtlIGEgRGF0ZSwgZWl0aGVyIHdpdGggYG5ldyBEYXRlYCBvciBgRGF0ZS5VVENgXG4gICAgICAgIHZhciBzdHJpbmcgPSAnJyArIGNvbmZpZy5faSxcbiAgICAgICAgICAgIGksIHBhcnNlZElucHV0LCB0b2tlbnMsIHRva2VuLCBza2lwcGVkLFxuICAgICAgICAgICAgc3RyaW5nTGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGggPSAwO1xuXG4gICAgICAgIHRva2VucyA9IGV4cGFuZEZvcm1hdChjb25maWcuX2YsIGNvbmZpZy5fbG9jYWxlKS5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSB8fCBbXTtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgICAgIHBhcnNlZElucHV0ID0gKHN0cmluZy5tYXRjaChnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sIGNvbmZpZykpIHx8IFtdKVswXTtcbiAgICAgICAgICAgIGlmIChwYXJzZWRJbnB1dCkge1xuICAgICAgICAgICAgICAgIHNraXBwZWQgPSBzdHJpbmcuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSk7XG4gICAgICAgICAgICAgICAgaWYgKHNraXBwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHNraXBwZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2Uoc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpICsgcGFyc2VkSW5wdXQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoICs9IHBhcnNlZElucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRvbid0IHBhcnNlIGlmIGl0J3Mgbm90IGEga25vd24gdG9rZW5cbiAgICAgICAgICAgIGlmIChmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0pIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZFRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4sIHBhcnNlZElucHV0LCBjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29uZmlnLl9zdHJpY3QgJiYgIXBhcnNlZElucHV0KSB7XG4gICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIHJlbWFpbmluZyB1bnBhcnNlZCBpbnB1dCBsZW5ndGggdG8gdGhlIHN0cmluZ1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5jaGFyc0xlZnRPdmVyID0gc3RyaW5nTGVuZ3RoIC0gdG90YWxQYXJzZWRJbnB1dExlbmd0aDtcbiAgICAgICAgaWYgKHN0cmluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHN0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjbGVhciBfMTJoIGZsYWcgaWYgaG91ciBpcyA8PSAxMlxuICAgICAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgICAgIGNvbmZpZy5fYVtIT1VSXSA8PSAxMiAmJlxuICAgICAgICAgICAgICAgIGNvbmZpZy5fYVtIT1VSXSA+IDApIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIG1lcmlkaWVtXG4gICAgICAgIGNvbmZpZy5fYVtIT1VSXSA9IG1lcmlkaWVtRml4V3JhcChjb25maWcuX2xvY2FsZSwgY29uZmlnLl9hW0hPVVJdLCBjb25maWcuX21lcmlkaWVtKTtcblxuICAgICAgICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbiAgICAgICAgY2hlY2tPdmVyZmxvdyhjb25maWcpO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gbWVyaWRpZW1GaXhXcmFwIChsb2NhbGUsIGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgICAgIHZhciBpc1BtO1xuXG4gICAgICAgIGlmIChtZXJpZGllbSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgICAgICAgICByZXR1cm4gaG91cjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9jYWxlLm1lcmlkaWVtSG91ciAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxlLm1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSk7XG4gICAgICAgIH0gZWxzZSBpZiAobG9jYWxlLmlzUE0gIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2tcbiAgICAgICAgICAgIGlzUG0gPSBsb2NhbGUuaXNQTShtZXJpZGllbSk7XG4gICAgICAgICAgICBpZiAoaXNQbSAmJiBob3VyIDwgMTIpIHtcbiAgICAgICAgICAgICAgICBob3VyICs9IDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BtICYmIGhvdXIgPT09IDEyKSB7XG4gICAgICAgICAgICAgICAgaG91ciA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaG91cjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgbm90IHN1cHBvc2VkIHRvIGhhcHBlblxuICAgICAgICAgICAgcmV0dXJuIGhvdXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkYXRlIGZyb20gc3RyaW5nIGFuZCBhcnJheSBvZiBmb3JtYXQgc3RyaW5nc1xuICAgIGZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRBcnJheShjb25maWcpIHtcbiAgICAgICAgdmFyIHRlbXBDb25maWcsXG4gICAgICAgICAgICBiZXN0TW9tZW50LFxuXG4gICAgICAgICAgICBzY29yZVRvQmVhdCxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBjdXJyZW50U2NvcmU7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5fZi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRGb3JtYXQgPSB0cnVlO1xuICAgICAgICAgICAgY29uZmlnLl9kID0gbmV3IERhdGUoTmFOKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb25maWcuX2YubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY29yZSA9IDA7XG4gICAgICAgICAgICB0ZW1wQ29uZmlnID0gY29weUNvbmZpZyh7fSwgY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChjb25maWcuX3VzZVVUQyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGVtcENvbmZpZy5fdXNlVVRDID0gY29uZmlnLl91c2VVVEM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wQ29uZmlnLl9mID0gY29uZmlnLl9mW2ldO1xuICAgICAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdCh0ZW1wQ29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF2YWxpZF9faXNWYWxpZCh0ZW1wQ29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbnkgaW5wdXQgdGhhdCB3YXMgbm90IHBhcnNlZCBhZGQgYSBwZW5hbHR5IGZvciB0aGF0IGZvcm1hdFxuICAgICAgICAgICAgY3VycmVudFNjb3JlICs9IGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5jaGFyc0xlZnRPdmVyO1xuXG4gICAgICAgICAgICAvL29yIHRva2Vuc1xuICAgICAgICAgICAgY3VycmVudFNjb3JlICs9IGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS51bnVzZWRUb2tlbnMubGVuZ3RoICogMTA7XG5cbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5zY29yZSA9IGN1cnJlbnRTY29yZTtcblxuICAgICAgICAgICAgaWYgKHNjb3JlVG9CZWF0ID09IG51bGwgfHwgY3VycmVudFNjb3JlIDwgc2NvcmVUb0JlYXQpIHtcbiAgICAgICAgICAgICAgICBzY29yZVRvQmVhdCA9IGN1cnJlbnRTY29yZTtcbiAgICAgICAgICAgICAgICBiZXN0TW9tZW50ID0gdGVtcENvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGV4dGVuZChjb25maWcsIGJlc3RNb21lbnQgfHwgdGVtcENvbmZpZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29uZmlnRnJvbU9iamVjdChjb25maWcpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5fZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSBub3JtYWxpemVPYmplY3RVbml0cyhjb25maWcuX2kpO1xuICAgICAgICBjb25maWcuX2EgPSBtYXAoW2kueWVhciwgaS5tb250aCwgaS5kYXkgfHwgaS5kYXRlLCBpLmhvdXIsIGkubWludXRlLCBpLnNlY29uZCwgaS5taWxsaXNlY29uZF0sIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmogJiYgcGFyc2VJbnQob2JqLCAxMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbmZpZ0Zyb21BcnJheShjb25maWcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZyb21Db25maWcgKGNvbmZpZykge1xuICAgICAgICB2YXIgcmVzID0gbmV3IE1vbWVudChjaGVja092ZXJmbG93KHByZXBhcmVDb25maWcoY29uZmlnKSkpO1xuICAgICAgICBpZiAocmVzLl9uZXh0RGF5KSB7XG4gICAgICAgICAgICAvLyBBZGRpbmcgaXMgc21hcnQgZW5vdWdoIGFyb3VuZCBEU1RcbiAgICAgICAgICAgIHJlcy5hZGQoMSwgJ2QnKTtcbiAgICAgICAgICAgIHJlcy5fbmV4dERheSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJlcGFyZUNvbmZpZyAoY29uZmlnKSB7XG4gICAgICAgIHZhciBpbnB1dCA9IGNvbmZpZy5faSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGNvbmZpZy5fZjtcblxuICAgICAgICBjb25maWcuX2xvY2FsZSA9IGNvbmZpZy5fbG9jYWxlIHx8IGxvY2FsZV9sb2NhbGVzX19nZXRMb2NhbGUoY29uZmlnLl9sKTtcblxuICAgICAgICBpZiAoaW5wdXQgPT09IG51bGwgfHwgKGZvcm1hdCA9PT0gdW5kZWZpbmVkICYmIGlucHV0ID09PSAnJykpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZF9fY3JlYXRlSW52YWxpZCh7bnVsbElucHV0OiB0cnVlfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uZmlnLl9pID0gaW5wdXQgPSBjb25maWcuX2xvY2FsZS5wcmVwYXJzZShpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNb21lbnQoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1vbWVudChjaGVja092ZXJmbG93KGlucHV0KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShmb3JtYXQpKSB7XG4gICAgICAgICAgICBjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKTtcbiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0RhdGUoaW5wdXQpKSB7XG4gICAgICAgICAgICBjb25maWcuX2QgPSBpbnB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21JbnB1dChjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZF9faXNWYWxpZChjb25maWcpKSB7XG4gICAgICAgICAgICBjb25maWcuX2QgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb25maWdGcm9tSW5wdXQoY29uZmlnKSB7XG4gICAgICAgIHZhciBpbnB1dCA9IGNvbmZpZy5faTtcbiAgICAgICAgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKHV0aWxzX2hvb2tzX19ob29rcy5ub3coKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEYXRlKGlucHV0KSkge1xuICAgICAgICAgICAgY29uZmlnLl9kID0gbmV3IERhdGUoK2lucHV0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25maWdGcm9tU3RyaW5nKGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5fYSA9IG1hcChpbnB1dC5zbGljZSgwKSwgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChvYmosIDEwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGlucHV0KSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoaW5wdXQpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gZnJvbSBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGlucHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHV0aWxzX2hvb2tzX19ob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTG9jYWxPclVUQyAoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIGlzVVRDKSB7XG4gICAgICAgIHZhciBjID0ge307XG5cbiAgICAgICAgaWYgKHR5cGVvZihsb2NhbGUpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHN0cmljdCA9IGxvY2FsZTtcbiAgICAgICAgICAgIGxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBvYmplY3QgY29uc3RydWN0aW9uIG11c3QgYmUgZG9uZSB0aGlzIHdheS5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE0MjNcbiAgICAgICAgYy5faXNBTW9tZW50T2JqZWN0ID0gdHJ1ZTtcbiAgICAgICAgYy5fdXNlVVRDID0gYy5faXNVVEMgPSBpc1VUQztcbiAgICAgICAgYy5fbCA9IGxvY2FsZTtcbiAgICAgICAgYy5faSA9IGlucHV0O1xuICAgICAgICBjLl9mID0gZm9ybWF0O1xuICAgICAgICBjLl9zdHJpY3QgPSBzdHJpY3Q7XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZyb21Db25maWcoYyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9jYWxfX2NyZWF0ZUxvY2FsIChpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHZhciBwcm90b3R5cGVNaW4gPSBkZXByZWNhdGUoXG4gICAgICAgICAnbW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNTQ4JyxcbiAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICB2YXIgb3RoZXIgPSBsb2NhbF9fY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgIHJldHVybiBvdGhlciA8IHRoaXMgPyB0aGlzIDogb3RoZXI7XG4gICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkX19jcmVhdGVJbnZhbGlkKCk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICApO1xuXG4gICAgdmFyIHByb3RvdHlwZU1heCA9IGRlcHJlY2F0ZShcbiAgICAgICAgJ21vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1heCBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTU0OCcsXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvdGhlciA9IGxvY2FsX19jcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvdGhlciA+IHRoaXMgPyB0aGlzIDogb3RoZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZF9fY3JlYXRlSW52YWxpZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcblxuICAgIC8vIFBpY2sgYSBtb21lbnQgbSBmcm9tIG1vbWVudHMgc28gdGhhdCBtW2ZuXShvdGhlcikgaXMgdHJ1ZSBmb3IgYWxsXG4gICAgLy8gb3RoZXIuIFRoaXMgcmVsaWVzIG9uIHRoZSBmdW5jdGlvbiBmbiB0byBiZSB0cmFuc2l0aXZlLlxuICAgIC8vXG4gICAgLy8gbW9tZW50cyBzaG91bGQgZWl0aGVyIGJlIGFuIGFycmF5IG9mIG1vbWVudCBvYmplY3RzIG9yIGFuIGFycmF5LCB3aG9zZVxuICAgIC8vIGZpcnN0IGVsZW1lbnQgaXMgYW4gYXJyYXkgb2YgbW9tZW50IG9iamVjdHMuXG4gICAgZnVuY3Rpb24gcGlja0J5KGZuLCBtb21lbnRzKSB7XG4gICAgICAgIHZhciByZXMsIGk7XG4gICAgICAgIGlmIChtb21lbnRzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5KG1vbWVudHNbMF0pKSB7XG4gICAgICAgICAgICBtb21lbnRzID0gbW9tZW50c1swXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxfX2NyZWF0ZUxvY2FsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzID0gbW9tZW50c1swXTtcbiAgICAgICAgZm9yIChpID0gMTsgaSA8IG1vbWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICghbW9tZW50c1tpXS5pc1ZhbGlkKCkgfHwgbW9tZW50c1tpXVtmbl0ocmVzKSkge1xuICAgICAgICAgICAgICAgIHJlcyA9IG1vbWVudHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBVc2UgW10uc29ydCBpbnN0ZWFkP1xuICAgIGZ1bmN0aW9uIG1pbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgICAgIHJldHVybiBwaWNrQnkoJ2lzQmVmb3JlJywgYXJncyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF4ICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cbiAgICAgICAgcmV0dXJuIHBpY2tCeSgnaXNBZnRlcicsIGFyZ3MpO1xuICAgIH1cblxuICAgIHZhciBub3cgPSBEYXRlLm5vdyB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiArKG5ldyBEYXRlKCkpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBEdXJhdGlvbiAoZHVyYXRpb24pIHtcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJbnB1dCA9IG5vcm1hbGl6ZU9iamVjdFVuaXRzKGR1cmF0aW9uKSxcbiAgICAgICAgICAgIHllYXJzID0gbm9ybWFsaXplZElucHV0LnllYXIgfHwgMCxcbiAgICAgICAgICAgIHF1YXJ0ZXJzID0gbm9ybWFsaXplZElucHV0LnF1YXJ0ZXIgfHwgMCxcbiAgICAgICAgICAgIG1vbnRocyA9IG5vcm1hbGl6ZWRJbnB1dC5tb250aCB8fCAwLFxuICAgICAgICAgICAgd2Vla3MgPSBub3JtYWxpemVkSW5wdXQud2VlayB8fCAwLFxuICAgICAgICAgICAgZGF5cyA9IG5vcm1hbGl6ZWRJbnB1dC5kYXkgfHwgMCxcbiAgICAgICAgICAgIGhvdXJzID0gbm9ybWFsaXplZElucHV0LmhvdXIgfHwgMCxcbiAgICAgICAgICAgIG1pbnV0ZXMgPSBub3JtYWxpemVkSW5wdXQubWludXRlIHx8IDAsXG4gICAgICAgICAgICBzZWNvbmRzID0gbm9ybWFsaXplZElucHV0LnNlY29uZCB8fCAwLFxuICAgICAgICAgICAgbWlsbGlzZWNvbmRzID0gbm9ybWFsaXplZElucHV0Lm1pbGxpc2Vjb25kIHx8IDA7XG5cbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24gZm9yIGRhdGVBZGRSZW1vdmVcbiAgICAgICAgdGhpcy5fbWlsbGlzZWNvbmRzID0gK21pbGxpc2Vjb25kcyArXG4gICAgICAgICAgICBzZWNvbmRzICogMWUzICsgLy8gMTAwMFxuICAgICAgICAgICAgbWludXRlcyAqIDZlNCArIC8vIDEwMDAgKiA2MFxuICAgICAgICAgICAgaG91cnMgKiAzNmU1OyAvLyAxMDAwICogNjAgKiA2MFxuICAgICAgICAvLyBCZWNhdXNlIG9mIGRhdGVBZGRSZW1vdmUgdHJlYXRzIDI0IGhvdXJzIGFzIGRpZmZlcmVudCBmcm9tIGFcbiAgICAgICAgLy8gZGF5IHdoZW4gd29ya2luZyBhcm91bmQgRFNULCB3ZSBuZWVkIHRvIHN0b3JlIHRoZW0gc2VwYXJhdGVseVxuICAgICAgICB0aGlzLl9kYXlzID0gK2RheXMgK1xuICAgICAgICAgICAgd2Vla3MgKiA3O1xuICAgICAgICAvLyBJdCBpcyBpbXBvc3NpYmxlIHRyYW5zbGF0ZSBtb250aHMgaW50byBkYXlzIHdpdGhvdXQga25vd2luZ1xuICAgICAgICAvLyB3aGljaCBtb250aHMgeW91IGFyZSBhcmUgdGFsa2luZyBhYm91dCwgc28gd2UgaGF2ZSB0byBzdG9yZVxuICAgICAgICAvLyBpdCBzZXBhcmF0ZWx5LlxuICAgICAgICB0aGlzLl9tb250aHMgPSArbW9udGhzICtcbiAgICAgICAgICAgIHF1YXJ0ZXJzICogMyArXG4gICAgICAgICAgICB5ZWFycyAqIDEyO1xuXG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcblxuICAgICAgICB0aGlzLl9sb2NhbGUgPSBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKCk7XG5cbiAgICAgICAgdGhpcy5fYnViYmxlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNEdXJhdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBEdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBmdW5jdGlvbiBvZmZzZXQgKHRva2VuLCBzZXBhcmF0b3IpIHtcbiAgICAgICAgYWRkRm9ybWF0VG9rZW4odG9rZW4sIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLnV0Y09mZnNldCgpO1xuICAgICAgICAgICAgdmFyIHNpZ24gPSAnKyc7XG4gICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IC1vZmZzZXQ7XG4gICAgICAgICAgICAgICAgc2lnbiA9ICctJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzaWduICsgemVyb0ZpbGwofn4ob2Zmc2V0IC8gNjApLCAyKSArIHNlcGFyYXRvciArIHplcm9GaWxsKH5+KG9mZnNldCkgJSA2MCwgMik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9mZnNldCgnWicsICc6Jyk7XG4gICAgb2Zmc2V0KCdaWicsICcnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ1onLCAgbWF0Y2hTaG9ydE9mZnNldCk7XG4gICAgYWRkUmVnZXhUb2tlbignWlonLCBtYXRjaFNob3J0T2Zmc2V0KTtcbiAgICBhZGRQYXJzZVRva2VuKFsnWicsICdaWiddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgY29uZmlnLl91c2VVVEMgPSB0cnVlO1xuICAgICAgICBjb25maWcuX3R6bSA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCwgaW5wdXQpO1xuICAgIH0pO1xuXG4gICAgLy8gSEVMUEVSU1xuXG4gICAgLy8gdGltZXpvbmUgY2h1bmtlclxuICAgIC8vICcrMTA6MDAnID4gWycxMCcsICAnMDAnXVxuICAgIC8vICctMTUzMCcgID4gWyctMTUnLCAnMzAnXVxuICAgIHZhciBjaHVua09mZnNldCA9IC8oW1xcK1xcLV18XFxkXFxkKS9naTtcblxuICAgIGZ1bmN0aW9uIG9mZnNldEZyb21TdHJpbmcobWF0Y2hlciwgc3RyaW5nKSB7XG4gICAgICAgIHZhciBtYXRjaGVzID0gKChzdHJpbmcgfHwgJycpLm1hdGNoKG1hdGNoZXIpIHx8IFtdKTtcbiAgICAgICAgdmFyIGNodW5rICAgPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV0gfHwgW107XG4gICAgICAgIHZhciBwYXJ0cyAgID0gKGNodW5rICsgJycpLm1hdGNoKGNodW5rT2Zmc2V0KSB8fCBbJy0nLCAwLCAwXTtcbiAgICAgICAgdmFyIG1pbnV0ZXMgPSArKHBhcnRzWzFdICogNjApICsgdG9JbnQocGFydHNbMl0pO1xuXG4gICAgICAgIHJldHVybiBwYXJ0c1swXSA9PT0gJysnID8gbWludXRlcyA6IC1taW51dGVzO1xuICAgIH1cblxuICAgIC8vIFJldHVybiBhIG1vbWVudCBmcm9tIGlucHV0LCB0aGF0IGlzIGxvY2FsL3V0Yy96b25lIGVxdWl2YWxlbnQgdG8gbW9kZWwuXG4gICAgZnVuY3Rpb24gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCBtb2RlbCkge1xuICAgICAgICB2YXIgcmVzLCBkaWZmO1xuICAgICAgICBpZiAobW9kZWwuX2lzVVRDKSB7XG4gICAgICAgICAgICByZXMgPSBtb2RlbC5jbG9uZSgpO1xuICAgICAgICAgICAgZGlmZiA9IChpc01vbWVudChpbnB1dCkgfHwgaXNEYXRlKGlucHV0KSA/ICtpbnB1dCA6ICtsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQpKSAtICgrcmVzKTtcbiAgICAgICAgICAgIC8vIFVzZSBsb3ctbGV2ZWwgYXBpLCBiZWNhdXNlIHRoaXMgZm4gaXMgbG93LWxldmVsIGFwaS5cbiAgICAgICAgICAgIHJlcy5fZC5zZXRUaW1lKCtyZXMuX2QgKyBkaWZmKTtcbiAgICAgICAgICAgIHV0aWxzX2hvb2tzX19ob29rcy51cGRhdGVPZmZzZXQocmVzLCBmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsX19jcmVhdGVMb2NhbChpbnB1dCkubG9jYWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERhdGVPZmZzZXQgKG0pIHtcbiAgICAgICAgLy8gT24gRmlyZWZveC4yNCBEYXRlI2dldFRpbWV6b25lT2Zmc2V0IHJldHVybnMgYSBmbG9hdGluZyBwb2ludC5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvcHVsbC8xODcxXG4gICAgICAgIHJldHVybiAtTWF0aC5yb3VuZChtLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkgLyAxNSkgKiAxNTtcbiAgICB9XG5cbiAgICAvLyBIT09LU1xuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciBhIG1vbWVudCBpcyBtdXRhdGVkLlxuICAgIC8vIEl0IGlzIGludGVuZGVkIHRvIGtlZXAgdGhlIG9mZnNldCBpbiBzeW5jIHdpdGggdGhlIHRpbWV6b25lLlxuICAgIHV0aWxzX2hvb2tzX19ob29rcy51cGRhdGVPZmZzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIC8vIGtlZXBMb2NhbFRpbWUgPSB0cnVlIG1lYW5zIG9ubHkgY2hhbmdlIHRoZSB0aW1lem9uZSwgd2l0aG91dFxuICAgIC8vIGFmZmVjdGluZyB0aGUgbG9jYWwgaG91ci4gU28gNTozMToyNiArMDMwMCAtLVt1dGNPZmZzZXQoMiwgdHJ1ZSldLS0+XG4gICAgLy8gNTozMToyNiArMDIwMCBJdCBpcyBwb3NzaWJsZSB0aGF0IDU6MzE6MjYgZG9lc24ndCBleGlzdCB3aXRoIG9mZnNldFxuICAgIC8vICswMjAwLCBzbyB3ZSBhZGp1c3QgdGhlIHRpbWUgYXMgbmVlZGVkLCB0byBiZSB2YWxpZC5cbiAgICAvL1xuICAgIC8vIEtlZXBpbmcgdGhlIHRpbWUgYWN0dWFsbHkgYWRkcy9zdWJ0cmFjdHMgKG9uZSBob3VyKVxuICAgIC8vIGZyb20gdGhlIGFjdHVhbCByZXByZXNlbnRlZCB0aW1lLiBUaGF0IGlzIHdoeSB3ZSBjYWxsIHVwZGF0ZU9mZnNldFxuICAgIC8vIGEgc2Vjb25kIHRpbWUuIEluIGNhc2UgaXQgd2FudHMgdXMgdG8gY2hhbmdlIHRoZSBvZmZzZXQgYWdhaW5cbiAgICAvLyBfY2hhbmdlSW5Qcm9ncmVzcyA9PSB0cnVlIGNhc2UsIHRoZW4gd2UgaGF2ZSB0byBhZGp1c3QsIGJlY2F1c2VcbiAgICAvLyB0aGVyZSBpcyBubyBzdWNoIHRpbWUgaW4gdGhlIGdpdmVuIHRpbWV6b25lLlxuICAgIGZ1bmN0aW9uIGdldFNldE9mZnNldCAoaW5wdXQsIGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuX29mZnNldCB8fCAwLFxuICAgICAgICAgICAgbG9jYWxBZGp1c3Q7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbnB1dCA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCwgaW5wdXQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChNYXRoLmFicyhpbnB1dCkgPCAxNikge1xuICAgICAgICAgICAgICAgIGlucHV0ID0gaW5wdXQgKiA2MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5faXNVVEMgJiYga2VlcExvY2FsVGltZSkge1xuICAgICAgICAgICAgICAgIGxvY2FsQWRqdXN0ID0gZ2V0RGF0ZU9mZnNldCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGlucHV0O1xuICAgICAgICAgICAgdGhpcy5faXNVVEMgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGxvY2FsQWRqdXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChsb2NhbEFkanVzdCwgJ20nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXQgIT09IGlucHV0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFrZWVwTG9jYWxUaW1lIHx8IHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkX3N1YnRyYWN0X19hZGRTdWJ0cmFjdCh0aGlzLCBjcmVhdGVfX2NyZWF0ZUR1cmF0aW9uKGlucHV0IC0gb2Zmc2V0LCAnbScpLCAxLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdXRpbHNfaG9va3NfX2hvb2tzLnVwZGF0ZU9mZnNldCh0aGlzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNVVEMgPyBvZmZzZXQgOiBnZXREYXRlT2Zmc2V0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2V0Wm9uZSAoaW5wdXQsIGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSAtaW5wdXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXRjT2Zmc2V0KGlucHV0LCBrZWVwTG9jYWxUaW1lKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gLXRoaXMudXRjT2Zmc2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRPZmZzZXRUb1VUQyAoa2VlcExvY2FsVGltZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51dGNPZmZzZXQoMCwga2VlcExvY2FsVGltZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0T2Zmc2V0VG9Mb2NhbCAoa2VlcExvY2FsVGltZSkge1xuICAgICAgICBpZiAodGhpcy5faXNVVEMpIHtcbiAgICAgICAgICAgIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xuICAgICAgICAgICAgdGhpcy5faXNVVEMgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnRyYWN0KGdldERhdGVPZmZzZXQodGhpcyksICdtJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0T2Zmc2V0VG9QYXJzZWRPZmZzZXQgKCkge1xuICAgICAgICBpZiAodGhpcy5fdHptKSB7XG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCh0aGlzLl90em0pO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLl9pID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy51dGNPZmZzZXQob2Zmc2V0RnJvbVN0cmluZyhtYXRjaE9mZnNldCwgdGhpcy5faSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc0FsaWduZWRIb3VyT2Zmc2V0IChpbnB1dCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQgPSBpbnB1dCA/IGxvY2FsX19jcmVhdGVMb2NhbChpbnB1dCkudXRjT2Zmc2V0KCkgOiAwO1xuXG4gICAgICAgIHJldHVybiAodGhpcy51dGNPZmZzZXQoKSAtIGlucHV0KSAlIDYwID09PSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRGF5bGlnaHRTYXZpbmdUaW1lICgpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMudXRjT2Zmc2V0KCkgPiB0aGlzLmNsb25lKCkubW9udGgoMCkudXRjT2Zmc2V0KCkgfHxcbiAgICAgICAgICAgIHRoaXMudXRjT2Zmc2V0KCkgPiB0aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQgKCkge1xuICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX2lzRFNUU2hpZnRlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYyA9IHt9O1xuXG4gICAgICAgIGNvcHlDb25maWcoYywgdGhpcyk7XG4gICAgICAgIGMgPSBwcmVwYXJlQ29uZmlnKGMpO1xuXG4gICAgICAgIGlmIChjLl9hKSB7XG4gICAgICAgICAgICB2YXIgb3RoZXIgPSBjLl9pc1VUQyA/IGNyZWF0ZV91dGNfX2NyZWF0ZVVUQyhjLl9hKSA6IGxvY2FsX19jcmVhdGVMb2NhbChjLl9hKTtcbiAgICAgICAgICAgIHRoaXMuX2lzRFNUU2hpZnRlZCA9IHRoaXMuaXNWYWxpZCgpICYmXG4gICAgICAgICAgICAgICAgY29tcGFyZUFycmF5cyhjLl9hLCBvdGhlci50b0FycmF5KCkpID4gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRFNUU2hpZnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0xvY2FsICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gIXRoaXMuX2lzVVRDIDogZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNVdGNPZmZzZXQgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLl9pc1VUQyA6IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVXRjICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgJiYgdGhpcy5fb2Zmc2V0ID09PSAwIDogZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQVNQLk5FVCBqc29uIGRhdGUgZm9ybWF0IHJlZ2V4XG4gICAgdmFyIGFzcE5ldFJlZ2V4ID0gLyhcXC0pPyg/OihcXGQqKVsuIF0pPyhcXGQrKVxcOihcXGQrKSg/OlxcOihcXGQrKVxcLj8oXFxkezN9KT8pPy87XG5cbiAgICAvLyBmcm9tIGh0dHA6Ly9kb2NzLmNsb3N1cmUtbGlicmFyeS5nb29nbGVjb2RlLmNvbS9naXQvY2xvc3VyZV9nb29nX2RhdGVfZGF0ZS5qcy5zb3VyY2UuaHRtbFxuICAgIC8vIHNvbWV3aGF0IG1vcmUgaW4gbGluZSB3aXRoIDQuNC4zLjIgMjAwNCBzcGVjLCBidXQgYWxsb3dzIGRlY2ltYWwgYW55d2hlcmVcbiAgICB2YXIgaXNvUmVnZXggPSAvXigtKT9QKD86KD86KFswLTksLl0qKVkpPyg/OihbMC05LC5dKilNKT8oPzooWzAtOSwuXSopRCk/KD86VCg/OihbMC05LC5dKilIKT8oPzooWzAtOSwuXSopTSk/KD86KFswLTksLl0qKVMpPyk/fChbMC05LC5dKilXKSQvO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlX19jcmVhdGVEdXJhdGlvbiAoaW5wdXQsIGtleSkge1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBpbnB1dCxcbiAgICAgICAgICAgIC8vIG1hdGNoaW5nIGFnYWluc3QgcmVnZXhwIGlzIGV4cGVuc2l2ZSwgZG8gaXQgb24gZGVtYW5kXG4gICAgICAgICAgICBtYXRjaCA9IG51bGwsXG4gICAgICAgICAgICBzaWduLFxuICAgICAgICAgICAgcmV0LFxuICAgICAgICAgICAgZGlmZlJlcztcblxuICAgICAgICBpZiAoaXNEdXJhdGlvbihpbnB1dCkpIHtcbiAgICAgICAgICAgIGR1cmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIG1zIDogaW5wdXQuX21pbGxpc2Vjb25kcyxcbiAgICAgICAgICAgICAgICBkICA6IGlucHV0Ll9kYXlzLFxuICAgICAgICAgICAgICAgIE0gIDogaW5wdXQuX21vbnRoc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHt9O1xuICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uW2tleV0gPSBpbnB1dDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb24ubWlsbGlzZWNvbmRzID0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoISEobWF0Y2ggPSBhc3BOZXRSZWdleC5leGVjKGlucHV0KSkpIHtcbiAgICAgICAgICAgIHNpZ24gPSAobWF0Y2hbMV0gPT09ICctJykgPyAtMSA6IDE7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB5ICA6IDAsXG4gICAgICAgICAgICAgICAgZCAgOiB0b0ludChtYXRjaFtEQVRFXSkgICAgICAgICogc2lnbixcbiAgICAgICAgICAgICAgICBoICA6IHRvSW50KG1hdGNoW0hPVVJdKSAgICAgICAgKiBzaWduLFxuICAgICAgICAgICAgICAgIG0gIDogdG9JbnQobWF0Y2hbTUlOVVRFXSkgICAgICAqIHNpZ24sXG4gICAgICAgICAgICAgICAgcyAgOiB0b0ludChtYXRjaFtTRUNPTkRdKSAgICAgICogc2lnbixcbiAgICAgICAgICAgICAgICBtcyA6IHRvSW50KG1hdGNoW01JTExJU0VDT05EXSkgKiBzaWduXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKCEhKG1hdGNoID0gaXNvUmVnZXguZXhlYyhpbnB1dCkpKSB7XG4gICAgICAgICAgICBzaWduID0gKG1hdGNoWzFdID09PSAnLScpID8gLTEgOiAxO1xuICAgICAgICAgICAgZHVyYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgeSA6IHBhcnNlSXNvKG1hdGNoWzJdLCBzaWduKSxcbiAgICAgICAgICAgICAgICBNIDogcGFyc2VJc28obWF0Y2hbM10sIHNpZ24pLFxuICAgICAgICAgICAgICAgIGQgOiBwYXJzZUlzbyhtYXRjaFs0XSwgc2lnbiksXG4gICAgICAgICAgICAgICAgaCA6IHBhcnNlSXNvKG1hdGNoWzVdLCBzaWduKSxcbiAgICAgICAgICAgICAgICBtIDogcGFyc2VJc28obWF0Y2hbNl0sIHNpZ24pLFxuICAgICAgICAgICAgICAgIHMgOiBwYXJzZUlzbyhtYXRjaFs3XSwgc2lnbiksXG4gICAgICAgICAgICAgICAgdyA6IHBhcnNlSXNvKG1hdGNoWzhdLCBzaWduKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7Ly8gY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb24gPT09ICdvYmplY3QnICYmICgnZnJvbScgaW4gZHVyYXRpb24gfHwgJ3RvJyBpbiBkdXJhdGlvbikpIHtcbiAgICAgICAgICAgIGRpZmZSZXMgPSBtb21lbnRzRGlmZmVyZW5jZShsb2NhbF9fY3JlYXRlTG9jYWwoZHVyYXRpb24uZnJvbSksIGxvY2FsX19jcmVhdGVMb2NhbChkdXJhdGlvbi50bykpO1xuXG4gICAgICAgICAgICBkdXJhdGlvbiA9IHt9O1xuICAgICAgICAgICAgZHVyYXRpb24ubXMgPSBkaWZmUmVzLm1pbGxpc2Vjb25kcztcbiAgICAgICAgICAgIGR1cmF0aW9uLk0gPSBkaWZmUmVzLm1vbnRocztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldCA9IG5ldyBEdXJhdGlvbihkdXJhdGlvbik7XG5cbiAgICAgICAgaWYgKGlzRHVyYXRpb24oaW5wdXQpICYmIGhhc093blByb3AoaW5wdXQsICdfbG9jYWxlJykpIHtcbiAgICAgICAgICAgIHJldC5fbG9jYWxlID0gaW5wdXQuX2xvY2FsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgY3JlYXRlX19jcmVhdGVEdXJhdGlvbi5mbiA9IER1cmF0aW9uLnByb3RvdHlwZTtcblxuICAgIGZ1bmN0aW9uIHBhcnNlSXNvIChpbnAsIHNpZ24pIHtcbiAgICAgICAgLy8gV2UnZCBub3JtYWxseSB1c2Ugfn5pbnAgZm9yIHRoaXMsIGJ1dCB1bmZvcnR1bmF0ZWx5IGl0IGFsc29cbiAgICAgICAgLy8gY29udmVydHMgZmxvYXRzIHRvIGludHMuXG4gICAgICAgIC8vIGlucCBtYXkgYmUgdW5kZWZpbmVkLCBzbyBjYXJlZnVsIGNhbGxpbmcgcmVwbGFjZSBvbiBpdC5cbiAgICAgICAgdmFyIHJlcyA9IGlucCAmJiBwYXJzZUZsb2F0KGlucC5yZXBsYWNlKCcsJywgJy4nKSk7XG4gICAgICAgIC8vIGFwcGx5IHNpZ24gd2hpbGUgd2UncmUgYXQgaXRcbiAgICAgICAgcmV0dXJuIChpc05hTihyZXMpID8gMCA6IHJlcykgKiBzaWduO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvc2l0aXZlTW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpIHtcbiAgICAgICAgdmFyIHJlcyA9IHttaWxsaXNlY29uZHM6IDAsIG1vbnRoczogMH07XG5cbiAgICAgICAgcmVzLm1vbnRocyA9IG90aGVyLm1vbnRoKCkgLSBiYXNlLm1vbnRoKCkgK1xuICAgICAgICAgICAgKG90aGVyLnllYXIoKSAtIGJhc2UueWVhcigpKSAqIDEyO1xuICAgICAgICBpZiAoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCAnTScpLmlzQWZ0ZXIob3RoZXIpKSB7XG4gICAgICAgICAgICAtLXJlcy5tb250aHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXMubWlsbGlzZWNvbmRzID0gK290aGVyIC0gKyhiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsICdNJykpO1xuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpIHtcbiAgICAgICAgdmFyIHJlcztcbiAgICAgICAgaWYgKCEoYmFzZS5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHttaWxsaXNlY29uZHM6IDAsIG1vbnRoczogMH07XG4gICAgICAgIH1cblxuICAgICAgICBvdGhlciA9IGNsb25lV2l0aE9mZnNldChvdGhlciwgYmFzZSk7XG4gICAgICAgIGlmIChiYXNlLmlzQmVmb3JlKG90aGVyKSkge1xuICAgICAgICAgICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLCBvdGhlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMgPSBwb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKG90aGVyLCBiYXNlKTtcbiAgICAgICAgICAgIHJlcy5taWxsaXNlY29uZHMgPSAtcmVzLm1pbGxpc2Vjb25kcztcbiAgICAgICAgICAgIHJlcy5tb250aHMgPSAtcmVzLm1vbnRocztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlICduYW1lJyBhcmcgYWZ0ZXIgZGVwcmVjYXRpb24gaXMgcmVtb3ZlZFxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFkZGVyKGRpcmVjdGlvbiwgbmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCwgcGVyaW9kKSB7XG4gICAgICAgICAgICB2YXIgZHVyLCB0bXA7XG4gICAgICAgICAgICAvL2ludmVydCB0aGUgYXJndW1lbnRzLCBidXQgY29tcGxhaW4gYWJvdXQgaXRcbiAgICAgICAgICAgIGlmIChwZXJpb2QgIT09IG51bGwgJiYgIWlzTmFOKCtwZXJpb2QpKSB7XG4gICAgICAgICAgICAgICAgZGVwcmVjYXRlU2ltcGxlKG5hbWUsICdtb21lbnQoKS4nICsgbmFtZSAgKyAnKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLicgKyBuYW1lICsgJyhudW1iZXIsIHBlcmlvZCkuJyk7XG4gICAgICAgICAgICAgICAgdG1wID0gdmFsOyB2YWwgPSBwZXJpb2Q7IHBlcmlvZCA9IHRtcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyArdmFsIDogdmFsO1xuICAgICAgICAgICAgZHVyID0gY3JlYXRlX19jcmVhdGVEdXJhdGlvbih2YWwsIHBlcmlvZCk7XG4gICAgICAgICAgICBhZGRfc3VidHJhY3RfX2FkZFN1YnRyYWN0KHRoaXMsIGR1ciwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZF9zdWJ0cmFjdF9fYWRkU3VidHJhY3QgKG1vbSwgZHVyYXRpb24sIGlzQWRkaW5nLCB1cGRhdGVPZmZzZXQpIHtcbiAgICAgICAgdmFyIG1pbGxpc2Vjb25kcyA9IGR1cmF0aW9uLl9taWxsaXNlY29uZHMsXG4gICAgICAgICAgICBkYXlzID0gZHVyYXRpb24uX2RheXMsXG4gICAgICAgICAgICBtb250aHMgPSBkdXJhdGlvbi5fbW9udGhzO1xuXG4gICAgICAgIGlmICghbW9tLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgLy8gTm8gb3BcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZU9mZnNldCA9IHVwZGF0ZU9mZnNldCA9PSBudWxsID8gdHJ1ZSA6IHVwZGF0ZU9mZnNldDtcblxuICAgICAgICBpZiAobWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICBtb20uX2Quc2V0VGltZSgrbW9tLl9kICsgbWlsbGlzZWNvbmRzICogaXNBZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXlzKSB7XG4gICAgICAgICAgICBnZXRfc2V0X19zZXQobW9tLCAnRGF0ZScsIGdldF9zZXRfX2dldChtb20sICdEYXRlJykgKyBkYXlzICogaXNBZGRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb250aHMpIHtcbiAgICAgICAgICAgIHNldE1vbnRoKG1vbSwgZ2V0X3NldF9fZ2V0KG1vbSwgJ01vbnRoJykgKyBtb250aHMgKiBpc0FkZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZU9mZnNldCkge1xuICAgICAgICAgICAgdXRpbHNfaG9va3NfX2hvb2tzLnVwZGF0ZU9mZnNldChtb20sIGRheXMgfHwgbW9udGhzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBhZGRfc3VidHJhY3RfX2FkZCAgICAgID0gY3JlYXRlQWRkZXIoMSwgJ2FkZCcpO1xuICAgIHZhciBhZGRfc3VidHJhY3RfX3N1YnRyYWN0ID0gY3JlYXRlQWRkZXIoLTEsICdzdWJ0cmFjdCcpO1xuXG4gICAgZnVuY3Rpb24gbW9tZW50X2NhbGVuZGFyX19jYWxlbmRhciAodGltZSwgZm9ybWF0cykge1xuICAgICAgICAvLyBXZSB3YW50IHRvIGNvbXBhcmUgdGhlIHN0YXJ0IG9mIHRvZGF5LCB2cyB0aGlzLlxuICAgICAgICAvLyBHZXR0aW5nIHN0YXJ0LW9mLXRvZGF5IGRlcGVuZHMgb24gd2hldGhlciB3ZSdyZSBsb2NhbC91dGMvb2Zmc2V0IG9yIG5vdC5cbiAgICAgICAgdmFyIG5vdyA9IHRpbWUgfHwgbG9jYWxfX2NyZWF0ZUxvY2FsKCksXG4gICAgICAgICAgICBzb2QgPSBjbG9uZVdpdGhPZmZzZXQobm93LCB0aGlzKS5zdGFydE9mKCdkYXknKSxcbiAgICAgICAgICAgIGRpZmYgPSB0aGlzLmRpZmYoc29kLCAnZGF5cycsIHRydWUpLFxuICAgICAgICAgICAgZm9ybWF0ID0gZGlmZiA8IC02ID8gJ3NhbWVFbHNlJyA6XG4gICAgICAgICAgICAgICAgZGlmZiA8IC0xID8gJ2xhc3RXZWVrJyA6XG4gICAgICAgICAgICAgICAgZGlmZiA8IDAgPyAnbGFzdERheScgOlxuICAgICAgICAgICAgICAgIGRpZmYgPCAxID8gJ3NhbWVEYXknIDpcbiAgICAgICAgICAgICAgICBkaWZmIDwgMiA/ICduZXh0RGF5JyA6XG4gICAgICAgICAgICAgICAgZGlmZiA8IDcgPyAnbmV4dFdlZWsnIDogJ3NhbWVFbHNlJztcblxuICAgICAgICB2YXIgb3V0cHV0ID0gZm9ybWF0cyAmJiAoaXNGdW5jdGlvbihmb3JtYXRzW2Zvcm1hdF0pID8gZm9ybWF0c1tmb3JtYXRdKCkgOiBmb3JtYXRzW2Zvcm1hdF0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChvdXRwdXQgfHwgdGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIoZm9ybWF0LCB0aGlzLCBsb2NhbF9fY3JlYXRlTG9jYWwobm93KSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb25lICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb21lbnQodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBZnRlciAoaW5wdXQsIHVuaXRzKSB7XG4gICAgICAgIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBsb2NhbF9fY3JlYXRlTG9jYWwoaW5wdXQpO1xuICAgICAgICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKCFpc1VuZGVmaW5lZCh1bml0cykgPyB1bml0cyA6ICdtaWxsaXNlY29uZCcpO1xuICAgICAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgICAgIHJldHVybiArdGhpcyA+ICtsb2NhbElucHV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICtsb2NhbElucHV0IDwgK3RoaXMuY2xvbmUoKS5zdGFydE9mKHVuaXRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQmVmb3JlIChpbnB1dCwgdW5pdHMpIHtcbiAgICAgICAgdmFyIGxvY2FsSW5wdXQgPSBpc01vbWVudChpbnB1dCkgPyBpbnB1dCA6IGxvY2FsX19jcmVhdGVMb2NhbChpbnB1dCk7XG4gICAgICAgIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHMoIWlzVW5kZWZpbmVkKHVuaXRzKSA/IHVuaXRzIDogJ21pbGxpc2Vjb25kJyk7XG4gICAgICAgIGlmICh1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgICAgICAgICAgcmV0dXJuICt0aGlzIDwgK2xvY2FsSW5wdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gK3RoaXMuY2xvbmUoKS5lbmRPZih1bml0cykgPCArbG9jYWxJbnB1dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQmV0d2VlbiAoZnJvbSwgdG8sIHVuaXRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQWZ0ZXIoZnJvbSwgdW5pdHMpICYmIHRoaXMuaXNCZWZvcmUodG8sIHVuaXRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NhbWUgKGlucHV0LCB1bml0cykge1xuICAgICAgICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogbG9jYWxfX2NyZWF0ZUxvY2FsKGlucHV0KSxcbiAgICAgICAgICAgIGlucHV0TXM7XG4gICAgICAgIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMgfHwgJ21pbGxpc2Vjb25kJyk7XG4gICAgICAgIGlmICh1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgICAgICAgICAgcmV0dXJuICt0aGlzID09PSArbG9jYWxJbnB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlucHV0TXMgPSArbG9jYWxJbnB1dDtcbiAgICAgICAgICAgIHJldHVybiArKHRoaXMuY2xvbmUoKS5zdGFydE9mKHVuaXRzKSkgPD0gaW5wdXRNcyAmJiBpbnB1dE1zIDw9ICsodGhpcy5jbG9uZSgpLmVuZE9mKHVuaXRzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NhbWVPckFmdGVyIChpbnB1dCwgdW5pdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTYW1lKGlucHV0LCB1bml0cykgfHwgdGhpcy5pc0FmdGVyKGlucHV0LHVuaXRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NhbWVPckJlZm9yZSAoaW5wdXQsIHVuaXRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2FtZShpbnB1dCwgdW5pdHMpIHx8IHRoaXMuaXNCZWZvcmUoaW5wdXQsdW5pdHMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRpZmYgKGlucHV0LCB1bml0cywgYXNGbG9hdCkge1xuICAgICAgICB2YXIgdGhhdCxcbiAgICAgICAgICAgIHpvbmVEZWx0YSxcbiAgICAgICAgICAgIGRlbHRhLCBvdXRwdXQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoYXQgPSBjbG9uZVdpdGhPZmZzZXQoaW5wdXQsIHRoaXMpO1xuXG4gICAgICAgIGlmICghdGhhdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cblxuICAgICAgICB6b25lRGVsdGEgPSAodGhhdC51dGNPZmZzZXQoKSAtIHRoaXMudXRjT2Zmc2V0KCkpICogNmU0O1xuXG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gICAgICAgIGlmICh1bml0cyA9PT0gJ3llYXInIHx8IHVuaXRzID09PSAnbW9udGgnIHx8IHVuaXRzID09PSAncXVhcnRlcicpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG1vbnRoRGlmZih0aGlzLCB0aGF0KTtcbiAgICAgICAgICAgIGlmICh1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0IC8gMztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodW5pdHMgPT09ICd5ZWFyJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCAvIDEyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsdGEgPSB0aGlzIC0gdGhhdDtcbiAgICAgICAgICAgIG91dHB1dCA9IHVuaXRzID09PSAnc2Vjb25kJyA/IGRlbHRhIC8gMWUzIDogLy8gMTAwMFxuICAgICAgICAgICAgICAgIHVuaXRzID09PSAnbWludXRlJyA/IGRlbHRhIC8gNmU0IDogLy8gMTAwMCAqIDYwXG4gICAgICAgICAgICAgICAgdW5pdHMgPT09ICdob3VyJyA/IGRlbHRhIC8gMzZlNSA6IC8vIDEwMDAgKiA2MCAqIDYwXG4gICAgICAgICAgICAgICAgdW5pdHMgPT09ICdkYXknID8gKGRlbHRhIC0gem9uZURlbHRhKSAvIDg2NGU1IDogLy8gMTAwMCAqIDYwICogNjAgKiAyNCwgbmVnYXRlIGRzdFxuICAgICAgICAgICAgICAgIHVuaXRzID09PSAnd2VlaycgPyAoZGVsdGEgLSB6b25lRGVsdGEpIC8gNjA0OGU1IDogLy8gMTAwMCAqIDYwICogNjAgKiAyNCAqIDcsIG5lZ2F0ZSBkc3RcbiAgICAgICAgICAgICAgICBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNGbG9hdCA/IG91dHB1dCA6IGFic0Zsb29yKG91dHB1dCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9udGhEaWZmIChhLCBiKSB7XG4gICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gbW9udGhzXG4gICAgICAgIHZhciB3aG9sZU1vbnRoRGlmZiA9ICgoYi55ZWFyKCkgLSBhLnllYXIoKSkgKiAxMikgKyAoYi5tb250aCgpIC0gYS5tb250aCgpKSxcbiAgICAgICAgICAgIC8vIGIgaXMgaW4gKGFuY2hvciAtIDEgbW9udGgsIGFuY2hvciArIDEgbW9udGgpXG4gICAgICAgICAgICBhbmNob3IgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLCAnbW9udGhzJyksXG4gICAgICAgICAgICBhbmNob3IyLCBhZGp1c3Q7XG5cbiAgICAgICAgaWYgKGIgLSBhbmNob3IgPCAwKSB7XG4gICAgICAgICAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiAtIDEsICdtb250aHMnKTtcbiAgICAgICAgICAgIC8vIGxpbmVhciBhY3Jvc3MgdGhlIG1vbnRoXG4gICAgICAgICAgICBhZGp1c3QgPSAoYiAtIGFuY2hvcikgLyAoYW5jaG9yIC0gYW5jaG9yMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiArIDEsICdtb250aHMnKTtcbiAgICAgICAgICAgIC8vIGxpbmVhciBhY3Jvc3MgdGhlIG1vbnRoXG4gICAgICAgICAgICBhZGp1c3QgPSAoYiAtIGFuY2hvcikgLyAoYW5jaG9yMiAtIGFuY2hvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gLSh3aG9sZU1vbnRoRGlmZiArIGFkanVzdCk7XG4gICAgfVxuXG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLmRlZmF1bHRGb3JtYXQgPSAnWVlZWS1NTS1ERFRISDptbTpzc1onO1xuXG4gICAgZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2RkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9tZW50X2Zvcm1hdF9fdG9JU09TdHJpbmcgKCkge1xuICAgICAgICB2YXIgbSA9IHRoaXMuY2xvbmUoKS51dGMoKTtcbiAgICAgICAgaWYgKDAgPCBtLnllYXIoKSAmJiBtLnllYXIoKSA8PSA5OTk5KSB7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZykpIHtcbiAgICAgICAgICAgICAgICAvLyBuYXRpdmUgaW1wbGVtZW50YXRpb24gaXMgfjUweCBmYXN0ZXIsIHVzZSBpdCB3aGVuIHdlIGNhblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXRNb21lbnQobSwgJ1lZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRNb21lbnQobSwgJ1lZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0IChpbnB1dFN0cmluZykge1xuICAgICAgICB2YXIgb3V0cHV0ID0gZm9ybWF0TW9tZW50KHRoaXMsIGlucHV0U3RyaW5nIHx8IHV0aWxzX2hvb2tzX19ob29rcy5kZWZhdWx0Rm9ybWF0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQob3V0cHV0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmcm9tICh0aW1lLCB3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWQoKSAmJlxuICAgICAgICAgICAgICAgICgoaXNNb21lbnQodGltZSkgJiYgdGltZS5pc1ZhbGlkKCkpIHx8XG4gICAgICAgICAgICAgICAgIGxvY2FsX19jcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlX19jcmVhdGVEdXJhdGlvbih7dG86IHRoaXMsIGZyb206IHRpbWV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXdpdGhvdXRTdWZmaXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmcm9tTm93ICh3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20obG9jYWxfX2NyZWF0ZUxvY2FsKCksIHdpdGhvdXRTdWZmaXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvICh0aW1lLCB3aXRob3V0U3VmZml4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWQoKSAmJlxuICAgICAgICAgICAgICAgICgoaXNNb21lbnQodGltZSkgJiYgdGltZS5pc1ZhbGlkKCkpIHx8XG4gICAgICAgICAgICAgICAgIGxvY2FsX19jcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlX19jcmVhdGVEdXJhdGlvbih7ZnJvbTogdGhpcywgdG86IHRpbWV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXdpdGhvdXRTdWZmaXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b05vdyAod2l0aG91dFN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy50byhsb2NhbF9fY3JlYXRlTG9jYWwoKSwgd2l0aG91dFN1ZmZpeCk7XG4gICAgfVxuXG4gICAgLy8gSWYgcGFzc2VkIGEgbG9jYWxlIGtleSwgaXQgd2lsbCBzZXQgdGhlIGxvY2FsZSBmb3IgdGhpc1xuICAgIC8vIGluc3RhbmNlLiAgT3RoZXJ3aXNlLCBpdCB3aWxsIHJldHVybiB0aGUgbG9jYWxlIGNvbmZpZ3VyYXRpb25cbiAgICAvLyB2YXJpYWJsZXMgZm9yIHRoaXMgaW5zdGFuY2UuXG4gICAgZnVuY3Rpb24gbG9jYWxlIChrZXkpIHtcbiAgICAgICAgdmFyIG5ld0xvY2FsZURhdGE7XG5cbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxlLl9hYmJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3TG9jYWxlRGF0YSA9IGxvY2FsZV9sb2NhbGVzX19nZXRMb2NhbGUoa2V5KTtcbiAgICAgICAgICAgIGlmIChuZXdMb2NhbGVEYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbGUgPSBuZXdMb2NhbGVEYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbGFuZyA9IGRlcHJlY2F0ZShcbiAgICAgICAgJ21vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuJyxcbiAgICAgICAgZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICk7XG5cbiAgICBmdW5jdGlvbiBsb2NhbGVEYXRhICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdGFydE9mICh1bml0cykge1xuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBzd2l0Y2ggaW50ZW50aW9uYWxseSBvbWl0cyBicmVhayBrZXl3b3Jkc1xuICAgICAgICAvLyB0byB1dGlsaXplIGZhbGxpbmcgdGhyb3VnaCB0aGUgY2FzZXMuXG4gICAgICAgIHN3aXRjaCAodW5pdHMpIHtcbiAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgICB0aGlzLm1vbnRoKDApO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgdGhpcy5kYXRlKDEpO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgY2FzZSAnaXNvV2Vlayc6XG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgICAgICB0aGlzLmhvdXJzKDApO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICdob3VyJzpcbiAgICAgICAgICAgIHRoaXMubWludXRlcygwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnbWludXRlJzpcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kcygwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgICAgICAgIHRoaXMubWlsbGlzZWNvbmRzKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2Vla3MgYXJlIGEgc3BlY2lhbCBjYXNlXG4gICAgICAgIGlmICh1bml0cyA9PT0gJ3dlZWsnKSB7XG4gICAgICAgICAgICB0aGlzLndlZWtkYXkoMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuaXRzID09PSAnaXNvV2VlaycpIHtcbiAgICAgICAgICAgIHRoaXMuaXNvV2Vla2RheSgxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHF1YXJ0ZXJzIGFyZSBhbHNvIHNwZWNpYWxcbiAgICAgICAgaWYgKHVuaXRzID09PSAncXVhcnRlcicpIHtcbiAgICAgICAgICAgIHRoaXMubW9udGgoTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkgLyAzKSAqIDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5kT2YgKHVuaXRzKSB7XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgICAgICBpZiAodW5pdHMgPT09IHVuZGVmaW5lZCB8fCB1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRPZih1bml0cykuYWRkKDEsICh1bml0cyA9PT0gJ2lzb1dlZWsnID8gJ3dlZWsnIDogdW5pdHMpKS5zdWJ0cmFjdCgxLCAnbXMnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b190eXBlX192YWx1ZU9mICgpIHtcbiAgICAgICAgcmV0dXJuICt0aGlzLl9kIC0gKCh0aGlzLl9vZmZzZXQgfHwgMCkgKiA2MDAwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5peCAoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCt0aGlzIC8gMTAwMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9EYXRlICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldCA/IG5ldyBEYXRlKCt0aGlzKSA6IHRoaXMuX2Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9BcnJheSAoKSB7XG4gICAgICAgIHZhciBtID0gdGhpcztcbiAgICAgICAgcmV0dXJuIFttLnllYXIoKSwgbS5tb250aCgpLCBtLmRhdGUoKSwgbS5ob3VyKCksIG0ubWludXRlKCksIG0uc2Vjb25kKCksIG0ubWlsbGlzZWNvbmQoKV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9PYmplY3QgKCkge1xuICAgICAgICB2YXIgbSA9IHRoaXM7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB5ZWFyczogbS55ZWFyKCksXG4gICAgICAgICAgICBtb250aHM6IG0ubW9udGgoKSxcbiAgICAgICAgICAgIGRhdGU6IG0uZGF0ZSgpLFxuICAgICAgICAgICAgaG91cnM6IG0uaG91cnMoKSxcbiAgICAgICAgICAgIG1pbnV0ZXM6IG0ubWludXRlcygpLFxuICAgICAgICAgICAgc2Vjb25kczogbS5zZWNvbmRzKCksXG4gICAgICAgICAgICBtaWxsaXNlY29uZHM6IG0ubWlsbGlzZWNvbmRzKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b0pTT04gKCkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeShuZXcgRGF0ZShOYU4pKSA9PT0gJ251bGwnXG4gICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMudG9JU09TdHJpbmcoKSA6ICdudWxsJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb21lbnRfdmFsaWRfX2lzVmFsaWQgKCkge1xuICAgICAgICByZXR1cm4gdmFsaWRfX2lzVmFsaWQodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2luZ0ZsYWdzICgpIHtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZhbGlkQXQgKCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpLm92ZXJmbG93O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0aW9uRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlucHV0OiB0aGlzLl9pLFxuICAgICAgICAgICAgZm9ybWF0OiB0aGlzLl9mLFxuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLl9sb2NhbGUsXG4gICAgICAgICAgICBpc1VUQzogdGhpcy5faXNVVEMsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuX3N0cmljdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnZ2cnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53ZWVrWWVhcigpICUgMTAwO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydHRycsIDJdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzb1dlZWtZZWFyKCkgJSAxMDA7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBhZGRXZWVrWWVhckZvcm1hdFRva2VuICh0b2tlbiwgZ2V0dGVyKSB7XG4gICAgICAgIGFkZEZvcm1hdFRva2VuKDAsIFt0b2tlbiwgdG9rZW4ubGVuZ3RoXSwgMCwgZ2V0dGVyKTtcbiAgICB9XG5cbiAgICBhZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnJywgICAgICd3ZWVrWWVhcicpO1xuICAgIGFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ2dnZ2dnJywgICAgJ3dlZWtZZWFyJyk7XG4gICAgYWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHRycsICAnaXNvV2Vla1llYXInKTtcbiAgICBhZGRXZWVrWWVhckZvcm1hdFRva2VuKCdHR0dHRycsICdpc29XZWVrWWVhcicpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCd3ZWVrWWVhcicsICdnZycpO1xuICAgIGFkZFVuaXRBbGlhcygnaXNvV2Vla1llYXInLCAnR0cnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ0cnLCAgICAgIG1hdGNoU2lnbmVkKTtcbiAgICBhZGRSZWdleFRva2VuKCdnJywgICAgICBtYXRjaFNpZ25lZCk7XG4gICAgYWRkUmVnZXhUb2tlbignR0cnLCAgICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ2dnJywgICAgIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdHR0dHJywgICBtYXRjaDF0bzQsIG1hdGNoNCk7XG4gICAgYWRkUmVnZXhUb2tlbignZ2dnZycsICAgbWF0Y2gxdG80LCBtYXRjaDQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0dHR0dHJywgIG1hdGNoMXRvNiwgbWF0Y2g2KTtcbiAgICBhZGRSZWdleFRva2VuKCdnZ2dnZycsICBtYXRjaDF0bzYsIG1hdGNoNik7XG5cbiAgICBhZGRXZWVrUGFyc2VUb2tlbihbJ2dnZ2cnLCAnZ2dnZ2cnLCAnR0dHRycsICdHR0dHRyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgd2Vla1t0b2tlbi5zdWJzdHIoMCwgMildID0gdG9JbnQoaW5wdXQpO1xuICAgIH0pO1xuXG4gICAgYWRkV2Vla1BhcnNlVG9rZW4oWydnZycsICdHRyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICAgICAgd2Vla1t0b2tlbl0gPSB1dGlsc19ob29rc19faG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO1xuICAgIH0pO1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0V2Vla1llYXIgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrKCksXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrZGF5KCksXG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93LFxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRveSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2V0SVNPV2Vla1llYXIgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsXG4gICAgICAgICAgICAgICAgaW5wdXQsIHRoaXMuaXNvV2VlaygpLCB0aGlzLmlzb1dlZWtkYXkoKSwgMSwgNCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0SVNPV2Vla3NJblllYXIgKCkge1xuICAgICAgICByZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksIDEsIDQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFdlZWtzSW5ZZWFyICgpIHtcbiAgICAgICAgdmFyIHdlZWtJbmZvID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7XG4gICAgICAgIHJldHVybiB3ZWVrc0luWWVhcih0aGlzLnllYXIoKSwgd2Vla0luZm8uZG93LCB3ZWVrSW5mby5kb3kpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldFdlZWtZZWFySGVscGVyKGlucHV0LCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICAgICAgICB2YXIgd2Vla3NUYXJnZXQ7XG4gICAgICAgIGlmIChpbnB1dCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gd2Vla09mWWVhcih0aGlzLCBkb3csIGRveSkueWVhcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdlZWtzVGFyZ2V0ID0gd2Vla3NJblllYXIoaW5wdXQsIGRvdywgZG95KTtcbiAgICAgICAgICAgIGlmICh3ZWVrID4gd2Vla3NUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICB3ZWVrID0gd2Vla3NUYXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2V0V2Vla0FsbC5jYWxsKHRoaXMsIGlucHV0LCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRXZWVrQWxsKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICAgICAgICB2YXIgZGF5T2ZZZWFyRGF0YSA9IGRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpLFxuICAgICAgICAgICAgZGF0ZSA9IGNyZWF0ZVVUQ0RhdGUoZGF5T2ZZZWFyRGF0YS55ZWFyLCAwLCBkYXlPZlllYXJEYXRhLmRheU9mWWVhcik7XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJnb3RcIiwgd2Vla1llYXIsIHdlZWssIHdlZWtkYXksIFwic2V0XCIsIGRhdGUudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMueWVhcihkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpO1xuICAgICAgICB0aGlzLm1vbnRoKGRhdGUuZ2V0VVRDTW9udGgoKSk7XG4gICAgICAgIHRoaXMuZGF0ZShkYXRlLmdldFVUQ0RhdGUoKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdRJywgMCwgJ1FvJywgJ3F1YXJ0ZXInKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygncXVhcnRlcicsICdRJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdRJywgbWF0Y2gxKTtcbiAgICBhZGRQYXJzZVRva2VuKCdRJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICBhcnJheVtNT05USF0gPSAodG9JbnQoaW5wdXQpIC0gMSkgKiAzO1xuICAgIH0pO1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0UXVhcnRlciAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyBNYXRoLmNlaWwoKHRoaXMubW9udGgoKSArIDEpIC8gMykgOiB0aGlzLm1vbnRoKChpbnB1dCAtIDEpICogMyArIHRoaXMubW9udGgoKSAlIDMpO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCd3JywgWyd3dycsIDJdLCAnd28nLCAnd2VlaycpO1xuICAgIGFkZEZvcm1hdFRva2VuKCdXJywgWydXVycsIDJdLCAnV28nLCAnaXNvV2VlaycpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCd3ZWVrJywgJ3cnKTtcbiAgICBhZGRVbml0QWxpYXMoJ2lzb1dlZWsnLCAnVycpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbigndycsICBtYXRjaDF0bzIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ3d3JywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1cnLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdXVycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcblxuICAgIGFkZFdlZWtQYXJzZVRva2VuKFsndycsICd3dycsICdXJywgJ1dXJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICAgICAgICB3ZWVrW3Rva2VuLnN1YnN0cigwLCAxKV0gPSB0b0ludChpbnB1dCk7XG4gICAgfSk7XG5cbiAgICAvLyBIRUxQRVJTXG5cbiAgICAvLyBMT0NBTEVTXG5cbiAgICBmdW5jdGlvbiBsb2NhbGVXZWVrIChtb20pIHtcbiAgICAgICAgcmV0dXJuIHdlZWtPZlllYXIobW9tLCB0aGlzLl93ZWVrLmRvdywgdGhpcy5fd2Vlay5kb3kpLndlZWs7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRMb2NhbGVXZWVrID0ge1xuICAgICAgICBkb3cgOiAwLCAvLyBTdW5kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2Vlay5cbiAgICAgICAgZG95IDogNiAgLy8gVGhlIHdlZWsgdGhhdCBjb250YWlucyBKYW4gMXN0IGlzIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyLlxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBsb2NhbGVGaXJzdERheU9mV2VlayAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrLmRvdztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2NhbGVGaXJzdERheU9mWWVhciAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrLmRveTtcbiAgICB9XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICBmdW5jdGlvbiBnZXRTZXRXZWVrIChpbnB1dCkge1xuICAgICAgICB2YXIgd2VlayA9IHRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZXRJU09XZWVrIChpbnB1dCkge1xuICAgICAgICB2YXIgd2VlayA9IHdlZWtPZlllYXIodGhpcywgMSwgNCkud2VlaztcbiAgICAgICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyB3ZWVrIDogdGhpcy5hZGQoKGlucHV0IC0gd2VlaykgKiA3LCAnZCcpO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdEJywgWydERCcsIDJdLCAnRG8nLCAnZGF0ZScpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCdkYXRlJywgJ0QnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ0QnLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdERCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdEbycsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBpc1N0cmljdCA/IGxvY2FsZS5fb3JkaW5hbFBhcnNlIDogbG9jYWxlLl9vcmRpbmFsUGFyc2VMZW5pZW50O1xuICAgIH0pO1xuXG4gICAgYWRkUGFyc2VUb2tlbihbJ0QnLCAnREQnXSwgREFURSk7XG4gICAgYWRkUGFyc2VUb2tlbignRG8nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgICAgIGFycmF5W0RBVEVdID0gdG9JbnQoaW5wdXQubWF0Y2gobWF0Y2gxdG8yKVswXSwgMTApO1xuICAgIH0pO1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgdmFyIGdldFNldERheU9mTW9udGggPSBtYWtlR2V0U2V0KCdEYXRlJywgdHJ1ZSk7XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbignZCcsIDAsICdkbycsICdkYXknKTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsIGZvcm1hdCk7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignZGRkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLCBmb3JtYXQpO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ2RkZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5cyh0aGlzLCBmb3JtYXQpO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ2UnLCAwLCAwLCAnd2Vla2RheScpO1xuICAgIGFkZEZvcm1hdFRva2VuKCdFJywgMCwgMCwgJ2lzb1dlZWtkYXknKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnZGF5JywgJ2QnKTtcbiAgICBhZGRVbml0QWxpYXMoJ3dlZWtkYXknLCAnZScpO1xuICAgIGFkZFVuaXRBbGlhcygnaXNvV2Vla2RheScsICdFJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCdkJywgICAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdlJywgICAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdFJywgICAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdkZCcsICAgbWF0Y2hXb3JkKTtcbiAgICBhZGRSZWdleFRva2VuKCdkZGQnLCAgbWF0Y2hXb3JkKTtcbiAgICBhZGRSZWdleFRva2VuKCdkZGRkJywgbWF0Y2hXb3JkKTtcblxuICAgIGFkZFdlZWtQYXJzZVRva2VuKFsnZGQnLCAnZGRkJywgJ2RkZGQnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgICAgIHZhciB3ZWVrZGF5ID0gY29uZmlnLl9sb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcbiAgICAgICAgLy8gaWYgd2UgZGlkbid0IGdldCBhIHdlZWtkYXkgbmFtZSwgbWFyayB0aGUgZGF0ZSBhcyBpbnZhbGlkXG4gICAgICAgIGlmICh3ZWVrZGF5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHdlZWsuZCA9IHdlZWtkYXk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkV2Vla2RheSA9IGlucHV0O1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBhZGRXZWVrUGFyc2VUb2tlbihbJ2QnLCAnZScsICdFJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICAgICAgICB3ZWVrW3Rva2VuXSA9IHRvSW50KGlucHV0KTtcbiAgICB9KTtcblxuICAgIC8vIEhFTFBFUlNcblxuICAgIGZ1bmN0aW9uIHBhcnNlV2Vla2RheShpbnB1dCwgbG9jYWxlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzTmFOKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGlucHV0LCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dCA9IGxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIExPQ0FMRVNcblxuICAgIHZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXMgPSAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyk7XG4gICAgZnVuY3Rpb24gbG9jYWxlV2Vla2RheXMgKG0sIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl93ZWVrZGF5cykgPyB0aGlzLl93ZWVrZGF5c1ttLmRheSgpXSA6XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1t0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ11bbS5kYXkoKV07XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0ID0gJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKTtcbiAgICBmdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1Nob3J0IChtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0W20uZGF5KCldO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW4gPSAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyk7XG4gICAgZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNNaW4gKG0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluW20uZGF5KCldO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzUGFyc2UgKHdlZWtkYXlOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICAgICAgICB2YXIgaSwgbW9tLCByZWdleDtcblxuICAgICAgICBpZiAoIXRoaXMuX3dlZWtkYXlzUGFyc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIC8vIG1ha2UgdGhlIHJlZ2V4IGlmIHdlIGRvbid0IGhhdmUgaXQgYWxyZWFkeVxuXG4gICAgICAgICAgICBtb20gPSBsb2NhbF9fY3JlYXRlTG9jYWwoWzIwMDAsIDFdKS5kYXkoaSk7XG4gICAgICAgICAgICBpZiAoc3RyaWN0ICYmICF0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMud2Vla2RheXNNaW4obW9tLCAnJykucmVwbGFjZSgnLicsICdcXC4/JykgKyAnJCcsICdpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3dlZWtkYXlzUGFyc2VbaV0pIHtcbiAgICAgICAgICAgICAgICByZWdleCA9ICdeJyArIHRoaXMud2Vla2RheXMobW9tLCAnJykgKyAnfF4nICsgdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpICsgJ3xeJyArIHRoaXMud2Vla2RheXNNaW4obW9tLCAnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsICcnKSwgJ2knKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRlc3QgdGhlIHJlZ2V4XG4gICAgICAgICAgICBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkZGQnICYmIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZGQnICYmIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGQnICYmIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCAmJiB0aGlzLl93ZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICBmdW5jdGlvbiBnZXRTZXREYXlPZldlZWsgKGlucHV0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF5ID0gdGhpcy5faXNVVEMgPyB0aGlzLl9kLmdldFVUQ0RheSgpIDogdGhpcy5fZC5nZXREYXkoKTtcbiAgICAgICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlucHV0ID0gcGFyc2VXZWVrZGF5KGlucHV0LCB0aGlzLmxvY2FsZURhdGEoKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQoaW5wdXQgLSBkYXksICdkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZGF5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrIChpbnB1dCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdlZWtkYXkgPSAodGhpcy5kYXkoKSArIDcgLSB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3cpICUgNztcbiAgICAgICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyB3ZWVrZGF5IDogdGhpcy5hZGQoaW5wdXQgLSB3ZWVrZGF5LCAnZCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNldElTT0RheU9mV2VlayAoaW5wdXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICAgICAgICB9XG4gICAgICAgIC8vIGJlaGF2ZXMgdGhlIHNhbWUgYXMgbW9tZW50I2RheSBleGNlcHRcbiAgICAgICAgLy8gYXMgYSBnZXR0ZXIsIHJldHVybnMgNyBpbnN0ZWFkIG9mIDAgKDEtNyByYW5nZSBpbnN0ZWFkIG9mIDAtNilcbiAgICAgICAgLy8gYXMgYSBzZXR0ZXIsIHN1bmRheSBzaG91bGQgYmVsb25nIHRvIHRoZSBwcmV2aW91cyB3ZWVrLlxuICAgICAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHRoaXMuZGF5KCkgfHwgNyA6IHRoaXMuZGF5KHRoaXMuZGF5KCkgJSA3ID8gaW5wdXQgOiBpbnB1dCAtIDcpO1xuICAgIH1cblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdEREQnLCBbJ0REREQnLCAzXSwgJ0RERG8nLCAnZGF5T2ZZZWFyJyk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ2RheU9mWWVhcicsICdEREQnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ0RERCcsICBtYXRjaDF0bzMpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0REREQnLCBtYXRjaDMpO1xuICAgIGFkZFBhcnNlVG9rZW4oWydEREQnLCAnRERERCddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgY29uZmlnLl9kYXlPZlllYXIgPSB0b0ludChpbnB1dCk7XG4gICAgfSk7XG5cbiAgICAvLyBIRUxQRVJTXG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICBmdW5jdGlvbiBnZXRTZXREYXlPZlllYXIgKGlucHV0KSB7XG4gICAgICAgIHZhciBkYXlPZlllYXIgPSBNYXRoLnJvdW5kKCh0aGlzLmNsb25lKCkuc3RhcnRPZignZGF5JykgLSB0aGlzLmNsb25lKCkuc3RhcnRPZigneWVhcicpKSAvIDg2NGU1KSArIDE7XG4gICAgICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gZGF5T2ZZZWFyIDogdGhpcy5hZGQoKGlucHV0IC0gZGF5T2ZZZWFyKSwgJ2QnKTtcbiAgICB9XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBmdW5jdGlvbiBoRm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3VycygpICUgMTIgfHwgMTI7XG4gICAgfVxuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ0gnLCBbJ0hIJywgMl0sIDAsICdob3VyJyk7XG4gICAgYWRkRm9ybWF0VG9rZW4oJ2gnLCBbJ2hoJywgMl0sIDAsIGhGb3JtYXQpO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ2htbScsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICcnICsgaEZvcm1hdC5hcHBseSh0aGlzKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKCdobW1zcycsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICcnICsgaEZvcm1hdC5hcHBseSh0aGlzKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArXG4gICAgICAgICAgICB6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwgMik7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignSG1tJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJycgKyB0aGlzLmhvdXJzKCkgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMik7XG4gICAgfSk7XG5cbiAgICBhZGRGb3JtYXRUb2tlbignSG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnJyArIHRoaXMuaG91cnMoKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArXG4gICAgICAgICAgICB6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwgMik7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBtZXJpZGllbSAodG9rZW4sIGxvd2VyY2FzZSkge1xuICAgICAgICBhZGRGb3JtYXRUb2tlbih0b2tlbiwgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSwgdGhpcy5taW51dGVzKCksIGxvd2VyY2FzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG1lcmlkaWVtKCdhJywgdHJ1ZSk7XG4gICAgbWVyaWRpZW0oJ0EnLCBmYWxzZSk7XG5cbiAgICAvLyBBTElBU0VTXG5cbiAgICBhZGRVbml0QWxpYXMoJ2hvdXInLCAnaCcpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgZnVuY3Rpb24gbWF0Y2hNZXJpZGllbSAoaXNTdHJpY3QsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLl9tZXJpZGllbVBhcnNlO1xuICAgIH1cblxuICAgIGFkZFJlZ2V4VG9rZW4oJ2EnLCAgbWF0Y2hNZXJpZGllbSk7XG4gICAgYWRkUmVnZXhUb2tlbignQScsICBtYXRjaE1lcmlkaWVtKTtcbiAgICBhZGRSZWdleFRva2VuKCdIJywgIG1hdGNoMXRvMik7XG4gICAgYWRkUmVnZXhUb2tlbignaCcsICBtYXRjaDF0bzIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ0hIJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ2hoJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuXG4gICAgYWRkUmVnZXhUb2tlbignaG1tJywgbWF0Y2gzdG80KTtcbiAgICBhZGRSZWdleFRva2VuKCdobW1zcycsIG1hdGNoNXRvNik7XG4gICAgYWRkUmVnZXhUb2tlbignSG1tJywgbWF0Y2gzdG80KTtcbiAgICBhZGRSZWdleFRva2VuKCdIbW1zcycsIG1hdGNoNXRvNik7XG5cbiAgICBhZGRQYXJzZVRva2VuKFsnSCcsICdISCddLCBIT1VSKTtcbiAgICBhZGRQYXJzZVRva2VuKFsnYScsICdBJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICBjb25maWcuX2lzUG0gPSBjb25maWcuX2xvY2FsZS5pc1BNKGlucHV0KTtcbiAgICAgICAgY29uZmlnLl9tZXJpZGllbSA9IGlucHV0O1xuICAgIH0pO1xuICAgIGFkZFBhcnNlVG9rZW4oWydoJywgJ2hoJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0KTtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG4gICAgfSk7XG4gICAgYWRkUGFyc2VUb2tlbignaG1tJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgICAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgICAgICAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MpKTtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG4gICAgfSk7XG4gICAgYWRkUGFyc2VUb2tlbignaG1tc3MnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgdmFyIHBvczEgPSBpbnB1dC5sZW5ndGggLSA0O1xuICAgICAgICB2YXIgcG9zMiA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gICAgICAgIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvczEpKTtcbiAgICAgICAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MxLCAyKSk7XG4gICAgICAgIGFycmF5W1NFQ09ORF0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMikpO1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBhZGRQYXJzZVRva2VuKCdIbW0nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICAgICAgdmFyIHBvcyA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gICAgICAgIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvcykpO1xuICAgICAgICBhcnJheVtNSU5VVEVdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvcykpO1xuICAgIH0pO1xuICAgIGFkZFBhcnNlVG9rZW4oJ0htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNDtcbiAgICAgICAgdmFyIHBvczIgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgICAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gICAgICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICAgICAgICBhcnJheVtTRUNPTkRdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvczIpKTtcbiAgICB9KTtcblxuICAgIC8vIExPQ0FMRVNcblxuICAgIGZ1bmN0aW9uIGxvY2FsZUlzUE0gKGlucHV0KSB7XG4gICAgICAgIC8vIElFOCBRdWlya3MgTW9kZSAmIElFNyBTdGFuZGFyZHMgTW9kZSBkbyBub3QgYWxsb3cgYWNjZXNzaW5nIHN0cmluZ3MgbGlrZSBhcnJheXNcbiAgICAgICAgLy8gVXNpbmcgY2hhckF0IHNob3VsZCBiZSBtb3JlIGNvbXBhdGlibGUuXG4gICAgICAgIHJldHVybiAoKGlucHV0ICsgJycpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApID09PSAncCcpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0TG9jYWxlTWVyaWRpZW1QYXJzZSA9IC9bYXBdXFwuP20/XFwuPy9pO1xuICAgIGZ1bmN0aW9uIGxvY2FsZU1lcmlkaWVtIChob3VycywgbWludXRlcywgaXNMb3dlcikge1xuICAgICAgICBpZiAoaG91cnMgPiAxMSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzTG93ZXIgPyAncG0nIDogJ1BNJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpc0xvd2VyID8gJ2FtJyA6ICdBTSc7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIE1PTUVOVFNcblxuICAgIC8vIFNldHRpbmcgdGhlIGhvdXIgc2hvdWxkIGtlZXAgdGhlIHRpbWUsIGJlY2F1c2UgdGhlIHVzZXIgZXhwbGljaXRseVxuICAgIC8vIHNwZWNpZmllZCB3aGljaCBob3VyIGhlIHdhbnRzLiBTbyB0cnlpbmcgdG8gbWFpbnRhaW4gdGhlIHNhbWUgaG91ciAoaW5cbiAgICAvLyBhIG5ldyB0aW1lem9uZSkgbWFrZXMgc2Vuc2UuIEFkZGluZy9zdWJ0cmFjdGluZyBob3VycyBkb2VzIG5vdCBmb2xsb3dcbiAgICAvLyB0aGlzIHJ1bGUuXG4gICAgdmFyIGdldFNldEhvdXIgPSBtYWtlR2V0U2V0KCdIb3VycycsIHRydWUpO1xuXG4gICAgLy8gRk9STUFUVElOR1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oJ20nLCBbJ21tJywgMl0sIDAsICdtaW51dGUnKTtcblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnbWludXRlJywgJ20nKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ20nLCAgbWF0Y2gxdG8yKTtcbiAgICBhZGRSZWdleFRva2VuKCdtbScsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbiAgICBhZGRQYXJzZVRva2VuKFsnbScsICdtbSddLCBNSU5VVEUpO1xuXG4gICAgLy8gTU9NRU5UU1xuXG4gICAgdmFyIGdldFNldE1pbnV0ZSA9IG1ha2VHZXRTZXQoJ01pbnV0ZXMnLCBmYWxzZSk7XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbigncycsIFsnc3MnLCAyXSwgMCwgJ3NlY29uZCcpO1xuXG4gICAgLy8gQUxJQVNFU1xuXG4gICAgYWRkVW5pdEFsaWFzKCdzZWNvbmQnLCAncycpO1xuXG4gICAgLy8gUEFSU0lOR1xuXG4gICAgYWRkUmVnZXhUb2tlbigncycsICBtYXRjaDF0bzIpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ3NzJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuICAgIGFkZFBhcnNlVG9rZW4oWydzJywgJ3NzJ10sIFNFQ09ORCk7XG5cbiAgICAvLyBNT01FTlRTXG5cbiAgICB2YXIgZ2V0U2V0U2Vjb25kID0gbWFrZUdldFNldCgnU2Vjb25kcycsIGZhbHNlKTtcblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdTJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gfn4odGhpcy5taWxsaXNlY29uZCgpIC8gMTAwKTtcbiAgICB9KTtcblxuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1MnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gfn4odGhpcy5taWxsaXNlY29uZCgpIC8gMTApO1xuICAgIH0pO1xuXG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydTU1MnLCAzXSwgMCwgJ21pbGxpc2Vjb25kJyk7XG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTJywgNF0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwO1xuICAgIH0pO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1MnLCA1XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwO1xuICAgIH0pO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTJywgNl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDA7XG4gICAgfSk7XG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTU1NTJywgN10sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwO1xuICAgIH0pO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTU1MnLCA4XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwMDAwO1xuICAgIH0pO1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTU1NTJywgOV0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwMDA7XG4gICAgfSk7XG5cblxuICAgIC8vIEFMSUFTRVNcblxuICAgIGFkZFVuaXRBbGlhcygnbWlsbGlzZWNvbmQnLCAnbXMnKTtcblxuICAgIC8vIFBBUlNJTkdcblxuICAgIGFkZFJlZ2V4VG9rZW4oJ1MnLCAgICBtYXRjaDF0bzMsIG1hdGNoMSk7XG4gICAgYWRkUmVnZXhUb2tlbignU1MnLCAgIG1hdGNoMXRvMywgbWF0Y2gyKTtcbiAgICBhZGRSZWdleFRva2VuKCdTU1MnLCAgbWF0Y2gxdG8zLCBtYXRjaDMpO1xuXG4gICAgdmFyIHRva2VuO1xuICAgIGZvciAodG9rZW4gPSAnU1NTUyc7IHRva2VuLmxlbmd0aCA8PSA5OyB0b2tlbiArPSAnUycpIHtcbiAgICAgICAgYWRkUmVnZXhUb2tlbih0b2tlbiwgbWF0Y2hVbnNpZ25lZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VNcyhpbnB1dCwgYXJyYXkpIHtcbiAgICAgICAgYXJyYXlbTUlMTElTRUNPTkRdID0gdG9JbnQoKCcwLicgKyBpbnB1dCkgKiAxMDAwKTtcbiAgICB9XG5cbiAgICBmb3IgKHRva2VuID0gJ1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gICAgICAgIGFkZFBhcnNlVG9rZW4odG9rZW4sIHBhcnNlTXMpO1xuICAgIH1cbiAgICAvLyBNT01FTlRTXG5cbiAgICB2YXIgZ2V0U2V0TWlsbGlzZWNvbmQgPSBtYWtlR2V0U2V0KCdNaWxsaXNlY29uZHMnLCBmYWxzZSk7XG5cbiAgICAvLyBGT1JNQVRUSU5HXG5cbiAgICBhZGRGb3JtYXRUb2tlbigneicsICAwLCAwLCAnem9uZUFiYnInKTtcbiAgICBhZGRGb3JtYXRUb2tlbignenonLCAwLCAwLCAnem9uZU5hbWUnKTtcblxuICAgIC8vIE1PTUVOVFNcblxuICAgIGZ1bmN0aW9uIGdldFpvbmVBYmJyICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVVRDID8gJ1VUQycgOiAnJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRab25lTmFtZSAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1VUQyA/ICdDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZScgOiAnJztcbiAgICB9XG5cbiAgICB2YXIgbW9tZW50UHJvdG90eXBlX19wcm90byA9IE1vbWVudC5wcm90b3R5cGU7XG5cbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmFkZCAgICAgICAgICAgICAgID0gYWRkX3N1YnRyYWN0X19hZGQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5jYWxlbmRhciAgICAgICAgICA9IG1vbWVudF9jYWxlbmRhcl9fY2FsZW5kYXI7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5jbG9uZSAgICAgICAgICAgICA9IGNsb25lO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZGlmZiAgICAgICAgICAgICAgPSBkaWZmO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZW5kT2YgICAgICAgICAgICAgPSBlbmRPZjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmZvcm1hdCAgICAgICAgICAgID0gZm9ybWF0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZnJvbSAgICAgICAgICAgICAgPSBmcm9tO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZnJvbU5vdyAgICAgICAgICAgPSBmcm9tTm93O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udG8gICAgICAgICAgICAgICAgPSB0bztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvTm93ICAgICAgICAgICAgID0gdG9Ob3c7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5nZXQgICAgICAgICAgICAgICA9IGdldFNldDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmludmFsaWRBdCAgICAgICAgID0gaW52YWxpZEF0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNBZnRlciAgICAgICAgICAgPSBpc0FmdGVyO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNCZWZvcmUgICAgICAgICAgPSBpc0JlZm9yZTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzQmV0d2VlbiAgICAgICAgID0gaXNCZXR3ZWVuO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNTYW1lICAgICAgICAgICAgPSBpc1NhbWU7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc1NhbWVPckFmdGVyICAgICA9IGlzU2FtZU9yQWZ0ZXI7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc1NhbWVPckJlZm9yZSAgICA9IGlzU2FtZU9yQmVmb3JlO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNWYWxpZCAgICAgICAgICAgPSBtb21lbnRfdmFsaWRfX2lzVmFsaWQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5sYW5nICAgICAgICAgICAgICA9IGxhbmc7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5sb2NhbGUgICAgICAgICAgICA9IGxvY2FsZTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmxvY2FsZURhdGEgICAgICAgID0gbG9jYWxlRGF0YTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1heCAgICAgICAgICAgICAgID0gcHJvdG90eXBlTWF4O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubWluICAgICAgICAgICAgICAgPSBwcm90b3R5cGVNaW47XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5wYXJzaW5nRmxhZ3MgICAgICA9IHBhcnNpbmdGbGFncztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnNldCAgICAgICAgICAgICAgID0gZ2V0U2V0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uc3RhcnRPZiAgICAgICAgICAgPSBzdGFydE9mO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uc3VidHJhY3QgICAgICAgICAgPSBhZGRfc3VidHJhY3RfX3N1YnRyYWN0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udG9BcnJheSAgICAgICAgICAgPSB0b0FycmF5O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udG9PYmplY3QgICAgICAgICAgPSB0b09iamVjdDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvRGF0ZSAgICAgICAgICAgID0gdG9EYXRlO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udG9JU09TdHJpbmcgICAgICAgPSBtb21lbnRfZm9ybWF0X190b0lTT1N0cmluZztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnRvSlNPTiAgICAgICAgICAgID0gdG9KU09OO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8udG9TdHJpbmcgICAgICAgICAgPSB0b1N0cmluZztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnVuaXggICAgICAgICAgICAgID0gdW5peDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnZhbHVlT2YgICAgICAgICAgID0gdG9fdHlwZV9fdmFsdWVPZjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmNyZWF0aW9uRGF0YSAgICAgID0gY3JlYXRpb25EYXRhO1xuXG4gICAgLy8gWWVhclxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ueWVhciAgICAgICA9IGdldFNldFllYXI7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc0xlYXBZZWFyID0gZ2V0SXNMZWFwWWVhcjtcblxuICAgIC8vIFdlZWsgWWVhclxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ud2Vla1llYXIgICAgPSBnZXRTZXRXZWVrWWVhcjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzb1dlZWtZZWFyID0gZ2V0U2V0SVNPV2Vla1llYXI7XG5cbiAgICAvLyBRdWFydGVyXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5xdWFydGVyID0gbW9tZW50UHJvdG90eXBlX19wcm90by5xdWFydGVycyA9IGdldFNldFF1YXJ0ZXI7XG5cbiAgICAvLyBNb250aFxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubW9udGggICAgICAgPSBnZXRTZXRNb250aDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRheXNJbk1vbnRoID0gZ2V0RGF5c0luTW9udGg7XG5cbiAgICAvLyBXZWVrXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by53ZWVrICAgICAgICAgICA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG8ud2Vla3MgICAgICAgID0gZ2V0U2V0V2VlaztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzb1dlZWsgICAgICAgID0gbW9tZW50UHJvdG90eXBlX19wcm90by5pc29XZWVrcyAgICAgPSBnZXRTZXRJU09XZWVrO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ud2Vla3NJblllYXIgICAgPSBnZXRXZWVrc0luWWVhcjtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzb1dlZWtzSW5ZZWFyID0gZ2V0SVNPV2Vla3NJblllYXI7XG5cbiAgICAvLyBEYXlcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmRhdGUgICAgICAgPSBnZXRTZXREYXlPZk1vbnRoO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZGF5ICAgICAgICA9IG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZGF5cyAgICAgICAgICAgICA9IGdldFNldERheU9mV2VlaztcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLndlZWtkYXkgICAgPSBnZXRTZXRMb2NhbGVEYXlPZldlZWs7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc29XZWVrZGF5ID0gZ2V0U2V0SVNPRGF5T2ZXZWVrO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZGF5T2ZZZWFyICA9IGdldFNldERheU9mWWVhcjtcblxuICAgIC8vIEhvdXJcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmhvdXIgPSBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmhvdXJzID0gZ2V0U2V0SG91cjtcblxuICAgIC8vIE1pbnV0ZVxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubWludXRlID0gbW9tZW50UHJvdG90eXBlX19wcm90by5taW51dGVzID0gZ2V0U2V0TWludXRlO1xuXG4gICAgLy8gU2Vjb25kXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5zZWNvbmQgPSBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnNlY29uZHMgPSBnZXRTZXRTZWNvbmQ7XG5cbiAgICAvLyBNaWxsaXNlY29uZFxuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubWlsbGlzZWNvbmQgPSBtb21lbnRQcm90b3R5cGVfX3Byb3RvLm1pbGxpc2Vjb25kcyA9IGdldFNldE1pbGxpc2Vjb25kO1xuXG4gICAgLy8gT2Zmc2V0XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by51dGNPZmZzZXQgICAgICAgICAgICA9IGdldFNldE9mZnNldDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnV0YyAgICAgICAgICAgICAgICAgID0gc2V0T2Zmc2V0VG9VVEM7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5sb2NhbCAgICAgICAgICAgICAgICA9IHNldE9mZnNldFRvTG9jYWw7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5wYXJzZVpvbmUgICAgICAgICAgICA9IHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0O1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaGFzQWxpZ25lZEhvdXJPZmZzZXQgPSBoYXNBbGlnbmVkSG91ck9mZnNldDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzRFNUICAgICAgICAgICAgICAgID0gaXNEYXlsaWdodFNhdmluZ1RpbWU7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc0RTVFNoaWZ0ZWQgICAgICAgICA9IGlzRGF5bGlnaHRTYXZpbmdUaW1lU2hpZnRlZDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzTG9jYWwgICAgICAgICAgICAgID0gaXNMb2NhbDtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLmlzVXRjT2Zmc2V0ICAgICAgICAgID0gaXNVdGNPZmZzZXQ7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by5pc1V0YyAgICAgICAgICAgICAgICA9IGlzVXRjO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uaXNVVEMgICAgICAgICAgICAgICAgPSBpc1V0YztcblxuICAgIC8vIFRpbWV6b25lXG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by56b25lQWJiciA9IGdldFpvbmVBYmJyO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uem9uZU5hbWUgPSBnZXRab25lTmFtZTtcblxuICAgIC8vIERlcHJlY2F0aW9uc1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8uZGF0ZXMgID0gZGVwcmVjYXRlKCdkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLicsIGdldFNldERheU9mTW9udGgpO1xuICAgIG1vbWVudFByb3RvdHlwZV9fcHJvdG8ubW9udGhzID0gZGVwcmVjYXRlKCdtb250aHMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbnRoIGluc3RlYWQnLCBnZXRTZXRNb250aCk7XG4gICAgbW9tZW50UHJvdG90eXBlX19wcm90by55ZWFycyAgPSBkZXByZWNhdGUoJ3llYXJzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSB5ZWFyIGluc3RlYWQnLCBnZXRTZXRZZWFyKTtcbiAgICBtb21lbnRQcm90b3R5cGVfX3Byb3RvLnpvbmUgICA9IGRlcHJlY2F0ZSgnbW9tZW50KCkuem9uZSBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50KCkudXRjT2Zmc2V0IGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNzc5JywgZ2V0U2V0Wm9uZSk7XG5cbiAgICB2YXIgbW9tZW50UHJvdG90eXBlID0gbW9tZW50UHJvdG90eXBlX19wcm90bztcblxuICAgIGZ1bmN0aW9uIG1vbWVudF9fY3JlYXRlVW5peCAoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsX19jcmVhdGVMb2NhbChpbnB1dCAqIDEwMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbWVudF9fY3JlYXRlSW5ab25lICgpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsX19jcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpLnBhcnNlWm9uZSgpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0Q2FsZW5kYXIgPSB7XG4gICAgICAgIHNhbWVEYXkgOiAnW1RvZGF5IGF0XSBMVCcsXG4gICAgICAgIG5leHREYXkgOiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgICAgIG5leHRXZWVrIDogJ2RkZGQgW2F0XSBMVCcsXG4gICAgICAgIGxhc3REYXkgOiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICAgICAgICBsYXN0V2VlayA6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICAgICAgc2FtZUVsc2UgOiAnTCdcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbG9jYWxlX2NhbGVuZGFyX19jYWxlbmRhciAoa2V5LCBtb20sIG5vdykge1xuICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5fY2FsZW5kYXJba2V5XTtcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24ob3V0cHV0KSA/IG91dHB1dC5jYWxsKG1vbSwgbm93KSA6IG91dHB1dDtcbiAgICB9XG5cbiAgICB2YXIgZGVmYXVsdExvbmdEYXRlRm9ybWF0ID0ge1xuICAgICAgICBMVFMgIDogJ2g6bW06c3MgQScsXG4gICAgICAgIExUICAgOiAnaDptbSBBJyxcbiAgICAgICAgTCAgICA6ICdNTS9ERC9ZWVlZJyxcbiAgICAgICAgTEwgICA6ICdNTU1NIEQsIFlZWVknLFxuICAgICAgICBMTEwgIDogJ01NTU0gRCwgWVlZWSBoOm1tIEEnLFxuICAgICAgICBMTExMIDogJ2RkZGQsIE1NTU0gRCwgWVlZWSBoOm1tIEEnXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvbmdEYXRlRm9ybWF0IChrZXkpIHtcbiAgICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0sXG4gICAgICAgICAgICBmb3JtYXRVcHBlciA9IHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleS50b1VwcGVyQ2FzZSgpXTtcblxuICAgICAgICBpZiAoZm9ybWF0IHx8ICFmb3JtYXRVcHBlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0gPSBmb3JtYXRVcHBlci5yZXBsYWNlKC9NTU1NfE1NfEREfGRkZGQvZywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbC5zbGljZSgxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV07XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRJbnZhbGlkRGF0ZSA9ICdJbnZhbGlkIGRhdGUnO1xuXG4gICAgZnVuY3Rpb24gaW52YWxpZERhdGUgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52YWxpZERhdGU7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRPcmRpbmFsID0gJyVkJztcbiAgICB2YXIgZGVmYXVsdE9yZGluYWxQYXJzZSA9IC9cXGR7MSwyfS87XG5cbiAgICBmdW5jdGlvbiBvcmRpbmFsIChudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZSgnJWQnLCBudW1iZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZVBhcnNlUG9zdEZvcm1hdCAoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRSZWxhdGl2ZVRpbWUgPSB7XG4gICAgICAgIGZ1dHVyZSA6ICdpbiAlcycsXG4gICAgICAgIHBhc3QgICA6ICclcyBhZ28nLFxuICAgICAgICBzICA6ICdhIGZldyBzZWNvbmRzJyxcbiAgICAgICAgbSAgOiAnYSBtaW51dGUnLFxuICAgICAgICBtbSA6ICclZCBtaW51dGVzJyxcbiAgICAgICAgaCAgOiAnYW4gaG91cicsXG4gICAgICAgIGhoIDogJyVkIGhvdXJzJyxcbiAgICAgICAgZCAgOiAnYSBkYXknLFxuICAgICAgICBkZCA6ICclZCBkYXlzJyxcbiAgICAgICAgTSAgOiAnYSBtb250aCcsXG4gICAgICAgIE1NIDogJyVkIG1vbnRocycsXG4gICAgICAgIHkgIDogJ2EgeWVhcicsXG4gICAgICAgIHl5IDogJyVkIHllYXJzJ1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiByZWxhdGl2ZV9fcmVsYXRpdmVUaW1lIChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuX3JlbGF0aXZlVGltZVtzdHJpbmddO1xuICAgICAgICByZXR1cm4gKGlzRnVuY3Rpb24ob3V0cHV0KSkgP1xuICAgICAgICAgICAgb3V0cHV0KG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkgOlxuICAgICAgICAgICAgb3V0cHV0LnJlcGxhY2UoLyVkL2ksIG51bWJlcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFzdEZ1dHVyZSAoZGlmZiwgb3V0cHV0KSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLl9yZWxhdGl2ZVRpbWVbZGlmZiA+IDAgPyAnZnV0dXJlJyA6ICdwYXN0J107XG4gICAgICAgIHJldHVybiBpc0Z1bmN0aW9uKGZvcm1hdCkgPyBmb3JtYXQob3V0cHV0KSA6IGZvcm1hdC5yZXBsYWNlKC8lcy9pLCBvdXRwdXQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvY2FsZV9zZXRfX3NldCAoY29uZmlnKSB7XG4gICAgICAgIHZhciBwcm9wLCBpO1xuICAgICAgICBmb3IgKGkgaW4gY29uZmlnKSB7XG4gICAgICAgICAgICBwcm9wID0gY29uZmlnW2ldO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24ocHJvcCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2ldID0gcHJvcDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpc1snXycgKyBpXSA9IHByb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTGVuaWVudCBvcmRpbmFsIHBhcnNpbmcgYWNjZXB0cyBqdXN0IGEgbnVtYmVyIGluIGFkZGl0aW9uIHRvXG4gICAgICAgIC8vIG51bWJlciArIChwb3NzaWJseSkgc3R1ZmYgY29taW5nIGZyb20gX29yZGluYWxQYXJzZUxlbmllbnQuXG4gICAgICAgIHRoaXMuX29yZGluYWxQYXJzZUxlbmllbnQgPSBuZXcgUmVnRXhwKHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UgKyAnfCcgKyAoL1xcZHsxLDJ9Lykuc291cmNlKTtcbiAgICB9XG5cbiAgICB2YXIgcHJvdG90eXBlX19wcm90byA9IExvY2FsZS5wcm90b3R5cGU7XG5cbiAgICBwcm90b3R5cGVfX3Byb3RvLl9jYWxlbmRhciAgICAgICA9IGRlZmF1bHRDYWxlbmRhcjtcbiAgICBwcm90b3R5cGVfX3Byb3RvLmNhbGVuZGFyICAgICAgICA9IGxvY2FsZV9jYWxlbmRhcl9fY2FsZW5kYXI7XG4gICAgcHJvdG90eXBlX19wcm90by5fbG9uZ0RhdGVGb3JtYXQgPSBkZWZhdWx0TG9uZ0RhdGVGb3JtYXQ7XG4gICAgcHJvdG90eXBlX19wcm90by5sb25nRGF0ZUZvcm1hdCAgPSBsb25nRGF0ZUZvcm1hdDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9pbnZhbGlkRGF0ZSAgICA9IGRlZmF1bHRJbnZhbGlkRGF0ZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLmludmFsaWREYXRlICAgICA9IGludmFsaWREYXRlO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX29yZGluYWwgICAgICAgID0gZGVmYXVsdE9yZGluYWw7XG4gICAgcHJvdG90eXBlX19wcm90by5vcmRpbmFsICAgICAgICAgPSBvcmRpbmFsO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX29yZGluYWxQYXJzZSAgID0gZGVmYXVsdE9yZGluYWxQYXJzZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLnByZXBhcnNlICAgICAgICA9IHByZVBhcnNlUG9zdEZvcm1hdDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLnBvc3Rmb3JtYXQgICAgICA9IHByZVBhcnNlUG9zdEZvcm1hdDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9yZWxhdGl2ZVRpbWUgICA9IGRlZmF1bHRSZWxhdGl2ZVRpbWU7XG4gICAgcHJvdG90eXBlX19wcm90by5yZWxhdGl2ZVRpbWUgICAgPSByZWxhdGl2ZV9fcmVsYXRpdmVUaW1lO1xuICAgIHByb3RvdHlwZV9fcHJvdG8ucGFzdEZ1dHVyZSAgICAgID0gcGFzdEZ1dHVyZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLnNldCAgICAgICAgICAgICA9IGxvY2FsZV9zZXRfX3NldDtcblxuICAgIC8vIE1vbnRoXG4gICAgcHJvdG90eXBlX19wcm90by5tb250aHMgICAgICAgPSAgICAgICAgbG9jYWxlTW9udGhzO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX21vbnRocyAgICAgID0gZGVmYXVsdExvY2FsZU1vbnRocztcbiAgICBwcm90b3R5cGVfX3Byb3RvLm1vbnRoc1Nob3J0ICA9ICAgICAgICBsb2NhbGVNb250aHNTaG9ydDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl9tb250aHNTaG9ydCA9IGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLm1vbnRoc1BhcnNlICA9ICAgICAgICBsb2NhbGVNb250aHNQYXJzZTtcblxuICAgIC8vIFdlZWtcbiAgICBwcm90b3R5cGVfX3Byb3RvLndlZWsgPSBsb2NhbGVXZWVrO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX3dlZWsgPSBkZWZhdWx0TG9jYWxlV2VlaztcbiAgICBwcm90b3R5cGVfX3Byb3RvLmZpcnN0RGF5T2ZZZWFyID0gbG9jYWxlRmlyc3REYXlPZlllYXI7XG4gICAgcHJvdG90eXBlX19wcm90by5maXJzdERheU9mV2VlayA9IGxvY2FsZUZpcnN0RGF5T2ZXZWVrO1xuXG4gICAgLy8gRGF5IG9mIFdlZWtcbiAgICBwcm90b3R5cGVfX3Byb3RvLndlZWtkYXlzICAgICAgID0gICAgICAgIGxvY2FsZVdlZWtkYXlzO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX3dlZWtkYXlzICAgICAgPSBkZWZhdWx0TG9jYWxlV2Vla2RheXM7XG4gICAgcHJvdG90eXBlX19wcm90by53ZWVrZGF5c01pbiAgICA9ICAgICAgICBsb2NhbGVXZWVrZGF5c01pbjtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl93ZWVrZGF5c01pbiAgID0gZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluO1xuICAgIHByb3RvdHlwZV9fcHJvdG8ud2Vla2RheXNTaG9ydCAgPSAgICAgICAgbG9jYWxlV2Vla2RheXNTaG9ydDtcbiAgICBwcm90b3R5cGVfX3Byb3RvLl93ZWVrZGF5c1Nob3J0ID0gZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQ7XG4gICAgcHJvdG90eXBlX19wcm90by53ZWVrZGF5c1BhcnNlICA9ICAgICAgICBsb2NhbGVXZWVrZGF5c1BhcnNlO1xuXG4gICAgLy8gSG91cnNcbiAgICBwcm90b3R5cGVfX3Byb3RvLmlzUE0gPSBsb2NhbGVJc1BNO1xuICAgIHByb3RvdHlwZV9fcHJvdG8uX21lcmlkaWVtUGFyc2UgPSBkZWZhdWx0TG9jYWxlTWVyaWRpZW1QYXJzZTtcbiAgICBwcm90b3R5cGVfX3Byb3RvLm1lcmlkaWVtID0gbG9jYWxlTWVyaWRpZW07XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fZ2V0IChmb3JtYXQsIGluZGV4LCBmaWVsZCwgc2V0dGVyKSB7XG4gICAgICAgIHZhciBsb2NhbGUgPSBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKCk7XG4gICAgICAgIHZhciB1dGMgPSBjcmVhdGVfdXRjX19jcmVhdGVVVEMoKS5zZXQoc2V0dGVyLCBpbmRleCk7XG4gICAgICAgIHJldHVybiBsb2NhbGVbZmllbGRdKHV0YywgZm9ybWF0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0IChmb3JtYXQsIGluZGV4LCBmaWVsZCwgY291bnQsIHNldHRlcikge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGluZGV4ID0gZm9ybWF0O1xuICAgICAgICAgICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuXG4gICAgICAgIGlmIChpbmRleCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdHNfX2dldChmb3JtYXQsIGluZGV4LCBmaWVsZCwgc2V0dGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBvdXRbaV0gPSBsaXN0c19fZ2V0KGZvcm1hdCwgaSwgZmllbGQsIHNldHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fbGlzdE1vbnRocyAoZm9ybWF0LCBpbmRleCkge1xuICAgICAgICByZXR1cm4gbGlzdChmb3JtYXQsIGluZGV4LCAnbW9udGhzJywgMTIsICdtb250aCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpc3RzX19saXN0TW9udGhzU2hvcnQgKGZvcm1hdCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QoZm9ybWF0LCBpbmRleCwgJ21vbnRoc1Nob3J0JywgMTIsICdtb250aCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpc3RzX19saXN0V2Vla2RheXMgKGZvcm1hdCwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QoZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzJywgNywgJ2RheScpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpc3RzX19saXN0V2Vla2RheXNTaG9ydCAoZm9ybWF0LCBpbmRleCkge1xuICAgICAgICByZXR1cm4gbGlzdChmb3JtYXQsIGluZGV4LCAnd2Vla2RheXNTaG9ydCcsIDcsICdkYXknKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0c19fbGlzdFdlZWtkYXlzTWluIChmb3JtYXQsIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBsaXN0KGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5c01pbicsIDcsICdkYXknKTtcbiAgICB9XG5cbiAgICBsb2NhbGVfbG9jYWxlc19fZ2V0U2V0R2xvYmFsTG9jYWxlKCdlbicsIHtcbiAgICAgICAgbW9udGhzUGFyc2UgOiBbL15qYW4vaSwgL15mZWIvaSwgL15tYXIvaSwgL15hcHIvaSwgL15tYXkvaSwgL15qdW4vaSwgL15qdWwvaSwgL15hdWcvaSwgL15zZXAvaSwgL15vY3QvaSwgL15ub3YvaSwgL15kZWMvaV0sXG4gICAgICAgIGxvbmdNb250aHNQYXJzZSA6IFsvXmphbnVhcnkkL2ksIC9eZmVicnVhcnkkL2ksIC9ebWFyY2gkL2ksIC9eYXByaWwkL2ksIC9ebWF5JC9pLCAvXmp1bmUkL2ksIC9eanVseSQvaSwgL15hdWd1c3QkL2ksIC9ec2VwdGVtYmVyJC9pLCAvXm9jdG9iZXIkL2ksIC9ebm92ZW1iZXIkL2ksIC9eZGVjZW1iZXIkL2ldLFxuICAgICAgICBzaG9ydE1vbnRoc1BhcnNlIDogWy9eamFuJC9pLCAvXmZlYiQvaSwgL15tYXIkL2ksIC9eYXByJC9pLCAvXm1heSQvaSwgL15qdW4kL2ksIC9eanVsJC9pLCAvXmF1Zy9pLCAvXnNlcHQ/JC9pLCAvXm9jdCQvaSwgL15ub3YkL2ksIC9eZGVjJC9pXSxcbiAgICAgICAgb3JkaW5hbFBhcnNlOiAvXFxkezEsMn0odGh8c3R8bmR8cmQpLyxcbiAgICAgICAgb3JkaW5hbCA6IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICAgICAgICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gKHRvSW50KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAndGgnIDpcbiAgICAgICAgICAgICAgICAoYiA9PT0gMSkgPyAnc3QnIDpcbiAgICAgICAgICAgICAgICAoYiA9PT0gMikgPyAnbmQnIDpcbiAgICAgICAgICAgICAgICAoYiA9PT0gMykgPyAncmQnIDogJ3RoJztcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNpZGUgZWZmZWN0IGltcG9ydHNcbiAgICB1dGlsc19ob29rc19faG9va3MubGFuZyA9IGRlcHJlY2F0ZSgnbW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4nLCBsb2NhbGVfbG9jYWxlc19fZ2V0U2V0R2xvYmFsTG9jYWxlKTtcbiAgICB1dGlsc19ob29rc19faG9va3MubGFuZ0RhdGEgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4nLCBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlKTtcblxuICAgIHZhciBtYXRoQWJzID0gTWF0aC5hYnM7XG5cbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9hYnNfX2FicyAoKSB7XG4gICAgICAgIHZhciBkYXRhICAgICAgICAgICA9IHRoaXMuX2RhdGE7XG5cbiAgICAgICAgdGhpcy5fbWlsbGlzZWNvbmRzID0gbWF0aEFicyh0aGlzLl9taWxsaXNlY29uZHMpO1xuICAgICAgICB0aGlzLl9kYXlzICAgICAgICAgPSBtYXRoQWJzKHRoaXMuX2RheXMpO1xuICAgICAgICB0aGlzLl9tb250aHMgICAgICAgPSBtYXRoQWJzKHRoaXMuX21vbnRocyk7XG5cbiAgICAgICAgZGF0YS5taWxsaXNlY29uZHMgID0gbWF0aEFicyhkYXRhLm1pbGxpc2Vjb25kcyk7XG4gICAgICAgIGRhdGEuc2Vjb25kcyAgICAgICA9IG1hdGhBYnMoZGF0YS5zZWNvbmRzKTtcbiAgICAgICAgZGF0YS5taW51dGVzICAgICAgID0gbWF0aEFicyhkYXRhLm1pbnV0ZXMpO1xuICAgICAgICBkYXRhLmhvdXJzICAgICAgICAgPSBtYXRoQWJzKGRhdGEuaG91cnMpO1xuICAgICAgICBkYXRhLm1vbnRocyAgICAgICAgPSBtYXRoQWJzKGRhdGEubW9udGhzKTtcbiAgICAgICAgZGF0YS55ZWFycyAgICAgICAgID0gbWF0aEFicyhkYXRhLnllYXJzKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9hZGRfc3VidHJhY3RfX2FkZFN1YnRyYWN0IChkdXJhdGlvbiwgaW5wdXQsIHZhbHVlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIG90aGVyID0gY3JlYXRlX19jcmVhdGVEdXJhdGlvbihpbnB1dCwgdmFsdWUpO1xuXG4gICAgICAgIGR1cmF0aW9uLl9taWxsaXNlY29uZHMgKz0gZGlyZWN0aW9uICogb3RoZXIuX21pbGxpc2Vjb25kcztcbiAgICAgICAgZHVyYXRpb24uX2RheXMgICAgICAgICArPSBkaXJlY3Rpb24gKiBvdGhlci5fZGF5cztcbiAgICAgICAgZHVyYXRpb24uX21vbnRocyAgICAgICArPSBkaXJlY3Rpb24gKiBvdGhlci5fbW9udGhzO1xuXG4gICAgICAgIHJldHVybiBkdXJhdGlvbi5fYnViYmxlKCk7XG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydHMgb25seSAyLjAtc3R5bGUgYWRkKDEsICdzJykgb3IgYWRkKGR1cmF0aW9uKVxuICAgIGZ1bmN0aW9uIGR1cmF0aW9uX2FkZF9zdWJ0cmFjdF9fYWRkIChpbnB1dCwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGR1cmF0aW9uX2FkZF9zdWJ0cmFjdF9fYWRkU3VidHJhY3QodGhpcywgaW5wdXQsIHZhbHVlLCAxKTtcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0cyBvbmx5IDIuMC1zdHlsZSBzdWJ0cmFjdCgxLCAncycpIG9yIHN1YnRyYWN0KGR1cmF0aW9uKVxuICAgIGZ1bmN0aW9uIGR1cmF0aW9uX2FkZF9zdWJ0cmFjdF9fc3VidHJhY3QgKGlucHV0LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZHVyYXRpb25fYWRkX3N1YnRyYWN0X19hZGRTdWJ0cmFjdCh0aGlzLCBpbnB1dCwgdmFsdWUsIC0xKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhYnNDZWlsIChudW1iZXIpIHtcbiAgICAgICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWJibGUgKCkge1xuICAgICAgICB2YXIgbWlsbGlzZWNvbmRzID0gdGhpcy5fbWlsbGlzZWNvbmRzO1xuICAgICAgICB2YXIgZGF5cyAgICAgICAgID0gdGhpcy5fZGF5cztcbiAgICAgICAgdmFyIG1vbnRocyAgICAgICA9IHRoaXMuX21vbnRocztcbiAgICAgICAgdmFyIGRhdGEgICAgICAgICA9IHRoaXMuX2RhdGE7XG4gICAgICAgIHZhciBzZWNvbmRzLCBtaW51dGVzLCBob3VycywgeWVhcnMsIG1vbnRoc0Zyb21EYXlzO1xuXG4gICAgICAgIC8vIGlmIHdlIGhhdmUgYSBtaXggb2YgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHZhbHVlcywgYnViYmxlIGRvd24gZmlyc3RcbiAgICAgICAgLy8gY2hlY2s6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8yMTY2XG4gICAgICAgIGlmICghKChtaWxsaXNlY29uZHMgPj0gMCAmJiBkYXlzID49IDAgJiYgbW9udGhzID49IDApIHx8XG4gICAgICAgICAgICAgICAgKG1pbGxpc2Vjb25kcyA8PSAwICYmIGRheXMgPD0gMCAmJiBtb250aHMgPD0gMCkpKSB7XG4gICAgICAgICAgICBtaWxsaXNlY29uZHMgKz0gYWJzQ2VpbChtb250aHNUb0RheXMobW9udGhzKSArIGRheXMpICogODY0ZTU7XG4gICAgICAgICAgICBkYXlzID0gMDtcbiAgICAgICAgICAgIG1vbnRocyA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgYnViYmxlcyB1cCB2YWx1ZXMsIHNlZSB0aGUgdGVzdHMgZm9yXG4gICAgICAgIC8vIGV4YW1wbGVzIG9mIHdoYXQgdGhhdCBtZWFucy5cbiAgICAgICAgZGF0YS5taWxsaXNlY29uZHMgPSBtaWxsaXNlY29uZHMgJSAxMDAwO1xuXG4gICAgICAgIHNlY29uZHMgICAgICAgICAgID0gYWJzRmxvb3IobWlsbGlzZWNvbmRzIC8gMTAwMCk7XG4gICAgICAgIGRhdGEuc2Vjb25kcyAgICAgID0gc2Vjb25kcyAlIDYwO1xuXG4gICAgICAgIG1pbnV0ZXMgICAgICAgICAgID0gYWJzRmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgICAgICAgZGF0YS5taW51dGVzICAgICAgPSBtaW51dGVzICUgNjA7XG5cbiAgICAgICAgaG91cnMgICAgICAgICAgICAgPSBhYnNGbG9vcihtaW51dGVzIC8gNjApO1xuICAgICAgICBkYXRhLmhvdXJzICAgICAgICA9IGhvdXJzICUgMjQ7XG5cbiAgICAgICAgZGF5cyArPSBhYnNGbG9vcihob3VycyAvIDI0KTtcblxuICAgICAgICAvLyBjb252ZXJ0IGRheXMgdG8gbW9udGhzXG4gICAgICAgIG1vbnRoc0Zyb21EYXlzID0gYWJzRmxvb3IoZGF5c1RvTW9udGhzKGRheXMpKTtcbiAgICAgICAgbW9udGhzICs9IG1vbnRoc0Zyb21EYXlzO1xuICAgICAgICBkYXlzIC09IGFic0NlaWwobW9udGhzVG9EYXlzKG1vbnRoc0Zyb21EYXlzKSk7XG5cbiAgICAgICAgLy8gMTIgbW9udGhzIC0+IDEgeWVhclxuICAgICAgICB5ZWFycyA9IGFic0Zsb29yKG1vbnRocyAvIDEyKTtcbiAgICAgICAgbW9udGhzICU9IDEyO1xuXG4gICAgICAgIGRhdGEuZGF5cyAgID0gZGF5cztcbiAgICAgICAgZGF0YS5tb250aHMgPSBtb250aHM7XG4gICAgICAgIGRhdGEueWVhcnMgID0geWVhcnM7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGF5c1RvTW9udGhzIChkYXlzKSB7XG4gICAgICAgIC8vIDQwMCB5ZWFycyBoYXZlIDE0NjA5NyBkYXlzICh0YWtpbmcgaW50byBhY2NvdW50IGxlYXAgeWVhciBydWxlcylcbiAgICAgICAgLy8gNDAwIHllYXJzIGhhdmUgMTIgbW9udGhzID09PSA0ODAwXG4gICAgICAgIHJldHVybiBkYXlzICogNDgwMCAvIDE0NjA5NztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb250aHNUb0RheXMgKG1vbnRocykge1xuICAgICAgICAvLyB0aGUgcmV2ZXJzZSBvZiBkYXlzVG9Nb250aHNcbiAgICAgICAgcmV0dXJuIG1vbnRocyAqIDE0NjA5NyAvIDQ4MDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXMgKHVuaXRzKSB7XG4gICAgICAgIHZhciBkYXlzO1xuICAgICAgICB2YXIgbW9udGhzO1xuICAgICAgICB2YXIgbWlsbGlzZWNvbmRzID0gdGhpcy5fbWlsbGlzZWNvbmRzO1xuXG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gICAgICAgIGlmICh1bml0cyA9PT0gJ21vbnRoJyB8fCB1bml0cyA9PT0gJ3llYXInKSB7XG4gICAgICAgICAgICBkYXlzICAgPSB0aGlzLl9kYXlzICAgKyBtaWxsaXNlY29uZHMgLyA4NjRlNTtcbiAgICAgICAgICAgIG1vbnRocyA9IHRoaXMuX21vbnRocyArIGRheXNUb01vbnRocyhkYXlzKTtcbiAgICAgICAgICAgIHJldHVybiB1bml0cyA9PT0gJ21vbnRoJyA/IG1vbnRocyA6IG1vbnRocyAvIDEyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaGFuZGxlIG1pbGxpc2Vjb25kcyBzZXBhcmF0ZWx5IGJlY2F1c2Ugb2YgZmxvYXRpbmcgcG9pbnQgbWF0aCBlcnJvcnMgKGlzc3VlICMxODY3KVxuICAgICAgICAgICAgZGF5cyA9IHRoaXMuX2RheXMgKyBNYXRoLnJvdW5kKG1vbnRoc1RvRGF5cyh0aGlzLl9tb250aHMpKTtcbiAgICAgICAgICAgIHN3aXRjaCAodW5pdHMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd3ZWVrJyAgIDogcmV0dXJuIGRheXMgLyA3ICAgICArIG1pbGxpc2Vjb25kcyAvIDYwNDhlNTtcbiAgICAgICAgICAgICAgICBjYXNlICdkYXknICAgIDogcmV0dXJuIGRheXMgICAgICAgICArIG1pbGxpc2Vjb25kcyAvIDg2NGU1O1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvdXInICAgOiByZXR1cm4gZGF5cyAqIDI0ICAgICsgbWlsbGlzZWNvbmRzIC8gMzZlNTtcbiAgICAgICAgICAgICAgICBjYXNlICdtaW51dGUnIDogcmV0dXJuIGRheXMgKiAxNDQwICArIG1pbGxpc2Vjb25kcyAvIDZlNDtcbiAgICAgICAgICAgICAgICBjYXNlICdzZWNvbmQnIDogcmV0dXJuIGRheXMgKiA4NjQwMCArIG1pbGxpc2Vjb25kcyAvIDEwMDA7XG4gICAgICAgICAgICAgICAgLy8gTWF0aC5mbG9vciBwcmV2ZW50cyBmbG9hdGluZyBwb2ludCBtYXRoIGVycm9ycyBoZXJlXG4gICAgICAgICAgICAgICAgY2FzZSAnbWlsbGlzZWNvbmQnOiByZXR1cm4gTWF0aC5mbG9vcihkYXlzICogODY0ZTUpICsgbWlsbGlzZWNvbmRzO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcignVW5rbm93biB1bml0ICcgKyB1bml0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPOiBVc2UgdGhpcy5hcygnbXMnKT9cbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9hc19fdmFsdWVPZiAoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLl9taWxsaXNlY29uZHMgK1xuICAgICAgICAgICAgdGhpcy5fZGF5cyAqIDg2NGU1ICtcbiAgICAgICAgICAgICh0aGlzLl9tb250aHMgJSAxMikgKiAyNTkyZTYgK1xuICAgICAgICAgICAgdG9JbnQodGhpcy5fbW9udGhzIC8gMTIpICogMzE1MzZlNlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VBcyAoYWxpYXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFzKGFsaWFzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgYXNNaWxsaXNlY29uZHMgPSBtYWtlQXMoJ21zJyk7XG4gICAgdmFyIGFzU2Vjb25kcyAgICAgID0gbWFrZUFzKCdzJyk7XG4gICAgdmFyIGFzTWludXRlcyAgICAgID0gbWFrZUFzKCdtJyk7XG4gICAgdmFyIGFzSG91cnMgICAgICAgID0gbWFrZUFzKCdoJyk7XG4gICAgdmFyIGFzRGF5cyAgICAgICAgID0gbWFrZUFzKCdkJyk7XG4gICAgdmFyIGFzV2Vla3MgICAgICAgID0gbWFrZUFzKCd3Jyk7XG4gICAgdmFyIGFzTW9udGhzICAgICAgID0gbWFrZUFzKCdNJyk7XG4gICAgdmFyIGFzWWVhcnMgICAgICAgID0gbWFrZUFzKCd5Jyk7XG5cbiAgICBmdW5jdGlvbiBkdXJhdGlvbl9nZXRfX2dldCAodW5pdHMpIHtcbiAgICAgICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgICAgIHJldHVybiB0aGlzW3VuaXRzICsgJ3MnXSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VHZXR0ZXIobmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFbbmFtZV07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIG1pbGxpc2Vjb25kcyA9IG1ha2VHZXR0ZXIoJ21pbGxpc2Vjb25kcycpO1xuICAgIHZhciBzZWNvbmRzICAgICAgPSBtYWtlR2V0dGVyKCdzZWNvbmRzJyk7XG4gICAgdmFyIG1pbnV0ZXMgICAgICA9IG1ha2VHZXR0ZXIoJ21pbnV0ZXMnKTtcbiAgICB2YXIgaG91cnMgICAgICAgID0gbWFrZUdldHRlcignaG91cnMnKTtcbiAgICB2YXIgZGF5cyAgICAgICAgID0gbWFrZUdldHRlcignZGF5cycpO1xuICAgIHZhciBtb250aHMgICAgICAgPSBtYWtlR2V0dGVyKCdtb250aHMnKTtcbiAgICB2YXIgeWVhcnMgICAgICAgID0gbWFrZUdldHRlcigneWVhcnMnKTtcblxuICAgIGZ1bmN0aW9uIHdlZWtzICgpIHtcbiAgICAgICAgcmV0dXJuIGFic0Zsb29yKHRoaXMuZGF5cygpIC8gNyk7XG4gICAgfVxuXG4gICAgdmFyIHJvdW5kID0gTWF0aC5yb3VuZDtcbiAgICB2YXIgdGhyZXNob2xkcyA9IHtcbiAgICAgICAgczogNDUsICAvLyBzZWNvbmRzIHRvIG1pbnV0ZVxuICAgICAgICBtOiA0NSwgIC8vIG1pbnV0ZXMgdG8gaG91clxuICAgICAgICBoOiAyMiwgIC8vIGhvdXJzIHRvIGRheVxuICAgICAgICBkOiAyNiwgIC8vIGRheXMgdG8gbW9udGhcbiAgICAgICAgTTogMTEgICAvLyBtb250aHMgdG8geWVhclxuICAgIH07XG5cbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gZm9yIG1vbWVudC5mbi5mcm9tLCBtb21lbnQuZm4uZnJvbU5vdywgYW5kIG1vbWVudC5kdXJhdGlvbi5mbi5odW1hbml6ZVxuICAgIGZ1bmN0aW9uIHN1YnN0aXR1dGVUaW1lQWdvKHN0cmluZywgbnVtYmVyLCB3aXRob3V0U3VmZml4LCBpc0Z1dHVyZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUucmVsYXRpdmVUaW1lKG51bWJlciB8fCAxLCAhIXdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGR1cmF0aW9uX2h1bWFuaXplX19yZWxhdGl2ZVRpbWUgKHBvc05lZ0R1cmF0aW9uLCB3aXRob3V0U3VmZml4LCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gY3JlYXRlX19jcmVhdGVEdXJhdGlvbihwb3NOZWdEdXJhdGlvbikuYWJzKCk7XG4gICAgICAgIHZhciBzZWNvbmRzICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdzJykpO1xuICAgICAgICB2YXIgbWludXRlcyAgPSByb3VuZChkdXJhdGlvbi5hcygnbScpKTtcbiAgICAgICAgdmFyIGhvdXJzICAgID0gcm91bmQoZHVyYXRpb24uYXMoJ2gnKSk7XG4gICAgICAgIHZhciBkYXlzICAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdkJykpO1xuICAgICAgICB2YXIgbW9udGhzICAgPSByb3VuZChkdXJhdGlvbi5hcygnTScpKTtcbiAgICAgICAgdmFyIHllYXJzICAgID0gcm91bmQoZHVyYXRpb24uYXMoJ3knKSk7XG5cbiAgICAgICAgdmFyIGEgPSBzZWNvbmRzIDwgdGhyZXNob2xkcy5zICYmIFsncycsIHNlY29uZHNdICB8fFxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPD0gMSAgICAgICAgICAgJiYgWydtJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICAgICAgbWludXRlcyA8IHRocmVzaG9sZHMubSAmJiBbJ21tJywgbWludXRlc10gfHxcbiAgICAgICAgICAgICAgICBob3VycyAgIDw9IDEgICAgICAgICAgICYmIFsnaCddICAgICAgICAgICB8fFxuICAgICAgICAgICAgICAgIGhvdXJzICAgPCB0aHJlc2hvbGRzLmggJiYgWydoaCcsIGhvdXJzXSAgIHx8XG4gICAgICAgICAgICAgICAgZGF5cyAgICA8PSAxICAgICAgICAgICAmJiBbJ2QnXSAgICAgICAgICAgfHxcbiAgICAgICAgICAgICAgICBkYXlzICAgIDwgdGhyZXNob2xkcy5kICYmIFsnZGQnLCBkYXlzXSAgICB8fFxuICAgICAgICAgICAgICAgIG1vbnRocyAgPD0gMSAgICAgICAgICAgJiYgWydNJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICAgICAgbW9udGhzICA8IHRocmVzaG9sZHMuTSAmJiBbJ01NJywgbW9udGhzXSAgfHxcbiAgICAgICAgICAgICAgICB5ZWFycyAgIDw9IDEgICAgICAgICAgICYmIFsneSddICAgICAgICAgICB8fCBbJ3l5JywgeWVhcnNdO1xuXG4gICAgICAgIGFbMl0gPSB3aXRob3V0U3VmZml4O1xuICAgICAgICBhWzNdID0gK3Bvc05lZ0R1cmF0aW9uID4gMDtcbiAgICAgICAgYVs0XSA9IGxvY2FsZTtcbiAgICAgICAgcmV0dXJuIHN1YnN0aXR1dGVUaW1lQWdvLmFwcGx5KG51bGwsIGEpO1xuICAgIH1cblxuICAgIC8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgYSB0aHJlc2hvbGQgZm9yIHJlbGF0aXZlIHRpbWUgc3RyaW5nc1xuICAgIGZ1bmN0aW9uIGR1cmF0aW9uX2h1bWFuaXplX19nZXRTZXRSZWxhdGl2ZVRpbWVUaHJlc2hvbGQgKHRocmVzaG9sZCwgbGltaXQpIHtcbiAgICAgICAgaWYgKHRocmVzaG9sZHNbdGhyZXNob2xkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbWl0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJlc2hvbGRzW3RocmVzaG9sZF07XG4gICAgICAgIH1cbiAgICAgICAgdGhyZXNob2xkc1t0aHJlc2hvbGRdID0gbGltaXQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGh1bWFuaXplICh3aXRoU3VmZml4KSB7XG4gICAgICAgIHZhciBsb2NhbGUgPSB0aGlzLmxvY2FsZURhdGEoKTtcbiAgICAgICAgdmFyIG91dHB1dCA9IGR1cmF0aW9uX2h1bWFuaXplX19yZWxhdGl2ZVRpbWUodGhpcywgIXdpdGhTdWZmaXgsIGxvY2FsZSk7XG5cbiAgICAgICAgaWYgKHdpdGhTdWZmaXgpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IGxvY2FsZS5wYXN0RnV0dXJlKCt0aGlzLCBvdXRwdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxvY2FsZS5wb3N0Zm9ybWF0KG91dHB1dCk7XG4gICAgfVxuXG4gICAgdmFyIGlzb19zdHJpbmdfX2FicyA9IE1hdGguYWJzO1xuXG4gICAgZnVuY3Rpb24gaXNvX3N0cmluZ19fdG9JU09TdHJpbmcoKSB7XG4gICAgICAgIC8vIGZvciBJU08gc3RyaW5ncyB3ZSBkbyBub3QgdXNlIHRoZSBub3JtYWwgYnViYmxpbmcgcnVsZXM6XG4gICAgICAgIC8vICAqIG1pbGxpc2Vjb25kcyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgaG91cnNcbiAgICAgICAgLy8gICogZGF5cyBkbyBub3QgYnViYmxlIGF0IGFsbFxuICAgICAgICAvLyAgKiBtb250aHMgYnViYmxlIHVwIHVudGlsIHRoZXkgYmVjb21lIHllYXJzXG4gICAgICAgIC8vIFRoaXMgaXMgYmVjYXVzZSB0aGVyZSBpcyBubyBjb250ZXh0LWZyZWUgY29udmVyc2lvbiBiZXR3ZWVuIGhvdXJzIGFuZCBkYXlzXG4gICAgICAgIC8vICh0aGluayBvZiBjbG9jayBjaGFuZ2VzKVxuICAgICAgICAvLyBhbmQgYWxzbyBub3QgYmV0d2VlbiBkYXlzIGFuZCBtb250aHMgKDI4LTMxIGRheXMgcGVyIG1vbnRoKVxuICAgICAgICB2YXIgc2Vjb25kcyA9IGlzb19zdHJpbmdfX2Ficyh0aGlzLl9taWxsaXNlY29uZHMpIC8gMTAwMDtcbiAgICAgICAgdmFyIGRheXMgICAgICAgICA9IGlzb19zdHJpbmdfX2Ficyh0aGlzLl9kYXlzKTtcbiAgICAgICAgdmFyIG1vbnRocyAgICAgICA9IGlzb19zdHJpbmdfX2Ficyh0aGlzLl9tb250aHMpO1xuICAgICAgICB2YXIgbWludXRlcywgaG91cnMsIHllYXJzO1xuXG4gICAgICAgIC8vIDM2MDAgc2Vjb25kcyAtPiA2MCBtaW51dGVzIC0+IDEgaG91clxuICAgICAgICBtaW51dGVzICAgICAgICAgICA9IGFic0Zsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgIGhvdXJzICAgICAgICAgICAgID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgICAgICAgc2Vjb25kcyAlPSA2MDtcbiAgICAgICAgbWludXRlcyAlPSA2MDtcblxuICAgICAgICAvLyAxMiBtb250aHMgLT4gMSB5ZWFyXG4gICAgICAgIHllYXJzICA9IGFic0Zsb29yKG1vbnRocyAvIDEyKTtcbiAgICAgICAgbW9udGhzICU9IDEyO1xuXG5cbiAgICAgICAgLy8gaW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL2RvcmRpbGxlL21vbWVudC1pc29kdXJhdGlvbi9ibG9iL21hc3Rlci9tb21lbnQuaXNvZHVyYXRpb24uanNcbiAgICAgICAgdmFyIFkgPSB5ZWFycztcbiAgICAgICAgdmFyIE0gPSBtb250aHM7XG4gICAgICAgIHZhciBEID0gZGF5cztcbiAgICAgICAgdmFyIGggPSBob3VycztcbiAgICAgICAgdmFyIG0gPSBtaW51dGVzO1xuICAgICAgICB2YXIgcyA9IHNlY29uZHM7XG4gICAgICAgIHZhciB0b3RhbCA9IHRoaXMuYXNTZWNvbmRzKCk7XG5cbiAgICAgICAgaWYgKCF0b3RhbCkge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgc2FtZSBhcyBDIydzIChOb2RhKSBhbmQgcHl0aG9uIChpc29kYXRlKS4uLlxuICAgICAgICAgICAgLy8gYnV0IG5vdCBvdGhlciBKUyAoZ29vZy5kYXRlKVxuICAgICAgICAgICAgcmV0dXJuICdQMEQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICh0b3RhbCA8IDAgPyAnLScgOiAnJykgK1xuICAgICAgICAgICAgJ1AnICtcbiAgICAgICAgICAgIChZID8gWSArICdZJyA6ICcnKSArXG4gICAgICAgICAgICAoTSA/IE0gKyAnTScgOiAnJykgK1xuICAgICAgICAgICAgKEQgPyBEICsgJ0QnIDogJycpICtcbiAgICAgICAgICAgICgoaCB8fCBtIHx8IHMpID8gJ1QnIDogJycpICtcbiAgICAgICAgICAgIChoID8gaCArICdIJyA6ICcnKSArXG4gICAgICAgICAgICAobSA/IG0gKyAnTScgOiAnJykgK1xuICAgICAgICAgICAgKHMgPyBzICsgJ1MnIDogJycpO1xuICAgIH1cblxuICAgIHZhciBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvID0gRHVyYXRpb24ucHJvdG90eXBlO1xuXG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hYnMgICAgICAgICAgICA9IGR1cmF0aW9uX2Fic19fYWJzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYWRkICAgICAgICAgICAgPSBkdXJhdGlvbl9hZGRfc3VidHJhY3RfX2FkZDtcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLnN1YnRyYWN0ICAgICAgID0gZHVyYXRpb25fYWRkX3N1YnRyYWN0X19zdWJ0cmFjdDtcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzICAgICAgICAgICAgID0gYXM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hc01pbGxpc2Vjb25kcyA9IGFzTWlsbGlzZWNvbmRzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYXNTZWNvbmRzICAgICAgPSBhc1NlY29uZHM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5hc01pbnV0ZXMgICAgICA9IGFzTWludXRlcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzSG91cnMgICAgICAgID0gYXNIb3VycztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzRGF5cyAgICAgICAgID0gYXNEYXlzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYXNXZWVrcyAgICAgICAgPSBhc1dlZWtzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uYXNNb250aHMgICAgICAgPSBhc01vbnRocztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmFzWWVhcnMgICAgICAgID0gYXNZZWFycztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLnZhbHVlT2YgICAgICAgID0gZHVyYXRpb25fYXNfX3ZhbHVlT2Y7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5fYnViYmxlICAgICAgICA9IGJ1YmJsZTtcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmdldCAgICAgICAgICAgID0gZHVyYXRpb25fZ2V0X19nZXQ7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5taWxsaXNlY29uZHMgICA9IG1pbGxpc2Vjb25kcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLnNlY29uZHMgICAgICAgID0gc2Vjb25kcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLm1pbnV0ZXMgICAgICAgID0gbWludXRlcztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmhvdXJzICAgICAgICAgID0gaG91cnM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5kYXlzICAgICAgICAgICA9IGRheXM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by53ZWVrcyAgICAgICAgICA9IHdlZWtzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ubW9udGhzICAgICAgICAgPSBtb250aHM7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by55ZWFycyAgICAgICAgICA9IHllYXJzO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8uaHVtYW5pemUgICAgICAgPSBodW1hbml6ZTtcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLnRvSVNPU3RyaW5nICAgID0gaXNvX3N0cmluZ19fdG9JU09TdHJpbmc7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by50b1N0cmluZyAgICAgICA9IGlzb19zdHJpbmdfX3RvSVNPU3RyaW5nO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8udG9KU09OICAgICAgICAgPSBpc29fc3RyaW5nX190b0lTT1N0cmluZztcbiAgICBkdXJhdGlvbl9wcm90b3R5cGVfX3Byb3RvLmxvY2FsZSAgICAgICAgID0gbG9jYWxlO1xuICAgIGR1cmF0aW9uX3Byb3RvdHlwZV9fcHJvdG8ubG9jYWxlRGF0YSAgICAgPSBsb2NhbGVEYXRhO1xuXG4gICAgLy8gRGVwcmVjYXRpb25zXG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by50b0lzb1N0cmluZyA9IGRlcHJlY2F0ZSgndG9Jc29TdHJpbmcoKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRvSVNPU3RyaW5nKCkgaW5zdGVhZCAobm90aWNlIHRoZSBjYXBpdGFscyknLCBpc29fc3RyaW5nX190b0lTT1N0cmluZyk7XG4gICAgZHVyYXRpb25fcHJvdG90eXBlX19wcm90by5sYW5nID0gbGFuZztcblxuICAgIC8vIFNpZGUgZWZmZWN0IGltcG9ydHNcblxuICAgIC8vIEZPUk1BVFRJTkdcblxuICAgIGFkZEZvcm1hdFRva2VuKCdYJywgMCwgMCwgJ3VuaXgnKTtcbiAgICBhZGRGb3JtYXRUb2tlbigneCcsIDAsIDAsICd2YWx1ZU9mJyk7XG5cbiAgICAvLyBQQVJTSU5HXG5cbiAgICBhZGRSZWdleFRva2VuKCd4JywgbWF0Y2hTaWduZWQpO1xuICAgIGFkZFJlZ2V4VG9rZW4oJ1gnLCBtYXRjaFRpbWVzdGFtcCk7XG4gICAgYWRkUGFyc2VUb2tlbignWCcsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShwYXJzZUZsb2F0KGlucHV0LCAxMCkgKiAxMDAwKTtcbiAgICB9KTtcbiAgICBhZGRQYXJzZVRva2VuKCd4JywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKHRvSW50KGlucHV0KSk7XG4gICAgfSk7XG5cbiAgICAvLyBTaWRlIGVmZmVjdCBpbXBvcnRzXG5cblxuICAgIHV0aWxzX2hvb2tzX19ob29rcy52ZXJzaW9uID0gJzIuMTEuMCc7XG5cbiAgICBzZXRIb29rQ2FsbGJhY2sobG9jYWxfX2NyZWF0ZUxvY2FsKTtcblxuICAgIHV0aWxzX2hvb2tzX19ob29rcy5mbiAgICAgICAgICAgICAgICAgICAgPSBtb21lbnRQcm90b3R5cGU7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLm1pbiAgICAgICAgICAgICAgICAgICA9IG1pbjtcbiAgICB1dGlsc19ob29rc19faG9va3MubWF4ICAgICAgICAgICAgICAgICAgID0gbWF4O1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5ub3cgICAgICAgICAgICAgICAgICAgPSBub3c7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnV0YyAgICAgICAgICAgICAgICAgICA9IGNyZWF0ZV91dGNfX2NyZWF0ZVVUQztcbiAgICB1dGlsc19ob29rc19faG9va3MudW5peCAgICAgICAgICAgICAgICAgID0gbW9tZW50X19jcmVhdGVVbml4O1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5tb250aHMgICAgICAgICAgICAgICAgPSBsaXN0c19fbGlzdE1vbnRocztcbiAgICB1dGlsc19ob29rc19faG9va3MuaXNEYXRlICAgICAgICAgICAgICAgID0gaXNEYXRlO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5sb2NhbGUgICAgICAgICAgICAgICAgPSBsb2NhbGVfbG9jYWxlc19fZ2V0U2V0R2xvYmFsTG9jYWxlO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5pbnZhbGlkICAgICAgICAgICAgICAgPSB2YWxpZF9fY3JlYXRlSW52YWxpZDtcbiAgICB1dGlsc19ob29rc19faG9va3MuZHVyYXRpb24gICAgICAgICAgICAgID0gY3JlYXRlX19jcmVhdGVEdXJhdGlvbjtcbiAgICB1dGlsc19ob29rc19faG9va3MuaXNNb21lbnQgICAgICAgICAgICAgID0gaXNNb21lbnQ7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLndlZWtkYXlzICAgICAgICAgICAgICA9IGxpc3RzX19saXN0V2Vla2RheXM7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnBhcnNlWm9uZSAgICAgICAgICAgICA9IG1vbWVudF9fY3JlYXRlSW5ab25lO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5sb2NhbGVEYXRhICAgICAgICAgICAgPSBsb2NhbGVfbG9jYWxlc19fZ2V0TG9jYWxlO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5pc0R1cmF0aW9uICAgICAgICAgICAgPSBpc0R1cmF0aW9uO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5tb250aHNTaG9ydCAgICAgICAgICAgPSBsaXN0c19fbGlzdE1vbnRoc1Nob3J0O1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy53ZWVrZGF5c01pbiAgICAgICAgICAgPSBsaXN0c19fbGlzdFdlZWtkYXlzTWluO1xuICAgIHV0aWxzX2hvb2tzX19ob29rcy5kZWZpbmVMb2NhbGUgICAgICAgICAgPSBkZWZpbmVMb2NhbGU7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLndlZWtkYXlzU2hvcnQgICAgICAgICA9IGxpc3RzX19saXN0V2Vla2RheXNTaG9ydDtcbiAgICB1dGlsc19ob29rc19faG9va3Mubm9ybWFsaXplVW5pdHMgICAgICAgID0gbm9ybWFsaXplVW5pdHM7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnJlbGF0aXZlVGltZVRocmVzaG9sZCA9IGR1cmF0aW9uX2h1bWFuaXplX19nZXRTZXRSZWxhdGl2ZVRpbWVUaHJlc2hvbGQ7XG4gICAgdXRpbHNfaG9va3NfX2hvb2tzLnByb3RvdHlwZSAgICAgICAgICAgICA9IG1vbWVudFByb3RvdHlwZTtcblxuICAgIHZhciBfbW9tZW50ID0gdXRpbHNfaG9va3NfX2hvb2tzO1xuXG4gICAgcmV0dXJuIF9tb21lbnQ7XG5cbn0pKTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHRcdHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwibW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXtpZihlW2ldKXJldHVybiBlW2ldLmV4cG9ydHM7dmFyIHI9ZVtpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIG5baV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsdCksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBlPXt9O3JldHVybiB0Lm09bix0LmM9ZSx0LnA9XCJcIix0KDApfShbZnVuY3Rpb24obix0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKG4pe3JldHVybiBhLmpzK25bMF0udG9VcHBlckNhc2UoKStuLnN1YnN0cigxKX1mdW5jdGlvbiBpKG4pe3JldHVybiBPYmplY3Qua2V5cyhuKS5yZWR1Y2UoZnVuY3Rpb24odCxpKXtyZXR1cm4tMSE9PXMuaW5kZXhPZihpKT90W2UoaSldPW5baV06dFtpXT1uW2ldLHR9LHt9KX1mdW5jdGlvbiByKG4pe3ZhciB0PW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtyZXR1cm4tMSE9PXQuaW5kZXhPZihcInNhZmFyaVwiKSYmLTE9PT10LmluZGV4T2YoXCJjaHJvbWVcIik/IWZ1bmN0aW9uKCl7dmFyIHQ9ZnVuY3Rpb24obix0LGUpe25bZV09blt0XSxkZWxldGUgblt0XX07XCJmbGV4XCI9PT1uLmRpc3BsYXkmJihuLmRpc3BsYXk9XCItd2Via2l0LWZsZXhcIiksW1wiYWxpZ25JdGVtc1wiLFwianVzdGlmeUNvbnRlbnRcIixcImZsZXhEaXJlY3Rpb25cIixcImZsZXhcIixcImZsZXhXcmFwXCJdLmZvckVhY2goZnVuY3Rpb24oaSl7dChuLGksZShpKSl9KX0oKTotMSE9PW5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoXCJNU0lFIDEwXCIpJiZcImZsZXhcIj09PW4uZGlzcGxheSYmKG4uZGlzcGxheT1cIi1tcy1mbGV4Ym94XCIpLG59ZnVuY3Rpb24gbyhuKXtyZXR1cm4gT2JqZWN0LmtleXMobikucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV09cihpKG5bZV0pKSx0fSx7fSl9dmFyIGE9ZnVuY3Rpb24oKXt2YXIgbj13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJcIiksdD0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobikuam9pbihcIlwiKS5tYXRjaCgvLShtb3p8d2Via2l0fG1zKS0vKXx8XCJcIj09PW4uT0xpbmsmJltcIlwiLFwib1wiXSlbMV07cmV0dXJue2RvbTpcIm1zXCI9PT10P1wiTVNcIjp0LGxvd2VyY2FzZTp0LGNzczpcIi1cIit0K1wiLVwiLGpzOlwibXNcIj09PXQ/dDp0WzBdLnRvVXBwZXJDYXNlKCkrdC5zdWJzdHIoMSl9fSgpLHM9W1wiYW5pbWF0aW9uXCIsXCJhbmltYXRpb25EZWxheVwiLFwiYW5pbWF0aW9uRGlyZWN0aW9uXCIsXCJhbmltYXRpb25EdXJhdGlvblwiLFwiYW5pbWF0aW9uRmlsbE1vZGVcIixcImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50XCIsXCJhbmltYXRpb25OYW1lXCIsXCJhbmltYXRpb25QbGF5U3RhdGVcIixcImFuaW1hdGlvblRpbWluZ0Z1bmN0aW9uXCIsXCJhcHBlYXJhbmNlXCIsXCJiYWNrZmFjZVZpc2liaWxpdHlcIixcImJhY2tncm91bmRDbGlwXCIsXCJib3JkZXJJbWFnZVwiLFwiYm9yZGVySW1hZ2VTbGljZVwiLFwiYm94U2l6aW5nXCIsXCJib3hTaGFkb3dcIixcImNvbnRlbnRDb2x1bW5zXCIsXCJ0cmFuc2Zvcm1cIixcInRyYW5zZm9ybU9yaWdpblwiLFwidHJhbnNmb3JtU3R5bGVcIixcInRyYW5zaXRpb25cIixcInRyYW5zaXRpb25EZWxheVwiLFwidHJhbnNpdGlvbkR1cmF0aW9uXCIsXCJ0cmFuc2l0aW9uUHJvcGVydHlcIixcInRyYW5zaXRpb25UaW1pbmdGdW5jdGlvblwiLFwicGVyc3BlY3RpdmVcIixcInBlcnNwZWN0aXZlT3JpZ2luXCIsXCJ1c2VyU2VsZWN0XCJdO3QucHJlZml4PW99XSk7IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IHRvb2xPdmVybGF5U3R5bGU6UmVhY3QuQ1NTUHJvcGVydGllcyA9IHtcbiAgICBiYWNrZ3JvdW5kOiBcIiMwMDBcIixcbiAgICBvcGFjaXR5OiAuMixcbiAgICB6SW5kZXg6IDMsXG4gICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICBiYWNrZ3JvdW5kQ2xpcDogXCJwYWRkaW5nXCIsXG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG59O1xuXG5pbnRlcmZhY2UgSVRvb2xPdmVybGF5UHJvcHMgZXh0ZW5kcyBSZWFjdC5Qcm9wczxUb29sT3ZlcmxheT4ge1xuXG59XG5cbmludGVyZmFjZSBJVG9vbE92ZXJsYXlTdGF0ZSB7XG4gICAgc3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXM7XG59XG5jbGFzcyBUb29sT3ZlcmxheSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJVG9vbE92ZXJsYXlQcm9wcywgSVRvb2xPdmVybGF5U3RhdGU+IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklUb29sT3ZlcmxheVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0b29sT3ZlcmxheVN0eWxlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gPGRpdiBzdHlsZT17dGhpcy5zdGF0ZS5zdHlsZX0vPjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xPdmVybGF5OyIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvcmVhY3QvcmVhY3QtZG9tLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvcmVhY3QtdmVuZG9yLXByZWZpeC9yZWFjdC12ZW5kb3ItcHJlZml4LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3JlYWN0LWJvb3RzdHJhcC9yZWFjdC1ib290c3RyYXAuZC50c1wiLz5cblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB1aSBmcm9tIFwiLi9yZWFjdC11aS91aVwiO1xuaW1wb3J0ICogYXMgVmVuZG9yUHJlZml4IGZyb20gXCJyZWFjdC12ZW5kb3ItcHJlZml4XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4vdXRpbHMvU3RhbmRhcmRMaWJcIjtcbmltcG9ydCB7R2x5cGhpY29ufSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgQWJzdHJhY3RXZWF2ZVRvb2wgZnJvbSBcIi4vdG9vbHMvQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7Q1NTUHJvcGVydGllc30gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0lBYnN0cmFjdFdlYXZlVG9vbFByb3BzfSBmcm9tIFwiLi90b29scy9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xTdGF0ZX0gZnJvbSBcIi4vdG9vbHMvQWJzdHJhY3RXZWF2ZVRvb2xcIjtcblxuY29uc3QgdG9vbFJlZ2lzdHJ5OntbbmFtZTpzdHJpbmddOiBBYnN0cmFjdFdlYXZlVG9vbH0gPSB7fTtcblxuY29uc3QgZ3JhYmJlclN0eWxlOkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgd2lkdGg6IFwiMTZcIixcbiAgICBoZWlnaHQ6IFwiMTZcIixcbiAgICBjdXJzb3I6IFwibW92ZVwiLFxuICAgIGJhY2tncm91bmQ6IFwidXJsKGh0dHA6Ly9wbGFjZWhvbGQuaXQvMzJ4MzIpXCJcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihhc0NsYXNzTmFtZTpzdHJpbmcsIGpzQ2xhc3M6YW55KSB7XG4gICAgdG9vbFJlZ2lzdHJ5W2FzQ2xhc3NOYW1lXSA9IGpzQ2xhc3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sSW1wbGVtZW50YXRpb24oYXNDbGFzc05hbWU6c3RyaW5nKTphbnkge1xuICAgIHJldHVybiB0b29sUmVnaXN0cnlbYXNDbGFzc05hbWVdO1xufVxuXG5pbnRlcmZhY2UgSVdlYXZlVG9vbFByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8V2VhdmVUb29sPiB7XG4gICAgdG9vbFBhdGg6V2VhdmVQYXRoO1xuICAgIHRvb2xQcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcztcbiAgICB0b29sQ2xhc3M6c3RyaW5nO1xuICAgIHN0eWxlOkNTU1Byb3BlcnRpZXM7XG4gICAgb25EcmFnU3RhcnQ6UmVhY3QuTW91c2VFdmVudDtcbiAgICBvbkRyYWdFbmQ6UmVhY3QuTW91c2VFdmVudDtcbiAgICBvbkRyYWdPdmVyOlJlYWN0Lk1vdXNlRXZlbnQ7XG59XG5cbmludGVyZmFjZSBJV2VhdmVUb29sU3RhdGUge1xuICAgIHNob3dDb250cm9sczpib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgV2VhdmVUb29sIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElXZWF2ZVRvb2xQcm9wcywgSVdlYXZlVG9vbFN0YXRlPiB7XG5cbiAgICBwcml2YXRlIHRvb2xQYXRoOldlYXZlUGF0aDtcbiAgICBwcml2YXRlIHRvb2xQcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcztcbiAgICBwcml2YXRlIFRvb2xDbGFzczphbnk7XG4gICAgcHJpdmF0ZSBlbGVtZW50OkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0b29sOmFueTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklXZWF2ZVRvb2xQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMudG9vbFBhdGggPSB0aGlzLnByb3BzLnRvb2xQYXRoO1xuICAgICAgICB0aGlzLnRvb2xQcm9wcyA9IHRoaXMucHJvcHMudG9vbFByb3BzO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaG93Q29udHJvbHM6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRvb2xUeXBlOnN0cmluZyA9IHRoaXMudG9vbFBhdGggPyB0aGlzLnRvb2xQYXRoLmdldFR5cGUoKSA6IHRoaXMucHJvcHMudG9vbENsYXNzO1xuICAgICAgICBpZih0b29sVHlwZSA9PT0gXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpFeHRlcm5hbFRvb2xcIiAmJiB0aGlzLnRvb2xQYXRoLmdldFR5cGUoXCJ0b29sQ2xhc3NcIikpIHtcbiAgICAgICAgICAgIHRvb2xUeXBlID0gdGhpcy50b29sUGF0aC5nZXRTdGF0ZShcInRvb2xDbGFzc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0b29sVHlwZSA9PT0gXCJ3ZWF2ZWpzLmNvcmUuTGlua2FibGVIYXNoTWFwXCIgJiYgdGhpcy50b29sUGF0aC5nZXRUeXBlKFwiY2xhc3NcIikpXG4gICAgICAgICAgICB0b29sVHlwZSA9IHRoaXMudG9vbFBhdGguZ2V0U3RhdGUoXCJjbGFzc1wiKTtcbiAgICAgICAgdGhpcy5Ub29sQ2xhc3MgPSBnZXRUb29sSW1wbGVtZW50YXRpb24odG9vbFR5cGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCk6dm9pZCB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1tcInRvb2xEaXZcIl0pO1xuICAgICAgICBpZihSZWFjdC5Db21wb25lbnQuaXNQcm90b3R5cGVPZih0aGlzLlRvb2xDbGFzcykpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbCA9IHRoaXMucmVmc1tcInRvb2xcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvb2wgPSBuZXcgdGhpcy5Ub29sQ2xhc3MoXy5tZXJnZSh7ZWxlbWVudDogUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzW1widG9vbERpdlwiXSksIHRvb2xQYXRoOiB0aGlzLnRvb2xQYXRofSwgdGhpcy50b29sUHJvcHMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnRvb2xQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuZm9yY2VVcGRhdGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKTp2b2lkIHtcbiAgICAgICAgaWYodGhpcy50b29sLmRlc3Ryb3kpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgdGl0bGUoKTpzdHJpbmcge1xuICAgICAgICBpZih0aGlzLnRvb2xQYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b29sUGF0aC5nZXRWYWx1ZShcInRoaXMuaGFzT3duUHJvcGVydHkoJ3RpdGxlJykgPyB0aGlzLnRpdGxlIDogJydcIilcbiAgICAgICAgICAgICAgICB8fCAodGhpcy50b29sUGF0aC5nZXRUeXBlKCd0aXRsZScpID8gdGhpcy50b29sUGF0aC5nZXRTdGF0ZSgndGl0bGUnKSA6ICcnKVxuICAgICAgICAgICAgICAgIHx8IHRoaXMudG9vbFBhdGguZ2V0UGF0aCgpLnBvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9vbCA/IHRoaXMudG9vbC50aXRsZSA6IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIGlmKHRoaXMudG9vbCAmJiB0aGlzLnRvb2wucmVzaXplKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2wucmVzaXplKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciB3aW5kb3dCYXI6Q1NTUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgIGhlaWdodDogMjUsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuc3RhdGUuc2hvd0NvbnRyb2xzID8gXCIjZjhmOGY4XCI6IFwiXCJcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGl0bGVTdHlsZTpDU1NQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgY3Vyc29yOiBcIm1vdmVcIixcbiAgICAgICAgICAgIGhlaWdodDogMjUsXG4gICAgICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCIsXG4gICAgICAgICAgICBmbGV4OiAxLFxuICAgICAgICAgICAgdGV4dE92ZXJmbG93OiBcImVsbGlwc2lzXCJcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdHJhbnNpdGlvbnM6Q1NTUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IHRoaXMuc3RhdGUuc2hvd0NvbnRyb2xzID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiLFxuICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5zdGF0ZS5zaG93Q29udHJvbHMgPyAwLjcgOiAwLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogdGhpcy5zdGF0ZS5zaG93Q29udHJvbHMgPyBcInZpc2liaWxpeSAwcyAwLjFzLCBvcGFjaXR5IDAuMXMgbGluZWFyXCIgOiBcInZpc2liaWxpdHkgMHMgMC4xcywgb3BhY2l0eSAwLjFzIGxpbmVhclwiXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGxlZnRDb250cm9sczpDU1NQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgbWFyZ2luTGVmdDogNSxcbiAgICAgICAgICAgIG1hcmdpblRvcDogMixcbiAgICAgICAgICAgIHdpZHRoOiAyMFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByaWdodENvbnRyb2xzOkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBtYXJnaW5Ub3A6IDIsXG4gICAgICAgICAgICB3aWR0aDogMzhcbiAgICAgICAgfTtcblxuICAgICAgICBTdGFuZGFyZExpYi5tZXJnZShsZWZ0Q29udHJvbHMsIHRyYW5zaXRpb25zKTtcbiAgICAgICAgU3RhbmRhcmRMaWIubWVyZ2UocmlnaHRDb250cm9scywgdHJhbnNpdGlvbnMpO1xuXG4gICAgICAgIHZhciB0b29sSGVpZ2h0Om51bWJlciA9IHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlLmhlaWdodCAtIDI1IDogMzIwO1xuICAgICAgICB2YXIgdG9vbFdpZHRoOm51bWJlciA9IHRoaXMucHJvcHMuc3R5bGUgPyB0aGlzLnByb3BzLnN0eWxlLndpZHRoIDogMzIwO1xuXG4gICAgICAgIHZhciByZWFjdFRvb2w6YW55O1xuICAgICAgICBpZiAoUmVhY3QuQ29tcG9uZW50LmlzUHJvdG90eXBlT2YodGhpcy5Ub29sQ2xhc3MpKSB7XG4gICAgICAgICAgICByZWFjdFRvb2wgPSBSZWFjdC5jcmVhdGVFbGVtZW50KHRoaXMuVG9vbENsYXNzLCBfLm1lcmdlKHtrZXk6IFwidG9vbFwiLCByZWY6IFwidG9vbFwiLCB0b29sUGF0aDogdGhpcy50b29sUGF0aCwgc3R5bGU6IHsgaGVpZ2h0OiB0b29sSGVpZ2h0LCB3aWR0aDogdG9vbFdpZHRoIH19LCB0aGlzLnRvb2xQcm9wcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDx1aS5WQm94IHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfSBvbk1vdXNlRW50ZXI9eygpID0+IHsgdGhpcy5zZXRTdGF0ZSh7IHNob3dDb250cm9sczogdHJ1ZSB9KTsgfX0gb25Nb3VzZUxlYXZlPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzaG93Q29udHJvbHM6IGZhbHNlIH0pOyB9fSBvbkRyYWdPdmVyPXt0aGlzLnByb3BzLm9uRHJhZ092ZXJ9IG9uRHJhZ0VuZD17dGhpcy5wcm9wcy5vbkRyYWdFbmR9PlxuICAgICAgICAgICAgICAgIDx1aS5IQm94IHJlZj1cImhlYWRlclwiIHN0eWxlPXt3aW5kb3dCYXJ9IGRyYWdnYWJsZT17dHJ1ZX0gb25EcmFnU3RhcnQ9e3RoaXMucHJvcHMub25EcmFnU3RhcnR9PlxuICAgICAgICAgICAgICAgICAgICB7Lyo8dWkuSEJveCBzdHlsZT17VmVuZG9yUHJlZml4LnByZWZpeCh7c3R5bGVzOiBsZWZ0Q29udHJvbHN9KS5zdHlsZXN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEdseXBoaWNvbiBnbHlwaD1cImNvZ1wiLz5cbiAgICAgICAgICAgICAgICAgICAgPC91aS5IQm94PiovfVxuICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17dGl0bGVTdHlsZX0+e3RoaXMudGl0bGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICB7Lyo8dWkuSEJveCBzdHlsZT17VmVuZG9yUHJlZml4LnByZWZpeCh7c3R5bGVzOiByaWdodENvbnRyb2xzfSkuc3R5bGVzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5SaWdodDogNX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHbHlwaGljb24gZ2x5cGg9XCJ1bmNoZWNrZWRcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5SaWdodDogNX19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHbHlwaGljb24gZ2x5cGg9XCJyZW1vdmVcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC91aS5IQm94PiovfVxuICAgICAgICAgICAgICAgIDwvdWkuSEJveD5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWN0VG9vbCA/XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFjdFRvb2xcbiAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9XCJ0b29sRGl2XCIgc3R5bGU9e3t3aWR0aDogdG9vbFdpZHRoLCBoZWlnaHQ6IHRvb2xIZWlnaHR9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC91aS5WQm94Pik7XG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC1kb20uZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0LXZlbmRvci1wcmVmaXgvcmVhY3QtdmVuZG9yLXByZWZpeC5kLnRzXCIvPlxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0ICogYXMgVmVuZG9yUHJlZml4IGZyb20gXCJyZWFjdC12ZW5kb3ItcHJlZml4XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5pbXBvcnQgUmVzaXplciBmcm9tIFwiLi9SZXNpemVyXCI7XG5pbXBvcnQgUmVzaXplck92ZXJsYXkgZnJvbSBcIi4vUmVzaXplck92ZXJsYXlcIjtcblxuY29uc3QgUkVTSVpFUk9WRVJMQVk6c3RyaW5nID0gXCJyZXNpemVyXCI7XG5jb25zdCBIT1JJWk9OVEFMOnN0cmluZyA9IFwiaG9yaXpvbnRhbFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dFN0YXRlIHtcbiAgICBpZD86IHN0cmluZ1tdO1xuICAgIGNoaWxkcmVuPzogTGF5b3V0U3RhdGVbXTtcbiAgICBkaXJlY3Rpb24/OiBzdHJpbmc7XG4gICAgZmxleD86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dFByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8TGF5b3V0PiB7XG4gICAgc3RhdGU6IExheW91dFN0YXRlO1xuICAgIG9uU3RhdGVDaGFuZ2U6IEZ1bmN0aW9uO1xuICAgIHBhbmUxPzogc3RyaW5nO1xuICAgIHBhbmUyPzpzdHJpbmc7XG4gICAga2V5OiBudW1iZXI7XG4gICAgcmVmOiBzdHJpbmc7XG4gICAgd2VhdmU/OiBhbnlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGF5b3V0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PExheW91dFByb3BzLCBMYXlvdXRTdGF0ZT4ge1xuXG4gICAgcHVibGljIHN0YXRlOkxheW91dFN0YXRlO1xuXG4gICAgcHJpdmF0ZSBtaW5TaXplOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBkcmFnZ2luZzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgYm91bmRNb3VzZVVwOiBhbnk7XG4gICAgcHJpdmF0ZSBib3VuZE1vdXNlRG93bjogYW55O1xuICAgIHByaXZhdGUgYm91bmRNb3VzZU1vdmU6IGFueTtcblxuICAgIHByaXZhdGUgcGFuZWxEcmFnZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBjaGlsZE5hbWVzOnN0cmluZ1tdO1xuICAgIHByaXZhdGUgcmVzaXplck5hbWVzOnN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IExheW91dFByb3BzLCBzdGF0ZTogTGF5b3V0U3RhdGUpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0YXRlKTtcbiAgICAgICAgdmFyIHBzID0gcHJvcHMuc3RhdGUgfHwge307XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7aWQ6IHBzLmlkLCBkaXJlY3Rpb246IHBzLmRpcmVjdGlvbiwgY2hpbGRyZW46IHBzLmNoaWxkcmVuLCBmbGV4OiBwcy5mbGV4fTtcbiAgICAgICAgdGhpcy5taW5TaXplID0gMTY7XG4gICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpOiB2b2lkIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuYm91bmRNb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuYm91bmRNb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcykpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLmJvdW5kTW91c2VNb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogTGF5b3V0UHJvcHMpOiB2b2lkIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoU3RhbmRhcmRMaWIuaW5jbHVkZU1pc3NpbmdQcm9wZXJ0eVBsYWNlaG9sZGVycyh0aGlzLnN0YXRlLCBuZXh0UHJvcHMuc3RhdGUpKTtcbiAgICB9XG5cbiAgICBjb21wb2VuZW50V2lsbFVubW91bnQoKTogdm9pZCB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuYm91bmRNb3VzZURvd24pO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5ib3VuZE1vdXNlVXApO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlTW92ZVwiLCB0aGlzLmJvdW5kTW91c2VNb3ZlKTtcbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOkxheW91dFByb3BzLCBuZXh0U3RhdGU6TGF5b3V0U3RhdGUpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiAhXy5pc0VxdWFsKHRoaXMuc3RhdGUsIG5leHRTdGF0ZSkgfHwgIV8uaXNFcXVhbCh0aGlzLnN0YXRlLCBuZXh0UHJvcHMuc3RhdGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpOnZvaWQge1xuICAgICAgaWYodGhpcy5wcm9wcy5vblN0YXRlQ2hhbmdlICYmIHRoaXMuc3RhdGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblN0YXRlQ2hhbmdlKHRoaXMuc3RhdGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRET01Ob2RlRnJvbUlkIChpZDogbnVtYmVyKTogRWxlbWVudCB7XG4gICAgICAgIHZhciBjb21wb25lbnQgPSB0aGlzLmdldENvbXBvbmVudEZyb21JZChpZCk7XG4gICAgICAgIGlmKGNvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBjb21wb25lbnQuZWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29tcG9uZW50RnJvbUlkIChpZDogbnVtYmVyKTogTGF5b3V0IHtcbiAgICAgIGlmKHRoaXMuc3RhdGUuaWQgJiYgXy5pc0VxdWFsKHRoaXMuc3RhdGUuaWQsIGlkKSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcih2YXIgaTpudW1iZXIgPSAwOyBpIDwgdGhpcy5jaGlsZE5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvbXBvbmVudDogTGF5b3V0ID0gKHRoaXMucmVmc1t0aGlzLmNoaWxkTmFtZXNbaV1dIGFzIExheW91dCkuZ2V0Q29tcG9uZW50RnJvbUlkKGlkKTtcbiAgICAgICAgICBpZihjb21wb25lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cblxuICAgIHByaXZhdGUgb25Nb3VzZURvd24gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICB0aGlzLnJlc2l6ZXJOYW1lcy5mb3JFYWNoKChyZXNpemVyTmFtZTpzdHJpbmcpID0+IHtcbiAgICAgICAgICB2YXIgcmVzaXplcjpSZXNpemVyID0gdGhpcy5yZWZzW3Jlc2l6ZXJOYW1lXSBhcyBSZXNpemVyO1xuICAgICAgICAgIGlmKHJlc2l6ZXIgJiYgcmVzaXplci5zdGF0ZSAmJiByZXNpemVyLnN0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgdmFyIG92ZXJsYXlSYW5nZTpudW1iZXJbXSA9IHRoaXMuZ2V0UmVzaXplclJhbmdlKHJlc2l6ZXIpO1xuICAgICAgICAgICAgb3ZlcmxheVJhbmdlWzBdICs9IHRoaXMubWluU2l6ZTtcbiAgICAgICAgICAgIG92ZXJsYXlSYW5nZVsxXSAtPSB0aGlzLm1pblNpemU7XG4gICAgICAgICAgICAodGhpcy5yZWZzW1JFU0laRVJPVkVSTEFZXSBhcyBSZXNpemVyT3ZlcmxheSkuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgIHJhbmdlOiBvdmVybGF5UmFuZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBvbk1vdXNlTW92ZShldmVudDpNb3VzZUV2ZW50KTp2b2lkIHtcblxuICAgIH1cblxuICAgIGdldFJlc2l6ZXJSYW5nZShyZXNpemVyOlJlc2l6ZXIpOiBudW1iZXJbXSB7XG4gICAgICB2YXIgZGlyZWN0aW9uOnN0cmluZyA9IHJlc2l6ZXIucHJvcHMuZGlyZWN0aW9uO1xuICAgICAgdmFyIHBhbmUxOkxheW91dCA9IHRoaXMucmVmc1tyZXNpemVyLnByb3BzLnBhbmUxXSBhcyBMYXlvdXQ7XG4gICAgICB2YXIgcGFuZTI6TGF5b3V0ID0gdGhpcy5yZWZzW3Jlc2l6ZXIucHJvcHMucGFuZTJdIGFzIExheW91dDtcblxuICAgICAgdmFyIGVsZW1lbnQxOkhUTUxFbGVtZW50ID0gUmVhY3RET00uZmluZERPTU5vZGUocGFuZTEpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgdmFyIGVsZW1lbnQyOkhUTUxFbGVtZW50ID0gUmVhY3RET00uZmluZERPTU5vZGUocGFuZTIpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICB2YXIgcmVjdDpDbGllbnRSZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIHBhZ2VMZWZ0Om51bWJlciA9IHdpbmRvdy5wYWdlWE9mZnNldCArIHJlY3QubGVmdDtcbiAgICAgIHZhciBwYWdlVG9wOm51bWJlciA9IHdpbmRvdy5wYWdlWU9mZnNldCArIHJlY3QudG9wO1xuXG4gICAgICBpZihkaXJlY3Rpb24gPT09IEhPUklaT05UQUwpIHtcbiAgICAgICAgcmV0dXJuIFtlbGVtZW50MS5vZmZzZXRMZWZ0ICsgcGFnZUxlZnQsIGVsZW1lbnQyLm9mZnNldExlZnQgKyBlbGVtZW50Mi5jbGllbnRXaWR0aCArIHBhZ2VMZWZ0XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbZWxlbWVudDEub2Zmc2V0VG9wICsgcGFnZVRvcCwgZWxlbWVudDIub2Zmc2V0VG9wICsgZWxlbWVudDIuY2xpZW50SGVpZ2h0ICsgcGFnZVRvcF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk1vdXNlVXAgKGV2ZW50Ok1vdXNlRXZlbnQpIHtcbiAgICAgICAgdmFyIG5ld1N0YXRlOkxheW91dFN0YXRlID0gXy5jbG9uZURlZXAodGhpcy5zdGF0ZSk7XG5cbiAgICAgICAgdGhpcy5yZXNpemVyTmFtZXMuZm9yRWFjaChyZXNpemVyTmFtZSA9PiB7XG4gICAgICAgICAgICB2YXIgcmVzaXplcjpSZXNpemVyID0gdGhpcy5yZWZzW3Jlc2l6ZXJOYW1lXSBhcyBSZXNpemVyO1xuICAgICAgICAgICAgdmFyIHJlc2l6ZXJPdmVybGF5OlJlc2l6ZXJPdmVybGF5ID0gdGhpcy5yZWZzW1JFU0laRVJPVkVSTEFZXSBhcyBSZXNpemVyT3ZlcmxheTtcblxuICAgICAgICAgICAgaWYgKHJlc2l6ZXIgJiYgcmVzaXplci5zdGF0ZSAmJiByZXNpemVyLnN0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHZhciByYW5nZTpudW1iZXJbXSA9IHRoaXMuZ2V0UmVzaXplclJhbmdlKHJlc2l6ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBiZWdpbjpudW1iZXIgPSByYW5nZVswXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kOm51bWJlciA9IHJhbmdlWzFdO1xuICAgICAgICAgICAgICAgIHZhciBtb3VzZVBvczpudW1iZXIgPSB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9PT0gSE9SSVpPTlRBTCA/IGV2ZW50LnBhZ2VYIDogZXZlbnQucGFnZVk7XG4gICAgICAgICAgICAgICAgdmFyIHNpemU6bnVtYmVyID0gdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwgPyB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGggOiB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgbW91c2VQb3MgPSBNYXRoLm1heChiZWdpbiArIHRoaXMubWluU2l6ZSwgTWF0aC5taW4obW91c2VQb3MsIGVuZCAtIHRoaXMubWluU2l6ZSkpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZjE6c3RyaW5nID0gcmVzaXplci5wcm9wcy5wYW5lMTtcbiAgICAgICAgICAgICAgICB2YXIgcmVmMjpzdHJpbmcgPSByZXNpemVyLnByb3BzLnBhbmUyO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhbmUxOiBMYXlvdXQgPSB0aGlzLnJlZnNbcmVmMV0gYXMgTGF5b3V0O1xuICAgICAgICAgICAgICAgIHZhciBwYW5lMjogTGF5b3V0ID0gdGhpcy5yZWZzW3JlZjJdIGFzIExheW91dDtcblxuXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4MTpudW1iZXIgPSB0aGlzLmNoaWxkTmFtZXMuaW5kZXhPZihyZWYxKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXgyOm51bWJlciA9IHRoaXMuY2hpbGROYW1lcy5pbmRleE9mKHJlZjIpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGZsZXgxOm51bWJlciA9IChtb3VzZVBvcyAtIGJlZ2luKSAvIHNpemU7XG4gICAgICAgICAgICAgICAgdmFyIGZsZXgyOiBudW1iZXIgPSAoZW5kIC0gbW91c2VQb3MpIC8gc2l6ZTtcblxuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmNoaWxkcmVuW2luZGV4MV0uZmxleCA9IGZsZXgxO1xuICAgICAgICAgICAgICAgIG5ld1N0YXRlLmNoaWxkcmVuW2luZGV4Ml0uZmxleCA9IGZsZXgyO1xuXG4gICAgICAgICAgICAgICAgcGFuZTEuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgIGZsZXg6IGZsZXgxXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBwYW5lMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZsZXg6IGZsZXgyXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXNpemVyLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmVzaXplck92ZXJsYXkuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhbmVsRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdGF0ZUNoYW5nZShjaGlsZFJlZjpzdHJpbmcsIG5ld1N0YXRlOkxheW91dFN0YXRlKTogdm9pZCB7XG4gICAgICAgIHZhciBzdGF0ZUNvcHk6TGF5b3V0U3RhdGUgPSBfLmNsb25lRGVlcCh0aGlzLnN0YXRlKTtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jaGlsZE5hbWVzLmluZGV4T2YoY2hpbGRSZWYpO1xuXG4gICAgICAgIHN0YXRlQ29weS5jaGlsZHJlbltpbmRleF0gPSBuZXdTdGF0ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZUNvcHkpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5jaGlsZE5hbWVzID0gW107XG4gICAgICAgIHRoaXMucmVzaXplck5hbWVzID0gW107XG4gICAgICAgIHZhciBzdHlsZTphbnkgPSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgICAgIGZsZXg6IHRoaXMuc3RhdGUuZmxleCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICBvdXRsaW5lOiBcIm5vbmVcIixcbiAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgdXNlclNlbGVjdDogXCJub25lXCIsXG4gICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9PT0gSE9SSVpPTlRBTCA/IFwicm93XCIgOiBcImNvbHVtblwiXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYodGhpcy5zdGF0ZS5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwpIHtcbiAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2hpbGRyZW4gJiYgdGhpcy5zdGF0ZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgIHZhciBuZXdDaGlsZHJlbjpKU1guRWxlbWVudFtdID0gbmV3IEFycmF5KHRoaXMuc3RhdGUuY2hpbGRyZW4ubGVuZ3RoICogMiAtIDEpO1xuXG4gICAgICAgICAgIHRoaXMuc3RhdGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGRTdGF0ZTpMYXlvdXRTdGF0ZSwgaTpudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgdmFyIHJlZjpzdHJpbmcgPSBcImNoaWxkXCIgKyBpO1xuICAgICAgICAgICAgICB0aGlzLmNoaWxkTmFtZXNbaV0gPSByZWY7XG4gICAgICAgICAgICAgIG5ld0NoaWxkcmVuW2kgKiAyXSA9IDxMYXlvdXQgb25TdGF0ZUNoYW5nZT17dGhpcy5oYW5kbGVTdGF0ZUNoYW5nZS5iaW5kKHRoaXMsIHJlZil9IHJlZj17cmVmfSBzdGF0ZT17Y2hpbGRTdGF0ZX0ga2V5PXtpICogMn0vPjtcbiAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgdmFyIGk6bnVtYmVyO1xuICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGggLSAxOyBpICs9IDIpIHtcbiAgICAgICAgICAgICB2YXIgcmVzaXplck5hbWU6c3RyaW5nID0gXCJyZXNpemVyXCIgKyAoaSAvIDIpO1xuICAgICAgICAgICAgIHRoaXMucmVzaXplck5hbWVzLnB1c2gocmVzaXplck5hbWUpO1xuICAgICAgICAgICAgIHZhciByZXNpemVyOkpTWC5FbGVtZW50ID0gPFJlc2l6ZXIgcmVmPXtyZXNpemVyTmFtZX0ga2V5PXtpfSBkaXJlY3Rpb249e3RoaXMuc3RhdGUuZGlyZWN0aW9ufSBwYW5lMT17bmV3Q2hpbGRyZW5baSAtIDFdLnJlZiBhcyBzdHJpbmd9IHBhbmUyPXtuZXdDaGlsZHJlbltpICsgMV0ucmVmIGFzIHN0cmluZ30vPjtcbiAgICAgICAgICAgICBuZXdDaGlsZHJlbltpXSA9IHJlc2l6ZXI7XG4gICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcmVmaXhlZDphbnkgPSBWZW5kb3JQcmVmaXgucHJlZml4KHtzdHlsZXM6IHN0eWxlfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgcmVmPXsoZWx0OkVsZW1lbnQpID0+IHsgdGhpcy5lbGVtZW50ID0gZWx0OyB9fSBzdHlsZT17cHJlZml4ZWQuc3R5bGVzfT5cbiAgICAgICAgICAgICAgICB7bmV3Q2hpbGRyZW59XG4gICAgICAgICAgICAgICAgPFJlc2l6ZXJPdmVybGF5IHJlZj17UkVTSVpFUk9WRVJMQVl9IGtleT17UkVTSVpFUk9WRVJMQVl9IGRpcmVjdGlvbj17dGhpcy5zdGF0ZS5kaXJlY3Rpb259Lz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QtZG9tLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC12ZW5kb3ItcHJlZml4L3JlYWN0LXZlbmRvci1wcmVmaXguZC50c1wiLz5cblxuaW1wb3J0ICogYXMgVmVuZG9yUHJlZml4IGZyb20gXCJyZWFjdC12ZW5kb3ItcHJlZml4XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vdXRpbHMvU3RhbmRhcmRMaWJcIjtcblxuY29uc3QgSE9SSVpPTlRBTDogc3RyaW5nID0gXCJob3Jpem9udGFsXCI7XG5cbnZhciByZXNpemVyU3R5bGU6IGFueSA9IHt9O1xuXG5yZXNpemVyU3R5bGUuYmFzaWMgPSB7XG5cdGJhY2tncm91bmQ6IFwiIzAwMFwiLFxuICAgIG9wYWNpdHk6IC4xLFxuICAgIHpJbmRleDogMSxcbiAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgIGJhY2tncm91bmRDbGlwOiBcInBhZGRpbmdcIlxufTtcblxucmVzaXplclN0eWxlLnZlcnRpY2FsID0ge1xuICAgIGhlaWdodDogXCI0cHhcIixcbiAgICBjdXJzb3I6IFwicm93LXJlc2l6ZVwiLFxuICAgIHdpZHRoOiBcIjEwMCVcIlxufTtcblxucmVzaXplclN0eWxlLmhvcml6b250YWwgPSB7XG4gICAgd2lkdGg6IFwiNHB4XCIsXG4gICAgY3Vyc29yOiBcImNvbC1yZXNpemVcIixcbiAgICBoZWlnaHQ6IFwiMTAwJVwiXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNpemVyUHJvcHMgZXh0ZW5kcyBSZWFjdC5Qcm9wczxSZXNpemVyPiB7XG5cdHJlZjogc3RyaW5nO1xuXHRrZXk6IG51bWJlcjtcblx0ZGlyZWN0aW9uOiBzdHJpbmc7XG5cdHBhbmUxOiBzdHJpbmc7XG5cdHBhbmUyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc2l6ZXJTdGF0ZSB7XG5cdGFjdGl2ZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc2l6ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVJlc2l6ZXJQcm9wcywgSVJlc2l6ZXJTdGF0ZT4ge1xuXG5cdFx0cHJpdmF0ZSBlbGVtZW50OkVsZW1lbnQ7XG5cblx0XHRwcml2YXRlIGJvdW5kTW91c2VEb3duOmFueTtcblxuXHRcdGNvbnN0cnVjdG9yKHByb3BzOklSZXNpemVyUHJvcHMpIHtcblx0XHRcdHN1cGVyKHByb3BzKTtcblx0XHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRcdGFjdGl2ZTogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Y29tcG9uZW50RGlkTW91bnQgKCkge1xuXHRcdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5ib3VuZE1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKSk7XG5cdFx0fVxuXG5cdFx0Y29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5ib3VuZE1vdXNlRG93bik7XG5cdFx0fVxuXG5cdFx0b25Nb3VzZURvd24gKCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7XG5cdFx0XHRcdGFjdGl2ZTp0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZW5kZXIoKSB7XG5cdFx0XHR2YXIgZGlyZWN0aW9uOnN0cmluZyA9IHRoaXMucHJvcHMuZGlyZWN0aW9uO1xuXHRcdFx0dmFyIHN0eWxlOmFueSA9IHJlc2l6ZXJTdHlsZS5iYXNpYztcblxuXHRcdFx0U3RhbmRhcmRMaWIubWVyZ2Uoc3R5bGUsIHJlc2l6ZXJTdHlsZVtkaXJlY3Rpb25dKTtcblxuXHRcdFx0dmFyIHByZWZpeGVkID0gVmVuZG9yUHJlZml4LnByZWZpeCh7c3R5bGVzOiBzdHlsZX0pO1xuXHRcdFx0cmV0dXJuIDxzcGFuIHJlZj17KGVsdDpFbGVtZW50KSA9PiB7IHRoaXMuZWxlbWVudCA9IGVsdCB9fSBzdHlsZT17cHJlZml4ZWQuc3R5bGVzfS8+O1xuXHRcdH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QtdmVuZG9yLXByZWZpeC9yZWFjdC12ZW5kb3ItcHJlZml4LmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC1kb20uZC50c1wiLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgKiBhcyBWZW5kb3JQcmVmaXggZnJvbSBcInJlYWN0LXZlbmRvci1wcmVmaXhcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vdXRpbHMvU3RhbmRhcmRMaWJcIjtcbmNvbnN0IEhPUklaT05UQUw6IHN0cmluZyA9IFwiaG9yaXpvbnRhbFwiO1xuXG5jb25zdCBtb3VzZWV2ZW50czpzdHJpbmdbXSA9IFtcIm1vdXNlb3ZlclwiLCBcIm1vdXNlb3V0XCIsIFwibW91c2VsZWF2ZVwiXTtcblxudmFyIHJlc2l6ZXJTdHlsZTphbnkgPSB7fTtcblxucmVzaXplclN0eWxlLmJhc2ljID0ge1xuICAgIGJhY2tncm91bmQ6IFwiIzAwMFwiLFxuICAgIG9wYWNpdHk6IC4zLFxuICAgIHpJbmRleDogMSxcbiAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgIGJhY2tncm91bmRDbGlwOiBcInBhZGRpbmdcIixcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG59O1xuXG5yZXNpemVyU3R5bGUudmVydGljYWwgPSB7XG4gICAgaGVpZ2h0OiBcIjRweFwiLFxuICAgIGN1cnNvcjogXCJyb3ctcmVzaXplXCIsXG4gICAgd2lkdGg6IFwiMTAwJVwiXG59O1xuXG5yZXNpemVyU3R5bGUuaG9yaXpvbnRhbCA9IHtcbiAgICB3aWR0aDogXCI0cHhcIixcbiAgICBjdXJzb3I6IFwiY29sLXJlc2l6ZVwiLFxuICAgIGhlaWdodDogXCIxMDAlXCJcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc2l6ZXJPdmVybGF5UHJvcHMgZXh0ZW5kcyBSZWFjdC5Qcm9wczxSZXNpemVyT3ZlcmxheT4ge1xuICAgIHJlZjogc3RyaW5nO1xuICAgIGRpcmVjdGlvbjogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc2l6ZXJPdmVybGF5U3RhdGUge1xuICAgIGFjdGl2ZT86IGJvb2xlYW47XG4gICAgcmFuZ2U/OiBudW1iZXJbXTtcbiAgICB4PzogbnVtYmVyO1xuICAgIHk/OiBudW1iZXI7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc2l6ZXJPdmVybGF5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElSZXNpemVyT3ZlcmxheVByb3BzLCBJUmVzaXplck92ZXJsYXlTdGF0ZT4ge1xuXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50O1xuICAgIHB1YmxpYyBzdGF0ZTogSVJlc2l6ZXJPdmVybGF5U3RhdGU7XG5cbiAgICBwcml2YXRlIF9vbk1vdXNlTW92ZTogRXZlbnRMaXN0ZW5lcjtcbiAgICBwcml2YXRlIF9zdG9wRXZlbnRQcm9wYWdhdGlvbjogRXZlbnRMaXN0ZW5lcjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJUmVzaXplck92ZXJsYXlQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcylcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIHJhbmdlOiBbXSxcbiAgICAgICAgICB4OiBOYU4sXG4gICAgICAgICAgeTogTmFOXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyksIHRydWUpO1xuICAgICAgICBtb3VzZWV2ZW50cy5mb3JFYWNoKChtb3VzZWV2ZW50OiBzdHJpbmcpID0+IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIobW91c2VldmVudCwgdGhpcy5fc3RvcEV2ZW50UHJvcGFnYXRpb24gPSB0aGlzLnN0b3BFdmVudFByb3BhZ2F0aW9uLmJpbmQodGhpcyksIHRydWUpKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vbk1vdXNlTW92ZSlcbiAgICAgICAgbW91c2VldmVudHMuZm9yRWFjaCgobW91c2VldmVudCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihtb3VzZWV2ZW50LCB0aGlzLl9zdG9wRXZlbnRQcm9wYWdhdGlvbikpO1xuICAgIH1cblxuICAgIHN0b3BFdmVudFByb3BhZ2F0aW9uKGV2ZW50OiBFdmVudCkge1xuICAgICAgICBpZih0aGlzLnN0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICBpZih0aGlzLnN0YXRlLmFjdGl2ZSkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyOkVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSBhcyBFbGVtZW50O1xuICAgICAgICAgICAgdmFyIHJlY3Q6Q2xpZW50UmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBsZWZ0OiBudW1iZXIgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyByZWN0LmxlZnQ7XG4gICAgICAgICAgICB2YXIgdG9wOiBudW1iZXIgPSB3aW5kb3cucGFnZVlPZmZzZXQgKyByZWN0LnRvcDtcbiAgICAgICAgICAgIHZhciBtb3VzZVBvczogbnVtYmVyID0gdGhpcy5wcm9wcy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUwgPyBldmVudC5wYWdlWCA6IGV2ZW50LnBhZ2VZO1xuXG4gICAgICAgICAgICBtb3VzZVBvcyA9IE1hdGgubWF4KHRoaXMuc3RhdGUucmFuZ2VbMF0sIE1hdGgubWluKG1vdXNlUG9zLCB0aGlzLnN0YXRlLnJhbmdlWzFdKSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmRpcmVjdGlvbiA9PT0gSE9SSVpPTlRBTCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB4OiBtb3VzZVBvcyAtIGxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHk6IE5hTlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgeDogTmFOLFxuICAgICAgICAgICAgICAgICAgICB5OiBtb3VzZVBvcyAtIHRvcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9uOiBzdHJpbmcgPSB0aGlzLnByb3BzLmRpcmVjdGlvbjtcbiAgICAgICAgdmFyIHN0eWxlOmFueSA9IHt9O1xuXG4gICAgICAgIFN0YW5kYXJkTGliLm1lcmdlKHN0eWxlLCByZXNpemVyU3R5bGUuYmFzaWMpO1xuICAgICAgICBTdGFuZGFyZExpYi5tZXJnZShzdHlsZSwgcmVzaXplclN0eWxlW2RpcmVjdGlvbl0pO1xuXG4gICAgICAgIGlmKHRoaXMuc3RhdGUuYWN0aXZlKSB7XG4gICAgICAgICAgICBzdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gdGhpcy5zdGF0ZS54O1xuICAgICAgICAgICAgc3R5bGUudG9wID0gdGhpcy5zdGF0ZS55O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJlZml4ZWQgPSBWZW5kb3JQcmVmaXgucHJlZml4KHsgc3R5bGVzOiBzdHlsZSB9KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNwYW4gcmVmPXsoZWx0OkVsZW1lbnQpID0+IHsgdGhpcy5lbGVtZW50ID0gZWx0OyB9fSBzdHlsZT17cHJlZml4ZWQuc3R5bGVzfS8+XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOmFueSwgc3RhdGU6YW55KSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBzdHlsZTphbnkgPSB0aGlzLnByb3BzLnN0eWxlIHx8IHt9O1xuICAgICAgICB2YXIgb3RoZXJQcm9wczphbnkgPSB7fTtcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgaWYoa2V5ICE9PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICAgICAgICBvdGhlclByb3BzW2tleV0gPSB0aGlzLnByb3BzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZSA9IHN0eWxlIHx8IHt9O1xuICAgICAgICBzdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIHN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcInJvd1wiO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZX0gey4uLm90aGVyUHJvcHN9PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOmFueSwgc3RhdGU6YW55KSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBzdHlsZTphbnkgPSB0aGlzLnByb3BzLnN0eWxlIHx8IHt9O1xuICAgICAgICB2YXIgb3RoZXJQcm9wczphbnkgPSB7fTtcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgaWYoa2V5ICE9PSBcInN0eWxlXCIpIHtcbiAgICAgICAgICAgICAgICBvdGhlclByb3BzW2tleV0gPSB0aGlzLnByb3BzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIHN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZX0gey4uLm90aGVyUHJvcHN9PlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuIiwiaW1wb3J0IEhCb3ggZnJvbSBcIi4vSEJveFwiO1xuaW1wb3J0IFZCb3ggZnJvbSBcIi4vVkJveFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSEJveCxcbiAgICBWQm94XG59XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LWRvbS5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy93ZWF2ZS9XZWF2ZVBhdGguZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvZDMvZDMuZC50c1wiLz5cblxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElBYnN0cmFjdFdlYXZlVG9vbFByb3BzIGV4dGVuZHMgUmVhY3QuUHJvcHM8QWJzdHJhY3RXZWF2ZVRvb2w+IHtcbiAgICB0b29sUGF0aDpXZWF2ZVBhdGg7XG4gICAgc3R5bGU6UmVhY3QuQ1NTUHJvcGVydGllc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElBYnN0cmFjdFdlYXZlVG9vbFN0YXRlIHtcblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElBYnN0cmFjdFdlYXZlVG9vbFBhdGhzIHtcbiAgICBbbmFtZTpzdHJpbmddIDogV2VhdmVQYXRoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudFNpemUge1xuICAgIHdpZHRoOm51bWJlcjtcbiAgICBoZWlnaHQ6bnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgUGF0aENvbmZpZyB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHBhdGg6IFdlYXZlUGF0aDtcbiAgICBjYWxsYmFja3M/OiBGdW5jdGlvbnxGdW5jdGlvbltdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBYnN0cmFjdFdlYXZlVG9vbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcywgSUFic3RyYWN0V2VhdmVUb29sU3RhdGU+IHtcblxuICAgIHByb3RlY3RlZCB0b29sUGF0aDpXZWF2ZVBhdGg7XG4gICAgcHJpdmF0ZSB3cmFwcGVyOkhUTUxFbGVtZW50O1xuICAgIHByb3RlY3RlZCBlbGVtZW50OkhUTUxFbGVtZW50O1xuICAgIHByb3RlY3RlZCBwYXRoczpJQWJzdHJhY3RXZWF2ZVRvb2xQYXRocztcbiAgICBwcm90ZWN0ZWQgZWxlbWVudFNpemU6RWxlbWVudFNpemU7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMudG9vbFBhdGggPSBwcm9wcy50b29sUGF0aDtcbiAgICAgICAgdGhpcy5wYXRocyA9IHt9O1xuICAgIH1cblxuICAgIGdldEVsZW1lbnRTaXplKCk6RWxlbWVudFNpemUge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMud3JhcHBlci5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy53cmFwcGVyLmNsaWVudEhlaWdodFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIHRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbiBhcnJ5IG9mIHBhdGggY29uZmlndXJhdGlvbnNcbiAgICAvLyBhIHBhdGggY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGEgcGF0aCBvYmplY3QgbmFtZSwgdGhlIHdlYXZlIHBhdGggYW5kIGFuXG4gICAgLy8gb3B0aW9uYWwgY2FsbGJhY2sgb3IgYXJyYXkgb2YgY2FsbGJhY2tzXG4gICAgaW5pdGlhbGl6ZVBhdGhzKHByb3BlcnRpZXM6UGF0aENvbmZpZ1tdKTp2b2lkIHtcbiAgICAgICAgcHJvcGVydGllcy5mb3JFYWNoKChwYXRoQ29uZjpQYXRoQ29uZmlnKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBhdGhzW3BhdGhDb25mLm5hbWVdID0gcGF0aENvbmYucGF0aDtcbiAgICAgICAgICAgIGlmKHBhdGhDb25mLmNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja3M6RnVuY3Rpb25bXSA9IEFycmF5LmlzQXJyYXkocGF0aENvbmYuY2FsbGJhY2tzKSA/IHBhdGhDb25mLmNhbGxiYWNrcyBhcyBGdW5jdGlvbltdIDogW3BhdGhDb25mLmNhbGxiYWNrcyBhcyBGdW5jdGlvbl07XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrOkZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aHNbcGF0aENvbmYubmFtZV0uYWRkQ2FsbGJhY2sodGhpcywgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUgKCkge1xuXG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuXG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuXG4gICAgfVxuXG4gICAgaGFuZGxlQ2xpY2soZXZlbnQ6UmVhY3QuTW91c2VFdmVudCk6dm9pZCB7XG5cbiAgICB9XG5cbiAgICByZW5kZXIoKTpKU1guRWxlbWVudCB7XG4gICAgICAgIHJldHVybiA8ZGl2IHJlZj17KGVsdDpIVE1MRWxlbWVudCkgPT4geyB0aGlzLndyYXBwZXIgPSBlbHQ7IH19IHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfT5cbiAgICAgICAgICAgIDxkaXYgcmVmPXsoZWx0OkhUTUxFbGVtZW50KSA9PiB7dGhpcy5lbGVtZW50ID0gZWx0OyB9fSBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBtYXhIZWlnaHQ6IFwiMTAwJVwifX0+PC9kaXY+XG4gICAgICAgIDwvZGl2PjtcbiAgICB9XG5cbiAgICBjdXN0b21TdHlsZShhcnJheTpBcnJheTxudW1iZXI+LCB0eXBlOnN0cmluZywgZmlsdGVyOnN0cmluZywgc3R5bGU6YW55KSB7XG4gICAgICAgIGFycmF5LmZvckVhY2goIChpbmRleCkgPT4ge1xuICAgICAgICAgICAgZDMuc2VsZWN0KGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbCh0eXBlKS5maWx0ZXIoZmlsdGVyKVswXVtpbmRleF0pLnN0eWxlKHN0eWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9jMy9jMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3dlYXZlL1dlYXZlUGF0aC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vdXRpbHMvU3RhbmRhcmRMaWIudHNcIi8+XG5cblxuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vV2VhdmVUb29sXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0IEZvcm1hdFV0aWxzIGZyb20gXCIuLi91dGlscy9Gb3JtYXRVdGlsc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0lBYnN0cmFjdFdlYXZlVG9vbFByb3BzfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQYXRoc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7RWxlbWVudFNpemV9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0NoYXJ0Q29uZmlndXJhdGlvbiwgQ2hhcnRBUEksIGdlbmVyYXRlfSBmcm9tIFwiYzNcIjtcbmltcG9ydCB7TW91c2VFdmVudH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL3V0aWxzL1N0YW5kYXJkTGliXCI7XG5cblxuaW50ZXJmYWNlIElCYXJjaGFydFBhdGhzIGV4dGVuZHMgSUFic3RyYWN0V2VhdmVUb29sUGF0aHMge1xuICAgIHBsb3R0ZXI6IFdlYXZlUGF0aDtcbiAgICBoZWlnaHRDb2x1bW5zOiBXZWF2ZVBhdGg7XG4gICAgbGFiZWxDb2x1bW46IFdlYXZlUGF0aDtcbiAgICBzb3J0Q29sdW1uOiBXZWF2ZVBhdGg7XG4gICAgY29sb3JDb2x1bW46IFdlYXZlUGF0aDtcbiAgICBjaGFydENvbG9yczogV2VhdmVQYXRoO1xuICAgIGdyb3VwaW5nTW9kZTogV2VhdmVQYXRoO1xuICAgIGhvcml6b250YWxNb2RlOiBXZWF2ZVBhdGg7XG4gICAgc2hvd1ZhbHVlTGFiZWxzOiBXZWF2ZVBhdGg7XG4gICAgeEF4aXM6IFdlYXZlUGF0aDtcbiAgICB5QXhpczogV2VhdmVQYXRoO1xuICAgIGZpbHRlcmVkS2V5U2V0OiBXZWF2ZVBhdGg7XG4gICAgc2VsZWN0aW9uS2V5U2V0OiBXZWF2ZVBhdGg7XG4gICAgcHJvYmVLZXlTZXQ6IFdlYXZlUGF0aDtcbn1cblxuXG5jbGFzcyBXZWF2ZUMzQmFyY2hhcnQgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG5cbiAgICBwcml2YXRlIGtleVRvSW5kZXg6e1trZXk6c3RyaW5nXTogbnVtYmVyfTtcbiAgICBwcml2YXRlIGluZGV4VG9LZXk6e1tpbmRleDpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgeEF4aXNWYWx1ZVRvTGFiZWw6e1t2YWx1ZTpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgeUF4aXNWYWx1ZVRvTGFiZWw6e1t2YWx1ZTpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgeUxhYmVsQ29sdW1uRGF0YVR5cGU6c3RyaW5nO1xuICAgIHByaXZhdGUgZ3JvdXBpbmdNb2RlOnN0cmluZztcbiAgICBwcml2YXRlIGhlaWdodENvbHVtbk5hbWVzOnN0cmluZ1tdO1xuICAgIHByaXZhdGUgaGVpZ2h0Q29sdW1uc0xhYmVsczpzdHJpbmdbXTtcbiAgICBwcml2YXRlIHN0cmluZ1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSBudW1lcmljUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIHJlY29yZHM6UmVjb3JkW11bXTtcbiAgICBwcml2YXRlIGNvbG9yUmFtcDpzdHJpbmdbXTtcbiAgICBwcml2YXRlIHNob3dWYWx1ZUxhYmVsczpib29sZWFuO1xuICAgIHByaXZhdGUgeUxhYmVsQ29sdW1uUGF0aDpXZWF2ZVBhdGg7XG4gICAgcHJpdmF0ZSBjM0NvbmZpZzpDaGFydENvbmZpZ3VyYXRpb247XG4gICAgcHJpdmF0ZSBjaGFydDpDaGFydEFQSTtcblxuICAgIHByb3RlY3RlZCBwYXRoczpJQmFyY2hhcnRQYXRocztcblxuICAgIHByaXZhdGUgZmxhZzpib29sZWFuO1xuICAgIHByaXZhdGUga2V5RG93bjpib29sZWFuO1xuICAgIHByaXZhdGUgYnVzeTpib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG4gICAgICAgIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcbiAgICAgICAgdGhpcy54QXhpc1ZhbHVlVG9MYWJlbCA9IHt9O1xuXG4gICAgICAgIHRoaXMuYzNDb25maWcgPSB7XG4gICAgICAgICAgICAvL3NpemU6IHRoaXMuZ2V0RWxlbWVudFNpemUoKSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDIwLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogMjAsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IDMwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGpzb246IFtdLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYmFyXCIsXG4gICAgICAgICAgICAgICAgeFNvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICh2LCBpZCwgaSwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zaG93VmFsdWVMYWJlbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9yZGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGNvbG9yOiAoY29sb3I6c3RyaW5nLCBkOmFueSk6c3RyaW5nID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5oZWlnaHRDb2x1bW5OYW1lcy5sZW5ndGggPT09IDEgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgaW5kZXggb2YgbnVtZXJpY1JlY29yZHMgaW4gc3RyaW5nUmVjb3Jkc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gXy5wbHVjayh0aGlzLnN0cmluZ1JlY29yZHMsIFwiaWRcIikuaW5kZXhPZihpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdSZWNvcmRzW2luZGV4XSA/IHRoaXMuc3RyaW5nUmVjb3Jkc1tpbmRleF1bXCJjb2xvclwiXSBhcyBzdHJpbmcgOiBcIiNDMENERDFcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvciB8fCBcIiNDMENERDFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25jbGljazogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmtleURvd24gJiYgZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKFt0aGlzLmluZGV4VG9LZXlbZC5pbmRleF1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25zZWxlY3RlZDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuYWRkS2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9udW5zZWxlY3RlZDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQucmVtb3ZlS2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ubW91c2VvdmVyOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3V0OiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF4aXM6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2F0ZWdvcnlcIixcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJvdXRlci1jZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAobnVtOm51bWJlcik6c3RyaW5nID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0cmluZ1JlY29yZHMgJiYgdGhpcy5zdHJpbmdSZWNvcmRzW251bV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nUmVjb3Jkc1tudW1dW1wieExhYmVsXCJdIGFzIHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6XCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLW1pZGRsZVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aWxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAobnVtOm51bWJlcik6c3RyaW5nID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnlMYWJlbENvbHVtblBhdGggJiYgdGhpcy55TGFiZWxDb2x1bW5EYXRhVHlwZSAhPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFtudW1dIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwaW5nTW9kZSA9PT0gXCJwZXJjZW50U3RhY2tcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMuZm9ybWF0KFwiLjAlXCIpKG51bSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhGb3JtYXRVdGlscy5kZWZhdWx0TnVtYmVyRm9ybWF0dGluZyhudW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmR0bzogbnVsbCxcbiAgICAgICAgICAgIGJhcjoge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiAwLjhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnJlbmRlcmVkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5idXN5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZWxlY3Rpb25LZXlzQ2hhbmdlZCAoKTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5czpzdHJpbmdbXSA9IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBzZWxlY3RlZEtleXMubWFwKChrZXk6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBrZXlzOnN0cmluZ1tdID0gT2JqZWN0LmtleXModGhpcy5rZXlUb0luZGV4KTtcbiAgICAgICAgdmFyIGluZGljZXM6bnVtYmVyW10gPSBrZXlzLm1hcCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdW5zZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBfLmRpZmZlcmVuY2UoaW5kaWNlcyxzZWxlY3RlZEluZGljZXMpO1xuICAgICAgICBpZihzZWxlY3RlZEluZGljZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDAuM30pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShzZWxlY3RlZEluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnNlbGVjdCh0aGlzLmhlaWdodENvbHVtbk5hbWVzLCBzZWxlY3RlZEluZGljZXMsIHRydWUpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoaW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2VsZWN0KHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMsIFtdLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9iZWRLZXlzQ2hhbmdlZCAoKTogdm9pZCB7XG4gICAgICAgIHZhciBzZWxlY3RlZEtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBzZWxlY3RlZEtleXMubWFwKCAoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIga2V5czpzdHJpbmdbXSA9IE9iamVjdC5rZXlzKHRoaXMua2V5VG9JbmRleCk7XG4gICAgICAgIHZhciBpbmRpY2VzOm51bWJlcltdID0ga2V5cy5tYXAoKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gXy5kaWZmZXJlbmNlKGluZGljZXMsc2VsZWN0ZWRJbmRpY2VzKTtcblxuICAgICAgICBpZihzZWxlY3RlZEluZGljZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDAuM30pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShzZWxlY3RlZEluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25LZXlzQ2hhbmdlZCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayhldmVudDpNb3VzZUV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuZmxhZykge1xuICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRvZ2dsZUtleShldmVudDpLZXlib2FyZEV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoKGV2ZW50LmtleUNvZGUgPT09IDE3KXx8KGV2ZW50LmtleUNvZGUgPT09IDkxKSB8fCAoZXZlbnQua2V5Q29kZSA9PT0gMjI0KSkge1xuICAgICAgICAgICAgdGhpcy5rZXlEb3duID0gIXRoaXMua2V5RG93bjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJvdGF0ZUF4ZXMoKSB7XG4gICAgICAgIC8vIHRoaXMuYzNDb25maWcuYXhpcy5yb3RhdGVkID0gdGhpcy5wYXRocy5ob3Jpem9udGFsTW9kZS5nZXRTdGF0ZSgpO1xuICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gICB0aGlzLmJ1c3kgPSB0cnVlO1xuICAgICAgICAvLyAgIGMzLmdlbmVyYXRlKHRoaXMuYzNDb25maWcpO1xuICAgICAgICAvLyB9LCAxMCk7XG4gICAgfVxuXG4gICAgX2F4aXNDaGFuZ2VkICgpIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaWYodGhpcy5idXN5KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuX2F4aXNDaGFuZ2VkLCAyMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgeExhYmVsOnN0cmluZyA9IHRoaXMucGF0aHMueEF4aXMucHVzaChcIm92ZXJyaWRlQXhpc05hbWVcIikuZ2V0U3RhdGUoKSB8fCBcIlNvcnRlZCBieSBcIiArIHRoaXMucGF0aHMuc29ydENvbHVtbi5nZXRPYmplY3QoKS5nZXRNZXRhZGF0YSgndGl0bGUnKTtcbiAgICAgICAgdmFyIHlMYWJlbDpzdHJpbmcgPSB0aGlzLnBhdGhzLnlBeGlzLnB1c2goXCJvdmVycmlkZUF4aXNOYW1lXCIpLmdldFN0YXRlKCkgfHwgKHRoaXMuaGVpZ2h0Q29sdW1uc0xhYmVscyA/IHRoaXMuaGVpZ2h0Q29sdW1uc0xhYmVscy5qb2luKFwiLCBcIikgOiBcIlwiKTtcblxuICAgICAgICB0aGlzLmNoYXJ0LmF4aXMubGFiZWxzKHtcbiAgICAgICAgICAgIHg6IHhMYWJlbCxcbiAgICAgICAgICAgIHk6IHlMYWJlbFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmMzQ29uZmlnLmF4aXMueC5sYWJlbCA9IHt0ZXh0OnhMYWJlbCwgcG9zaXRpb246XCJvdXRlci1jZW50ZXJcIn07XG4gICAgICAgIHRoaXMuYzNDb25maWcuYXhpcy55LmxhYmVsID0ge3RleHQ6eUxhYmVsLCBwb3NpdGlvbjpcIm91dGVyLW1pZGRsZVwifTtcbiAgICB9XG5cbiAgICBoYW5kbGVTaG93VmFsdWVMYWJlbHMgKCkge1xuICAgICAgICB0aGlzLnNob3dWYWx1ZUxhYmVscyA9IHRoaXMucGF0aHMuc2hvd1ZhbHVlTGFiZWxzLmdldFN0YXRlKCk7XG4gICAgICAgIHRoaXMuY2hhcnQuZmx1c2goKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlQ29sdW1ucygpIHtcbiAgICAgICAgdGhpcy5oZWlnaHRDb2x1bW5OYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLmhlaWdodENvbHVtbnNMYWJlbHMgPSBbXTtcblxuICAgICAgICB2YXIgaGVpZ2h0Q29sdW1ucyA9IHRoaXMucGF0aHMuaGVpZ2h0Q29sdW1ucy5nZXRDaGlsZHJlbigpO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCBpbiBoZWlnaHRDb2x1bW5zKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgY29sdW1uID0gaGVpZ2h0Q29sdW1uc1tpZHhdO1xuICAgICAgICAgICAgbGV0IHRpdGxlID0gY29sdW1uLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKTtcbiAgICAgICAgICAgIGxldCBuYW1lID0gY29sdW1uLmdldFBhdGgoKS5wb3AoKTtcblxuICAgICAgICAgICAgdGhpcy5oZWlnaHRDb2x1bW5zTGFiZWxzLnB1c2godGl0bGUpO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHRDb2x1bW5OYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2RhdGFDaGFuZ2VkKCkge1xuICAgICAgICBpZighdGhpcy5jaGFydCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5idXN5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91cGRhdGVDb2x1bW5zKCk7XG5cbiAgICAgICAgdmFyIGhlaWdodENvbHVtbnM6V2VhdmVQYXRoW10gPSB0aGlzLnBhdGhzLmhlaWdodENvbHVtbnMuZ2V0Q2hpbGRyZW4oKTtcblxuICAgICAgICB2YXIgbnVtZXJpY01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgc29ydDogdGhpcy5wYXRocy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgeExhYmVsOiB0aGlzLnBhdGhzLmxhYmVsQ29sdW1uXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHN0cmluZ01hcHBpbmc6YW55ID0ge1xuICAgICAgICAgICAgc29ydDogdGhpcy5wYXRocy5zb3J0Q29sdW1uLFxuICAgICAgICAgICAgY29sb3I6IHRoaXMucGF0aHMuY29sb3JDb2x1bW4sXG4gICAgICAgICAgICB4TGFiZWw6IHRoaXMucGF0aHMubGFiZWxDb2x1bW5cbiAgICAgICAgfTtcblxuICAgICAgICBoZWlnaHRDb2x1bW5zLmZvckVhY2goKGNvbHVtbjpXZWF2ZVBhdGgsIGlkeDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGxldCBuYW1lOnN0cmluZyA9IGNvbHVtbi5nZXRQYXRoKCkucG9wKCk7XG4gICAgICAgICAgICBudW1lcmljTWFwcGluZ1tuYW1lXSA9IGNvbHVtbjsgLy8gYWxsIGhlaWdodCBjb2x1bW5zIGFzIG51bWVyaWMgdmFsdWUgZm9yIHRoZSBjaGFydFxuXG4gICAgICAgICAgICBpZihpZHggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnlMYWJlbENvbHVtblBhdGggPSBjb2x1bW47XG4gICAgICAgICAgICAgICAgc3RyaW5nTWFwcGluZ1tcInlMYWJlbFwiXSA9IGNvbHVtbjsgLy8gb25seSB1c2luZyB0aGUgZmlyc3QgY29sdW1uIHRvIGxhYmVsIHRoZSB5IGF4aXNcbiAgICAgICAgICAgICAgICBudW1lcmljTWFwcGluZ1tcInlMYWJlbFwiXSA9IGNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy55TGFiZWxDb2x1bW5EYXRhVHlwZSA9IHRoaXMueUxhYmVsQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ2RhdGFUeXBlJylcIik7XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMobnVtZXJpY01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcIm51bWJlclwifSk7XG4gICAgICAgIGlmKCF0aGlzLm51bWVyaWNSZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhzdHJpbmdNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJzdHJpbmdcIn0pO1xuXG4gICAgICAgIHRoaXMucmVjb3JkcyA9IF8uemlwKHRoaXMubnVtZXJpY1JlY29yZHMsIHRoaXMuc3RyaW5nUmVjb3Jkcyk7XG4gICAgICAgIHRoaXMucmVjb3JkcyA9IF8uc29ydEJ5QWxsKHRoaXMucmVjb3JkcywgW1swLCBcInNvcnRcIl0sIFswLCBcImlkXCJdXSk7XG5cbiAgICAgICAgaWYodGhpcy5yZWNvcmRzLmxlbmd0aClcbiAgICAgICAgICAgIFt0aGlzLm51bWVyaWNSZWNvcmRzLCB0aGlzLnN0cmluZ1JlY29yZHNdID0gXy51bnppcCh0aGlzLnJlY29yZHMpO1xuXG4gICAgICAgIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcbiAgICAgICAgdGhpcy54QXhpc1ZhbHVlVG9MYWJlbCA9IHt9O1xuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6UmVjb3JkLCBpbmRleDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGlmKHJlY29yZCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5VG9JbmRleFtyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmddID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleFRvS2V5W2luZGV4XSA9IHJlY29yZFtcImlkXCJdIGFzIHN0cmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICB0aGlzLnN0cmluZ1JlY29yZHMuZm9yRWFjaCgocmVjb3JkOlJlY29yZCwgaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB2YXIgbnVtZXJpY1JlY29yZDpSZWNvcmQgPSB0aGlzLm51bWVyaWNSZWNvcmRzW2luZGV4XTtcbiAgICAgICAgICAgIGlmKG51bWVyaWNSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsW251bWVyaWNSZWNvcmRbXCJ5TGFiZWxcIl0gYXMgbnVtYmVyXSA9IHJlY29yZFtcInlMYWJlbFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy54QXhpc1ZhbHVlVG9MYWJlbFtudW1lcmljUmVjb3JkW1wieExhYmVsXCJdIGFzIG51bWJlcl0gPSByZWNvcmRbXCJ4TGFiZWxcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmdyb3VwaW5nTW9kZSA9IHRoaXMucGF0aHMuZ3JvdXBpbmdNb2RlLmdldFN0YXRlKCk7XG4gICAgICAgIC8vdmFyIGhvcml6b250YWxNb2RlID0gdGhpcy5wYXRocy5wbG90dGVyLnB1c2goXCJob3Jpem9udGFsTW9kZVwiKS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIC8vIHNldCBheGlzIHJvdGF0aW9uIG1vZGVcbiAgICAgICAgLy90aGlzLmNoYXJ0LmxvYWQoe2F4ZXM6IHsgcm90YXRlZDogaG9yaXpvbnRhbE1vZGUgfX0pO1xuXG4gICAgICAgIGlmKHRoaXMuZ3JvdXBpbmdNb2RlID09PSBcInN0YWNrXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuZ3JvdXBzKFt0aGlzLmhlaWdodENvbHVtbk5hbWVzXSk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmdyb3VwaW5nTW9kZSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lmdyb3VwcyhbXSk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmdyb3VwaW5nTW9kZSA9PT0gXCJwZXJjZW50U3RhY2tcIikge1xuICAgICAgICAgICAgdGhpcy5jaGFydC5ncm91cHMoW3RoaXMuaGVpZ2h0Q29sdW1uTmFtZXNdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuZ3JvdXBpbmdNb2RlID09PSBcInBlcmNlbnRTdGFja1wiICYmIHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gbm9ybWFsaXplIHRoZSBoZWlnaHQgY29sdW1ucyB0byBiZSBwZXJjZW50YWdlcy5cbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZXMgPSB0aGlzLm51bWVyaWNSZWNvcmRzLm1hcCgocmVjb3JkOlJlY29yZCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHRzOntba2V5OnN0cmluZ106IG51bWJlcn07XG4gICAgICAgICAgICAgICAgaWYocmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodHMgPSBfLnBpY2socmVjb3JkLCB0aGlzLmhlaWdodENvbHVtbk5hbWVzKSBhcyB7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3VtOm51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIF8ua2V5cyhoZWlnaHRzKS5mb3JFYWNoKChrZXk6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gaGVpZ2h0c1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBfLmtleXMoaGVpZ2h0cykuZm9yRWFjaCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0c1trZXldID0gaGVpZ2h0c1trZXldIC8gc3VtO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaGVpZ2h0cztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzID0gbmV3VmFsdWVzO1xuICAgICAgICB9XG5cbiAgICAgICAgaW50ZXJmYWNlIEtleXMge3g6c3RyaW5nLCB2YWx1ZTpzdHJpbmdbXX07XG4gICAgICAgIHZhciBrZXlzOktleXMgPSB7eDpcIlwiLCB2YWx1ZTpbXX07XG4gICAgICAgIC8vIGlmIGxhYmVsIGNvbHVtbiBpcyBzcGVjaWZpZWRcbiAgICAgICAgaWYodGhpcy5wYXRocy5sYWJlbENvbHVtbi5nZXRTdGF0ZSgpLmxlbmd0aCkge1xuICAgICAgICAgICAga2V5cy54ID0gXCJ4TGFiZWxcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGtleXMudmFsdWUgPSB0aGlzLmhlaWdodENvbHVtbk5hbWVzO1xuICAgICAgICB2YXIgY29sb3JzOntbbmFtZTpzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgICAgICAgaWYodGhpcy5oZWlnaHRDb2x1bW5OYW1lcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yUmFtcCA9IHRoaXMucGF0aHMuY2hhcnRDb2xvcnMuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMubWFwKChuYW1lLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IFN0YW5kYXJkTGliLmludGVycG9sYXRlQ29sb3IoaW5kZXggLyAodGhpcy5oZWlnaHRDb2x1bW5OYW1lcy5sZW5ndGggLSAxKSwgdGhpcy5jb2xvclJhbXApO1xuICAgICAgICAgICAgICAgIGNvbG9yc1tuYW1lXSA9IFwiI1wiICsgU3RhbmRhcmRMaWIuZGVjaW1hbFRvSGV4KGNvbG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29sb3JzID0ge307XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0YSA9IF8uY2xvbmVEZWVwKHRoaXMuYzNDb25maWcuZGF0YSk7XG4gICAgICAgIGRhdGEuanNvbiA9IHRoaXMubnVtZXJpY1JlY29yZHM7XG4gICAgICAgIGRhdGEuY29sb3JzID0gY29sb3JzO1xuICAgICAgICBkYXRhLmtleXMgPSBrZXlzO1xuICAgICAgICBkYXRhLnVubG9hZCA9IHRydWU7XG4gICAgICAgIGRhdGEuZG9uZSA9ICgpID0+IHsgdGhpcy5idXN5ID0gZmFsc2U7IH07XG4gICAgICAgIHRoaXMuYzNDb25maWcuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuYnVzeSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hhcnQubG9hZChkYXRhKTtcbiAgICB9XG5cbiAgICBfdXBkYXRlU3R5bGUoKSB7fVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICAgICAgdmFyIG5ld0VsZW1lbnRTaXplID0gdGhpcy5nZXRFbGVtZW50U2l6ZSgpO1xuICAgICAgICBpZighXy5pc0VxdWFsKG5ld0VsZW1lbnRTaXplLCB0aGlzLmVsZW1lbnRTaXplKSkge1xuICAgICAgICAgICAgdGhpcy5jaGFydC5yZXNpemUobmV3RWxlbWVudFNpemUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG5ld0VsZW1lbnRTaXplO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIC8qIENsZWFudXAgY2FsbGJhY2tzICovXG4gICAgICAgIC8vdGhpcy50ZWFyZG93bkNhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLmNoYXJ0LmRlc3Ryb3koKTtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkTW91bnQoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdmFyIGF4aXNDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLl9heGlzQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgZGF0YUNoYW5nZWQ6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuX2RhdGFDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBoYW5kbGVTaG93VmFsdWVMYWJlbHM6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuaGFuZGxlU2hvd1ZhbHVlTGFiZWxzLmJpbmQodGhpcyksIDEwKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbktleVNldENoYW5nZWQ6RnVuY3Rpb24gPSB0aGlzLnNlbGVjdGlvbktleXNDaGFuZ2VkLmJpbmQodGhpcyk7XG4gICAgICAgIHZhciBwcm9iZUtleVNldENoYW5nZWQ6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMucHJvYmVkS2V5c0NoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIHJvdGF0ZUF4ZXM6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMucm90YXRlQXhlcy5iaW5kKHRoaXMpLCAxMCk7XG5cbiAgICAgICAgdmFyIHBsb3R0ZXJQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInBsb3RcIik7XG4gICAgICAgIHZhciBtYXBwaW5nID0gW1xuICAgICAgICAgICAgeyBuYW1lOiBcInBsb3R0ZXJcIiwgcGF0aDogcGxvdHRlclBhdGgsIGNhbGxiYWNrczogbnVsbH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiaGVpZ2h0Q29sdW1uc1wiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiaGVpZ2h0Q29sdW1uc1wiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImxhYmVsQ29sdW1uXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsYWJlbENvbHVtblwiKSwgY2FsbGJhY2tzOiBbZGF0YUNoYW5nZWQsIGF4aXNDaGFuZ2VkXSB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNvcnRDb2x1bW5cIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcInNvcnRDb2x1bW5cIiksIGNhbGxiYWNrczogW2RhdGFDaGFuZ2VkLCBheGlzQ2hhbmdlZF0gfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJjb2xvckNvbHVtblwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiY29sb3JDb2x1bW5cIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJjaGFydENvbG9yc1wiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiY2hhcnRDb2xvcnNcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJncm91cGluZ01vZGVcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImdyb3VwaW5nTW9kZVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImhvcml6b250YWxNb2RlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJob3Jpem9udGFsTW9kZVwiKSwgY2FsbGJhY2tzOiByb3RhdGVBeGVzIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwic2hvd1ZhbHVlTGFiZWxzXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJzaG93VmFsdWVMYWJlbHNcIiksIGNhbGxiYWNrczogaGFuZGxlU2hvd1ZhbHVlTGFiZWxzfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJ4QXhpc1wiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwieEF4aXNcIiksIGNhbGxiYWNrczogYXhpc0NoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJ5QXhpc1wiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwieUF4aXNcIiksIGNhbGxiYWNrczogYXhpc0NoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJmaWx0ZXJlZEtleVNldFwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWR9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInNlbGVjdGlvbktleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQsIGNhbGxiYWNrczogc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwicHJvYmVLZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQsIGNhbGxiYWNrczogcHJvYmVLZXlTZXRDaGFuZ2VkfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhdGhzKG1hcHBpbmcpO1xuICAgICAgICB0aGlzLmMzQ29uZmlnLmJpbmR0byA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgdGhpcy5jaGFydCA9IGdlbmVyYXRlKHRoaXMuYzNDb25maWcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVDM0JhcmNoYXJ0O1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6OkNvbXBvdW5kQmFyQ2hhcnRUb29sXCIsIFdlYXZlQzNCYXJjaGFydCk7XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvbG9kYXNoL2xvZGFzaC5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3Mvd2VhdmUvV2VhdmVQYXRoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9yZWFjdC11aS91aS50c3hcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LWRvbS5kLnRzXCIvPlxuXG5cblxuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vV2VhdmVUb29sXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdWkgZnJvbSBcIi4uL3JlYWN0LXVpL3VpXCI7XG5pbXBvcnQge0lBYnN0cmFjdFdlYXZlVG9vbFByb3BzLCBJQWJzdHJhY3RXZWF2ZVRvb2xQYXRoc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vdXRpbHMvU3RhbmRhcmRMaWJcIjtcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcblxuY29uc3QgU0hBUEVfVFlQRV9DSVJDTEU6c3RyaW5nID0gXCJjaXJjbGVcIjtcbmNvbnN0IFNIQVBFX1RZUEVfU1FVQVJFOnN0cmluZyA9IFwic3F1YXJlXCI7XG5jb25zdCBTSEFQRV9UWVBFX0xJTkU6c3RyaW5nID0gXCJsaW5lXCI7XG5cbmNsYXNzIFdlYXZlQzNDb2xvckxlZ2VuZCBleHRlbmRzIEFic3RyYWN0V2VhdmVUb29sIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczpJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB2YXIgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnQgPyB0aGlzLmdldEVsZW1lbnRTaXplKCkgOiBudWxsO1xuICAgICAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICAgICAgICA8Q29sb3JMZWdlbmQgdG9vbFBhdGg9e3RoaXMudG9vbFBhdGh9IHdpZHRoPXtlbGVtZW50U2l6ZS53aWR0aH0gaGVpZ2h0PXtlbGVtZW50U2l6ZS5oZWlnaHR9Lz5cbiAgICAgICAgICAgICwgdGhpcy5lbGVtZW50KTtcbiAgICB9XG59XG5cbmludGVyZmFjZSBJQ29sb3JMZWdlbmRQcm9wcyB7XG4gICAgdG9vbFBhdGg6V2VhdmVQYXRoO1xuICAgIHdpZHRoOm51bWJlcjtcbiAgICBoZWlnaHQ6bnVtYmVyO1xufVxuXG5jbGFzcyBDb2xvckxlZ2VuZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJQ29sb3JMZWdlbmRQcm9wcywgYW55PiB7XG5cbiAgICBwcml2YXRlIHBsb3R0ZXJQYXRoOldlYXZlUGF0aDtcbiAgICBwcml2YXRlIGR5bmFtaWNDb2xvckNvbHVtblBhdGg6V2VhdmVQYXRoO1xuICAgIHByaXZhdGUgYmlubmluZ0RlZmluaXRpb246V2VhdmVQYXRoO1xuICAgIHByaXZhdGUgYmlubmVkQ29sdW1uUGF0aDpXZWF2ZVBhdGg7XG4gICAgcHJpdmF0ZSBudW1iZXJPZkJpbnM6bnVtYmVyO1xuICAgIHByaXZhdGUgdG9vbFBhdGg6V2VhdmVQYXRoO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6SUNvbG9yTGVnZW5kUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICBjb25zb2xlLmxvZyhSZWFjdCk7XG4gICAgICAgIHRoaXMudG9vbFBhdGggPSBwcm9wcy50b29sUGF0aDtcbiAgICAgICAgdGhpcy5wbG90dGVyUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJwbG90XCIpO1xuICAgICAgICB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGggPSB0aGlzLnBsb3R0ZXJQYXRoLnB1c2goXCJkeW5hbWljQ29sb3JDb2x1bW5cIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuYmlubmluZ0RlZmluaXRpb24gPSB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGgucHVzaChcImludGVybmFsRHluYW1pY0NvbHVtblwiKS5wdXNoKG51bGwpLnB1c2goXCJiaW5uaW5nRGVmaW5pdGlvblwiKS5wdXNoKG51bGwpO1xuICAgICAgICB0aGlzLmJpbm5lZENvbHVtblBhdGggPSB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGgucHVzaChcImludGVybmFsRHluYW1pY0NvbHVtblwiLCBudWxsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwQ2FsbGJhY2tzKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2V0dXBDYWxsYmFja3MoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgfVxuXG4gICAgZHJhd0NvbnRpbnVvdXNQbG90KCkge1xuXG4gICAgfVxuICAgIC8vZHJhd0Jpbm5lZFBsb3QobnVtYmVyT2ZCaW5zOm51bWJlcikge1xuICAgIC8vICAgIC8vIGNsZWFyIHRoZSBzdmcgYW5kIHJlcmVuZGVyIGV2ZXJ5dGhpbmdcbiAgICAvLyAgICB0aGlzLnN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xuICAgIC8vXG4gICAgLy8gICAgdmFyIHdpZHRoOm51bWJlciA9IHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAvLyAgICB2YXIgaGVpZ2h0Om51bWJlciA9IHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgLy9cbiAgICAvLyAgICB2YXIgc2hhcGVTaXplOm51bWJlciA9IHRoaXMucGxvdHRlclBhdGguZ2V0U3RhdGUoXCJzaGFwZVNpemVcIik7XG4gICAgLy8gICAgdmFyIHNoYXBlVHlwZTpzdHJpbmcgPSB0aGlzLnBsb3R0ZXJQYXRoLmdldFN0YXRlKFwic2hhcGVUeXBlXCIpO1xuICAgIC8vXG4gICAgLy8gICAgdmFyIHJhbXA6YW55W10gPSB0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGguZ2V0U3RhdGUoXCJyYW1wXCIpO1xuICAgIC8vXG4gICAgLy8gICAgdmFyIHlTY2FsZTpGdW5jdGlvbiA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbMCwgbnVtYmVyT2ZCaW5zICsgMV0pLnJhbmdlKFswLCBoZWlnaHRdKTtcbiAgICAvL1xuICAgIC8vICAgIHZhciB5TWFwOkZ1bmN0aW9uID0gKGQ6bnVtYmVyKTpudW1iZXIgPT4geyByZXR1cm4geVNjYWxlKGQpOyB9O1xuICAgIC8vXG4gICAgLy8gICAgaWYod2lkdGggJiYgaGVpZ2h0ICYmIG51bWJlck9mQmlucykge1xuICAgIC8vICAgICAgICB0aGlzLnN2Zy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcbiAgICAvLyAgICB9XG4gICAgLy9cbiAgICAvLyAgICB0aGlzLnN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgLy8gICAgICAgICAgICAuYXR0cihcInlcIiwgeU1hcCgwLjUpKVxuICAgIC8vICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIDEwKVxuICAgIC8vICAgICAgICAgICAgLnRleHQodGhpcy5keW5hbWljQ29sb3JDb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKSlcbiAgICAvLyAgICAgICAgICAgICAuYXR0cihcImZvbnQtZmFtaWx5XCIsIFwic2Fucy1zZXJpZlwiKVxuICAgIC8vICAgICAgICAgICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIFwiMTJweFwiKTtcbiAgICAvL1xuICAgIC8vICAgIHNoYXBlU2l6ZSA9IF8ubWF4KFsxLCBfLm1pbihbc2hhcGVTaXplLCBoZWlnaHQgLyBudW1iZXJPZkJpbnNdKV0pO1xuICAgIC8vXG4gICAgLy8gICAgbGV0IHI6bnVtYmVyID0gKHNoYXBlU2l6ZSAvIDEwMCAqIGhlaWdodCAvIG51bWJlck9mQmlucykgLyAyO1xuICAgIC8vXG4gICAgLy8gICAgdmFyIHRleHRMYWJlbEZ1bmN0aW9uOkZ1bmN0aW9uID0gdGhpcy5iaW5uZWRDb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5kZXJpdmVTdHJpbmdGcm9tTnVtYmVyLmJpbmQodGhpcykgICAgICAgICAgICBcIik7XG4gICAgLy9cbiAgICAvLyAgICBmb3IodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZCaW5zOyBpKyspIHtcbiAgICAvLyAgICAgICAgc3dpdGNoKHNoYXBlVHlwZSkge1xuICAgIC8vICAgICAgICAgICAgY2FzZSBTSEFQRV9UWVBFX0NJUkNMRSA6XG4gICAgLy8gICAgICAgICAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjeFwiLCAyNSlcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImN5XCIsIHlNYXAoaSArIDEpKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCByKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCIjXCIgKyBTdGFuZGFyZExpYi5kZWNpbWFsVG9IZXgoU3RhbmRhcmRMaWIuaW50ZXJwb2xhdGVDb2xvcihTdGFuZGFyZExpYi5ub3JtYWxpemUoaSwgMCwgbnVtYmVyT2ZCaW5zIC0gMSksIHJhbXApKSlcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZShcInN0cm9rZS1vcGFjaXR5XCIsIDAuNSk7XG4gICAgLy8gICAgICAgICAgICAgICAgdGhpcy5zdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCA1MClcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgeU1hcChpICsgMSkgKyByIC8gMilcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dCh0ZXh0TGFiZWxGdW5jdGlvbihpKSlcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcImZvbnQtZmFtaWx5XCIsIFwic2Fucy1zZXJpZlwiKVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIFwiMTJweFwiKTtcbiAgICAvLyAgICAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgICAgICAgIGNhc2UgU0hBUEVfVFlQRV9TUVVBUkUgOlxuICAgIC8vICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vXG4gICAgLy8gICAgICAgICAgICBjYXNlIFNIQVBFX1RZUEVfTElORSA6XG4gICAgLy8gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgLy8gICAgICAgIH1cbiAgICAvLyAgICB9XG4gICAgLy99XG5cbiAgICBzZWxlY3Rpb25LZXlzQ2hhbmdlZCgpIHtcblxuICAgIH1cblxuICAgIHZpc3VhbGl6YXRpb25DaGFuZ2VkKCkge1xuXG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLm51bWJlck9mQmlucyA9IHRoaXMuYmlubmVkQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMubnVtYmVyT2ZCaW5zXCIpO1xuICAgICAgICBpZih0aGlzLm51bWJlck9mQmlucykge1xuICAgICAgICAgICAgLy9CaW5uZWQgcGxvdCBjYXNlXG4gICAgICAgICAgICB2YXIgd2lkdGg6bnVtYmVyID0gdGhpcy5wcm9wcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQ6bnVtYmVyID0gdGhpcy5wcm9wcy5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgc2hhcGVTaXplOm51bWJlciA9IHRoaXMucGxvdHRlclBhdGguZ2V0U3RhdGUoXCJzaGFwZVNpemVcIik7XG4gICAgICAgICAgICB2YXIgc2hhcGVUeXBlOnN0cmluZyA9IHRoaXMucGxvdHRlclBhdGguZ2V0U3RhdGUoXCJzaGFwZVR5cGVcIik7XG4gICAgICAgICAgICB2YXIgcmFtcDphbnlbXSA9IHRoaXMuZHluYW1pY0NvbG9yQ29sdW1uUGF0aC5nZXRTdGF0ZShcInJhbXBcIik7XG4gICAgICAgICAgICB2YXIgeVNjYWxlOkZ1bmN0aW9uID0gZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFswLCB0aGlzLm51bWJlck9mQmlucyArIDFdKS5yYW5nZShbMCwgaGVpZ2h0XSk7XG4gICAgICAgICAgICB2YXIgeU1hcDpGdW5jdGlvbiA9IChkOm51bWJlcik6bnVtYmVyID0+IHsgcmV0dXJuIHlTY2FsZShkKTsgfTtcblxuICAgICAgICAgICAgc2hhcGVTaXplID0gXy5tYXgoWzEsIF8ubWluKFtzaGFwZVNpemUsIGhlaWdodCAvIHRoaXMubnVtYmVyT2ZCaW5zXSldKTtcbiAgICAgICAgICAgIHZhciByOm51bWJlciA9IChzaGFwZVNpemUgLyAxMDAgKiBoZWlnaHQgLyB0aGlzLm51bWJlck9mQmlucykgLyAyO1xuICAgICAgICAgICAgdmFyIHRleHRMYWJlbEZ1bmN0aW9uOkZ1bmN0aW9uID0gdGhpcy5iaW5uZWRDb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5kZXJpdmVTdHJpbmdGcm9tTnVtYmVyLmJpbmQodGhpcykgICAgICAgICAgICBcIik7XG5cblxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzOkpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgICAgIGZvcih2YXIgaTpudW1iZXIgPSAwOyBpPHRoaXMubnVtYmVyT2ZCaW5zOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2goc2hhcGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU0hBUEVfVFlQRV9DSVJDTEUgOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8dWkuSEJveCBrZXk9e2l9IHN0eWxlPXt7d2lkdGg6XCIxMDAlXCIsZmxleDoxLjB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVpLkhCb3ggc3R5bGU9e3t3aWR0aDpcIjEwMCVcIiwgZmxleDowLjIsIHBvc2l0aW9uOlwicmVsYXRpdmVcIiwgcGFkZGluZzpcIjBweCAwcHggMHB4IDBweFwiLCBtaW5XaWR0aDpcIjEwcHhcIn19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBzdHlsZT17e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIn19IHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj48Y2lyY2xlIGN4PVwiNTAlXCIgY3k9XCI1MCVcIiByPVwiNDUlXCIgc3R5bGU9e3tmaWxsOlwiI1wiICsgU3RhbmRhcmRMaWIuZGVjaW1hbFRvSGV4KFN0YW5kYXJkTGliLmludGVycG9sYXRlQ29sb3IoU3RhbmRhcmRMaWIubm9ybWFsaXplKGksIDAsIHRoaXMubnVtYmVyT2ZCaW5zIC0gMSksIHJhbXApKSwgc3Ryb2tlOlwiYmxhY2tcIiwgc3Ryb2tlT3BhY2l0eTowLjV9fT48L2NpcmNsZT48L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91aS5IQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWkuSEJveCBzdHlsZT17e3dpZHRoOlwiMTAwJVwiLCBmbGV4OjAuOH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3t0ZXh0QWxpZ246XCJsZWZ0XCIsIHZlcnRpY2FsQWxpZ246XCJtaWRkbGVcIiwgb3ZlcmZsb3c6XCJoaWRkZW5cIiwgd2hpdGVTcGFjZTpcIm5vd3JhcFwiLCB0ZXh0T3ZlcmZsb3c6XCJlbGxpcHNpc1wifX0+e3RleHRMYWJlbEZ1bmN0aW9uKGkpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91aS5IQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD4pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTSEFQRV9UWVBFX1NRVUFSRSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIFNIQVBFX1RZUEVfTElORSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoPGRpdiBzdHlsZT17e3dpZHRoOlwiMTAwJVwiLCBoZWlnaHQ6XCIxMDAlXCJ9fT5cbiAgICAgICAgICAgICAgICA8dWkuVkJveCBzdHlsZT17e2hlaWdodDpcIjEwMCVcIixmbGV4OiAxLjB9fT5cbiAgICAgICAgICAgICAgICAgICAgPHVpLkhCb3ggc3R5bGU9e3t3aWR0aDpcIjEwMCVcIiwgZmxleDogMC4xfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj48dGV4dCB5PXt5TWFwKDAuNSl9IHg9ezEwfSBmb250RmFtaWx5PVwic2Fucy1zZXJpZlwiIGZvbnRTaXplPVwiMTJweFwiPnt0aGlzLmR5bmFtaWNDb2xvckNvbHVtblBhdGguZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpfTwvdGV4dD48L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgPC91aS5IQm94PlxuICAgICAgICAgICAgICAgICAgICA8dWkuSEJveCBzdHlsZT17e3dpZHRoOlwiMTAwJVwiLCBmbGV4OiAwLjl9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1aS5WQm94IHN0eWxlPXt7ZmxleDogMS4wfX0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICA8L3VpLlZCb3g+XG4gICAgICAgICAgICAgICAgICAgIDwvdWkuSEJveD5cbiAgICAgICAgICAgICAgICA8L3VpLlZCb3g+XG4gICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICAvL0NvbnRpbnVvdXMgcGxvdCBjYXNlXG4gICAgICAgICAgICByZXR1cm4gKDxzdmc+PC9zdmc+KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBXZWF2ZUMzQ29sb3JMZWdlbmQ7XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6Q29sb3JCaW5MZWdlbmRUb29sXCIsIFdlYXZlQzNDb2xvckxlZ2VuZCk7IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9jMy9jMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9sb2Rhc2gvbG9kYXNoLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3JlYWN0L3JlYWN0LmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3dlYXZlL1dlYXZlUGF0aC5kLnRzXCIvPlxuXG5cbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL1dlYXZlVG9vbFwiO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IEZvcm1hdFV0aWxzIGZyb20gXCIuLi91dGlscy9Gb3JtYXRVdGlsc1wiO1xuaW1wb3J0IFN0YW5kYXJkTGliIGZyb20gXCIuLi91dGlscy9TdGFuZGFyZExpYlwiXG5pbXBvcnQge0lBYnN0cmFjdFdlYXZlVG9vbFByb3BzfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQYXRoc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7RWxlbWVudFNpemV9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0NoYXJ0Q29uZmlndXJhdGlvbiwgQ2hhcnRBUEksIGdlbmVyYXRlfSBmcm9tIFwiYzNcIjtcbmltcG9ydCB7TW91c2VFdmVudH0gZnJvbSBcInJlYWN0XCI7XG5cbmludGVyZmFjZSBJSGlzdG9ncmFtUGF0aHMgZXh0ZW5kcyBJQWJzdHJhY3RXZWF2ZVRvb2xQYXRocyB7XG4gICAgcGxvdHRlcjogV2VhdmVQYXRoO1xuICAgIGJpbm5lZENvbHVtbjogV2VhdmVQYXRoO1xuICAgIGNvbHVtblRvQWdncmVnYXRlOiBXZWF2ZVBhdGg7XG4gICAgYWdncmVnYXRpb25NZXRob2Q6IFdlYXZlUGF0aDtcbiAgICBmaWxsU3R5bGU6IFdlYXZlUGF0aDtcbiAgICBsaW5lU3R5bGU6IFdlYXZlUGF0aDtcbiAgICB4QXhpczogV2VhdmVQYXRoO1xuICAgIHlBeGlzOiBXZWF2ZVBhdGg7XG4gICAgZmlsdGVyZWRLZXlTZXQ6IFdlYXZlUGF0aDtcbiAgICBzZWxlY3Rpb25LZXlTZXQ6IFdlYXZlUGF0aDtcbiAgICBwcm9iZUtleVNldDogV2VhdmVQYXRoO1xufVxuXG5jbGFzcyBXZWF2ZUMzSGlzdG9ncmFtIGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuICAgIHByaXZhdGUgYnVzeTpib29sZWFuO1xuICAgIHByaXZhdGUgaWRUb1JlY29yZDp7W2lkOnN0cmluZ106IFJlY29yZH07XG4gICAgcHJpdmF0ZSBrZXlUb0luZGV4Ontba2V5OnN0cmluZ106IG51bWJlcn07XG4gICAgcHJpdmF0ZSBpbmRleFRvS2V5OntbaW5kZXg6bnVtYmVyXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIHN0cmluZ1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSBudW1lcmljUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIGhlaWdodENvbHVtbk5hbWVzOnN0cmluZ1tdO1xuICAgIHByaXZhdGUgYmlubmVkQ29sdW1uRGF0YVR5cGU6c3RyaW5nO1xuICAgIHByaXZhdGUgbnVtYmVyT2ZCaW5zOm51bWJlcjtcbiAgICBwcml2YXRlIGhpc3REYXRhOnt9W107XG4gICAgcHJpdmF0ZSBjM0NvbmZpZzpDaGFydENvbmZpZ3VyYXRpb247XG4gICAgcHJpdmF0ZSBjaGFydDpDaGFydEFQSTtcblxuICAgIHByb3RlY3RlZCBwYXRoczpJSGlzdG9ncmFtUGF0aHM7XG5cbiAgICBwcml2YXRlIGtleURvd246Ym9vbGVhbjtcbiAgICBwcml2YXRlIGZsYWc6Ym9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklBYnN0cmFjdFdlYXZlVG9vbFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5idXN5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaWRUb1JlY29yZCA9IHt9O1xuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZyA9IHtcbiAgICAgICAgICAgIC8vc2l6ZTogdGhpcy5nZXRFbGVtZW50U2l6ZSgpLFxuICAgICAgICAgICAgcGFkZGluZzoge1xuICAgICAgICAgICAgICAgIHRvcDogMjAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAyMCxcbiAgICAgICAgICAgICAgICByaWdodDogMzBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYmFyXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IChjb2xvcjpzdHJpbmcsIGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVjQ29sb3I6bnVtYmVyID0gdGhpcy5wYXRocy5maWxsU3R5bGUucHVzaChcImNvbG9yXCIpLnB1c2goXCJpbnRlcm5hbER5bmFtaWNDb2x1bW5cIiwgbnVsbCkuZ2V0VmFsdWUoXCJ0aGlzLmdldENvbG9yRnJvbURhdGFWYWx1ZS5iaW5kKHRoaXMpXCIpKGQuaW5kZXgpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiNcIiArIFN0YW5kYXJkTGliLmRlY2ltYWxUb0hleChkZWNDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiI0MwQ0REMVwiO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25jbGljazogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmtleURvd24gJiYgZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZElkczpzdHJpbmdbXSA9IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLmdldFZhbHVlKFwidGhpcy5nZXRLZXlzRnJvbUJpbkluZGV4LmJpbmQodGhpcylcIikoZC5pbmRleCkubWFwKCAocUtleTp7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvb2xQYXRoLnFrZXlUb1N0cmluZyhxS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoc2VsZWN0ZWRJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnNlbGVjdGVkOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZElkczpzdHJpbmdbXSA9IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLmdldFZhbHVlKFwidGhpcy5nZXRLZXlzRnJvbUJpbkluZGV4LmJpbmQodGhpcylcIikoZC5pbmRleCkubWFwKCAocUtleTp7fSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvb2xQYXRoLnFrZXlUb1N0cmluZyhxS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmFkZEtleXMoc2VsZWN0ZWRJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnVuc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVuU2VsZWN0ZWRJZHM6c3RyaW5nW10gPSB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0S2V5c0Zyb21CaW5JbmRleC5iaW5kKHRoaXMpXCIpKGQuaW5kZXgpLm1hcCggKHFLZXk6e30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b29sUGF0aC5xa2V5VG9TdHJpbmcocUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5yZW1vdmVLZXlzKHVuU2VsZWN0ZWRJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3ZlcjogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJZHM6c3RyaW5nW10gPSB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0S2V5c0Zyb21CaW5JbmRleC5iaW5kKHRoaXMpXCIpKGQuaW5kZXgpLm1hcCggKHFLZXk6e30pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b29sUGF0aC5xa2V5VG9TdHJpbmcocUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoc2VsZWN0ZWRJZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3V0OiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmR0bzogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNhdGVnb3J5XCIsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwib3V0ZXItY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bTpudW1iZXIpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLmdldFZhbHVlKFwidGhpcy5kZXJpdmVTdHJpbmdGcm9tTnVtYmVyLmJpbmQodGhpcylcIikobnVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLW1pZGRsZVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChudW06bnVtYmVyKTpzdHJpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoRm9ybWF0VXRpbHMuZGVmYXVsdE51bWJlckZvcm1hdHRpbmcobnVtKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJvdGF0ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJhcjoge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB7XG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiAwLjk1XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ucmVuZGVyZWQ6IHRoaXMuX3VwZGF0ZVN0eWxlLmJpbmQodGhpcylcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfc2VsZWN0aW9uS2V5c0NoYW5nZWQgKCkge1xuICAgICAgICBpZighdGhpcy5jaGFydClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgc2VsZWN0ZWRLZXlzOnN0cmluZ1tdID0gdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmdldEtleXMoKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkUmVjb3JkczpSZWNvcmRbXSA9IF8uZmlsdGVyKHRoaXMubnVtZXJpY1JlY29yZHMsIGZ1bmN0aW9uKHJlY29yZDpSZWNvcmQpIHtcbiAgICAgICAgICAgIHJldHVybiBfLmluY2x1ZGVzKHNlbGVjdGVkS2V5cywgcmVjb3JkW1wiaWRcIl0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHNlbGVjdGVkQmluSW5kaWNlczpudW1iZXJbXSA9IF8ucGx1Y2soXy51bmlxKHNlbGVjdGVkUmVjb3JkcywgJ2Jpbm5lZENvbHVtbicpLCAnYmlubmVkQ29sdW1uJyk7XG4gICAgICAgIHZhciBiaW5JbmRpY2VzOm51bWJlcltdID0gXy5wbHVjayhfLnVuaXEodGhpcy5udW1lcmljUmVjb3JkcywgJ2Jpbm5lZENvbHVtbicpLCAnYmlubmVkQ29sdW1uJyk7XG4gICAgICAgIHZhciB1bnNlbGVjdGVkQmluSW5kaWNlczpudW1iZXJbXSA9IF8uZGlmZmVyZW5jZShiaW5JbmRpY2VzLHNlbGVjdGVkQmluSW5kaWNlcyk7XG5cbiAgICAgICAgaWYoc2VsZWN0ZWRCaW5JbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkQmluSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAwLjN9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRCaW5JbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDEuMH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoYmluSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2VsZWN0KHRoaXMuaGVpZ2h0Q29sdW1uTmFtZXMsIFtdLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcm9iZWRLZXlzQ2hhbmdlZCAoKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZEtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZFJlY29yZHM6UmVjb3JkW10gPSBfLmZpbHRlcih0aGlzLm51bWVyaWNSZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQ6UmVjb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5pbmNsdWRlcyhzZWxlY3RlZEtleXMsIHJlY29yZFtcImlkXCJdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzZWxlY3RlZEJpbkluZGljZXM6bnVtYmVyW10gPSBfLnBsdWNrKF8udW5pcShzZWxlY3RlZFJlY29yZHMsICdiaW5uZWRDb2x1bW4nKSwgJ2Jpbm5lZENvbHVtbicpO1xuICAgICAgICB2YXIgYmluSW5kaWNlczpudW1iZXJbXSA9IF8ucGx1Y2soXy51bmlxKHRoaXMubnVtZXJpY1JlY29yZHMsICdiaW5uZWRDb2x1bW4nKSwgJ2Jpbm5lZENvbHVtbicpO1xuICAgICAgICB2YXIgdW5zZWxlY3RlZEJpbkluZGljZXM6bnVtYmVyW10gPSBfLmRpZmZlcmVuY2UoYmluSW5kaWNlcyxzZWxlY3RlZEJpbkluZGljZXMpO1xuXG4gICAgICAgIGlmKHNlbGVjdGVkQmluSW5kaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUodW5zZWxlY3RlZEJpbkluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMC4zfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHNlbGVjdGVkQmluSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayhldmVudDpNb3VzZUV2ZW50KSB7XG4gICAgICAgIGlmKCF0aGlzLmZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYWcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0b2dnbGVLZXkoZXZlbnQ6S2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZigoZXZlbnQua2V5Q29kZSA9PT0gMTcpfHwoZXZlbnQua2V5Q29kZSA9PT0gOTEpIHx8IChldmVudC5rZXlDb2RlID09PSAyMjQpKSB7XG4gICAgICAgICAgICB0aGlzLmtleURvd24gPSAhdGhpcy5rZXlEb3duO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcm90YXRlQXhlcygpIHtcbiAgICAgICAgLy90aGlzLmMzQ29uZmlnLmF4aXMucm90YXRlZCA9IHRydWU7XG4gICAgICAgIC8vdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cblxuICAgIF9heGlzQ2hhbmdlZCAoKSB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmKHRoaXMuYnVzeSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLmNoYXJ0LmF4aXMubGFiZWxzKHtcbiAgICAgICAgICAgIHg6IHRoaXMucGF0aHMueEF4aXMucHVzaChcIm92ZXJyaWRlQXhpc05hbWVcIikuZ2V0U3RhdGUoKSB8fCB0aGlzLnBhdGhzLmJpbm5lZENvbHVtbi5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIiksXG4gICAgICAgICAgICB5OiBmdW5jdGlvbigpOnN0cmluZyB7XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJyaWRlQXhpc05hbWUgPSB0aGlzLnBhdGhzLnlBeGlzLnB1c2goXCJvdmVycmlkZUF4aXNOYW1lXCIpLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaWYob3ZlcnJpZGVBeGlzTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3ZlcnJpZGVBeGlzTmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnBhdGhzLmNvbHVtblRvQWdncmVnYXRlLmdldFN0YXRlKCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGhpcy5wYXRocy5hZ2dyZWdhdGlvbk1ldGhvZC5nZXRTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvdW50XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIk51bWJlciBvZiByZWNvcmRzXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN1bVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJTdW0gb2YgXCIgKyB0aGlzLnBhdGhzLmNvbHVtblRvQWdncmVnYXRlLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWVhblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJNZWFuIG9mIFwiICsgdGhpcy5wYXRocy5jb2x1bW5Ub0FnZ3JlZ2F0ZS5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJOdW1iZXIgb2YgcmVjb3Jkc1wiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZVN0eWxlKCkge1xuXG4gICAgfVxuXG4gICAgX2RhdGFDaGFuZ2VkKCkge1xuXG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZih0aGlzLmJ1c3kpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBudW1lcmljTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBiaW5uZWRDb2x1bW46IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLFxuICAgICAgICAgICAgY29sdW1uVG9BZ2dyZWdhdGU6IHRoaXMucGF0aHMuY29sdW1uVG9BZ2dyZWdhdGVcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3RyaW5nTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBiaW5uZWRDb2x1bW46IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5iaW5uZWRDb2x1bW5EYXRhVHlwZSA9IHRoaXMucGF0aHMuYmlubmVkQ29sdW1uLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgnZGF0YVR5cGUnKVwiKTtcblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhudW1lcmljTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwibnVtYmVyXCJ9KTtcbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhzdHJpbmdNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJzdHJpbmdcIn0pO1xuXG4gICAgICAgIHRoaXMuaWRUb1JlY29yZCA9IHt9O1xuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6UmVjb3JkLCBpbmRleDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWRUb1JlY29yZFtyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmddID0gcmVjb3JkO1xuICAgICAgICAgICAgdGhpcy5rZXlUb0luZGV4W3JlY29yZFtcImlkXCJdIGFzIHN0cmluZ10gPSBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhUb0tleVtpbmRleF0gPSByZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubnVtYmVyT2ZCaW5zID0gdGhpcy5wYXRocy5iaW5uZWRDb2x1bW4uZ2V0VmFsdWUoXCJ0aGlzLm51bWJlck9mQmluc1wiKTtcblxuICAgICAgICB0aGlzLmhpc3REYXRhID0gW107XG5cbiAgICAgICAgLy8gdGhpcy5fY29sdW1uVG9BZ2dyZWdhdGVQYXRoLmdldFZhbHVlKFwidGhpcy5nZXRJbnRlcm5hbENvbHVtbigpXCIpO1xuICAgICAgICB2YXIgY29sdW1uVG9BZ2dyZWdhdGVOYW1lSXNEZWZpbmVkOmJvb2xlYW4gPSB0aGlzLnBhdGhzLmNvbHVtblRvQWdncmVnYXRlLmdldFN0YXRlKCkubGVuZ3RoID4gMDtcblxuICAgICAgICBmb3IobGV0IGlCaW46bnVtYmVyID0gMDsgaUJpbiA8IHRoaXMubnVtYmVyT2ZCaW5zOyBpQmluKyspIHtcblxuICAgICAgICAgICAgbGV0IHJlY29yZHNJbkJpbjpSZWNvcmRbXSA9IF8uZmlsdGVyKHRoaXMubnVtZXJpY1JlY29yZHMsIHsgYmlubmVkQ29sdW1uOiBpQmluIH0pO1xuXG4gICAgICAgICAgICBpZihyZWNvcmRzSW5CaW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgb2JqOmFueSA9IHtoZWlnaHQ6MH07XG4gICAgICAgICAgICAgICAgaWYoY29sdW1uVG9BZ2dyZWdhdGVOYW1lSXNEZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWlnaHQgPSB0aGlzLmdldEFnZ3JlZ2F0ZVZhbHVlKHJlY29yZHNJbkJpbiwgXCJjb2x1bW5Ub0FnZ3JlZ2F0ZVwiLCB0aGlzLnBhdGhzLmFnZ3JlZ2F0aW9uTWV0aG9kLmdldFN0YXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3REYXRhLnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmouaGVpZ2h0ID0gdGhpcy5nZXRBZ2dyZWdhdGVWYWx1ZShyZWNvcmRzSW5CaW4sIFwiYmlubmVkQ29sdW1uXCIsIFwiY291bnRcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdERhdGEucHVzaChvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBrZXlzID0geyB2YWx1ZTogW1wiaGVpZ2h0XCJdIH07XG4gICAgICAgIHRoaXMuX2F4aXNDaGFuZ2VkKCk7XG4gICAgICAgIHRoaXMuYnVzeSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hhcnQubG9hZCh7anNvbjogdGhpcy5oaXN0RGF0YSwga2V5cywgdW5sb2FkOiB0cnVlLCBkb25lOiAoKSA9PiB7IHRoaXMuYnVzeSA9IGZhbHNlOyB9fSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBZ2dyZWdhdGVWYWx1ZShyZWNvcmRzOlJlY29yZFtdLCBjb2x1bW5Ub0FnZ3JlZ2F0ZU5hbWU6c3RyaW5nLCBhZ2dyZWdhdGlvbk1ldGhvZDpXZWF2ZVBhdGgpOm51bWJlciB7XG5cbiAgICAgICAgdmFyIGNvdW50Om51bWJlciA9IDA7XG4gICAgICAgIHZhciBzdW06bnVtYmVyID0gMDtcblxuICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZWNvcmRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICByZWNvcmRzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIHN1bSArPSByZWNvcmRbY29sdW1uVG9BZ2dyZWdhdGVOYW1lXSBhcyBudW1iZXI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChhZ2dyZWdhdGlvbk1ldGhvZCA9PT0gXCJtZWFuXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdW0gLyBjb3VudDsgLy8gY29udmVydCBzdW0gdG8gbWVhblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFnZ3JlZ2F0aW9uTWV0aG9kID09PSBcImNvdW50XCIpIHtcblxuICAgICAgICAgICAgcmV0dXJuIGNvdW50OyAvLyB1c2UgY291bnQgb2YgZmluaXRlIHZhbHVlc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3VtXG4gICAgICAgIHJldHVybiBzdW07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImNvbXBvbmVudCBkaWQgdXBkYXRlXCIpO1xuICAgICAgICAvL3ZhciBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBuZXdFbGVtZW50U2l6ZSA9IHRoaXMuZ2V0RWxlbWVudFNpemUoKTtcbiAgICAgICAgaWYoIV8uaXNFcXVhbChuZXdFbGVtZW50U2l6ZSwgdGhpcy5lbGVtZW50U2l6ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQucmVzaXplKG5ld0VsZW1lbnRTaXplKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvL3ZhciBlbmQgPSBEYXRlLm5vdygpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKGVuZCAtIHN0YXJ0KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgLyogQ2xlYW51cCBjYWxsYmFja3MgKi9cbiAgICAgICAgLy90aGlzLnRlYXJkb3duQ2FsbGJhY2tzKCk7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG4gICAgICAgIHRoaXMuY2hhcnQuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRNb3VudCgpO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIHZhciBheGlzQ2hhbmdlZDpGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5fYXhpc0NoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIGRhdGFDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLl9kYXRhQ2hhbmdlZC5iaW5kKHRoaXMpLCAxMDApO1xuICAgICAgICB2YXIgc2VsZWN0aW9uS2V5U2V0Q2hhbmdlZDpGdW5jdGlvbiA9IHRoaXMuX3NlbGVjdGlvbktleXNDaGFuZ2VkLmJpbmQodGhpcyk7XG4gICAgICAgIHZhciBwcm9iZUtleVNldENoYW5nZWQ6RnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuX3Byb2JlZEtleXNDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBwbG90dGVyUGF0aCA9IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJwbG90XCIpO1xuICAgICAgICB2YXIgbWFwcGluZyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogXCJwbG90dGVyXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLCBjYWxsYmFja3M6IG51bGx9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImJpbm5lZENvbHVtblwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiYmlubmVkQ29sdW1uXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZCwgYXhpc0NoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiY29sdW1uVG9BZ2dyZWdhdGVcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImNvbHVtblRvQWdncmVnYXRlXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiYWdncmVnYXRpb25NZXRob2RcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImFnZ3JlZ2F0aW9uTWV0aG9kXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZCwgYXhpc0NoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZmlsbFN0eWxlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWxsU3R5bGVcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJsaW5lU3R5bGVcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImxpbmVTdHlsZVwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInhBeGlzXCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJ4QXhpc1wiKSwgY2FsbGJhY2tzOiBheGlzQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcInlBeGlzXCIsIHBhdGg6IHRoaXMudG9vbFBhdGgucHVzaFBsb3R0ZXIoXCJ5QXhpc1wiKSwgY2FsbGJhY2tzOiBheGlzQ2hhbmdlZCB9LFxuICAgICAgICAgICAgeyBuYW1lOiBcImZpbHRlcmVkS2V5U2V0XCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWx0ZXJlZEtleVNldFwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwic2VsZWN0aW9uS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldCwgY2FsbGJhY2tzOiBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJwcm9iZUtleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldCwgY2FsbGJhY2tzOiBwcm9iZUtleVNldENoYW5nZWR9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplUGF0aHMobWFwcGluZyk7XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZy5iaW5kdG8gPSB0aGlzLmVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5jaGFydCA9IGdlbmVyYXRlKHRoaXMuYzNDb25maWcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVDM0hpc3RvZ3JhbTtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpIaXN0b2dyYW1Ub29sXCIsIFdlYXZlQzNIaXN0b2dyYW0pO1xuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvYzMvYzMuZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2QzL2QzLmQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9yZWFjdC9yZWFjdC5kLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3Mvd2VhdmUvV2VhdmVQYXRoLmQudHNcIi8+XG5cbmltcG9ydCB7Q2hhcnRBUEksIENoYXJ0Q29uZmlndXJhdGlvbiwgZ2VuZXJhdGV9IGZyb20gXCJjM1wiO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQcm9wcywgSUFic3RyYWN0V2VhdmVUb29sUGF0aHN9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0VsZW1lbnRTaXplfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vV2VhdmVUb29sXCI7XG5cbmludGVyZmFjZSBJUGllQ2hhcnRQYXRocyBleHRlbmRzIElBYnN0cmFjdFdlYXZlVG9vbFBhdGhzIHtcbiAgICBwbG90dGVyOiBXZWF2ZVBhdGg7XG4gICAgZGF0YTogV2VhdmVQYXRoO1xuICAgIGxhYmVsOiBXZWF2ZVBhdGg7XG4gICAgZmlsbFN0eWxlOldlYXZlUGF0aDtcbiAgICBsaW5lU3R5bGU6V2VhdmVQYXRoO1xuICAgIGlubmVyUmFkaXVzOldlYXZlUGF0aDtcbiAgICBmaWx0ZXJlZEtleVNldDpXZWF2ZVBhdGg7XG4gICAgc2VsZWN0aW9uS2V5U2V0OldlYXZlUGF0aDtcbiAgICBwcm9iZUtleVNldDpXZWF2ZVBhdGg7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWF2ZUMzUGllQ2hhcnQgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG5cbiAgICBwcml2YXRlIGtleVRvSW5kZXg6e1trZXk6c3RyaW5nXTogbnVtYmVyfTtcbiAgICBwcml2YXRlIGluZGV4VG9LZXk6e1tpbmRleDpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgY2hhcnQ6Q2hhcnRBUEk7XG4gICAgcHJpdmF0ZSBjM0NvbmZpZzpDaGFydENvbmZpZ3VyYXRpb247XG4gICAgcHJpdmF0ZSBrZXlEb3duOmJvb2xlYW47XG4gICAgcHJvdGVjdGVkIHBhdGhzOklQaWVDaGFydFBhdGhzO1xuICAgIHByaXZhdGUgZmxhZzpib29sZWFuO1xuICAgIHByaXZhdGUgbnVtZXJpY1JlY29yZHM6UmVjb3JkW107XG4gICAgcHJpdmF0ZSBzdHJpbmdSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgY29sb3JzOntba2V5OnN0cmluZ10gOiBzdHJpbmd9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6SUFic3RyYWN0V2VhdmVUb29sUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2VsZWN0aW9uS2V5c0NoYW5nZWQoKTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuY2hhcnQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIGtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICBpZihrZXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jaGFydC5mb2N1cyhrZXlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcHJvYmVkS2V5c0NoYW5nZWQoKTp2b2lkIHtcbiAgICAgICAgdmFyIGtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5nZXRLZXlzKCk7XG5cbiAgICAgICAgaWYoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuZm9jdXMoa2V5cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbktleXNDaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVN0eWxlKCk6dm9pZCB7XG5cbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayhldmVudDpSZWFjdC5Nb3VzZUV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuZmxhZykge1xuICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW10pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdG9nZ2xlS2V5KGV2ZW50OktleWJvYXJkRXZlbnQpOnZvaWQge1xuICAgICAgICBpZigoZXZlbnQua2V5Q29kZSA9PT0gMTcpfHwoZXZlbnQua2V5Q29kZSA9PT0gOTEpIHx8IChldmVudC5rZXlDb2RlID09PSAyMjQpKSB7XG4gICAgICAgICAgICB0aGlzLmtleURvd24gPSAhdGhpcy5rZXlEb3duO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkYXRhQ2hhbmdlZCgpOnZvaWQge1xuXG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGxldCBudW1lcmljTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBkYXRhOiB0aGlzLnBhdGhzLmRhdGFcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgc3RyaW5nTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBmaWxsOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMucGF0aHMuZmlsbFN0eWxlLnB1c2goXCJjb2xvclwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbmU6IHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnBhdGhzLmxhYmVsXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhudW1lcmljTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwibnVtYmVyXCJ9KTtcbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhzdHJpbmdNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJzdHJpbmdcIn0pO1xuXG4gICAgICAgIHRoaXMua2V5VG9JbmRleCA9IHt9O1xuICAgICAgICB0aGlzLmluZGV4VG9LZXkgPSB7fTtcblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzLmZvckVhY2goIChyZWNvcmQ6UmVjb3JkLCBpbmRleDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhUb0tleVtpbmRleF0gPSByZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICB0aGlzLmtleVRvSW5kZXhbcmVjb3JkW1wiaWRcIl0gYXMgc3RyaW5nXSA9IGluZGV4O1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY29sdW1uczpbc3RyaW5nLCBudW1iZXJdW10gPSBbXTtcblxuICAgICAgICBjb2x1bW5zID0gdGhpcy5udW1lcmljUmVjb3Jkcy5tYXAoZnVuY3Rpb24ocmVjb3JkOlJlY29yZCkge1xuICAgICAgICAgICAgdmFyIHRlbXBBcnI6W3N0cmluZywgbnVtYmVyXSA9IFtyZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmcsIHJlY29yZFtcImRhdGFcIl0gYXMgbnVtYmVyXTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wQXJyO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY2hhcnRUeXBlOnN0cmluZyA9IFwicGllXCI7XG5cbiAgICAgICAgaWYodGhpcy5wYXRocy5wbG90dGVyLmdldFN0YXRlKFwiaW5uZXJSYWRpdXNcIikgPiAwKSB7XG4gICAgICAgICAgICBjaGFydFR5cGUgPSBcImRvbnV0XCJcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29sb3JzID0ge31cbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzLmZvckVhY2goKHJlY29yZDpSZWNvcmQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29sb3JzW3JlY29yZFtcImlkXCJdIGFzIHN0cmluZ10gPSAocmVjb3JkW1wiZmlsbFwiXSBhcyBSZWNvcmQpW1wiY29sb3JcIl0gYXMgc3RyaW5nIHx8IFwiI0MwQ0REMVwiO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNoYXJ0LmxvYWQoe1xuICAgICAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgICAgIHR5cGU6IGNoYXJ0VHlwZSxcbiAgICAgICAgICAgIGNvbG9yczogdGhpcy5jb2xvcnMsXG4gICAgICAgICAgICB1bmxvYWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCk6dm9pZCB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZFVwZGF0ZSgpO1xuXG4gICAgICAgIHZhciBuZXdFbGVtZW50U2l6ZTpFbGVtZW50U2l6ZSA9IHRoaXMuZ2V0RWxlbWVudFNpemUoKTtcbiAgICAgICAgaWYoIV8uaXNFcXVhbChuZXdFbGVtZW50U2l6ZSwgdGhpcy5lbGVtZW50U2l6ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQucmVzaXplKG5ld0VsZW1lbnRTaXplKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6dm9pZCB7XG4gICAgICAgIC8qIENsZWFudXAgY2FsbGJhY2tzICovXG4gICAgICAgIC8vdGhpcy50ZWFyZG93bkNhbGxiYWNrcygpO1xuICAgICAgICBzdXBlci5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgICAgICB0aGlzLmNoYXJ0LmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkTW91bnQoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy50b2dnbGVLZXkuYmluZCh0aGlzKSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdmFyIGRhdGFDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLmRhdGFDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkOkZ1bmN0aW9uID0gdGhpcy5zZWxlY3Rpb25LZXlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgcHJvYmVLZXlTZXRDaGFuZ2VkOkZ1bmN0aW9uID0gXy5kZWJvdW5jZSh0aGlzLnByb2JlZEtleXNDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBwbG90dGVyUGF0aDpXZWF2ZVBhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwicGxvdFwiKTtcbiAgICAgICAgdmFyIG1hbmlmZXN0ID0gW1xuICAgICAgICAgIHsgbmFtZTogXCJwbG90dGVyXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLCBjYWxsYmFja3M6IG51bGx9LFxuICAgICAgICAgIHsgbmFtZTogXCJkYXRhXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJkYXRhXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImxhYmVsXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsYWJlbFwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgIHsgbmFtZTogXCJmaWxsU3R5bGVcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImZpbGxcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwibGluZVN0eWxlXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsaW5lXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImlubmVyUmFkaXVzXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJpbm5lclJhZGl1c1wiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgIHsgbmFtZTogXCJmaWx0ZXJlZEtleVNldFwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICB7IG5hbWU6IFwic2VsZWN0aW9uS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldCwgY2FsbGJhY2tzOiBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkfSxcbiAgICAgICAgICB7IG5hbWU6IFwicHJvYmVLZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQsIGNhbGxiYWNrczogcHJvYmVLZXlTZXRDaGFuZ2VkfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhdGhzKG1hbmlmZXN0KTtcblxuICAgICAgICB0aGlzLmMzQ29uZmlnID0ge1xuICAgICAgICAgICAgLy9zaXplOiB0aGlzLmdldEVsZW1lbnRTaXplKCksXG4gICAgICAgICAgICBiaW5kdG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgIHBhZGRpbmc6IHtcbiAgICAgICAgICAgICAgdG9wOiAyMCxcbiAgICAgICAgICAgICAgYm90dG9tOiAyMCxcbiAgICAgICAgICAgICAgcmlnaHQ6IDMwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgdHlwZTogXCJwaWVcIixcbiAgICAgICAgICAgICAgIG9uY2xpY2s6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICBpZighdGhpcy5rZXlEb3duICYmIGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25zZWxlY3RlZDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuYWRkS2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9udW5zZWxlY3RlZDogKGQ6YW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGQgaGFzIGEgZGlmZmVyZW50IHN0cnVjdHVyZSB0aGFuIFwib25zZWxlY3RlZFwiIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ubW91c2VvdmVyOiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3V0OiAoZDphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBpZToge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKHZhbHVlOm51bWJlciwgcmF0aW86bnVtYmVyLCBpZDpzdHJpbmcpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0cmluZ1JlY29yZHMgJiYgdGhpcy5zdHJpbmdSZWNvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmQ6UmVjb3JkID0gdGhpcy5zdHJpbmdSZWNvcmRzW3RoaXMua2V5VG9JbmRleFtpZF1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlY29yZCAmJiByZWNvcmRbXCJsYWJlbFwiXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjb3JkW1wibGFiZWxcIl0gYXMgc3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb251dDoge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKHZhbHVlOm51bWJlciwgcmF0aW86bnVtYmVyLCBpZDpzdHJpbmcpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN0cmluZ1JlY29yZHMgJiYgdGhpcy5zdHJpbmdSZWNvcmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmQgPSB0aGlzLnN0cmluZ1JlY29yZHNbdGhpcy5rZXlUb0luZGV4W2lkXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVjb3JkICYmIHJlY29yZFtcImxhYmVsXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWNvcmRbXCJsYWJlbFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXJlZDogdGhpcy51cGRhdGVTdHlsZS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhcnQgPSBnZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICB9XG59XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6UGllQ2hhcnRUb29sXCIsIFdlYXZlQzNQaWVDaGFydCk7XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2MzL2MzLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2QzL2QzLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvcmVhY3QvcmVhY3QuZC50c1wiLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3Mvd2VhdmUvV2VhdmVQYXRoLmQudHNcIi8+XG5cblxuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vV2VhdmVUb29sXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0IEZvcm1hdFV0aWxzIGZyb20gXCIuLi91dGlscy9Gb3JtYXRVdGlsc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge0lBYnN0cmFjdFdlYXZlVG9vbFByb3BzfSBmcm9tIFwiLi9BYnN0cmFjdFdlYXZlVG9vbFwiO1xuaW1wb3J0IHtJQWJzdHJhY3RXZWF2ZVRvb2xQYXRoc30gZnJvbSBcIi4vQWJzdHJhY3RXZWF2ZVRvb2xcIjtcbmltcG9ydCB7RWxlbWVudFNpemV9IGZyb20gXCIuL0Fic3RyYWN0V2VhdmVUb29sXCI7XG5pbXBvcnQge0NoYXJ0Q29uZmlndXJhdGlvbiwgQ2hhcnRBUEksIGdlbmVyYXRlfSBmcm9tIFwiYzNcIjtcbmltcG9ydCB7TW91c2VFdmVudH0gZnJvbSBcInJlYWN0XCI7XG5cbmludGVyZmFjZSBJQ29sdW1uU3RhdHMge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSVNjYXR0ZXJwbG90UGF0aHMgZXh0ZW5kcyBJQWJzdHJhY3RXZWF2ZVRvb2xQYXRocyB7XG4gICAgcGxvdHRlcjogV2VhdmVQYXRoO1xuICAgIGRhdGFYOiBXZWF2ZVBhdGg7XG4gICAgZGF0YVk6IFdlYXZlUGF0aDtcbiAgICBzaXplQnk6IFdlYXZlUGF0aDtcbiAgICBmaWxsOiBXZWF2ZVBhdGg7XG4gICAgbGluZTogV2VhdmVQYXRoO1xuICAgIHhBeGlzOiBXZWF2ZVBhdGg7XG4gICAgeUF4aXM6IFdlYXZlUGF0aDtcbiAgICBmaWx0ZXJlZEtleVNldDogV2VhdmVQYXRoO1xuICAgIHNlbGVjdGlvbktleVNldDogV2VhdmVQYXRoO1xuICAgIHByb2JlS2V5U2V0OiBXZWF2ZVBhdGg7XG59XG5cbi8qIHByaXZhdGVcbiAqIEBwYXJhbSByZWNvcmRzIGFycmF5IG9yIHJlY29yZHNcbiAqIEBwYXJhbSBhdHRyaWJ1dGVzIGFycmF5IG9mIGF0dHJpYnV0ZXMgdG8gYmUgbm9ybWFsaXplZFxuICovXG5jbGFzcyBXZWF2ZUMzU2NhdHRlclBsb3QgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG5cbiAgICBwcml2YXRlIGtleVRvSW5kZXg6e1trZXk6c3RyaW5nXTogbnVtYmVyfTtcbiAgICBwcml2YXRlIGluZGV4VG9LZXk6e1tpbmRleDpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgeEF4aXNWYWx1ZVRvTGFiZWw6e1t2YWx1ZTpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgeUF4aXNWYWx1ZVRvTGFiZWw6e1t2YWx1ZTpudW1iZXJdOiBzdHJpbmd9O1xuICAgIHByaXZhdGUgY2hhcnQ6Q2hhcnRBUEk7XG4gICAgcHJpdmF0ZSBkYXRhWFR5cGU6c3RyaW5nO1xuICAgIHByaXZhdGUgZGF0YVlUeXBlOnN0cmluZztcbiAgICBwcml2YXRlIG51bWVyaWNSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgc3RyaW5nUmVjb3JkczpSZWNvcmRbXTtcbiAgICBwcml2YXRlIG5vcm1hbGl6ZWRSZWNvcmRzOlJlY29yZFtdO1xuICAgIHByaXZhdGUgcmVjb3JkczpSZWNvcmRbXVtdO1xuXG4gICAgcHJvdGVjdGVkIHBhdGhzOklTY2F0dGVycGxvdFBhdGhzO1xuICAgIHByaXZhdGUgcGxvdHRlclN0YXRlOmFueTtcbiAgICBwcml2YXRlIG5vcm1hbGl6ZWRQb2ludFNpemVzOm51bWJlcltdO1xuXG4gICAgcHJpdmF0ZSBmbGFnOmJvb2xlYW47XG4gICAgcHJpdmF0ZSBrZXlEb3duOmJvb2xlYW47XG5cbiAgICBwcml2YXRlIGMzQ29uZmlnOkNoYXJ0Q29uZmlndXJhdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOklBYnN0cmFjdFdlYXZlVG9vbFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsID0ge307XG4gICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZVJlY29yZHMgKHJlY29yZHM6UmVjb3JkW10sIGF0dHJpYnV0ZXM6c3RyaW5nW10pOmFueVtdIHtcblxuICAgICAgICAvLyB0byBhdm9pZCBjb21wdXRpbmcgdGhlIHN0YXRzIGF0IGVhY2ggaXRlcmF0aW9uLlxuICAgICAgICB2YXIgY29sdW1uU3RhdHNDYWNoZTp7W2F0dHJpYnV0ZTpzdHJpbmddOklDb2x1bW5TdGF0c30gPSB7fTtcbiAgICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHI6c3RyaW5nKSB7XG4gICAgICAgICAgICBjb2x1bW5TdGF0c0NhY2hlW2F0dHJdID0ge1xuICAgICAgICAgICAgICAgIG1pbjogXy5taW4oXy5wbHVjayhyZWNvcmRzLCBhdHRyKSksXG4gICAgICAgICAgICAgICAgbWF4OiBfLm1heChfLnBsdWNrKHJlY29yZHMsIGF0dHIpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlY29yZHMubWFwKGZ1bmN0aW9uKHJlY29yZDphbnkpIHtcblxuICAgICAgICAgICAgdmFyIG9iajphbnkgPSB7fTtcblxuICAgICAgICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHI6c3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pbjpudW1iZXIgPSBjb2x1bW5TdGF0c0NhY2hlW2F0dHJdLm1pbjtcbiAgICAgICAgICAgICAgICB2YXIgbWF4Om51bWJlciA9IGNvbHVtblN0YXRzQ2FjaGVbYXR0cl0ubWF4O1xuXG4gICAgICAgICAgICAgICAgaWYoIW1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gMDtcblxuICAgICAgICAgICAgICAgIGlmKG1heCAtIG1pbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZihyZWNvcmRbYXR0cl0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIChyZWNvcmRbYXR0cl0gLSBtaW4pIC8gKG1heCAtIG1pbikpO1xuICAgICAgICAgICAgICAgICAgICBvYmpbYXR0cl0gPSAocmVjb3JkW2F0dHJdIC0gbWluKSAvIChtYXggLSBtaW4pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGFueSBvZiB0aGUgdmFsdWUgYWJvdmUgaXMgbnVsbCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IG5vcm1hbGl6ZVxuICAgICAgICAgICAgICAgICAgICBvYmpbYXR0cl0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1c3k6bnVtYmVyO1xuICAgIHByaXZhdGUgIGF4aXNDaGFuZ2VkKCk6dm9pZCB7XG4gICAgICAgIGlmKHRoaXMuYnVzeSkge1xuICAgICAgICAgICAgdGhpcy5idXN5Kys7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNoYXJ0LmF4aXMubGFiZWxzKHtcbiAgICAgICAgICAgIHg6IHRoaXMucGF0aHMueEF4aXMuZ2V0U3RhdGUoXCJvdmVycmlkZUF4aXNOYW1lXCIpIHx8IHRoaXMucGF0aHMuZGF0YVguZ2V0VmFsdWUoXCJ0aGlzLmdldE1ldGFkYXRhKCd0aXRsZScpXCIpLFxuICAgICAgICAgICAgeTogdGhpcy5wYXRocy55QXhpcy5nZXRTdGF0ZShcIm92ZXJyaWRlQXhpc05hbWVcIikgfHwgdGhpcy5wYXRocy5kYXRhWS5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ3RpdGxlJylcIilcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGRhdGFDaGFuZ2VkKCkge1xuICAgICAgICBpZih0aGlzLmJ1c3kpIHtcbiAgICAgICAgICAgIHRoaXMuYnVzeSsrO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG51bWVyaWNNYXBwaW5nOmFueSA9IHtcbiAgICAgICAgICAgIHBvaW50OiB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy5wYXRocy5kYXRhWCxcbiAgICAgICAgICAgICAgICB5OiB0aGlzLnBhdGhzLmRhdGFZXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2l6ZTogdGhpcy5wYXRocy5zaXplQnlcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgc3RyaW5nTWFwcGluZzphbnkgPSB7XG4gICAgICAgICAgICBwb2ludDoge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMucGF0aHMuZGF0YVgsXG4gICAgICAgICAgICAgICAgeTogdGhpcy5wYXRocy5kYXRhWVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbGw6IHtcbiAgICAgICAgICAgICAgICAvL2FscGhhOiB0aGlzLl9maWxsU3R5bGVQYXRoLnB1c2goXCJhbHBoYVwiKSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5wYXRocy5maWxsLnB1c2goXCJjb2xvclwiKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbmU6IHtcbiAgICAgICAgICAgICAgICAvL2FscGhhOiB0aGlzLl9saW5lU3R5bGVQYXRoLnB1c2goXCJhbHBoYVwiKSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5wYXRocy5saW5lLnB1c2goXCJjb2xvclwiKVxuICAgICAgICAgICAgICAgIC8vY2FwczogdGhpcy5fbGluZVN0eWxlUGF0aC5wdXNoKFwiY2Fwc1wiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGF0YVhUeXBlID0gdGhpcy5wYXRocy5kYXRhWC5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ2RhdGFUeXBlJylcIik7XG4gICAgICAgIHRoaXMuZGF0YVlUeXBlID0gdGhpcy5wYXRocy5kYXRhWS5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ2RhdGFUeXBlJylcIik7XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMobnVtZXJpY01hcHBpbmcsIHtrZXlTZXQ6IHRoaXMucGF0aHMuZmlsdGVyZWRLZXlTZXQsIGRhdGFUeXBlOiBcIm51bWJlclwifSk7XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3JkcyA9IHRoaXMucGF0aHMucGxvdHRlci5yZXRyaWV2ZVJlY29yZHMoc3RyaW5nTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwic3RyaW5nXCJ9KTtcblxuICAgICAgICB0aGlzLnJlY29yZHMgPSBfLnppcCh0aGlzLm51bWVyaWNSZWNvcmRzLCB0aGlzLnN0cmluZ1JlY29yZHMpO1xuICAgICAgICB0aGlzLnJlY29yZHMgPSBfLnNvcnRCeU9yZGVyKHRoaXMucmVjb3JkcywgW1wic2l6ZVwiLCBcImlkXCJdLCBbXCJkZXNjXCIsIFwiYXNjXCJdKTtcblxuICAgICAgICBpZih0aGlzLnJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgW3RoaXMubnVtZXJpY1JlY29yZHMsIHRoaXMuc3RyaW5nUmVjb3Jkc10gPSBfLnVuemlwKHRoaXMucmVjb3Jkcyk7XG5cbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsID0ge307XG4gICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzLmZvckVhY2goKHJlY29yZDpSZWNvcmQsIGluZGV4Om51bWJlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5rZXlUb0luZGV4W3JlY29yZFtcImlkXCJdIGFzIHN0cmluZ10gPSBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhUb0tleVtpbmRleF0gPSByZWNvcmRbXCJpZFwiXSBhcyBzdHJpbmc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQ6YW55LCBpbmRleDpudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMueEF4aXNWYWx1ZVRvTGFiZWxbKHRoaXMubnVtZXJpY1JlY29yZHNbaW5kZXhdW1wicG9pbnRcIl0gYXMgUmVjb3JkKVtcInhcIl0gYXMgbnVtYmVyXSA9IChyZWNvcmRbXCJwb2ludFwiXSBhcyBSZWNvcmQpW1wieFwiXSBhcyBzdHJpbmc7XG4gICAgICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsWyh0aGlzLm51bWVyaWNSZWNvcmRzW2luZGV4XVtcInBvaW50XCJdIGFzIFJlY29yZClbXCJ5XCJdIGFzIG51bWJlcl0gPSAocmVjb3JkW1wicG9pbnRcIl0gYXMgUmVjb3JkKVtcInlcIl0gYXMgc3RyaW5nO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm5vcm1hbGl6ZWRSZWNvcmRzID0gdGhpcy5ub3JtYWxpemVSZWNvcmRzKHRoaXMubnVtZXJpY1JlY29yZHMsIFtcInNpemVcIl0pO1xuICAgICAgICB0aGlzLnBsb3R0ZXJTdGF0ZSA9IHRoaXMucGF0aHMucGxvdHRlci5nZXRVbnR5cGVkU3RhdGUgPyB0aGlzLnBhdGhzLnBsb3R0ZXIuZ2V0VW50eXBlZFN0YXRlKCkgOiB0aGlzLnBhdGhzLnBsb3R0ZXIuZ2V0U3RhdGUoKTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkUG9pbnRTaXplcyA9IHRoaXMubm9ybWFsaXplZFJlY29yZHMubWFwKChub3JtYWxpemVkUmVjb3JkOlJlY29yZCkgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5wbG90dGVyU3RhdGUgJiYgdGhpcy5wbG90dGVyU3RhdGUuc2l6ZUJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBtaW5TY3JlZW5SYWRpdXMgPSB0aGlzLnBsb3R0ZXJTdGF0ZS5taW5TY3JlZW5SYWRpdXM7XG4gICAgICAgICAgICAgICAgbGV0IG1heFNjcmVlblJhZGl1cyA9IHRoaXMucGxvdHRlclN0YXRlLm1heFNjcmVlblJhZGl1cztcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5vcm1hbGl6ZWRSZWNvcmQgJiYgbm9ybWFsaXplZFJlY29yZFtcInNpemVcIl0gP1xuICAgICAgICAgICAgICAgICAgICBtaW5TY3JlZW5SYWRpdXMgKyBub3JtYWxpemVkUmVjb3JkW1wic2l6ZVwiXSBhcyBudW1iZXIgKiAobWF4U2NyZWVuUmFkaXVzIC0gbWluU2NyZWVuUmFkaXVzKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsb3R0ZXJTdGF0ZS5kZWZhdWx0U2NyZWVuUmFkaXVzKSB8fCAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLnBsb3R0ZXJTdGF0ZS5kZWZhdWx0U2NyZWVuUmFkaXVzKSB8fCAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmF4aXNDaGFuZ2VkKCk7XG4gICAgICAgIHRoaXMuYnVzeSA9IDE7XG5cbiAgICAgICAgdGhpcy5jaGFydC5sb2FkKHtkYXRhOiBfLnBsdWNrKHRoaXMubnVtZXJpY1JlY29yZHMsIFwicG9pbnRcIiksIHVubG9hZDogdHJ1ZSwgZG9uZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVzeSA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1c3kgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVzeSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH19KTtcbiAgICB9XG5cbiAgICBfc2VsZWN0aW9uS2V5c0NoYW5nZWQoKSB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleXM6c3RyaW5nW10gPSB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRpY2VzOm51bWJlcltdID0gc2VsZWN0ZWRLZXlzLm1hcCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIga2V5czpzdHJpbmdbXSA9IE9iamVjdC5rZXlzKHRoaXMua2V5VG9JbmRleCk7XG4gICAgICAgIHZhciBpbmRpY2VzOm51bWJlcltdID0ga2V5cy5tYXAoKGtleTpzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdW5zZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBfLmRpZmZlcmVuY2UoaW5kaWNlcywgc2VsZWN0ZWRJbmRpY2VzKTtcbiAgICAgICAgaWYoc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkSW5kaWNlcywgXCJjaXJjbGVcIiwgXCIuYzMtc2hhcGVcIiwge29wYWNpdHk6IDAuMywgXCJzdHJva2Utb3BhY2l0eVwiOiAwLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tU3R5bGUoc2VsZWN0ZWRJbmRpY2VzLCBcImNpcmNsZVwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMS4wLCBcInN0cm9rZS1vcGFjaXR5XCI6IDEuMH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5zZWxlY3QoW1wieVwiXSwgc2VsZWN0ZWRJbmRpY2VzLCB0cnVlKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKGluZGljZXMsIFwiY2lyY2xlXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjAsIFwic3Ryb2tlLW9wYWNpdHlcIjogMC4wfSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnNlbGVjdChbXCJ5XCJdLCBbXSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJvYmVkS2V5c0NoYW5nZWQoKSB7XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5czpzdHJpbmdbXSA9IHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LmdldEtleXMoKTtcbiAgICAgICAgdmFyIHNlbGVjdGVkSW5kaWNlczpudW1iZXJbXSA9IHNlbGVjdGVkS2V5cy5tYXAoIChrZXk6c3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBrZXlzOnN0cmluZ1tdID0gT2JqZWN0LmtleXModGhpcy5rZXlUb0luZGV4KTtcbiAgICAgICAgdmFyIGluZGljZXM6bnVtYmVyW10gPSBrZXlzLm1hcCgoa2V5OnN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmtleVRvSW5kZXhba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdW5zZWxlY3RlZEluZGljZXM6bnVtYmVyW10gPSBfLmRpZmZlcmVuY2UoaW5kaWNlcywgc2VsZWN0ZWRJbmRpY2VzKTtcblxuICAgICAgICBpZihzZWxlY3RlZEluZGljZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRJbmRpY2VzLCBcImNpcmNsZVwiLCBcIi5jMy1zaGFwZVwiLCB7b3BhY2l0eTogMC4zLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShzZWxlY3RlZEluZGljZXMsIFwiY2lyY2xlXCIsIFwiLmMzLXNoYXBlXCIsIHtvcGFjaXR5OiAxLjAsIFwic3Ryb2tlLW9wYWNpdHlcIjogMC4wfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0aW9uS2V5c0NoYW5nZWQoKVxuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIGhhbmRsZUNsaWNrKGV2ZW50Ok1vdXNlRXZlbnQpOnZvaWQge1xuICAgICAgICBpZighdGhpcy5mbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdG9nZ2xlS2V5KGV2ZW50OktleWJvYXJkRXZlbnQpOnZvaWQge1xuICAgICAgICBpZigoZXZlbnQua2V5Q29kZSA9PT0gMTcpfHwoZXZlbnQua2V5Q29kZSA9PT0gOTEpIHx8IChldmVudC5rZXlDb2RlID09PSAyMjQpKSB7XG4gICAgICAgICAgICB0aGlzLmtleURvd24gPSAhdGhpcy5rZXlEb3duO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZVN0eWxlKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuc3R5bGUoXCJvcGFjaXR5XCIsIDEpXG4gICAgICAgICAgICAuc3R5bGUoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlLW9wYWNpdHlcIiwgMC4wKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZFVwZGF0ZSgpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwicmVzaXppbmdcIik7XG4gICAgICAgIC8vdmFyIHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmFyIG5ld0VsZW1lbnRTaXplOkVsZW1lbnRTaXplID0gdGhpcy5nZXRFbGVtZW50U2l6ZSgpO1xuICAgICAgICBpZighXy5pc0VxdWFsKG5ld0VsZW1lbnRTaXplLCB0aGlzLmVsZW1lbnRTaXplKSkge1xuICAgICAgICAgICAgdGhpcy5jaGFydC5yZXNpemUobmV3RWxlbWVudFNpemUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG5ld0VsZW1lbnRTaXplO1xuICAgICAgICB9XG4gICAgICAgIC8vdmFyIGVuZCA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIC8qIENsZWFudXAgY2FsbGJhY2tzICovXG4gICAgICAgIC8vdGhpcy50ZWFyZG93bkNhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLmNoYXJ0LmRlc3Ryb3koKTtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50V2lsbFVubW91bnQoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkTW91bnQoKTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICB2YXIgYXhpc0NoYW5nZWQgPSB0aGlzLmF4aXNDaGFuZ2VkLmJpbmQodGhpcyk7XG4gICAgICAgIHZhciBkYXRhQ2hhbmdlZCA9IHRoaXMuZGF0YUNoYW5nZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbktleVNldENoYW5nZWQgPSB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB2YXIgcHJvYmVLZXlTZXRDaGFuZ2VkID0gdGhpcy5fcHJvYmVkS2V5c0NoYW5nZWQuYmluZCh0aGlzKTtcblxuICAgICAgICB2YXIgcGxvdHRlclBhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2hQbG90dGVyKFwicGxvdFwiKTtcbiAgICAgICAgdmFyIG1hcHBpbmcgPSBbXG4gICAgICAgICAgICB7IG5hbWU6IFwicGxvdHRlclwiLCBwYXRoOiBwbG90dGVyUGF0aCwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZGF0YVhcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImRhdGFYXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZCwgYXhpc0NoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZGF0YVlcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImRhdGFZXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZCwgYXhpc0NoYW5nZWRdIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwic2l6ZUJ5XCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJzaXplQnlcIiksIGNhbGxiYWNrczogZGF0YUNoYW5nZWQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJmaWxsXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWxsXCIpLCBjYWxsYmFja3M6IFtkYXRhQ2hhbmdlZF0gfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJsaW5lXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJsaW5lXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwieEF4aXNcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInhBeGlzXCIpLCBjYWxsYmFja3M6IGF4aXNDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwieUF4aXNcIiwgcGF0aDogdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInlBeGlzXCIpLCBjYWxsYmFja3M6IGF4aXNDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwiZmlsdGVyZWRLZXlTZXRcIiwgcGF0aDogcGxvdHRlclBhdGgucHVzaChcImZpbHRlcmVkS2V5U2V0XCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgICB7IG5hbWU6IFwic2VsZWN0aW9uS2V5U2V0XCIsIHBhdGg6IHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldCwgY2FsbGJhY2tzOiBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkfSxcbiAgICAgICAgICAgIHsgbmFtZTogXCJwcm9iZUtleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldCwgY2FsbGJhY2tzOiBwcm9iZUtleVNldENoYW5nZWR9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplUGF0aHMobWFwcGluZyk7XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZyA9IHtcbiAgICAgICAgICAgIGJpbmR0bzogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgcGFkZGluZzoge1xuICAgICAgICAgICAgICAgIHRvcDogMjAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAyMCxcbiAgICAgICAgICAgICAgICByaWdodDogMzBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcm93czogW10sXG4gICAgICAgICAgICAgICAgeDogXCJ4XCIsXG4gICAgICAgICAgICAgICAgeFNvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic2NhdHRlclwiLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb2xvcjogKGNvbG9yOnN0cmluZywgZDphbnkpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RyaW5nUmVjb3JkcyAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgY29ycmVzcG9uZGluZyBpbmRleCBvZiBudW1lcmljUmVjb3JkcyBpbiBzdHJpbmdSZWNvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQ6c3RyaW5nID0gdGhpcy5pbmRleFRvS2V5W2QuaW5kZXggYXMgbnVtYmVyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleDpudW1iZXIgPSBfLnBsdWNrKHRoaXMuc3RyaW5nUmVjb3JkcywgXCJpZFwiKS5pbmRleE9mKGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY29yZDpSZWNvcmQgPSB0aGlzLnN0cmluZ1JlY29yZHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChyZWNvcmQgJiYgcmVjb3JkW1wiZmlsbFwiXSAmJiAocmVjb3JkW1wiZmlsbFwiXSBhcyBSZWNvcmQpW1wiY29sb3JcIl0pID8gKHJlY29yZFtcImZpbGxcIl0gYXMgUmVjb3JkKVtcImNvbG9yXCJdIGFzIHN0cmluZyA6IFwiIzAwMDAwMFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiMwMDAwMDBcIjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5rZXlEb3duICYmIGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuc2V0S2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uc2VsZWN0ZWQ6IChkOmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LmFkZEtleXMoW3RoaXMuaW5kZXhUb0tleVtkLmluZGV4XV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnVuc2VsZWN0ZWQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQucmVtb3ZlS2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ubW91c2VvdmVyOiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihkICYmIGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sUGF0aC5wcm9iZV9rZXlzZXQuc2V0S2V5cyhbdGhpcy5pbmRleFRvS2V5W2QuaW5kZXhdXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9ubW91c2VvdXQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5zZXRLZXlzKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF4aXM6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwib3V0ZXItY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZml0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bTpudW1iZXIpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYXRocy5kYXRhWCAmJiB0aGlzLnhBeGlzVmFsdWVUb0xhYmVsICYmIHRoaXMuZGF0YVhUeXBlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnhBeGlzVmFsdWVUb0xhYmVsW251bV0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKEZvcm1hdFV0aWxzLmRlZmF1bHROdW1iZXJGb3JtYXR0aW5nKG51bSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIm91dGVyLW1pZGRsZVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKG51bTpudW1iZXIpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYXRocy5kYXRhWSAmJiB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsICYmIHRoaXMuZGF0YVlUeXBlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsW251bV0gfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKEZvcm1hdFV0aWxzLmRlZmF1bHROdW1iZXJGb3JtYXR0aW5nKG51bSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBncmlkOiB7XG4gICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICAgICAgICByOiAoZDphbnkpOm51bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQuaGFzT3duUHJvcGVydHkoXCJpbmRleFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplZFBvaW50U2l6ZXNbZC5pbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnJlbmRlcmVkOiB0aGlzLl91cGRhdGVTdHlsZS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhcnQgPSBnZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBXZWF2ZUMzU2NhdHRlclBsb3Q7XG5cbnJlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi50b29sczo6U2NhdHRlclBsb3RUb29sXCIsIFdlYXZlQzNTY2F0dGVyUGxvdCk7XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy9kMy9kMy5kLnRzXCIvPlxuXG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybWF0VXRpbHMge1xuXG4gIC8vIHRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgZGVmYXVsdCBudW1iZXIgZm9ybWF0aW5nLlxuXHQvLyBmb3IgbnVtYmVyIHZhbHVlcywgd2Ugcm91bmQgdGhlbSB0byBhdCBtb3N0IDQgZGVjaW1hbCBwbGFjZXNcblx0Ly8gdW5sZXNzIHRoZSBudW1iZXIgaXMgdmVyeSBzbWFsbCwgaW4gd2hpY2ggY2FzZSB3ZSBqdXN0IHJldHVybiBpdFxuICBzdGF0aWMgZGVmYXVsdE51bWJlckZvcm1hdHRpbmcoeDpudW1iZXIpOm51bWJlciB7XG4gICAgaWYoeCA8IDAuMDAwMSkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkMy5yb3VuZCh4LCA0KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL2xvZGFzaC9sb2Rhc2guZC50c1wiLz5cblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YW5kYXJkTGliIHtcblxuICAvKipcblx0ICogU2VhcmNoZXMgZm9yIHRoZSBmaXJzdCBuZXN0ZWQgb2JqZWN0IHdpdGggbWF0Y2hpbmcgcHJvcGVydGllc1xuXHQgKiBAcGFyYW0gcm9vIFRoZSByb290IE9iamVjdC5cblx0ICogQHBhcmFtIG1hdGNoIEVpdGhlciBhbiBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRvIG1hdGNoLCBvciBhIEZ1bmN0aW9uIHRoYXQgY2hlY2tzIGZvciBhIG1hdGNoLlxuICAgKlxuICAgKiBAcmV0dXJucyByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBtYXRjaGluZyBwcm9wZXJ0aWVzXG5cdCAqL1xuICAgc3RhdGljIGZpbmREZWVwKHJvb3Q6IGFueSwgbWF0Y2g6IGFueSApOmFueSB7XG4gICAgIGlmKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG1hdGNoID0gXy5tYXRjaGVzKG1hdGNoKTtcbiAgICAgfVxuXG4gICAgIGlmKG1hdGNoKHJvb3QpKSB7XG4gICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG5cbiAgICBpZih0eXBlb2Ygcm9vdCA9PSBcIm9iamVjdFwiKSB7XG4gICAgICB2YXIga2V5OiBzdHJpbmc7XG4gICAgICBmb3IgKGtleSBpbiByb290KSB7XG4gICAgICAgIHZhciBmb3VuZDphbnkgPSB0aGlzLmZpbmREZWVwKHJvb3Rba2V5XSwgbWF0Y2gpO1xuICAgICAgICBpZihmb3VuZClcbiAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICB9XG4gICAgfVxuICAgfVxuXG4gICAvKipcbiAgICAgKiBBZGRzIHVuZGVmaW5lZCB2YWx1ZXMgdG8gbmV3IHN0YXRlIGZvciBwcm9wZXJ0aWVzIGluXG4gICAgICogY3VycmVudCBzdGF0ZSBub3QgZm91bmQgaW4gbmV3IHN0YXRlLlxuICAgICAqL1xuICAgc3RhdGljIGluY2x1ZGVNaXNzaW5nUHJvcGVydHlQbGFjZWhvbGRlcnMoY3VycmVudFN0YXRlOmFueSwgbmV3U3RhdGU6YW55KSB7XG4gICAgIHZhciBrZXk6IHN0cmluZztcbiAgICAgZm9yIChrZXkgaW4gY3VycmVudFN0YXRlKSB7XG4gICAgICAgaWYoIW5ld1N0YXRlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgIG5ld1N0YXRlW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICAgfVxuICAgICB9XG4gICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgIH1cblxuICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBhbiBpbnRlcnBvbGF0ZWQgY29sb3IgZm9yIGEgbm9ybWFsaXplZCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gbm9ybVZhbHVlIEEgTnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgKiBAcGFyYW0gY29sb3JzIEFuIEFycmF5IG9yIGxpc3Qgb2YgY29sb3JzIHRvIGludGVycG9sYXRlIGJldHdlZW4uICBOb3JtYWxpemVkIHZhbHVlcyBvZiAwIGFuZCAxIHdpbGwgYmUgbWFwcGVkIHRvIHRoZSBmaXJzdCBhbmQgbGFzdCBjb2xvcnMuXG4gICAgICogQHJldHVybiBBbiBpbnRlcnBvbGF0ZWQgY29sb3IgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBub3JtVmFsdWUgYmFzZWQgb24gdGhlIGxpc3Qgb2YgY29sb3IgdmFsdWVzLlxuICAgICAqL1xuICAgICBzdGF0aWMgaW50ZXJwb2xhdGVDb2xvcihub3JtVmFsdWU6bnVtYmVyLCAuLi5jb2xvcnM6YW55W10pOiBudW1iZXIge1xuICAgICAgICAvLyBoYW5kbGUgYW4gYXJyYXkgb2YgY29sb3JzIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyXG4gICAgICAgIGlmIChjb2xvcnMubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoY29sb3JzWzBdKSkge1xuICAgICAgICAgICAgY29sb3JzID0gY29sb3JzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIGludmFsaWQgcGFyYW1ldGVyc1xuICAgICAgICBpZiAobm9ybVZhbHVlIDwgMCB8fCBub3JtVmFsdWUgPiAxIHx8IGNvbG9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaW5kIHRoZSBtaW4gYW5kIG1heCBjb2xvcnMgd2Ugd2FudCB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuXG5cbiAgICAgICAgdmFyIG1heEluZGV4OiBudW1iZXIgPSBNYXRoLmZsb29yKGNvbG9ycy5sZW5ndGggLSAxKTtcbiAgICAgICAgdmFyIGxlZnRJbmRleDogbnVtYmVyID0gTWF0aC5mbG9vcihtYXhJbmRleCAqIG5vcm1WYWx1ZSk7XG4gICAgICAgIHZhciByaWdodEluZGV4OiBudW1iZXIgPSBNYXRoLmZsb29yKGxlZnRJbmRleCArIDEpO1xuXG4gICAgICAgIC8vIGhhbmRsZSBib3VuZGFyeSBjb25kaXRpb25cbiAgICAgICAgaWYgKHJpZ2h0SW5kZXggPT09IGNvbG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChjb2xvcnNbbGVmdEluZGV4XSwgMTYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1pbkNvbG9yOiBudW1iZXIgPSBjb2xvcnNbbGVmdEluZGV4XTtcbiAgICAgICAgdmFyIG1heENvbG9yOiBudW1iZXIgPSBjb2xvcnNbcmlnaHRJbmRleF07XG5cbiAgICAgICAgLy8gbm9ybWFsaXplIHRoZSBub3JtIHZhbHVlIGJldHdlZW4gdGhlIHR3byBub3JtIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIHN1cnJvdW5kaW5nIGNvbG9yc1xuICAgICAgICBub3JtVmFsdWUgPSBub3JtVmFsdWUgKiBtYXhJbmRleCAtIGxlZnRJbmRleDtcblxuICAgICAgICB2YXIgcGVyY2VudExlZnQ6IG51bWJlciA9IDEgLSBub3JtVmFsdWU7IC8vIHJlbGV2YW5jZSBvZiBtaW5Db2xvclxuICAgICAgICB2YXIgcGVyY2VudFJpZ2h0OiBudW1iZXIgPSBub3JtVmFsdWU7IC8vIHJlbGV2YW5jZSBvZiBtYXhDb2xvclxuICAgICAgICBjb25zdCBSOiBudW1iZXIgPSAweEZGMDAwMDtcbiAgICAgICAgY29uc3QgRzogbnVtYmVyID0gMHgwMEZGMDA7XG4gICAgICAgIGNvbnN0IEI6IG51bWJlciA9IDB4MDAwMEZGO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgKChwZXJjZW50TGVmdCAqIChtaW5Db2xvciAmIFIpICsgcGVyY2VudFJpZ2h0ICogKG1heENvbG9yICYgUikpICYgUikgfFxuICAgICAgICAgICAgKChwZXJjZW50TGVmdCAqIChtaW5Db2xvciAmIEcpICsgcGVyY2VudFJpZ2h0ICogKG1heENvbG9yICYgRykpICYgRykgfFxuICAgICAgICAgICAgKChwZXJjZW50TGVmdCAqIChtaW5Db2xvciAmIEIpICsgcGVyY2VudFJpZ2h0ICogKG1heENvbG9yICYgQikpICYgQilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIFRoaXMgZnVuY3Rpb24gY29udmVydHMgYSBkZWNpbWFsIG51bWJlciB0byBhIDYgZGlnaXQgaGV4YWRlY2ltYWwgc3RyaW5nXG4gICAgKiBAcGFyYW0gZGVjIEEgZGVjaW1hbCBudW1iZXJcbiAgICAqIEByZXR1cm4gdGhlIGhleGFkZWNpbWFsIHZhbHVlIG9mIHRoZSBkZWNpbWFsIG51bWJlclxuICAgICovXG4gICBzdGF0aWMgZGVjaW1hbFRvSGV4KGRlYzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICByZXR1cm4gXy5wYWRMZWZ0KGRlYy50b1N0cmluZygxNiksIDYsIFwiMFwiKTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybiB0aGUgbm9ybWFsaXplZCB2YWx1ZSBiZXR3ZWVuIGEgcmFuZ2VcbiAgICAqIGlmIG5vIHJhbmdlIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCByYW5nZSB3aWxsIGJlIDAgYW5kIDFcbiAgICAqXG4gICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGJlIG5vcm1hbGl6ZWRcbiAgICAqIEBwYXJhbSBtaW4gdGhlIHJhbmdlIG1pbiB2YWx1ZVxuICAgICogQHBhcmFtIG1heCB0aGUgcmFuZ2UgbWF4IHZhbHVlXG4gICAgKi9cbiAgIHN0YXRpYyBub3JtYWxpemUodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcblxuICAgICAgIGlmKCFtaW4pIHtcbiAgICAgICAgICAgbWluID0gMDtcbiAgICAgICB9XG4gICAgICAgaWYoIW1heCkge1xuICAgICAgICAgICBtYXggPSAxO1xuICAgICAgIH1cbiAgICAgICByZXR1cm4gKHZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pO1xuICAgfVxuXG4gICAvKipcbiAgICAqICBUaGlzIGZ1bmN0aW9uIHRha2VzIG1lcmdlcyBhbiBvYmplY3QgaW50byBhbm90aGVyXG4gICAgKlxuICAgICogQHBhcmFtIGludG8ge29iamVjdH0gdGhlIG9iamVjdCB0byBtZXJnZSBpbnRvXG4gICAgKiBAcGFyYW0gb2JqIHtvYmp9IHRoZSBvYmplY3QgdG8gbWVyZ2UgZnJvbVxuICAgICovXG4gICBzdGF0aWMgbWVyZ2UoaW50bzphbnksIG9iajphbnkpIHtcbiAgICAgdmFyIGF0dHI6c3RyaW5nO1xuICAgICBmb3IoYXR0ciBpbiBvYmopIHtcbiAgICAgICBpbnRvW2F0dHJdID0gb2JqW2F0dHJdO1xuICAgICB9XG4gICB9XG5cbiAgIC8qKlxuICAgICogVGVtcG9yYXJ5IHBvbHlmaWxsIHdvcmthcm91bmQgZm9yIFN0cmluZy5zdGFydHNXaXRoXG4gICAgKiBmb3IgcHJvamVjdHMgdGhhdCBhcmUgdGFyZ2V0dGluZyBlczVcbiAgICAqXG4gICAgKiAgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgc3RyaW5nIGJlZ2lucyB3aXRoIHRoZSBjaGFyYWN0ZXJzIG9mIGFub3RoZXIgc3RyaW5nLCByZXR1cm5pbmcgdHJ1ZSBvciBmYWxzZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAqXG4gICAgKiBAcGFyYW0gc3RyIHtzdHJpbmd9IHRoZSBzdHIgc3RyaW5nIGluIHdoaWNoIHRvIHNlYXJjaCBmb3IgaW4gc3RyLnN0YXJ0c1dpdGhcbiAgICAqIEBwYXJhbSBzZWFyY2hTdHJpbmcge3N0cmluZ30gVGhlIGNoYXJhY3RlcnMgdG8gYmUgc2VhcmNoZWQgZm9yIGF0IHRoZSBzdGFydCBvZiB0aGlzIHN0cmluZy5cbiAgICAqIEBwYXJhbSBwb3NpdGlvbiB7bnVtYmVyP30gT3B0aW9uYWwuIFRoZSBwb3NpdGlvbiBpbiB0aGlzIHN0cmluZyBhdCB3aGljaCB0byBiZWdpbiBzZWFyY2hpbmcgZm9yIHNlYXJjaFN0cmluZzsgZGVmYXVsdHMgdG8gMC5cbiAgICAqXG4gICAgKiBAcmV0dXJucyB0cnVlIG9yIGZhbHNlXG4gICAgKlxuICAgICovXG4gICBzdGF0aWMgc3RhcnRzV2l0aChzdHI6c3RyaW5nLCBzZWFyY2hTdHJpbmc6c3RyaW5nLCBwb3NpdGlvbj86bnVtYmVyKTpib29sZWFuIHtcbiAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uIHx8IDA7XG4gICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKHNlYXJjaFN0cmluZywgcG9zaXRpb24pID09PSBwb3NpdGlvbjtcbiAgIH1cblxuXG4gICBzdGF0aWMgcmVzb2x2ZVJlbGF0aXZlKHBhdGg6c3RyaW5nLCBiYXNlOnN0cmluZyk6c3RyaW5nIHtcbiAgICBcdC8vIFVwcGVyIGRpcmVjdG9yeVxuICAgIFx0aWYgKFN0YW5kYXJkTGliLnN0YXJ0c1dpdGgocGF0aCwgXCIuLi9cIikpIHtcbiAgICBcdFx0cmV0dXJuIFN0YW5kYXJkTGliLnJlc29sdmVSZWxhdGl2ZShwYXRoLnNsaWNlKDMpLCBiYXNlLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCJcIikpO1xuICAgIFx0fVxuICAgIFx0Ly8gUmVsYXRpdmUgdG8gdGhlIHJvb3RcbiAgICBcdGlmIChTdGFuZGFyZExpYi5zdGFydHNXaXRoKHBhdGgsIFwiL1wiKSkge1xuICAgIFx0XHR2YXIgbWF0Y2ggPSBiYXNlLm1hdGNoKC8oXFx3KjpcXC9cXC8pP1teXFwvXSpcXC8vKSB8fCBbYmFzZV07XG4gICAgXHRcdHJldHVybiBtYXRjaFswXSArIHBhdGguc2xpY2UoMSk7XG4gICAgXHR9XG4gICAgXHQvL3JlbGF0aXZlIHRvIHRoZSBjdXJyZW50IGRpcmVjdG9yeVxuXHQgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIlwiKSArIFwiL1wiICsgcGF0aDtcbiAgICB9XG5cbiAgIHN0YXRpYyBnZXREYXRhQm91bmRzKGNvbHVtbjogbnVtYmVyW10pIHtcbiAgICAgICByZXR1cm4ge1xuICAgICAgICAgICBtaW46IF8ubWluKGNvbHVtbiksXG4gICAgICAgICAgIG1heDogXy5tYXgoY29sdW1uKVxuICAgICAgIH07XG4gICB9XG5cbiAgIC8qKlxuICAgICpcbiAgICAqICAgVGhpcyBmdW5jdGlvbiByZXR1cm4gYW5kIG9iamVjdCB3aG9zZSBrZXlzIGFyZSB1cmxcbiAgICAqICAgcGFyYW1ldGVycyBhbmQgdmFsdWVcbiAgICAqL1xuICAgc3RhdGljIGdldFVybFBhcmFtcygpOmFueSB7XG5cbiAgICAgICB2YXIgcXVlcnlQYXJhbXM6YW55ID0ge307XG4gICAgICAgdmFyIHF1ZXJ5OnN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xuICAgICAgIGlmKCFxdWVyeSkge1xuICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgfVxuICAgICAgIHZhciB2YXJzOnN0cmluZ1tdID0gcXVlcnkuc3BsaXQoXCImXCIpO1xuICAgICAgIGZvciAodmFyIGk6bnVtYmVyID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgdmFyIHBhaXI6c3RyaW5nW10gPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgaWYgKHR5cGVvZiBxdWVyeVBhcmFtc1twYWlyWzBdXSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbcGFpclswXV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICAgICAgICAgICAvLyBJZiBzZWNvbmQgZW50cnkgd2l0aCB0aGlzIG5hbWVcbiAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcXVlcnlQYXJhbXNbcGFpclswXV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgIHZhciBhcnI6c3RyaW5nW10gPSBbIHF1ZXJ5UGFyYW1zW3BhaXJbMF1dLCBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSkgXTtcbiAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3BhaXJbMF1dID0gYXJyO1xuICAgICAgICAgICAgICAgLy8gSWYgdGhpcmQgb3IgbGF0ZXIgZW50cnkgd2l0aCB0aGlzIG5hbWVcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3BhaXJbMF1dLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pKTtcbiAgICAgICAgICAgfVxuICAgICAgIH1cbiAgICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XG4gICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBicyBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vb3V0dHMvV2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IERhdGVQaWNrZXIgZnJvbSBcInJlYWN0LWRhdGUtcGlja2VyXCI7XG5cbnZhciBjdXN0b21TZWFyY2hTdHlsZSA9IHtcbiAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICBmbGV4RGlyZWN0aW9uOiBcInJvd1wiLFxuICAgIGhlaWdodDogMzAsXG4gICAgd2lkdGg6IFwiMTAwJVwiXG59O1xuXG52YXIgaW5wdXRTdHlsZSA9IHtcbiAgICBmbGV4OiAxLFxuICAgIHBhZGRpbmdMZWZ0OiA0LFxuICAgIHBhZGRpbmdSaWdodDogNFxufTtcblxudmFyIHNlYXJjaEJ1dHRvblN0eWxlID0ge1xuICAgIGZsZXg6IDFcbn07XG5cbnZhciBnbHlwaFN0eWxlID0ge1xuICAgIGZvbnRTaXplOiBcIjEycHhcIlxufTtcblxuY2xhc3MgQ3VzdG9tU2VhcmNoVG9vbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnByb3BzLnRvb2xQYXRoLnJlcXVlc3QoXCJFeHRlcm5hbFRvb2xcIik7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlYXJjaE9iamVjdDogdGhpcy5wcm9wcy50b29sUGF0aC5wdXNoKFwic2VhcmNoVmFsdWVzXCIpLnJlcXVlc3QoXCJMaW5rYWJsZVZhcmlhYmxlXCIpLmdldFN0YXRlKCkgfHwge31cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZHMgPSB0aGlzLnByb3BzLnRvb2xQYXRoLnB1c2goXCJzZWFyY2hGaWVsZHNcIikucmVxdWVzdChcIkxpbmthYmxlVmFyaWFibGVcIikuZ2V0U3RhdGUoKSB8fCBbXTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlRnVuY3MgPSB7fTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGVGdW5jc1tmaWVsZC5sYWJlbF0gPSB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcywgZmllbGQubGFiZWwpO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICB0aGlzLmRlYm91bmNlZENvbXBvbmVudERpZFVwZGF0ZSA9IF8uZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy50b29sUGF0aC5zdGF0ZShcInNlYXJjaFZhbHVlc1wiLCB0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnByb3BzLnRvb2xQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuaGFuZGxlV2VhdmVTdGF0ZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnByb3BzLnRvb2xQYXRoLnB1c2goXCJzZWFyY2hGaWVsZHNcIikuYWRkQ2FsbGJhY2sodGhpcywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZHMgPSB0aGlzLnByb3BzLnRvb2xQYXRoLmdldFN0YXRlKFwic2VhcmNoRmllbGRzXCIpIHx8IFtdO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUZ1bmNzID0ge307XG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGVGdW5jc1tmaWVsZC5sYWJlbF0gPSB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcywgZmllbGQubGFiZWwpO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIGhhbmRsZVdlYXZlU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoT2JqZWN0OiB0aGlzLnByb3BzLnRvb2xQYXRoLmdldFN0YXRlKFwic2VhcmNoVmFsdWVzXCIpIHx8IHt9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgLy8gdGhpcy5kZWJvdW5jZWRDb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBzdWJtaXRTZWFyY2goZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy50b29sUGF0aC5zdGF0ZShcInNlYXJjaFZhbHVlc1wiLCB0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCk7XG4gICAgICAgIGlmKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVN0YXRlKGxhYmVsLCBldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBfLmNsb25lKHRoaXMuc3RhdGUuc2VhcmNoT2JqZWN0KTtcbiAgICAgICAgY29tcG9uZW50c1tsYWJlbF0gPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoT2JqZWN0OiBjb21wb25lbnRzXG4gICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICB1cGRhdGVEYXRlRmllbGQobGFiZWwsIHZhbHVlLCBtb21lbnQpIHtcbiAgICAgICAgLy8gVE9ETyB1c2UgbW9tZW50IG9iamVjdCB0byBtYW5pcHVsYXRlIGZvcm1hdFxuICAgICAgICB2YXIgY29tcG9uZW50cyA9IF8uY2xvbmUodGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpO1xuICAgICAgICBjb21wb25lbnRzW2xhYmVsXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaE9iamVjdDogY29tcG9uZW50c1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0ZURhdGVGaWVsZChsYWJlbCwgZXZlbnQpIHtcbiAgICAgICAgdmFyIGRhdGVQaWNrZXIgPSB0aGlzLnJlZnNbXCJkYXRlUGlja2VyXCIgKyBsYWJlbF07XG5cbiAgICAgICAgLy8gc2V0IHRoZSBkYXRlcGlja2VyIGRhdGUgc28gdGhhdCBpdCBtb3ZlcyB0byB0aGF0IHZpZXdcbiAgICAgICAgaWYoZGF0ZVBpY2tlcikge1xuICAgICAgICAgICAgaWYoaXNOYU4oRGF0ZS5wYXJzZShldmVudC50YXJnZXQudmFsdWUpKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBkYXRlUGlja2VyLmdvdG9EYXRlKG5ldyBEYXRlKGV2ZW50LnRhcmdldC52YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGVGdW5jc1tsYWJlbF0oZXZlbnQpO1xuICAgIH1cblxuICAgIHJlbW92ZVNlYXJjaE9wdGlvbihrZXkpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBfLmNsb25lKHRoaXMuc3RhdGUuc2VhcmNoT2JqZWN0KTtcbiAgICAgICAgZGVsZXRlIGNvbXBvbmVudHNba2V5XTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWFyY2hPYmplY3Q6IGNvbXBvbmVudHNcbiAgICAgICAgfSwgKCkgPT4ge1xuXHQgICAgICAgIGlmKCFPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCkubGVuZ3RoKSB7XG5cdCAgICAgICAgICB0aGlzLnN1Ym1pdFNlYXJjaCgpO1xuXHQgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlRHJvcGRvd25TZWxlY3QgKGV2ZW50LCBldmVudEtleSl7XG4gICAgICAgIHZhciBjb21wb25lbnRzID0gXy5jbG9uZSh0aGlzLnN0YXRlLnNlYXJjaE9iamVjdCk7XG4gICAgICAgIGNvbXBvbmVudHNbZXZlbnRLZXldID0gdGhpcy5zdGF0ZS5zZWFyY2hPYmplY3RbZXZlbnRLZXldIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoT2JqZWN0OiBjb21wb25lbnRzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIG1lbnVJdGVtcyA9IHRoaXMuc2VhcmNoRmllbGRzLm1hcCgoc2VhcmNoRmllbGQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gPGJzLk1lbnVJdGVtIGtleT17aW5kZXh9IGV2ZW50S2V5PXtzZWFyY2hGaWVsZC5sYWJlbH0+IHtzZWFyY2hGaWVsZC5sYWJlbH0gPC9icy5NZW51SXRlbT47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBpbnB1dHMgPSBbXTtcblxuICAgICAgICBmb3IodmFyIGkgaW4gdGhpcy5zZWFyY2hGaWVsZHMpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IHRoaXMuc2VhcmNoRmllbGRzW2ldLmxhYmVsO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnNlYXJjaEZpZWxkc1tpXS50eXBlO1xuXG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLnNlYXJjaE9iamVjdC5oYXNPd25Qcm9wZXJ0eShsYWJlbCkpIHtcblxuICAgICAgICAgICAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IDxicy5CdXR0b24gY2xhc3NOYW1lPXtcImNsb3NlLWJ1dHRvblwifSBrZXk9e1wiY2xvc2VcIiArIGl9IHRhYkluZGV4PXstMX0gb25DbGljaz17dGhpcy5yZW1vdmVTZWFyY2hPcHRpb24uYmluZCh0aGlzLCBsYWJlbCl9IGJzU2l6ZT17dGhpcy5wcm9wcy5ic1NpemV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnMuR2x5cGhpY29uIGdseXBoPVwicmVtb3ZlXCIgc3R5bGU9e2dseXBoU3R5bGV9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2JzLkJ1dHRvbj47XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoSW5wdXQgPSBcIlwiO1xuXG5cbiAgICAgICAgICAgICAgICBpZih0eXBlID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUZvcm1hdCA9IHRoaXMuc2VhcmNoRmllbGRzW2ldLmRhdGVGb3JtYXQgfHwgXCJNTS9ERC9ZWVlZXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRlUGlja2VyID0gPGJzLlBvcG92ZXIgaWQ9XCJkYXRlIHBpY2tlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyIHJlZj17XCJkYXRlUGlja2VyXCIgKyBsYWJlbH0gZGF0ZUZvcm1hdD17ZGF0ZUZvcm1hdH0gZGF0ZT17dGhpcy5zdGF0ZS5zZWFyY2hPYmplY3RbbGFiZWxdfSBvbkNoYW5nZT17dGhpcy51cGRhdGVEYXRlRmllbGQuYmluZCh0aGlzLCBsYWJlbCl9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2JzLlBvcG92ZXI+O1xuXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaElucHV0ID0gPGRpdiBzdHlsZT17aW5wdXRTdHlsZX0ga2V5PXtcInNlYXJjaElucHV0XCIgKyBpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxicy5PdmVybGF5VHJpZ2dlciB0cmlnZ2VyPVwiY2xpY2tcIiByb290Q2xvc2UgcGxhY2VtZW50PVwiYm90dG9tXCIgb3ZlcmxheT17ZGF0ZVBpY2tlcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJzLklucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJzU2l6ZT17dGhpcy5wcm9wcy5ic1NpemV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnNlYXJjaE9iamVjdFtsYWJlbF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17bGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25CZWZvcmU9e2xhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25BZnRlcj17Y2xvc2VCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ZlZWRiYWNrPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17ZGF0ZUZvcm1hdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlU3RhdGVEYXRlRmllbGQuYmluZCh0aGlzLCBsYWJlbCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnMuSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgICAgIDwvYnMuT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgPC9kaXY+O1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dCA9IDxkaXYgc3R5bGU9e2lucHV0U3R5bGV9IGtleT17XCJzZWFyY2hJbnB1dFwiICsgaX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnMuSW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBic1NpemU9e3RoaXMucHJvcHMuYnNTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnNlYXJjaE9iamVjdFtsYWJlbF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkb25CZWZvcmU9e2xhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkFmdGVyPXtjbG9zZUJ1dHRvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNGZWVkYmFjaz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17XCJFbnRlciBcIiArIGxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVN0YXRlRnVuY3NbbGFiZWxdfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnMuSW5wdXQ+XG4gICAgICAgICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChzZWFyY2hJbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e2N1c3RvbVNlYXJjaFN0eWxlfT5cbiAgICAgICAgICAgICAgICA8YnMuRHJvcGRvd24gaWQ9XCJkcm9wZG93blwiIHRpdGxlPVwiRHJvcGRvd25cIiBic1NpemU9e3RoaXMucHJvcHMuYnNTaXplfSBic1N0eWxlPVwicHJpbWFyeVwiIG9uU2VsZWN0PXt0aGlzLmhhbmRsZURyb3Bkb3duU2VsZWN0LmJpbmQodGhpcyl9PlxuICAgICAgICAgICAgICAgICAgICA8YnMuRHJvcGRvd24uVG9nZ2xlIGJzU3R5bGU9XCJwcmltYXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnMuR2x5cGhpY29uIGdseXBoPVwic2VhcmNoXCIvPlxuICAgICAgICAgICAgICAgICAgICA8L2JzLkRyb3Bkb3duLlRvZ2dsZT5cbiAgICAgICAgICAgICAgICAgICAgPGJzLkRyb3Bkb3duLk1lbnU+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVudUl0ZW1zfVxuICAgICAgICAgICAgICAgICAgICA8L2JzLkRyb3Bkb3duLk1lbnU+XG4gICAgICAgICAgICAgICAgPC9icy5Ecm9wZG93bj5cbiAgICAgICAgICAgICAgICA8Zm9ybSBvbnN1Ym1pdD17dGhpcy5zdWJtaXRTZWFyY2guYmluZCh0aGlzKX0gc3R5bGU9e2N1c3RvbVNlYXJjaFN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5zdGF0ZS5zZWFyY2hPYmplY3QpLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJzLkJ1dHRvbklucHV0IHR5cGU9XCJzdWJtaXRcIiBic1N0eWxlPVwicHJpbWFyeVwiIG9uQ2xpY2s9e3RoaXMuc3VibWl0U2VhcmNoLmJpbmQodGhpcyl9PiBTZWFyY2ggPC9icy5CdXR0b25JbnB1dD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3VzdG9tU2VhcmNoVG9vbDtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJDdXN0b21TZWFyY2hUb29sXCIsIEN1c3RvbVNlYXJjaFRvb2wpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL291dHRzL3JlYWN0LWZsZXhpYmxlLWxheW91dC9MYXlvdXQuanN4XCI7XG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgV2VhdmVQYW5lbCBmcm9tIFwiLi9XZWF2ZVBhbmVsLmpzXCI7XG5pbXBvcnQgKiBhcyBXZWF2ZVBhbmVsTWFuYWdlciBmcm9tIFwiLi9XZWF2ZVBhbmVsTWFuYWdlci5qc1wiO1xuaW1wb3J0IFdlYXZlQzNCYXJjaGFydCBmcm9tIFwiLi4vb3V0dHMvdG9vbHMvd2VhdmUtYzMtYmFyY2hhcnQuanN4XCI7XG5pbXBvcnQgV2VhdmVDM1NjYXR0ZXJQbG90IGZyb20gXCIuLi9vdXR0cy90b29scy93ZWF2ZS1jMy1zY2F0dGVycGxvdC5qc3hcIjtcbmltcG9ydCBXZWF2ZUMzQ29sb3JMZWdlbmQgZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLWNvbG9ybGVnZW5kLmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNMaW5lQ2hhcnQgZnJvbSBcIi4vdG9vbHMvd2VhdmUtYzMtbGluZWNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNQaWVDaGFydCBmcm9tIFwiLi4vb3V0dHMvdG9vbHMvd2VhdmUtYzMtcGllY2hhcnQuanN4XCI7XG5pbXBvcnQgV2VhdmVDM0hpc3RvZ3JhbSBmcm9tIFwiLi4vb3V0dHMvdG9vbHMvd2VhdmUtYzMtaGlzdG9ncmFtLmpzeFwiO1xuaW1wb3J0IEJhcmNoYXJ0IGZyb20gXCIuL3Rvb2xzL3dlYXZlLWJhcmNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlT3BlbkxheWVyc01hcCBmcm9tIFwiLi90b29scy9tYXAuanNcIjtcbmltcG9ydCBXZWF2ZVJlYWN0VGFibGUgZnJvbSBcIi4vdG9vbHMvd2VhdmUtcmVhY3QtdGFibGUuanN4XCI7XG5pbXBvcnQgU2Vzc2lvblN0YXRlTWVudVRvb2wgZnJvbSBcIi4vdG9vbHMvd2VhdmUtc2Vzc2lvbi1zdGF0ZS1tZW51LmpzeFwiO1xuaW1wb3J0IEN1c3RvbVNlYXJjaFRvb2wgZnJvbSBcIi4vQ3VzdG9tU2VhcmNoVG9vbC5qc3hcIjtcbi8qIGdsb2JhbCBXZWF2ZSwgd2VhdmVqcyAqL1xuaW1wb3J0IHtXZWF2ZVRvb2wsIGdldFRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uL291dHRzL1dlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBUb29sT3ZlcmxheSBmcm9tIFwiLi4vb3V0dHMvVG9vbE92ZXJsYXkuanN4XCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uL291dHRzL3V0aWxzL1N0YW5kYXJkTGliLmpzXCI7XG5cbmNvbnN0IExBWU9VVCA9IFwiTGF5b3V0XCI7XG5cbmNvbnN0IExFRlQgPSBcImxlZnRcIjtcbmNvbnN0IFJJR0hUID0gXCJyaWdodFwiO1xuY29uc3QgVE9QID0gXCJ0b3BcIjtcbmNvbnN0IEJPVFRPTSA9IFwiYm90dG9tXCI7XG5jb25zdCBWRVJUSUNBTCA9IFwidmVydGljYWxcIjtcbmNvbnN0IEhPUklaT05UQUwgPSBcImhvcml6b250YWxcIjtcblxuY29uc3QgVE9PTE9WRVJMQVkgPSBcInRvb2xvdmVybGF5XCI7XG5cbmNsYXNzIFdlYXZlTGF5b3V0TWFuYWdlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMud2VhdmUgPSB0aGlzLnByb3BzLndlYXZlIHx8IG5ldyBXZWF2ZSgpO1xuICAgICAgICB0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5yZXF1ZXN0KFwiRmxleGlibGVMYXlvdXRcIik7XG4gICAgICAgIHRoaXMubWFyZ2luID0gODtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5fZm9yY2VVcGRhdGUgPSBfLnRocm90dGxlKCgpID0+IHsgdGhpcy5kaXJ0eSA9IHRydWU7IHRoaXMuZm9yY2VVcGRhdGUoKTsgfSwgMzApKTtcbiAgICAgICAgdGhpcy53ZWF2ZS5yb290LmNoaWxkTGlzdENhbGxiYWNrcy5hZGRHcm91cGVkQ2FsbGJhY2sodGhpcywgXy5kZWJvdW5jZSh0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyksIDApLCB0cnVlKTtcbiAgICAgICAgdGhpcy53ZWF2ZS5yb290LmNoaWxkTGlzdENhbGxiYWNrcy5hZGRHcm91cGVkQ2FsbGJhY2sodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRlc3QgY2hpbGQgbGlzdCBjYWxsYmFja1wiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMud2VhdmUucGF0aChMQVlPVVQpLmFkZENhbGxiYWNrKHRoaXMsIF8uZGVib3VuY2UodGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMpLCAwKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMud2VhdmUucGF0aChMQVlPVVQpLnN0YXRlKHRoaXMuc2ltcGxpZnlTdGF0ZSh0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5nZXRTdGF0ZSgpKSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMuX2ZvcmNlVXBkYXRlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIGlmKFdlYXZlLmRldGVjdENoYW5nZSh0aGlzLCB0aGlzLndlYXZlLmdldE9iamVjdChMQVlPVVQpKSB8fCB0aGlzLmRpcnR5KSB7XG4gICAgICAgICAgICAvLyBkaXJ0eSBmbGFnIHRvIHRyaWdnZXIgcmVuZGVyIG9uIHdpbmRvdyByZXNpemVcbiAgICAgICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vXy5kZWJvdW5jZSh0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyksIDApKCk7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzYXZlU3RhdGUobmV3U3RhdGUpIHtcbiAgICAgICAgbmV3U3RhdGUgPSB0aGlzLnNpbXBsaWZ5U3RhdGUobmV3U3RhdGUpO1xuICAgICAgICBuZXdTdGF0ZS5mbGV4ID0gMTtcbiAgICAgICAgdGhpcy53ZWF2ZS5wYXRoKExBWU9VVCkuc3RhdGUobmV3U3RhdGUpO1xuICAgICAgICAvLyB0ZW1wb3JhcnkgaGFjayBiZWNhdXNlIHdlYXZlXG4gICAgICAgIC8vIGRvZXNuJ3QgcHJvcGVybHkgY2FsbGJhY2sgZm9yY2VVcGRhdGVcbiAgICAgICAgLy90aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgfVxuXG4gICAgb25EcmFnU3RhcnQoaWQsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMudG9vbERyYWdnZWQgPSBpZDtcbiAgICAgICAgdmFyIHRvb2xSZWYgPSBpZFswXTsgLy8gdG9vbE5hbWUgYXMgdXNlZCBpbiB0aGUgcmVmIGZvciB0aGUgd2VhdmUgdG9vbC5cbiAgICAgICAgdmFyIGVsZW1lbnQgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbdG9vbFJlZl0pO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGVsZW1lbnQsIDAsIDApO1xuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgbnVsbCk7XG4gICAgfVxuXG4gICAgaGlkZU92ZXJsYXkoKSB7XG4gICAgICAgIHZhciB0b29sT3ZlcmxheVN0eWxlID0gXy5jbG9uZSh0aGlzLnJlZnNbVE9PTE9WRVJMQVldLnN0YXRlLnN0eWxlKTtcbiAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS5sZWZ0ID0gdG9vbE92ZXJsYXlTdHlsZS50b3AgPSB0b29sT3ZlcmxheVN0eWxlLndpZHRoID0gdG9vbE92ZXJsYXlTdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLnJlZnNbVE9PTE9WRVJMQVldLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHN0eWxlOiB0b29sT3ZlcmxheVN0eWxlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRHJhZ0VuZCgpIHtcbiAgICAgICAgaWYodGhpcy50b29sRHJhZ2dlZCAmJiB0aGlzLnRvb2xPdmVyKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCh0aGlzLnRvb2xEcmFnZ2VkLCB0aGlzLnRvb2xPdmVyLCB0aGlzLmRyb3Bab25lKTtcbiAgICAgICAgICAgIHRoaXMudG9vbERyYWdnZWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5kcm9wWm9uZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhpZGVPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkRyYWdPdmVyKHRvb2xPdmVyLCBldmVudCkge1xuICAgICAgICBpZighdGhpcy50b29sRHJhZ2dlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKF8uaXNFcXVhbCh0aGlzLnRvb2xEcmFnZ2VkLCB0b29sT3ZlcikpIHtcbiAgICAgICAgICAgIC8vIGhpZGUgdGhlIG92ZXJsYXkgaWYgaG92ZXJpbmcgb3ZlciB0aGUgdG9vbCBiZWluZyBkcmFnZ2VkXG4gICAgICAgICAgICB0aGlzLnRvb2xPdmVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaGlkZU92ZXJsYXkoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b29sTm9kZSA9IHRoaXMucmVmc1tMQVlPVVRdLmdldERPTU5vZGVGcm9tSWQodG9vbE92ZXIpO1xuICAgICAgICB2YXIgdG9vbE5vZGVQb3NpdGlvbiA9IHRvb2xOb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHZhciB0b29sT3ZlcmxheVN0eWxlID0gXy5jbG9uZSh0aGlzLnJlZnNbVE9PTE9WRVJMQVldLnN0YXRlLnN0eWxlKTtcbiAgICAgICAgdmFyIGRyb3Bab25lID0gdGhpcy5nZXREcm9wWm9uZSh0b29sT3ZlciwgZXZlbnQpO1xuICAgICAgICB0b29sT3ZlcmxheVN0eWxlLmxlZnQgPSB0b29sTm9kZVBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIHRvb2xPdmVybGF5U3R5bGUudG9wID0gdG9vbE5vZGVQb3NpdGlvbi50b3A7XG4gICAgICAgIHRvb2xPdmVybGF5U3R5bGUud2lkdGggPSB0b29sTm9kZVBvc2l0aW9uLndpZHRoO1xuICAgICAgICB0b29sT3ZlcmxheVN0eWxlLmhlaWdodCA9IHRvb2xOb2RlUG9zaXRpb24uaGVpZ2h0O1xuICAgICAgICB0b29sT3ZlcmxheVN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICBpZihkcm9wWm9uZSA9PT0gTEVGVCkge1xuICAgICAgICAgICAgdG9vbE92ZXJsYXlTdHlsZS53aWR0aCA9IHRvb2xOb2RlUG9zaXRpb24ud2lkdGggLyAyO1xuICAgICAgICB9IGVsc2UgaWYoZHJvcFpvbmUgPT09IFJJR0hUKSB7XG4gICAgICAgICAgICB0b29sT3ZlcmxheVN0eWxlLmxlZnQgPSB0b29sTm9kZVBvc2l0aW9uLmxlZnQgKyB0b29sTm9kZVBvc2l0aW9uLndpZHRoIC8gMjtcbiAgICAgICAgICAgIHRvb2xPdmVybGF5U3R5bGUud2lkdGggPSB0b29sTm9kZVBvc2l0aW9uLndpZHRoIC8gMjtcbiAgICAgICAgfSBlbHNlIGlmKGRyb3Bab25lID09PSBCT1RUT00pIHtcbiAgICAgICAgICAgIHRvb2xPdmVybGF5U3R5bGUudG9wID0gdG9vbE5vZGVQb3NpdGlvbi50b3AgKyB0b29sTm9kZVBvc2l0aW9uLmhlaWdodCAvIDI7XG4gICAgICAgICAgICB0b29sT3ZlcmxheVN0eWxlLmhlaWdodCA9IHRvb2xOb2RlUG9zaXRpb24uaGVpZ2h0IC8gMjtcbiAgICAgICAgfSBlbHNlIGlmKGRyb3Bab25lID09PSBUT1ApIHtcbiAgICAgICAgICAgIHRvb2xPdmVybGF5U3R5bGUuaGVpZ2h0ID0gdG9vbE5vZGVQb3NpdGlvbi5oZWlnaHQgLyAyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRyb3Bab25lICE9PSB0aGlzLmRyb3Bab25lIHx8ICFfLmlzRXF1YWwodG9vbE92ZXIsIHRoaXMudG9vbE92ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnNbVE9PTE9WRVJMQVldLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzdHlsZTogdG9vbE92ZXJsYXlTdHlsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRyb3Bab25lID0gZHJvcFpvbmU7XG4gICAgICAgIHRoaXMudG9vbE92ZXIgPSB0b29sT3ZlcjtcbiAgICB9XG5cbiAgICBnZXREcm9wWm9uZShpZCwgZXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy50b29sRHJhZ2dlZCkge1xuICAgICAgICAgICAgaWYoIV8uaXNFcXVhbCh0aGlzLnRvb2xEcmFnZ2VkLCBpZCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9vbE5vZGUgPSB0aGlzLnJlZnNbTEFZT1VUXS5nZXRET01Ob2RlRnJvbUlkKGlkKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9vbE5vZGVQb3NpdGlvbiA9IHRvb2xOb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogKHRvb2xOb2RlUG9zaXRpb24ucmlnaHQgLSB0b29sTm9kZVBvc2l0aW9uLmxlZnQpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgeTogKHRvb2xOb2RlUG9zaXRpb24uYm90dG9tIC0gdG9vbE5vZGVQb3NpdGlvbi50b3ApIC8gMlxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgbW91c2VQb3NSZWxhdGl2ZVRvQ2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiBldmVudC5jbGllbnRYIC0gKHRvb2xOb2RlUG9zaXRpb24ubGVmdCArIGNlbnRlci54KSxcbiAgICAgICAgICAgICAgICAgICAgeTogZXZlbnQuY2xpZW50WSAtICh0b29sTm9kZVBvc2l0aW9uLnRvcCArIGNlbnRlci55KVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgbW91c2VOb3JtID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiAobW91c2VQb3NSZWxhdGl2ZVRvQ2VudGVyLngpIC8gKHRvb2xOb2RlUG9zaXRpb24ud2lkdGggLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgeTogKG1vdXNlUG9zUmVsYXRpdmVUb0NlbnRlci55KSAvICh0b29sTm9kZVBvc2l0aW9uLmhlaWdodCAvIDIpXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBtb3VzZVBvbGFyQ29vcmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHI6IE1hdGguc3FydChtb3VzZU5vcm0ueCAqIG1vdXNlTm9ybS54ICsgbW91c2VOb3JtLnkgKiBtb3VzZU5vcm0ueSksXG4gICAgICAgICAgICAgICAgICAgIHRoZXRhOiBNYXRoLmF0YW4yKG1vdXNlTm9ybS55LCBtb3VzZU5vcm0ueClcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIHpvbmVzID0gW1JJR0hULCBCT1RUT00sIExFRlQsIFRPUF07XG5cbiAgICAgICAgICAgICAgICB2YXIgem9uZUluZGV4ID0gTWF0aC5yb3VuZCgobW91c2VQb2xhckNvb3JkLnRoZXRhIC8gKDIgKiBNYXRoLlBJKSAqIDQpICsgNCkgJSA0O1xuXG4gICAgICAgICAgICAgICAgaWYobW91c2VQb2xhckNvb3JkLnIgPCAwLjM0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB6b25lc1t6b25lSW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNpbXBsaWZ5U3RhdGUoc3RhdGUpIHtcbiAgICBcdGlmICghc3RhdGUpXG4gICAgXHRcdHJldHVybiB7fTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gc3RhdGUuY2hpbGRyZW47XG5cbiAgICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlTdGF0ZShjaGlsZHJlblswXSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2ltcGxlQ2hpbGRyZW4gPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLnNpbXBsaWZ5U3RhdGUoY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuICYmIGNoaWxkLmRpcmVjdGlvbiA9PT0gc3RhdGUuZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkQ2hpbGRyZW4gPSBjaGlsZC5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgY2hpbGRDaGlsZHJlbi5sZW5ndGg7IGlpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQ2hpbGQgPSBjaGlsZENoaWxkcmVuW2lpXTtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRDaGlsZC5mbGV4ICo9IGNoaWxkLmZsZXg7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUNoaWxkcmVuLnB1c2goY2hpbGRDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2ltcGxlQ2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuY2hpbGRyZW4gPSBzaW1wbGVDaGlsZHJlbjtcbiAgICAgICAgdmFyIHRvdGFsU2l6ZUNoaWxkcmVuID0gXy5zdW0oXy5tYXAoY2hpbGRyZW4sIFwiZmxleFwiKSk7XG5cbiAgICAgICAgLy9TY2FsZSBmbGV4IHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDEgc28gdGhleSBzdW0gdG8gMSwgYXZvaWRpbmcgYW4gYXBwYXJlbnRcbiAgICAgICAgLy9mbGV4IGJ1ZyB3aGVyZSBzcGFjZSBpcyBsb3N0IGlmIHN1bSBvZiBmbGV4IHZhbHVlcyBpcyBsZXNzIHRoYW4gMS5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3RhdGUuY2hpbGRyZW5baV0uZmxleCA9IFN0YW5kYXJkTGliLm5vcm1hbGl6ZShzdGF0ZS5jaGlsZHJlbltpXS5mbGV4LCAwLCB0b3RhbFNpemVDaGlsZHJlbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgdXBkYXRlTGF5b3V0KHRvb2xEcmFnZ2VkLCB0b29sRHJvcHBlZE9uLCBkcm9wWm9uZSkge1xuXG4gICAgICAgIGlmKCF0aGlzLnRvb2xEcmFnZ2VkIHx8ICF0aGlzLnRvb2xPdmVyIHx8ICF0aGlzLmRyb3Bab25lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3U3RhdGUgPSBfLmNsb25lRGVlcCh0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5nZXRTdGF0ZSgpKTtcbiAgICAgICAgdmFyIHNyYyA9IFN0YW5kYXJkTGliLmZpbmREZWVwKG5ld1N0YXRlLCB7aWQ6IHRvb2xEcmFnZ2VkfSk7XG4gICAgICAgIHZhciBkZXN0ID0gU3RhbmRhcmRMaWIuZmluZERlZXAobmV3U3RhdGUsIHtpZDogdG9vbERyb3BwZWRPbn0pO1xuICAgICAgICBpZihfLmlzRXF1YWwoc3JjLmlkLCBkZXN0LmlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZHJvcFpvbmUgPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgIHZhciBzcmNJZCA9IHNyYy5pZDtcbiAgICAgICAgICAgIHNyYy5pZCA9IGRlc3QuaWQ7XG4gICAgICAgICAgICBkZXN0LmlkID0gc3JjSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc3JjUGFyZW50QXJyYXkgPSBTdGFuZGFyZExpYi5maW5kRGVlcChuZXdTdGF0ZSwgKG9iaikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgJiYgb2JqLmluZGV4T2Yoc3JjKSA+PSAwO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNyY1BhcmVudEFycmF5LnNwbGljZShzcmNQYXJlbnRBcnJheS5pbmRleE9mKHNyYyksIDEpO1xuXG4gICAgICAgICAgICBkZWxldGUgZGVzdC5pZDtcbiAgICAgICAgICAgIGRlc3QuZGlyZWN0aW9uID0gKGRyb3Bab25lID09PSBUT1AgfHwgZHJvcFpvbmUgPT09IEJPVFRPTSkgPyBWRVJUSUNBTCA6IEhPUklaT05UQUw7XG5cbiAgICAgICAgICAgIGRlc3QuY2hpbGRyZW4gPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbERyYWdnZWQsXG4gICAgICAgICAgICAgICAgICAgIGZsZXg6IDAuNVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbERyb3BwZWRPbixcbiAgICAgICAgICAgICAgICAgICAgZmxleDogMC41XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmKGRyb3Bab25lID09PSBCT1RUT00gfHwgZHJvcFpvbmUgPT09IFJJR0hUKSB7XG4gICAgICAgICAgICAgICAgZGVzdC5jaGlsZHJlbi5yZXZlcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zYXZlU3RhdGUobmV3U3RhdGUpO1xuICAgIH1cblxuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuICAgICAgICB2YXIgbmV3U3RhdGUgPSB0aGlzLndlYXZlLnBhdGgoTEFZT1VUKS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHZhciBwYXRocyA9IHRoaXMud2VhdmUucGF0aCgpLmdldENoaWxkcmVuKCk7XG4gICAgICAgIHZhciByZWN0O1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gcGF0aHNbaV07XG4gICAgICAgICAgICB2YXIgaW1wbCA9IHBhdGguZ2V0VHlwZSgpO1xuICAgICAgICAgICAgaWYoaW1wbCA9PT0gXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpFeHRlcm5hbFRvb2xcIiAmJiBwYXRoLmdldFR5cGUoXCJ0b29sQ2xhc3NcIikpIHtcbiAgICAgICAgICAgICAgICBpbXBsID0gcGF0aC5nZXRTdGF0ZShcInRvb2xDbGFzc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbXBsID09PSBcIndlYXZlanMuY29yZS5MaW5rYWJsZUhhc2hNYXBcIiAmJiBwYXRoLmdldFR5cGUoXCJjbGFzc1wiKSlcbiAgICAgICAgICAgIGltcGwgPSBwYXRoLmdldFN0YXRlKFwiY2xhc3NcIik7XG4gICAgICAgICAgICBpbXBsID0gZ2V0VG9vbEltcGxlbWVudGF0aW9uKGltcGwpO1xuICAgICAgICAgICAgdmFyIHRvb2xOYW1lID0gcGF0aC5nZXRQYXRoKClbMF07XG4gICAgICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgICAgIHZhciB0b29sUmVjdDtcbiAgICAgICAgICAgIHZhciB0b29sUG9zaXRpb247XG4gICAgICAgICAgICBpZihpbXBsKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5yZWZzW0xBWU9VVF0gJiYgcmVjdCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gdGhpcy5yZWZzW0xBWU9VVF0uZ2V0RE9NTm9kZUZyb21JZChwYXRoLmdldFBhdGgoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xSZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xQb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHRvb2xSZWN0LnRvcCAtIHJlY3QudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRvb2xSZWN0LmxlZnQgLSByZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRvb2xSZWN0LnJpZ2h0IC0gdG9vbFJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRvb2xSZWN0LmJvdHRvbSAtIHRvb2xSZWN0LnRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goPFdlYXZlVG9vbCByZWY9e3Rvb2xOYW1lfSBrZXk9e3Rvb2xOYW1lfSB0b29sUGF0aD17cGF0aH0gc3R5bGU9e3Rvb2xQb3NpdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17dGhpcy5vbkRyYWdPdmVyLmJpbmQodGhpcywgcGF0aC5nZXRQYXRoKCkpfSBvbkRyYWdTdGFydD17dGhpcy5vbkRyYWdTdGFydC5iaW5kKHRoaXMsIHBhdGguZ2V0UGF0aCgpKX0gb25EcmFnRW5kPXt0aGlzLm9uRHJhZ0VuZC5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICAvPik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPXsoZWx0KSA9PiB7IHRoaXMuZWxlbWVudCA9IGVsdDsgfX0gc3R5bGU9e3t3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIsIGRpc3BsYXk6IFwiZmxleFwiLCBwb3NpdGlvbjogXCJyZWxhdGl2ZVwifX0+XG4gICAgICAgICAgICAgICAgICAgIDxMYXlvdXQga2V5PXtMQVlPVVR9IHJlZj17TEFZT1VUfSBzdGF0ZT17Xy5jbG9uZURlZXAobmV3U3RhdGUpfSBvblN0YXRlQ2hhbmdlPXt0aGlzLnNhdmVTdGF0ZS5iaW5kKHRoaXMpfS8+XG4gICAgICAgICAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICAgICAgICAgICAgPFRvb2xPdmVybGF5IHJlZj17VE9PTE9WRVJMQVl9Lz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0IGRlZmF1bHQgV2VhdmVMYXlvdXRNYW5hZ2VyO1xuIiwiaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcblxuZnVuY3Rpb24gcGVyY2VudFRvTnVtYmVyKHBlcmNlbnRTdHJpbmcpXG57XG4gICAgaWYgKHBlcmNlbnRTdHJpbmcuZW5kc1dpdGgoXCIlXCIpKVxuICAgIHtcbiAgICAgICAgdmFyIHBlcmNlbnRWYWx1ZSA9IE51bWJlcihwZXJjZW50U3RyaW5nLnN1YnN0cmluZygwLCBwZXJjZW50U3RyaW5nLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgcmV0dXJuIHBlcmNlbnRWYWx1ZSAvIDEwMC4wO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHBlcmNlbnRTdHJpbmcpO1xuICAgIH1cbn1cblxuY2xhc3MgV2VhdmVQYW5lbCB7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHRvb2xQYXRoLCBUb29sQ2xhc3MpIHtcbiAgICAgICAgdGhpcy50b29sUGF0aCA9IHRvb2xQYXRoO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblxuICAgICAgICB0aGlzLnBsb3RNYW5hZ2VyUGF0aCA9IHRvb2xQYXRoLnB1c2goXCJjaGlsZHJlblwiLCBcInZpc3VhbGl6YXRpb25cIiwgXCJwbG90TWFuYWdlclwiKTtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xQYXRoLmdldFBhdGgoKS5wb3AoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0ganF1ZXJ5KFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kVG8ocGFyZW50KS5hdHRyKFwiaWRcIiwgdGhpcy50b29sTmFtZSlcbiAgICAgICAgICAgIC5jc3MoXCJib3JkZXJTdHlsZVwiLCBcInNvbGlkXCIpXG4gICAgICAgICAgICAuY3NzKFwiYm9yZGVyQ29sb3JcIiwgXCI0RDUyNThcIilcbiAgICAgICAgICAgIC5jc3MoXCJib3JkZXJXaWR0aFwiLCBcIjJweFwiKVxuICAgICAgICAgICAgLmNzcyhcImJhY2tncm91bmRcIiwgXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEuMClcIilcbiAgICAgICAgICAgIC5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpO1xuXG4gICAgICAgIHRoaXMudG9vbCA9IG5ldyBUb29sQ2xhc3ModGhpcy5lbGVtZW50LCB0b29sUGF0aCk7XG4gICAgICAgIHZhciBib3VuZEZ1bmMgPSBsb2Rhc2guZGVib3VuY2UodGhpcy5fcGFuZWxDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG5cbiAgICAgICAganF1ZXJ5KHdpbmRvdykucmVzaXplKGJvdW5kRnVuYyk7XG5cbiAgICAgICAgW1wicGFuZWxZXCIsIFwicGFuZWxYXCIsIFwicGFuZWxIZWlnaHRcIiwgXCJwYW5lbFdpZHRoXCIsIFwibWF4aW1pemVkXCIsIFwiek9yZGVyXCIsIFwicGFuZWxCb3JkZXJDb2xvclwiXS5mb3JFYWNoKFxuICAgICAgICAgICAgKGl0ZW0pID0+IHsgdGhpcy50b29sUGF0aC5wdXNoKGl0ZW0pLmFkZENhbGxiYWNrKGJvdW5kRnVuYywgdHJ1ZSwgZmFsc2UpOyB9XG4gICAgICAgICwgdGhpcyk7XG5cbiAgICB9XG5cbiAgICBfcGFuZWxDaGFuZ2VkKCkge1xuICAgICAgICB2YXIgdG9wLCBsZWZ0LCBoZWlnaHQsIHdpZHRoO1xuICAgICAgICB2YXIgdG9vbFBhdGggPSB0aGlzLnRvb2xQYXRoO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG5cbiAgICAgICAgaWYgKHRvb2xQYXRoLmdldFN0YXRlKFwibWF4aW1pemVkXCIpKVxuICAgICAgICB7XG4gICAgICAgICAgICB0b3AgPSAwO1xuICAgICAgICAgICAgbGVmdCA9IDA7XG4gICAgICAgICAgICBoZWlnaHQgPSBqcXVlcnkocGFyZW50KS5oZWlnaHQoKTtcbiAgICAgICAgICAgIHdpZHRoID0ganF1ZXJ5KHBhcmVudCkud2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRvcCA9IHBlcmNlbnRUb051bWJlcih0b29sUGF0aC5nZXRTdGF0ZShcInBhbmVsWVwiKSkgKiBqcXVlcnkocGFyZW50KS5oZWlnaHQoKTtcbiAgICAgICAgICAgIGxlZnQgPSBwZXJjZW50VG9OdW1iZXIodG9vbFBhdGguZ2V0U3RhdGUoXCJwYW5lbFhcIikpICoganF1ZXJ5KHBhcmVudCkud2lkdGgoKTtcbiAgICAgICAgICAgIGhlaWdodCA9IHBlcmNlbnRUb051bWJlcih0b29sUGF0aC5nZXRTdGF0ZShcInBhbmVsSGVpZ2h0XCIpKSAqIGpxdWVyeShwYXJlbnQpLmhlaWdodCgpO1xuICAgICAgICAgICAgd2lkdGggPSBwZXJjZW50VG9OdW1iZXIodG9vbFBhdGguZ2V0U3RhdGUoXCJwYW5lbFdpZHRoXCIpKSAqIGpxdWVyeShwYXJlbnQpLndpZHRoKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsZW1lbnQuY3NzKFwiYm9yZGVyQ29sb3JcIiwgdG9vbFBhdGguZ2V0U3RhdGUoXCJwYW5lbEJvcmRlckNvbG9yXCIpKTtcblxuICAgICAgICB0aGlzLmVsZW1lbnQuY3NzKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKVxuICAgICAgICAgICAgLmNzcyh7dG9wLCBsZWZ0LCBoZWlnaHQsIHdpZHRoLCBcIm1heC1oZWlnaHRcIjogaGVpZ2h0LCBcIm1heC13aWR0aFwiOiB3aWR0aH0pXG4gICAgICAgICAgICAuY3NzKHtcIi13ZWJraXQtdHJhbnNmb3JtXCI6IFwidHJhbnNsYXRlWigwKVwifSk7IC8qIEluIFdlYmtpdCwgZm9yY2VzIHRoZSBkaXYgdG8gYmUgYSBjb21wb3NpdGluZyBsYXllci4gKi9cbiAgICAgICAgdGhpcy5fdXBkYXRlQ29udGVudHMoKTtcbiAgICB9XG5cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMudG9vbC5kZXN0cm95KCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXZWF2ZVBhbmVsO1xuIiwiaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBXZWF2ZVBhbmVsIGZyb20gXCIuL1dlYXZlUGFuZWwuanNcIjtcbi8qKlxuICogV2VhdmUgcGFuZWwgbWFuYWdlciBcInNpbmdsZXRvblwiIG1vZHVsZVxuICovXG5cbnZhciB0b29sUmVnaXN0cnkgPSBudWxsO1xudmFyIHRvb2xzID0ge307XG52YXIgd2VhdmVSb290RWxtdCA9IG51bGw7XG52YXIgd2VhdmVSb290UGF0aCA9IG51bGw7XG5cbmZ1bmN0aW9uIF9jcmVhdGVUb29sKHBhcmVudCwgcGF0aCkge1xuICAgIHZhciBUb29sQ2xhc3MgPSB0b29sUmVnaXN0cnlbcGF0aC5nZXRUeXBlKCldO1xuICAgIHZhciBwYW5lbDtcblxuICAgIGlmIChUb29sQ2xhc3MpXG4gICAge1xuICAgICAgICBwYW5lbCA9IG5ldyBXZWF2ZVBhbmVsKHBhcmVudCwgcGF0aCwgVG9vbENsYXNzKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhbmVsO1xufVxuXG5mdW5jdGlvbiBfdG9vbHNDaGFuZ2VkKCkge1xuICAgIHZhciB0b29sTmFtZXMgPSBsb2Rhc2gua2V5cyh0b29scyk7XG4gICAgdmFyIG5ld05hbWVzID0gd2VhdmVSb290UGF0aC5nZXROYW1lcygpO1xuXG4gICAgdmFyIHJlbW92ZWRUb29sTmFtZXMgPSBsb2Rhc2guZGlmZmVyZW5jZSh0b29sTmFtZXMsIG5ld05hbWVzKTtcbiAgICB2YXIgYWRkZWRUb29sTmFtZXMgPSBsb2Rhc2guZGlmZmVyZW5jZShuZXdOYW1lcywgdG9vbE5hbWVzKTtcblxuICAgIHJlbW92ZWRUb29sTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB0b29sc1tuYW1lXS5kZXN0cm95KCk7XG4gICAgICAgIGRlbGV0ZSB0b29sc1tuYW1lXTtcbiAgICB9KTtcblxuICAgIGFkZGVkVG9vbE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHRvb2wgPSBfY3JlYXRlVG9vbCh3ZWF2ZVJvb3RFbG10LCB3ZWF2ZVJvb3RQYXRoLnB1c2gobmFtZSkpO1xuICAgICAgICBpZiAodG9vbClcbiAgICAgICAge1xuICAgICAgICAgICAgdG9vbHNbbmFtZV0gPSB0b29sO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgekluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpZHggaW4gbmV3TmFtZXMpXG4gICAge1xuICAgICAgICBsZXQgdG9vbCA9IHRvb2xzW25ld05hbWVzW2lkeF1dO1xuXG4gICAgICAgIGlmICghdG9vbClcbiAgICAgICAge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbW9kaWZpZXIgPSA5MDAwICogdG9vbC50b29sUGF0aC5wdXNoKFwiek9yZGVyXCIpLmdldFN0YXRlKCk7XG4gICAgICAgIHRvb2wuZWxlbWVudC5jc3MoXCJ6LWluZGV4XCIsIHpJbmRleCArIG1vZGlmaWVyKTtcblxuICAgICAgICB6SW5kZXgrKztcbiAgICB9XG59XG5cbi8vIHB1YmxpY2x5IGV4cG9zZWQgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihhc0NsYXNzTmFtZSwganNDbGFzcykge1xuICAgIGlmICghdG9vbFJlZ2lzdHJ5KVxuICAgIHtcbiAgICAgICAgdG9vbFJlZ2lzdHJ5ID0ge307XG4gICAgfVxuICAgIHRvb2xSZWdpc3RyeVthc0NsYXNzTmFtZV0gPSBqc0NsYXNzO1xufVxuXG4vLyBwdWJsaWNseSBleHBvc2VkIGZ1bmN0aW9uXG4vLyBpbml0aWFsaXplIHRoZSB3ZWF2ZSBwYW5lbCBtYW5hZ2VyXG4vLyBieSBzZXR0aW5nIHVwIHRoZSBjYWxsYmFjay5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KHJvb3QsIHdlYXZlKSB7XG4gICAgd2VhdmVSb290RWxtdCA9IGpxdWVyeShyb290KTtcbiAgICB3ZWF2ZVJvb3RQYXRoID0gd2VhdmUucGF0aCgpO1xuICAgIHdlYXZlUm9vdFBhdGguZ2V0VmFsdWUoXCJjaGlsZExpc3RDYWxsYmFja3MuYWRkR3JvdXBlZENhbGxiYWNrXCIpKG51bGwsIF90b29sc0NoYW5nZWQsIHRydWUpO1xufVxuIiwiaW1wb3J0IFdlYXZlTGF5b3V0TWFuYWdlciBmcm9tIFwiLi9XZWF2ZUxheW91dE1hbmFnZXJcIjtcbmltcG9ydCBXZWF2ZUMzQmFyY2hhcnQgZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLWJhcmNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNTY2F0dGVyUGxvdCBmcm9tIFwiLi4vb3V0dHMvdG9vbHMvd2VhdmUtYzMtc2NhdHRlcnBsb3QuanN4XCI7XG5pbXBvcnQgV2VhdmVDM0NvbG9yTGVnZW5kIGZyb20gXCIuLi9vdXR0cy90b29scy93ZWF2ZS1jMy1jb2xvcmxlZ2VuZC5qc3hcIjtcbmltcG9ydCBXZWF2ZUMzTGluZUNoYXJ0IGZyb20gXCIuL3Rvb2xzL3dlYXZlLWMzLWxpbmVjaGFydC5qc3hcIjtcbmltcG9ydCBXZWF2ZUMzUGllQ2hhcnQgZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLXBpZWNoYXJ0LmpzeFwiO1xuaW1wb3J0IFdlYXZlQzNIaXN0b2dyYW0gZnJvbSBcIi4uL291dHRzL3Rvb2xzL3dlYXZlLWMzLWhpc3RvZ3JhbS5qc3hcIjtcbmltcG9ydCBXZWF2ZU9wZW5MYXllcnNNYXAgZnJvbSBcIi4vdG9vbHMvbWFwLmpzXCI7XG5pbXBvcnQgV2VhdmVSZWFjdFRhYmxlIGZyb20gXCIuL3Rvb2xzL3dlYXZlLXJlYWN0LXRhYmxlLmpzeFwiO1xuaW1wb3J0IFNlc3Npb25TdGF0ZU1lbnVUb29sIGZyb20gXCIuL3Rvb2xzL3dlYXZlLXNlc3Npb24tc3RhdGUtbWVudS5qc3hcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vb3V0dHMvdXRpbHMvU3RhbmRhcmRMaWIuanNcIjtcbmltcG9ydCBKU1ppcCBmcm9tIFwianN6aXBcIjtcblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcblxuLypnbG9iYWwgV2VhdmUsIHdlYXZlanMqL1xuXG53ZWF2ZWpzLnV0aWwuSlMuSlNaaXAgPSBKU1ppcDtcblxuLy8gdmFyIFdlYXZlVUkgPSB7XG4vLyAgICAgTGF5b3V0OiBXZWF2ZUxheW91dE1hbmFnZXIsXG4vLyAgICAgQmFyY2hhcnQ6IFdlYXZlQzNCYXJjaGFydCxcbi8vICAgICBTY2F0dGVyUGxvdDogV2VhdmVDM1NjYXR0ZXJQbG90LFxuLy8gICAgIENvbG9yTGVnZW5kOiBXZWF2ZUMzQ29sb3JMZWdlbmQsXG4vLyAgICAgTGluZUNoYXJ0OiBXZWF2ZUMzTGluZUNoYXJ0LFxuLy8gICAgIFBpZUNoYXJ0OiBXZWF2ZUMzUGllQ2hhcnQsXG4vLyAgICAgSGlzdG9ncmFtOiBXZWF2ZUMzSGlzdG9ncmFtLFxuLy8gICAgIE1hcDogV2VhdmVPcGVuTGF5ZXJzTWFwLFxuLy8gICAgIERhdGFUYWJsZTogV2VhdmVSZWFjdFRhYmxlLFxuLy8gICAgIE1lbnVUb29sOiBTZXNzaW9uU3RhdGVNZW51VG9vbCxcbi8vICAgICBnZXRVcmxQYXJhbXM6IFN0YW5kYXJkTGliLmdldFVybFBhcmFtcyxcbi8vICAgICBsb2FkTGF5b3V0OiBmdW5jdGlvbih3ZWF2ZSwgZmlsZU5hbWUsIHRhcmdldEVsdElkLCBjYWxsYmFjaykge1xuLy9cbi8vICAgICAgICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuLy8gICAgICAgICAgICAgUmVhY3RET00ucmVuZGVyKFxuLy8gICAgICAgICAgICAgICAgIDxXZWF2ZVVJLkxheW91dCB3ZWF2ZT17d2VhdmV9Lz4sXG4vLyAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0RWx0SWQpLFxuLy8gICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4vLyAgICAgICAgICAgICApO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICB3ZWF2ZWpzLmNvcmUuV2VhdmVBcmNoaXZlLmxvYWRVcmwod2VhdmUsIGZpbGVOYW1lKS50aGVuKHJlbmRlciwgZSA9PiB7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpXG4vLyAgICAgICAgIH0pO1xuLy9cbi8vICAgICB9XG4vLyB9O1xuLy9cbi8vIC8vIG5hbWVzcGFjZSBXZWF2ZVVJXG4vLyBleHBvcnQgZGVmYXVsdCBXZWF2ZVVJO1xuXG5leHBvcnQgdmFyIExheW91dCA9IFdlYXZlTGF5b3V0TWFuYWdlcjtcbmV4cG9ydCB2YXIgQmFyY2hhcnQgPSBXZWF2ZUMzQmFyY2hhcnQ7XG5leHBvcnQgdmFyIFNjYXR0ZXJQbG90ID0gV2VhdmVDM1NjYXR0ZXJQbG90O1xuZXhwb3J0IHZhciBDb2xvckxlZ2VuZCA9IFdlYXZlQzNDb2xvckxlZ2VuZDtcbmV4cG9ydCB2YXIgTGluZUNoYXJ0ID0gV2VhdmVDM0xpbmVDaGFydDtcbmV4cG9ydCB2YXIgUGllQ2hhcnQgPSBXZWF2ZUMzUGllQ2hhcnQ7XG5leHBvcnQgdmFyIEhpc3RvZ3JhbSA9IFdlYXZlQzNIaXN0b2dyYW07XG5leHBvcnQgdmFyIE1hcCA9IFdlYXZlT3BlbkxheWVyc01hcDtcbmV4cG9ydCB2YXIgRGF0YVRhYmxlID0gV2VhdmVSZWFjdFRhYmxlO1xuZXhwb3J0IHZhciBNZW51VG9vbCA9IFNlc3Npb25TdGF0ZU1lbnVUb29sO1xuZXhwb3J0IHZhciBnZXRVcmxQYXJhbXMgPSBTdGFuZGFyZExpYi5nZXRVcmxQYXJhbXM7XG5cbmV4cG9ydCB2YXIgbG9hZExheW91dCA9IGZ1bmN0aW9uKHdlYXZlLCBmaWxlTmFtZSwgdGFyZ2V0RWx0SWQsIGNhbGxiYWNrKSB7XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIFJlYWN0RE9NLnJlbmRlcihcbiAgICAgICAgICAgIDxXZWF2ZVVJLkxheW91dCB3ZWF2ZT17d2VhdmV9Lz4sXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRFbHRJZCksXG4gICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmKCFmaWxlTmFtZSAmJiB3ZWF2ZSkge1xuICAgICAgICByZW5kZXIoKTtcbiAgICB9XG5cbiAgICB3ZWF2ZWpzLmNvcmUuV2VhdmVBcmNoaXZlLmxvYWRVcmwod2VhdmUsIGZpbGVOYW1lKS50aGVuKHJlbmRlciwgZSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICB9KTtcbn07XG4iLCJpbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vLi4vb3V0dHMvV2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBqcXVlcnkgZnJvbSBcImpxdWVyeVwiO1xuXG5pbXBvcnQgQWJzdHJhY3RXZWF2ZVRvb2wgZnJvbSBcIi4uLy4uL291dHRzL3Rvb2xzL0Fic3RyYWN0V2VhdmVUb29sLmpzeFwiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IExheWVyIGZyb20gXCIuL21hcC9sYXllcnMvTGF5ZXIuanNcIjtcbmltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vbWFwL2xheWVycy9GZWF0dXJlTGF5ZXIuanNcIjtcbmltcG9ydCBHZW9tZXRyeUxheWVyIGZyb20gXCIuL21hcC9sYXllcnMvR2VvbWV0cnlMYXllci5qc1wiO1xuaW1wb3J0IFRpbGVMYXllciBmcm9tIFwiLi9tYXAvbGF5ZXJzL1RpbGVMYXllci5qc1wiO1xuaW1wb3J0IEltYWdlR2x5cGhMYXllciBmcm9tIFwiLi9tYXAvbGF5ZXJzL0ltYWdlR2x5cGhMYXllci5qc1wiO1xuaW1wb3J0IFNjYXR0ZXJQbG90TGF5ZXIgZnJvbSBcIi4vbWFwL2xheWVycy9TY2F0dGVyUGxvdExheWVyLmpzXCI7XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbi8qZ2xvYmFsIHdlYXZlanMqL1xuXG5pbXBvcnQge1BhbkNsdXN0ZXIsIEludGVyYWN0aW9uTW9kZUNsdXN0ZXJ9IGZyb20gXCIuL21hcC9jb250cm9scy5qc1wiO1xuaW1wb3J0IHdlYXZlTWFwSW50ZXJhY3Rpb25zIGZyb20gXCIuL21hcC9pbnRlcmFjdGlvbnMuanNcIjtcblxuY2xhc3MgV2VhdmVPcGVuTGF5ZXJzTWFwIGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuXG5cdGNvbnN0cnVjdG9yKHByb3BzKVxuXHR7XG5cdFx0c3VwZXIocHJvcHMpO1xuXG5cdFx0dGhpcy5sYXllcnMgPSB7fTtcblx0fVxuXG5cdGNvbXBvbmVudERpZE1vdW50KClcblx0e1xuXHRcdHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XG5cblx0XHR0aGlzLmludGVyYWN0aW9uTW9kZVBhdGggPSB0aGlzLnRvb2xQYXRoLndlYXZlLnBhdGgoXCJXZWF2ZVByb3BlcnRpZXNcIiwgXCJ0b29sSW50ZXJhY3Rpb25zXCIsIFwiZGVmYXVsdERyYWdNb2RlXCIpO1xuXG5cdFx0dGhpcy5tYXAgPSBuZXcgb2wuTWFwKHtcblx0XHRcdGludGVyYWN0aW9uczogd2VhdmVNYXBJbnRlcmFjdGlvbnModGhpcyksXG5cdFx0XHRjb250cm9sczogW10sXG5cdFx0XHR0YXJnZXQ6IHRoaXMuZWxlbWVudFxuXHRcdH0pO1xuXG5cblx0XHR0aGlzLnpvb21CdXR0b25zID0gbmV3IG9sLmNvbnRyb2wuWm9vbSgpO1xuXHRcdHRoaXMuc2xpZGVyID0gbmV3IG9sLmNvbnRyb2wuWm9vbVNsaWRlcigpO1xuXHRcdHRoaXMucGFuID0gbmV3IFBhbkNsdXN0ZXIoKTtcblxuXHRcdHRoaXMudG9vbFBhdGgucHVzaChcInByb2plY3Rpb25TUlNcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5vblByb2plY3Rpb25DaGFuZ2VkLCB0cnVlKTtcblx0XHR0aGlzLnRvb2xQYXRoLnB1c2goXCJzaG93Wm9vbUNvbnRyb2xzXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMub25ab29tQ29udHJvbFRvZ2dsZSwgdHJ1ZSk7XG5cdFx0dGhpcy50b29sUGF0aC5wdXNoKFwic2hvd01vdXNlTW9kZUNvbnRyb2xzXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMub25Nb3VzZU1vZGVDb250cm9sVG9nZ2xlLCB0cnVlKTtcblxuXHRcdHRoaXMubW91c2VNb2RlQnV0dG9ucyA9IG5ldyBJbnRlcmFjdGlvbk1vZGVDbHVzdGVyKHtpbnRlcmFjdGlvbk1vZGVQYXRoOiB0aGlzLmludGVyYWN0aW9uTW9kZVBhdGh9KTtcblxuXHRcdHRoaXMucGxvdHRlcnNQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoKFwiY2hpbGRyZW5cIiwgXCJ2aXN1YWxpemF0aW9uXCIsIFwicGxvdE1hbmFnZXJcIiwgXCJwbG90dGVyc1wiKTtcblx0XHR0aGlzLmxheWVyU2V0dGluZ3NQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoKFwiY2hpbGRyZW5cIiwgXCJ2aXN1YWxpemF0aW9uXCIsIFwicGxvdE1hbmFnZXJcIiwgXCJsYXllclNldHRpbmdzXCIpO1xuXHRcdHRoaXMuem9vbUJvdW5kc1BhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2goXCJjaGlsZHJlblwiLCBcInZpc3VhbGl6YXRpb25cIiwgXCJwbG90TWFuYWdlclwiLCBcInpvb21Cb3VuZHNcIik7XG5cblx0XHR0aGlzLnBsb3R0ZXJzUGF0aC5nZXRPYmplY3QoKS5jaGlsZExpc3RDYWxsYmFja3MuYWRkR3JvdXBlZENhbGxiYWNrKHRoaXMsIHRoaXMucGxvdHRlcnNDaGFuZ2VkLCB0cnVlKTtcblxuXHRcdHRoaXMuem9vbUJvdW5kc1BhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5nZXRTZXNzaW9uQ2VudGVyLCB0cnVlKTtcblx0fVxuXG5cdG9uUHJvamVjdGlvbkNoYW5nZWQoKVxuXHR7XG5cdFx0bGV0IHByb2plY3Rpb25TUlMgPSB0aGlzLnRvb2xQYXRoLnB1c2goXCJwcm9qZWN0aW9uU1JTXCIpLmdldFN0YXRlKCkgfHwgXCJFUFNHOjM4NTdcIjtcblx0XHRsZXQgdmlldyA9IG5ldyBvbC5WaWV3KHtwcm9qZWN0aW9uOiBwcm9qZWN0aW9uU1JTfSk7XG5cblx0XHR0aGlzLmNlbnRlckNhbGxiYWNrSGFuZGxlID0gdmlldy5vbihcImNoYW5nZTpjZW50ZXJcIiwgdGhpcy5zZXRTZXNzaW9uQ2VudGVyLCB0aGlzKTtcblx0XHR0aGlzLnJlc29sdXRpb25DYWxsYmFja0hhbmRsZSA9IHZpZXcub24oXCJjaGFuZ2U6cmVzb2x1dGlvblwiLCB0aGlzLnNldFNlc3Npb25ab29tLCB0aGlzKTtcblx0XHR0aGlzLm1hcC5zZXRWaWV3KHZpZXcpO1xuXG5cdFx0dGhpcy5nZXRTZXNzaW9uQ2VudGVyKCk7XG5cdH1cblxuXHRyZXNpemUoKVxuXHR7XG5cdFx0dGhpcy5tYXAudXBkYXRlU2l6ZSgpO1xuXHRcdHZhciB2aWV3cG9ydCA9IHRoaXMubWFwLmdldFZpZXdwb3J0KCk7XG5cdFx0dmFyIHNjcmVlbkJvdW5kcyA9IG5ldyB3ZWF2ZWpzLmdlb20uQm91bmRzMkQoMCwgMCwgdmlld3BvcnQuY2xpZW50V2lkdGgsIHZpZXdwb3J0LmNsaWVudEhlaWdodCk7XG5cdFx0dGhpcy56b29tQm91bmRzUGF0aC5nZXRPYmplY3QoKS5zZXRTY3JlZW5Cb3VuZHMoc2NyZWVuQm91bmRzLCB0cnVlKTtcblx0fVxuXG5cdHVwZGF0ZUNvbnRyb2xQb3NpdGlvbnMoKVxuXHR7XG5cdFx0aWYgKHRoaXMudG9vbFBhdGgucHVzaChcInNob3dab29tQ29udHJvbHNcIikuZ2V0U3RhdGUoKSlcblx0XHR7XG5cdFx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5maW5kKFwiLm9sLWNvbnRyb2wucGFuQ2x1c3RlclwiKS5jc3Moe3RvcDogXCIwLjVlbVwiLCBsZWZ0OiBcIjAuNWVtXCJ9KTtcblx0XHRcdGpxdWVyeSh0aGlzLmVsZW1lbnQpLmZpbmQoXCIub2wtY29udHJvbC5vbC16b29tXCIpLmNzcyh7dG9wOiBcIjUuNWVtXCIsIGxlZnQ6IFwiMi4wNzVlbVwifSk7XG5cdFx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5maW5kKFwiLm9sLWNvbnRyb2wub2wtem9vbXNsaWRlclwiKS5jc3Moe3RvcDogXCI5LjI1ZW1cIiwgbGVmdDogXCIyLjA3NWVtXCJ9KTtcblx0XHRcdGpxdWVyeSh0aGlzLmVsZW1lbnQpLmZpbmQoXCIub2wtY29udHJvbC5pTW9kZUNsdXN0ZXJcIikuY3NzKHt0b3A6IFwiMjAuNzVlbVwiLCBsZWZ0OiBcIjAuNmVtXCJ9KTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGpxdWVyeSh0aGlzLmVsZW1lbnQpLmZpbmQoXCIub2wtY29udHJvbFwiKTtcblx0XHR9XG5cdH1cblxuXG5cdG9uTW91c2VNb2RlQ29udHJvbFRvZ2dsZSgpXG5cdHtcblx0XHRsZXQgc2hvd01vdXNlTW9kZUNvbnRyb2xzID0gdGhpcy50b29sUGF0aC5wdXNoKFwic2hvd01vdXNlTW9kZUNvbnRyb2xzXCIpLmdldFN0YXRlKCk7XG5cdFx0aWYgKHNob3dNb3VzZU1vZGVDb250cm9scylcblx0XHR7XG5cdFx0XHR0aGlzLm1hcC5hZGRDb250cm9sKHRoaXMubW91c2VNb2RlQnV0dG9ucyk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMubW91c2VNb2RlQnV0dG9ucyk7XG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlQ29udHJvbFBvc2l0aW9ucygpO1xuXHR9XG5cblxuXHRvblpvb21Db250cm9sVG9nZ2xlKClcblx0e1xuXHRcdGxldCBzaG93Wm9vbUNvbnRyb2xzID0gdGhpcy50b29sUGF0aC5wdXNoKFwic2hvd1pvb21Db250cm9sc1wiKS5nZXRTdGF0ZSgpO1xuXHRcdGlmIChzaG93Wm9vbUNvbnRyb2xzKVxuXHRcdHtcblx0XHRcdHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5zbGlkZXIpO1xuXHRcdFx0dGhpcy5tYXAuYWRkQ29udHJvbCh0aGlzLnBhbik7XG5cdFx0XHR0aGlzLm1hcC5hZGRDb250cm9sKHRoaXMuem9vbUJ1dHRvbnMpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5tYXAucmVtb3ZlQ29udHJvbCh0aGlzLnNsaWRlcik7XG5cdFx0XHR0aGlzLm1hcC5yZW1vdmVDb250cm9sKHRoaXMucGFuKTtcblx0XHRcdHRoaXMubWFwLnJlbW92ZUNvbnRyb2wodGhpcy56b29tQnV0dG9ucyk7XG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlQ29udHJvbFBvc2l0aW9ucygpO1xuXHR9XG5cblx0c2V0U2Vzc2lvbkNlbnRlcigpXG5cdHtcblx0XHR2YXIgW3hDZW50ZXIsIHlDZW50ZXJdID0gdGhpcy5tYXAuZ2V0VmlldygpLmdldENlbnRlcigpO1xuXG5cdFx0dmFyIHpvb21Cb3VuZHMgPSB0aGlzLnpvb21Cb3VuZHNQYXRoLmdldE9iamVjdCgpO1xuXHRcdC8vIHJlbW92ZSBjYWxsYmFjayB0ZW1wb3JhcmlseSB0byBhdm9pZCB0cmlnZ2VyaW5nIGR1ZSB0byByb3VuZGluZyBlcnJvcj9cblx0XHQvLyBUT0RPIC0gYXZvaWQgcm91bmRpbmcgZXJyb3Jcblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoLnJlbW92ZUNhbGxiYWNrKHRoaXMsIHRoaXMuZ2V0U2Vzc2lvbkNlbnRlcik7XG5cblx0XHR2YXIgZGF0YUJvdW5kcyA9IG5ldyB3ZWF2ZWpzLmdlb20uQm91bmRzMkQoKTtcblx0XHR6b29tQm91bmRzLmdldERhdGFCb3VuZHMoZGF0YUJvdW5kcyk7XG5cdFx0ZGF0YUJvdW5kcy5zZXRYQ2VudGVyKHhDZW50ZXIpO1xuXHRcdGRhdGFCb3VuZHMuc2V0WUNlbnRlcih5Q2VudGVyKTtcblx0XHR6b29tQm91bmRzLnNldERhdGFCb3VuZHMoZGF0YUJvdW5kcyk7XG5cblx0XHR0aGlzLnpvb21Cb3VuZHNQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMuZ2V0U2Vzc2lvbkNlbnRlcik7XG5cdH1cblxuXHRzZXRTZXNzaW9uWm9vbSgpXG5cdHtcblx0XHR2YXIgcmVzb2x1dGlvbiA9IHRoaXMubWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XG5cblx0XHR2YXIgem9vbUJvdW5kcyA9IHRoaXMuem9vbUJvdW5kc1BhdGguZ2V0T2JqZWN0KCk7XG5cdFx0Ly8gcmVtb3ZlIGNhbGxiYWNrIHRlbXBvcmFyaWx5IHRvIGF2b2lkIHRyaWdnZXJpbmcgZHVlIHRvIHJvdW5kaW5nIGVycm9yP1xuXHRcdC8vIFRPRE8gLSBhdm9pZCByb3VuZGluZyBlcnJvclxuXHRcdHRoaXMuem9vbUJvdW5kc1BhdGgucmVtb3ZlQ2FsbGJhY2sodGhpcywgdGhpcy5nZXRTZXNzaW9uQ2VudGVyKTtcblxuXHRcdHZhciBkYXRhQm91bmRzID0gbmV3IHdlYXZlanMuZ2VvbS5Cb3VuZHMyRCgpO1xuXHRcdHZhciBzY3JlZW5Cb3VuZHMgPSBuZXcgd2VhdmVqcy5nZW9tLkJvdW5kczJEKCk7XG5cdFx0em9vbUJvdW5kcy5nZXREYXRhQm91bmRzKGRhdGFCb3VuZHMpO1xuXHRcdHpvb21Cb3VuZHMuZ2V0U2NyZWVuQm91bmRzKHNjcmVlbkJvdW5kcyk7XG5cdFx0ZGF0YUJvdW5kcy5zZXRXaWR0aChzY3JlZW5Cb3VuZHMuZ2V0V2lkdGgoKSAqIHJlc29sdXRpb24pO1xuXHRcdGRhdGFCb3VuZHMuc2V0SGVpZ2h0KHNjcmVlbkJvdW5kcy5nZXRIZWlnaHQoKSAqIHJlc29sdXRpb24pO1xuXHRcdGRhdGFCb3VuZHMubWFrZVNpemVQb3NpdGl2ZSgpO1xuXHRcdHpvb21Cb3VuZHMuc2V0RGF0YUJvdW5kcyhkYXRhQm91bmRzKTtcblxuXHRcdHRoaXMuem9vbUJvdW5kc1BhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5nZXRTZXNzaW9uQ2VudGVyKTtcblx0fVxuXG5cdGdldFNlc3Npb25DZW50ZXIoKVxuXHR7XG5cdFx0dmFyIHpvb21Cb3VuZHMgPSB0aGlzLnpvb21Cb3VuZHNQYXRoLmdldE9iamVjdCgpO1xuXHRcdHZhciBkYXRhQm91bmRzID0gbmV3IHdlYXZlanMuZ2VvbS5Cb3VuZHMyRCgpO1xuXHRcdHpvb21Cb3VuZHMuZ2V0RGF0YUJvdW5kcyhkYXRhQm91bmRzKTtcblx0XHR2YXIgY2VudGVyID0gW2RhdGFCb3VuZHMuZ2V0WENlbnRlcigpLCBkYXRhQm91bmRzLmdldFlDZW50ZXIoKV07XG5cdFx0dmFyIHNjYWxlID0gem9vbUJvdW5kcy5nZXRYU2NhbGUoKTtcblxuXHRcdHRoaXMubWFwLmdldFZpZXcoKS51bihcImNoYW5nZTpjZW50ZXJcIiwgdGhpcy5zZXRTZXNzaW9uQ2VudGVyLCB0aGlzKTtcblx0XHR0aGlzLm1hcC5nZXRWaWV3KCkudW4oXCJjaGFuZ2U6cmVzb2x1dGlvblwiLCB0aGlzLnNldFNlc3Npb25ab29tLCB0aGlzKTtcblxuXHRcdHRoaXMubWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoY2VudGVyKTtcblx0XHR0aGlzLm1hcC5nZXRWaWV3KCkuc2V0UmVzb2x1dGlvbigxIC8gc2NhbGUpO1xuXG5cdFx0bG9kYXNoLmRlZmVyKCgpID0+IHtcblx0XHRcdHRoaXMubWFwLmdldFZpZXcoKS5vbihcImNoYW5nZTpjZW50ZXJcIiwgdGhpcy5zZXRTZXNzaW9uQ2VudGVyLCB0aGlzKTtcblx0XHRcdHRoaXMubWFwLmdldFZpZXcoKS5vbihcImNoYW5nZTpyZXNvbHV0aW9uXCIsIHRoaXMuc2V0U2Vzc2lvblpvb20sIHRoaXMpO1xuXHRcdH0pO1xuXHR9XG5cblx0cGxvdHRlcnNDaGFuZ2VkKClcblx0e1xuXHRcdHZhciBvbGROYW1lcyA9IGxvZGFzaC5rZXlzKHRoaXMubGF5ZXJzKTtcblx0XHR2YXIgbmV3TmFtZXMgPSB0aGlzLnBsb3R0ZXJzUGF0aC5nZXROYW1lcygpO1xuXG5cdFx0dmFyIHJlbW92ZWROYW1lcyA9IGxvZGFzaC5kaWZmZXJlbmNlKG9sZE5hbWVzLCBuZXdOYW1lcyk7XG5cdFx0dmFyIGFkZGVkTmFtZXMgPSBsb2Rhc2guZGlmZmVyZW5jZShuZXdOYW1lcywgb2xkTmFtZXMpO1xuXG5cdFx0cmVtb3ZlZE5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdGlmICh0aGlzLmxheWVyc1tuYW1lXSkgeyB0aGlzLmxheWVyc1tuYW1lXS5kZXN0cm95KCk7IH1cblx0XHRcdGRlbGV0ZSB0aGlzLmxheWVyc1tuYW1lXTtcblx0XHR9LCB0aGlzKTtcblxuXHRcdGFkZGVkTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0dGhpcy5sYXllcnNbbmFtZV0gPSBMYXllci5uZXdMYXllcih0aGlzLCBuYW1lKTtcblx0XHR9LCB0aGlzKTtcblx0XHQvKiAqL1xuXHRcdGZvciAobGV0IGlkeCBpbiBuZXdOYW1lcylcblx0XHR7XG5cdFx0XHRsZXQgbGF5ZXIgPSB0aGlzLmxheWVyc1tuZXdOYW1lc1tpZHhdXTtcblxuXHRcdFx0aWYgKCFsYXllciB8fCAhbGF5ZXIubGF5ZXIpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGxheWVyLmxheWVyLnNldFpJbmRleChpZHggKyAyKTtcblx0XHR9XG5cdH1cblxuXHRkZXN0cm95KClcblx0e1xuXG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVPcGVuTGF5ZXJzTWFwO1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24udG9vbHM6Ok1hcFRvb2xcIiwgV2VhdmVPcGVuTGF5ZXJzTWFwKTtcbiIsImltcG9ydCBvbCBmcm9tIFwib3BlbmxheWVyc1wiO1xuaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcblxuLy8gdmFyIGluaGVyaXRzID0gZnVuY3Rpb24oY2hpbGRDdG9yLCBwYXJlbnRDdG9yKSB7XG4vLyAgIC8qKiBAY29uc3RydWN0b3IgKi9cbi8vICAgZnVuY3Rpb24gdGVtcEN0b3IoKSB7fVxuLy8gICB0ZW1wQ3Rvci5wcm90b3R5cGUgPSBwYXJlbnRDdG9yLnByb3RvdHlwZTtcbi8vICAgY2hpbGRDdG9yLnN1cGVyQ2xhc3NfID0gcGFyZW50Q3Rvci5wcm90b3R5cGU7XG4vLyAgIGNoaWxkQ3Rvci5wcm90b3R5cGUgPSBuZXcgdGVtcEN0b3IoKTtcbi8vICAgLyoqIEBvdmVycmlkZSAqL1xuLy8gICBjaGlsZEN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGRDdG9yO1xuLy8gfTtcblxuLy8gdmFyIEN1c3RvbURyYWdCb3hFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBpbm5lckV2ZW50KSB7XG4vLyBcdG9sLk1hcEV2ZW50LmNhbGwodGhpcywgdHlwZSwgaW5uZXJFdmVudC5tYXAsIGlubmVyRXZlbnQuZnJhbWVTdGF0ZSlcbi8vIFx0dGhpcy5pbm5lckV2ZW50ID0gaW5uZXJFdmVudDtcbi8vIH07XG5cbi8vIGNvbnNvbGUubG9nKG9sLk1hcEJyb3dzZXJFdmVudCk7XG4vLyBpbmhlcml0cyhDdXN0b21EcmFnQm94RXZlbnQsIG9sLk1hcEJyb3dzZXJFdmVudCk7XG4vL1xuY2xhc3MgQm94Q29udHJvbCBleHRlbmRzIG9sLmNvbnRyb2wuQ29udHJvbCB7XG5cdGNvbnN0cnVjdG9yKG9wdF9vcHRpb25zKSB7XG5cdFx0bGV0IG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cblx0XHRsZXQgZWxlbWVudCA9IGpxdWVyeShcIjxkaXY+XCIpLmNzcyh7XG5cdFx0XHRwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuXHRcdH0pLmFkZENsYXNzKCdvbC1ib3gnKTtcblxuXHRcdHN1cGVyKHtlbGVtZW50OiBlbGVtZW50WzBdLCB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0fSk7XG5cdH1cblxuXHRzZXRQaXhlbHMoc3RhcnRQaXhlbCwgZW5kUGl4ZWwpXG5cdHtcblx0XHR0aGlzLnN0YXJ0UGl4ZWwgPSBzdGFydFBpeGVsO1xuXHRcdHRoaXMuZW5kUGl4ZWwgPSBlbmRQaXhlbDtcblxuXHRcdGxldCBbbGVmdCwgdG9wXSA9IHN0YXJ0UGl4ZWw7XG5cdFx0bGV0IFtyaWdodCwgYm90dG9tXSA9IGVuZFBpeGVsO1xuXG5cdFx0W3RvcCwgYm90dG9tXSA9IGxvZGFzaC5zb3J0QnkoW3RvcCwgYm90dG9tXSk7XG5cdFx0W2xlZnQsIHJpZ2h0XSA9IGxvZGFzaC5zb3J0QnkoW2xlZnQsIHJpZ2h0XSk7XG5cbiBcdFx0bGV0IGhlaWdodCA9IGJvdHRvbSAtIHRvcDtcblx0XHRsZXQgd2lkdGggPSByaWdodCAtIGxlZnQ7XG5cblx0XHRqcXVlcnkodGhpcy5lbGVtZW50KS5jc3Moe3RvcCwgbGVmdCwgd2lkdGgsIGhlaWdodH0pO1xuXG5cdFx0dGhpcy51cGRhdGVHZW9tZXRyeSgpO1xuXHR9XG5cblx0dXBkYXRlR2VvbWV0cnkoKVxuXHR7XG5cdFx0bGV0IHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWw7XG5cdFx0bGV0IGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbDtcblx0XHR2YXIgcGl4ZWxzID0gW1xuXHRcdFx0c3RhcnRQaXhlbCxcblx0XHRcdFtzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFsxXV0sXG5cdFx0XHRlbmRQaXhlbCxcblx0XHRcdFtlbmRQaXhlbFswXSwgc3RhcnRQaXhlbFsxXV1cblx0XHRdO1xuXHRcdHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuXG5cdFx0dmFyIGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcChtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCwgbWFwKTtcblx0XHQvLyBjbG9zZSB0aGUgcG9seWdvblxuXHRcdGNvb3JkaW5hdGVzWzRdID0gY29vcmRpbmF0ZXNbMF0uc2xpY2UoKTtcblxuXHRcdGlmICghdGhpcy5nZW9tZXRyeV8pIHtcblx0XHRcdHRoaXMuZ2VvbWV0cnlfID0gbmV3IG9sLmdlb20uUG9seWdvbihbY29vcmRpbmF0ZXNdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5nZW9tZXRyeV8uc2V0Q29vcmRpbmF0ZXMoW2Nvb3JkaW5hdGVzXSk7XG5cdFx0fVxuXHR9XG5cblxuXHRnZXRHZW9tZXRyeSgpXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5nZW9tZXRyeV87XG5cdH1cbn1cblxudmFyIEN1c3RvbURyYWdCb3ggPSBmdW5jdGlvbiAob3B0X29wdGlvbnMpIHtcblx0XHRvbC5pbnRlcmFjdGlvbi5Qb2ludGVyLmNhbGwodGhpcywge1xuXHRcdFx0aGFuZGxlRG93bkV2ZW50OiBDdXN0b21EcmFnQm94LmhhbmRsZURvd25FdmVudCxcblx0XHRcdGhhbmRsZURyYWdFdmVudDogQ3VzdG9tRHJhZ0JveC5oYW5kbGVEcmFnRXZlbnQsXG5cdFx0XHRoYW5kbGVVcEV2ZW50OiBDdXN0b21EcmFnQm94LmhhbmRsZVVwRXZlbnRcblx0XHR9KTtcblxuXHRcdGxldCBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG5cdFx0dGhpcy5ib3hDb250cm9sID0gbmV3IEJveENvbnRyb2woKTtcblxuXHRcdHRoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuXG5cdFx0dGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IG9sLmV2ZW50cy5jb25kaXRpb24uYWx3YXlzO1xufTtcblxub2wuaW5oZXJpdHMoQ3VzdG9tRHJhZ0JveCwgb2wuaW50ZXJhY3Rpb24uUG9pbnRlcik7XG5cbkN1c3RvbURyYWdCb3gucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5ib3hDb250cm9sLmdldEdlb21ldHJ5KCk7XG59XG5cbkN1c3RvbURyYWdCb3guaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuXHRpZiAoIW9sLmV2ZW50cy5jb25kaXRpb24ubW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dGhpcy5ib3hDb250cm9sLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpO1xuXHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdib3hkcmFnJywgaW5uZXJFdmVudDogbWFwQnJvd3NlckV2ZW50fSk7XG59XG5cbkN1c3RvbURyYWdCb3guaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuXHRpZiAoIW9sLmV2ZW50cy5jb25kaXRpb24ubW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcblx0XHR0aGlzLnN0YXJ0UGl4ZWxfID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuXHRcdHRoaXMuYm94Q29udHJvbC5zZXRNYXAobWFwQnJvd3NlckV2ZW50Lm1hcCk7XG5cdFx0dGhpcy5ib3hDb250cm9sLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdib3hzdGFydCcsIGlubmVyRXZlbnQ6IG1hcEJyb3dzZXJFdmVudH0pO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5DdXN0b21EcmFnQm94LmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG5cdGlmICghb2wuZXZlbnRzLmNvbmRpdGlvbi5tb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0dGhpcy5ib3hDb250cm9sLnNldE1hcChudWxsKTtcblxuXHR0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdib3hlbmQnLCBpbm5lckV2ZW50OiBtYXBCcm93c2VyRXZlbnR9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3VzdG9tRHJhZ0JveDtcbiIsImltcG9ydCBvbCBmcm9tIFwib3BlbmxheWVyc1wiO1xuaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5leHBvcnQgY2xhc3MgUGFuQ2x1c3RlciB7XG5cdGNvbnN0cnVjdG9yKG9wdE9wdGlvbnMpXG5cdHtcblx0XHR2YXIgb3B0aW9ucyA9IG9wdE9wdGlvbnMgfHwge307XG5cdFx0bGV0IHBhcmVudCA9IGpxdWVyeShgXG5cdFx0PGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMClcIiBjbGFzcz1cIm9sLXVuc2VsZWN0YWJsZSBvbC1jb250cm9sIHBhbkNsdXN0ZXJcIj5cblx0XHRcdDx0YWJsZSBzdHlsZT1cImZvbnQtc2l6ZTo3NSVcIj5cblx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdDx0ZD48L3RkPjx0ZCBjbGFzcz1cIm9sLWNvbnRyb2xcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+PGJ1dHRvbiBjbGFzcz1cInBhbkNsdXN0ZXIgTlwiPk48L2J1dHRvbj48L3RkPjx0ZD48L3RkPlxuXHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0PHRkIGNsYXNzPVwib2wtY29udHJvbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj48YnV0dG9uIGNsYXNzPVwicGFuQ2x1c3RlciBXXCI+VzwvYnV0dG9uPjwvdGQ+XG5cdFx0XHRcdFx0PHRkIGNsYXNzPVwib2wtY29udHJvbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj48YnV0dG9uIGNsYXNzPVwicGFuQ2x1c3RlciBYIGZhIGZhLWFycm93cy1hbHRcIj48L2J1dHRvbj48L3RkPlxuXHRcdFx0XHRcdDx0ZCBjbGFzcz1cIm9sLWNvbnRyb2xcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+PGJ1dHRvbiBjbGFzcz1cInBhbkNsdXN0ZXIgRVwiPkU8L2J1dHRvbj48L3RkPlxuXHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0PHRkPjwvdGQ+PHRkIGNsYXNzPVwib2wtY29udHJvbFwiIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj48YnV0dG9uIGNsYXNzPVwicGFuQ2x1c3RlciBTXCI+UzwvYnV0dG9uPjwvdGQ+PHRkPjwvdGQ+XG5cdFx0XHRcdDwvdHI+XG5cdFx0XHQ8L3RhYmxlPlxuXHRcdDwvZGl2PmApO1xuXG5cdFx0dmFyIGRpcmVjdGlvbnMgPSB7XG5cdFx0XHROOiBbMCwgMV0sXG5cdFx0XHRFOiBbMSwgMF0sXG5cdFx0XHRTOiBbMCwgLTFdLFxuXHRcdFx0VzogWy0xLCAwXSxcblx0XHRcdFg6IFtudWxsLCBudWxsXVxuXHRcdH07XG5cblx0XHRsZXQgc2VsZiA9IHRoaXM7XG5cblx0XHRsZXQgcGFuID0gZnVuY3Rpb24gKHhTaWduLCB5U2lnbilcblx0XHR7XG5cdFx0XHRsZXQgcGFuUGVyY2VudCA9IDAuMztcblx0XHRcdGxldCBtYXAgPSBzZWxmLmdldE1hcCgpO1xuXHRcdFx0bGV0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuXHRcdFx0bGV0IGV4dGVudCA9IHZpZXcuY2FsY3VsYXRlRXh0ZW50KG1hcC5nZXRTaXplKCkpO1xuXG5cdFx0XHRsZXQgZXh0ZW50V2lkdGggPSBNYXRoLmFicyhleHRlbnRbMF0gLSBleHRlbnRbMl0pO1xuXHRcdFx0bGV0IGV4dGVudEhlaWdodCA9IE1hdGguYWJzKGV4dGVudFsxXSAtIGV4dGVudFszXSk7XG5cblx0XHRcdGxldCBjZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuXG5cdFx0XHRjZW50ZXJbMF0gKz0gZXh0ZW50V2lkdGggKiB4U2lnbiAqIHBhblBlcmNlbnQ7XG5cdFx0XHRjZW50ZXJbMV0gKz0gZXh0ZW50SGVpZ2h0ICogeVNpZ24gKiBwYW5QZXJjZW50O1xuXG5cdFx0XHR2aWV3LnNldENlbnRlcihjZW50ZXIpO1xuXHRcdH07XG5cblx0XHRsZXQgem9vbUV4dGVudCA9IGZ1bmN0aW9uICgpXG5cdFx0e1xuXHRcdFx0bGV0IG1hcCA9IHNlbGYuZ2V0TWFwKCk7XG5cdFx0XHRsZXQgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG5cdFx0XHRsZXQgZXh0ZW50ID0gdmlldy5nZXRQcm9qZWN0aW9uKCkuZ2V0RXh0ZW50KCk7XG5cdFx0XHRsZXQgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG5cdFx0XHR2aWV3LmZpdChleHRlbnQsIHNpemUpO1xuXHRcdH07XG5cblx0XHRmb3IgKGxldCBkaXJlY3Rpb24gaW4gZGlyZWN0aW9ucylcblx0XHR7XG5cdFx0XHRsZXQgeFNpZ24gPSBkaXJlY3Rpb25zW2RpcmVjdGlvbl1bMF07XG5cdFx0XHRsZXQgeVNpZ24gPSBkaXJlY3Rpb25zW2RpcmVjdGlvbl1bMV07XG5cblx0XHRcdGxldCBidXR0b24gPSBwYXJlbnQuZmluZChcIi5wYW5DbHVzdGVyLlwiICsgZGlyZWN0aW9uKTtcblxuXHRcdFx0aWYgKHhTaWduICE9PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRidXR0b24uY2xpY2socGFuLmJpbmQodGhpcywgeFNpZ24sIHlTaWduKSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdGJ1dHRvbi5jbGljayh6b29tRXh0ZW50LmJpbmQodGhpcykpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG9sLmNvbnRyb2wuQ29udHJvbC5jYWxsKHRoaXMsIHtlbGVtZW50OiBwYXJlbnRbMF0sIHRhcmdldDogb3B0aW9ucy50YXJnZXR9KTtcblx0fVxufVxuXG5vbC5pbmhlcml0cyhQYW5DbHVzdGVyLCBvbC5jb250cm9sLkNvbnRyb2wpO1xuXG5leHBvcnQgY2xhc3MgSW50ZXJhY3Rpb25Nb2RlQ2x1c3RlciB7XG5cdGNvbnN0cnVjdG9yIChvcHRPcHRpb25zKVxuXHR7XG5cdFx0dmFyIGludGVyYWN0aW9uTW9kZVBhdGggPSBvcHRPcHRpb25zLmludGVyYWN0aW9uTW9kZVBhdGg7XG5cdFx0dmFyIG9wdGlvbnMgPSBvcHRPcHRpb25zIHx8IHt9O1xuXHRcdHZhciBidXR0b25UYWJsZSA9IGpxdWVyeShgXG5cdFx0XHQ8dGFibGUgY2xhc3M9XCJvbC11bnNlbGVjdGFibGUgb2wtY29udHJvbCBpTW9kZUNsdXN0ZXJcIj5cblx0XHRcdFx0PHRyIHN0eWxlPVwiZm9udC1zaXplOiA4MCVcIj5cblx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImlNb2RlQ2x1c3RlciBwYW4gZmEgZmEtaGFuZC1ncmFiLW9cIj48L2J1dHRvbj48L3RkPlxuXHRcdFx0XHRcdDx0ZD48YnV0dG9uIGNsYXNzPVwiaU1vZGVDbHVzdGVyIHNlbGVjdCBmYSBmYS1tb3VzZS1wb2ludGVyXCI+PC9idXR0b24+PC90ZD5cblx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImlNb2RlQ2x1c3RlciB6b29tIGZhIGZhLXNlYXJjaC1wbHVzXCI+PC9idXR0b24+PC90ZD5cblx0XHRcdFx0PC90cj5cblx0XHRcdDwvdGFibGU+XG5cdFx0YCk7XG5cblx0XHRidXR0b25UYWJsZS5maW5kKFwiYnV0dG9uLmlNb2RlQ2x1c3Rlci5wYW5cIikuY2xpY2soICgpID0+IGludGVyYWN0aW9uTW9kZVBhdGguc3RhdGUoXCJwYW5cIikgKTtcblx0XHRidXR0b25UYWJsZS5maW5kKFwiYnV0dG9uLmlNb2RlQ2x1c3Rlci5zZWxlY3RcIikuY2xpY2soICgpID0+IGludGVyYWN0aW9uTW9kZVBhdGguc3RhdGUoXCJzZWxlY3RcIikgKTtcblx0XHRidXR0b25UYWJsZS5maW5kKFwiYnV0dG9uLmlNb2RlQ2x1c3Rlci56b29tXCIpLmNsaWNrKCAoKSA9PiBpbnRlcmFjdGlvbk1vZGVQYXRoLnN0YXRlKFwiem9vbVwiKSApO1xuXG5cdFx0aW50ZXJhY3Rpb25Nb2RlUGF0aC5hZGRDYWxsYmFjayh0aGlzLCAoKSA9PiB7XG5cdFx0XHRidXR0b25UYWJsZS5maW5kKFwiYnV0dG9uLmlNb2RlQ2x1c3RlclwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHRcdGJ1dHRvblRhYmxlLmZpbmQoXCJidXR0b24uaU1vZGVDbHVzdGVyLlwiICsgaW50ZXJhY3Rpb25Nb2RlUGF0aC5nZXRTdGF0ZSgpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblx0XHR9LCB0cnVlKTtcblxuXHRcdG9sLmNvbnRyb2wuQ29udHJvbC5jYWxsKHRoaXMsIHtlbGVtZW50OiBidXR0b25UYWJsZVswXSwgdGFyZ2V0OiBvcHRpb25zLnRhcmdldH0pO1xuXHR9XG59XG5cbm9sLmluaGVyaXRzKEludGVyYWN0aW9uTW9kZUNsdXN0ZXIsIG9sLmNvbnRyb2wuQ29udHJvbCk7XG4iLCJpbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IEZlYXR1cmVMYXllciBmcm9tIFwiLi9sYXllcnMvRmVhdHVyZUxheWVyLmpzXCI7XG5pbXBvcnQgQ3VzdG9tRHJhZ0JveCBmcm9tIFwiLi9DdXN0b21EcmFnQm94LmpzXCI7XG4vKmdsb2JhbCBXZWF2ZSovXG5cbmZ1bmN0aW9uIGdldFByb2JlSW50ZXJhY3Rpb24obWFwVG9vbClcbntcblx0cmV0dXJuIG5ldyBvbC5pbnRlcmFjdGlvbi5Qb2ludGVyKHtcblx0XHRoYW5kbGVNb3ZlRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0Ly8gd2VhdmVwYXRoIC0+IGtleXN0cmluZyAtPiB6aW5kZXhcblx0XHRcdGxldCBkMmRfa2V5U2V0X2tleVN0cmluZ196SW5kZXggPSBuZXcgTWFwKCk7XG5cdFx0XHQvKiBXZSBuZWVkIHRvIGhhdmUgc2V0cyBmb3IgYWxsIHRoZSBsYXllcnMgc28gdGhhdCBwcm9iaW5nIG92ZXIgYW4gZW1wdHkgYXJlYSBjb3JyZWN0bHkgZW1wdGllcyB0aGUga2V5c2V0ICovXG5cdFx0XHRtYXBUb29sLm1hcC5nZXRMYXllcnMoKS5mb3JFYWNoKFxuXHRcdFx0XHRmdW5jdGlvbiAobGF5ZXIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsZXQgd2VhdmVMYXllck9iamVjdCA9IGxheWVyLmdldChcImxheWVyT2JqZWN0XCIpO1xuXG5cdFx0XHRcdFx0aWYgKHdlYXZlTGF5ZXJPYmplY3QucHJvYmVLZXlTZXQgJiYgIWQyZF9rZXlTZXRfa2V5U3RyaW5nX3pJbmRleC5nZXQod2VhdmVMYXllck9iamVjdC5wcm9iZUtleVNldCkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZDJkX2tleVNldF9rZXlTdHJpbmdfekluZGV4LnNldCh3ZWF2ZUxheWVyT2JqZWN0LnByb2JlS2V5U2V0LmdldE9iamVjdCgpLCBuZXcgTWFwKCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0bWFwVG9vbCk7XG5cdFx0XHRtYXBUb29sLm1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZlbnQucGl4ZWwsXG5cdFx0XHRcdGZ1bmN0aW9uIChmZWF0dXJlLCBsYXllcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxldCB3ZWF2ZUxheWVyT2JqZWN0ID0gbGF5ZXIuZ2V0KFwibGF5ZXJPYmplY3RcIik7XG5cblx0XHRcdFx0XHRsZXQgbWFwX2tleVN0cmluZ196SW5kZXggPSBkMmRfa2V5U2V0X2tleVN0cmluZ196SW5kZXguZ2V0KHdlYXZlTGF5ZXJPYmplY3QucHJvYmVLZXlTZXQuZ2V0T2JqZWN0KCkpO1xuXG5cdFx0XHRcdFx0LyogTm8gbmVlZCB0byBjaGVjayBoZXJlLCB3ZSBjcmVhdGVkIG9uZSBmb3IgZXZlcnkgcHJvYmVLZXlTZXQgaW4gdGhlIHByaW9yIGZvckVhY2ggKi9cblxuXHRcdFx0XHRcdG1hcF9rZXlTdHJpbmdfekluZGV4LnNldChmZWF0dXJlLmdldElkKCksIGxheWVyLmdldFpJbmRleCgpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gKGxheWVyKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cmV0dXJuIGxheWVyLmdldFNlbGVjdGFibGUoKSAmJiBsYXllciBpbnN0YW5jZW9mIEZlYXR1cmVMYXllcjtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGZvciAobGV0IHdlYXZlS2V5U2V0IG9mIGQyZF9rZXlTZXRfa2V5U3RyaW5nX3pJbmRleC5rZXlzKCkpXG5cdFx0XHR7XG5cdFx0XHRcdGxldCBtYXBfa2V5U3RyaW5nX3pJbmRleCA9IGQyZF9rZXlTZXRfa2V5U3RyaW5nX3pJbmRleC5nZXQod2VhdmVLZXlTZXQpO1xuXG5cdFx0XHRcdGxldCB0b3AgPSB7a2V5OiBudWxsLCBpbmRleDogLUluZmluaXR5fTtcblxuXHRcdFx0XHRmb3IgKGxldCBrZXkgb2YgbWFwX2tleVN0cmluZ196SW5kZXgua2V5cygpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGV0IGluZGV4ID0gbWFwX2tleVN0cmluZ196SW5kZXguZ2V0KGtleSk7XG5cdFx0XHRcdFx0aWYgKGluZGV4ID4gdG9wLmluZGV4KVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHRvcC5pbmRleCA9IGluZGV4O1xuXHRcdFx0XHRcdFx0dG9wLmtleSA9IGtleTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9wLmtleSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdFdlYXZlLmdldFBhdGgod2VhdmVLZXlTZXQpLnNldEtleXMoW3RvcC5rZXldKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRXZWF2ZS5nZXRQYXRoKHdlYXZlS2V5U2V0KS5zZXRLZXlzKFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldERyYWdTZWxlY3QobWFwVG9vbCwgcHJvYmVJbnRlcmFjdGlvbilcbntcblx0bGV0IEFERCA9IFwiK1wiO1xuXHRsZXQgU1VCVFJBQ1QgPSBcIi1cIjtcblx0bGV0IFNFVCA9IFwiPVwiO1xuXHRsZXQgZHJhZ1NlbGVjdCA9IG5ldyBDdXN0b21EcmFnQm94KCk7XG5cdGxldCBtb2RlID0gU0VUO1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGlvbihleHRlbnQpIHtcblx0XHRsZXQgc2VsZWN0ZWRGZWF0dXJlcyA9IG5ldyBTZXQoKTtcblx0XHRsZXQgc2VsZWN0RmVhdHVyZSA9IChmZWF0dXJlKSA9PiB7IHNlbGVjdGVkRmVhdHVyZXMuYWRkKGZlYXR1cmUuZ2V0SWQoKSk7IH07XG5cblx0XHRmb3IgKGxldCB3ZWF2ZUxheWVyTmFtZSBvZiBsb2Rhc2gua2V5cyhtYXBUb29sLmxheWVycykpXG5cdFx0e1xuXHRcdFx0bGV0IHdlYXZlTGF5ZXIgPSBtYXBUb29sLmxheWVyc1t3ZWF2ZUxheWVyTmFtZV07XG5cdFx0XHRsZXQgb2xMYXllciA9IHdlYXZlTGF5ZXIubGF5ZXI7XG5cdFx0XHRsZXQgc2VsZWN0YWJsZSA9IG9sTGF5ZXIuZ2V0KFwic2VsZWN0YWJsZVwiKTtcblxuXHRcdFx0aWYgKHdlYXZlTGF5ZXIgaW5zdGFuY2VvZiBGZWF0dXJlTGF5ZXIgJiYgc2VsZWN0YWJsZSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IGtleVNldCA9IHdlYXZlTGF5ZXIuc2VsZWN0aW9uS2V5U2V0O1xuXHRcdFx0XHRsZXQgc291cmNlID0gb2xMYXllci5nZXRTb3VyY2UoKTtcblxuXHRcdFx0XHRzb3VyY2UuZm9yRWFjaEZlYXR1cmVJbnRlcnNlY3RpbmdFeHRlbnQoZXh0ZW50LCBzZWxlY3RGZWF0dXJlKTtcblxuXHRcdFx0XHRsZXQga2V5cyA9IEFycmF5LmZyb20oc2VsZWN0ZWRGZWF0dXJlcyk7XG5cblx0XHRcdFx0c3dpdGNoIChtb2RlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y2FzZSBTRVQ6XG5cdFx0XHRcdFx0XHRrZXlTZXQuc2V0S2V5cyhrZXlzKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgQUREOlxuXHRcdFx0XHRcdFx0a2V5U2V0LmFkZEtleXMoa2V5cyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFNVQlRSQUNUOlxuXHRcdFx0XHRcdFx0a2V5U2V0LnJlbW92ZUtleXMoa2V5cyk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGRyYWdTZWxlY3Qub24oJ2JveHN0YXJ0JywgZnVuY3Rpb24gKGRyYWdCb3hFdmVudCkge1xuXHRcdHByb2JlSW50ZXJhY3Rpb24uc2V0QWN0aXZlKGZhbHNlKTtcblxuXHRcdGxldCBldmVudCA9IGRyYWdCb3hFdmVudC5pbm5lckV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cdFx0aWYgKGV2ZW50LmN0cmxLZXkpXG5cdFx0e1xuXHRcdFx0bW9kZSA9IEFERDtcblx0XHRcdGlmIChldmVudC5zaGlmdEtleSlcblx0XHRcdHtcblx0XHRcdFx0bW9kZSA9IFNVQlRSQUNUO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0bW9kZSA9IFNFVDtcblx0XHR9XG5cdH0pO1xuXG5cdGRyYWdTZWxlY3Qub24oJ2JveGVuZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRsZXQgZXh0ZW50ID0gZHJhZ1NlbGVjdC5nZXRHZW9tZXRyeSgpLmdldEV4dGVudCgpO1xuXG5cdFx0dXBkYXRlU2VsZWN0aW9uKGV4dGVudCk7XG5cdFx0cHJvYmVJbnRlcmFjdGlvbi5zZXRBY3RpdmUodHJ1ZSk7XG5cdFx0bW9kZSA9IFNFVDtcblx0fSk7XG5cblx0ZHJhZ1NlbGVjdC5vbignYm94ZHJhZycsIGxvZGFzaC5kZWJvdW5jZShmdW5jdGlvbigpIHtcblx0XHRsZXQgZXh0ZW50ID0gZHJhZ1NlbGVjdC5nZXRHZW9tZXRyeSgpLmdldEV4dGVudCgpO1xuXG5cdFx0dXBkYXRlU2VsZWN0aW9uKGV4dGVudCk7XG5cdH0pKTtcblxuXHRyZXR1cm4gZHJhZ1NlbGVjdDtcbn1cblxuZnVuY3Rpb24gd2VhdmVNYXBJbnRlcmFjdGlvbnMobWFwVG9vbClcbntcblxuXHRsZXQgcHJvYmVJbnRlcmFjdGlvbiA9IGdldFByb2JlSW50ZXJhY3Rpb24obWFwVG9vbCk7XG5cdGxldCBkcmFnU2VsZWN0ID0gZ2V0RHJhZ1NlbGVjdChtYXBUb29sLCBwcm9iZUludGVyYWN0aW9uKTtcblx0bGV0IGRyYWdQYW4gPSBuZXcgb2wuaW50ZXJhY3Rpb24uRHJhZ1Bhbih7fSk7XG5cdGxldCBkcmFnWm9vbSA9IG5ldyBvbC5pbnRlcmFjdGlvbi5EcmFnWm9vbSh7Y29uZGl0aW9uOiBvbC5ldmVudHMuY29uZGl0aW9uLmFsd2F5c30pO1xuXG5cdG1hcFRvb2wuaW50ZXJhY3Rpb25Nb2RlUGF0aC5hZGRDYWxsYmFjayhtYXBUb29sLCAoKSA9PiB7XG5cdFx0bGV0IGludGVyYWN0aW9uTW9kZSA9IG1hcFRvb2wuaW50ZXJhY3Rpb25Nb2RlUGF0aC5nZXRTdGF0ZSgpO1xuXHRcdGRyYWdQYW4uc2V0QWN0aXZlKGludGVyYWN0aW9uTW9kZSA9PT0gXCJwYW5cIik7XG5cdFx0ZHJhZ1NlbGVjdC5zZXRBY3RpdmUoaW50ZXJhY3Rpb25Nb2RlID09PSBcInNlbGVjdFwiKTtcblx0XHRkcmFnWm9vbS5zZXRBY3RpdmUoaW50ZXJhY3Rpb25Nb2RlID09PSBcInpvb21cIik7XG5cdH0sIHRydWUpO1xuXG5cdGxldCBpbnRlcmFjdGlvbkNvbGxlY3Rpb24gPSBvbC5pbnRlcmFjdGlvbi5kZWZhdWx0cyh7ZHJhZ1BhbjogZmFsc2V9KTtcblx0Zm9yIChsZXQgaW50ZXJhY3Rpb24gb2YgW2RyYWdQYW4sIGRyYWdab29tLCBkcmFnU2VsZWN0LCBwcm9iZUludGVyYWN0aW9uXSlcblx0XHRpbnRlcmFjdGlvbkNvbGxlY3Rpb24ucHVzaChpbnRlcmFjdGlvbik7XG5cblx0cmV0dXJuIGludGVyYWN0aW9uQ29sbGVjdGlvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgd2VhdmVNYXBJbnRlcmFjdGlvbnM7XG4iLCJpbXBvcnQgTGF5ZXIgZnJvbSBcIi4vTGF5ZXIuanNcIjtcbmltcG9ydCBTdGFuZGFyZExpYiBmcm9tIFwiLi4vLi4vLi4vLi4vb3V0dHMvdXRpbHMvU3RhbmRhcmRMaWIuanNcIjtcbmltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZlYXR1cmVMYXllciBleHRlbmRzIExheWVyIHtcblx0LyogQSBGZWF0dXJlTGF5ZXIgYXNzdW1lcyB0aGF0IGVhY2ggZmVhdHVyZSB3aWxsIGhhdmUgbXVsdGlwbGUgY3VzdG9tIHN0eWxlIHByb3BlcnRpZXMgb24gZWFjaCBmZWF0dXJlLCB3aGljaCBhcmUgbWFuYWdlZCBiYXNlZCBvbiBzZWxlY3Rpb24uICovXG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXHRcdFxuXHRcdHRoaXMudXBkYXRlTWV0YVN0eWxlID0gdGhpcy51cGRhdGVNZXRhU3R5bGUuYmluZCh0aGlzKTtcblx0XHR0aGlzLmRlYm91bmNlZF91cGRhdGVNZXRhU3R5bGVzID0gbG9kYXNoLmRlYm91bmNlKHRoaXMudXBkYXRlTWV0YVN0eWxlcy5iaW5kKHRoaXMpLCAwKTtcblxuXHRcdHRoaXMubGF5ZXIgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKCk7XG5cdFx0dGhpcy5zb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7d3JhcFg6IGZhbHNlfSk7XG5cblx0XHQvKiBFdmVyeSBmZWF0dXJlIHRoYXQgaXMgYWRkZWQgc2hvdWxkIHJlZ2lzdGVyIGEgaGFuZGxlciB0byBhdXRvbWF0aWNhbGx5IHJlY29tcHV0ZSB0aGUgbWV0YXN0eWxlcyB3aGVuIHRoZSBzdHlsZXMgY2hhbmdlLiAqL1xuXHRcdHRoaXMuc291cmNlLm9uKFwiYWRkZmVhdHVyZVwiLCB0aGlzLm9uRmVhdHVyZUFkZCwgdGhpcyk7XG5cblx0XHR0aGlzLmNoYW5nZWRJdGVtcyA9IG5ldyBTZXQoKTtcblx0XHR0aGlzLnByb2JlZFNldCA9IG5ldyBTZXQoKTtcblx0XHR0aGlzLnNlbGVjdGVkU2V0ID0gbmV3IFNldCgpO1xuXHRcdHRoaXMuZmlsdGVyZWRTZXQgPSBuZXcgU2V0KCk7XG5cblx0XHR0aGlzLnNlbGVjdGlvbktleVNldCA9IHRoaXMubGF5ZXJQYXRoLnNlbGVjdGlvbl9rZXlzZXQ7XG5cdFx0dGhpcy5wcm9iZUtleVNldCA9IHRoaXMubGF5ZXJQYXRoLnByb2JlX2tleXNldDtcblx0XHR0aGlzLnN1YnNldEZpbHRlciA9IHRoaXMubGF5ZXJQYXRoLnN1YnNldF9maWx0ZXI7Ly9wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIik7XG5cblx0XHRsZXQgc2VsZWN0aW9uS2V5SGFuZGxlciA9IHRoaXMudXBkYXRlU2V0RnJvbUtleVNldC5iaW5kKHRoaXMsIHRoaXMuc2VsZWN0aW9uS2V5U2V0LCB0aGlzLnNlbGVjdGVkU2V0KTtcblx0XHRsZXQgcHJvYmVLZXlIYW5kbGVyID0gdGhpcy51cGRhdGVTZXRGcm9tS2V5U2V0LmJpbmQodGhpcywgdGhpcy5wcm9iZUtleVNldCwgdGhpcy5wcm9iZWRTZXQpO1xuXG5cdFx0dGhpcy5zZWxlY3Rpb25LZXlTZXQuYWRkS2V5U2V0Q2FsbGJhY2soc2VsZWN0aW9uS2V5SGFuZGxlcik7XG5cdFx0dGhpcy5wcm9iZUtleVNldC5hZGRLZXlTZXRDYWxsYmFjayhwcm9iZUtleUhhbmRsZXIpO1xuXG5cdFx0dGhpcy5zdWJzZXRGaWx0ZXIuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVGaWx0ZXJlZEtleVNldCwgdHJ1ZSk7XG5cdFx0dGhpcy5zZXR0aW5nc1BhdGgucHVzaChcInNlbGVjdGFibGVcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVNZXRhU3R5bGVzKTtcblx0fVxuXG5cdG9uRmVhdHVyZUFkZCh2ZWN0b3JFdmVudClcblx0e1xuXHRcdHZlY3RvckV2ZW50LmZlYXR1cmUub24oXCJwcm9wZXJ0eWNoYW5nZVwiLCB0aGlzLm9uRmVhdHVyZVByb3BlcnR5Q2hhbmdlLCB0aGlzKTtcblx0fVxuXG5cdG9uRmVhdHVyZVByb3BlcnR5Q2hhbmdlKG9iamVjdEV2ZW50KVxuXHR7XG5cdFx0bGV0IHByb3BlcnR5TmFtZSA9IG9iamVjdEV2ZW50LmtleTtcblx0XHRsZXQgZmVhdHVyZSA9IG9iamVjdEV2ZW50LnRhcmdldDtcblxuXHRcdGlmICghbG9kYXNoLmNvbnRhaW5zKEZlYXR1cmVMYXllci5TdHlsZXMsIHByb3BlcnR5TmFtZSkpXG5cdFx0e1xuXHRcdFx0LyogVGhlIHByb3BlcnR5IHRoYXQgY2hhbmdlZCBpc24ndCBvbmUgb2Ygb3VyIG1ldGFTdHlsZSBwcm9wZXJ0aWVzLCBzbyB3ZSBkb24ndCBjYXJlLiAqL1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0LyogVGhlIHByb3BlcnR5IHRoYXQgY2hhbmdlZCB3YXMgYSBtZXRhc3R5bGUsIGFuZCBhcyBzdWNoIHRoZSBzdHlsZSBzaG91bGQgYmUgcmVjb21wdXRlZCAqL1xuXHRcdFx0Ly9sb2Rhc2guZGVmZXIodGhpcy51cGRhdGVNZXRhU3R5bGUsIGZlYXR1cmUpO1xuXHRcdFx0dGhpcy5kZWJvdW5jZWRfdXBkYXRlTWV0YVN0eWxlcygpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyB0b0NvbG9yQXJyYXkoY29sb3JTdHJpbmcsIGFscGhhKVxuXHR7XG5cdFx0dmFyIGNvbG9yQXJyYXk7XG5cdFx0aWYgKGNvbG9yU3RyaW5nWzBdID09PSBcIiNcIilcblx0XHR7XG5cdFx0XHRjb2xvckFycmF5ID0gb2wuY29sb3IuYXNBcnJheShjb2xvclN0cmluZyk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHRjb2xvckFycmF5ID0gb2wuY29sb3IuYXNBcnJheShcIiNcIiArIFN0YW5kYXJkTGliLmRlY2ltYWxUb0hleChOdW1iZXIoY29sb3JTdHJpbmcpKSk7XG5cdFx0fVxuXG5cdFx0Y29sb3JBcnJheSA9IFtdLmNvbmNhdChjb2xvckFycmF5KTsgLyogU2hvdWxkIG5vdCBiZSBtb2RpZmllZCBzaW5jZSBpdCBpcyBjYWNoZWQgaW4gb2wuY29sb3IuYXNBcnJheSAqL1xuXG5cdFx0aWYgKCFjb2xvckFycmF5KSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb2xvckFycmF5WzNdID0gTnVtYmVyKGFscGhhKTtcblx0XHRyZXR1cm4gY29sb3JBcnJheTtcblx0fVxuXG5cdHN0YXRpYyB0b0NvbG9yUkdCQShjb2xvclN0cmluZywgYWxwaGEpXG5cdHtcblx0XHR2YXIgY29sb3JBcnJheSA9IEZlYXR1cmVMYXllci50b0NvbG9yQXJyYXkoY29sb3JTdHJpbmcsIGFscGhhKTtcblx0XHRyZXR1cm4gb2wuY29sb3IuYXNTdHJpbmcoY29sb3JBcnJheSk7XG5cdH1cblxuXHR1cGRhdGVTZXRGcm9tS2V5U2V0KGtleVNldCwgc2V0LCBkaWZmKVxuXHR7XG5cdFx0aWYgKCF0aGlzLnNvdXJjZSkgcmV0dXJuOyAvL0hBQ0tcblx0XHRcblx0XHRsZXQgd2FzRW1wdHkgPSBzZXQuc2l6ZSA9PT0gMDtcblxuXHRcdHRoaXMuY2hhbmdlZEl0ZW1zLmNsZWFyKCk7XG5cblx0XHRmb3IgKGxldCBrZXkgb2YgZGlmZi5hZGRlZClcblx0XHR7XG5cdFx0XHRzZXQuYWRkKGtleSk7XG5cdFx0XHR0aGlzLmNoYW5nZWRJdGVtcy5hZGQoa2V5KTtcblx0XHR9XG5cblx0XHRmb3IgKGxldCBrZXkgb2YgZGlmZi5yZW1vdmVkKVxuXHRcdHtcblx0XHRcdHNldC5kZWxldGUoa2V5KTtcblx0XHRcdHRoaXMuY2hhbmdlZEl0ZW1zLmFkZChrZXkpO1xuXHRcdH1cblxuXHRcdGxldCBpc0VtcHR5ID0gc2V0LnNpemUgPT09IDA7XG5cblx0XHQvKiBJZiBhIHNldCBiZWNvbWVzIGVtcHR5IG9yIG5vbmVtcHR5LCB3ZSBzaG91bGQgcmVjb21wdXRlIGFsbCB0aGUgc3R5bGVzLiBPdGhlcndpc2UsIG9ubHkgcmVjb21wdXRlIHRoZSBzdHlsZXMgb2YgdGhlIGZlYXR1cmVzIHdoaWNoIGNoYW5nZWQuICovXG5cdFx0aWYgKGlzRW1wdHkgIT09IHdhc0VtcHR5KVxuXHRcdHtcblx0XHRcdHRoaXMudXBkYXRlTWV0YVN0eWxlcygpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0dGhpcy5jaGFuZ2VkSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZmVhdHVyZUlkKVxuXHRcdFx0e1xuXHRcdFx0XHRsZXQgZmVhdHVyZSA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVCeUlkKGZlYXR1cmVJZCk7XG5cdFx0XHRcdGlmIChmZWF0dXJlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVNZXRhU3R5bGUoZmVhdHVyZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZUZpbHRlcmVkS2V5U2V0KClcblx0e1xuXHRcdGlmICghdGhpcy5zb3VyY2UpIHJldHVybjsgLy9IQUNLXG5cdFx0XG5cdFx0bGV0IHNvdXJjZUtleXMgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlcygpLm1hcChmZWF0dXJlID0+IGZlYXR1cmUuZ2V0SWQoKSk7XG5cblx0XHR0aGlzLmZpbHRlcmVkU2V0LmNsZWFyKCk7XG5cblx0XHR2YXIgZmlsdGVyZWRLZXlzID0gdGhpcy5zdWJzZXRGaWx0ZXIuZmlsdGVyS2V5cyhzb3VyY2VLZXlzKTtcblx0XHRmb3IgKGxldCBrZXkgb2YgZmlsdGVyZWRLZXlzKVxuXHRcdHtcblx0XHRcdHRoaXMuZmlsdGVyZWRTZXQuYWRkKGtleSk7XG5cdFx0fVxuXG5cdFx0dGhpcy51cGRhdGVNZXRhU3R5bGVzKCk7XG5cdH1cblxuXHR1cGRhdGVNZXRhU3R5bGVzKClcblx0e1xuXHRcdGlmICghdGhpcy5zb3VyY2UpIHJldHVybjsgLy9IQUNLXG5cdFx0XG5cdFx0dGhpcy50ZW1wU2VsZWN0YWJsZSA9IHRoaXMuc2V0dGluZ3NQYXRoLnB1c2goXCJzZWxlY3RhYmxlXCIpLmdldFN0YXRlKCk7XG5cblx0XHR0aGlzLnNvdXJjZS5mb3JFYWNoRmVhdHVyZSh0aGlzLnVwZGF0ZU1ldGFTdHlsZSwgdGhpcyk7XG5cdH1cblxuXHR1cGRhdGVNZXRhU3R5bGUoZmVhdHVyZSlcblx0e1xuXHRcdGxldCBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcblx0XHRsZXQgbnVsbFN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHt9KTtcblx0XHRsZXQgdW5zZWxlY3RlZFN0eWxlID0gZmVhdHVyZS5nZXQoXCJ1bnNlbGVjdGVkU3R5bGVcIikgfHwgbnVsbFN0eWxlO1xuXHRcdGxldCBub3JtYWxTdHlsZSA9IGZlYXR1cmUuZ2V0KFwibm9ybWFsU3R5bGVcIikgfHwgbnVsbFN0eWxlO1xuXHRcdGxldCBzZWxlY3RlZFN0eWxlID0gZmVhdHVyZS5nZXQoXCJzZWxlY3RlZFN0eWxlXCIpIHx8IG51bGxTdHlsZTtcblx0XHRsZXQgcHJvYmVkU3R5bGUgPSBmZWF0dXJlLmdldChcInByb2JlZFN0eWxlXCIpIHx8IG51bGxTdHlsZTtcblx0XHRsZXQgek9yZGVyID0gZmVhdHVyZS5nZXQoXCJ6T3JkZXJcIikgfHwgMDtcblx0XHRsZXQgcmVwbGFjZSA9IGZlYXR1cmUuZ2V0KFwicmVwbGFjZVwiKTtcblx0XHRsZXQgbmV3U3R5bGU7XG5cblx0XHRpZiAoIXRoaXMuZmlsdGVyZWRTZXQuaGFzKGlkKSlcblx0XHR7XG5cdFx0XHRmZWF0dXJlLnNldFN0eWxlKG51bGxTdHlsZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLnRlbXBTZWxlY3RhYmxlKVxuXHRcdHtcblx0XHRcdGZlYXR1cmUuc2V0U3R5bGUobm9ybWFsU3R5bGUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5zZWxlY3RlZFNldC5oYXMoaWQpICYmICF0aGlzLnByb2JlZFNldC5oYXMoaWQpICYmIHRoaXMuc2VsZWN0ZWRTZXQuc2l6ZSA+IDApXG5cdFx0e1xuXHRcdFx0aWYgKHJlcGxhY2UpXG5cdFx0XHR7XG5cdFx0XHRcdG5ld1N0eWxlID0gdW5zZWxlY3RlZFN0eWxlO1xuXHRcdFx0XHRuZXdTdHlsZS5zZXRaSW5kZXgoek9yZGVyKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSBbXS5jb25jYXQodW5zZWxlY3RlZFN0eWxlKTtcblx0XHRcdFx0bmV3U3R5bGVbMF0uc2V0WkluZGV4KHpPcmRlcik7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdG5ld1N0eWxlID0gW10uY29uY2F0KG5vcm1hbFN0eWxlKTtcblx0XHRcdG5ld1N0eWxlWzBdLnNldFpJbmRleCh6T3JkZXIpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNlbGVjdGVkU2V0LmhhcyhpZCkpXG5cdFx0e1xuXHRcdFx0aWYgKHJlcGxhY2UpXG5cdFx0XHR7XG5cdFx0XHRcdG5ld1N0eWxlID0gc2VsZWN0ZWRTdHlsZTtcblx0XHRcdFx0bmV3U3R5bGUuc2V0WkluZGV4KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIC0gMyk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdG5ld1N0eWxlID0gbmV3U3R5bGUuY29uY2F0KHNlbGVjdGVkU3R5bGUpO1xuXHRcdFx0XHRuZXdTdHlsZVswXS5zZXRaSW5kZXgoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgLSAzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5wcm9iZWRTZXQuaGFzKGlkKSlcblx0XHR7XG5cdFx0XHRpZiAocmVwbGFjZSlcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSBwcm9iZWRTdHlsZTtcblx0XHRcdFx0bmV3U3R5bGUuc2V0WkluZGV4KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0bmV3U3R5bGUgPSBuZXdTdHlsZS5jb25jYXQocHJvYmVkU3R5bGUpO1xuXHRcdFx0XHRuZXdTdHlsZVswXS5zZXRaSW5kZXgoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZlYXR1cmUuc2V0U3R5bGUobmV3U3R5bGUpO1xuXHR9XG5cblx0c3RhdGljIG9sRmlsbEZyb21XZWF2ZUZpbGwoZmlsbCwgZmFkZSlcblx0e1xuXHRcdGlmIChmYWRlID09PSB1bmRlZmluZWQpIGZhZGUgPSAxO1xuXG5cdFx0bGV0IGNvbG9yID0gZmlsbC5jb2xvciAmJiBGZWF0dXJlTGF5ZXIudG9Db2xvckFycmF5KGZpbGwuY29sb3IsIGZpbGwuYWxwaGEgKiBmYWRlKSB8fCBbMCwgMCwgMCwgMF07XG5cdFx0cmV0dXJuIG5ldyBvbC5zdHlsZS5GaWxsKHtjb2xvcn0pO1xuXHR9XG5cblx0c3RhdGljIG9sU3Ryb2tlRnJvbVdlYXZlU3Ryb2tlKHN0cm9rZSwgZmFkZSlcblx0e1xuXHRcdGlmIChmYWRlID09PSB1bmRlZmluZWQpIGZhZGUgPSAxO1xuXG5cdFx0bGV0IGNvbG9yID0gc3Ryb2tlLmNvbG9yICYmIEZlYXR1cmVMYXllci50b0NvbG9yQXJyYXkoc3Ryb2tlLmNvbG9yLCBzdHJva2UuYWxwaGEgKiBmYWRlKSB8fCBbMCwgMCwgMCwgMV07XG5cblx0XHRsZXQgbGluZUNhcCA9IHN0cm9rZS5saW5lQ2FwID09PSBcIm5vbmVcIiA/IFwiYnV0dFwiIDogc3Ryb2tlLmxpbmVDYXAgfHwgXCJyb3VuZFwiO1xuXHRcdGxldCBsaW5lSm9pbiA9IHN0cm9rZS5saW5lSm9pbiA9PT0gbnVsbCA/IFwicm91bmRcIiA6IHN0cm9rZS5saW5lSm9pbiB8fCBcInJvdW5kXCI7XG5cdFx0bGV0IG1pdGVyTGltaXQgPSBOdW1iZXIoc3Ryb2tlLm1pdGVyTGltaXQpO1xuXHRcdGxldCB3aWR0aCA9IE51bWJlcihzdHJva2Uud2VpZ2h0KTtcblxuXHRcdHJldHVybiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtjb2xvciwgbGluZUNhcCwgbGluZUpvaW4sIG1pdGVyTGltaXQsIHdpZHRofSk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0T2xQcm9iZWRTdHlsZShiYXNlU3Ryb2tlU3R5bGUpXG5cdHtcblx0XHRsZXQgd2lkdGggPSBiYXNlU3Ryb2tlU3R5bGUuZ2V0V2lkdGgoKTtcblxuXHRcdHJldHVybiBbXG5cdFx0XHRcdG5ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdFx0c3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcblx0XHRcdFx0XHRcdGNvbG9yOiBbMCwgMCwgMCwgMV0sXG5cdFx0XHRcdFx0XHR3aWR0aDogd2lkdGggKyBGZWF0dXJlTGF5ZXIuUFJPQkVfSEFMT19XSURUSCArIEZlYXR1cmVMYXllci5QUk9CRV9MSU5FX1dJRFRIXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0ekluZGV4OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAtIDJcblx0XHRcdFx0fSksXG5cdFx0XHRcdG5ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdFx0c3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcblx0XHRcdFx0XHRcdGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMV0sXG5cdFx0XHRcdFx0XHR3aWR0aDogd2lkdGggKyBGZWF0dXJlTGF5ZXIuUFJPQkVfSEFMT19XSURUSFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHpJbmRleDogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgLSAxXG5cdFx0XHRcdH0pXG5cdFx0XTtcblx0fVxuXG5cdHN0YXRpYyBnZXRPbFNlbGVjdGlvblN0eWxlKGJhc2VTdHJva2VTdHlsZSlcblx0e1xuXHRcdGxldCB3aWR0aCA9IGJhc2VTdHJva2VTdHlsZS5nZXRXaWR0aCgpO1xuXHRcdGxldCBsaW5lQ2FwID0gYmFzZVN0cm9rZVN0eWxlLmdldExpbmVDYXAoKTtcblx0XHRsZXQgbGluZUpvaW4gPSBiYXNlU3Ryb2tlU3R5bGUuZ2V0TGluZUpvaW4oKTtcblx0XHRsZXQgbWl0ZXJMaW1pdCA9IGJhc2VTdHJva2VTdHlsZS5nZXRNaXRlckxpbWl0KCk7XG5cblx0XHRyZXR1cm4gW25ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG5cdFx0XHRcdFx0Y29sb3I6IFswLCAwLCAwLCAwLjVdLFxuXHRcdFx0XHRcdHdpZHRoOiB3aWR0aCArIEZlYXR1cmVMYXllci5TRUxFQ1RfV0lEVEgsXG5cdFx0XHRcdFx0bGluZUNhcCwgbGluZUpvaW4sIG1pdGVyTGltaXR9KSxcblx0XHRcdFx0ekluZGV4OiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAtIDRcblx0XHR9KV07XG5cdH1cbn1cblxuRmVhdHVyZUxheWVyLlNFTEVDVF9XSURUSCA9IDU7XG5GZWF0dXJlTGF5ZXIuUFJPQkVfSEFMT19XSURUSCA9IDQ7XG5GZWF0dXJlTGF5ZXIuUFJPQkVfTElORV9XSURUSCA9IDE7XG5cbkZlYXR1cmVMYXllci5TdHlsZXMgPSB7XG5cdE5PUk1BTDogXCJub3JtYWxTdHlsZVwiLFxuXHRVTlNFTEVDVEVEOiBcInVuc2VsZWN0ZWRTdHlsZVwiLCAvKiBGb3IgdGhlIGNhc2Ugd2hlcmUgYSBzZWxlY3Rpb24gaGFzIGJlZW4gbWFkZSBpbiB0aGUgbGF5ZXIgYnV0IHRoZSBlbGVtZW50IGlzIG5vdCBvbmUgb2YgdGhlbS4gKi9cblx0U0VMRUNURUQ6IFwic2VsZWN0ZWRTdHlsZVwiLFxuXHRQUk9CRUQ6IFwicHJvYmVkU3R5bGVcIlxufTtcblxuZXhwb3J0IGRlZmF1bHQgRmVhdHVyZUxheWVyO1xuIiwiaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5pbXBvcnQge3JlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4vTGF5ZXIuanNcIjtcbmltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vRmVhdHVyZUxheWVyLmpzXCI7XG4vKmdsb2JhbCB3ZWF2ZWpzKi9cblxuY2xhc3MgR2VvbWV0cnlMYXllciBleHRlbmRzIEZlYXR1cmVMYXllciB7XG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXG5cdFx0dGhpcy5nZW9Kc29uUGFyc2VyID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKCk7XG5cblx0XHR0aGlzLmdlb0NvbHVtblBhdGggPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwiZ2VvbWV0cnlDb2x1bW5cIik7XG5cdFx0dGhpcy5maWxsU3R5bGVQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcImZpbGxcIik7XG5cdFx0dGhpcy5saW5lU3R5bGVQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcImxpbmVcIik7XG5cblx0XHR0aGlzLmdlb0NvbHVtblBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVHZW9tZXRyeURhdGEsIHRydWUpO1xuXHRcdHRoaXMucHJvamVjdGlvblBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVHZW9tZXRyeURhdGEsIHRydWUpO1xuXG5cdFx0dGhpcy5maWxsU3R5bGVQYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlU3R5bGVEYXRhKTtcblx0XHR0aGlzLmxpbmVTdHlsZVBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEsIHRydWUpO1xuXHR9XG5cblx0dXBkYXRlR2VvbWV0cnlEYXRhKClcblx0e1xuXHRcdHZhciBwcm9qZWN0aW9uU3BlYyA9IHRoaXMuZ2VvQ29sdW1uUGF0aC5nZXRPYmplY3QoXCJpbnRlcm5hbER5bmFtaWNDb2x1bW5cIiwgbnVsbCkuZ2V0TWV0YWRhdGEoJ3Byb2plY3Rpb24nKTtcblx0XG5cdFx0dmFyIG91dHB1dFByb2plY3Rpb24gPSB0aGlzLnByb2plY3Rpb25QYXRoLmdldFN0YXRlKCkgfHwgXCJFUFNHOjM4NTdcIjtcblx0XHR2YXIgaW5wdXRQcm9qZWN0aW9uID0gcHJvamVjdGlvblNwZWMgfHwgb3V0cHV0UHJvamVjdGlvbjtcblxuXHRcdHRoaXMuc291cmNlLmNsZWFyKCk7XG5cblx0XHR2YXIga2V5cyA9IHRoaXMuZ2VvQ29sdW1uUGF0aC5wdXNoKCdpbnRlcm5hbER5bmFtaWNDb2x1bW4nKS5nZXRLZXlzKCk7XG5cdFx0dmFyIGlkYyA9IHRoaXMuZ2VvQ29sdW1uUGF0aC5nZXRPYmplY3QoXCJpbnRlcm5hbER5bmFtaWNDb2x1bW5cIik7XG5cdFx0dmFyIHJhd0dlb21ldHJpZXMgPSB3ZWF2ZWpzLmRhdGEuQ29sdW1uVXRpbHMuZ2V0R2VvSnNvbkdlb21ldHJpZXMoaWRjLCBpZGMua2V5cyk7XG5cblx0XHRmb3IgKGxldCBpZHggPSAwOyBpZHggPCBrZXlzLmxlbmd0aDsgaWR4KyspXG5cdFx0e1xuXHRcdFx0bGV0IGlkID0ga2V5c1tpZHhdO1xuXG5cdFx0XHRsZXQgZ2VvbWV0cnkgPSB0aGlzLmdlb0pzb25QYXJzZXIucmVhZEdlb21ldHJ5KHJhd0dlb21ldHJpZXNbaWR4XSwge2RhdGFQcm9qZWN0aW9uOiBpbnB1dFByb2plY3Rpb24sIGZlYXR1cmVQcm9qZWN0aW9uOiBvdXRwdXRQcm9qZWN0aW9ufSk7XG5cblx0XHRcdGxldCBmZWF0dXJlID0gbmV3IG9sLkZlYXR1cmUoe2dlb21ldHJ5fSk7XG5cdFx0XHRmZWF0dXJlLnNldElkKGlkKTtcblxuXHRcdFx0dGhpcy5zb3VyY2UuYWRkRmVhdHVyZShmZWF0dXJlKTtcblx0XHR9XG5cblx0XHR0aGlzLnVwZGF0ZVN0eWxlRGF0YSgpO1xuXHRcdHRoaXMudXBkYXRlRmlsdGVyZWRLZXlTZXQoKTtcblx0fVxuXG5cdHVwZGF0ZVN0eWxlRGF0YSgpXG5cdHtcblx0XHR2YXIgc3R5bGVSZWNvcmRzID0gdGhpcy5sYXllclBhdGgucmV0cmlldmVSZWNvcmRzKHtcblx0XHRcdGZpbGw6IHtcblx0XHRcdFx0Y29sb3I6IHRoaXMuZmlsbFN0eWxlUGF0aC5wdXNoKFwiY29sb3JcIiksXG5cdFx0XHRcdGFscGhhOiB0aGlzLmZpbGxTdHlsZVBhdGgucHVzaChcImFscGhhXCIpLFxuXHRcdFx0XHRpbWFnZVVSTDogdGhpcy5maWxsU3R5bGVQYXRoLnB1c2goXCJpbWFnZVVSTFwiKVxuXHRcdFx0fSxcblx0XHRcdHN0cm9rZToge1xuXHRcdFx0XHRjb2xvcjogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJjb2xvclwiKSxcblx0XHRcdFx0YWxwaGE6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG5cdFx0XHRcdHdlaWdodDogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJ3ZWlnaHRcIiksXG5cdFx0XHRcdGxpbmVDYXA6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiY2Fwc1wiKSxcblx0XHRcdFx0bGluZUpvaW46IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiam9pbnRzXCIpLFxuXHRcdFx0XHRtaXRlckxpbWl0OiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcIm1pdGVyTGltaXRcIilcblx0XHRcdH1cblx0XHR9LCB0aGlzLmdlb0NvbHVtblBhdGgpO1xuXG5cdFx0dGhpcy5yYXdTdHlsZXMgPSBzdHlsZVJlY29yZHM7XG5cblx0XHRmb3IgKGxldCByZWNvcmQgb2Ygc3R5bGVSZWNvcmRzKVxuXHRcdHtcblx0XHRcdGxldCBvbFN0cm9rZSA9IEZlYXR1cmVMYXllci5vbFN0cm9rZUZyb21XZWF2ZVN0cm9rZShyZWNvcmQuc3Ryb2tlKTtcblx0XHRcdGxldCBvbEZpbGwgPSBGZWF0dXJlTGF5ZXIub2xGaWxsRnJvbVdlYXZlRmlsbChyZWNvcmQuZmlsbCk7XG5cblx0XHRcdGxldCBvbFN0cm9rZUZhZGVkID0gRmVhdHVyZUxheWVyLm9sU3Ryb2tlRnJvbVdlYXZlU3Ryb2tlKHJlY29yZC5zdHJva2UsIDAuNSk7XG5cdFx0XHRsZXQgb2xGaWxsRmFkZWQgPSBGZWF0dXJlTGF5ZXIub2xGaWxsRnJvbVdlYXZlRmlsbChyZWNvcmQuZmlsbCwgMC41KTtcblxuXHRcdFx0bGV0IG5vcm1hbFN0eWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdGZpbGw6IG9sRmlsbCxcblx0XHRcdFx0c3Ryb2tlOiBvbFN0cm9rZSxcblx0XHRcdFx0ekluZGV4OiAwXG5cdFx0XHR9KV07XG5cblx0XHRcdGxldCB1bnNlbGVjdGVkU3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0ZmlsbDogb2xGaWxsRmFkZWQsXG5cdFx0XHRcdHN0cm9rZTogb2xTdHJva2VGYWRlZCxcblx0XHRcdFx0ekluZGV4OiAwXG5cdFx0XHR9KV07XG5cblx0XHRcdGxldCBzZWxlY3RlZFN0eWxlID0gRmVhdHVyZUxheWVyLmdldE9sU2VsZWN0aW9uU3R5bGUob2xTdHJva2UpO1xuXHRcdFx0bGV0IHByb2JlZFN0eWxlID0gRmVhdHVyZUxheWVyLmdldE9sUHJvYmVkU3R5bGUob2xTdHJva2UpO1xuXG5cdFx0XHRsZXQgZmVhdHVyZSA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVCeUlkKHJlY29yZC5pZCk7XG5cblx0XHRcdGlmIChmZWF0dXJlKVxuXHRcdFx0e1xuXHRcdFx0XHRmZWF0dXJlLnNldFByb3BlcnRpZXMoe25vcm1hbFN0eWxlLCB1bnNlbGVjdGVkU3R5bGUsIHNlbGVjdGVkU3R5bGUsIHByb2JlZFN0eWxlfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5TGF5ZXI7XG5cbnJlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24ucGxvdHRlcnM6Okdlb21ldHJ5UGxvdHRlclwiLCBHZW9tZXRyeUxheWVyKTtcbiIsImltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vRmVhdHVyZUxheWVyLmpzXCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBvbCBmcm9tIFwib3BlbmxheWVyc1wiO1xuXG5jbGFzcyBHbHlwaExheWVyIGV4dGVuZHMgRmVhdHVyZUxheWVyIHtcblxuXHRjb25zdHJ1Y3RvcihwYXJlbnQsIGxheWVyTmFtZSlcblx0e1xuXHRcdHN1cGVyKHBhcmVudCwgbGF5ZXJOYW1lKTtcblxuXHRcdHRoaXMucHJvamVjdGlvblBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVMb2NhdGlvbnMpO1xuXHRcdHRoaXMubGF5ZXJQYXRoLnB1c2goXCJzb3VyY2VQcm9qZWN0aW9uXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlTG9jYXRpb25zKTtcblxuXHRcdHRoaXMubGF5ZXJQYXRoLnB1c2goXCJkYXRhWFwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZUxvY2F0aW9ucyk7XG5cdFx0dGhpcy5sYXllclBhdGgucHVzaChcImRhdGFZXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlTG9jYXRpb25zLCB0cnVlKTtcblx0fVxuXG5cdF9nZXRGZWF0dXJlSWRzKCkge1xuXHRcdHJldHVybiBsb2Rhc2gubWFwKHRoaXMuc291cmNlLmdldEZlYXR1cmVzKCksIChpdGVtKSA9PiBpdGVtLmdldElkKCkpO1xuXHR9XG5cblx0c3RhdGljIF90b1BvaW50KGRhdHVtLCBmaWVsZDEsIGZpZWxkMikge1xuXHRcdGlmICh0eXBlb2YgZGF0dW0gPT09IFwib2JqZWN0XCIpXG5cdFx0e1xuXHRcdFx0bGV0IGZpcnN0UG9seSA9IGRhdHVtWzBdO1xuXHRcdFx0cmV0dXJuIChmaXJzdFBvbHkuYm91bmRzW2ZpZWxkMV0gKyBmaXJzdFBvbHkuYm91bmRzW2ZpZWxkMl0pIC8gMjtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHJldHVybiBkYXR1bTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVMb2NhdGlvbnMoKSB7XG5cdFx0LyogVXBkYXRlIGZlYXR1cmUgbG9jYXRpb25zICovXG5cdFx0dmFyIHJlY29yZHMgPSB0aGlzLmxheWVyUGF0aC5yZXRyaWV2ZVJlY29yZHMoW1wiZGF0YVhcIiwgXCJkYXRhWVwiXSwgdGhpcy5sYXllclBhdGgucHVzaChcImRhdGFYXCIpKTtcblxuXHRcdHZhciByZWNvcmRJZHMgPSBsb2Rhc2gucGx1Y2socmVjb3JkcywgXCJpZFwiKTtcblxuXHRcdHZhciByZW1vdmVkSWRzID0gbG9kYXNoLmRpZmZlcmVuY2UodGhpcy5fZ2V0RmVhdHVyZUlkcygpLCByZWNvcmRJZHMpO1xuXG5cdFx0dmFyIHJhd1Byb2ogPSB0aGlzLmxheWVyUGF0aC5nZXRTdGF0ZShcInNvdXJjZVByb2plY3Rpb25cIikgfHwgXCJFUFNHOjQzMjZcIjtcblx0XHR2YXIgbWFwUHJvaiA9IHRoaXMucHJvamVjdGlvblBhdGguZ2V0U3RhdGUoKSB8fCBcIkVQU0c6Mzg1N1wiO1xuXG5cdFx0Zm9yIChsZXQgaWQgb2YgcmVtb3ZlZElkcylcblx0XHR7XG5cdFx0XHRsZXQgZmVhdHVyZSA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVCeUlkKGlkKTtcblx0XHRcdHRoaXMuc291cmNlLnJlbW92ZUZlYXR1cmUoZmVhdHVyZSk7XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQgcmVjb3JkIG9mIHJlY29yZHMpXG5cdFx0e1xuXHRcdFx0bGV0IGZlYXR1cmUgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlQnlJZChyZWNvcmQuaWQpO1xuXG5cdFx0XHRpZiAoIWZlYXR1cmUpXG5cdFx0XHR7XG5cdFx0XHRcdGZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSh7fSk7XG5cdFx0XHRcdGZlYXR1cmUuc2V0SWQocmVjb3JkLmlkKTtcblx0XHRcdFx0dGhpcy5zb3VyY2UuYWRkRmVhdHVyZShmZWF0dXJlKTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IGRhdGFYLCBkYXRhWTtcblxuXHRcdFx0ZGF0YVggPSBHbHlwaExheWVyLl90b1BvaW50KHJlY29yZC5kYXRhWCwgXCJ4TWluXCIsIFwieE1heFwiKTtcblx0XHRcdGRhdGFZID0gR2x5cGhMYXllci5fdG9Qb2ludChyZWNvcmQuZGF0YVksIFwieU1pblwiLCBcInlNYXhcIik7XG5cblx0XHRcdGxldCBwb2ludCA9IG5ldyBvbC5nZW9tLlBvaW50KFtkYXRhWCwgZGF0YVldKTtcblx0XHRcdHBvaW50LnRyYW5zZm9ybShyYXdQcm9qLCBtYXBQcm9qKTtcblx0XHRcdGZlYXR1cmUuc2V0R2VvbWV0cnkocG9pbnQpO1xuXHRcdH1cblx0XHR0aGlzLnVwZGF0ZUZpbHRlcmVkS2V5U2V0KCk7XG5cdFx0dGhpcy51cGRhdGVTdHlsZURhdGEoKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBHbHlwaExheWVyO1xuIiwiaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5cbmNsYXNzIE1hcDJEIHtcblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cdFx0dGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuXHR9XG5cblx0Z2V0KGZpcnN0S2V5LCBzZWNvbmRLZXkpXG5cdHtcblx0XHRsZXQgc2Vjb25kTWFwID0gdGhpcy5fbWFwLmdldChmaXJzdEtleSk7XG5cdFx0cmV0dXJuIHNlY29uZE1hcCAmJiBzZWNvbmRNYXAuZ2V0KHNlY29uZEtleSk7XG5cdH1cblxuXHRzZXQoZmlyc3RLZXksIHNlY29uZEtleSwgdmFsdWUpXG5cdHtcblx0XHRsZXQgc2Vjb25kTWFwID0gdGhpcy5fbWFwLmdldChmaXJzdEtleSk7XG5cdFx0aWYgKCFzZWNvbmRNYXApXG5cdFx0e1xuXHRcdFx0c2Vjb25kTWFwID0gbmV3IE1hcCgpO1xuXHRcdFx0dGhpcy5fbWFwLnNldChmaXJzdEtleSwgc2Vjb25kTWFwKTtcblx0XHR9XG5cblx0XHRzZWNvbmRNYXAuc2V0KHNlY29uZEtleSwgdmFsdWUpO1xuXHR9XG59XG5jbGFzcyBJbWFnZUdseXBoQ2FjaGUge1xuXHRjb25zdHJ1Y3RvcigpXG5cdHtcblx0XHR0aGlzLmJhc2VJbWFnZUVsZW1lbnRzID0gbmV3IE1hcCgpO1xuXHRcdHRoaXMuY2FudmFzTWFwID0gbmV3IE1hcDJEKCk7XG5cdFx0dGhpcy5pbWFnZU1hcCA9IG5ldyBNYXAyRCgpO1xuXHR9XG5cblx0cmVxdWVzdEJhc2VJbWFnZUVsZW1lbnQodXJsLCBjYWxsYmFjaylcblx0e1xuXHRcdGxldCBpbWFnZUVsZW1lbnQgPSB0aGlzLmJhc2VJbWFnZUVsZW1lbnRzLmdldCh1cmwpO1xuXG5cdFx0aWYgKCFpbWFnZUVsZW1lbnQpXG5cdFx0e1xuXHRcdFx0aW1hZ2VFbGVtZW50ID0gbmV3IEltYWdlKCk7XG5cdFx0XHRpbWFnZUVsZW1lbnQuc3JjID0gdXJsO1xuXHRcdFx0dGhpcy5iYXNlSW1hZ2VFbGVtZW50cy5zZXQodXJsLCBpbWFnZUVsZW1lbnQpO1xuXHRcdH1cblxuXHRcdGlmIChpbWFnZUVsZW1lbnQuY29tcGxldGUpXG5cdFx0e1xuXHRcdFx0Y2FsbGJhY2soaW1hZ2VFbGVtZW50KTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGpxdWVyeShpbWFnZUVsZW1lbnQpLm9uZShcImxvYWRcIiwgKCkgPT4gY2FsbGJhY2soaW1hZ2VFbGVtZW50KSk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0Q2FjaGVkQ2FudmFzKHVybCwgY29sb3IpXG5cdHtcblx0XHRsZXQgY2FudmFzID0gdGhpcy5jYW52YXNNYXAuZ2V0KHVybCwgY29sb3IpO1xuXHRcdGxldCBmcmVzaENhbnZhcyA9IGZhbHNlO1xuXG5cdFx0aWYgKCFjYW52YXMpXG5cdFx0e1xuXHRcdFx0ZnJlc2hDYW52YXMgPSB0cnVlO1xuXHRcdFx0Y2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblx0XHRcdHRoaXMuY2FudmFzTWFwLnNldCh1cmwsIGNvbG9yLCBjYW52YXMpO1xuXHRcdH1cblxuXHRcdHJldHVybiB7Y2FudmFzLCBmcmVzaENhbnZhc307XG5cdH1cblxuXHRyZXF1ZXN0RGF0YVVybCh1cmwsIGNvbG9yLCBjYWxsYmFjaylcblx0e1xuXHRcdGxldCB7Y2FudmFzLCBmcmVzaENhbnZhc30gPSB0aGlzLmdldENhY2hlZENhbnZhcyh1cmwsIGNvbG9yKTtcblx0XHQvKiBJZiBmcmVzaENhbnZhcyBpcyB0cnVlLCB0aGlzIG1lYW5zIHRoYXQgd2UganVzdCBjcmVhdGVkIHRoZSBjYW52YXMgYW5kIGhhdmVuJ3QgcmVuZGVyZWQgdG8gaXQuIFRpbWUgdG8gZG8gdGhhdC4gKi9cblx0XHRpZiAoZnJlc2hDYW52YXMpXG5cdFx0e1xuXHRcdFx0dGhpcy5yZXF1ZXN0QmFzZUltYWdlRWxlbWVudCh1cmwsIGZ1bmN0aW9uIChpbWFnZUVsZW1lbnQpIHtcblx0XHRcdFx0W2NhbnZhcy5oZWlnaHQsIGNhbnZhcy53aWR0aF0gPSBbaW1hZ2VFbGVtZW50Lm5hdHVyYWxIZWlnaHQsIGltYWdlRWxlbWVudC5uYXR1cmFsV2lkdGhdO1xuXHRcdFx0XHRsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuXHRcdFx0XHRjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuXHRcdFx0XHRjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1hdG9wXCI7XG5cdFx0XHRcdGN0eC5kcmF3SW1hZ2UoaW1hZ2VFbGVtZW50LCAwLCAwKTtcblxuXHRcdFx0XHRjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJtdWx0aXBseVwiO1xuXHRcdFx0XHRjdHguZHJhd0ltYWdlKGltYWdlRWxlbWVudCwgMCwgMCk7XG5cblx0XHRcdFx0Y2FsbGJhY2soY2FudmFzLnRvRGF0YVVSTCgpKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Y2FsbGJhY2soY2FudmFzLnRvRGF0YVVSTCgpKTtcblx0XHR9XG5cdH1cblxuXHRnZXRJbWFnZSh1cmwsIGNvbG9yKVxuXHR7XG5cdFx0bGV0IGltYWdlID0gdGhpcy5pbWFnZU1hcC5nZXQodXJsLCBjb2xvcik7XG5cblx0XHRpZiAoIWltYWdlKVxuXHRcdHtcblx0XHRcdGltYWdlID0gbmV3IEltYWdlKCk7XG5cdFx0XHR0aGlzLnJlcXVlc3REYXRhVXJsKHVybCwgY29sb3IsIGZ1bmN0aW9uIChkYXRhVXJsKSB7XG5cdFx0XHRcdGltYWdlLnNyYyA9IGRhdGFVcmw7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaW1hZ2U7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VHbHlwaENhY2hlO1xuIiwiaW1wb3J0IGpxdWVyeSBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgb2wgZnJvbSBcIm9wZW5sYXllcnNcIjtcbmltcG9ydCBHbHlwaExheWVyIGZyb20gXCIuL0dseXBoTGF5ZXIuanNcIjtcbmltcG9ydCBGZWF0dXJlTGF5ZXIgZnJvbSBcIi4vRmVhdHVyZUxheWVyLmpzXCI7XG5pbXBvcnQgSW1hZ2VHbHlwaENhY2hlIGZyb20gXCIuL0ltYWdlR2x5cGhDYWNoZS5qc1wiO1xuaW1wb3J0IHtyZWdpc3RlckxheWVySW1wbGVtZW50YXRpb259IGZyb20gXCIuL0xheWVyLmpzXCI7XG5cbmNsYXNzIEltYWdlR2x5cGhMYXllciBleHRlbmRzIEdseXBoTGF5ZXIge1xuXG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXG5cdFx0dGhpcy5pbWFnZUdseXBoQ2FjaGUgPSBuZXcgSW1hZ2VHbHlwaENhY2hlKCk7XG5cblx0XHR0aGlzLmxheWVyUGF0aC5wdXNoKFwiaW1hZ2VTaXplXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlU3R5bGVEYXRhKTtcblx0XHR0aGlzLmxheWVyUGF0aC5wdXNoKFwiaW1hZ2VVUkxcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEsIHRydWUpO1xuXHR9XG5cblx0c2V0SWNvblN0eWxlKGZlYXR1cmUsIGltZywgaWNvblNpemUpXG5cdHtcblx0XHRsZXQgc3R5bGVzID0ge307XG5cblx0XHRpZiAoIWltZy5jb21wbGV0ZSB8fCAhaW1nLnNyYylcblx0XHR7XG5cdFx0XHRqcXVlcnkoaW1nKS5vbmUoXCJsb2FkXCIsIHRoaXMuc2V0SWNvblN0eWxlLmJpbmQodGhpcywgZmVhdHVyZSwgaW1nLCBpY29uU2l6ZSkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGxldCBtYXhEaW0gPSBNYXRoLm1heChpbWcubmF0dXJhbEhlaWdodCwgaW1nLm5hdHVyYWxXaWR0aCk7XG5cblx0XHRsZXQgc2NhbGUgPSBpY29uU2l6ZSAvIG1heERpbTtcblxuXHRcdGxldCBpbWdTaXplID0gW2ltZy5uYXR1cmFsV2lkdGgsIGltZy5uYXR1cmFsSGVpZ2h0XTtcblxuXHRcdGZvciAobGV0IHN0eWxlUHJlZml4IG9mIFtcIm5vcm1hbFwiLCBcInNlbGVjdGVkXCIsIFwicHJvYmVkXCIsIFwidW5zZWxlY3RlZFwiXSlcblx0XHR7XG5cdFx0XHRsZXQgaWNvbjtcblx0XHRcdGlmIChzdHlsZVByZWZpeCA9PT0gXCJwcm9iZWRcIilcblx0XHRcdHtcblx0XHRcdFx0aWNvbiA9IG5ldyBvbC5zdHlsZS5JY29uKHtpbWcsIGltZ1NpemUsIHNjYWxlOiBzY2FsZSAqIDIuMH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRpY29uID0gbmV3IG9sLnN0eWxlLkljb24oe2ltZywgaW1nU2l6ZSwgc2NhbGV9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHN0eWxlUHJlZml4ID09PSBcInVuc2VsZWN0ZWRcIilcblx0XHRcdHtcblx0XHRcdFx0aWNvbi5zZXRPcGFjaXR5KDEgLyAzKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzW3N0eWxlUHJlZml4ICsgXCJTdHlsZVwiXSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7aW1hZ2U6IGljb259KTtcblx0XHR9XG5cblx0XHRzdHlsZXMucmVwbGFjZSA9IHRydWU7XG5cblx0XHRmZWF0dXJlLnNldFByb3BlcnRpZXMoc3R5bGVzKTtcblx0fVxuXG5cdHVwZGF0ZVN0eWxlRGF0YSgpIHtcblx0XHQvKiBVcGRhdGUgZmVhdHVyZSBzdHlsZXMgKi9cblxuXHRcdHZhciByZWNvcmRzID0gdGhpcy5sYXllclBhdGgucmV0cmlldmVSZWNvcmRzKFtcImFscGhhXCIsIFwiY29sb3JcIiwgXCJpbWFnZVVSTFwiLCBcImltYWdlU2l6ZVwiXSwgdGhpcy5sYXllclBhdGgucHVzaChcImRhdGFYXCIpKTtcblxuXHRcdHRoaXMucmF3U3R5bGVSZWNvcmRzID0gcmVjb3JkcztcblxuXHRcdGZvciAobGV0IHJlY29yZCBvZiByZWNvcmRzKVxuXHRcdHtcblx0XHRcdGxldCBmZWF0dXJlID0gdGhpcy5zb3VyY2UuZ2V0RmVhdHVyZUJ5SWQocmVjb3JkLmlkKTtcblxuXHRcdFx0aWYgKCFmZWF0dXJlKVxuXHRcdFx0e1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IGltYWdlU2l6ZSA9IE51bWJlcihyZWNvcmQuaW1hZ2VTaXplKTtcblx0XHRcdGxldCBjb2xvciA9IEZlYXR1cmVMYXllci50b0NvbG9yUkdCQShyZWNvcmQuY29sb3IsIHJlY29yZC5hbHBoYSk7XG5cblx0XHRcdGlmICghcmVjb3JkLmltYWdlVVJMKVxuXHRcdFx0e1xuXHRcdFx0XHRmZWF0dXJlLnNldFN0eWxlKG51bGwpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IGltZyA9IHRoaXMuaW1hZ2VHbHlwaENhY2hlLmdldEltYWdlKHJlY29yZC5pbWFnZVVSTCwgY29sb3IpO1xuXG5cdFx0XHR0aGlzLnNldEljb25TdHlsZShmZWF0dXJlLCBpbWcsIGltYWdlU2l6ZSk7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEltYWdlR2x5cGhMYXllcjtcblxucmVnaXN0ZXJMYXllckltcGxlbWVudGF0aW9uKFwid2VhdmUudmlzdWFsaXphdGlvbi5wbG90dGVyczo6SW1hZ2VHbHlwaFBsb3R0ZXJcIiwgSW1hZ2VHbHlwaExheWVyKTtcbiIsImltcG9ydCBsb2Rhc2ggZnJvbSBcImxvZGFzaFwiO1xuXG5leHBvcnQgdmFyIGxheWVyUmVnaXN0cnkgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbihhc0NsYXNzTmFtZSwganNDbGFzcylcbntcblx0aWYgKCFsYXllclJlZ2lzdHJ5KVxuXHR7XG5cdFx0bGF5ZXJSZWdpc3RyeSA9IHt9O1xuXHR9XG5cdGxheWVyUmVnaXN0cnlbYXNDbGFzc05hbWVdID0ganNDbGFzcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5ld0xheWVyKHBhcmVudCwgbGF5ZXJOYW1lKVxue1xuXHR2YXIgcGF0aCA9IHBhcmVudC5wbG90dGVyc1BhdGgucHVzaChsYXllck5hbWUpO1xuXHRsZXQgbGF5ZXJUeXBlID0gcGF0aC5nZXRUeXBlKCk7XG5cdGxldCBMYXllckNsYXNzID0gbGF5ZXJSZWdpc3RyeVtsYXllclR5cGVdO1xuXHRpZiAoIUxheWVyQ2xhc3MpXG5cdHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRlbHNlXG5cdHtcblx0XHRyZXR1cm4gbmV3IExheWVyQ2xhc3MocGFyZW50LCBsYXllck5hbWUpO1xuXHR9XG59XG5cbmNsYXNzIExheWVyIHtcblxuXHRzdGF0aWMgbmV3TGF5ZXIocGFyZW50LCBsYXllck5hbWUpXG5cdHtcblx0XHRyZXR1cm4gbmV3TGF5ZXIocGFyZW50LCBsYXllck5hbWUpO1xuXHR9XG5cblx0Y29uc3RydWN0b3IocGFyZW50LCBsYXllck5hbWUpXG5cdHtcblx0XHR0aGlzLmxheWVyUGF0aCA9IHBhcmVudC5wbG90dGVyc1BhdGgucHVzaChsYXllck5hbWUpO1xuXHRcdHRoaXMuc2V0dGluZ3NQYXRoID0gcGFyZW50LmxheWVyU2V0dGluZ3NQYXRoLnB1c2gobGF5ZXJOYW1lKTtcblx0XHR0aGlzLnByb2plY3Rpb25QYXRoID0gcGFyZW50LnRvb2xQYXRoLnB1c2goXCJwcm9qZWN0aW9uU1JTXCIpO1xuXHRcdHRoaXMucGFyZW50ID0gcGFyZW50O1xuXHRcdHRoaXMubGF5ZXJOYW1lID0gbGF5ZXJOYW1lO1xuXHRcdHRoaXMubGF5ZXIgPSBudWxsO1xuXHRcdHRoaXMuX2xheWVyUmVhZHlDYWxsYmFja3MgPSB7fTtcblxuXHRcdHRoaXMubGlua1Byb3BlcnR5KHRoaXMuc2V0dGluZ3NQYXRoLnB1c2goXCJhbHBoYVwiKSwgXCJvcGFjaXR5XCIpO1xuXHRcdHRoaXMubGlua1Byb3BlcnR5KHRoaXMuc2V0dGluZ3NQYXRoLnB1c2goXCJ2aXNpYmxlXCIpLCBcInZpc2libGVcIik7XG5cdFx0dGhpcy5saW5rUHJvcGVydHkodGhpcy5zZXR0aW5nc1BhdGgucHVzaChcInNlbGVjdGFibGVcIiksIFwic2VsZWN0YWJsZVwiKTtcblx0XHQvKiBUT0RPIG1heCBhbmQgbWludmlzaWJsZXNjYWxlLCBtYXAgdG8gbWluL21heCByZXNvbHV0aW9uLiAqL1xuXHR9XG5cblx0Z2V0IHNvdXJjZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5sYXllciAmJiB0aGlzLmxheWVyLmdldFNvdXJjZSgpO1xuXHR9XG5cblx0c2V0IHNvdXJjZSh2YWx1ZSkge1xuXHRcdHRoaXMubGF5ZXIuc2V0U291cmNlKHZhbHVlKTtcblx0fVxuXG5cdC8qIEhhbmRsZXMgaW5pdGlhbCBhcHBseSBvZiBsaW5rZWQgcHJvcGVydGllcywgYWRkaW5nL3JlbW92aW5nIGZyb20gbWFwICovXG5cdHNldCBsYXllcih2YWx1ZSkge1xuXHRcdGlmICh0aGlzLl9sYXllciAhPSBudWxsKSB7XG5cdFx0XHR0aGlzLnBhcmVudC5tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXIpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xheWVyID0gdmFsdWU7XG5cblx0XHRpZiAodmFsdWUpIHtcblx0XHRcdHRoaXMucGFyZW50Lm1hcC5hZGRMYXllcih2YWx1ZSk7XG5cblx0XHRcdHZhbHVlLnNldChcImxheWVyT2JqZWN0XCIsIHRoaXMpOyAvKiBOZWVkIHRvIHN0b3JlIHRoaXMgYmFja3JlZiAqL1xuXG5cdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0Zm9yIChsZXQgbmFtZSBpbiB0aGlzLl9sYXllclJlYWR5Q2FsbGJhY2tzKSB7XG5cdFx0XHRcdFx0dGhpcy5fbGF5ZXJSZWFkeUNhbGxiYWNrc1tuYW1lXSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Z2V0IGxheWVyKCkge1xuXHRcdHJldHVybiB0aGlzLl9sYXllcjtcblx0fVxuXG5cdGxpbmtQcm9wZXJ0eShwcm9wZXJ0eVBhdGgsIHByb3BlcnR5TmFtZSwgaW5UcmFuc2Zvcm0pXG5cdHtcblx0XHQvKiBjaGFuZ2UgaW4gcGF0aCBtb2RpZnlpbmcgcHJvcGVydHlOYW1lICovXG5cdFx0aW5UcmFuc2Zvcm0gPSBpblRyYW5zZm9ybSB8fCBsb2Rhc2guaWRlbnRpdHk7XG5cblx0XHR2YXIgY2FsbGJhY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLmxheWVyKSB7XG5cdFx0XHRcdFx0dGhpcy5sYXllci5zZXQocHJvcGVydHlOYW1lLCBpblRyYW5zZm9ybShwcm9wZXJ0eVBhdGguZ2V0U3RhdGUoKSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0dGhpcy5fbGF5ZXJSZWFkeUNhbGxiYWNrc1twcm9wZXJ0eU5hbWVdID0gY2FsbGJhY2s7XG5cblx0XHRwcm9wZXJ0eVBhdGguYWRkQ2FsbGJhY2sodGhpcywgY2FsbGJhY2ssIGZhbHNlLCBmYWxzZSk7XG5cdH1cblxuXHRkZXN0cm95KClcblx0e1xuXHRcdHRoaXMubGF5ZXIgPSB1bmRlZmluZWQ7XG5cdH1cbn1cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuIiwiaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5pbXBvcnQgU3RhbmRhcmRMaWIgZnJvbSBcIi4uLy4uLy4uLy4uL291dHRzL3V0aWxzL1N0YW5kYXJkTGliLmpzXCI7XG5pbXBvcnQgRmVhdHVyZUxheWVyIGZyb20gXCIuL0ZlYXR1cmVMYXllci5qc1wiO1xuaW1wb3J0IHtyZWdpc3RlckxheWVySW1wbGVtZW50YXRpb259IGZyb20gXCIuL0xheWVyLmpzXCI7XG5pbXBvcnQgR2x5cGhMYXllciBmcm9tIFwiLi9HbHlwaExheWVyLmpzXCI7XG5pbXBvcnQgbG9kYXNoIGZyb20gXCJsb2Rhc2hcIjtcblxuY2xhc3MgU2NhdHRlclBsb3RMYXllciBleHRlbmRzIEdseXBoTGF5ZXIge1xuXHRjb25zdHJ1Y3RvcihwYXJlbnQsIGxheWVyTmFtZSlcblx0e1xuXHRcdHN1cGVyKHBhcmVudCwgbGF5ZXJOYW1lKTtcblxuXHRcdHRoaXMuc2l6ZUJ5ID0gdGhpcy5sYXllclBhdGgucHVzaChcInNpemVCeVwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSwgdHJ1ZSk7XG5cblx0XHR0aGlzLmZpbGxTdHlsZVBhdGggPSB0aGlzLmxheWVyUGF0aC5wdXNoKFwiZmlsbFwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLnVwZGF0ZVN0eWxlRGF0YSk7XG5cdFx0dGhpcy5saW5lU3R5bGVQYXRoID0gdGhpcy5sYXllclBhdGgucHVzaChcImxpbmVcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEpO1xuXHRcdHRoaXMubWF4UmFkaXVzUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJtYXhTY3JlZW5SYWRpdXNcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEpO1xuXHRcdHRoaXMubWluUmFkaXVzUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJtaW5TY3JlZW5SYWRpdXNcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVTdHlsZURhdGEpO1xuXG5cdFx0dGhpcy5kZWZhdWx0UmFkaXVzUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJkZWZhdWx0U2NyZWVuUmFkaXVzXCIpLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlU3R5bGVEYXRhLCB0cnVlKTtcblx0fVxuXG5cdHVwZGF0ZVN0eWxlRGF0YSgpXG5cdHtcblx0XHR2YXIgc3R5bGVSZWNvcmRzID0gdGhpcy5sYXllclBhdGgucmV0cmlldmVSZWNvcmRzKHtcblx0XHRcdGZpbGw6IHtcblx0XHRcdFx0Y29sb3I6IHRoaXMuZmlsbFN0eWxlUGF0aC5wdXNoKFwiY29sb3JcIiksXG5cdFx0XHRcdGFscGhhOiB0aGlzLmZpbGxTdHlsZVBhdGgucHVzaChcImFscGhhXCIpLFxuXHRcdFx0XHRpbWFnZVVSTDogdGhpcy5maWxsU3R5bGVQYXRoLnB1c2goXCJpbWFnZVVSTFwiKVxuXHRcdFx0fSxcblx0XHRcdHN0cm9rZToge1xuXHRcdFx0XHRjb2xvcjogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJjb2xvclwiKSxcblx0XHRcdFx0YWxwaGE6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiYWxwaGFcIiksXG5cdFx0XHRcdHdlaWdodDogdGhpcy5saW5lU3R5bGVQYXRoLnB1c2goXCJ3ZWlnaHRcIiksXG5cdFx0XHRcdGxpbmVDYXA6IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiY2Fwc1wiKSxcblx0XHRcdFx0bGluZUpvaW46IHRoaXMubGluZVN0eWxlUGF0aC5wdXNoKFwiam9pbnRzXCIpLFxuXHRcdFx0XHRtaXRlckxpbWl0OiB0aGlzLmxpbmVTdHlsZVBhdGgucHVzaChcIm1pdGVyTGltaXRcIilcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHZhciBzdHlsZVJlY29yZHNJbmRleCA9IGxvZGFzaC5pbmRleEJ5KHN0eWxlUmVjb3JkcywgXCJpZFwiKTtcblxuXHRcdHZhciBzaXplQnlOdW1lcmljID0gdGhpcy5sYXllclBhdGgucmV0cmlldmVSZWNvcmRzKHtzaXplQnk6IHRoaXMuc2l6ZUJ5fSwge2RhdGFUeXBlOiBcIm51bWJlclwifSk7XG5cblx0XHRmb3IgKGxldCByZWNvcmQgb2Ygc2l6ZUJ5TnVtZXJpYylcblx0XHR7XG5cdFx0XHRsZXQgaWQgPSByZWNvcmQuaWQ7XG5cdFx0XHRsZXQgZnVsbFJlY29yZCA9IHN0eWxlUmVjb3Jkc0luZGV4W2lkXTtcblx0XHRcdGlmIChmdWxsUmVjb3JkKVxuXHRcdFx0e1xuXHRcdFx0XHRmdWxsUmVjb3JkLnNpemVCeSA9IHJlY29yZC5zaXplQnk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5yYXdTdHlsZXMgPSBzdHlsZVJlY29yZHM7XG5cblx0XHRsZXQgc2l6ZUJ5ID0gbG9kYXNoLnBsdWNrKHN0eWxlUmVjb3JkcywgXCJzaXplQnlcIik7XG5cdFx0bGV0IHNpemVCeU1heCA9IGxvZGFzaC5tYXgoc2l6ZUJ5KTtcblx0XHRsZXQgc2l6ZUJ5TWluID0gbG9kYXNoLm1pbihzaXplQnkpO1xuXHRcdGxldCBhYnNNYXggPSBNYXRoLm1heChzaXplQnlNYXgsIHNpemVCeU1pbik7XG5cdFx0bGV0IG1pblNjcmVlblJhZGl1cyA9IHRoaXMubWluUmFkaXVzUGF0aC5nZXRTdGF0ZSgpO1xuXHRcdGxldCBtYXhTY3JlZW5SYWRpdXMgPSB0aGlzLm1heFJhZGl1c1BhdGguZ2V0U3RhdGUoKTtcblx0XHRsZXQgZGVmYXVsdFNjcmVlblJhZGl1cyA9IHRoaXMuZGVmYXVsdFJhZGl1c1BhdGguZ2V0U3RhdGUoKTtcblxuXHRcdHN0eWxlUmVjb3JkcyA9IGxvZGFzaC5zb3J0QnlPcmRlcihzdHlsZVJlY29yZHMsIFtcInNpemVCeVwiLCBcImlkXCJdLCBbXCJkZXNjXCJdLCBbXCJhc2NcIl0pO1xuXG5cdFx0bGV0IHpPcmRlciA9IDA7XG5cblx0XHRmb3IgKGxldCByZWNvcmQgb2Ygc3R5bGVSZWNvcmRzKVxuXHRcdHtcblx0XHRcdGxldCBzY3JlZW5SYWRpdXM7XG5cblx0XHRcdGxldCBub3JtU2l6ZSA9IFN0YW5kYXJkTGliLm5vcm1hbGl6ZShNYXRoLmFicyhyZWNvcmQuc2l6ZUJ5KSwgMCwgYWJzTWF4KTtcblxuXHRcdFx0aWYgKGlzTmFOKG5vcm1TaXplKSB8fCByZWNvcmQuc2l6ZUJ5ID09PSBudWxsKVxuXHRcdFx0e1xuXHRcdFx0XHRzY3JlZW5SYWRpdXMgPSBkZWZhdWx0U2NyZWVuUmFkaXVzO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRzY3JlZW5SYWRpdXMgPSBtaW5TY3JlZW5SYWRpdXMgKyAobm9ybVNpemUgKiAobWF4U2NyZWVuUmFkaXVzIC0gbWluU2NyZWVuUmFkaXVzKSk7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBvbFN0cm9rZSA9IEZlYXR1cmVMYXllci5vbFN0cm9rZUZyb21XZWF2ZVN0cm9rZShyZWNvcmQuc3Ryb2tlKTtcblx0XHRcdGxldCBvbEZpbGwgPSBGZWF0dXJlTGF5ZXIub2xGaWxsRnJvbVdlYXZlRmlsbChyZWNvcmQuZmlsbCk7XG5cblx0XHRcdGxldCBvbFN0cm9rZUZhZGVkID0gRmVhdHVyZUxheWVyLm9sU3Ryb2tlRnJvbVdlYXZlU3Ryb2tlKHJlY29yZC5zdHJva2UsIDAuNSk7XG5cdFx0XHRsZXQgb2xGaWxsRmFkZWQgPSBGZWF0dXJlTGF5ZXIub2xGaWxsRnJvbVdlYXZlRmlsbChyZWNvcmQuZmlsbCwgMC41KTtcblxuXHRcdFx0bGV0IG9sU2VsZWN0aW9uU3R5bGUgPSBGZWF0dXJlTGF5ZXIuZ2V0T2xTZWxlY3Rpb25TdHlsZShvbFN0cm9rZSk7XG5cdFx0XHRsZXQgb2xQcm9iZWRTdHlsZSA9IEZlYXR1cmVMYXllci5nZXRPbFByb2JlZFN0eWxlKG9sU3Ryb2tlKTtcblxuXHRcdFx0bGV0IG5vcm1hbFN0eWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XG5cdFx0XHRcdGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcblx0XHRcdFx0XHRmaWxsOiBvbEZpbGwsIHN0cm9rZTogb2xTdHJva2UsXG5cdFx0XHRcdFx0cmFkaXVzOiBzY3JlZW5SYWRpdXNcblx0XHRcdFx0fSlcblx0XHRcdH0pXTtcblxuXHRcdFx0bGV0IHVuc2VsZWN0ZWRTdHlsZSA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoe1xuXHRcdFx0XHRpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XG5cdFx0XHRcdFx0ZmlsbDogb2xGaWxsRmFkZWQsIHN0cm9rZTogb2xTdHJva2VGYWRlZCxcblx0XHRcdFx0XHRyYWRpdXM6IHNjcmVlblJhZGl1c1xuXHRcdFx0XHR9KVxuXHRcdFx0fSldO1xuXG5cdFx0XHRsZXQgc2VsZWN0ZWRTdHlsZSA9IFtcblx0XHRcdFx0bmV3IG9sLnN0eWxlLlN0eWxlKHtcblx0XHRcdFx0XHRpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XG5cdFx0XHRcdFx0XHRzdHJva2U6IG9sU2VsZWN0aW9uU3R5bGVbMF0uZ2V0U3Ryb2tlKCksXG5cdFx0XHRcdFx0XHRyYWRpdXM6IHNjcmVlblJhZGl1c1xuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHpJbmRleDogb2xTZWxlY3Rpb25TdHlsZVswXS5nZXRaSW5kZXgoKVxuXHRcdFx0XHR9KVxuXHRcdFx0XTtcblxuXHRcdFx0bGV0IHByb2JlZFN0eWxlID0gW1xuXHRcdFx0XHRuZXcgb2wuc3R5bGUuU3R5bGUoe1xuXHRcdFx0XHRcdGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcblx0XHRcdFx0XHRcdHN0cm9rZTogb2xQcm9iZWRTdHlsZVswXS5nZXRTdHJva2UoKSxcblx0XHRcdFx0XHRcdHJhZGl1czogc2NyZWVuUmFkaXVzXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0ekluZGV4OiBvbFByb2JlZFN0eWxlWzBdLmdldFpJbmRleCgpXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRuZXcgb2wuc3R5bGUuU3R5bGUoe1xuXHRcdFx0XHRcdGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcblx0XHRcdFx0XHRcdHN0cm9rZTogb2xQcm9iZWRTdHlsZVsxXS5nZXRTdHJva2UoKSxcblx0XHRcdFx0XHRcdHJhZGl1czogc2NyZWVuUmFkaXVzXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0ekluZGV4OiBvbFByb2JlZFN0eWxlWzFdLmdldFpJbmRleCgpXG5cdFx0XHRcdH0pXG5cdFx0XHRdO1xuXG5cdFx0XHRsZXQgZmVhdHVyZSA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVCeUlkKHJlY29yZC5pZCk7XG5cblx0XHRcdGlmIChmZWF0dXJlKVxuXHRcdFx0e1xuXHRcdFx0XHRmZWF0dXJlLnNldFByb3BlcnRpZXMoe25vcm1hbFN0eWxlLCB1bnNlbGVjdGVkU3R5bGUsIHNlbGVjdGVkU3R5bGUsIHByb2JlZFN0eWxlLCB6T3JkZXJ9KTtcblx0XHRcdH1cblxuXHRcdFx0ek9yZGVyKys7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjYXR0ZXJQbG90TGF5ZXI7XG5cbnJlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24ucGxvdHRlcnM6OlNjYXR0ZXJQbG90UGxvdHRlclwiLCBTY2F0dGVyUGxvdExheWVyKTtcbiIsImltcG9ydCBMYXllciBmcm9tIFwiLi9MYXllci5qc1wiO1xuaW1wb3J0IG9sIGZyb20gXCJvcGVubGF5ZXJzXCI7XG5pbXBvcnQge3JlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4vTGF5ZXIuanNcIjtcblxuY2xhc3MgVGlsZUxheWVyIGV4dGVuZHMgTGF5ZXIge1xuXG5cdGNvbnN0cnVjdG9yKHBhcmVudCwgbGF5ZXJOYW1lKVxuXHR7XG5cdFx0c3VwZXIocGFyZW50LCBsYXllck5hbWUpO1xuXG5cdFx0dGhpcy5sYXllciA9IG5ldyBvbC5sYXllci5UaWxlKCk7XG5cdFx0dGhpcy5zZXJ2aWNlUGF0aCA9IHRoaXMubGF5ZXJQYXRoLnB1c2goXCJzZXJ2aWNlXCIsIG51bGwpO1xuXHRcdHRoaXMub2xkUHJvdmlkZXJOYW1lID0gbnVsbDtcblxuXHRcdHRoaXMuc2VydmljZVBhdGguYWRkQ2FsbGJhY2sodGhpcywgdGhpcy51cGRhdGVUaWxlU291cmNlLCB0cnVlKTtcblx0XHR0aGlzLnByb2plY3Rpb25QYXRoLmFkZENhbGxiYWNrKHRoaXMsIHRoaXMudXBkYXRlVmFsaWRFeHRlbnRzLCB0cnVlKTtcblx0fVxuXG5cdHVwZGF0ZVZhbGlkRXh0ZW50cygpXG5cdHtcblx0XHR2YXIgcHJvaiA9IG9sLnByb2ouZ2V0KHRoaXMucHJvamVjdGlvblBhdGguZ2V0U3RhdGUoKSB8fCBcIkVQU0c6Mzg1N1wiKTtcblx0XHRpZiAocHJvailcblx0XHRcdHRoaXMubGF5ZXIuc2V0RXh0ZW50KHByb2ouZ2V0RXh0ZW50KCkpO1xuXHRcdGVsc2Vcblx0XHRcdGNvbnNvbGUubG9nKCdpbnZhbGlkIHByb2ogLT4gbm8gZXh0ZW50Jyk7XG5cdH1cblx0Z2V0Q3VzdG9tV01TU291cmNlKClcblx0e1xuXHRcdHZhciBjdXN0b21XTVNQYXRoID0gdGhpcy5zZXJ2aWNlUGF0aDtcblxuXHRcdGlmIChjdXN0b21XTVNQYXRoLnB1c2goXCJ3bXNVUkxcIikuZ2V0VHlwZSgpKSB7XG5cdFx0XHRsZXQgdXJsID0gY3VzdG9tV01TUGF0aC5nZXRTdGF0ZShcIndtc1VSTFwiKTtcblx0XHRcdGxldCBhdHRyaWJ1dGlvbnMgPSBjdXN0b21XTVNQYXRoLmdldFN0YXRlKFwiY3JlZGl0SW5mb1wiKTtcblx0XHRcdGxldCBwcm9qZWN0aW9uID0gY3VzdG9tV01TUGF0aC5nZXRTdGF0ZShcInRpbGVQcm9qZWN0aW9uU1JTXCIpO1xuXG5cdFx0XHRyZXR1cm4gbmV3IG9sLnNvdXJjZS5YWVooe1xuXHRcdFx0XHR1cmwsIGF0dHJpYnV0aW9ucywgcHJvamVjdGlvblxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0TW9kZXN0TWFwc1NvdXJjZSgpXG5cdHtcblx0XHR2YXIgcHJvdmlkZXJOYW1lUGF0aCA9IHRoaXMuc2VydmljZVBhdGgucHVzaChcInByb3ZpZGVyTmFtZVwiKTtcblxuXHRcdGlmIChwcm92aWRlck5hbWVQYXRoLmdldFR5cGUoKSkge1xuXHRcdFx0bGV0IHByb3ZpZGVyTmFtZSA9IHByb3ZpZGVyTmFtZVBhdGguZ2V0U3RhdGUoKTtcblxuXHRcdFx0aWYgKHByb3ZpZGVyTmFtZSA9PT0gdGhpcy5vbGRQcm92aWRlck5hbWUpIHtcblx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdH1cblxuXHRcdFx0c3dpdGNoIChwcm92aWRlck5hbWUpXG5cdFx0XHR7XG5cdFx0XHRcdGNhc2UgXCJTdGFtZW4gV2F0ZXJDb2xvclwiOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLlN0YW1lbih7bGF5ZXI6IFwid2F0ZXJjb2xvclwiLCB3cmFwWDogZmFsc2V9KTtcblx0XHRcdFx0Y2FzZSBcIlN0YW1lbiBUb25lclwiOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLlN0YW1lbih7bGF5ZXI6IFwidG9uZXJcIiwgd3JhcFg6IGZhbHNlfSk7XG5cdFx0XHRcdGNhc2UgXCJPcGVuIE1hcFF1ZXN0IEFlcmlhbFwiOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLk1hcFF1ZXN0KHtsYXllcjogXCJzYXRcIiwgd3JhcFg6IGZhbHNlfSk7XG5cdFx0XHRcdGNhc2UgXCJPcGVuIE1hcFF1ZXN0XCI6XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBvbC5zb3VyY2UuTWFwUXVlc3Qoe2xheWVyOiBcIm9zbVwiLCB3cmFwWDogZmFsc2V9KTtcblx0XHRcdFx0Y2FzZSBcIk9wZW4gU3RyZWV0IE1hcFwiOlxuXHRcdFx0XHRcdHJldHVybiBuZXcgb2wuc291cmNlLk9TTSh7d3JhcFg6IGZhbHNlfSk7XG5cdFx0XHRcdGNhc2UgXCJCbHVlIE1hcmJsZSBNYXBcIjpcblx0XHRcdFx0XHRyZXR1cm4gbmV3IG9sLnNvdXJjZS5UaWxlV01TKHt1cmw6IFwiaHR0cDovL25lb3dtcy5zY2kuZ3NmYy5uYXNhLmdvdi93bXMvd21zXCIsIHdyYXBYOiBmYWxzZX0pO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZVRpbGVTb3VyY2UoKVxuXHR7XG5cdFx0dmFyIHNlcnZpY2VEcml2ZXJOYW1lID0gdGhpcy5zZXJ2aWNlUGF0aC5nZXRUeXBlKCk7XG5cdFx0dmFyIG5ld0xheWVyID0gbnVsbDtcblx0XHRzd2l0Y2ggKHNlcnZpY2VEcml2ZXJOYW1lKVxuXHRcdHtcblx0XHRcdGNhc2UgXCJ3ZWF2ZS5zZXJ2aWNlcy53bXM6Ok1vZGVzdE1hcHNXTVNcIjpcblx0XHRcdFx0bmV3TGF5ZXIgPSB0aGlzLmdldE1vZGVzdE1hcHNTb3VyY2UoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwid2VhdmUuc2VydmljZXMud21zOjpDdXN0b21XTVNcIjpcblx0XHRcdFx0bmV3TGF5ZXIgPSB0aGlzLmdldEN1c3RvbVdNU1NvdXJjZSgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdG5ld0xheWVyID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAobmV3TGF5ZXIgIT09IHVuZGVmaW5lZClcblx0XHR7XG5cdFx0XHR0aGlzLnNvdXJjZSA9IG5ld0xheWVyO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlTGF5ZXI7XG5cbnJlZ2lzdGVyTGF5ZXJJbXBsZW1lbnRhdGlvbihcIndlYXZlLnZpc3VhbGl6YXRpb24ucGxvdHRlcnM6OldNU1Bsb3R0ZXJcIiwgVGlsZUxheWVyKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbi8vXG4vKiBnbG9iYWwgV2VhdmUsIHdlYXZlanMgKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFyY2hhcnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiA8ZGl2PjwvZGl2PjtcbiAgfVxuXG59XG5cbi8qKlxuICogTWV0YWRhdGFcbiAqXG4gKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIEFycmF5LjxPYmplY3Q+Pn1cbiAqL1xuQmFyY2hhcnQucHJvdG90eXBlLkZMRVhKU19DTEFTU19JTkZPID0geyBuYW1lczogW3sgbmFtZTogJ0JhcmNoYXJ0JywgcU5hbWU6ICd3ZWF2ZWpzLnRvb2xzLkJhcmNoYXJ0J31dLCBpbnRlcmZhY2VzOiBbd2VhdmVqcy5hcGkuY29yZS5JTGlua2FibGVPYmplY3RdIH07XG5XZWF2ZS5yZWdpc3RlckNsYXNzKCd3ZWF2ZWpzLnRvb2xzLkJhcmNoYXJ0JywgQmFyY2hhcnQpO1xuIiwiaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuLi8uLi9vdXR0cy90b29scy9BYnN0cmFjdFdlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBjMyBmcm9tIFwiYzNcIjtcbmltcG9ydCBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7cmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb259IGZyb20gXCIuLi8uLi9vdXR0cy9XZWF2ZVRvb2wuanN4XCI7XG5pbXBvcnQgRm9ybWF0VXRpbHMgZnJvbSBcIi4uLy4uL291dHRzL3V0aWxzL0Zvcm1hdFV0aWxzXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmNsYXNzIFdlYXZlQzNMaW5lQ2hhcnQgZXh0ZW5kcyBBYnN0cmFjdFdlYXZlVG9vbCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLmtleVRvSW5kZXggPSB7fTtcbiAgICAgICAgdGhpcy5pbmRleFRvS2V5ID0ge307XG4gICAgICAgIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWwgPSB7fTtcbiAgICB9XG5cbiAgICBfc2VsZWN0aW9uS2V5c0NoYW5nZWQoKSB7XG4gICAgICAgIGlmKCF0aGlzLmNoYXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleXMgPSB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuZ2V0S2V5cygpO1xuICAgICAgICB2YXIgc2VsZWN0ZWRJbmRpY2VzID0gc2VsZWN0ZWRLZXlzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5rZXlUb0luZGV4KTtcbiAgICAgICAgdmFyIGluZGljZXMgPSBrZXlzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMua2V5VG9JbmRleFtrZXldKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzID0gXy5kaWZmZXJlbmNlKGluZGljZXMsIHNlbGVjdGVkSW5kaWNlcyk7XG4gICAgICAgIGlmKHNlbGVjdGVkSW5kaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vdW5mb2N1cyBhbGwgY2lyY2xlc1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKS5zdHlsZShcIm9wYWNpdHlcIiwgXCIwLjFcIik7XG5cbiAgICAgICAgICAgIHNlbGVjdGVkSW5kaWNlcy5mb3JFYWNoKCAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAvL2N1c3RvbSBzdHlsZSBmb3IgY2lyY2xlcyBvbiBzZWxlY3RlZCBsaW5lc1xuICAgICAgICAgICAgICAgIHZhciBjaXJjbGVDb3VudCA9IGQzLnNlbGVjdChkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJnXCIpLmZpbHRlcihcIi5jMy1jaGFydC1saW5lXCIpLnNlbGVjdEFsbChcImNpcmNsZVwiKS5maWx0ZXIoXCIuYzMtc2hhcGVcIilbaW5kZXhdKVswXVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2lyY2xlcyA9IF8ucmFuZ2UoMCxjaXJjbGVDb3VudCk7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRDaXJjbGVzLmZvckVhY2goIChpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChkMy5zZWxlY3QoZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiZ1wiKS5maWx0ZXIoXCIuYzMtY2hhcnQtbGluZVwiKS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuZmlsdGVyKFwiLmMzLXNoYXBlXCIpW2luZGV4XSlbMF1bMF1baV0pLnN0eWxlKHtvcGFjaXR5OiAxLjAsIFwic3Ryb2tlLW9wYWNpdHlcIjogMS4wfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZSh1bnNlbGVjdGVkSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlLmMzLWxpbmVcIiwge29wYWNpdHk6IDAuMX0pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShzZWxlY3RlZEluZGljZXMsIFwicGF0aFwiLCBcIi5jMy1zaGFwZS5jMy1saW5lXCIsIHtvcGFjaXR5OiAxLjB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc2VsZWN0KFtcInlcIl0sIHNlbGVjdGVkSW5kaWNlcywgdHJ1ZSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy9mb2N1cyBhbGwgY2lyY2xlc1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKS5zdHlsZSh7b3BhY2l0eTogMS4wLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21TdHlsZShpbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGUuYzMtbGluZVwiLCB7b3BhY2l0eTogMS4wfSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnNlbGVjdChbXCJ5XCJdLCBbXSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcHJvYmVkS2V5c0NoYW5nZWQoKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZEtleXMgPSB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldC5nZXRLZXlzKCk7XG4gICAgICAgIHZhciBzZWxlY3RlZEluZGljZXMgPSBzZWxlY3RlZEtleXMubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmtleVRvSW5kZXgpO1xuICAgICAgICB2YXIgaW5kaWNlcyA9IGtleXMubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5rZXlUb0luZGV4W2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHVuc2VsZWN0ZWRJbmRpY2VzID0gXy5kaWZmZXJlbmNlKGluZGljZXMsIHNlbGVjdGVkSW5kaWNlcyk7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSW5kaWNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vdW5mb2N1cyBhbGwgY2lyY2xlc1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMuZWxlbWVudCkuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKS5zdHlsZSh7b3BhY2l0eTogMC4xLCBcInN0cm9rZS1vcGFjaXR5XCI6IDAuMH0pO1xuXG4gICAgICAgICAgICBzZWxlY3RlZEluZGljZXMuZm9yRWFjaCggKGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgLy9jdXN0b20gc3R5bGUgZm9yIGNpcmNsZXMgb24gcHJvYmVkIGxpbmVzXG4gICAgICAgICAgICAgICAgdmFyIGNpcmNsZUNvdW50ID0gZDMuc2VsZWN0KGQzLnNlbGVjdCh0aGlzLmVsZW1lbnQpLnNlbGVjdEFsbChcImdcIikuZmlsdGVyKFwiLmMzLWNoYXJ0LWxpbmVcIikuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmZpbHRlcihcIi5jMy1zaGFwZVwiKVtpbmRleF0pWzBdWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRDaXJjbGVzID0gXy5yYW5nZSgwLGNpcmNsZUNvdW50KTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENpcmNsZXMuZm9yRWFjaCggKGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KGQzLnNlbGVjdChkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJnXCIpLmZpbHRlcihcIi5jMy1jaGFydC1saW5lXCIpLnNlbGVjdEFsbChcImNpcmNsZVwiKS5maWx0ZXIoXCIuYzMtc2hhcGVcIilbaW5kZXhdKVswXVswXVtpXSkuc3R5bGUoe29wYWNpdHk6IDEuMCwgXCJzdHJva2Utb3BhY2l0eVwiOiAwLjB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHVuc2VsZWN0ZWRJbmRpY2VzLCBcInBhdGhcIiwgXCIuYzMtc2hhcGUuYzMtbGluZVwiLCB7b3BhY2l0eTogMC4xfSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbVN0eWxlKHNlbGVjdGVkSW5kaWNlcywgXCJwYXRoXCIsIFwiLmMzLXNoYXBlLmMzLWxpbmVcIiwge29wYWNpdHk6IDEuMH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0aW9uS2V5c0NoYW5nZWQoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZVN0eWxlKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcy5lbGVtZW50KS5zZWxlY3RBbGwoXCJjaXJjbGVcIikuc3R5bGUoXCJvcGFjaXR5XCIsIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoXCJzdHJva2VcIiwgXCJibGFja1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKFwic3Ryb2tlLW9wYWNpdHlcIiwgMC4wKTtcbiAgICB9XG5cbiAgICBfZGF0YUNoYW5nZWQoKSB7XG4gICAgICAgIHRoaXMuY29sdW1uTGFiZWxzID0gW107XG4gICAgICAgIHRoaXMuY29sdW1uTmFtZXMgPSBbXTtcblxuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnBhdGhzLmNvbHVtbnMuZ2V0Q2hpbGRyZW4oKTtcblxuICAgICAgICB0aGlzLnlMYWJlbENvbHVtblBhdGggPSBjaGlsZHJlblswXTtcblxuICAgICAgICBsZXQgbnVtZXJpY01hcHBpbmcgPSB7XG4gICAgICAgICAgICBjb2x1bW5zOiBjaGlsZHJlbixcbiAgICAgICAgICAgIHlMYWJlbDogdGhpcy55TGFiZWxDb2x1bW5QYXRoXG4gICAgICAgIH07XG5cblxuICAgICAgICBsZXQgc3RyaW5nTWFwcGluZyA9IHtcbiAgICAgICAgICAgIGNvbHVtbnM6IGNoaWxkcmVuLFxuICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgIC8vYWxwaGE6IHRoaXMuX2xpbmVTdHlsZVBhdGgucHVzaChcImFscGhhXCIpLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLnBhdGhzLmxpbmVTdHlsZS5wdXNoKFwiY29sb3JcIilcbiAgICAgICAgICAgICAgICAvL2NhcHM6IHRoaXMuX2xpbmVTdHlsZVBhdGgucHVzaChcImNhcHNcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5TGFiZWw6IHRoaXMueUxhYmVsQ29sdW1uUGF0aFxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAobGV0IGlkeCBpbiBjaGlsZHJlbikge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baWR4XTtcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IGNoaWxkLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKTtcbiAgICAgICAgICAgIGxldCBuYW1lID0gY2hpbGQuZ2V0UGF0aCgpLnBvcCgpO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5MYWJlbHMucHVzaCh0aXRsZSk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbk5hbWVzLnB1c2gobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm51bWVyaWNSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhudW1lcmljTWFwcGluZywge2tleVNldDogdGhpcy5wYXRocy5maWx0ZXJlZEtleVNldCwgZGF0YVR5cGU6IFwibnVtYmVyXCJ9KTtcbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzID0gdGhpcy5wYXRocy5wbG90dGVyLnJldHJpZXZlUmVjb3JkcyhzdHJpbmdNYXBwaW5nLCB7a2V5U2V0OiB0aGlzLnBhdGhzLmZpbHRlcmVkS2V5U2V0LCBkYXRhVHlwZTogXCJzdHJpbmdcIn0pO1xuXG4gICAgICAgIHRoaXMucmVjb3JkcyA9IF8uemlwKHRoaXMubnVtZXJpY1JlY29yZHMsIHRoaXMuc3RyaW5nUmVjb3Jkcyk7XG4gICAgICAgIHRoaXMucmVjb3JkcyA9IF8uc29ydEJ5KHRoaXMucmVjb3JkcywgWzAsIFwiaWRcIl0pO1xuXG4gICAgICAgIGlmKHRoaXMucmVjb3Jkcy5sZW5ndGgpXG4gICAgICAgICAgW3RoaXMubnVtZXJpY1JlY29yZHMsIHRoaXMuc3RyaW5nUmVjb3Jkc10gPSBfLnVuemlwKHRoaXMucmVjb3Jkcyk7XG5cbiAgICAgICAgdGhpcy5rZXlUb0luZGV4ID0ge307XG4gICAgICAgIHRoaXMuaW5kZXhUb0tleSA9IHt9O1xuICAgICAgICB0aGlzLnlBeGlzVmFsdWVUb0xhYmVsID0ge307XG5cbiAgICAgICAgdGhpcy5udW1lcmljUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtleVRvSW5kZXhbcmVjb3JkLmlkXSA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5pbmRleFRvS2V5W2luZGV4XSA9IHJlY29yZC5pZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdHJpbmdSZWNvcmRzLmZvckVhY2goKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICB2YXIgbnVtZXJpY1JlY29yZCA9IHRoaXMubnVtZXJpY1JlY29yZHNbaW5kZXhdO1xuICAgICAgICAgIHRoaXMueUF4aXNWYWx1ZVRvTGFiZWxbbnVtZXJpY1JlY29yZC55TGFiZWxdID0gcmVjb3JkLnlMYWJlbDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcblxuICAgICAgICBjb2x1bW5zID0gdGhpcy5udW1lcmljUmVjb3Jkcy5tYXAoZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICB2YXIgdGVtcEFyciA9IFtdO1xuICAgICAgICAgICAgdGVtcEFyci5wdXNoKHJlY29yZC5pZCk7XG4gICAgICAgICAgICBfLmtleXMocmVjb3JkLmNvbHVtbnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHRlbXBBcnIucHVzaChyZWNvcmQuY29sdW1uc1trZXldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBBcnI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29sb3JzID0ge307XG4gICAgICAgIHRoaXMuc3RyaW5nUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29sb3JzW3JlY29yZC5pZF0gPSByZWNvcmQubGluZS5jb2xvciB8fCBcIiNDMENERDFcIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGNoYXJ0VHlwZSA9IFwibGluZVwiO1xuICAgICAgICBpZih0aGlzLnBhdGhzLnBsb3R0ZXIucHVzaChcImN1cnZlVHlwZVwiKS5nZXRTdGF0ZSgpID09PSBcImRvdWJsZVwiKSB7XG4gICAgICAgICAgICBjaGFydFR5cGUgPSBcInNwbGluZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jaGFydC5sb2FkKHtjb2x1bW5zOiBjb2x1bW5zLCBjb2xvcnM6IHRoaXMuY29sb3JzLCB0eXBlOiBjaGFydFR5cGUsIHVubG9hZDogdHJ1ZX0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgc3VwZXIuY29tcG9uZW50RGlkVXBkYXRlKCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJyZXNpemluZ1wiKTtcbiAgICAgICAgLy92YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgbmV3RWxlbWVudFNpemUgPSB0aGlzLmdldEVsZW1lbnRTaXplKCk7XG4gICAgICAgIGlmKCFfLmlzRXF1YWwobmV3RWxlbWVudFNpemUsIHRoaXMuZWxlbWVudFNpemUpKSB7XG4gICAgICAgICAgdGhpcy5jaGFydC5yZXNpemUobmV3RWxlbWVudFNpemUpO1xuICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvL3ZhciBlbmQgPSBEYXRlLm5vdygpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKGVuZCAtIHN0YXJ0KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgLyogQ2xlYW51cCBjYWxsYmFja3MgKi9cbiAgICAgICAgLy90aGlzLnRlYXJkb3duQ2FsbGJhY2tzKCk7XG4gICAgICAgIHN1cGVyLmNvbXBvbmVudFdpbGxVbm1vdW50KCk7XG4gICAgICAgIHRoaXMuY2hhcnQuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBzdXBlci5jb21wb25lbnREaWRNb3VudCgpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnRvZ2dsZUtleS5iaW5kKHRoaXMpKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudG9nZ2xlS2V5LmJpbmQodGhpcykpO1xuICAgICAgICB2YXIgZGF0YUNoYW5nZWQgPSBfLmRlYm91bmNlKHRoaXMuX2RhdGFDaGFuZ2VkLmJpbmQodGhpcyksIDEwMCk7XG4gICAgICAgIHZhciBzZWxlY3Rpb25LZXlTZXRDaGFuZ2VkID0gdGhpcy5fc2VsZWN0aW9uS2V5c0NoYW5nZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdmFyIHByb2JlS2V5U2V0Q2hhbmdlZCA9IF8uZGVib3VuY2UodGhpcy5fcHJvYmVkS2V5c0NoYW5nZWQuYmluZCh0aGlzKSwgMTAwKTtcbiAgICAgICAgdmFyIHBsb3R0ZXJQYXRoID0gdGhpcy50b29sUGF0aC5wdXNoUGxvdHRlcihcInBsb3RcIik7XG4gICAgICAgIHZhciBtYXBwaW5nID0gW1xuICAgICAgICAgIHsgbmFtZTogXCJwbG90dGVyXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLCBjYWxsYmFja3M6IG51bGx9LFxuICAgICAgICAgIHsgbmFtZTogXCJjb2x1bW5zXCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJjb2x1bW5zXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImxpbmVTdHlsZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwibGluZVN0eWxlXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImN1cnZlVHlwZVwiLCBwYXRoOiBwbG90dGVyUGF0aC5wdXNoKFwiY3VydmVUeXBlXCIpLCBjYWxsYmFja3M6IGRhdGFDaGFuZ2VkIH0sXG4gICAgICAgICAgeyBuYW1lOiBcImZpbHRlcmVkS2V5U2V0XCIsIHBhdGg6IHBsb3R0ZXJQYXRoLnB1c2goXCJmaWx0ZXJlZEtleVNldFwiKSwgY2FsbGJhY2tzOiBkYXRhQ2hhbmdlZCB9LFxuICAgICAgICAgIHsgbmFtZTogXCJzZWxlY3Rpb25LZXlTZXRcIiwgcGF0aDogdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LCBjYWxsYmFja3M6IHNlbGVjdGlvbktleVNldENoYW5nZWR9LFxuICAgICAgICAgIHsgbmFtZTogXCJwcm9iZUtleVNldFwiLCBwYXRoOiB0aGlzLnRvb2xQYXRoLnByb2JlX2tleXNldCwgY2FsbGJhY2tzOiBwcm9iZUtleVNldENoYW5nZWR9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplUGF0aHMobWFwcGluZyk7XG5cbiAgICAgICAgdGhpcy5jM0NvbmZpZyA9IHtcbiAgICAgICAgICAgIC8vc2l6ZTogdGhpcy5nZXRFbGVtZW50U2l6ZSgpLFxuICAgICAgICAgICAgcGFkZGluZzoge1xuICAgICAgICAgICAgICB0b3A6IDIwLFxuICAgICAgICAgICAgICBib3R0b206IDIwLFxuICAgICAgICAgICAgICByaWdodDogMzBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogW10sXG4gICAgICAgICAgICAgICAgeFNvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmtleURvd24gJiYgZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGguc2VsZWN0aW9uX2tleXNldC5zZXRLZXlzKFtkLmlkXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uc2VsZWN0ZWQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQuYWRkS2V5cyhbZC5pZF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbnVuc2VsZWN0ZWQ6IChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5oYXNPd25Qcm9wZXJ0eShcImluZGV4XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xQYXRoLnNlbGVjdGlvbl9rZXlzZXQucmVtb3ZlS2V5cyhbZC5pZF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbm1vdXNlb3ZlcjogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW2QuaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25tb3VzZW91dDogKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYoZCAmJiBkLmhhc093blByb3BlcnR5KFwiaW5kZXhcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFBhdGgucHJvYmVfa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aWxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbHVtbkxhYmVsc1tkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aWxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IChudW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy55TGFiZWxDb2x1bW5QYXRoICYmIHRoaXMueUxhYmVsQ29sdW1uUGF0aC5nZXRWYWx1ZShcInRoaXMuZ2V0TWV0YWRhdGEoJ2RhdGFUeXBlJylcIikgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55QXhpc1ZhbHVlVG9MYWJlbFtudW1dIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZvcm1hdFV0aWxzLmRlZmF1bHROdW1iZXJGb3JtYXR0aW5nKG51bSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiaW5kdG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXJlZDogdGhpcy5fdXBkYXRlU3R5bGUuYmluZCh0aGlzKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2hhcnQgPSBjMy5nZW5lcmF0ZSh0aGlzLmMzQ29uZmlnKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayhldmVudDpNb3VzZUV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoIXRoaXMuZmxhZykge1xuICAgICAgICAgICAgdGhpcy50b29sUGF0aC5zZWxlY3Rpb25fa2V5c2V0LnNldEtleXMoW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRvZ2dsZUtleShldmVudDpLZXlib2FyZEV2ZW50KTp2b2lkIHtcbiAgICAgICAgaWYoKGV2ZW50LmtleUNvZGUgPT09IDE3KXx8KGV2ZW50LmtleUNvZGUgPT09IDkxKSB8fCAoZXZlbnQua2V5Q29kZSA9PT0gMjI0KSkge1xuICAgICAgICAgICAgdGhpcy5rZXlEb3duID0gIXRoaXMua2V5RG93bjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdmVDM0xpbmVDaGFydDtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpMaW5lQ2hhcnRUb29sXCIsIFdlYXZlQzNMaW5lQ2hhcnQpO1xuIiwiaW1wb3J0IHtyZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbn0gZnJvbSBcIi4uLy4uL291dHRzL1dlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQge3JvdW5kfSBmcm9tIFwiZDNcIjtcbmltcG9ydCB7Qm9vdHN0cmFwVGFibGUsIFRhYmxlSGVhZGVyQ29sdW1ufSBmcm9tICdyZWFjdC1ib290c3RyYXAtdGFibGUnO1xuLy9pbXBvcnQgUmVhY3REYXRhR3JpZCBmcm9tIFwicmVhY3QtZGF0YWdyaWRcIjtcbmltcG9ydCBBYnN0cmFjdFdlYXZlVG9vbCBmcm9tIFwiLi4vLi4vb3V0dHMvdG9vbHMvQWJzdHJhY3RXZWF2ZVRvb2wuanN4XCI7XG5cbmNsYXNzIFdlYXZlUmVhY3RUYWJsZSBleHRlbmRzIEFic3RyYWN0V2VhdmVUb29sIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB2YXIgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnQgPyB0aGlzLmdldEVsZW1lbnRTaXplKCkgOiBudWxsO1xuICAgICAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICAgICAgICA8RGF0YVRhYmxlIHRvb2xQYXRoPXt0aGlzLnRvb2xQYXRofSB3aWR0aD17ZWxlbWVudFNpemUud2lkdGggKyBcInB4XCJ9IGhlaWdodD17ZWxlbWVudFNpemUuaGVpZ2h0ICsgXCJweFwifS8+XG4gICAgICAgICwgdGhpcy5lbGVtZW50KTtcbiAgICB9XG59XG5cbmNsYXNzIERhdGFUYWJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMudG9vbFBhdGggPSBwcm9wcy50b29sUGF0aDtcbiAgICAgICAgdGhpcy5fY29sdW1uc1BhdGggPSB0aGlzLnRvb2xQYXRoLnB1c2goXCJjb2x1bW5zXCIpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLl9jb2x1bW5zUGF0aC5hZGRDYWxsYmFjayh0aGlzLCBfLmRlYm91bmNlKHRoaXMuZm9yY2VVcGRhdGUuYmluZCh0aGlzKSwgMCksIHRydWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy50b29sUGF0aC5wdXNoKFwiZmlsdGVyZWRLZXlTZXRcIikuYWRkQ2FsbGJhY2sodGhpcywgXy5kZWJvdW5jZSh0aGlzLmZvcmNlVXBkYXRlLmJpbmQodGhpcyksIDApLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMudG9vbFBhdGgucHVzaChcInNlbGVjdGlvbktleVNldFwiKS5hZGRDYWxsYmFjayh0aGlzLCB0aGlzLl9zZWxlY3Rpb25LZXlzQ2hhbmdlZCwgdHJ1ZSwgZmFsc2UpO1xuICAgIH1cbiAgICBfc2VsZWN0aW9uS2V5c0NoYW5nZWQgKCkge1xuICAgICAgICAvLyB2YXIga2V5cyA9IHRoaXMudG9vbFBhdGgucHVzaChcInNlbGVjdGlvbktleVNldFwiLCBudWxsKS5nZXRLZXlzKCk7XG4gICAgICAgIC8vIHZhciBzZWxlY3Rpb24gPSB7fTtcbiAgICAgICAgLy8ga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgLy8gICAgIHNlbGVjdGlvbltrZXldID0ge307XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgLy8gICAgIHNlbGVjdGVkOiBzZWxlY3Rpb25cbiAgICAgICAgLy8gfSk7XG4gICAgfVxuXG4gICAgb25TZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0ZWRJZHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZDogc2VsZWN0ZWRJZHNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbFBhdGgucHVzaChcInNlbGVjdGlvbktleVNldFwiLCBudWxsKS5zZXRLZXlzKF8ua2V5cyhzZWxlY3RlZElkcykpO1xuICAgIH1cblxuICAgIGN1c3RvbUZvcm1hdChjZWxsLCByb3cpIHtcbiAgICAgICAgaWYodHlwZW9mIGNlbGwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIHJldHVybiByb3VuZChjZWxsLCAyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNlbGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy5fY29sdW1uc1BhdGgucmV0cmlldmVSZWNvcmRzKHRoaXMuX2NvbHVtbnNQYXRoLmdldE5hbWVzKCksIHRoaXMudG9vbFBhdGgucHVzaChcImZpbHRlcmVkS2V5U2V0XCIpKSB8fCBbXTtcblxuICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuX2NvbHVtbnNQYXRoLmdldENoaWxkcmVuKCkubWFwKChjb2x1bW5QYXRoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGNvbHVtblBhdGguZ2V0UGF0aCgpLnBvcCgpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBjb2x1bW5QYXRoLmdldFZhbHVlKFwidGhpcy5nZXRNZXRhZGF0YSgndGl0bGUnKVwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29sdW1ucy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiaWRcIixcbiAgICAgICAgICAgIHRpdGxlOiBcImlkXCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy92YXIgY29sdW1uV2lkdGggPSB0aGlzLnByb3BzLmNvbnRhaW5lci5jbGllbnRXaWR0aCAvIGNvbHVtbnMubGVuZ3RoO1xuXG4gICAgICAgIHZhciBjb2x1bW5IZWFkZXJzID0gY29sdW1ucy5tYXAoKGNvbHVtbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4gPFRhYmxlSGVhZGVyQ29sdW1uIGRhdGFGaWVsZD17Y29sdW1uLm5hbWV9IGtleT17aW5kZXh9IGRhdGFBbGlnbj1cImxlZnRcIiBkYXRhRm9ybWF0PXt0aGlzLmN1c3RvbUZvcm1hdH0gZGF0YVNvcnQ9e3RydWV9Pntjb2x1bW4udGl0bGV9PC9UYWJsZUhlYWRlckNvbHVtbj47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiA8Qm9vdHN0cmFwVGFibGUgZGF0YT17ZGF0YX0ga2V5RmllbGQ9XCJpZFwiIHN0cmlwZWQ9e3RydWV9IGhvdmVyPXt0cnVlfSB3aWR0aD17dGhpcy5wcm9wcy53aWR0aH0gaGVpZ2h0PXt0aGlzLnByb3BzLmhlaWdodH0+XG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbkhlYWRlcnNcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L0Jvb3RzdHJhcFRhYmxlPjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFdlYXZlUmVhY3RUYWJsZTtcblxucmVnaXN0ZXJUb29sSW1wbGVtZW50YXRpb24oXCJ3ZWF2ZS52aXN1YWxpemF0aW9uLnRvb2xzOjpUYWJsZVRvb2xcIiwgV2VhdmVSZWFjdFRhYmxlKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7TGlzdEdyb3VwSXRlbSwgTGlzdEdyb3VwfSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQge3JlZ2lzdGVyVG9vbEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi4vLi4vb3V0dHMvV2VhdmVUb29sLmpzeFwiO1xuaW1wb3J0IEFic3RyYWN0V2VhdmVUb29sIGZyb20gXCIuLi8uLi9vdXR0cy90b29scy9BYnN0cmFjdFdlYXZlVG9vbC5qc3hcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcblxuY29uc3Qgc2Vzc2lvblN0YXRlTWVudVN0eWxlID0ge3dpZHRoOiBcIjEwMCVcIn07XG5cbmNsYXNzIFNlc3Npb25TdGF0ZU1lbnVUb29sIGV4dGVuZHMgQWJzdHJhY3RXZWF2ZVRvb2wge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMudG9vbFBhdGgucHVzaChcImNob2ljZXNcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgdGhpcy50b29sUGF0aC5wdXNoKFwic2VsZWN0ZWRDaG9pY2VcIikuYWRkQ2FsbGJhY2sodGhpcywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcblxuICB9XG5cbiAgaGFuZGxlSXRlbUNsaWNrKGluZGV4LCBldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICB0aGlzLnRvb2xQYXRoLnN0YXRlKFwic2VsZWN0ZWRDaG9pY2VcIiwgdGhpcy5jaG9pY2VzLmdldE5hbWVzKClbaW5kZXhdKTtcbiAgICAgdmFyIHRhcmdldHMgPSB0aGlzLnRvb2xQYXRoLnB1c2goXCJ0YXJnZXRzXCIpO1xuICAgICB2YXIgY2hvaWNlID0gdGhpcy5jaG9pY2VzLmdldFN0YXRlKGluZGV4KTtcbiAgICAgdGFyZ2V0cy5mb3JFYWNoKGNob2ljZSwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICAgICB0aGlzLnB1c2goa2V5LCBudWxsKS5zdGF0ZSh2YWx1ZSlcbiAgICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG5cbiAgICB0aGlzLmNob2ljZXMgPSB0aGlzLnRvb2xQYXRoLnB1c2goXCJjaG9pY2VzXCIpO1xuICAgIHZhciBzZWxlY3RlZENob2ljZSA9IHRoaXMudG9vbFBhdGguZ2V0U3RhdGUoXCJzZWxlY3RlZENob2ljZVwiKTtcblxuICAgIHZhciBtZW51cyA9IHRoaXMuY2hvaWNlcy5nZXROYW1lcygpLm1hcCgoY2hvaWNlLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIGNob2ljZSA9PT0gc2VsZWN0ZWRDaG9pY2UgPyA8TGlzdEdyb3VwSXRlbSBhY3RpdmUga2V5PXtpbmRleH0gb25DbGljaz17dGhpcy5oYW5kbGVJdGVtQ2xpY2suYmluZCh0aGlzLCBpbmRleCl9PntjaG9pY2V9PC9MaXN0R3JvdXBJdGVtPlxuICAgIDogPExpc3RHcm91cEl0ZW0ga2V5PXtpbmRleH0gb25DbGljaz17dGhpcy5oYW5kbGVJdGVtQ2xpY2suYmluZCh0aGlzLCBpbmRleCl9PntjaG9pY2V9PC9MaXN0R3JvdXBJdGVtPjtcbiAgICB9KTtcblxuICAgIHJldHVybiAoPGRpdiBzdHlsZT17c2Vzc2lvblN0YXRlTWVudVN0eWxlfT5cbiAgICAgIDxMaXN0R3JvdXA+XG4gICAgICAgIHtcbiAgICAgICAgICBtZW51c1xuICAgICAgICB9XG4gICAgICA8L0xpc3RHcm91cD5cbiAgICA8L2Rpdj4pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlc3Npb25TdGF0ZU1lbnVUb29sO1xuXG5yZWdpc3RlclRvb2xJbXBsZW1lbnRhdGlvbihcIndlYXZlLnVpOjpTZXNzaW9uU3RhdGVNZW51VG9vbFwiLCBTZXNzaW9uU3RhdGVNZW51VG9vbCk7XG4iXX0=
