'use strict';var COMPILED=false;var goog=goog||{};goog.global=this;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(val){return val!==void 0};
goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split('.');var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript('var '+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&goog.isDef(opt_object))cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.define=function(name,defaultValue){var value=defaultValue;if(!COMPILED)if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,name))value=goog.global.CLOSURE_UNCOMPILED_DEFINES[name];else if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,name))value=goog.global.CLOSURE_DEFINES[name];goog.exportPath_(name,value)};goog.define('goog.DEBUG',true);goog.define('goog.LOCALE','en');
goog.define('goog.TRUSTED_SITE',true);goog.define('goog.STRICT_MODE_COMPATIBLE',false);goog.define('goog.DISALLOW_TEST_ONLY_CODE',COMPILED&&!goog.DEBUG);goog.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING',false);goog.provide=function(name){if(!COMPILED)if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');goog.constructNamespace_(name)};
goog.constructNamespace_=function(name,opt_obj){if(!COMPILED){delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf('.'))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name,opt_obj)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(name){if(!goog.isString(name)||!name||name.search(goog.VALID_MODULE_RE_)==-1)throw Error('Invalid module identifier');if(!goog.isInModuleLoader_())throw Error('Module '+name+' has been loaded incorrectly.');if(goog.moduleLoaderState_.moduleName)throw Error('goog.module may only be called once per module.');goog.moduleLoaderState_.moduleName=name;if(!COMPILED){if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name]}};
goog.module.get=function(name){return goog.module.getInternal_(name)};goog.module.getInternal_=function(name){if(!COMPILED)if(goog.isProvided_(name))return name in goog.loadedModules_?goog.loadedModules_[name]:goog.getObjectByName(name);else return null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error('goog.module.declareLegacyNamespace must be called from '+'within a goog.module');if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error('goog.module must be called prior to '+'goog.module.declareLegacyNamespace.');goog.moduleLoaderState_.declareLegacyNamespace=true};
goog.setTestOnly=function(opt_message){if(goog.DISALLOW_TEST_ONLY_CODE){opt_message=opt_message||'';throw Error('Importing test-only code into non-debug environment'+(opt_message?': '+opt_message:'.'));}};goog.forwardDeclare=function(name){};goog.forwardDeclare('Document');goog.forwardDeclare('HTMLScriptElement');goog.forwardDeclare('XMLHttpRequest');
if(!COMPILED){goog.isProvided_=function(name){return name in goog.loadedModules_||!goog.implicitNamespaces_[name]&&goog.isDefAndNotNull(goog.getObjectByName(name))};goog.implicitNamespaces_={'goog.module':true}}goog.getObjectByName=function(name,opt_obj){var parts=name.split('.');var cur=opt_obj||goog.global;for(var part;part=parts.shift();)if(goog.isDefAndNotNull(cur[part]))cur=cur[part];else return null;return cur};
goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj)global[x]=obj[x]};
goog.addDependency=function(relPath,provides,requires,opt_isModule){if(goog.DEPENDENCIES_ENABLED){var provide,require;var path=relPath.replace(/\\/g,'/');var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;deps.pathIsModule[path]=!!opt_isModule}for(var j=0;require=requires[j];j++){if(!(path in deps.requires))deps.requires[path]={};deps.requires[path][require]=true}}};goog.define('goog.ENABLE_DEBUG_LOADER',true);goog.logToConsole_=function(msg){if(goog.global.console)goog.global.console['error'](msg)};
goog.require=function(name){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_)goog.maybeProcessDeferredDep_(name);if(goog.isProvided_(name))if(goog.isInModuleLoader_())return goog.module.getInternal_(name);else return null;if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.writeScripts_(path);return null}}var errorMessage='goog.require could not find: '+name;goog.logToConsole_(errorMessage);throw Error(errorMessage);}};goog.basePath='';goog.global.CLOSURE_BASE_PATH;
goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error('unimplemented abstract method');};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];goog.define('goog.LOAD_MODULE_USING_EVAL',true);
goog.define('goog.SEAL_MODULE_EXPORTS',goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
if(goog.DEPENDENCIES_ENABLED){goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return doc!=null&&'write'in doc};goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;var scripts=doc.getElementsByTagName('SCRIPT');for(var i=scripts.length-1;i>=0;--i){var script=
(scripts[i]);var src=script.src;var qmark=src.lastIndexOf('?');var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=='base.js'){goog.basePath=src.substr(0,l-7);return}}};goog.importScript_=function(src,opt_sourceText){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(importScript(src,opt_sourceText))goog.dependencies_.written[src]=true};goog.IS_OLD_IE_=!!(!goog.global.atob&&goog.global.document&&goog.global.document.all);goog.importModule_=function(src){var bootstrap='goog.retrieveAndExecModule_("'+
src+'");';if(goog.importScript_('',bootstrap))goog.dependencies_.written[src]=true};goog.queuedModules_=[];goog.wrapModule_=function(srcUrl,scriptText){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON))return''+'goog.loadModule(function(exports) {'+'"use strict";'+scriptText+'\n'+';return exports'+'});'+'\n//# sourceURL\x3d'+srcUrl+'\n';else return''+'goog.loadModule('+goog.global.JSON.stringify(scriptText+'\n//# sourceURL\x3d'+srcUrl+'\n')+');'};goog.loadQueuedModules_=function(){var count=
goog.queuedModules_.length;if(count>0){var queue=goog.queuedModules_;goog.queuedModules_=[];for(var i=0;i<count;i++){var path=queue[i];goog.maybeProcessDeferredPath_(path)}}};goog.maybeProcessDeferredDep_=function(name){if(goog.isDeferredModule_(name)&&goog.allDepsAreAvailable_(name)){var path=goog.getPathFromDeps_(name);goog.maybeProcessDeferredPath_(goog.basePath+path)}};goog.isDeferredModule_=function(name){var path=goog.getPathFromDeps_(name);if(path&&goog.dependencies_.pathIsModule[path]){var abspath=
goog.basePath+path;return abspath in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(name){var path=goog.getPathFromDeps_(name);if(path&&path in goog.dependencies_.requires)for(var requireName in goog.dependencies_.requires[path])if(!goog.isProvided_(requireName)&&!goog.isDeferredModule_(requireName))return false;return true};goog.maybeProcessDeferredPath_=function(abspath){if(abspath in goog.dependencies_.deferred){var src=goog.dependencies_.deferred[abspath];delete goog.dependencies_.deferred[abspath];
goog.globalEval(src)}};goog.loadModuleFromUrl=function(url){goog.retrieveAndExecModule_(url)};goog.loadModule=function(moduleDef){var previousState=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareLegacyNamespace:false};var exports;if(goog.isFunction(moduleDef))exports=moduleDef.call(goog.global,{});else if(goog.isString(moduleDef))exports=goog.loadModuleFromSource_.call(goog.global,moduleDef);else throw Error('Invalid module definition');var moduleName=goog.moduleLoaderState_.moduleName;
if(!goog.isString(moduleName)||!moduleName)throw Error('Invalid module name "'+moduleName+'"');if(goog.moduleLoaderState_.declareLegacyNamespace)goog.constructNamespace_(moduleName,exports);else if(goog.SEAL_MODULE_EXPORTS&&Object.seal)Object.seal(exports);goog.loadedModules_[moduleName]=exports}finally{goog.moduleLoaderState_=previousState}};goog.loadModuleFromSource_=function(){var exports={};eval(arguments[0]);return exports};goog.writeScriptSrcNode_=function(src){goog.global.document.write('\x3cscript type\x3d"text/javascript" src\x3d"'+
src+'"\x3e\x3c/'+'script\x3e')};goog.appendScriptSrcNode_=function(src){var doc=goog.global.document;var scriptEl=(doc.createElement('script'));scriptEl.type='text/javascript';scriptEl.src=src;scriptEl.defer=false;scriptEl.async=false;doc.head.appendChild(scriptEl)};goog.writeScriptTag_=function(src,opt_sourceText){if(goog.inHtmlDocument_()){var doc=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&doc.readyState=='complete'){var isDeps=/\bdeps.js$/.test(src);if(isDeps)return false;
else throw Error('Cannot write "'+src+'" after document load');}var isOldIE=goog.IS_OLD_IE_;if(opt_sourceText===undefined)if(!isOldIE)if(goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING)goog.appendScriptSrcNode_(src);else goog.writeScriptSrcNode_(src);else{var state=" onreadystatechange\x3d'goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";doc.write('\x3cscript type\x3d"text/javascript" src\x3d"'+src+'"'+state+'\x3e\x3c/'+'script\x3e')}else doc.write('\x3cscript type\x3d"text/javascript"\x3e'+
opt_sourceText+'\x3c/'+'script\x3e');return true}else return false};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(script,scriptIndex){if(script.readyState=='complete'&&goog.lastNonModuleScriptIndex_==scriptIndex)goog.loadQueuedModules_();return true};goog.writeScripts_=function(pathToLoad){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written)return;if(path in deps.visited)return;deps.visited[path]=true;if(path in deps.requires)for(var requireName in deps.requires[path])if(!goog.isProvided_(requireName))if(requireName in
deps.nameToPath)visitNode(deps.nameToPath[requireName]);else throw Error('Undefined nameToPath for '+requireName);if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}visitNode(pathToLoad);for(var i=0;i<scripts.length;i++){var path=scripts[i];goog.dependencies_.written[path]=true}var moduleState=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var i=0;i<scripts.length;i++){var path=scripts[i];if(path)if(!deps.pathIsModule[path])goog.importScript_(goog.basePath+path);else goog.importModule_(goog.basePath+
path);else{goog.moduleLoaderState_=moduleState;throw Error('Undefined script input');}}goog.moduleLoaderState_=moduleState};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath)return goog.dependencies_.nameToPath[rule];else return null};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS)goog.importScript_(goog.basePath+'deps.js')}
goog.normalizePath_=function(path){var components=path.split('/');var i=0;while(i<components.length)if(components[i]=='.')components.splice(i,1);else if(i&&components[i]=='..'&&components[i-1]&&components[i-1]!='..')components.splice(--i,2);else i++;return components.join('/')};goog.loadFileSync_=function(src){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(src);else{var xhr=new goog.global['XMLHttpRequest'];xhr.open('get',src,false);xhr.send();return xhr.responseText}};
goog.retrieveAndExecModule_=function(src){if(!COMPILED){var originalPath=src;src=goog.normalizePath_(src);var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var scriptText=goog.loadFileSync_(src);if(scriptText!=null){var execModuleScript=goog.wrapModule_(src,scriptText);var isOldIE=goog.IS_OLD_IE_;if(isOldIE){goog.dependencies_.deferred[originalPath]=execModuleScript;goog.queuedModules_.push(originalPath)}else importScript(src,execModuleScript)}else throw new Error('load of '+
src+'failed');}};
goog.typeOf=function(value){var s=typeof value;if(s=='object')if(value){if(value instanceof Array)return'array';else if(value instanceof Object)return s;var className=Object.prototype.toString.call((value));if(className=='[object Window]')return'object';if(className=='[object Array]'||typeof value.length=='number'&&typeof value.splice!='undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('splice'))return'array';if(className=='[object Function]'||typeof value.call!=
'undefined'&&typeof value.propertyIsEnumerable!='undefined'&&!value.propertyIsEnumerable('call'))return'function'}else return'null';else if(s=='function'&&typeof value.call=='undefined')return'object';return s};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=='array'};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=='array'||type=='object'&&typeof val.length=='number'};
goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=='function'};goog.isString=function(val){return typeof val=='string'};goog.isBoolean=function(val){return typeof val=='boolean'};goog.isNumber=function(val){return typeof val=='number'};goog.isFunction=function(val){return goog.typeOf(val)=='function'};goog.isObject=function(val){var type=typeof val;return type=='object'&&val!=null||type=='function'};
goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(obj){return!!obj[goog.UID_PROPERTY_]};goog.removeUid=function(obj){if(obj!==null&&'removeAttribute'in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_='closure_uid_'+(Math.random()*1E9>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=='object'||type=='array'){if(obj.clone)return obj.clone();var clone=type=='array'?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return(fn.call.apply(fn.bind,arguments))};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf('native code')!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=args.slice();newArgs.push.apply(newArgs,arguments);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};
goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(script){if(goog.global.execScript)goog.global.execScript(script,'JavaScript');else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval('var _evalTest_ \x3d 1;');if(typeof goog.global['_evalTest_']!='undefined'){try{delete goog.global['_evalTest_']}catch(ignore){}goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(script);else{var doc=goog.global.document;var scriptElt=(doc.createElement('SCRIPT'));
scriptElt.type='text/javascript';scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else throw Error('goog.globalEval not available');};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;
goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split('-');var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join('-')};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_=='BY_WHOLE'?getMapping:renameByParts;else rename=function(a){return a};if(opt_modifier)return className+'-'+rename(opt_modifier);else return rename(className)};
goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(str,opt_values){if(opt_values)str=str.replace(/\{\$([^}]+)}/g,function(match,key){return opt_values!=null&&key in opt_values?opt_values[key]:match});return str};goog.getMsgWithFallback=function(a,b){return a};
goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor;childCtor.base=function(me,methodName,var_args){var args=new Array(arguments.length-2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];return parentCtor.prototype[methodName].apply(me,args)}};
goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!caller)throw Error('arguments.caller not defined.  goog.base() cannot be used '+'with strict mode code. See '+'http://www.ecma-international.org/ecma-262/5.1/#sec-C');if(caller.superClass_){var ctorArgs=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)ctorArgs[i-1]=arguments[i];return caller.superClass_.constructor.apply(me,ctorArgs)}var args=new Array(arguments.length-
2);for(var i=2;i<arguments.length;i++)args[i-2]=arguments[i];var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor)if(ctor.prototype[opt_methodName]===caller)foundCaller=true;else if(foundCaller)return ctor.prototype[opt_methodName].apply(me,args);if(me[opt_methodName]===caller)return me.constructor.prototype[opt_methodName].apply(me,args);else throw Error('goog.base called from a method of one name '+'to a method of a different name');};
goog.scope=function(fn){fn.call(goog.global)};if(!COMPILED)goog.global['COMPILED']=COMPILED;
goog.defineClass=function(superClass,def){var constructor=def.constructor;var statics=def.statics;if(!constructor||constructor==Object.prototype.constructor)constructor=function(){throw Error('cannot instantiate an interface (no constructor defined).');};var cls=goog.defineClass.createSealingConstructor_(constructor,superClass);if(superClass)goog.inherits(cls,superClass);delete def.constructor;delete def.statics;goog.defineClass.applyProperties_(cls.prototype,def);if(statics!=null)if(statics instanceof
Function)statics(cls);else goog.defineClass.applyProperties_(cls,statics);return cls};goog.defineClass.ClassDescriptor;goog.define('goog.defineClass.SEAL_CLASS_INSTANCES',goog.DEBUG);
goog.defineClass.createSealingConstructor_=function(ctr,superClass){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(superClass&&superClass.prototype&&superClass.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return ctr;var wrappedCtr=function(){var instance=ctr.apply(this,arguments)||this;instance[goog.UID_PROPERTY_]=instance[goog.UID_PROPERTY_];if(this.constructor===wrappedCtr)Object.seal(instance);return instance};return wrappedCtr}return ctr};
goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];goog.defineClass.applyProperties_=function(target,source){var key;for(key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key];for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++){key=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}};
goog.tagUnsealableClass=function(ctr){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES)ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_='goog_defineClass_legacy_unsealable';goog.provide('weavejs.util.JS');weavejs.util.JS=function(){};weavejs.util.JS.getGlobal=function(name){var Fn=Function;var fn=new Fn('return '+name+';');return fn()};weavejs.util.JS.global=weavejs.util.JS.getGlobal('this');weavejs.util.JS.JSZip;weavejs.util.JS.console=weavejs.util.JS.getGlobal('console');weavejs.util.JS.Symbol=weavejs.util.JS.getGlobal('Symbol');
weavejs.util.JS.error=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.console.error.apply(weavejs.util.JS.console,args)};weavejs.util.JS.log=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.console.log.apply(weavejs.util.JS.console,args)};weavejs.util.JS.unnamedFunctionRegExp=/^\s*function\s*\([^\)]*\)\s*\{.*\}\s*$/;
weavejs.util.JS.compile=function(script,paramNames){paramNames=typeof paramNames!=='undefined'?paramNames:null;var __localFn0__=function(){try{return func.apply(this,arguments)}catch(e){if(org.apache.flex.utils.Language.is(e,SyntaxError)){args.pop();args.push(script);try{func=Function['apply'](null,args)}catch(e2){if(org.apache.flex.utils.Language.is(e2,SyntaxError))func=Function['apply']();throw e2;}return func.apply(this,arguments)}throw e;}};var isFunc=weavejs.util.JS.unnamedFunctionRegExp.test(script);
if(isFunc)script='('+script+')';var args=(paramNames||[]).concat('return eval('+JSON.stringify(script)+');');var func=Function['apply'](null,args);return __localFn0__};weavejs.util.JS.ArrayBuffer=weavejs.util.JS.getGlobal('ArrayBuffer');weavejs.util.JS.Uint8Array=weavejs.util.JS.getGlobal('Uint8Array');weavejs.util.JS.Promise=weavejs.util.JS.getGlobal('Promise');weavejs.util.JS.Map=weavejs.util.JS.getGlobal('Map');weavejs.util.JS.WeakMap=weavejs.util.JS.getGlobal('WeakMap');
weavejs.util.JS.mapKeys=function(map){return map?weavejs.util.JS.toArray(map.keys()):[]};weavejs.util.JS.mapValues=function(map){return map?weavejs.util.JS.toArray(map.values()):[]};weavejs.util.JS.mapEntries=function(map){return map?weavejs.util.JS.toArray(map.entries()):[]};weavejs.util.JS.isIterable=function(value){return value&&typeof value[weavejs.util.JS.Symbol.iterator]==='function'};
weavejs.util.JS.toArray=function(value){if(org.apache.flex.utils.Language.is(value,Array))return value;if(value&&typeof value[weavejs.util.JS.Symbol.iterator]==='function'){var iterator=value[weavejs.util.JS.Symbol.iterator]();var values=[];while(true){var next=iterator.next();if(next.done)break;values.push(next.value)}return values}if(Object.prototype.toString.call(value)==='[object Arguments]')return Array.prototype.slice.call(value);return null};weavejs.util.JS.objectKeys=function(object){return Object['keys'](object)};
weavejs.util.JS.isPrimitive=function(value){return value===null||typeof value!=='object'};weavejs.util.JS.copyObject=function(object){if(object===null||typeof object!=='object')return object;var copy=org.apache.flex.utils.Language.is(object,Array)?[]:{};for(var key in object)copy[key]=weavejs.util.JS.copyObject(object[key]);return copy};
weavejs.util.JS.bindAll=function(instance){var proto=Object['getPrototypeOf'](instance);for(var key in proto){var prop=proto[key];if(typeof prop==='function'&&key!=='constructor')instance[key]=prop.bind(instance)}return instance};weavejs.util.JS.isClass=function(classDef){return typeof classDef==='function'&&classDef.prototype&&classDef.prototype.constructor===classDef};weavejs.util.JS.asClass=function(classDef){return weavejs.util.JS.isClass(classDef)?classDef:null};
weavejs.util.JS.setTimeout=function(func,delay,params){params=Array.prototype.slice.call(arguments,2);params.unshift(func,delay);return weavejs.util.JS.global['setTimeout'].apply(weavejs.util.JS.global,params)};weavejs.util.JS.setInterval=function(func,delay,params){params=Array.prototype.slice.call(arguments,2);params.unshift(func,delay);return weavejs.util.JS.global['setInterval'].apply(weavejs.util.JS.global,params)};
weavejs.util.JS.requestAnimationFrame=function(func){return weavejs.util.JS.global['requestAnimationFrame'].call(weavejs.util.JS.global,func)};weavejs.util.JS.cancelAnimationFrame=function(id){weavejs.util.JS.global['cancelAnimationFrame'].call(weavejs.util.JS.global,id)};weavejs.util.JS.now=function(){return Date['now']()};weavejs.util.JS.hasProperty=function(object,prop){while(object!=null&&!Object['getOwnPropertyDescriptor'](object,prop))object=Object['getPrototypeOf'](object);return object!=null};
weavejs.util.JS.getPropertyNames=function(object,useCache){if(object==null||object===Object.prototype)return[];if(!weavejs.util.JS.map_obj_names){weavejs.util.JS.map_obj_names=new weavejs.util.JS.WeakMap;weavejs.util.JS.map_prop_skip=new weavejs.util.JS.Map}if(useCache&&weavejs.util.JS.map_obj_names.has(object))return weavejs.util.JS.map_obj_names.get(object);var names=weavejs.util.JS.getPropertyNames(Object['getPrototypeOf'](object),useCache);if(useCache)names=names.concat();++weavejs.util.JS.skip_id;
var name;var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){name=foreachiter0_target[foreachiter0];weavejs.util.JS.map_prop_skip.set(name,weavejs.util.JS.skip_id)}var ownNames=Object['getOwnPropertyNames'](object);var foreachiter1_target=ownNames;for(var foreachiter1 in foreachiter1_target){name=foreachiter1_target[foreachiter1];if(weavejs.util.JS.map_prop_skip.get(name)!==weavejs.util.JS.skip_id){weavejs.util.JS.map_prop_skip.set(name,weavejs.util.JS.skip_id);names.push(name)}}weavejs.util.JS.map_obj_names.set(object,
names);return names};weavejs.util.JS.map_obj_names;weavejs.util.JS.map_prop_skip;weavejs.util.JS.skip_id=0;weavejs.util.JS.prototype.FLEXJS_CLASS_INFO={names:[{name:'JS',qName:'weavejs.util.JS'}]};goog.provide('weavejs.api.core.IClassRegistry');weavejs.api.core.IClassRegistry=function(){};weavejs.api.core.IClassRegistry.prototype.registerSingletonImplementation=function(theInterface,theImplementation){};weavejs.api.core.IClassRegistry.prototype.getSingletonImplementation=function(theInterface){};weavejs.api.core.IClassRegistry.prototype.getSingletonInstance=function(theInterface){};weavejs.api.core.IClassRegistry.prototype.registerImplementation=function(theInterface,theImplementation,displayName){};
weavejs.api.core.IClassRegistry.prototype.getImplementations=function(theInterface){};weavejs.api.core.IClassRegistry.prototype.getDisplayName=function(theImplementation){};weavejs.api.core.IClassRegistry.prototype.FLEXJS_CLASS_INFO={names:[{name:'IClassRegistry',qName:'weavejs.api.core.IClassRegistry'}]};goog.provide('weavejs.core.ClassRegistryImpl');goog.require('weavejs.util.JS');goog.require('weavejs.api.core.IClassRegistry');weavejs.core.ClassRegistryImpl=function(){this.singletonInstances=new weavejs.util.JS.Map;this.singletonImplementations=new weavejs.util.JS.Map;this.implementations=new weavejs.util.JS.Map;this.displayNames=new weavejs.util.JS.Map};weavejs.core.ClassRegistryImpl.prototype.singletonInstances;weavejs.core.ClassRegistryImpl.prototype.singletonImplementations;weavejs.core.ClassRegistryImpl.prototype.implementations;
weavejs.core.ClassRegistryImpl.prototype.displayNames;weavejs.core.ClassRegistryImpl.prototype.registerSingletonImplementation=function(theInterface,theImplementation){if(!this.singletonImplementations.get(theInterface)){weavejs.core.ClassRegistryImpl.verifyImplementation(theInterface,theImplementation);this.singletonImplementations.set(theInterface,theImplementation)}return this.singletonImplementations.get(theInterface)==theImplementation};
weavejs.core.ClassRegistryImpl.prototype.getSingletonImplementation=function(theInterface){return this.singletonImplementations.get(theInterface)};weavejs.core.ClassRegistryImpl.prototype.getSingletonInstance=function(theInterface){if(!this.singletonInstances.get(theInterface)){var classDef=this.getSingletonImplementation(theInterface);if(classDef)this.singletonInstances.set(theInterface,new classDef)}return this.singletonInstances.get(theInterface)};
weavejs.core.ClassRegistryImpl.prototype.registerImplementation=function(theInterface,theImplementation,displayName){displayName=typeof displayName!=='undefined'?displayName:null;weavejs.core.ClassRegistryImpl.verifyImplementation(theInterface,theImplementation);var array=this.implementations.get(theInterface);if(!array)this.implementations.set(theInterface,array=[]);if(displayName||!this.displayNames.get(theImplementation))this.displayNames.set(theImplementation,displayName||Weave.className(theImplementation).split(':').pop());
if(array.indexOf(theImplementation)<0){array.push(theImplementation);array.sort(org.apache.flex.utils.Language.closure(this._sortImplementations,this,'_sortImplementations'))}};weavejs.core.ClassRegistryImpl.prototype.getImplementations=function(theInterface){var array=this.implementations.get(theInterface);return array?array.concat():[]};weavejs.core.ClassRegistryImpl.prototype.getDisplayName=function(theImplementation){var str=this.displayNames.get(theImplementation);return str};
weavejs.core.ClassRegistryImpl.prototype._sortImplementations=function(impl1,impl2){var name1=this.displayNames.get(impl1);var name2=this.displayNames.get(impl2);if(name1<name2)return-1;if(name1>name2)return 1;return 0};weavejs.core.ClassRegistryImpl.verifyImplementation=function(theInterface,theImplementation){if(!org.apache.flex.utils.Language.is(theImplementation.prototype,theInterface))throw new Error(Weave.className(theImplementation)+' does not implement '+Weave.className(theInterface));};
weavejs.core.ClassRegistryImpl.prototype.FLEXJS_CLASS_INFO={names:[{name:'ClassRegistryImpl',qName:'weavejs.core.ClassRegistryImpl'}],interfaces:[weavejs.api.core.IClassRegistry]};goog.provide('weavejs.api.core.ILocaleManager');weavejs.api.core.ILocaleManager=function(){};weavejs.api.core.ILocaleManager.prototype.getAllLocales=function(){};weavejs.api.core.ILocaleManager.prototype.getAllLocalizations=function(){};weavejs.api.core.ILocaleManager.prototype.importLocalizations=function(newData){};weavejs.api.core.ILocaleManager.prototype.registerTranslation=function(originalText,locale,localizedText){};weavejs.api.core.ILocaleManager.prototype.clearAllLocalizations=function(){};
weavejs.api.core.ILocaleManager.prototype.removeEntry=function(originalText){};weavejs.api.core.ILocaleManager.prototype.getLocale=function(){};weavejs.api.core.ILocaleManager.prototype.setLocale=function(locale){};weavejs.api.core.ILocaleManager.prototype.initializeLocale=function(locale){};weavejs.api.core.ILocaleManager.prototype.localize=function(text,locale){};weavejs.api.core.ILocaleManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILocaleManager',qName:'weavejs.api.core.ILocaleManager'}]};goog.provide('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObject=function(){};weavejs.api.core.ILinkableObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObject',qName:'weavejs.api.core.ILinkableObject'}]};goog.provide('weavejs.api.core.IProgressIndicator');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.IProgressIndicator=function(){};weavejs.api.core.IProgressIndicator.prototype.getTaskCount=function(){};weavejs.api.core.IProgressIndicator.prototype.addTask=function(taskToken,busyObject,description){};weavejs.api.core.IProgressIndicator.prototype.hasTask=function(taskToken){};weavejs.api.core.IProgressIndicator.prototype.updateTask=function(taskToken,progress){};
weavejs.api.core.IProgressIndicator.prototype.removeTask=function(taskToken){};weavejs.api.core.IProgressIndicator.prototype.getNormalizedProgress=function(){};weavejs.api.core.IProgressIndicator.prototype.FLEXJS_CLASS_INFO={names:[{name:'IProgressIndicator',qName:'weavejs.api.core.IProgressIndicator'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ICallbackCollection=function(){};weavejs.api.core.ICallbackCollection.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){};weavejs.api.core.ICallbackCollection.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){};
weavejs.api.core.ICallbackCollection.prototype.addDisposeCallback=function(relevantContext,callback){};weavejs.api.core.ICallbackCollection.prototype.removeCallback=function(relevantContext,callback){};weavejs.api.core.ICallbackCollection.prototype.triggerCallbacks=function(){};weavejs.api.core.ICallbackCollection.prototype.triggerCounter;weavejs.api.core.ICallbackCollection.prototype.delayCallbacks=function(){};weavejs.api.core.ICallbackCollection.prototype.resumeCallbacks=function(){};
weavejs.api.core.ICallbackCollection.prototype.FLEXJS_CLASS_INFO={names:[{name:'ICallbackCollection',qName:'weavejs.api.core.ICallbackCollection'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.core.IScheduler');weavejs.api.core.IScheduler=function(){};weavejs.api.core.IScheduler.prototype.frameCallbacks;weavejs.api.core.IScheduler.prototype.callLater=function(relevantContext,method,parameters){};weavejs.api.core.IScheduler.prototype.startTask=function(relevantContext,iterativeTask,priority,finalCallback,description){};weavejs.api.core.IScheduler.prototype.FLEXJS_CLASS_INFO={names:[{name:'IScheduler',qName:'weavejs.api.core.IScheduler'}]};goog.provide('weavejs.api.core.ISessionManager');weavejs.api.core.ISessionManager=function(){};weavejs.api.core.ISessionManager.prototype.getCallbackCollection=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.getLinkableObjectFromCallbackCollection=function(callbackCollection){};weavejs.api.core.ISessionManager.prototype.newLinkableChild=function(linkableParent,linkableChildType,callback,useGroupedCallback){};
weavejs.api.core.ISessionManager.prototype.registerLinkableChild=function(linkableParent,linkableChild,callback,useGroupedCallback){};weavejs.api.core.ISessionManager.prototype.newDisposableChild=function(disposableParent,disposableChildType){};weavejs.api.core.ISessionManager.prototype.registerDisposableChild=function(disposableParent,disposableChild){};weavejs.api.core.ISessionManager.prototype.getLinkableOwner=function(child){};
weavejs.api.core.ISessionManager.prototype.getLinkableDescendants=function(root,filter){};weavejs.api.core.ISessionManager.prototype.assignBusyTask=function(taskToken,busyObject){};weavejs.api.core.ISessionManager.prototype.unassignBusyTask=function(taskToken){};weavejs.api.core.ISessionManager.prototype.linkableObjectIsBusy=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.setSessionState=function(linkableObject,newState,removeMissingDynamicObjects){};
weavejs.api.core.ISessionManager.prototype.getSessionState=function(linkableObject){};weavejs.api.core.ISessionManager.prototype.computeDiff=function(oldState,newState){};weavejs.api.core.ISessionManager.prototype.combineDiff=function(baseDiff,diffToAdd){};weavejs.api.core.ISessionManager.prototype.copySessionState=function(source,destination){};weavejs.api.core.ISessionManager.prototype.linkSessionState=function(primary,secondary){};
weavejs.api.core.ISessionManager.prototype.unlinkSessionState=function(first,second){};weavejs.api.core.ISessionManager.prototype.disposeObject=function(object){};weavejs.api.core.ISessionManager.prototype.objectWasDisposed=function(object){};weavejs.api.core.ISessionManager.prototype.getPath=function(root,descendant){};weavejs.api.core.ISessionManager.prototype.getObject=function(root,path){};weavejs.api.core.ISessionManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'ISessionManager',qName:'weavejs.api.core.ISessionManager'}]};goog.provide('weavejs.api.data.IQualifiedKey');weavejs.api.data.IQualifiedKey=function(){};weavejs.api.data.IQualifiedKey.prototype.keyType;weavejs.api.data.IQualifiedKey.prototype.toNumber=function(){};weavejs.api.data.IQualifiedKey.prototype.toString=function(){};weavejs.api.data.IQualifiedKey.prototype.FLEXJS_CLASS_INFO={names:[{name:'IQualifiedKey',qName:'weavejs.api.data.IQualifiedKey'}]};goog.provide('weavejs.api.data.IKeyFilter');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IKeyFilter=function(){};weavejs.api.data.IKeyFilter.prototype.containsKey=function(key){};weavejs.api.data.IKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeyFilter',qName:'weavejs.api.data.IKeyFilter'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.data.IKeySet');goog.require('weavejs.api.data.IKeyFilter');weavejs.api.data.IKeySet=function(){};weavejs.api.data.IKeySet.prototype.keys;weavejs.api.data.IKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeySet',qName:'weavejs.api.data.IKeySet'}],interfaces:[weavejs.api.data.IKeyFilter]};goog.provide('weavejs.api.data.IAttributeColumn');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.data.IKeySet');weavejs.api.data.IAttributeColumn=function(){};weavejs.api.data.IAttributeColumn.prototype.getMetadata=function(propertyName){};weavejs.api.data.IAttributeColumn.prototype.getMetadataPropertyNames=function(){};weavejs.api.data.IAttributeColumn.prototype.getValueFromKey=function(key,dataType){};
weavejs.api.data.IAttributeColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IAttributeColumn',qName:'weavejs.api.data.IAttributeColumn'}],interfaces:[weavejs.api.core.ICallbackCollection,weavejs.api.data.IKeySet]};goog.provide('weavejs.api.data.IWeaveTreeNode');weavejs.api.data.IWeaveTreeNode=function(){};weavejs.api.data.IWeaveTreeNode.prototype.equals=function(other){};weavejs.api.data.IWeaveTreeNode.prototype.getLabel=function(){};weavejs.api.data.IWeaveTreeNode.prototype.isBranch=function(){};weavejs.api.data.IWeaveTreeNode.prototype.hasChildBranches=function(){};weavejs.api.data.IWeaveTreeNode.prototype.getChildren=function(){};
weavejs.api.data.IWeaveTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveTreeNode',qName:'weavejs.api.data.IWeaveTreeNode'}]};goog.provide('weavejs.api.data.IDataSource');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IDataSource=function(){};weavejs.api.data.IDataSource.prototype.hierarchyRefresh;weavejs.api.data.IDataSource.prototype.getHierarchyRoot=function(){};weavejs.api.data.IDataSource.prototype.findHierarchyNode=function(metadata){};weavejs.api.data.IDataSource.prototype.getAttributeColumn=function(metadata){};
weavejs.api.data.IDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSource',qName:'weavejs.api.data.IDataSource'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.data.IAttributeColumnCache');weavejs.api.data.IAttributeColumnCache=function(){};weavejs.api.data.IAttributeColumnCache.prototype.getColumn=function(dataSource,metadata){};weavejs.api.data.IAttributeColumnCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'IAttributeColumnCache',qName:'weavejs.api.data.IAttributeColumnCache'}]};goog.provide('weavejs.api.data.ICSVParser');weavejs.api.data.ICSVParser=function(){};weavejs.api.data.ICSVParser.prototype.parseCSV=function(csvData){};weavejs.api.data.ICSVParser.prototype.createCSV=function(rows){};weavejs.api.data.ICSVParser.prototype.parseCSVRow=function(csvData){};weavejs.api.data.ICSVParser.prototype.createCSVRow=function(row){};weavejs.api.data.ICSVParser.prototype.convertRowsToRecords=function(rows,headerDepth){};
weavejs.api.data.ICSVParser.prototype.getRecordFieldNames=function(records,includeNullFields,headerDepth){};weavejs.api.data.ICSVParser.prototype.convertRecordsToRows=function(records,columnOrder,allowBlankColumns,headerDepth){};weavejs.api.data.ICSVParser.prototype.FLEXJS_CLASS_INFO={names:[{name:'ICSVParser',qName:'weavejs.api.data.ICSVParser'}]};goog.provide('weavejs.api.data.IQualifiedKeyManager');weavejs.api.data.IQualifiedKeyManager=function(){};weavejs.api.data.IQualifiedKeyManager.prototype.getQKey=function(keyType,localName){};weavejs.api.data.IQualifiedKeyManager.prototype.getQKeys=function(keyType,keyStrings){};weavejs.api.data.IQualifiedKeyManager.prototype.convertToQKeys=function(objects){};weavejs.api.data.IQualifiedKeyManager.prototype.getAllKeyTypes=function(){};weavejs.api.data.IQualifiedKeyManager.prototype.getAllQKeys=function(keyType){};
weavejs.api.data.IQualifiedKeyManager.prototype.stringToQKey=function(qkeyString){};weavejs.api.data.IQualifiedKeyManager.prototype.numberToQKey=function(qkeyNumber){};weavejs.api.data.IQualifiedKeyManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'IQualifiedKeyManager',qName:'weavejs.api.data.IQualifiedKeyManager'}]};goog.provide('weavejs.api.data.IColumnStatistics');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IColumnStatistics=function(){};weavejs.api.data.IColumnStatistics.prototype.getNorm=function(key){};weavejs.api.data.IColumnStatistics.prototype.getMin=function(){};weavejs.api.data.IColumnStatistics.prototype.getMax=function(){};weavejs.api.data.IColumnStatistics.prototype.getCount=function(){};weavejs.api.data.IColumnStatistics.prototype.getSum=function(){};
weavejs.api.data.IColumnStatistics.prototype.getSquareSum=function(){};weavejs.api.data.IColumnStatistics.prototype.getMean=function(){};weavejs.api.data.IColumnStatistics.prototype.getVariance=function(){};weavejs.api.data.IColumnStatistics.prototype.getStandardDeviation=function(){};weavejs.api.data.IColumnStatistics.prototype.getMedian=function(){};weavejs.api.data.IColumnStatistics.prototype.getSortIndex=function(){};weavejs.api.data.IColumnStatistics.prototype.hack_getNumericData=function(){};
weavejs.api.data.IColumnStatistics.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnStatistics',qName:'weavejs.api.data.IColumnStatistics'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.data.IStatisticsCache');weavejs.api.data.IStatisticsCache=function(){};weavejs.api.data.IStatisticsCache.prototype.getColumnStatistics=function(column){};weavejs.api.data.IStatisticsCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'IStatisticsCache',qName:'weavejs.api.data.IStatisticsCache'}]};goog.provide('weavejs.util.WeavePromiseHandler');weavejs.util.WeavePromiseHandler=function(onFulfilled,onRejected,next){this.next=next;this.onFulfilled=onFulfilled;this.onRejected=onRejected};weavejs.util.WeavePromiseHandler.prototype.onFulfilled;weavejs.util.WeavePromiseHandler.prototype.onRejected;weavejs.util.WeavePromiseHandler.prototype.next;weavejs.util.WeavePromiseHandler.prototype.onResult=function(result){this.wasCalled=true;try{this.next.setResult(this.onFulfilled(result))}catch(e){this.onError(e)}};
weavejs.util.WeavePromiseHandler.prototype.onError=function(error){this.wasCalled=true;try{this.next.setError(this.onRejected(error))}catch(e){this.next.setError(e)}};weavejs.util.WeavePromiseHandler.prototype.wasCalled=false;weavejs.util.WeavePromiseHandler.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePromiseHandler',qName:'weavejs.util.WeavePromiseHandler'}]};goog.provide('weavejs.api.core.IDisposableObject');weavejs.api.core.IDisposableObject=function(){};weavejs.api.core.IDisposableObject.prototype.dispose=function(){};weavejs.api.core.IDisposableObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDisposableObject',qName:'weavejs.api.core.IDisposableObject'}]};goog.provide('weavejs.util.WeavePromise');goog.require('weavejs.util.WeavePromiseHandler');goog.require('weavejs.api.core.IDisposableObject');
weavejs.util.WeavePromise=function(relevantContext,resolver){resolver=typeof resolver!=='undefined'?resolver:null;this.handlers=[];this.dependencies=[];if(org.apache.flex.utils.Language.is(relevantContext,weavejs.util.WeavePromise)){this.rootPromise=org.apache.flex.utils.Language.as(relevantContext,weavejs.util.WeavePromise).rootPromise;this.relevantContext=relevantContext=this.rootPromise.relevantContext}else{this.rootPromise=this;this.relevantContext=relevantContext;if(resolver==null)this.setResult(this.relevantContext)}if(relevantContext)Weave.disposableChild(relevantContext,
this);if(resolver!=null){this.setBusy(true);resolver(org.apache.flex.utils.Language.closure(this.setResult,this,'setResult'),org.apache.flex.utils.Language.closure(this.setError,this,'setError'))}};weavejs.util.WeavePromise.noop=function(value){return value};weavejs.util.WeavePromise.prototype.rootPromise;weavejs.util.WeavePromise.prototype.relevantContext;weavejs.util.WeavePromise.prototype.result=undefined;weavejs.util.WeavePromise.prototype.error=undefined;weavejs.util.WeavePromise.prototype.handlers;
weavejs.util.WeavePromise.prototype.dependencies;
weavejs.util.WeavePromise.prototype.setResult=function(result){if(Weave.wasDisposed(this.relevantContext)){this.setBusy(false);return}this.result=undefined;this.error=undefined;if(org.apache.flex.utils.Language.is(result,weavejs.util.JS.Promise))result.then(org.apache.flex.utils.Language.closure(this.setResult,this,'setResult'),org.apache.flex.utils.Language.closure(this.setError,this,'setError'));else if(org.apache.flex.utils.Language.is(result,weavejs.util.WeavePromise))org.apache.flex.utils.Language.as(result,weavejs.util.WeavePromise).then(org.apache.flex.utils.Language.closure(this.setResult,
this,'setResult'),org.apache.flex.utils.Language.closure(this.setError,this,'setError'));else{this.result=org.apache.flex.utils.Language.as(result,Object);this.callHandlers()}};weavejs.util.WeavePromise.prototype.getResult=function(){return this.result};weavejs.util.WeavePromise.prototype.setError=function(error){if(Weave.wasDisposed(this.relevantContext)){this.setBusy(false);return}this.result=undefined;this.error=error;this.callHandlers()};weavejs.util.WeavePromise.prototype.getError=function(){return this.error};
weavejs.util.WeavePromise.prototype.setBusy=function(busy){if(busy)weavejs.WeaveAPI.ProgressIndicator.addTask(this.rootPromise,org.apache.flex.utils.Language.as(this.relevantContext,weavejs.api.core.ILinkableObject));else weavejs.WeaveAPI.ProgressIndicator.removeTask(this.rootPromise)};
weavejs.util.WeavePromise.prototype.callHandlers=function(newHandlersOnly){newHandlersOnly=typeof newHandlersOnly!=='undefined'?newHandlersOnly:false;if(this.dependencies.some(Weave.isBusy)){if(this.handlers.length)this.setBusy(true);return}if(this.handlers.length==0)this.setBusy(false);if(Weave.wasDisposed(this.relevantContext)){this.setBusy(false);return}for(var i=0;i<this.handlers.length;i++){var handler=this.handlers[i];if(newHandlersOnly&&handler.wasCalled)continue;if(this.result!==undefined)handler.onResult(this.result);
else if(this.error!==undefined)handler.onError(this.error)}};
weavejs.util.WeavePromise.prototype.then=function(onFulfilled,onRejected){onFulfilled=typeof onFulfilled!=='undefined'?onFulfilled:null;onRejected=typeof onRejected!=='undefined'?onRejected:null;if(onFulfilled==null)onFulfilled=weavejs.util.WeavePromise.noop;if(onRejected==null)onRejected=weavejs.util.WeavePromise.noop;var next=new weavejs.util.WeavePromise(this);next.result=undefined;this.handlers.push(new weavejs.util.WeavePromiseHandler(onFulfilled,onRejected,next));if(this.result!==undefined||
this.error!==undefined){weavejs.WeaveAPI.Scheduler.callLater(this.relevantContext,org.apache.flex.utils.Language.closure(this.callHandlers,this,'callHandlers'),[true]);this.setBusy(true)}return next};
weavejs.util.WeavePromise.prototype.depend=function(linkableObjects){linkableObjects=Array.prototype.slice.call(arguments,0);if(linkableObjects.length)this.setBusy(true);var foreachiter0_target=linkableObjects;for(var foreachiter0 in foreachiter0_target){var dependency=foreachiter0_target[foreachiter0];Weave.getCallbacks(dependency).addGroupedCallback(this.relevantContext,org.apache.flex.utils.Language.closure(this.callHandlers,this,'callHandlers'),true)}return this};
weavejs.util.WeavePromise.prototype.getPromise=function(){var self=this;var __localFn0__=function(resolve,reject){var_resolve=resolve;var_reject=reject};var var_resolve,var_reject;var promise=new weavejs.util.JS.Promise(__localFn0__);this.then(var_resolve,var_reject);return promise};weavejs.util.WeavePromise.prototype.dispose=function(){this.handlers.length=0;this.setBusy(false)};
weavejs.util.WeavePromise.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePromise',qName:'weavejs.util.WeavePromise'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.provide('weavejs.api.core.IChildListCallbackInterface');goog.require('weavejs.api.core.ICallbackCollection');weavejs.api.core.IChildListCallbackInterface=function(){};weavejs.api.core.IChildListCallbackInterface.prototype.lastObjectAdded;weavejs.api.core.IChildListCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'IChildListCallbackInterface',qName:'weavejs.api.core.IChildListCallbackInterface'}],interfaces:[weavejs.api.core.ICallbackCollection]};goog.provide('weavejs.api.core.ILinkableCompositeObject');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableCompositeObject=function(){};weavejs.api.core.ILinkableCompositeObject.prototype.getSessionState=function(){};weavejs.api.core.ILinkableCompositeObject.prototype.setSessionState=function(newState,removeMissingDynamicObjects){};
weavejs.api.core.ILinkableCompositeObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableCompositeObject',qName:'weavejs.api.core.ILinkableCompositeObject'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.core.ILinkableHashMap');goog.require('weavejs.api.core.ILinkableCompositeObject');weavejs.api.core.ILinkableHashMap=function(){};weavejs.api.core.ILinkableHashMap.prototype.typeRestriction;weavejs.api.core.ILinkableHashMap.prototype.setNameOrder=function(newOrder){};weavejs.api.core.ILinkableHashMap.prototype.getNames=function(filter){};weavejs.api.core.ILinkableHashMap.prototype.getObjects=function(filter){};weavejs.api.core.ILinkableHashMap.prototype.getName=function(object){};
weavejs.api.core.ILinkableHashMap.prototype.getObject=function(name){};weavejs.api.core.ILinkableHashMap.prototype.requestObject=function(name,classDef,lockObject){};weavejs.api.core.ILinkableHashMap.prototype.requestObjectCopy=function(name,objectToCopy){};weavejs.api.core.ILinkableHashMap.prototype.renameObject=function(oldName,newName){};weavejs.api.core.ILinkableHashMap.prototype.objectIsLocked=function(name){};weavejs.api.core.ILinkableHashMap.prototype.removeObject=function(name){};
weavejs.api.core.ILinkableHashMap.prototype.removeAllObjects=function(){};weavejs.api.core.ILinkableHashMap.prototype.generateUniqueName=function(baseName){};weavejs.api.core.ILinkableHashMap.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableHashMap',qName:'weavejs.api.core.ILinkableHashMap'}],interfaces:[weavejs.api.core.ILinkableCompositeObject]};goog.provide('weavejs.api.net.IURLRequestUtils');weavejs.api.net.IURLRequestUtils=function(){};weavejs.api.net.IURLRequestUtils.prototype.request=function(relevantContext,method,url,requestHeaders,data,responseType){};weavejs.api.net.IURLRequestUtils.prototype.saveLocalFile=function(weaveRoot,name,byteArray){};weavejs.api.net.IURLRequestUtils.prototype.getLocalFile=function(weaveRoot,name){};weavejs.api.net.IURLRequestUtils.prototype.removeLocalFile=function(weaveRoot,name){};
weavejs.api.net.IURLRequestUtils.prototype.getLocalFileNames=function(weaveRoot){};weavejs.api.net.IURLRequestUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'IURLRequestUtils',qName:'weavejs.api.net.IURLRequestUtils'}]};goog.provide('weavejs.api.ui.IEditorManager');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.ui.IEditorManager=function(){};weavejs.api.ui.IEditorManager.prototype.setLabel=function(object,label){};weavejs.api.ui.IEditorManager.prototype.getLabel=function(object){};weavejs.api.ui.IEditorManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'IEditorManager',qName:'weavejs.api.ui.IEditorManager'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.WeaveAPI');goog.require('weavejs.core.ClassRegistryImpl');goog.require('weavejs.api.core.ILocaleManager');weavejs.WeaveAPI=function(){};weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE=0;weavejs.WeaveAPI.TASK_PRIORITY_HIGH=1;weavejs.WeaveAPI.TASK_PRIORITY_NORMAL=2;weavejs.WeaveAPI.TASK_PRIORITY_LOW=3;weavejs.WeaveAPI._classRegistry=null;
Object.defineProperties(weavejs.WeaveAPI,{ClassRegistry:{get:function(){if(!weavejs.WeaveAPI._classRegistry)weavejs.WeaveAPI._classRegistry=new weavejs.core.ClassRegistryImpl;return weavejs.WeaveAPI._classRegistry}},SessionManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.core.ISessionManager]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.ISessionManager)}},Scheduler:{get:function(){return(weavejs.WeaveAPI._classRegistry||
weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.core.IScheduler]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.IScheduler)}},ProgressIndicator:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.core.IProgressIndicator]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.IProgressIndicator)}},AttributeColumnCache:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.data.IAttributeColumnCache]||
weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IAttributeColumnCache)}},StatisticsCache:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.data.IStatisticsCache]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IStatisticsCache)}},QKeyManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.data.IQualifiedKeyManager]||
weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.IQualifiedKeyManager)}},CSVParser:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.data.ICSVParser]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.data.ICSVParser)}},URLRequestUtils:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.net.IURLRequestUtils]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.net.IURLRequestUtils)}},
LocaleManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.core.ILocaleManager]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.core.ILocaleManager)}},EditorManager:{get:function(){return(weavejs.WeaveAPI._classRegistry||weavejs.WeaveAPI.ClassRegistry).singletonInstances[weavejs.api.ui.IEditorManager]||weavejs.WeaveAPI._classRegistry.getSingletonInstance(weavejs.api.ui.IEditorManager)}}});
weavejs.WeaveAPI.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveAPI',qName:'weavejs.WeaveAPI'}]};goog.provide('weavejs.core.EditorManager');goog.require('weavejs.api.ui.IEditorManager');weavejs.core.EditorManager=function(){this.labels=new weavejs.util.JS.WeakMap};weavejs.core.EditorManager.prototype.labels;weavejs.core.EditorManager.prototype.setLabel=function(object,label){this.labels.set(object,label);weavejs.WeaveAPI.SessionManager.getCallbackCollection(this).triggerCallbacks()};weavejs.core.EditorManager.prototype.getLabel=function(object){return this.labels.get(object)};
weavejs.core.EditorManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'EditorManager',qName:'weavejs.core.EditorManager'}],interfaces:[weavejs.api.ui.IEditorManager]};goog.provide('weavejs.api.core.DynamicState');weavejs.api.core.DynamicState=function(){};
weavejs.api.core.DynamicState.create=function(objectName,className,sessionState){objectName=typeof objectName!=='undefined'?objectName:null;className=typeof className!=='undefined'?className:null;sessionState=typeof sessionState!=='undefined'?sessionState:null;var obj={};obj[weavejs.api.core.DynamicState.OBJECT_NAME]=objectName||null;obj[weavejs.api.core.DynamicState.CLASS_NAME]=className||null;obj[weavejs.api.core.DynamicState.SESSION_STATE]=sessionState;return obj};
weavejs.api.core.DynamicState.OBJECT_NAME='objectName';weavejs.api.core.DynamicState.CLASS_NAME='className';weavejs.api.core.DynamicState.SESSION_STATE='sessionState';weavejs.api.core.DynamicState.BYPASS_DIFF='bypassDiff';
weavejs.api.core.DynamicState.isDynamicState=function(object,handleBypassDiff){handleBypassDiff=typeof handleBypassDiff!=='undefined'?handleBypassDiff:false;if(typeof object!=='object')return false;var matchCount=0;for(var name in object)if(name===weavejs.api.core.DynamicState.OBJECT_NAME||name===weavejs.api.core.DynamicState.CLASS_NAME||name===weavejs.api.core.DynamicState.SESSION_STATE)matchCount++;else if(handleBypassDiff&&name===weavejs.api.core.DynamicState.BYPASS_DIFF)continue;else return false;
return matchCount==3};
weavejs.api.core.DynamicState.isDynamicStateArray=function(state,handleBypassDiff){handleBypassDiff=typeof handleBypassDiff!=='undefined'?handleBypassDiff:false;var array=org.apache.flex.utils.Language.as(state,Array);if(!array)return false;var result=false;var foreachiter0_target=array;for(var foreachiter0 in foreachiter0_target){var item=foreachiter0_target[foreachiter0];if(typeof item==='string')continue;if(weavejs.api.core.DynamicState.isDynamicState(item,handleBypassDiff))result=true;else return false}return result};
weavejs.api.core.DynamicState.alterSessionStateToBypassDiff=function(object){if(weavejs.api.core.DynamicState.isDynamicState(object)){object[weavejs.api.core.DynamicState.BYPASS_DIFF]=true;object=object[weavejs.api.core.DynamicState.SESSION_STATE]}if(typeof object==='object')for(var key in object)weavejs.api.core.DynamicState.alterSessionStateToBypassDiff(object[key])};weavejs.api.core.DynamicState.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicState',qName:'weavejs.api.core.DynamicState'}]};goog.provide('weavejs.core.CallbackEntry');goog.require('weavejs.api.core.IDisposableObject');weavejs.core.CallbackEntry=function(context,callback){this.context=context;this.callback=callback;if(context)Weave.disposableChild(context,this);if(weavejs.core.CallbackCollection.debug)this.addCallback_stackTrace=new Error(weavejs.core.CallbackEntry.STACK_TRACE_ADD)};weavejs.core.CallbackEntry.prototype.context=null;weavejs.core.CallbackEntry.prototype.callback=null;
weavejs.core.CallbackEntry.prototype.recursionCount=0;weavejs.core.CallbackEntry.prototype.schedule=0;weavejs.core.CallbackEntry.prototype.addCallback_stackTrace=null;weavejs.core.CallbackEntry.prototype.removeCallback_stackTrace=null;weavejs.core.CallbackEntry.prototype.dispose=function(){if(weavejs.core.CallbackCollection.debug&&this.callback!=null)this.removeCallback_stackTrace=new Error(weavejs.core.CallbackEntry.STACK_TRACE_REMOVE);this.context=null;this.callback=null};
weavejs.core.CallbackEntry.STACK_TRACE_ADD='This is the stack trace from when the callback was added.';weavejs.core.CallbackEntry.STACK_TRACE_REMOVE='This is the stack trace from when the callback was removed.';weavejs.core.CallbackEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'CallbackEntry',qName:'weavejs.core.CallbackEntry'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.provide('weavejs.util.Dictionary2D');weavejs.util.Dictionary2D=function(weakPrimaryKeys,weakSecondaryKeys,defaultType){weakPrimaryKeys=typeof weakPrimaryKeys!=='undefined'?weakPrimaryKeys:false;weakSecondaryKeys=typeof weakSecondaryKeys!=='undefined'?weakSecondaryKeys:false;defaultType=typeof defaultType!=='undefined'?defaultType:null;this.map=weakPrimaryKeys?new weavejs.util.JS.WeakMap:new weavejs.util.JS.Map;this.weak1=weakPrimaryKeys;this.weak2=weakSecondaryKeys;this.defaultType=defaultType};
weavejs.util.Dictionary2D.prototype.map;weavejs.util.Dictionary2D.prototype.weak1;weavejs.util.Dictionary2D.prototype.weak2;weavejs.util.Dictionary2D.prototype.defaultType;weavejs.util.Dictionary2D.prototype.get=function(key1,key2){var value=undefined;var map2=this.map.get(key1);if(map2)value=map2.get(key2);if(value===undefined&&this.defaultType){value=new this.defaultType;this.set(key1,key2,value)}return value};
weavejs.util.Dictionary2D.prototype.set=function(key1,key2,value){var map2=this.map.get(key1);if(map2==null){map2=this.weak2?new weavejs.util.JS.WeakMap:new weavejs.util.JS.Map;this.map.set(key1,map2)}map2.set(key2,value)};weavejs.util.Dictionary2D.prototype.primaryKeys=function(){if(this.weak1)weavejs.util.Dictionary2D.throwWeakIterationError();return weavejs.util.JS.mapKeys(this.map)};
weavejs.util.Dictionary2D.prototype.secondaryKeys=function(key1){if(this.weak2)weavejs.util.Dictionary2D.throwWeakIterationError();return weavejs.util.JS.mapKeys(this.map.get(key1))};weavejs.util.Dictionary2D.prototype.removeAllPrimary=function(key1){this.map['delete'](key1)};
weavejs.util.Dictionary2D.prototype.removeAllSecondary=function(key2){if(this.weak1)weavejs.util.Dictionary2D.throwWeakIterationError();this._key2ToRemove=key2;this.map.forEach(org.apache.flex.utils.Language.closure(this.removeAllSecondary_each,this,'removeAllSecondary_each'),this)};weavejs.util.Dictionary2D.prototype._key2ToRemove;weavejs.util.Dictionary2D.prototype.removeAllSecondary_each=function(map2,key1){map2['delete'](this._key2ToRemove)};
weavejs.util.Dictionary2D.prototype.remove=function(key1,key2){var value=undefined;var map2=this.map.get(key1);if(map2){value=map2.get(key2);map2['delete'](key2);if(this.weak2||map2.size)return value;this.map['delete'](key1)}return value};weavejs.util.Dictionary2D.throwWeakIterationError=function(){throw new Error('WeakMap cannot be iterated over');};
weavejs.util.Dictionary2D.prototype.forEach=function(key1_key2_value,thisArg){if(this.weak1||this.weak2)weavejs.util.Dictionary2D.throwWeakIterationError();this.forEach_fn=key1_key2_value;this.forEach_this=thisArg;this.map.forEach(org.apache.flex.utils.Language.closure(this.forEach1,this,'forEach1'),this);this.forEach_fn=null;this.forEach_this=null;this.forEach_key1=null;this.forEach_map2=null};weavejs.util.Dictionary2D.prototype.forEach_fn;weavejs.util.Dictionary2D.prototype.forEach_this;weavejs.util.Dictionary2D.prototype.forEach_key1;
weavejs.util.Dictionary2D.prototype.forEach_map2;weavejs.util.Dictionary2D.prototype.forEach1=function(map2,key1){if(this.forEach_fn==null)return;this.forEach_key1=key1;this.forEach_map2=map2;map2.forEach(org.apache.flex.utils.Language.closure(this.forEach2,this,'forEach2'),this)};weavejs.util.Dictionary2D.prototype.forEach2=function(value,key2){if(this.forEach_fn!=null&&this.forEach_fn.call(this.forEach_this,this.forEach_key1,key2,value))this.forEach_fn=null};
weavejs.util.Dictionary2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Dictionary2D',qName:'weavejs.util.Dictionary2D'}]};goog.provide('weavejs.core.GroupedCallbackEntry');goog.require('weavejs.core.CallbackEntry');goog.require('weavejs.util.Dictionary2D');weavejs.core.GroupedCallbackEntry=function(context,groupedCallback){this.targets=[];weavejs.core.GroupedCallbackEntry.base(this,'constructor',context,groupedCallback);if(!weavejs.core.GroupedCallbackEntry._initialized)weavejs.core.GroupedCallbackEntry._initialized=weavejs.WeaveAPI.Scheduler.frameCallbacks.addImmediateCallback(null,weavejs.core.GroupedCallbackEntry._handleGroupedCallbacks)};
goog.inherits(weavejs.core.GroupedCallbackEntry,weavejs.core.CallbackEntry);
weavejs.core.GroupedCallbackEntry.addGroupedCallback=function(callbackCollection,relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){if(!relevantContext)relevantContext=weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER;callbackCollection.removeCallback(relevantContext,groupedCallback);var entry=weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.get(relevantContext,groupedCallback);if(!entry){entry=new weavejs.core.GroupedCallbackEntry(relevantContext,groupedCallback);
weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.set(relevantContext,groupedCallback,entry)}entry.targets.push(callbackCollection);if(delayWhileBusy)entry.delayWhileBusy=true;callbackCollection.addImmediateCallback(relevantContext,org.apache.flex.utils.Language.closure(entry.trigger,entry,'trigger'),triggerCallbackNow)};
weavejs.core.GroupedCallbackEntry.removeGroupedCallback=function(callbackCollection,relevantContext,groupedCallback){if(!relevantContext)relevantContext=weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER;var entry=weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.get(relevantContext,groupedCallback);if(entry){callbackCollection.removeCallback(relevantContext,org.apache.flex.utils.Language.closure(entry.trigger,entry,'trigger'));var index=entry.targets.indexOf(callbackCollection);if(index>=
0){entry.targets.splice(index,1);if(entry.targets.length==0)weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.remove(relevantContext,groupedCallback)}}};
weavejs.core.GroupedCallbackEntry._handleGroupedCallbacks=function(){var i;var entry;weavejs.core.GroupedCallbackEntry._handlingGroupedCallbacks=true;for(i=0;i<weavejs.core.GroupedCallbackEntry._triggeredEntries.length;i++){entry=weavejs.core.GroupedCallbackEntry._triggeredEntries[i];entry.handleGroupedCallback()}weavejs.core.GroupedCallbackEntry._handlingRecursiveGroupedCallbacks=true;for(i=0;i<weavejs.core.GroupedCallbackEntry._triggeredEntries.length;i++){entry=weavejs.core.GroupedCallbackEntry._triggeredEntries[i];
if(entry.triggeredAgain)entry.handleGroupedCallback()}weavejs.core.GroupedCallbackEntry._handlingRecursiveGroupedCallbacks=false;weavejs.core.GroupedCallbackEntry._handlingGroupedCallbacks=false;var foreachiter0_target=weavejs.core.GroupedCallbackEntry._triggeredEntries;for(var foreachiter0 in foreachiter0_target){entry=foreachiter0_target[foreachiter0];entry.triggered=entry.triggeredAgain=false}weavejs.core.GroupedCallbackEntry._triggeredEntries.length=0};
weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER={};weavejs.core.GroupedCallbackEntry._handlingGroupedCallbacks=false;weavejs.core.GroupedCallbackEntry._handlingRecursiveGroupedCallbacks=false;weavejs.core.GroupedCallbackEntry._initialized=false;weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry=new weavejs.util.Dictionary2D(true,true);weavejs.core.GroupedCallbackEntry._triggeredEntries=[];weavejs.core.GroupedCallbackEntry.prototype.triggered=false;
weavejs.core.GroupedCallbackEntry.prototype.triggeredAgain=false;weavejs.core.GroupedCallbackEntry.prototype.delayWhileBusy=false;weavejs.core.GroupedCallbackEntry.prototype.targets;
weavejs.core.GroupedCallbackEntry.prototype.trigger=function(){if(weavejs.core.GroupedCallbackEntry._handlingRecursiveGroupedCallbacks)this.handleGroupedCallback();else if(!this.triggered){weavejs.core.GroupedCallbackEntry._triggeredEntries.push(this);this.triggered=true}else if(weavejs.core.GroupedCallbackEntry._handlingGroupedCallbacks)this.triggeredAgain=true};
weavejs.core.GroupedCallbackEntry.prototype.handleGroupedCallback=function(){for(var i=0;i<this.targets.length;i++){var target=this.targets[i];if(Weave.wasDisposed(target))this.targets.splice(i--,1);else if(this.delayWhileBusy&&Weave.isBusy(target))return}if(this.targets.length==0){this.dispose();weavejs.core.GroupedCallbackEntry.d2d_context_callback_entry.remove(this.context,this.callback);return}if(this.recursionCount==0){this.recursionCount++;this.callback.apply(this.context===weavejs.core.GroupedCallbackEntry.CONTEXT_PLACEHOLDER?
this.callback['this']:this.context);this.recursionCount--}this.triggeredAgain=false};weavejs.core.GroupedCallbackEntry.prototype.dispose=function(){var foreachiter1_target=this.targets;for(var foreachiter1 in foreachiter1_target){var target=foreachiter1_target[foreachiter1];weavejs.core.GroupedCallbackEntry.removeGroupedCallback(target,this.context,this.callback)}weavejs.core.GroupedCallbackEntry.base(this,'dispose')};
weavejs.core.GroupedCallbackEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'GroupedCallbackEntry',qName:'weavejs.core.GroupedCallbackEntry'}]};goog.provide('weavejs.core.CallbackCollection');goog.require('weavejs.core.GroupedCallbackEntry');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.IDisposableObject');weavejs.core.CallbackCollection=function(preCallback){preCallback=typeof preCallback!=='undefined'?preCallback:null;this._callbackEntries=[];this._triggerCounter=weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT;this._disposeCallbackEntries=[];this._preCallback=preCallback};
weavejs.core.CallbackCollection.debug=false;weavejs.core.CallbackCollection.prototype._linkableObject;weavejs.core.CallbackCollection.prototype._lastTriggerStackTrace;weavejs.core.CallbackCollection.prototype._oldEntries;weavejs.core.CallbackCollection.prototype._callbackEntries;weavejs.core.CallbackCollection.prototype._preCallback=null;weavejs.core.CallbackCollection.prototype._delayCount=0;weavejs.core.CallbackCollection.prototype._runCallbacksIsPending=false;
weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT=1;weavejs.core.CallbackCollection.prototype._triggerCounter;
weavejs.core.CallbackCollection.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){runCallbackNow=typeof runCallbackNow!=='undefined'?runCallbackNow:false;alwaysCallLast=typeof alwaysCallLast!=='undefined'?alwaysCallLast:false;if(callback==null)return;this.removeCallback(relevantContext,callback);var entry=new weavejs.core.CallbackEntry(relevantContext,callback);if(alwaysCallLast)entry.schedule=1;this._callbackEntries.push(entry);if(runCallbackNow){entry.recursionCount++;
callback.apply(relevantContext||callback['this']);entry.recursionCount--}};weavejs.core.CallbackCollection.prototype.triggerCallbacks=function(){if(weavejs.core.CallbackCollection.debug)this._lastTriggerStackTrace=new Error(weavejs.core.CallbackCollection.STACK_TRACE_TRIGGER);if(this._delayCount>0){this._triggerCounter++;this._runCallbacksIsPending=true;return}this._runCallbacksImmediately()};weavejs.core.CallbackCollection.prototype._runCallbacksCompleted;
weavejs.core.CallbackCollection.prototype._runCallbacksImmediately=function(preCallbackParams){preCallbackParams=Array.prototype.slice.call(arguments,0);this._triggerCounter++;this._runCallbacksIsPending=false;this._runCallbacksCompleted=false;for(var schedule=0;schedule<2;schedule++)for(var i=0;i<this._callbackEntries.length;i++){if(this._runCallbacksCompleted&&this._preCallback==null)break;var entry=this._callbackEntries[i];if(entry.schedule!=schedule)continue;var shouldRemoveEntry;if(entry.callback==
null)shouldRemoveEntry=true;else if(org.apache.flex.utils.Language.is(entry.context,weavejs.core.CallbackCollection))shouldRemoveEntry=org.apache.flex.utils.Language.as(entry.context,weavejs.core.CallbackCollection)._wasDisposed;else shouldRemoveEntry=Weave.wasDisposed(entry.context);if(shouldRemoveEntry){entry.dispose();var removed=this._callbackEntries.splice(i--,1);if(weavejs.core.CallbackCollection.debug)this._oldEntries=this._oldEntries?this._oldEntries.concat(removed):removed;continue}if(entry.recursionCount==
0||this._preCallback!=null){entry.recursionCount++;if(this._preCallback!=null)this._preCallback.apply(this,preCallbackParams);entry.callback.apply(entry.context||entry.callback['this']);entry.recursionCount--}}this._runCallbacksCompleted=true};
weavejs.core.CallbackCollection.prototype.removeCallback=function(relevantContext,callback){weavejs.core.GroupedCallbackEntry.removeGroupedCallback(this,relevantContext,callback);for(var outerLoop=0;outerLoop<2;outerLoop++){var entries=outerLoop==0?this._callbackEntries:this._disposeCallbackEntries;for(var index=0;index<entries.length;index++){var entry=entries[index];if(entry.callback===callback&&entry.context===relevantContext)entry.dispose()}}};
weavejs.core.CallbackCollection.prototype.delayCallbacks=function(){this._delayCount++};weavejs.core.CallbackCollection.prototype.resumeCallbacks=function(){if(this._delayCount>0)this._delayCount--;if(this._delayCount==0&&this._runCallbacksIsPending)this.triggerCallbacks()};
weavejs.core.CallbackCollection.prototype.addDisposeCallback=function(relevantContext,callback){var foreachiter0_target=this._disposeCallbackEntries;for(var foreachiter0 in foreachiter0_target){var entry=foreachiter0_target[foreachiter0];if(entry.callback===callback&&entry.context===relevantContext)return}this._disposeCallbackEntries.push(new weavejs.core.CallbackEntry(relevantContext,callback))};weavejs.core.CallbackCollection.prototype._disposeCallbackEntries;
weavejs.core.CallbackCollection.prototype.dispose=function(){var entry;if(weavejs.core.CallbackCollection.debug)this._oldEntries=this._oldEntries?this._oldEntries.concat(this._callbackEntries):this._callbackEntries.concat();var foreachiter1_target=this._callbackEntries;for(var foreachiter1 in foreachiter1_target){entry=foreachiter1_target[foreachiter1];entry.dispose()}this._callbackEntries.length=0;this._wasDisposed=true;while(this._disposeCallbackEntries.length){entry=this._disposeCallbackEntries.shift();
if(entry.callback!=null&&!Weave.wasDisposed(entry.context))entry.callback.apply(entry.context||entry.callback['this'])}};weavejs.core.CallbackCollection.prototype._wasDisposed=false;
weavejs.core.CallbackCollection.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;weavejs.core.GroupedCallbackEntry.addGroupedCallback(this,relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy)};weavejs.core.CallbackCollection.STACK_TRACE_TRIGGER='This is the stack trace from when the callbacks were last triggered.';
Object.defineProperties(weavejs.core.CallbackCollection.prototype,{triggerCounter:{get:function(){return this._triggerCounter}},callbacksAreDelayed:{get:function(){return this._delayCount>0}},wasDisposed:{get:function(){return this._wasDisposed}}});weavejs.core.CallbackCollection.prototype.FLEXJS_CLASS_INFO={names:[{name:'CallbackCollection',qName:'weavejs.core.CallbackCollection'}],interfaces:[weavejs.api.core.ICallbackCollection,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.core.ChildListCallbackInterface');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.core.IChildListCallbackInterface');weavejs.core.ChildListCallbackInterface=function(){weavejs.core.ChildListCallbackInterface.base(this,'constructor',org.apache.flex.utils.Language.closure(this.setCallbackVariables,this,'setCallbackVariables'))};goog.inherits(weavejs.core.ChildListCallbackInterface,weavejs.core.CallbackCollection);
weavejs.core.ChildListCallbackInterface.prototype._lastNameAdded=null;weavejs.core.ChildListCallbackInterface.prototype._lastObjectAdded=null;weavejs.core.ChildListCallbackInterface.prototype._lastNameRemoved=null;weavejs.core.ChildListCallbackInterface.prototype._lastObjectRemoved=null;
weavejs.core.ChildListCallbackInterface.prototype.setCallbackVariables=function(name,objectAdded,objectRemoved){name=typeof name!=='undefined'?name:null;objectAdded=typeof objectAdded!=='undefined'?objectAdded:null;objectRemoved=typeof objectRemoved!=='undefined'?objectRemoved:null;this._lastNameAdded=objectAdded?name:null;this._lastObjectAdded=objectAdded;this._lastNameRemoved=objectRemoved?name:null;this._lastObjectRemoved=objectRemoved};
weavejs.core.ChildListCallbackInterface.prototype.runCallbacks=function(name,objectAdded,objectRemoved){var _name=this._lastNameAdded||this._lastNameRemoved;var _added=this._lastObjectAdded;var _removed=this._lastObjectRemoved;this._runCallbacksImmediately(name,objectAdded,objectRemoved);this.setCallbackVariables(_name,_added,_removed)};
Object.defineProperties(weavejs.core.ChildListCallbackInterface.prototype,{lastNameAdded:{get:function(){return this._lastNameAdded}},lastObjectAdded:{get:function(){return this._lastObjectAdded}},lastNameRemoved:{get:function(){return this._lastNameRemoved}},lastObjectRemoved:{get:function(){return this._lastObjectRemoved}}});weavejs.core.ChildListCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'ChildListCallbackInterface',qName:'weavejs.core.ChildListCallbackInterface'}],interfaces:[weavejs.api.core.IChildListCallbackInterface]};goog.provide('weavejs.core.LinkableHashMap');goog.require('weavejs.api.core.DynamicState');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.core.ChildListCallbackInterface');goog.require('weavejs.api.core.ILinkableHashMap');
weavejs.core.LinkableHashMap=function(typeRestriction){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;this._childListCallbacks=Weave.linkableChild(this,weavejs.core.ChildListCallbackInterface);this._orderedNames=[];this._nameToObjectMap={};this._map_objectToNameMap=new weavejs.util.JS.WeakMap;this._nameIsLocked={};this._previousNameMap={};weavejs.core.LinkableHashMap.base(this,'constructor');this._typeRestriction=typeRestriction};
goog.inherits(weavejs.core.LinkableHashMap,weavejs.core.CallbackCollection);weavejs.core.LinkableHashMap.prototype._childListCallbacks;weavejs.core.LinkableHashMap.prototype._orderedNames;weavejs.core.LinkableHashMap.prototype._nameToObjectMap;weavejs.core.LinkableHashMap.prototype._map_objectToNameMap;weavejs.core.LinkableHashMap.prototype._nameIsLocked;weavejs.core.LinkableHashMap.prototype._previousNameMap;weavejs.core.LinkableHashMap.prototype._typeRestriction;
weavejs.core.LinkableHashMap.prototype.getNames=function(filter){filter=typeof filter!=='undefined'?filter:null;var result=[];for(var i=0;i<this._orderedNames.length;i++){var name=this._orderedNames[i];if(filter==null||org.apache.flex.utils.Language.is(this._nameToObjectMap[name],filter))result.push(name)}return result};
weavejs.core.LinkableHashMap.prototype.getObjects=function(filter){filter=typeof filter!=='undefined'?filter:null;var result=[];for(var i=0;i<this._orderedNames.length;i++){var name=this._orderedNames[i];var object=this._nameToObjectMap[name];if(filter==null||org.apache.flex.utils.Language.is(object,filter))result.push(object)}return result};weavejs.core.LinkableHashMap.prototype.getObject=function(name){return this._nameToObjectMap[name]};weavejs.core.LinkableHashMap.prototype.getName=function(object){return this._map_objectToNameMap.get(object)};
weavejs.core.LinkableHashMap.prototype.setNameOrder=function(newOrder){var changeDetected=false;var name;var i;var originalNameCount=this._orderedNames.length;var haveSeen={};for(i=0;i<newOrder.length;i++){name=newOrder[i];if(this._nameToObjectMap[name]==undefined||haveSeen[name]!=undefined)continue;haveSeen[name]=true;this._orderedNames.push(name)}var appendedCount=this._orderedNames.length-originalNameCount;for(i=0;i<appendedCount;i++){var newIndex=originalNameCount+i;var oldIndex=this._orderedNames.indexOf(this._orderedNames[newIndex]);
if(newIndex-oldIndex!=appendedCount)changeDetected=true;this._orderedNames[oldIndex]=null}var out=0;for(i=0;i<this._orderedNames.length;i++)if(this._orderedNames[i]!=null)this._orderedNames[out++]=this._orderedNames[i];this._orderedNames.length=out;if(changeDetected)this._childListCallbacks.runCallbacks(null,null,null)};
weavejs.core.LinkableHashMap.prototype.requestObject=function(name,classDef,lockObject){var className=classDef?Weave.className(classDef):null;var result=this.initObjectByClassName(name,className,lockObject);return classDef?org.apache.flex.utils.Language.as(result,classDef):null};
weavejs.core.LinkableHashMap.prototype.requestObjectCopy=function(name,objectToCopy){if(objectToCopy==null){this.removeObject(name);return null}this.delayCallbacks();var classDef=Object(objectToCopy).constructor;var sessionState=Weave.getState(objectToCopy);if(name==this.getName(objectToCopy))this.removeObject(name);var object=this.requestObject(name,classDef,false);if(object!=null)Weave.setState(object,sessionState);this.resumeCallbacks();return object};
weavejs.core.LinkableHashMap.prototype.renameObject=function(oldName,newName){if(oldName!=newName){this.delayCallbacks();var newNameOrder=this._orderedNames.concat();var index=newNameOrder.indexOf(oldName);if(index>=0)newNameOrder.splice(index,1,newName);this.requestObjectCopy(newName,this.getObject(oldName));this.removeObject(oldName);this.setNameOrder(newNameOrder);this.resumeCallbacks()}return this.getObject(newName)};
weavejs.core.LinkableHashMap.prototype.initObjectByClassName=function(name,className,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;if(className){if(!name)name=this.generateUniqueName(className.split('::').pop());var classDef=Weave.getDefinition(className);if(Weave.isLinkable(classDef)&&(this._typeRestriction==null||org.apache.flex.utils.Language.is(classDef.prototype,this._typeRestriction))){var object=this._nameToObjectMap[name];if(!object||object.constructor!=classDef)this.createAndSaveNewObject(name,
classDef,lockObject);else if(lockObject)this.lockObject(name)}else this.removeObject(name)}else this.removeObject(name);return this._nameToObjectMap[name]};
weavejs.core.LinkableHashMap.prototype.createAndSaveNewObject=function(name,classDef,lockObject){if(this._nameIsLocked[name])return;this.removeObject(name);var object=new classDef;Weave.linkableChild(this,object);this._nameToObjectMap[name]=object;this._map_objectToNameMap.set(object,name);this._orderedNames.push(name);this._previousNameMap[name]=true;if(lockObject)this.lockObject(name);this._childListCallbacks.runCallbacks(name,object,null)};
weavejs.core.LinkableHashMap.prototype.lockObject=function(name){if(name!=null&&this._nameToObjectMap[name]!=null)this._nameIsLocked[name]=true};weavejs.core.LinkableHashMap.prototype.objectIsLocked=function(name){return this._nameIsLocked[name]?true:false};
weavejs.core.LinkableHashMap.prototype.removeObject=function(name){if(!name||this._nameIsLocked[name])return;var object=this._nameToObjectMap[name];if(object==null)return;delete this._nameToObjectMap[name];this._map_objectToNameMap['delete'](object);var index=this._orderedNames.indexOf(name);this._orderedNames.splice(index,1);this._childListCallbacks.runCallbacks(name,null,object);Weave.dispose(object)};
weavejs.core.LinkableHashMap.prototype.removeAllObjects=function(){this.delayCallbacks();var names=this._orderedNames.concat();var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];this.removeObject(name)}this.resumeCallbacks()};
weavejs.core.LinkableHashMap.prototype.dispose=function(){weavejs.core.LinkableHashMap.base(this,'dispose');this.removeAllObjects();var names=this._orderedNames.concat();var foreachiter1_target=names;for(var foreachiter1 in foreachiter1_target){var name=foreachiter1_target[foreachiter1];this._nameIsLocked[name]=undefined;this.removeObject(name)}};
weavejs.core.LinkableHashMap.prototype.generateUniqueName=function(baseName){var count=1;var name=baseName;while(this._previousNameMap[name]!=undefined)name=baseName+ ++count;return name};weavejs.core.LinkableHashMap.prototype.getSessionState=function(){var result=new Array(this._orderedNames.length);for(var i=0;i<this._orderedNames.length;i++){var name=this._orderedNames[i];var object=this._nameToObjectMap[name];result[i]=weavejs.api.core.DynamicState.create(name,Weave.className(object),Weave.getState(object))}return result};
weavejs.core.LinkableHashMap.prototype.setSessionState=function(newStateArray,removeMissingDynamicObjects){if(newStateArray==null)return;this.delayCallbacks();var i;var delayed=[];var callbacks;var objectName;var className;var typedState;var remainingObjects=removeMissingDynamicObjects?{}:null;var newObjects={};var newNameOrder=[];if(newStateArray!=null){var foreachiter2_target=this._orderedNames;for(var foreachiter2 in foreachiter2_target){objectName=foreachiter2_target[foreachiter2];callbacks=Weave.getCallbacks(this._nameToObjectMap[objectName]);
delayed.push(callbacks);callbacks.delayCallbacks()}for(i=0;i<newStateArray.length;i++){typedState=newStateArray[i];if(!weavejs.api.core.DynamicState.isDynamicState(typedState,true))continue;objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(objectName==null)continue;if(className==null)continue;if(this._nameToObjectMap[objectName]!=this.initObjectByClassName(objectName,className))newObjects[objectName]=true}var foreachiter3_target=
this._orderedNames;for(var foreachiter3 in foreachiter3_target){objectName=foreachiter3_target[foreachiter3];callbacks=Weave.getCallbacks(this._nameToObjectMap[objectName]);delayed.push(callbacks);callbacks.delayCallbacks()}for(i=0;i<newStateArray.length;i++){typedState=newStateArray[i];if(typeof typedState==='string'){objectName=String(typedState);if(removeMissingDynamicObjects)remainingObjects[objectName]=true;newNameOrder.push(objectName);continue}if(!weavejs.api.core.DynamicState.isDynamicState(typedState,
true))continue;objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];if(objectName==null)continue;var object=this._nameToObjectMap[objectName];if(object==null)continue;Weave.setState(object,typedState[weavejs.api.core.DynamicState.SESSION_STATE],newObjects[objectName]||removeMissingDynamicObjects);if(removeMissingDynamicObjects)remainingObjects[objectName]=true;newNameOrder.push(objectName)}}if(removeMissingDynamicObjects){var names=this._orderedNames.concat();var foreachiter4_target=names;
for(var foreachiter4 in foreachiter4_target){objectName=foreachiter4_target[foreachiter4];if(remainingObjects[objectName]!==true)this.removeObject(objectName)}}this.setNameOrder(newNameOrder);var foreachiter5_target=delayed;for(var foreachiter5 in foreachiter5_target){callbacks=foreachiter5_target[foreachiter5];if(!Weave.wasDisposed(callbacks))callbacks.resumeCallbacks()}this.resumeCallbacks()};
Object.defineProperties(weavejs.core.LinkableHashMap.prototype,{typeRestriction:{get:function(){return this._typeRestriction}},childListCallbacks:{get:function(){return this._childListCallbacks}}});weavejs.core.LinkableHashMap.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableHashMap',qName:'weavejs.core.LinkableHashMap'}],interfaces:[weavejs.api.core.ILinkableHashMap]};goog.provide('weavejs.util.StandardLib');weavejs.util.StandardLib=function(){};weavejs.util.StandardLib.formatNumber=function(number,precision){precision=typeof precision!=='undefined'?precision:-1;return String(number)};weavejs.util.StandardLib.asNumber=function(value){if(value==null)return NaN;if(org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,Date))return value;try{value=String(value);if(value=='')return NaN;return Number(value)}catch(e){}return NaN};
weavejs.util.StandardLib.asString=function(value){if(value==null)return'';return String(value)};weavejs.util.StandardLib.asBoolean=function(value){if(org.apache.flex.utils.Language.is(value,Boolean))return value;if(org.apache.flex.utils.Language.is(value,String))return weavejs.util.StandardLib.stringCompare(value,'true',true)==0;if(isNaN(value))return false;if(org.apache.flex.utils.Language.is(value,Number))return value!=0;return value};
weavejs.util.StandardLib.isDefined=function(value){return value!==undefined&&value!==null&&!(org.apache.flex.utils.Language.is(value,Number)&&isNaN(value))};weavejs.util.StandardLib.isUndefined=function(value){return value===undefined||value===null||org.apache.flex.utils.Language.is(value,Number)&&isNaN(value)};
weavejs.util.StandardLib.lpad=function(str,length,padString){padString=typeof padString!=='undefined'?padString:' ';if(str.length>=length)return str;while(str.length+padString.length<length)padString+=padString;return padString.substr(0,length-str.length)+str};
weavejs.util.StandardLib.rpad=function(str,length,padString){padString=typeof padString!=='undefined'?padString:' ';if(str.length>=length)return str;while(str.length+padString.length<length)padString+=padString;return str+padString.substr(0,length-str.length)};
weavejs.util.StandardLib.replace=function(string,findStr,replaceStr,moreFindAndReplace){moreFindAndReplace=Array.prototype.slice.call(arguments,3);string=string.split(findStr).join(replaceStr);while(moreFindAndReplace.length>1){findStr=moreFindAndReplace.shift();replaceStr=moreFindAndReplace.shift();string=string.split(findStr).join(replaceStr)}return string};weavejs.util.StandardLib.argRef=new RegExp('^(0|[1-9][0-9]*)}');
weavejs.util.StandardLib.substitute=function(format,args){args=Array.prototype.slice.call(arguments,1);if(format==null)return'';if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=org.apache.flex.utils.Language.as(args[0],Array);var split=format.split('{');var output=split[0];for(var i=1;i<split.length;i++){var str=org.apache.flex.utils.Language.as(split[i],String);if(weavejs.util.StandardLib.argRef.test(str)){var j=str.indexOf('}');output+=args[str.substring(0,j)];output+=str.substring(j+
1)}else output+='{'+str}return output};
weavejs.util.StandardLib.unIndent=function(script,spacesPerTab){spacesPerTab=typeof spacesPerTab!=='undefined'?spacesPerTab:-1;if(script==null)return null;script=weavejs.util.StandardLib.replace(script,'\r\n','\n','\r','\n');script=weavejs.util.StandardLib.trim('.'+script).substr(1);var lines=script.split('\n');while(lines.length&&!weavejs.util.StandardLib.trim(lines[0]))lines.shift();if(!lines.length)return'';var commonIndent=Number.MAX_VALUE;var line;var foreachiter0_target=lines;for(var foreachiter0 in foreachiter0_target){line=
foreachiter0_target[foreachiter0];if(!weavejs.util.StandardLib.trim(line))continue;var lineIndent=0;while(line.charAt(lineIndent)=='\t')lineIndent++;commonIndent=Math.min(commonIndent,lineIndent)}for(var i=0;i<lines.length;i++){line=lines[i];var t=0;while(t<commonIndent&&line.charAt(t)=='\t')t++;var spaces='';if(spacesPerTab>=0)while(line.charAt(t)=='\t'){spaces+=weavejs.util.StandardLib.lpad('',spacesPerTab,'        ');t++}lines[i]=spaces+line.substr(t)}return lines.join('\n')};
weavejs.util.StandardLib.trim=function(str){if(str==null)return'';var startIndex=0;while(weavejs.util.StandardLib.isWhitespace(str.charAt(startIndex)))++startIndex;var endIndex=str.length-1;while(weavejs.util.StandardLib.isWhitespace(str.charAt(endIndex)))--endIndex;if(endIndex>=startIndex)return str.slice(startIndex,endIndex+1);else return''};
weavejs.util.StandardLib.isWhitespace=function(character){switch(character){case ' ':case '\t':case '\r':case '\n':case '\f':case '\ufffd':case '\u2028':case '\u2029':case '?':return true;default:return false}};
weavejs.util.StandardLib.numberToBase=function(number,base,zeroPad){base=typeof base!=='undefined'?base:10;zeroPad=typeof zeroPad!=='undefined'?zeroPad:1;var parts=Math.abs(number).toString(base).split('.');if(parts[0].length<zeroPad)parts[0]=weavejs.util.StandardLib.lpad(parts[0],zeroPad,'0');if(number<0)parts[0]='-'+parts[0];return parts.join('.')};weavejs.util.StandardLib.sign=function(value){if(value<0)return-1;return 1};
weavejs.util.StandardLib.constrain=function(value,min,max){if(value<min)return min;if(value>max)return max;return value};weavejs.util.StandardLib.normalize=function(value,min,max){if(value<min||value>max)return NaN;if(min==max)return value-min;return(value-min)/(max-min)};
weavejs.util.StandardLib.scale=function(inputValue,inputMin,inputMax,outputMin,outputMax){if(inputMin==inputMax){if(isNaN(inputValue))return NaN;if(inputValue>inputMax)return outputMax;return outputMin}return outputMin+(outputMax-outputMin)*(inputValue-inputMin)/(inputMax-inputMin)};
weavejs.util.StandardLib.roundSignificant=function(value,significantDigits){significantDigits=typeof significantDigits!=='undefined'?significantDigits:14;if(!isFinite(value))return value;var sign=value<0?-1:1;var absValue=Math.abs(value);var pow10;if(absValue<1){pow10=Math.pow(10,significantDigits);return sign*Math.round(absValue*pow10)/pow10}var log10=Math.ceil(Math.log(absValue)/Math.LN10);if(log10<significantDigits){pow10=Math.pow(10,significantDigits-log10);return sign*Math.round(absValue*pow10)/
pow10}else{pow10=Math.pow(10,log10-significantDigits);return sign*Math.round(absValue/pow10)*pow10}};weavejs.util.StandardLib.testRoundSignificant=function(){for(var pow=-5;pow<=5;pow++){var n=1234.5678*Math.pow(10,pow);for(var d=0;d<=9;d++)org.apache.flex.utils.Language.trace('roundSignificant(',n,',',d,') \x3d',weavejs.util.StandardLib.roundSignificant(n,d))}};weavejs.util.StandardLib.roundPrecision=function(number,precision){return Math.round(number/precision)*precision};
weavejs.util.StandardLib.suggestPrecision=function(n,d){return Math.pow(10,Math.min(0,Math.ceil(Math.log(n)/Math.LN10)-d))};
weavejs.util.StandardLib.interpolateColor=function(normValue,colors){colors=Array.prototype.slice.call(arguments,1);if(colors.length==1&&org.apache.flex.utils.Language.is(colors[0],Array))colors=colors[0];if(normValue<0||normValue>1||colors.length==0)return NaN;var maxIndex=colors.length-1;var leftIndex=org.apache.flex.utils.Language._int(maxIndex*normValue);var rightIndex=leftIndex+1;if(rightIndex==colors.length)return colors[leftIndex];var minColor=colors[leftIndex];var maxColor=colors[rightIndex];
normValue=normValue*maxIndex-leftIndex;var percentLeft=1-normValue;var percentRight=normValue;var R=16711680;var G=65280;var B=255;return percentLeft*(minColor&R)+percentRight*(maxColor&R)&R|percentLeft*(minColor&G)+percentRight*(maxColor&G)&G|percentLeft*(minColor&B)+percentRight*(maxColor&B)&B};weavejs.util.StandardLib.getColorLuma=function(color){return.3*((color&16711680)>>16)+.59*((color&65280)>>8)+.11*(color&255)};
weavejs.util.StandardLib.getNiceNumber=function(x,round){var exponent;var fractionalPart;var niceFractionalPart;if(x==0)return 0;exponent=Math.floor(Math.log(x)/Math.LN10);fractionalPart=x/Math.pow(10,exponent);if(round)if(fractionalPart<1.5)niceFractionalPart=1;else if(fractionalPart<3)niceFractionalPart=2;else if(fractionalPart<7)niceFractionalPart=5;else niceFractionalPart=10;else if(fractionalPart<=1)niceFractionalPart=1;else if(fractionalPart<=2)niceFractionalPart=2;else if(fractionalPart<5)niceFractionalPart=
5;else niceFractionalPart=10;return niceFractionalPart*Math.pow(10,exponent)};
weavejs.util.StandardLib.getNiceNumbersInRange=function(min,max,numberOfValuesInRange){if(min==max)return[min];var nfrac;var d;var graphmin;var graphmax;var range;var x;var i=0;var values=[];range=max-min;d=weavejs.util.StandardLib.getNiceNumber(range/(numberOfValuesInRange-1),true);graphmin=Math.floor(min/d)*d;graphmax=Math.ceil(max/d)*d;nfrac=Math.max(-Math.floor(Math.log(d)/Math.LN10),0);for(x=graphmin;x<graphmax+.5*d;x+=d)values[i++]=weavejs.util.StandardLib.roundSignificant(x);return values};
weavejs.util.StandardLib.mean=function(args){args=Array.prototype.slice.call(arguments,0);if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=args[0];var sum=0;var foreachiter1_target=args;for(var foreachiter1 in foreachiter1_target){var value=foreachiter1_target[foreachiter1];sum+=value}return sum/args.length};
weavejs.util.StandardLib.sum=function(args){args=Array.prototype.slice.call(arguments,0);if(args.length==1&&org.apache.flex.utils.Language.is(args[0],Array))args=args[0];var sum=0;var foreachiter2_target=args;for(var foreachiter2 in foreachiter2_target){var value=foreachiter2_target[foreachiter2];sum+=value}return sum};
weavejs.util.StandardLib.sortOn=function(array,params,sortDirections,inPlace,returnSortedIndexArray){sortDirections=typeof sortDirections!=='undefined'?sortDirections:undefined;inPlace=typeof inPlace!=='undefined'?inPlace:true;returnSortedIndexArray=typeof returnSortedIndexArray!=='undefined'?returnSortedIndexArray:false;var __localFn0__=function(o,i,a){return i};if(returnSortedIndexArray)return array.map(__localFn0__);return inPlace?array:array.concat()};
weavejs.util.StandardLib.getArrayType=function(a){if(a==null||a.length==0||a[0]==null)return null;var type=Object(a[0]).constructor;var foreachiter3_target=a;for(var foreachiter3 in foreachiter3_target){var item=foreachiter3_target[foreachiter3];if(item==null||item.constructor!=type)return null}return type};
weavejs.util.StandardLib.arrayIsType=function(a,type){var foreachiter4_target=a;for(var foreachiter4 in foreachiter4_target){var item=foreachiter4_target[foreachiter4];if(!org.apache.flex.utils.Language.is(item,type))return false}return true};weavejs.util.StandardLib.logTransform=function(normValue,factor){factor=typeof factor!=='undefined'?factor:1024;return Math.log(1+normValue*factor)/Math.log(1+factor)};
weavejs.util.StandardLib.formatDate=function(value,formatString,formatAsUniversalTime){formatString=typeof formatString!=='undefined'?formatString:null;formatAsUniversalTime=typeof formatAsUniversalTime!=='undefined'?formatAsUniversalTime:true;if(org.apache.flex.utils.Language.is(value,Number)){var date=new Date;date.setTime(org.apache.flex.utils.Language.as(value,Number));value=date}return String(value)};weavejs.util.StandardLib._timezoneMultiplier=6E4;
weavejs.util.StandardLib.compare=function(a,b,objectCompare){objectCompare=typeof objectCompare!=='undefined'?objectCompare:null;var c;if(a===b)return 0;if(a==null)return 1;if(b==null)return-1;var typeA=typeof a;var typeB=typeof b;if(typeA!=typeB)return weavejs.util.StandardLib.stringCompare(typeA,typeB);if(typeA=='boolean')return weavejs.util.StandardLib.numericCompare(Number(a),Number(b));if(typeA=='number')return weavejs.util.StandardLib.numericCompare(org.apache.flex.utils.Language.as(a,Number),
org.apache.flex.utils.Language.as(b,Number));if(typeA=='string')return weavejs.util.StandardLib.stringCompare(org.apache.flex.utils.Language.as(a,String),org.apache.flex.utils.Language.as(b,String));if(typeA!='object')return 1;if(org.apache.flex.utils.Language.is(a,Date)&&org.apache.flex.utils.Language.is(b,Date))return weavejs.util.StandardLib.dateCompare(org.apache.flex.utils.Language.as(a,Date),org.apache.flex.utils.Language.as(b,Date));if(org.apache.flex.utils.Language.is(a,Array)&&org.apache.flex.utils.Language.is(b,
Array)){var an=a.length;var bn=b.length;if(an<bn)return-1;if(an>bn)return 1;for(var i=0;i<an;i++){c=weavejs.util.StandardLib.compare(a[i],b[i]);if(c!=0)return c}return 0}if(objectCompare!=null){var result=objectCompare(a,b);if(isFinite(result))return result}var qna=String(a);var qnb=String(b);if(qna!=qnb)return weavejs.util.StandardLib.stringCompare(qna,qnb);var p;for(p in a)if(!b.hasOwnProperty(p))return-1;for(p in b){if(!a.hasOwnProperty(p))return 1;c=weavejs.util.StandardLib.compare(a[p],b[p]);
if(c!=0)return c}return 0};weavejs.util.StandardLib.numericCompare=function(a,b){if(isNaN(a)&&isNaN(b))return 0;if(isNaN(a))return 1;if(isNaN(b))return-1;if(a<b)return-1;if(a>b)return 1;return 0};
weavejs.util.StandardLib.stringCompare=function(a,b,caseInsensitive){caseInsensitive=typeof caseInsensitive!=='undefined'?caseInsensitive:false;if(a==null&&b==null)return 0;if(a==null)return 1;if(b==null)return-1;if(caseInsensitive){a=a.toLocaleLowerCase();b=b.toLocaleLowerCase()}var result=a.localeCompare(b);if(result<-1)result=-1;else if(result>1)result=1;return result};
weavejs.util.StandardLib.dateCompare=function(a,b){if(a==null&&b==null)return 0;if(a==null)return 1;if(b==null)return-1;var na=a.getTime();var nb=b.getTime();if(na<nb)return-1;if(na>nb)return 1;if(isNaN(na)&&isNaN(nb))return 0;if(isNaN(na))return 1;if(isNaN(nb))return-1;return 0};weavejs.util.StandardLib.ucs2encode=function(value){var output='';if(value>65535){value-=65536;output+=String.fromCharCode(value>>>10&1023|55296);value=56320|value&1023}return output+String.fromCharCode(value)};
weavejs.util.StandardLib.prototype.FLEXJS_CLASS_INFO={names:[{name:'StandardLib',qName:'weavejs.util.StandardLib'}]};goog.provide('weavejs.api.core.ILinkableVariable');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableVariable=function(){};weavejs.api.core.ILinkableVariable.prototype.getSessionState=function(){};weavejs.api.core.ILinkableVariable.prototype.setSessionState=function(value){};weavejs.api.core.ILinkableVariable.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableVariable',qName:'weavejs.api.core.ILinkableVariable'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.core.LinkableVariable');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.util.StandardLib');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.LinkableVariable=function(sessionStateType,verifier,defaultValue,defaultValueTriggersCallbacks){sessionStateType=typeof sessionStateType!=='undefined'?sessionStateType:null;verifier=typeof verifier!=='undefined'?verifier:null;defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableVariable.base(this,'constructor');if(sessionStateType!=
Object){this._sessionStateType=sessionStateType;this._primitiveType=this._sessionStateType==String||this._sessionStateType==Number||this._sessionStateType==Boolean}this._verifier=verifier;if(defaultValue!==undefined){this.setSessionState(defaultValue);if(defaultValueTriggersCallbacks&&this.triggerCounter>weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT)Weave.callLater(this,org.apache.flex.utils.Language.closure(this._defaultValueTrigger,this,'_defaultValueTrigger'))}};
goog.inherits(weavejs.core.LinkableVariable,weavejs.core.CallbackCollection);weavejs.core.LinkableVariable.prototype._verifier=null;weavejs.core.LinkableVariable.prototype._sessionStateWasSet=false;weavejs.core.LinkableVariable.prototype._primitiveType=false;weavejs.core.LinkableVariable.prototype._sessionStateType=null;weavejs.core.LinkableVariable.prototype._sessionStateInternal=undefined;weavejs.core.LinkableVariable.prototype._sessionStateExternal=undefined;
weavejs.core.LinkableVariable.prototype._locked=false;weavejs.core.LinkableVariable.prototype._defaultValueTrigger=function(){if(!this.wasDisposed&&this.triggerCounter==weavejs.core.CallbackCollection.DEFAULT_TRIGGER_COUNT+1)this.triggerCallbacks()};weavejs.core.LinkableVariable.prototype.verifyValue=function(value){return this._verifier==null||this._verifier(value)};weavejs.core.LinkableVariable.prototype.getSessionStateType=function(){return this._sessionStateType};
weavejs.core.LinkableVariable.prototype.getSessionState=function(){return this._sessionStateExternal};
weavejs.core.LinkableVariable.prototype.setSessionState=function(value){if(this._locked)return;if(this._sessionStateType!=null)value=org.apache.flex.utils.Language.as(value,this._sessionStateType);if(this._verifier!=null&&!this._verifier(value))return;var wasCopied=false;var type=null;if(value!=null){type=typeof value;if(type=='object'&&value.constructor!=Object&&value.constructor!=Array){value=weavejs.util.JS.copyObject(value);wasCopied=true}}if(this._sessionStateWasSet&&this.sessionStateEquals(value))return;
if(type=='object'){if(!wasCopied)value=weavejs.util.JS.copyObject(value);weavejs.api.core.DynamicState.alterSessionStateToBypassDiff(value);this._sessionStateExternal=value;this._sessionStateInternal=weavejs.util.JS.copyObject(value)}else this._sessionStateExternal=this._sessionStateInternal=value;this._sessionStateWasSet=true;this.triggerCallbacks()};
weavejs.core.LinkableVariable.prototype.sessionStateEquals=function(otherSessionState){if(this._primitiveType)return this._sessionStateInternal==otherSessionState;return weavejs.util.StandardLib.compare(this._sessionStateInternal,otherSessionState,org.apache.flex.utils.Language.closure(this.objectCompare,this,'objectCompare'))==0};
weavejs.core.LinkableVariable.prototype.objectCompare=function(a,b){if(weavejs.api.core.DynamicState.isDynamicState(a,true)&&weavejs.api.core.DynamicState.isDynamicState(b,true)&&a[weavejs.api.core.DynamicState.CLASS_NAME]==b[weavejs.api.core.DynamicState.CLASS_NAME]&&a[weavejs.api.core.DynamicState.OBJECT_NAME]==b[weavejs.api.core.DynamicState.OBJECT_NAME])return weavejs.util.StandardLib.compare(a[weavejs.api.core.DynamicState.SESSION_STATE],b[weavejs.api.core.DynamicState.SESSION_STATE],org.apache.flex.utils.Language.closure(this.objectCompare,
this,'objectCompare'));return NaN};weavejs.core.LinkableVariable.prototype.detectChanges=function(){if(!this.sessionStateEquals(this._sessionStateExternal))this.triggerCallbacks()};weavejs.core.LinkableVariable.prototype.lock=function(){this._locked=true};weavejs.core.LinkableVariable.prototype.dispose=function(){weavejs.core.LinkableVariable.base(this,'dispose');this.setSessionState(null)};
Object.defineProperties(weavejs.core.LinkableVariable.prototype,{locked:{get:function(){return this._locked}},state:{get:function(){return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});weavejs.core.LinkableVariable.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableVariable',qName:'weavejs.core.LinkableVariable'}],interfaces:[weavejs.api.core.ILinkableVariable,weavejs.api.core.ICallbackCollection,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.core.LinkableString');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableString=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableString.base(this,'constructor',String,verifier,arguments.length?defaultValue:undefined,defaultValueTriggersCallbacks)};
goog.inherits(weavejs.core.LinkableString,weavejs.core.LinkableVariable);weavejs.core.LinkableString.prototype.setSessionState=function(value){if(value!=null)value=String(value);weavejs.core.LinkableString.base(this,'setSessionState',value)};Object.defineProperties(weavejs.core.LinkableString.prototype,{value:{get:function(){return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});
weavejs.core.LinkableString.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableString',qName:'weavejs.core.LinkableString'}]};goog.provide('weavejs.util.DebugUtils');weavejs.util.DebugUtils=function(){};weavejs.util.DebugUtils.map_id_obj=new weavejs.util.JS.Map;weavejs.util.DebugUtils.map_obj_id=new weavejs.util.JS.Map;weavejs.util.DebugUtils._nextId=0;weavejs.util.DebugUtils.debugTrace=function(args){args=Array.prototype.slice.call(arguments,0);for(var i=0;i<args.length;i++)args[i]=weavejs.util.DebugUtils.debugId(args[i]);weavejs.util.JS.log.apply(weavejs.util.JS,args)};
weavejs.util.DebugUtils.debugId=function(object){if(weavejs.util.JS.isPrimitive(object))return String(object);var idString=weavejs.util.DebugUtils.map_obj_id.get(object);if(!idString){var idNumber=weavejs.util.DebugUtils._nextId++;var className=Weave.className(object).split(':').pop();idString=className+'#'+idNumber;weavejs.util.DebugUtils.map_obj_id.set(object,idString);weavejs.util.DebugUtils.map_id_obj.set(idNumber,object);weavejs.util.DebugUtils.map_id_obj.set(idString,object)}return idString};
weavejs.util.DebugUtils.debugLookup=function(debugId){debugId=typeof debugId!=='undefined'?debugId:undefined;if(debugId===undefined)return weavejs.util.DebugUtils.getAllDebugIds();return weavejs.util.DebugUtils.map_id_obj.get(debugId)};weavejs.util.DebugUtils.getAllDebugIds=function(){var ids=new Array(weavejs.util.DebugUtils._nextId);for(var i=0;i<weavejs.util.DebugUtils._nextId;i++)ids[i]=weavejs.util.DebugUtils.map_obj_id.get(weavejs.util.DebugUtils.map_id_obj.get(i));return ids};
weavejs.util.DebugUtils.resetDebugIds=function(){weavejs.util.DebugUtils.map_id_obj=new weavejs.util.JS.Map;weavejs.util.DebugUtils.map_obj_id=new weavejs.util.JS.Map;weavejs.util.DebugUtils._nextId=0};weavejs.util.DebugUtils.map_target_callback=new weavejs.util.JS.WeakMap;
weavejs.util.DebugUtils.watch=function(target,callbackReturnsString){target=typeof target!=='undefined'?target:null;callbackReturnsString=typeof callbackReturnsString!=='undefined'?callbackReturnsString:null;var __localFn0__=function(){var str='';var path=Weave.findPath(Weave.getRoot(target),target)||[];if(path.length)str+=' '+JSON.stringify(path.pop());if(callbackReturnsString!=null)str+=': '+callbackReturnsString.call(target,target);weavejs.util.DebugUtils.debugTrace(target,str)};if(!target){weavejs.util.JS.log('Usage: watch(target, optional_callbackReturnsString)');
return}weavejs.util.DebugUtils.unwatch(target);var callback=__localFn0__;weavejs.util.DebugUtils.map_target_callback.set(target,callback);Weave.getCallbacks(target).addImmediateCallback(target,callback)};
weavejs.util.DebugUtils.watchState=function(target,indent){target=typeof target!=='undefined'?target:null;indent=typeof indent!=='undefined'?indent:null;var __localFn0__=function(object){return Weave.stringify(Weave.getState(object),null,indent)};if(!target){weavejs.util.JS.log('Usage: watchState(target, optional_indent)');return}weavejs.util.DebugUtils.watch(target,__localFn0__)};
weavejs.util.DebugUtils.unwatch=function(target){var callback=weavejs.util.DebugUtils.map_target_callback.get(target);weavejs.util.DebugUtils.map_target_callback['delete'](target);Weave.getCallbacks(target).removeCallback(target,callback)};
weavejs.util.DebugUtils.flattenSessionState=function(state,pathPrefix,output){pathPrefix=typeof pathPrefix!=='undefined'?pathPrefix:null;output=typeof output!=='undefined'?output:null;if(!pathPrefix)pathPrefix=[];if(!output)output=[];if(weavejs.api.core.DynamicState.isDynamicStateArray(state)){var names=[];var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var obj=foreachiter0_target[foreachiter0];if(weavejs.api.core.DynamicState.isDynamicState(obj)){var objectName=obj[weavejs.api.core.DynamicState.OBJECT_NAME];
var className=obj[weavejs.api.core.DynamicState.CLASS_NAME];var sessionState=obj[weavejs.api.core.DynamicState.SESSION_STATE];pathPrefix.push(objectName);if(className)output.push([pathPrefix.concat('class'),className]);weavejs.util.DebugUtils.flattenSessionState(sessionState,pathPrefix,output);pathPrefix.pop();if(objectName)names.push(objectName)}else names.push(obj)}if(names.length)output.push([pathPrefix.concat(),names])}else if(org.apache.flex.utils.Language.is(state,Array))output.push([pathPrefix.concat(),
state]);else if(typeof state==='object'&&state!==null)for(var key in state){pathPrefix.push(key);weavejs.util.DebugUtils.flattenSessionState(state[key],pathPrefix,output);pathPrefix.pop()}else output.push([pathPrefix.concat(),state]);return output};
weavejs.util.DebugUtils.traverseStatePath=function(state,path){try{outerLoop:for(var i in path){var property=path[i];if(weavejs.api.core.DynamicState.isDynamicStateArray(state))if(org.apache.flex.utils.Language.is(property,Number))state=state[property][weavejs.api.core.DynamicState.SESSION_STATE];else{var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){var obj=foreachiter1_target[foreachiter1];if(obj[weavejs.api.core.DynamicState.OBJECT_NAME]==property){state=obj[weavejs.api.core.DynamicState.SESSION_STATE];
continue outerLoop}}return undefined}else state=state[property]}return state}catch(e){return undefined}};weavejs.util.DebugUtils.isValidSymbolName=function(str){return true};
weavejs.util.DebugUtils.replaceUnknownObjectsInState=function(stateToModify,className){className=typeof className!=='undefined'?className:null;if(weavejs.api.core.DynamicState.isDynamicStateArray(stateToModify)){var foreachiter2_target=stateToModify;for(var foreachiter2 in foreachiter2_target){var obj=foreachiter2_target[foreachiter2];if(!weavejs.api.core.DynamicState.isDynamicState(obj))continue;className=obj[weavejs.api.core.DynamicState.CLASS_NAME];var classDef=Weave.getDefinition(className);if(!classDef)obj[weavejs.api.core.DynamicState.CLASS_NAME]=
Weave.className(classDef=weavejs.core.LinkableHashMap);if(org.apache.flex.utils.Language.is(classDef.prototype,weavejs.api.core.ILinkableCompositeObject))obj[weavejs.api.core.DynamicState.SESSION_STATE]=weavejs.util.DebugUtils.replaceUnknownObjectsInState(obj[weavejs.api.core.DynamicState.SESSION_STATE],className)}}else if(!weavejs.util.JS.isPrimitive(stateToModify)){var newState=[];if(className)newState.push(weavejs.api.core.DynamicState.create('class',Weave.className(weavejs.core.LinkableString),
className));for(var key in stateToModify){var value=stateToModify[key];var type=Weave.className(weavejs.util.JS.isPrimitive(value)?weavejs.core.LinkableVariable:weavejs.core.LinkableHashMap);newState.push(weavejs.api.core.DynamicState.create(key,type,weavejs.util.DebugUtils.replaceUnknownObjectsInState(value)))}stateToModify=newState}return stateToModify};weavejs.util.DebugUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'DebugUtils',qName:'weavejs.util.DebugUtils'}]};goog.provide('weavejs.core.ProgressIndicator');goog.require('weavejs.util.DebugUtils');goog.require('weavejs.api.core.IProgressIndicator');weavejs.core.ProgressIndicator=function(){this.map_task_progress=new weavejs.util.JS.Map;this.map_task_description=new weavejs.util.JS.Map;this.map_task_stackTrace=new weavejs.util.JS.Map};weavejs.core.ProgressIndicator.debug=false;
weavejs.core.ProgressIndicator.prototype.debugTasks=function(){var result=[];var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter0_target=tasks;for(var foreachiter0 in foreachiter0_target){var task=foreachiter0_target[foreachiter0];result.push(weavejs.util.DebugUtils.debugId(task))}return result};
weavejs.core.ProgressIndicator.prototype.getDescriptions=function(){var result=[];var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter1_target=tasks;for(var foreachiter1 in foreachiter1_target){var task=foreachiter1_target[foreachiter1];var desc=this.map_task_description.get(task)||'Unnamed task';if(desc)result.push(weavejs.util.DebugUtils.debugId(task)+' ('+weavejs.util.StandardLib.roundSignificant(100*this.map_task_progress.get(task),3)+'%) '+desc)}return result.sort()};
weavejs.core.ProgressIndicator.prototype.getTaskCount=function(){return this._taskCount};
weavejs.core.ProgressIndicator.prototype.addTask=function(taskToken,busyObject,description){busyObject=typeof busyObject!=='undefined'?busyObject:null;description=typeof description!=='undefined'?description:null;var cc=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this);cc.delayCallbacks();if(org.apache.flex.utils.Language.is(taskToken,weavejs.util.JS.Promise)&&this.map_task_progress.get(taskToken)===undefined){var remove=this.removeTask.bind(this,taskToken);taskToken.then(remove,remove)}this.map_task_description.set(taskToken,
description);this.updateTask(taskToken,NaN);if(busyObject)weavejs.WeaveAPI.SessionManager.assignBusyTask(taskToken,busyObject);cc.resumeCallbacks()};weavejs.core.ProgressIndicator.prototype.hasTask=function(taskToken){return this.map_task_progress.get(taskToken)!==undefined};
weavejs.core.ProgressIndicator.prototype.updateTask=function(taskToken,progress){if(this.map_task_progress.get(taskToken)===undefined){if(!isNaN(progress))throw new Error('updateTask() called, but task was not previously added with addTask()');if(weavejs.core.ProgressIndicator.debug)this.map_task_stackTrace.set(taskToken,new Error('Stack trace'));this._taskCount++;this._maxTaskCount++}if(this.map_task_progress.get(taskToken)!==progress){this.map_task_progress.set(taskToken,progress);weavejs.WeaveAPI.SessionManager.getCallbackCollection(this).triggerCallbacks()}};
weavejs.core.ProgressIndicator.prototype.removeTask=function(taskToken){if(this.map_task_progress['delete'](taskToken)===undefined)return;var stackTrace=this.map_task_stackTrace['delete'](taskToken);this.map_task_progress['delete'](taskToken);this.map_task_description['delete'](taskToken);this.map_task_stackTrace['delete'](taskToken);this._taskCount--;if(this._taskCount==1)this._maxTaskCount=this._taskCount;weavejs.WeaveAPI.SessionManager.unassignBusyTask(taskToken);weavejs.WeaveAPI.SessionManager.getCallbackCollection(this).triggerCallbacks()};
weavejs.core.ProgressIndicator.prototype.getNormalizedProgress=function(){var sum=0;var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter2_target=tasks;for(var foreachiter2 in foreachiter2_target){var task=foreachiter2_target[foreachiter2];var stackTrace=this.map_task_stackTrace.get(task);var progress=this.map_task_progress.get(task);if(isFinite(progress))sum+=progress}sum+=this._maxTaskCount-this._taskCount;return sum/this._maxTaskCount};
weavejs.core.ProgressIndicator.prototype._taskCount=0;weavejs.core.ProgressIndicator.prototype._maxTaskCount=0;weavejs.core.ProgressIndicator.prototype.map_task_progress;weavejs.core.ProgressIndicator.prototype.map_task_description;weavejs.core.ProgressIndicator.prototype.map_task_stackTrace;
weavejs.core.ProgressIndicator.prototype.test=function(){var tasks=weavejs.util.JS.mapKeys(this.map_task_progress);var foreachiter3_target=tasks;for(var foreachiter3 in foreachiter3_target){var task=foreachiter3_target[foreachiter3];var stackTrace=this.map_task_stackTrace.get(task);var description=this.map_task_description.get(task);weavejs.util.JS.log(weavejs.util.DebugUtils.debugId(task),description,stackTrace)}};
weavejs.core.ProgressIndicator.prototype.FLEXJS_CLASS_INFO={names:[{name:'ProgressIndicator',qName:'weavejs.core.ProgressIndicator'}],interfaces:[weavejs.api.core.IProgressIndicator]};goog.provide('weavejs.util.DebugTimer');weavejs.util.DebugTimer=function(){};weavejs.util.DebugTimer.debugTimes=[];weavejs.util.DebugTimer.begin=function(){weavejs.util.DebugTimer.debugTimes.push(weavejs.util.JS.now())};weavejs.util.DebugTimer.cancel=function(){weavejs.util.DebugTimer.debugTimes.pop()};
weavejs.util.DebugTimer.lap=function(debugString,debugStrings){debugStrings=Array.prototype.slice.call(arguments,1);debugStrings.unshift(debugString);var elapsedTime=weavejs.util.DebugTimer.end.apply(null,debugStrings);weavejs.util.DebugTimer.begin();return elapsedTime};
weavejs.util.DebugTimer.end=function(debugString,debugStrings){debugStrings=Array.prototype.slice.call(arguments,1);debugStrings.unshift(debugString);var elapsedTime=weavejs.util.JS.now()-weavejs.util.DebugTimer.debugTimes.pop();var elapsed='['+elapsedTime+' ms elapsed] ';var elapsedIndent=weavejs.util.StandardLib.lpad('| ',elapsed.length);var indent=weavejs.util.StandardLib.rpad('',weavejs.util.DebugTimer.debugTimes.length*2,'| ');var lines=debugStrings.join(' ').split('\n');for(var i=0;i<lines.length;i++)if(lines.length==
1)lines[i]=indent+',-'+elapsed+lines[i];else if(i==0)lines[i]=indent+',-'+elapsed+lines[i];else if(i>0&&i<lines.length-1)lines[i]=indent+'| '+elapsedIndent+lines[i];else lines[i]=indent+'|-'+elapsed+lines[i];org.apache.flex.utils.Language.trace(lines.join('\n'));if(elapsedTime>1E3)org.apache.flex.utils.Language.trace();return elapsedTime};weavejs.util.DebugTimer.prototype.FLEXJS_CLASS_INFO={names:[{name:'DebugTimer',qName:'weavejs.util.DebugTimer'}]};goog.provide('weavejs.core.Scheduler');goog.require('weavejs.util.DebugTimer');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.IScheduler');
weavejs.core.Scheduler=function(){this._frameCallbacks=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._currentFrameStartTime=weavejs.util.JS.now();this.frameTimes=[];this.map_task_stackTrace=new weavejs.util.JS.WeakMap;this.map_task_elapsedTime=new weavejs.util.JS.WeakMap;this.map_task_startTime=new weavejs.util.JS.WeakMap;this._priorityCallLaterQueues=[[],[],[],[]];this._activePriority=weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE+1;this._priorityAllocatedTimes=[Number.MAX_VALUE,300,
200,100];this.map_task_time=new weavejs.util.JS.WeakMap;this._frameCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._requestNextFrame,this,'_requestNextFrame'),true);this._frameCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._handleCallLater,this,'_handleCallLater'));this.initVisibilityHandler()};weavejs.core.Scheduler.debug_fps=false;weavejs.core.Scheduler.debug_async_time=false;weavejs.core.Scheduler.debug_async_stack=false;
weavejs.core.Scheduler.debug_async_stack_elapsed=false;weavejs.core.Scheduler.debug_delayTasks=false;weavejs.core.Scheduler.debug_callLater=false;weavejs.core.Scheduler.debug_visibility=false;weavejs.core.Scheduler.prototype._frameCallbacks;weavejs.core.Scheduler.prototype._nextAnimationFrame;
weavejs.core.Scheduler.prototype._requestNextFrame=function(){this._nextAnimationFrame=weavejs.util.JS.requestAnimationFrame(org.apache.flex.utils.Language.closure(this._frameCallbacks.triggerCallbacks,this._frameCallbacks,'triggerCallbacks'))};weavejs.core.Scheduler.prototype.dispose=function(){weavejs.util.JS.cancelAnimationFrame(this._nextAnimationFrame)};weavejs.core.Scheduler.prototype.averageFrameTime=0;weavejs.core.Scheduler.prototype._currentFrameStartTime;
weavejs.core.Scheduler.prototype._previousFrameElapsedTime=0;weavejs.core.Scheduler.prototype.frameTimes;weavejs.core.Scheduler.prototype.map_task_stackTrace;weavejs.core.Scheduler.prototype.map_task_elapsedTime;weavejs.core.Scheduler.prototype.map_task_startTime;weavejs.core.Scheduler.prototype._currentTaskStopTime=0;weavejs.core.Scheduler.prototype._priorityCallLaterQueues;weavejs.core.Scheduler.prototype._activePriority;weavejs.core.Scheduler.prototype._activePriorityElapsedTime=0;weavejs.core.Scheduler.prototype._priorityAllocatedTimes;
weavejs.core.Scheduler.prototype._deactivatedMaxComputationTimePerFrame=1E3;weavejs.core.Scheduler.prototype.getMaxComputationTimePerFrame=function(){return this.maxComputationTimePerFrame};weavejs.core.Scheduler.prototype.setMaxComputationTimePerFrame=function(value){this.maxComputationTimePerFrame=value};weavejs.core.Scheduler.prototype.getTaskPriorityTimeAllocation=function(priority){return org.apache.flex.utils.Language.uint(this._priorityAllocatedTimes[priority])};
weavejs.core.Scheduler.prototype.setTaskPriorityTimeAllocation=function(priority,milliseconds){this._priorityAllocatedTimes[priority]=Math.max(milliseconds,5)};weavejs.core.Scheduler.prototype.maxComputationTimePerFrame=100;weavejs.core.Scheduler.prototype.maxComputationTimePerFrame_noActivity=250;weavejs.core.Scheduler._time;weavejs.core.Scheduler._times=[];
weavejs.core.Scheduler.debugTime=function(str){var now=weavejs.util.JS.now();var dur=now-weavejs.core.Scheduler._time;if(dur>100)weavejs.core.Scheduler._times.push(dur+' '+str);else{var dots='...';var n=weavejs.core.Scheduler._times.length;if(n&&weavejs.core.Scheduler._times[n-1]!=dots)weavejs.core.Scheduler._times.push(dots)}weavejs.core.Scheduler._time=now;return dur};weavejs.core.Scheduler.resetDebugTime=function(){weavejs.core.Scheduler._times.length=0;weavejs.core.Scheduler._time=weavejs.util.JS.now()};
weavejs.core.Scheduler.prototype.HIDDEN;weavejs.core.Scheduler.prototype.VISIBILITY_CHANGE;weavejs.core.Scheduler.prototype.deactivated=true;weavejs.core.Scheduler.prototype.useDeactivatedFrameRate=false;
weavejs.core.Scheduler.prototype.initVisibilityHandler=function(){if(typeof weavejs.util.JS.global.document.hidden!=='undefined'){this.HIDDEN='hidden';this.VISIBILITY_CHANGE='visibilitychange'}else if(typeof weavejs.util.JS.global.document.mozHidden!=='undefined'){this.HIDDEN='mozHidden';this.VISIBILITY_CHANGE='mozvisibilitychange'}else if(typeof weavejs.util.JS.global.document.msHidden!=='undefined'){this.HIDDEN='msHidden';this.VISIBILITY_CHANGE='msvisibilitychange'}else if(typeof weavejs.util.JS.global.document.webkitHidden!==
'undefined'){this.HIDDEN='webkitHidden';this.VISIBILITY_CHANGE='webkitvisibilitychange'}if(typeof weavejs.util.JS.global.document.addEventListener!=='undefined'&&typeof weavejs.util.JS.global.document[this.HIDDEN]!=='undefined')weavejs.util.JS.global.document.addEventListener(this.VISIBILITY_CHANGE,org.apache.flex.utils.Language.closure(this.handleVisibilityChange,this,'handleVisibilityChange'),false)};
weavejs.core.Scheduler.prototype.handleVisibilityChange=function(){if(weavejs.util.JS.global.document[this.HIDDEN])this.deactivated=true;else this.deactivated=false;this.useDeactivatedFrameRate=false;if(weavejs.core.Scheduler.debug_visibility)weavejs.util.JS.log('visibility change; hidden \x3d',this.deactivated)};
weavejs.core.Scheduler.prototype._handleCallLater=function(){if(this.deactivated){var wasted=weavejs.util.JS.now()-this._currentFrameStartTime;if(weavejs.core.Scheduler.debug_fps)weavejs.util.JS.log('wasted',wasted);this.useDeactivatedFrameRate=wasted>100}var prevStartTime=this._currentFrameStartTime;this._currentFrameStartTime=weavejs.util.JS.now();this._previousFrameElapsedTime=this._currentFrameStartTime-prevStartTime;if(this.maxComputationTimePerFrame==0)this.maxComputationTimePerFrame=100;var maxComputationTime;
if(this.useDeactivatedFrameRate)maxComputationTime=this._deactivatedMaxComputationTimePerFrame;else maxComputationTime=this.maxComputationTimePerFrame;weavejs.core.Scheduler.resetDebugTime();if(weavejs.core.Scheduler.debug_fps){this.frameTimes.push(this.previousFrameElapsedTime);if(weavejs.util.StandardLib.sum(this.frameTimes)>=1E3){this.averageFrameTime=weavejs.util.StandardLib.mean(this.frameTimes);var fps=weavejs.util.StandardLib.roundSignificant(1E3/this.averageFrameTime,2);weavejs.util.JS.log(fps,
'fps; max computation time',maxComputationTime);this.frameTimes.length=0}}if(this._previousFrameElapsedTime>3E3)weavejs.util.JS.log('Previous frame took',this._previousFrameElapsedTime,'ms');var args;var context;var args2;var stackTrace;var now;var allStop=this._currentFrameStartTime+maxComputationTime;this._currentTaskStopTime=allStop;var queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE],Array);var countdown;for(countdown=queue.length;countdown>
0;countdown--){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.begin();now=weavejs.util.JS.now();if(now>allStop){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();return}args=queue.shift();stackTrace=this.map_task_stackTrace.get(args);context=args[0];if(!weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){args2=org.apache.flex.utils.Language.as(args[2],Array);if(args2!=null&&args2.length>0)org.apache.flex.utils.Language.as(args[1],Function).apply(context,
args2);else org.apache.flex.utils.Language.as(args[1],Function).apply(context)}if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.end(stackTrace)}var minPriority=weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE+1;var lastPriority=this._activePriority==minPriority?this._priorityCallLaterQueues.length-1:this._activePriority-1;var pStart=weavejs.util.JS.now();var pAlloc=org.apache.flex.utils.Language._int(this._priorityAllocatedTimes[this._activePriority]);if(this.useDeactivatedFrameRate)pAlloc=
pAlloc*this._deactivatedMaxComputationTimePerFrame/this.maxComputationTimePerFrame;var pStop=Math.min(allStop,pStart+pAlloc-this._activePriorityElapsedTime);queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[this._activePriority],Array);countdown=queue.length;while(true){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.begin();now=weavejs.util.JS.now();if(countdown==0||now>pStop){this._activePriorityElapsedTime+=now-pStart;if(now>allStop||this._activePriority==
lastPriority){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();if(weavejs.core.Scheduler.debug_fps)weavejs.util.JS.log('spent',this.currentFrameElapsedTime,'ms');return}var remaining=0;for(var i=minPriority;i<this._priorityCallLaterQueues.length;i++)remaining+=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[i],Array).length;if(remaining==0){if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();break}this._activePriority++;this._activePriorityElapsedTime=
0;if(this._activePriority==this._priorityCallLaterQueues.length)this._activePriority=minPriority;pStart=now;pAlloc=org.apache.flex.utils.Language._int(this._priorityAllocatedTimes[this._activePriority]);if(this.useDeactivatedFrameRate)pAlloc=pAlloc*this._deactivatedMaxComputationTimePerFrame/this.maxComputationTimePerFrame;pStop=Math.min(allStop,pStart+pAlloc);queue=org.apache.flex.utils.Language.as(this._priorityCallLaterQueues[this._activePriority],Array);countdown=queue.length;if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.cancel();
continue}countdown--;this._currentTaskStopTime=pStop;args=org.apache.flex.utils.Language.as(queue.shift(),Array);stackTrace=this.map_task_stackTrace.get(args);context=args[0];if(!weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){args2=org.apache.flex.utils.Language.as(args[2],Array);if(args2!=null&&args2.length>0)org.apache.flex.utils.Language.as(args[1],Function).apply(context,args2);else org.apache.flex.utils.Language.as(args[1],Function).apply(context)}if(weavejs.core.Scheduler.debug_callLater)weavejs.util.DebugTimer.end(stackTrace)}};
weavejs.core.Scheduler.prototype.callLater=function(relevantContext,method,parameters){parameters=typeof parameters!=='undefined'?parameters:null;this._callLaterPriority(weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE,relevantContext,method,parameters)};
weavejs.core.Scheduler.prototype._callLaterPriority=function(priority,relevantContext,method,parameters){parameters=typeof parameters!=='undefined'?parameters:null;if(method==null){weavejs.util.JS.error('StageUtils.callLater(): received null "method" parameter');return}var args=[relevantContext,method,parameters];this._priorityCallLaterQueues[priority].push(args);if(weavejs.core.Scheduler.debug_async_stack)this.map_task_stackTrace.set(args,new Error('This is the stack trace from when callLater() was called.'))};
weavejs.core.Scheduler.generateCompoundIterativeTask=function(iterativeTasks){iterativeTasks=Array.prototype.slice.call(arguments,0);var __localFn0__=function(stopTime){if(stopTime<0){iTask=0;return 0}if(iTask>=iterativeTasks.length)return 1;var i=iTask;var iterate=org.apache.flex.utils.Language.as(iterativeTasks[iTask],Function);var progress;if(iterate.length)progress=iterate.call(this,stopTime);else while(iTask==i&&(progress=iterate.call(this))<1&&weavejs.util.JS.now()<stopTime);if(iTask!=i)return 0;
var totalProgress=(iTask+progress)/iterativeTasks.length;if(progress==1)iTask++;return totalProgress};var iTask=0;return __localFn0__};weavejs.core.Scheduler.prototype.map_task_time;
weavejs.core.Scheduler.prototype.startTask=function(relevantContext,iterativeTask,priority,finalCallback,description){finalCallback=typeof finalCallback!=='undefined'?finalCallback:null;description=typeof description!=='undefined'?description:null;if(weavejs.WeaveAPI.ProgressIndicator.hasTask(iterativeTask))return;if(weavejs.core.Scheduler.debug_async_time){if(this.map_task_time.get(iterativeTask)){var value=this.map_task_time.get(iterativeTask);this.map_task_time['delete'](iterativeTask);weavejs.util.JS.log('interrupted',
weavejs.util.JS.now()-this.map_task_time.get(iterativeTask)[0],priority,this.map_task_time.get(iterativeTask)[1],value)}this.map_task_time.set(iterativeTask,[weavejs.util.JS.now(),new Error('Stack trace')])}if(priority>=this._priorityCallLaterQueues.length){weavejs.util.JS.error('Invalid priority value: '+priority);priority=weavejs.WeaveAPI.TASK_PRIORITY_NORMAL}if(weavejs.core.Scheduler.debug_async_stack){this.map_task_stackTrace.set(iterativeTask,[weavejs.util.DebugUtils.debugId(iterativeTask),new Error('Stack trace')]);
this.map_task_startTime.set(iterativeTask,weavejs.util.JS.now());this.map_task_elapsedTime.set(iterativeTask,0)}weavejs.WeaveAPI.ProgressIndicator.addTask(iterativeTask,org.apache.flex.utils.Language.as(relevantContext,weavejs.api.core.ILinkableObject),description);var useTimeParameter=iterativeTask.length>0;this._callLaterPriority(priority,null,org.apache.flex.utils.Language.closure(this._iterateTask,this,'_iterateTask'),[relevantContext,iterativeTask,priority,finalCallback,useTimeParameter])};
weavejs.core.Scheduler.prototype._iterateTask=function(context,task,priority,finalCallback,useTimeParameter){if(weavejs.WeaveAPI.SessionManager.objectWasDisposed(context)){if(weavejs.core.Scheduler.debug_async_time&&this.map_task_time.get(task)){var value=this.map_task_time.get(task);this.map_task_time['delete'](task);weavejs.util.JS.log('disposed',weavejs.util.JS.now()-this.map_task_time.get(task)[0],priority,this.map_task_time.get(task)[1],value)}weavejs.WeaveAPI.ProgressIndicator.removeTask(task);
return}var debug_time=weavejs.core.Scheduler.debug_async_stack?weavejs.util.JS.now():-1;var stackTrace=weavejs.core.Scheduler.debug_async_stack?this.map_task_stackTrace.get(task):null;var progress=undefined;var time;while((time=weavejs.util.JS.now())<=this._currentTaskStopTime){if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task(this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task(),Number);if(progress===null||isNaN(progress)||progress<0||progress>
1){weavejs.util.JS.error('Received unexpected result from iterative task ('+progress+').  Expecting a number between 0 and 1.  Task cancelled.');if(weavejs.core.Scheduler.debug_async_stack){weavejs.util.JS.log(stackTrace);if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task(this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task(),Number)}progress=1}if(weavejs.core.Scheduler.debug_async_stack&&this.currentFrameElapsedTime>3E3){weavejs.util.JS.log(weavejs.util.JS.now()-
time,stackTrace);if(useTimeParameter)progress=org.apache.flex.utils.Language.as(task(this._currentTaskStopTime),Number);else progress=org.apache.flex.utils.Language.as(task(),Number)}if(progress==1){if(weavejs.core.Scheduler.debug_async_time&&this.map_task_time.get(task)){var value2=this.map_task_time.get(task);this.map_task_time['delete'](task);weavejs.util.JS.log('completed',weavejs.util.JS.now()-this.map_task_time.get(task)[0],priority,this.map_task_time.get(task)[1],value2)}weavejs.WeaveAPI.ProgressIndicator.removeTask(task);
if(finalCallback!=null)finalCallback();return}if(useTimeParameter)break;if(weavejs.core.Scheduler.debug_delayTasks)break}if(weavejs.core.Scheduler.debug_async_stack&&weavejs.core.Scheduler.debug_async_stack_elapsed){var start=org.apache.flex.utils.Language._int(this.map_task_startTime.get(task));var elapsed=org.apache.flex.utils.Language._int(this.map_task_elapsedTime.get(task))+(time-debug_time);this.map_task_elapsedTime.set(task,elapsed);weavejs.util.JS.log(elapsed,'/',time-start,'\x3d',weavejs.util.StandardLib.roundSignificant(elapsed/
(time-start),2),stackTrace)}if(progress!==undefined)weavejs.WeaveAPI.ProgressIndicator.updateTask(task,progress);this._callLaterPriority(priority,null,org.apache.flex.utils.Language.closure(this._iterateTask,this,'_iterateTask'),weavejs.util.JS.toArray(arguments))};
Object.defineProperties(weavejs.core.Scheduler.prototype,{frameCallbacks:{get:function(){return this._frameCallbacks}},previousFrameElapsedTime:{get:function(){return this._previousFrameElapsedTime}},currentFrameElapsedTime:{get:function(){return weavejs.util.JS.now()-this._currentFrameStartTime}}});weavejs.core.Scheduler.prototype.FLEXJS_CLASS_INFO={names:[{name:'Scheduler',qName:'weavejs.core.Scheduler'}],interfaces:[weavejs.api.core.IScheduler,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.util.WeaveTreeItem');weavejs.util.WeaveTreeItem=function(params){params=typeof params!=='undefined'?params:null;this._recursion={};this._cache={};this._counter={};if(org.apache.flex.utils.Language.is(params,String)){this.label=org.apache.flex.utils.Language.as(params,String);this.data=params}else for(var key in params)this[key]=params[key]};
weavejs.util.WeaveTreeItem.createItems=function(WeaveTreeItem_implementation,items){var __localFn0__=function(item,i,a){return weavejs.util.WeaveTreeItem._mapItem(WeaveTreeItem_implementation||weavejs.util.WeaveTreeItem,item)};var n=0;while(n!=items.length){n=items.length;items=[].concat.apply(null,items)}return items.map(__localFn0__).filter(weavejs.util.WeaveTreeItem._filterItemsRemoveNulls)};
weavejs.util.WeaveTreeItem._mapItem=function(WeaveTreeItem_implementation,item){if(weavejs.util.JS.isClass(item))return new item;if(org.apache.flex.utils.Language.is(item,String)||item!=null&&Object(item).constructor==Object)return new WeaveTreeItem_implementation(item);return item};weavejs.util.WeaveTreeItem._filterItemsRemoveNulls=function(item,i,a){return item!=null};weavejs.util.WeaveTreeItem.prototype.childItemClass;weavejs.util.WeaveTreeItem.prototype._recursion;
weavejs.util.WeaveTreeItem.prototype._label='';weavejs.util.WeaveTreeItem.prototype._children=null;weavejs.util.WeaveTreeItem.prototype._dependency=null;weavejs.util.WeaveTreeItem.prototype._cache;weavejs.util.WeaveTreeItem.prototype._counter;
weavejs.util.WeaveTreeItem.prototype.getBoolean=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(this.isSimpleObject(param,'not'))param=!this.getBoolean(param['not'],'not_'+recursionName);if(this.isSimpleObject(param,'or'))param=this.getBoolean(param['or'],'or_'+recursionName);if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function));if(org.apache.flex.utils.Language.is(param,
weavejs.api.core.ILinkableVariable))param=org.apache.flex.utils.Language.as(param,weavejs.api.core.ILinkableVariable).getSessionState();if(org.apache.flex.utils.Language.is(param,Array)){var breakValue=recursionName.indexOf('or_')==0;var foreachiter0_target=param;for(var foreachiter0 in foreachiter0_target){param=foreachiter0_target[foreachiter0];param=this.getBoolean(param,'item_'+recursionName);if(param?breakValue:!breakValue)break}}param=param?true:false}finally{this._recursion[recursionName]=
false}return param};weavejs.util.WeaveTreeItem.prototype.isSimpleObject=function(object,singlePropertyName){var found=false;for(var key in object){if(found)return false;if(key!==singlePropertyName)return false;found=true}return found};
weavejs.util.WeaveTreeItem.prototype.getString=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function));else param=param||''}finally{this._recursion[recursionName]=false}return param};
weavejs.util.WeaveTreeItem.prototype.getObject=function(param,recursionName){if(!this._recursion[recursionName])try{this._recursion[recursionName]=true;if(org.apache.flex.utils.Language.is(param,Function))param=this.evalFunction(org.apache.flex.utils.Language.as(param,Function))}finally{this._recursion[recursionName]=false}return param};weavejs.util.WeaveTreeItem.prototype.evalFunction=function(func){try{return func.call(this,this)}catch(e){weavejs.util.JS.error(e)}};
weavejs.util.WeaveTreeItem.prototype.isCached=function(id){if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;return this._dependency&&this._counter[id]===Weave.getCallbacks(this._dependency).triggerCounter};
weavejs.util.WeaveTreeItem.prototype.cache=function(id,newValue){newValue=typeof newValue!=='undefined'?newValue:undefined;if(arguments.length==1)return this._cache[id];if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;if(this._dependency){this._counter[id]=Weave.getCallbacks(this._dependency).triggerCounter;this._cache[id]=newValue}return newValue};weavejs.util.WeaveTreeItem.prototype.data=null;
Object.defineProperties(weavejs.util.WeaveTreeItem.prototype,{label:{get:function(){var id='label';if(this.isCached(id))return this._cache[id];var str=this.getString(this._label,id);if(!str&&org.apache.flex.utils.Language.is(this.data,String))str=org.apache.flex.utils.Language.as(this.data,String);return this.cache(id,str)},set:function(value){this._counter['label']=undefined;this._label=value}},children:{get:function(){var id='children';var items;if(this.isCached(id))items=this._cache[id];else items=
org.apache.flex.utils.Language.as(this.getObject(this._children,id),Array);if(items){var iOut=0;for(var i=0;i<items.length;i++){var item=weavejs.util.WeaveTreeItem._mapItem(this.childItemClass,items[i]);if(item!=null)items[iOut++]=item}items.length=iOut}return this.cache(id,items)},set:function(value){this._counter['children']=undefined;this._children=value}},dependency:{get:function(){if(this._dependency&&Weave.wasDisposed(this._dependency))this.dependency=null;return this._dependency},set:function(value){if(this._dependency!=
value)this._counter={};this._dependency=value}}});weavejs.util.WeaveTreeItem.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTreeItem',qName:'weavejs.util.WeaveTreeItem'}]};goog.provide('weavejs.api.core.ILinkableDynamicObject');goog.require('weavejs.api.core.ILinkableCompositeObject');weavejs.api.core.ILinkableDynamicObject=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.internalObject;weavejs.api.core.ILinkableDynamicObject.prototype.requestGlobalObject=function(name,objectType,lockObject){};weavejs.api.core.ILinkableDynamicObject.prototype.requestLocalObject=function(objectType,lockObject){};
weavejs.api.core.ILinkableDynamicObject.prototype.requestLocalObjectCopy=function(objectToCopy){};weavejs.api.core.ILinkableDynamicObject.prototype.lock=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.removeObject=function(){};weavejs.api.core.ILinkableDynamicObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableDynamicObject',qName:'weavejs.api.core.ILinkableDynamicObject'}],interfaces:[weavejs.api.core.ILinkableCompositeObject]};goog.provide('weavejs.api.core.ILinkableObjectWithBusyStatus');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObjectWithBusyStatus=function(){};weavejs.api.core.ILinkableObjectWithBusyStatus.prototype.isBusy=function(){};weavejs.api.core.ILinkableObjectWithBusyStatus.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObjectWithBusyStatus',qName:'weavejs.api.core.ILinkableObjectWithBusyStatus'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.core.ILinkableObjectWithNewProperties');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.core.ILinkableObjectWithNewProperties=function(){};weavejs.api.core.ILinkableObjectWithNewProperties.prototype.handleMissingSessionStateProperties=function(newState){};weavejs.api.core.ILinkableObjectWithNewProperties.prototype.FLEXJS_CLASS_INFO={names:[{name:'ILinkableObjectWithNewProperties',qName:'weavejs.api.core.ILinkableObjectWithNewProperties'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.core.SessionManager');goog.require('weavejs.api.core.ILinkableObjectWithBusyStatus');goog.require('weavejs.api.core.ISessionManager');
weavejs.core.SessionManager=function(){this.d2d_object_name_tree=new weavejs.util.Dictionary2D(true,false,weavejs.util.WeaveTreeItem);this._treeCallbacks=new weavejs.core.CallbackCollection;this.map_obj_getSessionStateIgnore=new weavejs.util.JS.WeakMap;this.map_child_owner=new weavejs.util.JS.WeakMap;this.d2d_owner_child=new weavejs.util.Dictionary2D(true,false);this.d2d_child_parent=new weavejs.util.Dictionary2D(true,false);this.d2d_parent_child=new weavejs.util.Dictionary2D(true,false);this.map_task_stackTrace=
new weavejs.util.JS.Map;this.d2d_owner_task=new weavejs.util.Dictionary2D(false,false);this.d2d_task_owner=new weavejs.util.Dictionary2D(false,false);this.map_busyTraversal=new weavejs.util.JS.WeakMap;this.array_busyTraversal=[];this.map_unbusyTriggerCounts=new weavejs.util.JS.Map;this.map_unbusyStackTraces=new weavejs.util.JS.WeakMap;this.map_ILinkableObject_ICallbackCollection=new weavejs.util.JS.WeakMap;this.map_ICallbackCollection_ILinkableObject=new weavejs.util.JS.WeakMap;this.map_disposed=
new weavejs.util.JS.WeakMap;this.d2d_lhs_rhs_setState=new weavejs.util.Dictionary2D(true,true)};weavejs.core.SessionManager.prototype.debugBusyTasks=false;
weavejs.core.SessionManager.prototype.newLinkableChild=function(linkableParent,linkableChildType,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(!Weave.isLinkable(linkableParent))throw new Error('newLinkableChild(): Parent does not implement ILinkableObject.');if(!linkableChildType)throw new Error('newLinkableChild(): Child type parameter cannot be null.');if(!Weave.isLinkable(linkableChildType)){var childQName=
Weave.className(linkableChildType);if(Weave.getDefinition(childQName))throw new Error('newLinkableChild(): Child class does not implement ILinkableObject.');else throw new Error('newLinkableChild(): Child class inaccessible via qualified class name: '+childQName);}var linkableChild=org.apache.flex.utils.Language.as(new linkableChildType,weavejs.api.core.ILinkableObject);return this.registerLinkableChild(linkableParent,linkableChild,callback,useGroupedCallback)};
weavejs.core.SessionManager.prototype.registerLinkableChild=function(linkableParent,linkableChild,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(!Weave.isLinkable(linkableParent))throw new Error('registerLinkableChild(): Parent does not implement ILinkableObject.');if(!Weave.isLinkable(linkableChild))throw new Error('registerLinkableChild(): Child parameter cannot be null.');if(linkableParent==
linkableChild)throw new Error('registerLinkableChild(): Invalid attempt to register sessioned property having itself as its parent');if(callback!=null){var cc=this.getCallbackCollection(linkableChild);if(useGroupedCallback)cc.addGroupedCallback(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject),callback);else cc.addImmediateCallback(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject),callback)}this.registerDisposableChild(linkableParent,
linkableChild);if(this.d2d_child_parent.get(linkableChild,linkableParent)===undefined){this.d2d_child_parent.set(linkableChild,linkableParent,true);this.d2d_parent_child.set(linkableParent,linkableChild,true);var parentCC=this.getCallbackCollection(org.apache.flex.utils.Language.as(linkableParent,weavejs.api.core.ILinkableObject));this.getCallbackCollection(linkableChild).addImmediateCallback(linkableParent,org.apache.flex.utils.Language.closure(parentCC.triggerCallbacks,parentCC,'triggerCallbacks'),
false,true)}this._treeCallbacks.triggerCallbacks();return linkableChild};weavejs.core.SessionManager.prototype.newDisposableChild=function(disposableParent,disposableChildType){return this.registerDisposableChild(disposableParent,new disposableChildType)};
weavejs.core.SessionManager.prototype.registerDisposableChild=function(disposableParent,disposableChild){if(!disposableParent)throw new Error('registerDisposableChild(): Parent parameter cannot be null.');if(!disposableChild)throw new Error('registerDisposableChild(): Child parameter cannot be null.');if(!this.map_child_owner.has(disposableChild)){this.map_child_owner.set(disposableChild,disposableParent);this.d2d_owner_child.set(disposableParent,disposableChild,true)}return disposableChild};
weavejs.core.SessionManager.prototype.unregisterLinkableChild=function(parent,child){if(!parent)throw new Error('unregisterLinkableChild(): Parent parameter cannot be null.');if(!child)throw new Error('unregisterLinkableChild(): Child parameter cannot be null.');this.d2d_child_parent.remove(child,parent);this.d2d_parent_child.remove(parent,child);this.getCallbackCollection(child).removeCallback(parent,org.apache.flex.utils.Language.closure(this.getCallbackCollection(parent).triggerCallbacks,this.getCallbackCollection(parent),
'triggerCallbacks'));this._treeCallbacks.triggerCallbacks()};weavejs.core.SessionManager.prototype.excludeLinkableChildFromSessionState=function(parent,child){if(parent==null||child==null){weavejs.util.JS.error('SessionManager.excludeLinkableChildFromSessionState(): Parameters to this function cannot be null.');return}if(this.d2d_child_parent.get(child,parent))this.d2d_child_parent.set(child,parent,false);if(this.d2d_parent_child.get(parent,child))this.d2d_parent_child.set(parent,child,false)};
weavejs.core.SessionManager.prototype._getRegisteredChildren=function(parent){return this.d2d_parent_child.secondaryKeys(parent)};weavejs.core.SessionManager.prototype.getLinkableOwner=function(child){return org.apache.flex.utils.Language.as(this.map_child_owner.get(child),weavejs.api.core.ILinkableObject)};weavejs.core.SessionManager.prototype.d2d_object_name_tree;
weavejs.core.SessionManager.prototype.getSessionStateTree=function(root,objectName){var treeItem=this.d2d_object_name_tree.get(root,objectName);if(!treeItem.data){treeItem.data=root;treeItem.children=org.apache.flex.utils.Language.closure(this.getTreeItemChildren,this,'getTreeItemChildren');var lhm=org.apache.flex.utils.Language.as(root,weavejs.api.core.ILinkableHashMap);treeItem.dependency=lhm?lhm.childListCallbacks:root}if(objectName)treeItem.label=objectName;return treeItem};
weavejs.core.SessionManager.prototype.getTreeItemChildren=function(treeItem){var object=org.apache.flex.utils.Language.as(treeItem.data,weavejs.api.core.ILinkableObject);var children=[];var names;var childObject;var ignoreList=new weavejs.util.JS.WeakMap;var lhm=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap);if(lhm){names=lhm.getNames();var childObjects=lhm.getObjects();for(var i=0;i<names.length;i++){childObject=childObjects[i];if(this.d2d_child_parent.get(childObject,
lhm)){if(ignoreList.has(childObject))continue;ignoreList.set(childObject,true);children.push(this.getSessionStateTree(childObject,names[i]))}}}else{var ldo=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableDynamicObject);if(ldo)names=ldo.targetPath?null:[null];else if(object){names=this.getLinkablePropertyNames(object);var className=Weave.className(object)}var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(ldo)childObject=
ldo.internalObject;else childObject=object[name];if(!childObject)continue;if(this.d2d_child_parent.get(childObject,object)){if(ignoreList.has(childObject))continue;ignoreList.set(childObject,true);children.push(this.getSessionStateTree(childObject,name))}}}if(children.length==0)children=null;return children};weavejs.core.SessionManager.prototype.getTypedStateTree=function(root){return this.getTypedStateFromTreeNode(this.getSessionStateTree(root,null))};
weavejs.core.SessionManager.prototype.getTypedStateFromTreeNode=function(node,i,a){i=typeof i!=='undefined'?i:0;a=typeof a!=='undefined'?a:null;var state;var children=node.children;if(org.apache.flex.utils.Language.is(node.data,weavejs.api.core.ILinkableVariable)||!children)state=this.getSessionState(org.apache.flex.utils.Language.as(node.data,weavejs.api.core.ILinkableObject));else state=children.map(org.apache.flex.utils.Language.closure(this.getTypedStateFromTreeNode,this,'getTypedStateFromTreeNode'));
return weavejs.api.core.DynamicState.create(node.label,Weave.className(node.data),state)};weavejs.core.SessionManager.prototype.addTreeCallback=function(relevantContext,groupedCallback,triggerCallbackNow){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;this._treeCallbacks.addGroupedCallback(relevantContext,groupedCallback,triggerCallbackNow)};
weavejs.core.SessionManager.prototype.removeTreeCallback=function(relevantContext,groupedCallback){this._treeCallbacks.removeCallback(relevantContext,groupedCallback)};weavejs.core.SessionManager.prototype._treeCallbacks;weavejs.core.SessionManager.prototype.copySessionState=function(source,destination){var sessionState=this.getSessionState(source);this.setSessionState(destination,sessionState,true)};
weavejs.core.SessionManager.prototype.applyDiffForLinkableVariable=function(base,diff){if(base===null||diff===null||typeof base!=='object'||typeof diff!=='object'||org.apache.flex.utils.Language.is(diff,Array))return diff;for(var key in diff){var value=diff[key];if(value===undefined)delete base[key];else base[key]=this.applyDiffForLinkableVariable(base[key],value)}return base};
weavejs.core.SessionManager.prototype.setSessionState=function(linkableObject,newState,removeMissingDynamicObjects){removeMissingDynamicObjects=typeof removeMissingDynamicObjects!=='undefined'?removeMissingDynamicObjects:true;if(linkableObject==null){weavejs.util.JS.error('SessionManager.setSessionState(): linkableObject cannot be null.');return}var lv=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableVariable);if(lv){if(removeMissingDynamicObjects==false&&newState&&Weave.className(newState)==
'Object')lv.setSessionState(this.applyDiffForLinkableVariable(weavejs.util.JS.copyObject(lv.getSessionState()),newState));else lv.setSessionState(newState);return}var lco=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableCompositeObject);if(lco){if(org.apache.flex.utils.Language.is(newState,String))newState=[newState];if(newState!=null&&!org.apache.flex.utils.Language.is(newState,Array)){var array=[];for(var key in newState)array.push(weavejs.api.core.DynamicState.create(key,
null,newState[key]));newState=array}lco.setSessionState(org.apache.flex.utils.Language.as(newState,Array),removeMissingDynamicObjects);return}if(newState==null)return;var objectCC=this.getCallbackCollection(linkableObject);objectCC.delayCallbacks();var name;var propertyNames=this.getLinkablePropertyNames(linkableObject);var foundMissingProperty=false;var foreachiter1_target=propertyNames;for(var foreachiter1 in foreachiter1_target){name=foreachiter1_target[foreachiter1];if(!newState.hasOwnProperty(name)){if(removeMissingDynamicObjects&&
org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableObjectWithNewProperties))foundMissingProperty=true;continue}var property=null;try{property=org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('SessionManager.setSessionState(): Unable to get property "'+name+'" of class "'+Weave.className(linkableObject)+'"',e)}if(property==null)continue;if(!this.d2d_child_parent.get(property,linkableObject))continue;this.setSessionState(property,
newState[name],removeMissingDynamicObjects)}if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableObjectWithNewProperties))if(foundMissingProperty){var foreachiter2_target=propertyNames;for(var foreachiter2 in foreachiter2_target){name=foreachiter2_target[foreachiter2];if(!newState.hasOwnProperty(name)){org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableObjectWithNewProperties).handleMissingSessionStateProperties(newState);break}}}else for(name in newState){try{property=
org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('SessionManager.setSessionState(): Unable to get property "'+name+'" of class "'+Weave.className(linkableObject)+'"',e)}if(!property||!Weave.isLinkable(property)||!this.d2d_child_parent.get(property,linkableObject)){org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableObjectWithNewProperties).handleMissingSessionStateProperties(newState);break}}objectCC.resumeCallbacks()};
weavejs.core.SessionManager.prototype.map_obj_getSessionStateIgnore;
weavejs.core.SessionManager.prototype.getSessionState=function(linkableObject){if(linkableObject==null){weavejs.util.JS.error('SessionManager.getSessionState(): linkableObject cannot be null.');return null}var result=null;if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableVariable))result=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableVariable).getSessionState();else if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ILinkableCompositeObject))result=
org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableCompositeObject).getSessionState();else{var propertyNames=weavejs.util.JS.getPropertyNames(linkableObject,true);var resultNames=[];var resultProperties=[];var property=null;var i;var foreachiter3_target=propertyNames;for(var foreachiter3 in foreachiter3_target){var name=foreachiter3_target[foreachiter3];try{property=null;property=org.apache.flex.utils.Language.as(linkableObject[name],weavejs.api.core.ILinkableObject)}catch(e){weavejs.util.JS.error('Unable to get property "'+
name+'" of class "'+Weave.className(linkableObject)+'"')}if(property!=null&&!this.map_obj_getSessionStateIgnore.get(property)){if(!this.d2d_child_parent.get(property,linkableObject))continue;this.map_obj_getSessionStateIgnore.set(property,true);resultNames.push(name);resultProperties.push(property)}else;}if(resultNames.length>0){result=new Object;for(i=0;i<resultNames.length;i++){var value=this.getSessionState(resultProperties[i]);property=org.apache.flex.utils.Language.as(resultProperties[i],weavejs.api.core.ILinkableObject);
if(value==null&&!org.apache.flex.utils.Language.is(property,weavejs.api.core.ILinkableVariable)&&!org.apache.flex.utils.Language.is(property,weavejs.api.core.ILinkableCompositeObject))continue;result[resultNames[i]]=value}}}this.map_obj_getSessionStateIgnore.set(linkableObject,undefined);return result};
weavejs.core.SessionManager.prototype.getLinkablePropertyNames=function(linkableObject,filtered){filtered=typeof filtered!=='undefined'?filtered:false;if(linkableObject==null){weavejs.util.JS.error('SessionManager.getLinkablePropertyNames(): linkableObject cannot be null.');return[]}var name;var propertyNames=weavejs.util.JS.getPropertyNames(linkableObject,true);var linkableNames=[];var foreachiter4_target=propertyNames;for(var foreachiter4 in foreachiter4_target){name=foreachiter4_target[foreachiter4];
var property=linkableObject[name];if(Weave.isLinkable(property))if(!filtered||this.d2d_child_parent.get(property,linkableObject))linkableNames.push(name)}return linkableNames};weavejs.core.SessionManager.prototype.map_child_owner;weavejs.core.SessionManager.prototype.d2d_owner_child;weavejs.core.SessionManager.prototype.d2d_child_parent;weavejs.core.SessionManager.prototype.d2d_parent_child;
weavejs.core.SessionManager.prototype.getLinkableDescendants=function(root,filter){filter=typeof filter!=='undefined'?filter:null;var result=[];if(root)this.internalGetDescendants(result,root,filter,new weavejs.util.JS.WeakMap,Number.MAX_VALUE);if(result.length>0&&result[0]==root)result.shift();return result};
weavejs.core.SessionManager.prototype.internalGetDescendants=function(output,root,filter,ignoreList,depth){if(root==null||ignoreList.has(root))return;ignoreList.set(root,true);if(filter==null||org.apache.flex.utils.Language.is(root,filter))output.push(root);if(--depth<=0)return;var children=this.d2d_parent_child.secondaryKeys(root);var foreachiter5_target=children;for(var foreachiter5 in foreachiter5_target){var child=foreachiter5_target[foreachiter5];this.internalGetDescendants(output,child,filter,
ignoreList,depth)}};weavejs.core.SessionManager.prototype.map_task_stackTrace;weavejs.core.SessionManager.prototype.d2d_owner_task;weavejs.core.SessionManager.prototype.d2d_task_owner;weavejs.core.SessionManager.prototype.map_busyTraversal;weavejs.core.SessionManager.prototype.array_busyTraversal;weavejs.core.SessionManager.prototype.map_unbusyTriggerCounts;weavejs.core.SessionManager.prototype.map_unbusyStackTraces;
weavejs.core.SessionManager.prototype.disposeBusyTaskPointers=function(disposedObject){this.d2d_owner_task.removeAllPrimary(disposedObject);this.d2d_task_owner.removeAllSecondary(disposedObject)};
weavejs.core.SessionManager.prototype.assignBusyTask=function(taskToken,busyObject){if(this.debugBusyTasks)this.map_task_stackTrace.set(taskToken,new Error('Stack trace when task was last assigned'));if(this.d2d_task_owner.get(taskToken,busyObject))return;if(org.apache.flex.utils.Language.is(taskToken,weavejs.util.JS.Promise)&&!weavejs.WeaveAPI.ProgressIndicator.hasTask(taskToken)){var unassign=this.unassignBusyTask.bind(this,taskToken);taskToken.then(unassign,unassign)}this.d2d_owner_task.set(busyObject,
taskToken,true);this.d2d_task_owner.set(taskToken,busyObject,true)};
weavejs.core.SessionManager.prototype.unassignBusyTask=function(taskToken){if(weavejs.WeaveAPI.ProgressIndicator.hasTask(taskToken)){weavejs.WeaveAPI.ProgressIndicator.removeTask(taskToken);return}var owners=this.d2d_task_owner.secondaryKeys(taskToken);this.d2d_task_owner.removeAllPrimary(taskToken);var foreachiter6_target=owners;for(var foreachiter6 in foreachiter6_target){var owner=foreachiter6_target[foreachiter6];this.d2d_owner_task.remove(owner,taskToken);var map_task=this.d2d_owner_task.map.get(owner);
if(map_task&&map_task.size)continue;this.map_unbusyTriggerCounts.set(owner,this.getCallbackCollection(owner).triggerCounter);weavejs.WeaveAPI.Scheduler.startTask(null,org.apache.flex.utils.Language.closure(this.unbusyTrigger,this,'unbusyTrigger'),weavejs.WeaveAPI.TASK_PRIORITY_IMMEDIATE);if(this.debugBusyTasks){var stackTrace=new Error('Stack trace when last task was unassigned');this.map_unbusyStackTraces.set(owner,{assigned:this.map_task_stackTrace.get(taskToken),unassigned:stackTrace,token:taskToken})}}};
weavejs.core.SessionManager.prototype.unbusyTrigger=function(stopTime){while(this.map_unbusyTriggerCounts.size){if(weavejs.util.JS.now()>stopTime)return 0;var entries=weavejs.util.JS.mapEntries(this.map_unbusyTriggerCounts);var foreachiter7_target=entries;for(var foreachiter7 in foreachiter7_target){var owner_triggerCount=foreachiter7_target[foreachiter7];var owner=owner_triggerCount[0];var triggerCount=owner_triggerCount[1];this.map_unbusyTriggerCounts['delete'](owner);var cc=this.getCallbackCollection(owner);
if(org.apache.flex.utils.Language.is(cc,weavejs.core.CallbackCollection)?org.apache.flex.utils.Language.as(cc,weavejs.core.CallbackCollection).wasDisposed:this.objectWasDisposed(owner))continue;if(cc.triggerCounter!=triggerCount)continue;if(this.linkableObjectIsBusy(owner))continue;if(this.debugBusyTasks){var stackTraces=this.map_unbusyStackTraces.get(owner);weavejs.util.JS.log('Triggering callbacks because they have not triggered since owner has becoming unbusy:',owner);weavejs.util.JS.log(stackTraces.assigned);
weavejs.util.JS.log(stackTraces.unassigned)}cc.triggerCallbacks()}}return 1};
weavejs.core.SessionManager.prototype.linkableObjectIsBusy=function(linkableObject){if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ICallbackCollection))linkableObject=this.getLinkableObjectFromCallbackCollection(org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ICallbackCollection));if(!linkableObject)return false;var busy=false;this.array_busyTraversal[this.array_busyTraversal.length]=linkableObject;this.map_busyTraversal.set(linkableObject,true);outerLoop:for(var i=
0;i<this.array_busyTraversal.length;i++){linkableObject=this.array_busyTraversal[i];var ilowbs=org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ILinkableObjectWithBusyStatus);if(ilowbs){if(ilowbs.isBusy()){busy=true;break}continue}var tasks=this.d2d_owner_task.secondaryKeys(linkableObject);var foreachiter8_target=tasks;for(var foreachiter8 in foreachiter8_target){var task=foreachiter8_target[foreachiter8];if(this.debugBusyTasks)var stackTrace=this.map_task_stackTrace.get(task);busy=
true;break outerLoop}var children=this.d2d_parent_child.secondaryKeys(linkableObject);var foreachiter9_target=children;for(var foreachiter9 in foreachiter9_target){var child=foreachiter9_target[foreachiter9];if(!this.map_busyTraversal.get(child)){this.array_busyTraversal[this.array_busyTraversal.length]=child;this.map_busyTraversal.set(child,true)}}}var foreachiter10_target=this.array_busyTraversal;for(var foreachiter10 in foreachiter10_target){linkableObject=foreachiter10_target[foreachiter10];this.map_busyTraversal.set(linkableObject,
false)}this.array_busyTraversal.length=0;return busy};weavejs.core.SessionManager.prototype.map_ILinkableObject_ICallbackCollection;weavejs.core.SessionManager.prototype.map_ICallbackCollection_ILinkableObject;
weavejs.core.SessionManager.prototype.getCallbackCollection=function(linkableObject){if(linkableObject==null)return null;if(org.apache.flex.utils.Language.is(linkableObject,weavejs.api.core.ICallbackCollection))return org.apache.flex.utils.Language.as(linkableObject,weavejs.api.core.ICallbackCollection);var objectCC=this.map_ILinkableObject_ICallbackCollection.get(linkableObject);if(objectCC==null){objectCC=this.registerDisposableChild(linkableObject,new weavejs.core.CallbackCollection);if(weavejs.core.CallbackCollection.debug)org.apache.flex.utils.Language.as(objectCC,
weavejs.core.CallbackCollection)._linkableObject=linkableObject;this.map_ILinkableObject_ICallbackCollection.set(linkableObject,objectCC);this.map_ICallbackCollection_ILinkableObject.set(objectCC,linkableObject)}return objectCC};weavejs.core.SessionManager.prototype.getLinkableObjectFromCallbackCollection=function(callbackCollection){return this.map_ICallbackCollection_ILinkableObject.get(callbackCollection)||callbackCollection};
weavejs.core.SessionManager.prototype.objectWasDisposed=function(object){if(object==null)return false;if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableObject)){var cc=org.apache.flex.utils.Language.as(this.getCallbackCollection(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject)),weavejs.core.CallbackCollection);if(cc)return cc.wasDisposed}return this.map_disposed.has(object)};weavejs.core.SessionManager.prototype.map_disposed;
weavejs.core.SessionManager.DISPOSE='dispose';
weavejs.core.SessionManager.prototype.disposeObject=function(object){var self=this;var __localFn0__=function(){self.debugDisposedObject(linkableObject,error)};if(object!=null&&!this.map_disposed.get(object)){this.map_disposed.set(object,true);this.disposeBusyTaskPointers(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject));try{if(org.apache.flex.utils.Language.is(object,weavejs.api.core.IDisposableObject))org.apache.flex.utils.Language.as(object,weavejs.api.core.IDisposableObject).dispose();
else if(typeof object[weavejs.core.SessionManager.DISPOSE]==='function')object[weavejs.core.SessionManager.DISPOSE]()}catch(e){weavejs.util.JS.error(e)}var linkableObject=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableObject);if(linkableObject){var objectCC=this.getCallbackCollection(linkableObject);if(objectCC!=linkableObject)this.disposeObject(objectCC)}var parents=this.d2d_child_parent.secondaryKeys(object);for(var parent in parents)this.d2d_parent_child.remove(parent,object);
this.d2d_child_parent.removeAllPrimary(object);var owner=this.map_child_owner.get(object);if(owner!=null){this.d2d_owner_child.remove(owner,object);this.map_child_owner['delete'](object)}var children=this.d2d_owner_child.secondaryKeys(object);this.d2d_owner_child.removeAllPrimary(object);this.d2d_parent_child.removeAllPrimary(object);var foreachiter11_target=children;for(var foreachiter11 in foreachiter11_target){var child=foreachiter11_target[foreachiter11];this.disposeObject(child)}if(weavejs.core.CallbackCollection.debug&&
linkableObject){var error=new Error('This is the stack trace from when the object was previously disposed.');objectCC.addImmediateCallback(null,__localFn0__)}this._treeCallbacks.triggerCallbacks()}};
weavejs.core.SessionManager.prototype.debugDisposedObject=function(disposedObject,disposedError){var obj;var ownerPath=[];do{obj=this.getLinkableOwner(obj);if(obj)ownerPath.unshift(obj)}while(obj);var parents=this.d2d_child_parent.secondaryKeys(disposedObject);var children=this.d2d_parent_child.secondaryKeys(disposedObject);var sessionState=this.getSessionState(disposedObject);var msg='WARNING: An object triggered callbacks after previously being disposed.';if(org.apache.flex.utils.Language.is(disposedObject,
weavejs.api.core.ILinkableVariable))msg+=' (value \x3d '+org.apache.flex.utils.Language.as(disposedObject,weavejs.api.core.ILinkableVariable).getSessionState()+')';weavejs.util.JS.error(disposedError);weavejs.util.JS.error(msg,disposedObject)};
weavejs.core.SessionManager.prototype._getPaths=function(root,descendant){var results=[];var parents=this.d2d_child_parent.secondaryKeys(descendant);for(var parent in parents){var name=this._getChildPropertyName(org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableObject),descendant);if(name!=null){var result=this._getPaths(root,org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableObject));if(result!=null){result.push(name);results.push(result)}}}if(results.length==0)return root==
null?results:null;return results};weavejs.core.SessionManager.prototype._getChildPropertyName=function(parent,child){if(org.apache.flex.utils.Language.is(parent,weavejs.api.core.ILinkableHashMap))return org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap).getName(child);var names=this.getLinkablePropertyNames(parent);var foreachiter12_target=names;for(var foreachiter12 in foreachiter12_target){var name=foreachiter12_target[foreachiter12];if(parent[name]==child)return name}return null};
weavejs.core.SessionManager.prototype.getPath=function(root,descendant){if(!descendant)return null;var tree=this.getSessionStateTree(root,null);var path=this._getPath(tree,descendant);return path};
weavejs.core.SessionManager.prototype._getPath=function(tree,descendant){if(tree.data==descendant)return[];var children=tree.children;var foreachiter13_target=children;for(var foreachiter13 in foreachiter13_target){var child=foreachiter13_target[foreachiter13];var path=this._getPath(child,descendant);if(path){path.unshift(child.label);return path}}return null};
weavejs.core.SessionManager.prototype.getObject=function(root,path){var object=root;var foreachiter14_target=path;for(var foreachiter14 in foreachiter14_target){var propertyName=foreachiter14_target[foreachiter14];if(object==null||this.map_disposed.get(object))return null;if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap))if(org.apache.flex.utils.Language.is(propertyName,Number))object=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap).getObjects()[propertyName];
else object=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap).getObject(String(propertyName));else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableDynamicObject))object=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableDynamicObject).internalObject;else{if(this.getLinkablePropertyNames(object).indexOf(propertyName)<0)return null;object=org.apache.flex.utils.Language.as(object[propertyName],weavejs.api.core.ILinkableObject)}}return this.map_disposed.get(object)?
null:object};weavejs.core.SessionManager.prototype.d2d_lhs_rhs_setState;
weavejs.core.SessionManager.prototype.linkSessionState=function(primary,secondary){var self=this;var __localFn0__=function(){self.setSessionState(primary,self.getSessionState(secondary),true)};var __localFn1__=function(){self.setSessionState(secondary,self.getSessionState(primary),true)};if(primary==null||secondary==null){weavejs.util.JS.error('SessionManager.linkSessionState(): Parameters to this function cannot be null.');return}if(primary==secondary){weavejs.util.JS.error('Warning! Attempt to link session state of an object with itself');
return}if(org.apache.flex.utils.Language.is(this.d2d_lhs_rhs_setState.get(primary,secondary),Function))return;if(weavejs.core.CallbackCollection.debug)var stackTrace=new Error;var setPrimary=__localFn0__;var setSecondary=__localFn1__;this.d2d_lhs_rhs_setState.set(primary,secondary,setPrimary);this.d2d_lhs_rhs_setState.set(secondary,primary,setSecondary);this.getCallbackCollection(secondary).addImmediateCallback(primary,setPrimary);this.getCallbackCollection(primary).addImmediateCallback(secondary,
setSecondary,true)};
weavejs.core.SessionManager.prototype.unlinkSessionState=function(first,second){if(first==null||second==null){weavejs.util.JS.error('SessionManager.unlinkSessionState(): Parameters to this function cannot be null.');return}var setFirst=org.apache.flex.utils.Language.as(this.d2d_lhs_rhs_setState.remove(first,second),Function);var setSecond=org.apache.flex.utils.Language.as(this.d2d_lhs_rhs_setState.remove(second,first),Function);this.getCallbackCollection(second).removeCallback(first,setFirst);this.getCallbackCollection(first).removeCallback(second,
setSecond)};weavejs.core.SessionManager.DIFF_DELETE='delete';
weavejs.core.SessionManager.prototype.computeDiff=function(oldState,newState){var type=typeof oldState;var diffValue;if(typeof newState!=type)return weavejs.util.JS.copyObject(newState);if(type=='xml')throw new Error('XML is not supported as a primitive session state type.');else if(type=='number'){if(isNaN(org.apache.flex.utils.Language.as(oldState,Number))&&isNaN(org.apache.flex.utils.Language.as(newState,Number)))return undefined;if(oldState!=newState)return newState;return undefined}else if(oldState===
null||newState===null||type!='object'){if(oldState!==newState)return weavejs.util.JS.copyObject(newState);return undefined}else if(org.apache.flex.utils.Language.is(oldState,Array)&&org.apache.flex.utils.Language.is(newState,Array)){if(!weavejs.api.core.DynamicState.isDynamicStateArray(oldState)&&!weavejs.api.core.DynamicState.isDynamicStateArray(newState)){if(weavejs.util.StandardLib.compare(oldState,newState)==0)return undefined;return weavejs.util.JS.copyObject(newState)}var i;var typedState;var changeDetected=
false;var oldLookup={};var objectName;var className;var sessionState;for(i=0;i<oldState.length;i++){typedState=oldState[i];objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];oldLookup[objectName||'']=typedState}if(oldState.length!=newState.length)changeDetected=true;var result=[];for(i=0;i<newState.length;i++){typedState=newState[i];objectName=typedState[weavejs.api.core.DynamicState.OBJECT_NAME];className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];sessionState=typedState[weavejs.api.core.DynamicState.SESSION_STATE];
var oldTypedState=oldLookup[objectName||''];delete oldLookup[objectName||''];if(oldTypedState!=null&&oldTypedState[weavejs.api.core.DynamicState.CLASS_NAME]==className){className=null;diffValue=this.computeDiff(oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE],sessionState);if(diffValue===undefined){result.push(objectName);if(!changeDetected&&oldState[i][weavejs.api.core.DynamicState.OBJECT_NAME]!=objectName)changeDetected=true;continue}sessionState=diffValue}else sessionState=weavejs.util.JS.copyObject(sessionState);
result.push(weavejs.api.core.DynamicState.create(objectName||null,className,sessionState));changeDetected=true}for(objectName in oldLookup){result.push(weavejs.api.core.DynamicState.create(objectName||null,weavejs.core.SessionManager.DIFF_DELETE));changeDetected=true}if(changeDetected)return result;return undefined}else{var diff=undefined;for(var oldName in oldState){diffValue=this.computeDiff(oldState[oldName],newState[oldName]);if(diffValue!==undefined){if(!diff)diff={};if(newState.hasOwnProperty(oldName))diff[oldName]=
diffValue;else diff[oldName]=undefined}}for(var newName in newState)if(oldState[newName]===undefined){if(!diff)diff={};diff[newName]=weavejs.util.JS.copyObject(newState[newName])}return diff}};
weavejs.core.SessionManager.prototype.combineDiff=function(baseDiff,diffToAdd){var baseType=typeof baseDiff;var diffType=typeof diffToAdd;if(baseDiff==null||diffToAdd==null||baseType!=diffType||baseType!='object')baseDiff=weavejs.util.JS.copyObject(diffToAdd);else if(org.apache.flex.utils.Language.is(baseDiff,Array)&&org.apache.flex.utils.Language.is(diffToAdd,Array)){var i;if(weavejs.api.core.DynamicState.isDynamicStateArray(baseDiff)||weavejs.api.core.DynamicState.isDynamicStateArray(diffToAdd)){var typedState;
var objectName;var baseLookup={};for(i=0;i<baseDiff.length;i++){typedState=baseDiff[i];if(org.apache.flex.utils.Language.is(typedState,String)||typedState==null)objectName=org.apache.flex.utils.Language.as(typedState,String);else objectName=org.apache.flex.utils.Language.as(typedState[weavejs.api.core.DynamicState.OBJECT_NAME],String);baseLookup[objectName]=typedState;baseDiff[i]=objectName}for(i=0;i<diffToAdd.length;i++){typedState=diffToAdd[i];if(org.apache.flex.utils.Language.is(typedState,String)||
typedState==null)objectName=org.apache.flex.utils.Language.as(typedState,String);else objectName=org.apache.flex.utils.Language.as(typedState[weavejs.api.core.DynamicState.OBJECT_NAME],String);if(baseLookup.hasOwnProperty(objectName)){for(var j=org.apache.flex.utils.Language.as(baseDiff,Array).indexOf(objectName);j<baseDiff.length-1;j++)baseDiff[j]=baseDiff[j+1];baseDiff[baseDiff.length-1]=objectName}else baseDiff.push(objectName);var oldTypedState=baseLookup[objectName];if(org.apache.flex.utils.Language.is(oldTypedState,
String)||oldTypedState==null)baseLookup[objectName]=weavejs.util.JS.copyObject(typedState);else if(!(org.apache.flex.utils.Language.is(typedState,String)||typedState==null)){var className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(className&&className!=oldTypedState[weavejs.api.core.DynamicState.CLASS_NAME])baseLookup[objectName]=weavejs.util.JS.copyObject(typedState);else oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE]=this.combineDiff(oldTypedState[weavejs.api.core.DynamicState.SESSION_STATE],
typedState[weavejs.api.core.DynamicState.SESSION_STATE])}}for(i=0;i<baseDiff.length;i++)baseDiff[i]=baseLookup[baseDiff[i]]}else{i=baseDiff.length=diffToAdd.length;while(i--){var value=diffToAdd[i];if(value===null||typeof value!='object')baseDiff[i]=value;else baseDiff[i]=this.combineDiff(baseDiff[i],value)}}}else for(var newName in diffToAdd)baseDiff[newName]=this.combineDiff(baseDiff[newName],diffToAdd[newName]);return baseDiff};
weavejs.core.SessionManager.prototype.testDiff=function(){var states=[[{objectName:'a',className:'aClass',sessionState:'aVal'},{objectName:'b',className:'bClass',sessionState:'bVal1'}],[{objectName:'b',className:'bClass',sessionState:'bVal2'},{objectName:'a',className:'aClass',sessionState:'aVal'}],[{objectName:'a',className:'aNewClass',sessionState:'aVal'},{objectName:'b',className:'bClass',sessionState:null}],[{objectName:'b',className:'bClass',sessionState:null}]];var diffs=[];var combined=[];
var baseDiff=null;for(var i=1;i<states.length;i++){var diff=this.computeDiff(states[i-1],states[i]);diffs.push(diff);baseDiff=this.combineDiff(baseDiff,diff);combined.push(weavejs.util.JS.copyObject(baseDiff))}weavejs.util.JS.log('diffs',diffs);weavejs.util.JS.log('combined',combined)};weavejs.core.SessionManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'SessionManager',qName:'weavejs.core.SessionManager'}],interfaces:[weavejs.api.core.ISessionManager]};goog.provide('weavejs.core.LinkableBoolean');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableBoolean=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableBoolean.base(this,'constructor',Boolean,verifier,defaultValue,defaultValueTriggersCallbacks)};goog.inherits(weavejs.core.LinkableBoolean,weavejs.core.LinkableVariable);
weavejs.core.LinkableBoolean.prototype.setSessionState=function(value){if(org.apache.flex.utils.Language.is(value,String))value=value==='true';weavejs.core.LinkableBoolean.base(this,'setSessionState',value?true:false)};Object.defineProperties(weavejs.core.LinkableBoolean.prototype,{value:{get:function(){return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});weavejs.core.LinkableBoolean.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableBoolean',qName:'weavejs.core.LinkableBoolean'}]};goog.provide('weavejs.core.LogEntry');weavejs.core.LogEntry=function(id,forward,backward,triggerDelay,diffDuration){this.id=id;this.forward=forward;this.backward=backward;this.triggerDelay=triggerDelay;this.diffDuration=diffDuration};weavejs.core.LogEntry.prototype.id;weavejs.core.LogEntry.prototype.forward;weavejs.core.LogEntry.prototype.backward;weavejs.core.LogEntry.prototype.triggerDelay;weavejs.core.LogEntry.prototype.diffDuration;
weavejs.core.LogEntry.convertGenericObjectsToLogEntries=function(array,defaultTriggerDelay){for(var i=0;i<array.length;i++){var o=array[i];if(!org.apache.flex.utils.Language.is(o,weavejs.core.LogEntry))array[i]=new weavejs.core.LogEntry(o.id,o.forward,o.backward,o.triggerDelay||defaultTriggerDelay,o.diffDuration)}return array};weavejs.core.LogEntry.prototype.FLEXJS_CLASS_INFO={names:[{name:'LogEntry',qName:'weavejs.core.LogEntry'}]};goog.provide('weavejs.core.SessionStateLog');goog.require('weavejs.core.LinkableBoolean');goog.require('weavejs.core.LogEntry');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.SessionStateLog=function(subject,syncDelay){syncDelay=typeof syncDelay!=='undefined'?syncDelay:0;this.enableLogging=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this.synchronizeNow,this,'synchronizeNow'));this._syncTime=weavejs.util.JS.now();this._undoHistory=[];this._redoHistory=[];this._subject=subject;this._syncDelay=syncDelay;this._prevState=Weave.getState(this._subject);Weave.disposableChild(this._subject,this);var cc=Weave.getCallbacks(this._subject);
cc.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.immediateCallback,this,'immediateCallback'));cc.addGroupedCallback(this,org.apache.flex.utils.Language.closure(this.groupedCallback,this,'groupedCallback'))};weavejs.core.SessionStateLog.debug=false;weavejs.core.SessionStateLog.enableHistoryRewrite=true;
weavejs.core.SessionStateLog.prototype.dispose=function(){if(this._undoHistory==null)throw new Error('SessionStateLog.dispose() called more than once');this._subject=null;this._undoHistory=null;this._redoHistory=null};weavejs.core.SessionStateLog.prototype._subject;weavejs.core.SessionStateLog.prototype._syncDelay;weavejs.core.SessionStateLog.prototype._prevState=null;weavejs.core.SessionStateLog.prototype._undoHistory;weavejs.core.SessionStateLog.prototype._redoHistory;
weavejs.core.SessionStateLog.prototype._nextId=0;weavejs.core.SessionStateLog.prototype._undoActive=false;weavejs.core.SessionStateLog.prototype._redoActive=false;weavejs.core.SessionStateLog.prototype._syncTime;weavejs.core.SessionStateLog.prototype._triggerDelay=-1;weavejs.core.SessionStateLog.prototype._saveTime=0;weavejs.core.SessionStateLog.prototype._savePending=false;weavejs.core.SessionStateLog.prototype.enableLogging;
weavejs.core.SessionStateLog.prototype.squashHistory=function(directionalSquashCount){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.synchronizeNow();var count=weavejs.util.StandardLib.constrain(directionalSquashCount,-this._undoHistory.length,this._redoHistory.length);if(count<-1||count>1){cc.triggerCallbacks();var entries;if(count<0)entries=this._undoHistory.splice(this._undoHistory.length+count,-count);else entries=this._redoHistory.splice(0,count);var entry;var squashBackward=null;var squashForward=
null;var totalDuration=0;var totalDelay=0;var last=entries.length-1;for(var i=0;i<=last;i++){entry=org.apache.flex.utils.Language.as(entries[last-i],weavejs.core.LogEntry);squashBackward=Weave.combineDiff(squashBackward,entry.backward);entry=org.apache.flex.utils.Language.as(entries[i],weavejs.core.LogEntry);squashForward=Weave.combineDiff(squashForward,entry.forward);totalDuration+=entry.diffDuration;totalDelay+=entry.triggerDelay}entry=new weavejs.core.LogEntry(this._nextId++,squashForward,squashBackward,
totalDelay,totalDuration);if(count<0)this._undoHistory.push(entry);else this._redoHistory.unshift(entry)}cc.resumeCallbacks()};
weavejs.core.SessionStateLog.prototype.clearHistory=function(directional){directional=typeof directional!=='undefined'?directional:0;var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.synchronizeNow();if(directional<=0){if(this._undoHistory.length>0)cc.triggerCallbacks();this._undoHistory.length=0}if(directional>=0){if(this._redoHistory.length>0)cc.triggerCallbacks();this._redoHistory.length=0}cc.resumeCallbacks()};
weavejs.core.SessionStateLog.prototype.immediateCallback=function(){if(!this.enableLogging.value)return;this._saveTime=Number.MAX_VALUE;if(!this._savePending){this._savePending=true;this.saveDiff()}if(weavejs.core.SessionStateLog.debug&&(this._undoActive||this._redoActive)){var state=Weave.getState(this._subject);var forwardDiff=Weave.computeDiff(this._prevState,state);weavejs.util.JS.log('immediate diff:',forwardDiff)}};
weavejs.core.SessionStateLog.prototype.groupedCallback=function(){if(!this.enableLogging.value)return;this.immediateCallback();this._saveTime=weavejs.util.JS.now()+this._syncDelay;if(weavejs.core.SessionStateLog.debug&&(this._undoActive||this._redoActive)){var state=Weave.getState(this._subject);var forwardDiff=Weave.computeDiff(this._prevState,state);weavejs.util.JS.log('grouped diff:',forwardDiff)}};
weavejs.core.SessionStateLog.prototype.saveDiff=function(immediately){immediately=typeof immediately!=='undefined'?immediately:false;if(!this.enableLogging.value){this._savePending=false;return}var currentTime=weavejs.util.JS.now();if(this._triggerDelay<0)this._triggerDelay=currentTime-this._syncTime;if(!immediately&&weavejs.util.JS.now()<this._saveTime){Weave.callLater(this,org.apache.flex.utils.Language.closure(this.saveDiff,this,'saveDiff'));return}var cc=Weave.getCallbacks(this);cc.delayCallbacks();
var state=Weave.getState(this._subject);var forwardDiff=Weave.computeDiff(this._prevState,state);if(forwardDiff!==undefined){var diffDuration=currentTime-(this._syncTime+this._triggerDelay);var backwardDiff=Weave.computeDiff(state,this._prevState);var oldEntry;var newEntry;if(this._undoActive){oldEntry=org.apache.flex.utils.Language.as(this._redoHistory[0],weavejs.core.LogEntry);newEntry=new weavejs.core.LogEntry(this._nextId++,backwardDiff,forwardDiff,oldEntry.triggerDelay,oldEntry.diffDuration);
if(weavejs.core.SessionStateLog.enableHistoryRewrite)this._redoHistory[0]=newEntry;else if(weavejs.util.StandardLib.compare(oldEntry.forward,newEntry.forward)!=0)this._redoHistory.unshift(newEntry)}else{newEntry=new weavejs.core.LogEntry(this._nextId++,forwardDiff,backwardDiff,this._triggerDelay,diffDuration);if(this._redoActive){oldEntry=org.apache.flex.utils.Language.as(this._undoHistory.pop(),weavejs.core.LogEntry);newEntry.triggerDelay=oldEntry.triggerDelay;newEntry.diffDuration=oldEntry.diffDuration;
if(!weavejs.core.SessionStateLog.enableHistoryRewrite&&weavejs.util.StandardLib.compare(oldEntry.forward,newEntry.forward)==0)newEntry=oldEntry}this._undoHistory.push(newEntry)}if(weavejs.core.SessionStateLog.debug)this.debugHistory(newEntry);this._syncTime=currentTime;cc.triggerCallbacks()}if(this._undoActive||this._redoActive)this._syncTime=currentTime;this._prevState=state;this._undoActive=false;this._redoActive=false;this._savePending=false;this._triggerDelay=-1;cc.resumeCallbacks()};
weavejs.core.SessionStateLog.prototype.synchronizeNow=function(){this.saveDiff(true)};weavejs.core.SessionStateLog.prototype.undo=function(numberOfSteps){numberOfSteps=typeof numberOfSteps!=='undefined'?numberOfSteps:1;this.applyDiffs(-numberOfSteps)};weavejs.core.SessionStateLog.prototype.redo=function(numberOfSteps){numberOfSteps=typeof numberOfSteps!=='undefined'?numberOfSteps:1;this.applyDiffs(numberOfSteps)};
weavejs.core.SessionStateLog.prototype.applyDiffs=function(delta){var stepsRemaining=Math.min(Math.abs(delta),delta<0?this._undoHistory.length:this._redoHistory.length);if(stepsRemaining>0){var logEntry;var diff;var debug=weavejs.core.SessionStateLog.debug&&stepsRemaining==1;if(this._savePending&&!this._undoActive&&!this._redoActive)this.synchronizeNow();var combine=stepsRemaining>2;var baseDiff=null;Weave.getCallbacks(this._subject).delayCallbacks();if(!this.enableLogging.value){var state=Weave.getState(this._subject);
baseDiff=Weave.computeDiff(state,this._prevState);if(baseDiff!=null)combine=true}while(stepsRemaining-- >0){if(delta<0){logEntry=this._undoHistory.pop();this._redoHistory.unshift(logEntry);diff=logEntry.backward}else{logEntry=this._redoHistory.shift();this._undoHistory.push(logEntry);diff=logEntry.forward}if(debug)weavejs.util.JS.log('apply',delta<0?'undo':'redo',logEntry.id+':',diff);if(stepsRemaining==0&&this.enableLogging.value)this._prevState=Weave.getState(this._subject);if(combine){baseDiff=
Weave.combineDiff(baseDiff,diff);if(stepsRemaining<=1){Weave.setState(this._subject,baseDiff,false);combine=false}}else Weave.setState(this._subject,diff,false);if(debug){var newState=Weave.getState(this._subject);var resultDiff=Weave.computeDiff(this._prevState,newState);weavejs.util.JS.log('resulting diff:',resultDiff)}}Weave.getCallbacks(this._subject).resumeCallbacks();this._undoActive=delta<0&&this._savePending;this._redoActive=delta>0&&this._savePending;if(!this._savePending)this._prevState=
Weave.getState(this._subject);Weave.getCallbacks(this).triggerCallbacks()}};
weavejs.core.SessionStateLog.prototype.debugHistory=function(logEntry){var h=this._undoHistory.concat();for(var i=0;i<h.length;i++)h[i]=h[i].id;var f=this._redoHistory.concat();for(i=0;i<f.length;i++)f[i]=f[i].id;if(logEntry){weavejs.util.JS.log('\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c\x3c');weavejs.util.JS.log('NEW HISTORY (backward) '+
logEntry.id+':',logEntry.backward);weavejs.util.JS.log('\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d');weavejs.util.JS.log('NEW HISTORY (forward) '+logEntry.id+':',logEntry.forward);weavejs.util.JS.log('\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e\x3e')}org.apache.flex.utils.Language.trace('undo ['+
h+']','redo ['+f+']')};weavejs.core.SessionStateLog.prototype.getSessionState=function(){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.synchronizeNow();var state={'version':0,'currentState':this._prevState,'undoHistory':this._undoHistory.concat(),'redoHistory':this._redoHistory.concat(),'nextId':this._nextId};cc.resumeCallbacks();return state};
weavejs.core.SessionStateLog.prototype.setSessionState=function(state){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.enableLogging.delayCallbacks();try{var version=state.version;switch(version){case 0:this._prevState=state.currentState;this._undoHistory=weavejs.core.LogEntry.convertGenericObjectsToLogEntries(state.undoHistory,this._syncDelay);this._redoHistory=weavejs.core.LogEntry.convertGenericObjectsToLogEntries(state.redoHistory,this._syncDelay);this._nextId=state.nextId;break;default:throw new Error('Weave history format version '+
version+' is unsupported.');}this._undoActive=false;this._redoActive=false;this._savePending=false;this._saveTime=0;this._triggerDelay=-1;this._syncTime=weavejs.util.JS.now();Weave.setState(this._subject,this._prevState)}finally{this.enableLogging.resumeCallbacks();cc.triggerCallbacks();cc.resumeCallbacks()}};Object.defineProperties(weavejs.core.SessionStateLog.prototype,{undoHistory:{get:function(){return this._undoHistory}},redoHistory:{get:function(){return this._redoHistory}}});
weavejs.core.SessionStateLog.prototype.FLEXJS_CLASS_INFO={names:[{name:'SessionStateLog',qName:'weavejs.core.SessionStateLog'}],interfaces:[weavejs.api.core.ILinkableVariable,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.api.data.Aggregation');weavejs.api.data.Aggregation=function(){};weavejs.api.data.Aggregation.ALL_TYPES=[weavejs.api.data.Aggregation.SAME,weavejs.api.data.Aggregation.FIRST,weavejs.api.data.Aggregation.LAST,weavejs.api.data.Aggregation.MEAN,weavejs.api.data.Aggregation.SUM,weavejs.api.data.Aggregation.MIN,weavejs.api.data.Aggregation.MAX,weavejs.api.data.Aggregation.COUNT];weavejs.api.data.Aggregation.SAME='same';weavejs.api.data.Aggregation.FIRST='first';
weavejs.api.data.Aggregation.LAST='last';weavejs.api.data.Aggregation.MEAN='mean';weavejs.api.data.Aggregation.SUM='sum';weavejs.api.data.Aggregation.MIN='min';weavejs.api.data.Aggregation.MAX='max';weavejs.api.data.Aggregation.COUNT='count';weavejs.api.data.Aggregation.DEFAULT=weavejs.api.data.Aggregation.SAME;weavejs.api.data.Aggregation.AMBIGUOUS_DATA='Ambiguous data';
weavejs.api.data.Aggregation.HELP={'same':'Keep the value only if it is the same for each record in the group.','first':'Use the first of a group of values.','last':'Use the last of a group of values.','mean':'Calculate the mean (average) from a group of numeric values.','sum':'Calculate the sum (total) from a group of numeric values.','min':'Use the minimum of a group of numeric values.','max':'Use the maximum of a group of numeric values.','count':'Count the number of values in a group.'};
weavejs.api.data.Aggregation.prototype.FLEXJS_CLASS_INFO={names:[{name:'Aggregation',qName:'weavejs.api.data.Aggregation'}]};goog.provide('weavejs.api.data.DataType');weavejs.api.data.DataType=function(){};weavejs.api.data.DataType.ALL_TYPES=[weavejs.api.data.DataType.NUMBER,weavejs.api.data.DataType.STRING,weavejs.api.data.DataType.DATE,weavejs.api.data.DataType.GEOMETRY];weavejs.api.data.DataType.NUMBER='number';weavejs.api.data.DataType.STRING='string';weavejs.api.data.DataType.DATE='date';weavejs.api.data.DataType.GEOMETRY='geometry';
weavejs.api.data.DataType.getClass=function(dataType){switch(dataType){case weavejs.api.data.DataType.NUMBER:return Number;case weavejs.api.data.DataType.DATE:return Date;case weavejs.api.data.DataType.GEOMETRY:return Array;default:return String}};weavejs.api.data.DataType.prototype.FLEXJS_CLASS_INFO={names:[{name:'DataType',qName:'weavejs.api.data.DataType'}]};goog.provide('weavejs.api.data.DateFormat');weavejs.api.data.DateFormat=function(){};weavejs.api.data.DateFormat.getSuggestions=function(){return weavejs.api.data.DateFormat.ADDITIONAL_SUGGESTIONS.concat(weavejs.api.data.DateFormat.FOR_AUTO_DETECT)};weavejs.api.data.DateFormat.ADDITIONAL_SUGGESTIONS=['%Y'];
weavejs.api.data.DateFormat.FOR_AUTO_DETECT=['%d-%b-%y','%b-%d-%y','%d-%b-%Y','%b-%d-%Y','%Y-%b-%d','%d/%b/%y','%b/%d/%y','%d/%b/%Y','%b/%d/%Y','%Y/%b/%d','%d.%b.%y','%b.%d.%y','%d.%b.%Y','%b.%d.%Y','%Y.%b.%d','%d-%m-%y','%m-%d-%y','%d-%m-%Y','%m-%d-%Y','%d/%m/%y','%m/%d/%y','%d/%m/%Y','%m/%d/%Y','%Y/%m/%d','%d.%m.%y','%m.%d.%y','%d.%m.%Y','%m.%d.%Y','%Y.%m.%d','%H:%M','%H:%M:%S','%H:%M:%S.%Q','%a, %d %b %Y %H:%M:%S %z','%Y-%m-%d','%y-%m-%d','%Y-%m-%d %T','%y-%m-%d %T','%Y-%m-%dT%T','%y-%m-%dT%T',
'%Y-%m-%dT%TZ','%y-%m-%dT%TZ','%Y-%m-%d %TZ','%y-%m-%d %TZ','%Y%m%dT%TZ','%y%m%dT%TZ','%Y%m%d %TZ','%y%m%d %TZ','%Y-%b-%d %T','%Y-%b-%d %H:%M:%S','%Y-%b-%d %H:%M:%S.%Q','%d-%b-%Y %T','%d-%b-%Y %H:%M:%S','%d-%b-%Y %H:%M:%S.%Q'];weavejs.api.data.DateFormat.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateFormat',qName:'weavejs.api.data.DateFormat'}]};goog.provide('weavejs.api.data.EntityType');weavejs.api.data.EntityType=function(){};weavejs.api.data.EntityType.ALL_TYPES=[weavejs.api.data.EntityType.TABLE,weavejs.api.data.EntityType.COLUMN,weavejs.api.data.EntityType.HIERARCHY,weavejs.api.data.EntityType.CATEGORY];weavejs.api.data.EntityType.TABLE='table';weavejs.api.data.EntityType.COLUMN='column';weavejs.api.data.EntityType.HIERARCHY='hierarchy';weavejs.api.data.EntityType.CATEGORY='category';
weavejs.api.data.EntityType.prototype.FLEXJS_CLASS_INFO={names:[{name:'EntityType',qName:'weavejs.api.data.EntityType'}]};goog.provide('weavejs.api.data.ColumnMetadata');goog.require('weavejs.api.data.Aggregation');goog.require('weavejs.api.data.DataType');goog.require('weavejs.api.data.DateFormat');goog.require('weavejs.api.data.EntityType');weavejs.api.data.ColumnMetadata=function(){};weavejs.api.data.ColumnMetadata.ENTITY_TYPE='entityType';weavejs.api.data.ColumnMetadata.TITLE='title';weavejs.api.data.ColumnMetadata.NUMBER='number';weavejs.api.data.ColumnMetadata.STRING='string';
weavejs.api.data.ColumnMetadata.KEY_TYPE='keyType';weavejs.api.data.ColumnMetadata.DATA_TYPE='dataType';weavejs.api.data.ColumnMetadata.PROJECTION='projection';weavejs.api.data.ColumnMetadata.AGGREGATION='aggregation';weavejs.api.data.ColumnMetadata.DATE_FORMAT='dateFormat';weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT='dateDisplayFormat';weavejs.api.data.ColumnMetadata.OVERRIDE_BINS='overrideBins';weavejs.api.data.ColumnMetadata.MIN='min';weavejs.api.data.ColumnMetadata.MAX='max';
weavejs.api.data.ColumnMetadata.getAllMetadata=function(column){var meta={};var names=column.getMetadataPropertyNames();var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];meta[name]=column.getMetadata(name)}return meta};
weavejs.api.data.ColumnMetadata.getSuggestedPropertyValues=function(propertyName){switch(propertyName){case weavejs.api.data.ColumnMetadata.ENTITY_TYPE:return weavejs.api.data.EntityType.ALL_TYPES;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return weavejs.api.data.DataType.ALL_TYPES;case weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT:case weavejs.api.data.ColumnMetadata.DATE_FORMAT:return weavejs.api.data.DateFormat.getSuggestions();case weavejs.api.data.ColumnMetadata.AGGREGATION:return weavejs.api.data.Aggregation.ALL_TYPES;
default:return[]}};weavejs.api.data.ColumnMetadata.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnMetadata',qName:'weavejs.api.data.ColumnMetadata'}]};goog.provide('weavejs.data.column.ColumnDataTask');
weavejs.data.column.ColumnDataTask=function(parentColumn,dataFilter,callback){dataFilter=typeof dataFilter!=='undefined'?dataFilter:null;callback=typeof callback!=='undefined'?callback:null;this.uniqueKeys=[];this.map_key_arrayData=new weavejs.util.JS.Map;if(callback==null)callback=org.apache.flex.utils.Language.closure(parentColumn.triggerCallbacks,parentColumn,'triggerCallbacks');this.parentColumn=parentColumn;this.dataFilter=dataFilter;this.callback=callback};weavejs.data.column.ColumnDataTask.prototype.uniqueKeys;
weavejs.data.column.ColumnDataTask.prototype.map_key_arrayData;
weavejs.data.column.ColumnDataTask.prototype.begin=function(inputKeys,inputData){if(inputKeys.length!=inputData.length)throw new Error(weavejs.util.StandardLib.substitute('Arrays are of different length ({0} !\x3d {1})',inputKeys.length,inputData.length));this.dataFilter=this.dataFilter;this.keys=inputKeys;this.data=inputData;this.i=0;this.n=this.keys.length;this.uniqueKeys=[];this.map_key_arrayData=new weavejs.util.JS.Map;weavejs.WeaveAPI.Scheduler.startTask(this.parentColumn,org.apache.flex.utils.Language.closure(this.iterate,
this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,this.callback,Weave.lang('Processing {0} records',this.n))};weavejs.data.column.ColumnDataTask.prototype.parentColumn;weavejs.data.column.ColumnDataTask.prototype.dataFilter;weavejs.data.column.ColumnDataTask.prototype.callback;weavejs.data.column.ColumnDataTask.prototype.keys;weavejs.data.column.ColumnDataTask.prototype.data;weavejs.data.column.ColumnDataTask.prototype.i;weavejs.data.column.ColumnDataTask.prototype.n;
weavejs.data.column.ColumnDataTask.prototype.iterate=function(stopTime){for(;this.i<this.n;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.n;var value=this.data[this.i];if(this.dataFilter!=null&&!this.dataFilter(value))continue;var key=this.keys[this.i];var array=this.map_key_arrayData.get(key);if(!array){this.uniqueKeys.push(key);this.map_key_arrayData.set(key,array=[value])}else array.push(value)}return 1};
weavejs.data.column.ColumnDataTask.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataTask',qName:'weavejs.data.column.ColumnDataTask'}]};goog.provide('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.column.ColumnDataTask');goog.require('weavejs.api.data.IAttributeColumn');weavejs.data.column.AbstractAttributeColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;weavejs.data.column.AbstractAttributeColumn.base(this,'constructor');if(metadata)this.setMetadata(metadata)};goog.inherits(weavejs.data.column.AbstractAttributeColumn,weavejs.core.CallbackCollection);
weavejs.data.column.AbstractAttributeColumn.prototype._metadata=null;weavejs.data.column.AbstractAttributeColumn.prototype.setMetadata=function(metadata){if(this._metadata!==null)throw new Error('Cannot call setMetadata() if already set');this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)};
weavejs.data.column.AbstractAttributeColumn.copyValues=function(object){var copy={};for(var key in object){var value=object[key];if(org.apache.flex.utils.Language.is(value,Array))copy[key]=JSON.stringify(value);else copy[key]=value}return copy};weavejs.data.column.AbstractAttributeColumn.prototype.getMetadata=function(propertyName){var value=null;if(this._metadata)value=this._metadata[propertyName]||null;return value};
weavejs.data.column.AbstractAttributeColumn.prototype.getMetadataPropertyNames=function(){return weavejs.util.JS.objectKeys(this._metadata)};weavejs.data.column.AbstractAttributeColumn.prototype.dataTask;weavejs.data.column.AbstractAttributeColumn.prototype.dataCache;weavejs.data.column.AbstractAttributeColumn.prototype.containsKey=function(key){return this.dataTask.map_key_arrayData.has(key)};
weavejs.data.column.AbstractAttributeColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var array=this.dataTask.map_key_arrayData.get(key);if(!array)return dataType===String?'':undefined;if(!dataType||dataType===Array)return array;var value=this.dataCache.get(dataType,key);if(value===undefined)this.dataCache.set(dataType,key,value=dataType(this.generateValue(key,dataType)));return value};
weavejs.data.column.AbstractAttributeColumn.prototype.generateValue=function(key,dataType){return null};Object.defineProperties(weavejs.data.column.AbstractAttributeColumn.prototype,{keys:{get:function(){return this.dataTask.uniqueKeys}}});weavejs.data.column.AbstractAttributeColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractAttributeColumn',qName:'weavejs.data.column.AbstractAttributeColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.util.DateUtils');weavejs.util.DateUtils=function(){};weavejs.util.DateUtils.date_parse=function(date,fmt,force_utc,force_local){force_utc=typeof force_utc!=='undefined'?force_utc:false;force_local=typeof force_local!=='undefined'?force_local:false;return null};weavejs.util.DateUtils.date_format=function(date,fmt){return null};weavejs.util.DateUtils.dates_detect=function(dates,formats){return[]};weavejs.util.DateUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateUtils',qName:'weavejs.util.DateUtils'}]};goog.provide('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IBaseColumn=function(){};weavejs.api.data.IBaseColumn.prototype.setRecords=function(keys,data){};weavejs.api.data.IBaseColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBaseColumn',qName:'weavejs.api.data.IBaseColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.api.data.IPrimitiveColumn');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IPrimitiveColumn=function(){};weavejs.api.data.IPrimitiveColumn.prototype.deriveStringFromNumber=function(value){};weavejs.api.data.IPrimitiveColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'IPrimitiveColumn',qName:'weavejs.api.data.IPrimitiveColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.data.column.DateColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.util.DateUtils');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');weavejs.data.column.DateColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this._uniqueKeys=new Array;this.map_key_data=new weavejs.util.JS.Map;weavejs.data.column.DateColumn.base(this,'constructor',metadata)};
goog.inherits(weavejs.data.column.DateColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.DateColumn.prototype._uniqueKeys;weavejs.data.column.DateColumn.prototype.map_key_data;weavejs.data.column.DateColumn.prototype._i;weavejs.data.column.DateColumn.prototype._keys;weavejs.data.column.DateColumn.prototype._dates;weavejs.data.column.DateColumn.prototype._reportedError;weavejs.data.column.DateColumn.prototype._stringToNumberFunction=null;
weavejs.data.column.DateColumn.prototype._numberToStringFunction=null;weavejs.data.column.DateColumn.prototype._dateFormat=null;weavejs.data.column.DateColumn.prototype._dateDisplayFormat=null;weavejs.data.column.DateColumn.prototype._durationMode=false;weavejs.data.column.DateColumn.prototype._fakeData=false;
weavejs.data.column.DateColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.DATE;if(propertyName==weavejs.api.data.ColumnMetadata.DATE_FORMAT)return this._dateFormat||weavejs.data.column.DateColumn.base(this,'getMetadata',propertyName);return weavejs.data.column.DateColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.DateColumn.prototype.containsKey=function(key){return this.map_key_data.has(key)};
weavejs.data.column.DateColumn.prototype.setRecords=function(qkeys,dateStrings){if(this.keys.length>dateStrings.length){weavejs.util.JS.error('Array lengths differ');return}this._fakeData=!!this.getMetadata('fakeData');this._dateFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.DATE_FORMAT);if(!this._dateFormat){var possibleFormats=weavejs.data.column.DateColumn.detectDateFormats(dateStrings);weavejs.util.StandardLib.sortOn(possibleFormats,'length');this._dateFormat=possibleFormats.pop()}this._dateFormat=
weavejs.data.column.DateColumn.convertDateFormat_as_to_c(this._dateFormat);this._dateDisplayFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.DATE_DISPLAY_FORMAT);if(this._dateDisplayFormat)this._dateDisplayFormat=weavejs.data.column.DateColumn.convertDateFormat_as_to_c(this._dateDisplayFormat);else this._dateDisplayFormat=this._dateFormat;this._stringToNumberFunction=null;var numberFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.NUMBER);if(numberFormat)try{this._stringToNumberFunction=
weavejs.util.JS.compile(numberFormat,[weavejs.api.data.ColumnMetadata.STRING])}catch(e){weavejs.util.JS.error(e)}this._numberToStringFunction=null;var stringFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this._numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER])}catch(e){weavejs.util.JS.error(e)}this._i=0;this._keys=qkeys;this._dates=dateStrings;this.map_key_data=new weavejs.util.JS.Map;this._uniqueKeys.length=0;
this._reportedError=false;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._asyncIterate,this,'_asyncIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._asyncComplete,this,'_asyncComplete'))};weavejs.data.column.DateColumn.prototype.errorHandler=function(e){return};weavejs.data.column.DateColumn.prototype._asyncComplete=function(){this._keys=null;this._dates=null;this.triggerCallbacks()};
weavejs.data.column.DateColumn.prototype.parseDate=function(string){if(this._dateFormat)return weavejs.util.DateUtils.date_parse(string,this._dateFormat);return new Date(string)};weavejs.data.column.DateColumn.SECOND=1E3;weavejs.data.column.DateColumn.MINUTE=60*1E3;weavejs.data.column.DateColumn.HOUR=60*60*1E3;
weavejs.data.column.DateColumn.prototype.formatDate=function(value){if(this._dateDisplayFormat){if(org.apache.flex.utils.Language.is(value,Number)&&!this._durationMode)value=new Date(value);if(org.apache.flex.utils.Language.is(value,Number)){var n=Math.floor(org.apache.flex.utils.Language.as(value,Number));var milliseconds=n%1E3;n=Math.floor(n/1E3);var seconds=n%60;n=Math.floor(n/60);var minutes=n%60;n=Math.floor(n/60);var hours=n;var obj={milliseconds:milliseconds,seconds:seconds,minutes:minutes,
hours:hours};return weavejs.util.DateUtils.date_format(obj,this._dateDisplayFormat)}else{var date=org.apache.flex.utils.Language.as(value,Date)||new Date(value);return weavejs.util.DateUtils.date_format(date,this._dateDisplayFormat)}}return weavejs.util.StandardLib.formatDate(value,this._dateDisplayFormat)};
weavejs.data.column.DateColumn.prototype._asyncIterate=function(stopTime){for(;this._i<this._keys.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._keys.length;var key=this._keys[this._i];var string=this._dates[this._i];var value;if(this._fakeData){var oneDay=24*60*60*1E3;var fakeTime=weavejs.util.StandardLib.asNumber(string)*oneDay;var d=new Date;d.setTime(d.getTime()-d.getTime()%oneDay+fakeTime);value=d}else if(this._stringToNumberFunction!=null){var number=this._stringToNumberFunction(string);
if(this._numberToStringFunction!=null){string=this._numberToStringFunction(number);if(!string)continue;value=this.parseDate(string)}else{if(!isFinite(number))continue;value=number}}else try{if(!string)continue;value=this.parseDate(string);if(org.apache.flex.utils.Language.is(value,Date)&&isNaN(org.apache.flex.utils.Language.as(value,Date).getTime()))value=weavejs.util.StandardLib.asNumber(string)}catch(e){if(!this._reportedError){this._reportedError=true;var err=weavejs.util.StandardLib.substitute('Warning: Unable to parse this value as a date: "{0}"'+
' (only the first error for this column is reported).'+' Attribute column:',string);weavejs.util.JS.error(err,this._metadata,e)}continue}if(!this.map_key_data.has(key)){this._durationMode=org.apache.flex.utils.Language.is(value,Number);this._uniqueKeys.push(key);this.map_key_data.set(key,value)}else if(!this._reportedError){this._reportedError=true;var fmt='Warning: Key column values are not unique.  Record dropped due to duplicate key ({0}) (only reported for first duplicate).  Attribute column:';
weavejs.util.JS.log(weavejs.util.StandardLib.substitute(fmt,key.localName),this._metadata)}}return 1};weavejs.data.column.DateColumn.prototype.deriveStringFromNumber=function(number){if(this._numberToStringFunction!=null)return this._numberToStringFunction(number);if(this._dateFormat)return this.formatDate(number);return(new Date(number)).toString()};
weavejs.data.column.DateColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var number;var string;var value;if(dataType==Number){number=this.map_key_data.get(key);return number}if(dataType==String){if(this._numberToStringFunction!=null){number=this.map_key_data.get(key);return this._numberToStringFunction(number)}value=this.map_key_data.get(key);if(value===undefined)return'';if(this._dateFormat)string=this.formatDate(value);else string=value.toString();
return string}value=this.map_key_data.get(key);if(!dataType||dataType==Array)return value!=null?[value]:null;if(dataType)return org.apache.flex.utils.Language.as(value,dataType);return value};weavejs.data.column.DateColumn.convertDateFormat_as_to_c=function(format){if(!format||format.indexOf('%')>=0)return format;return weavejs.util.StandardLib.replace.apply(null,[format].concat(weavejs.data.column.DateColumn.dateFormat_replacements_as_to_c))};
weavejs.data.column.DateColumn.dateFormat_replacements_as_to_c=['YYYY','%Y','YY','%y','MMMM','%B','MMM','%b','MM','%m','M','%-m','DD','%d','D','%-d','E','%u','A','%p','JJ','%H','J','%-H','LL','%I','L','%-I','EEEE','%A','EEE','%a','NN','%M','N','%-M','SS','%S','QQQ','%Q'];weavejs.data.column.DateColumn.detectDateFormats=function(dates){return weavejs.util.DateUtils.dates_detect(dates,weavejs.api.data.DateFormat.FOR_AUTO_DETECT)};Object.defineProperties(weavejs.data.column.DateColumn.prototype,{keys:{get:function(){return this._uniqueKeys}}});
weavejs.data.column.DateColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'DateColumn',qName:'weavejs.data.column.DateColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};goog.provide('weavejs.geom.BLGNode');weavejs.geom.BLGNode=function(index,importance,x,y){this.index=index;this.importance=importance;this.x=x;this.y=y;this.left=null;this.right=null};weavejs.geom.BLGNode.prototype.index;weavejs.geom.BLGNode.prototype.importance;weavejs.geom.BLGNode.prototype.x;weavejs.geom.BLGNode.prototype.y;weavejs.geom.BLGNode.prototype.left=null;weavejs.geom.BLGNode.prototype.right=null;weavejs.geom.BLGNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGNode',qName:'weavejs.geom.BLGNode'}]};goog.provide('weavejs.geom.NumericRange');weavejs.geom.NumericRange=function(begin,end){begin=typeof begin!=='undefined'?begin:NaN;end=typeof end!=='undefined'?end:NaN;this.begin=begin;this.end=end};weavejs.geom.NumericRange.prototype.begin;weavejs.geom.NumericRange.prototype.end;weavejs.geom.NumericRange.prototype.normalize=function(value){if(value==this.end)return 1;return(value-this.begin)/(this.end-this.begin)};
weavejs.geom.NumericRange.prototype.denormalize=function(value){return this.begin+(this.end-this.begin)*value};weavejs.geom.NumericRange.prototype.setRange=function(begin,end){this.begin=begin;this.end=end};weavejs.geom.NumericRange.prototype.offset=function(delta){this.begin+=delta;this.end+=delta};weavejs.geom.NumericRange.prototype.constrain=function(value){if(this.begin<this.end)return Math.max(this.begin,Math.min(value,this.end));return Math.max(this.end,Math.min(value,this.begin))};
weavejs.geom.NumericRange.prototype.contains=function(value){if(this.begin<this.end)return this.begin<=value&&value<=this.end;return this.end<=value&&value<=this.begin};weavejs.geom.NumericRange.prototype.compare=function(value){var min=this.min;var max=this.max;if(value<min)return-1;if(value>max)return 1;if(min<=value&&value<=max)return 0;return NaN};
weavejs.geom.NumericRange.prototype.constrainRange=function(rangeToConstrain,allowShrinking){allowShrinking=typeof allowShrinking!=='undefined'?allowShrinking:false;if(isNaN(this.coverage))return;if(rangeToConstrain.coverage<this.coverage)if(rangeToConstrain.min<this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else{if(rangeToConstrain.max>this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)}else if(allowShrinking)rangeToConstrain.setRange(this.begin,this.end);else if(rangeToConstrain.min>
this.min)rangeToConstrain.offset(this.min-rangeToConstrain.min);else if(rangeToConstrain.max<this.max)rangeToConstrain.offset(this.max-rangeToConstrain.max)};weavejs.geom.NumericRange.prototype.includeInRange=function(value){if(this.end<this.begin){if(value<this.end)this.end=value;if(value>this.begin)this.begin=value}else{if(value<this.begin)this.begin=value;if(value>this.end)this.end=value}};
weavejs.geom.NumericRange.prototype.toString=function(){return'['+this.begin.toFixed(2)+' to '+this.end.toFixed(2)+']'};Object.defineProperties(weavejs.geom.NumericRange.prototype,{min:{get:function(){return Math.min(this.begin,this.end)}},max:{get:function(){return Math.max(this.begin,this.end)}},coverage:{get:function(){return Math.abs(this.end-this.begin)}}});weavejs.geom.NumericRange.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumericRange',qName:'weavejs.geom.NumericRange'}]};goog.provide('weavejs.geom.Point');weavejs.geom.Point=function(x,y){x=typeof x!=='undefined'?x:NaN;y=typeof y!=='undefined'?y:NaN;this.x=x;this.y=y};weavejs.geom.Point.prototype.x;weavejs.geom.Point.prototype.y;weavejs.geom.Point.prototype.FLEXJS_CLASS_INFO={names:[{name:'Point',qName:'weavejs.geom.Point'}]};goog.provide('weavejs.geom.Rectangle');weavejs.geom.Rectangle=function(x,y,width,height){x=typeof x!=='undefined'?x:NaN;y=typeof y!=='undefined'?y:NaN;width=typeof width!=='undefined'?width:NaN;height=typeof height!=='undefined'?height:NaN;this.x=x;this.y=y;this.width=width;this.height=height};weavejs.geom.Rectangle.prototype.x;weavejs.geom.Rectangle.prototype.y;weavejs.geom.Rectangle.prototype.width;weavejs.geom.Rectangle.prototype.height;
weavejs.geom.Rectangle.prototype.FLEXJS_CLASS_INFO={names:[{name:'Rectangle',qName:'weavejs.geom.Rectangle'}]};goog.provide('weavejs.geom.Bounds2D');goog.require('weavejs.geom.NumericRange');goog.require('weavejs.geom.Point');goog.require('weavejs.geom.Rectangle');weavejs.geom.Bounds2D=function(xMin,yMin,xMax,yMax){xMin=typeof xMin!=='undefined'?xMin:NaN;yMin=typeof yMin!=='undefined'?yMin:NaN;xMax=typeof xMax!=='undefined'?xMax:NaN;yMax=typeof yMax!=='undefined'?yMax:NaN;this.setBounds(xMin,yMin,xMax,yMax)};weavejs.geom.Bounds2D.prototype.xMin;weavejs.geom.Bounds2D.prototype.yMin;weavejs.geom.Bounds2D.prototype.xMax;
weavejs.geom.Bounds2D.prototype.yMax;weavejs.geom.Bounds2D.prototype.getXMin=function(){return this.xMin};weavejs.geom.Bounds2D.prototype.getYMin=function(){return this.yMin};weavejs.geom.Bounds2D.prototype.getXMax=function(){return this.xMax};weavejs.geom.Bounds2D.prototype.getYMax=function(){return this.yMax};weavejs.geom.Bounds2D.prototype.setXMin=function(value){this.xMin=value};weavejs.geom.Bounds2D.prototype.setYMin=function(value){this.yMin=value};
weavejs.geom.Bounds2D.prototype.setXMax=function(value){this.xMax=value};weavejs.geom.Bounds2D.prototype.setYMax=function(value){this.yMax=value};weavejs.geom.Bounds2D.prototype.copyFrom=function(other){if(other==null){this.reset();return}this.xMin=other.xMin;this.yMin=other.yMin;this.xMax=other.xMax;this.yMax=other.yMax};weavejs.geom.Bounds2D.prototype.cloneBounds=function(){return new weavejs.geom.Bounds2D(this.xMin,this.yMin,this.xMax,this.yMax)};
weavejs.geom.Bounds2D.prototype.makeSizePositive=function(){var temp;if(this.xMin>this.xMax){temp=this.xMin;this.xMin=this.xMax;this.xMax=temp}if(this.yMin>this.yMax){temp=this.yMin;this.yMin=this.yMax;this.yMax=temp}};weavejs.geom.Bounds2D.prototype.reset=function(){this.xMin=NaN;this.yMin=NaN;this.xMax=NaN;this.yMax=NaN};weavejs.geom.Bounds2D.prototype.isUndefined=function(){return!isFinite(this.xMin)||!isFinite(this.yMin)||!isFinite(this.xMax)||!isFinite(this.yMax)};
weavejs.geom.Bounds2D.prototype.isEmpty=function(){return this.xMin==this.xMax||this.yMin==this.yMax||this.isUndefined()};weavejs.geom.Bounds2D.prototype.equals=function(other){if(other==null)return this.isUndefined();return(this.xMin==other.xMin||isNaN(this.xMin)&&isNaN(other.xMin))&&(this.yMin==other.yMin||isNaN(this.yMin)&&isNaN(other.yMin))&&(this.xMax==other.xMax||isNaN(this.xMax)&&isNaN(other.xMax))&&(this.yMax==other.yMax||isNaN(this.yMax)&&isNaN(other.yMax))};
weavejs.geom.Bounds2D.prototype.setBounds=function(xMin,yMin,xMax,yMax){this.xMin=xMin;this.yMin=yMin;this.xMax=xMax;this.yMax=yMax};weavejs.geom.Bounds2D.prototype.setRectangle=function(x,y,width,height){this.xMin=x;this.yMin=y;this.xMax=x+width;this.yMax=y+height};
weavejs.geom.Bounds2D.prototype.getRectangle=function(output,makeSizePositive){output=typeof output!=='undefined'?output:null;makeSizePositive=typeof makeSizePositive!=='undefined'?makeSizePositive:true;if(output==null)output=new weavejs.geom.Rectangle;if(makeSizePositive){output.x=this.getXNumericMin();output.y=this.getYNumericMin();output.width=this.getXCoverage();output.height=this.getYCoverage()}else{output.x=this.xMin;output.y=this.yMin;output.width=this.getWidth();output.height=this.getHeight()}return output};
weavejs.geom.Bounds2D.prototype.includePoint=function(newPoint){this.includeCoords(newPoint.x,newPoint.y)};
weavejs.geom.Bounds2D.prototype.includeCoords=function(newX,newY){if(isFinite(newX)){if(isNaN(this.xMin))if(isNaN(this.xMax))this.xMin=this.xMax=newX;else this.xMin=this.xMax;else if(isNaN(this.xMax))this.xMax=this.xMin;if(this.xMin>this.xMax){if(newX>this.xMin)this.xMin=newX;if(newX<this.xMax)this.xMax=newX}else{if(newX<this.xMin)this.xMin=newX;if(newX>this.xMax)this.xMax=newX}}if(isFinite(newY)){if(isNaN(this.yMin))if(isNaN(this.yMax))this.yMin=this.yMax=newY;else this.yMin=this.yMax;else if(isNaN(this.yMax))this.yMax=
this.yMin;if(this.yMin>this.yMax){if(newY>this.yMin)this.yMin=newY;if(newY<this.yMax)this.yMax=newY}else{if(newY<this.yMin)this.yMin=newY;if(newY>this.yMax)this.yMax=newY}}};weavejs.geom.Bounds2D.prototype.includeBounds=function(otherBounds){this.includeCoords(otherBounds.xMin,otherBounds.yMin);this.includeCoords(otherBounds.xMax,otherBounds.yMax)};weavejs.geom.Bounds2D.staticBounds2D_A=new weavejs.geom.Bounds2D;weavejs.geom.Bounds2D.staticBounds2D_B=new weavejs.geom.Bounds2D;
weavejs.geom.Bounds2D.prototype.overlaps=function(other,includeEdges){includeEdges=typeof includeEdges!=='undefined'?includeEdges:true;var a=weavejs.geom.Bounds2D.staticBounds2D_A;a.copyFrom(this);a.makeSizePositive();var b=weavejs.geom.Bounds2D.staticBounds2D_B;b.copyFrom(other);b.makeSizePositive();if(includeEdges)return a.xMin<=b.xMax&&b.xMin<=a.xMax&&a.yMin<=b.yMax&&b.yMin<=a.yMax;else return a.xMin<b.xMax&&b.xMin<a.xMax&&a.yMin<b.yMax&&b.yMin<a.yMax};
weavejs.geom.Bounds2D.prototype.containsPoint=function(point){return this.contains(point.x,point.y)};weavejs.geom.Bounds2D.prototype.contains=function(x,y){if(this.xMin<this.xMax?this.xMin<=x&&x<=this.xMax:this.xMax<=x&&x<=this.xMin)if(this.yMin<this.yMax?this.yMin<=y&&y<=this.yMax:this.yMax<=y&&y<=this.yMin)return true;return false};weavejs.geom.Bounds2D.prototype.containsBounds=function(other){return this.contains(other.xMin,other.yMin)&&this.contains(other.xMax,other.yMax)};
weavejs.geom.Bounds2D.prototype.getGridTest=function(x,y){var x0,x1,y0,y1;if(this.xMin<this.xMax)x0=this.xMin,x1=this.xMax;else x1=this.xMin,x0=this.xMax;if(this.yMin<this.yMax)y0=this.yMin,y1=this.yMax;else y1=this.yMin,y0=this.yMax;return(x<x0?1:x>x1?16:0)|(y<y0?256:y>y1?4096:0)};
weavejs.geom.Bounds2D.prototype.projectPointTo=function(point,toBounds){var toXMin;var toXMax;var toYMin;var toYMax;toXMin=toBounds.xMin;toXMax=toBounds.xMax;toYMin=toBounds.yMin;toYMax=toBounds.yMax;var x=toXMin+(point.x-this.xMin)/(this.xMax-this.xMin)*(toXMax-toXMin);if(x<=Infinity)point.x=x;else point.x=(toXMin+toXMax)/2;var y=toYMin+(point.y-this.yMin)/(this.yMax-this.yMin)*(toYMax-toYMin);if(y<=Infinity)point.y=y;else point.y=(toYMin+toYMax)/2};
weavejs.geom.Bounds2D.prototype.projectCoordsTo=function(coords,toBounds){coords.getMinPoint(weavejs.geom.Bounds2D.tempPoint);this.projectPointTo(weavejs.geom.Bounds2D.tempPoint,toBounds);coords.setMinPoint(weavejs.geom.Bounds2D.tempPoint);coords.getMaxPoint(weavejs.geom.Bounds2D.tempPoint);this.projectPointTo(weavejs.geom.Bounds2D.tempPoint,toBounds);coords.setMaxPoint(weavejs.geom.Bounds2D.tempPoint)};
weavejs.geom.Bounds2D.prototype.constrainPoint=function(point){if(!isNaN(this.xMin)&&!isNaN(this.xMax))point.x=Math.max(Math.min(this.xMin,this.xMax),Math.min(point.x,Math.max(this.xMin,this.xMax)));if(!isNaN(this.yMin)&&!isNaN(this.yMax))point.y=Math.max(Math.min(this.yMin,this.yMax),Math.min(point.y,Math.max(this.yMin,this.yMax)))};weavejs.geom.Bounds2D.tempPoint=new weavejs.geom.Point;weavejs.geom.Bounds2D.staticRange_A=new weavejs.geom.NumericRange;weavejs.geom.Bounds2D.staticRange_B=new weavejs.geom.NumericRange;
weavejs.geom.Bounds2D.prototype.constrainBoundsCenterPoint=function(boundsToConstrain){if(this.isUndefined())return;boundsToConstrain.getCenterPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setCenterPoint(weavejs.geom.Bounds2D.tempPoint)};
weavejs.geom.Bounds2D.prototype.constrainBounds=function(boundsToConstrain,preserveSize){preserveSize=typeof preserveSize!=='undefined'?preserveSize:true;if(preserveSize){var b2c=boundsToConstrain;weavejs.geom.Bounds2D.staticRange_A.setRange(this.xMin,this.xMax);weavejs.geom.Bounds2D.staticRange_B.setRange(b2c.xMin,b2c.xMax);weavejs.geom.Bounds2D.staticRange_A.constrainRange(weavejs.geom.Bounds2D.staticRange_B);boundsToConstrain.setXRange(weavejs.geom.Bounds2D.staticRange_B.begin,weavejs.geom.Bounds2D.staticRange_B.end);
weavejs.geom.Bounds2D.staticRange_A.setRange(this.yMin,this.yMax);weavejs.geom.Bounds2D.staticRange_B.setRange(b2c.yMin,b2c.yMax);weavejs.geom.Bounds2D.staticRange_A.constrainRange(weavejs.geom.Bounds2D.staticRange_B);boundsToConstrain.setYRange(weavejs.geom.Bounds2D.staticRange_B.begin,weavejs.geom.Bounds2D.staticRange_B.end)}else{boundsToConstrain.getMinPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setMinPoint(weavejs.geom.Bounds2D.tempPoint);
boundsToConstrain.getMaxPoint(weavejs.geom.Bounds2D.tempPoint);this.constrainPoint(weavejs.geom.Bounds2D.tempPoint);boundsToConstrain.setMaxPoint(weavejs.geom.Bounds2D.tempPoint)}};weavejs.geom.Bounds2D.prototype.offset=function(xOffset,yOffset){this.xMin+=xOffset;this.xMax+=xOffset;this.yMin+=yOffset;this.yMax+=yOffset};weavejs.geom.Bounds2D.prototype.setXRange=function(xMin,xMax){this.xMin=xMin;this.xMax=xMax};
weavejs.geom.Bounds2D.prototype.setYRange=function(yMin,yMax){this.yMin=yMin;this.yMax=yMax};weavejs.geom.Bounds2D.prototype.setCenteredXRange=function(xCenter,width){this.xMin=xCenter-width/2;this.xMax=xCenter+width/2};weavejs.geom.Bounds2D.prototype.setCenteredYRange=function(yCenter,height){this.yMin=yCenter-height/2;this.yMax=yCenter+height/2};
weavejs.geom.Bounds2D.prototype.setCenteredRectangle=function(xCenter,yCenter,width,height){this.setCenteredXRange(xCenter,width);this.setCenteredYRange(yCenter,height)};weavejs.geom.Bounds2D.prototype.centeredResize=function(width,height){this.setCenteredXRange(this.getXCenter(),width);this.setCenteredYRange(this.getYCenter(),height)};weavejs.geom.Bounds2D.prototype.getXCenter=function(){return(this.xMin+this.xMax)/2};
weavejs.geom.Bounds2D.prototype.setXCenter=function(xCenter){if(isNaN(this.xMin)||isNaN(this.xMax))this.xMin=this.xMax=xCenter;else{var xShift=xCenter-(this.xMin+this.xMax)/2;this.xMin+=xShift;this.xMax+=xShift}};weavejs.geom.Bounds2D.prototype.getYCenter=function(){return(this.yMin+this.yMax)/2};
weavejs.geom.Bounds2D.prototype.setYCenter=function(yCenter){if(isNaN(this.yMin)||isNaN(this.yMax))this.yMin=this.yMax=yCenter;else{var yShift=yCenter-(this.yMin+this.yMax)/2;this.yMin+=yShift;this.yMax+=yShift}};weavejs.geom.Bounds2D.prototype.getCenterPoint=function(output){output.x=this.getXCenter();output.y=this.getYCenter()};weavejs.geom.Bounds2D.prototype.setCenterPoint=function(value){this.setXCenter(value.x);this.setYCenter(value.y)};
weavejs.geom.Bounds2D.prototype.setCenter=function(xCenter,yCenter){this.setXCenter(xCenter);this.setYCenter(yCenter)};weavejs.geom.Bounds2D.prototype.getMinPoint=function(output){output.x=this.xMin;output.y=this.yMin};weavejs.geom.Bounds2D.prototype.setMinPoint=function(value){this.xMin=value.x;this.yMin=value.y};weavejs.geom.Bounds2D.prototype.getMaxPoint=function(output){output.x=this.xMax;output.y=this.yMax};
weavejs.geom.Bounds2D.prototype.setMaxPoint=function(value){this.xMax=value.x;this.yMax=value.y};weavejs.geom.Bounds2D.prototype.setMinCoords=function(x,y){this.xMin=x;this.yMin=y};weavejs.geom.Bounds2D.prototype.setMaxCoords=function(x,y){this.xMax=x;this.yMax=y};weavejs.geom.Bounds2D.prototype.getXDirection=function(){if(this.xMin>this.xMax)return-1;if(this.xMin<this.xMax)return 1;return 0};
weavejs.geom.Bounds2D.prototype.getYDirection=function(){if(this.yMin>this.yMax)return-1;if(this.yMin<this.yMax)return 1;return 0};weavejs.geom.Bounds2D.prototype.getWidth=function(){var _width=this.xMax-this.xMin;return isNaN(_width)?0:_width};weavejs.geom.Bounds2D.prototype.getHeight=function(){var _height=this.yMax-this.yMin;return isNaN(_height)?0:_height};weavejs.geom.Bounds2D.prototype.setWidth=function(value){this.setCenteredXRange(this.getXCenter(),value)};
weavejs.geom.Bounds2D.prototype.setHeight=function(value){this.setCenteredYRange(this.getYCenter(),value)};weavejs.geom.Bounds2D.prototype.getArea=function(){var area=(this.xMax-this.xMin)*(this.yMax-this.yMin);return area<0?-area:area};weavejs.geom.Bounds2D.prototype.getXCoverage=function(){return this.xMin<this.xMax?this.xMax-this.xMin:this.xMin-this.xMax};weavejs.geom.Bounds2D.prototype.getYCoverage=function(){return this.yMin<this.yMax?this.yMax-this.yMin:this.yMin-this.yMax};
weavejs.geom.Bounds2D.prototype.getXNumericMin=function(){return this.xMax<this.xMin?this.xMax:this.xMin};weavejs.geom.Bounds2D.prototype.getYNumericMin=function(){return this.yMax<this.yMin?this.yMax:this.yMin};weavejs.geom.Bounds2D.prototype.getXNumericMax=function(){return this.xMax<this.xMin?this.xMin:this.xMax};weavejs.geom.Bounds2D.prototype.getYNumericMax=function(){return this.yMax<this.yMin?this.yMin:this.yMax};
weavejs.geom.Bounds2D.prototype.toString=function(){return'(xMin\x3d'+this.xMin+', '+'yMin\x3d'+this.yMin+', '+'xMax\x3d'+this.xMax+', '+'yMax\x3d'+this.yMax+')'};weavejs.geom.Bounds2D.prototype.FLEXJS_CLASS_INFO={names:[{name:'Bounds2D',qName:'weavejs.geom.Bounds2D'}]};goog.provide('weavejs.geom.BLGTree');goog.require('weavejs.geom.Bounds2D');weavejs.geom.BLGTree=function(){this.operationStack=[];this.nodeStack=[];this.traversalVector=[];this.previousTraversalVisibleBounds=new weavejs.geom.Bounds2D};weavejs.geom.BLGTree.prototype.rootNode=null;weavejs.geom.BLGTree.prototype.insert=function(index,importance,x,y){if(importance>=this.previousTraversalMinImportance)this.previousTraversalMinImportance=-1;var newNode=new weavejs.geom.BLGNode(index,importance,x,y);this._insert(newNode)};
weavejs.geom.BLGTree.prototype._insert=function(newNode){if(this.rootNode==null){this.rootNode=newNode;return}var currentNode=this.rootNode;while(true){if(currentNode.index==newNode.index){if(newNode.left!=null||newNode.right!=null)throw new Error('BLGNode.insert: new node with children has index identical to an existing node');return}if(newNode.importance>currentNode.importance){var tempIndex=currentNode.index;var tempImportance=currentNode.importance;var tempX=currentNode.x;var tempY=currentNode.y;
var tempLeft=currentNode.left;var tempRight=currentNode.right;currentNode.index=newNode.index;currentNode.importance=newNode.importance;currentNode.x=newNode.x;currentNode.y=newNode.y;currentNode.left=newNode.left;currentNode.right=newNode.right;newNode.index=tempIndex;newNode.importance=tempImportance;newNode.x=tempX;newNode.y=tempY;newNode.left=tempLeft;newNode.right=tempRight}if(newNode.index<currentNode.index){if(currentNode.left!=null){currentNode=currentNode.left;continue}currentNode.left=newNode;
newNode=newNode.right;currentNode.left.right=null;break}else{if(currentNode.right!=null){currentNode=currentNode.right;continue}currentNode.right=newNode;newNode=newNode.left;currentNode.right.left=null;break}}var leftTraversalNode=currentNode;var rightTraversalNode=currentNode;while(newNode!=null)if(newNode.index<currentNode.index){if(newNode.index<leftTraversalNode.index){if(leftTraversalNode.left!=null){leftTraversalNode=leftTraversalNode.left;continue}leftTraversalNode.left=newNode;newNode=newNode.right;
leftTraversalNode.left.right=null;continue}if(leftTraversalNode.right!=null){leftTraversalNode=leftTraversalNode.right;continue}leftTraversalNode.right=newNode;newNode=newNode.right;leftTraversalNode.right.right=null}else{if(newNode.index>rightTraversalNode.index){if(rightTraversalNode.right!=null){rightTraversalNode=rightTraversalNode.right;continue}rightTraversalNode.right=newNode;newNode=newNode.left;rightTraversalNode.right.left=null;continue}if(rightTraversalNode.left!=null){rightTraversalNode=
rightTraversalNode.left;continue}rightTraversalNode.left=newNode;newNode=newNode.left;rightTraversalNode.left.left=null}};weavejs.geom.BLGTree.prototype.operationStack;weavejs.geom.BLGTree.prototype.nodeStack;weavejs.geom.BLGTree.OP_VISIT=0;weavejs.geom.BLGTree.OP_TRAVERSE=1;
weavejs.geom.BLGTree.prototype.getPointVector=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;if(minImportance==this.previousTraversalMinImportance&&this.previousTraversalVisibleBounds.equals(visibleBounds))return this.traversalVector;var resultCount=0;if(this.rootNode!=null){this.operationStack[0]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[0]=this.rootNode;var prevPrevGridTest=
0;var prevGridTest=0;var gridTest;var stackPos=0;var node;var operation;while(stackPos>=0){node=this.nodeStack[stackPos];operation=this.operationStack[stackPos];this.nodeStack[stackPos]=null;this.operationStack[stackPos]=null;stackPos--;if(operation==weavejs.geom.BLGTree.OP_TRAVERSE){if(node.importance<minImportance)continue;if(node.right!=null){stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[stackPos]=node.right}stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_VISIT;
this.nodeStack[stackPos]=node;if(node.left!=null){stackPos++;this.operationStack[stackPos]=weavejs.geom.BLGTree.OP_TRAVERSE;this.nodeStack[stackPos]=node.left}}else{if(visibleBounds!=null){gridTest=visibleBounds.getGridTest(node.x,node.y);if(prevPrevGridTest&prevGridTest&gridTest)resultCount--;else prevPrevGridTest=prevGridTest;prevGridTest=gridTest}this.traversalVector[resultCount++]=node}}}this.traversalVector.length=resultCount;this.previousTraversalMinImportance=minImportance;this.previousTraversalVisibleBounds.copyFrom(visibleBounds);
return this.traversalVector};weavejs.geom.BLGTree.prototype.traversalVector;weavejs.geom.BLGTree.prototype.previousTraversalMinImportance=-1;weavejs.geom.BLGTree.prototype.previousTraversalVisibleBounds;weavejs.geom.BLGTree.assertTrue=function(bool){if(!bool)throw new Error('Assertion failed');};
weavejs.geom.BLGTree.assertValid=function(node,assertNode){if(!node)return;assertNode(node);if(node.left){weavejs.geom.BLGTree.assertTrue(node.left.index<node.index);weavejs.geom.BLGTree.assertValid(node.left,assertNode)}if(node.right){weavejs.geom.BLGTree.assertTrue(node.index<node.right.index);weavejs.geom.BLGTree.assertValid(node.right,assertNode)}};
weavejs.geom.BLGTree.prototype.splitAtIndex=function(splitIndex){this.previousTraversalMinImportance=-1;this.traversalVector.length=0;var newTree=new weavejs.geom.BLGTree;while(true){var parent=null;var subtree=this.rootNode;while(subtree&&subtree.index<splitIndex){parent=subtree;subtree=subtree.right}if(!subtree)break;if(parent)parent.right=null;else this.rootNode=null;newTree._insert(subtree);parent=null;subtree=newTree.rootNode;while(subtree&&subtree.index>=splitIndex){parent=subtree;subtree=subtree.left}if(!subtree)break;
if(parent)parent.left=null;else newTree.rootNode=null;this._insert(subtree)}return newTree};weavejs.geom.BLGTree.prototype.clear=function(){this.rootNode=null;this.traversalVector.length=0;this.previousTraversalMinImportance=-1};Object.defineProperties(weavejs.geom.BLGTree.prototype,{isEmpty:{get:function(){return this.rootNode==null}}});weavejs.geom.BLGTree.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGTree',qName:'weavejs.geom.BLGTree'}]};goog.provide('weavejs.geom.VertexChainLink');weavejs.geom.VertexChainLink=function(vertexID,x,y){this.initialize(vertexID,x,y)};weavejs.geom.VertexChainLink.prototype.initialize=function(vertexID,x,y){this.vertexID=vertexID;this.x=x;this.y=y;this.importance=-1;this.importanceIsValid=false;this.prev=this;this.next=this};weavejs.geom.VertexChainLink.prototype.vertexID;weavejs.geom.VertexChainLink.prototype.x;weavejs.geom.VertexChainLink.prototype.y;weavejs.geom.VertexChainLink.prototype.importance;
weavejs.geom.VertexChainLink.prototype.prev;weavejs.geom.VertexChainLink.prototype.next;weavejs.geom.VertexChainLink.prototype.importanceIsValid;weavejs.geom.VertexChainLink.prototype.insert=function(newVertex){this.prev.next=newVertex;newVertex.prev=this.prev;newVertex.next=this;this.prev=newVertex};weavejs.geom.VertexChainLink.prototype.equals2D=function(other){return this.x==other.x&&this.y==other.y};
weavejs.geom.VertexChainLink.prototype.removeFromChain=function(){this.prev.promoteAndInvalidateImportance(this.importance);this.next.promoteAndInvalidateImportance(this.importance);this.prev.next=this.next;this.next.prev=this.prev;this.prev=this;this.next=this;weavejs.geom.VertexChainLink.saveUnusedInstance(this)};weavejs.geom.VertexChainLink.prototype.promoteAndInvalidateImportance=function(minImportance){this.importance=Math.max(this.importance,minImportance);this.importanceIsValid=false};
weavejs.geom.VertexChainLink.prototype.validateImportance=function(){this.importanceIsValid=true;if(this.importance==Infinity)return;var area=this.areaOfTriangle(this.prev,this,this.next);this.importance=Math.max(this.importance,area)};weavejs.geom.VertexChainLink.prototype.areaOfTriangle=function(a,b,c){var signedArea=((b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y))/2;if(signedArea<0)return-signedArea;return signedArea};weavejs.geom.VertexChainLink.unusedInstances=[];
weavejs.geom.VertexChainLink.getUnusedInstance=function(vertexID,x,y){if(weavejs.geom.VertexChainLink.unusedInstances.length>0){var link=weavejs.geom.VertexChainLink.unusedInstances.pop();link.initialize(vertexID,x,y)}return new weavejs.geom.VertexChainLink(vertexID,x,y)};weavejs.geom.VertexChainLink.saveUnusedInstance=function(vertex){vertex.prev=vertex.next=null;weavejs.geom.VertexChainLink.unusedInstances.push(vertex)};
weavejs.geom.VertexChainLink.clearUnusedInstances=function(){weavejs.geom.VertexChainLink.unusedInstances.length=0};weavejs.geom.VertexChainLink.IMPORTANCE='importance';weavejs.geom.VertexChainLink.prototype.FLEXJS_CLASS_INFO={names:[{name:'VertexChainLink',qName:'weavejs.geom.VertexChainLink'}]};goog.provide('weavejs.geom.BLGTreeUtils');goog.require('weavejs.geom.VertexChainLink');weavejs.geom.BLGTreeUtils=function(){};weavejs.geom.BLGTreeUtils.METHOD_SORT='BLGTreeUtils.METHOD_SORT';weavejs.geom.BLGTreeUtils.METHOD_SAMPLE='BLGTreeUtils.METHOD_SAMPLE';
weavejs.geom.BLGTreeUtils.buildBLGTree=function(vertexChain,output,method){method=typeof method!=='undefined'?method:null;switch(method){case weavejs.geom.BLGTreeUtils.METHOD_SORT:return weavejs.geom.BLGTreeUtils.buildBLGTreeSortMethod(vertexChain,output);case weavejs.geom.BLGTreeUtils.METHOD_SAMPLE:return weavejs.geom.BLGTreeUtils.buildBLGTreeSampleMethod(vertexChain,output);default:}};weavejs.geom.BLGTreeUtils.tempBounds=new weavejs.geom.Bounds2D;
weavejs.geom.BLGTreeUtils.buildBLGTreeSortMethod=function(firstVertex,outputCoordinates){var startingChainLength=0;var vertex=firstVertex;weavejs.geom.BLGTreeUtils.tempBounds.reset();do{weavejs.geom.BLGTreeUtils.tempBounds.includeCoords(vertex.x,vertex.y);startingChainLength++;vertex=vertex.next}while(vertex!=firstVertex);var maxImportance=weavejs.geom.BLGTreeUtils.tempBounds.getArea();if(maxImportance==0){var length=weavejs.geom.BLGTreeUtils.tempBounds.getWidth()+weavejs.geom.BLGTreeUtils.tempBounds.getHeight();
if(length>0)maxImportance=length*length;else maxImportance=Infinity}var minSize=2;var sortArray=[];var index;var currentChainLength=startingChainLength;while(startingChainLength>minSize){sortArray.length=startingChainLength;vertex=firstVertex;for(index=0;index<startingChainLength;index++){vertex.validateImportance();sortArray[index]=vertex;vertex=vertex.next}weavejs.util.StandardLib.sortOn(sortArray,weavejs.geom.VertexChainLink.IMPORTANCE);for(index=0;index<startingChainLength&&currentChainLength>
minSize;index++){vertex=sortArray[index];if(!vertex.importanceIsValid)continue;firstVertex=vertex.next;outputCoordinates.insert(vertex.vertexID,vertex.importance,vertex.x,vertex.y);vertex.removeFromChain();currentChainLength--}startingChainLength=currentChainLength}for(index=0;index<startingChainLength;index++){vertex=firstVertex.next;outputCoordinates.insert(vertex.vertexID,maxImportance,vertex.x,vertex.y);vertex.removeFromChain()}};
weavejs.geom.BLGTreeUtils.buildBLGTreeSampleMethod=function(firstVertex,output,sampleInterval){sampleInterval=typeof sampleInterval!=='undefined'?sampleInterval:3;var tree=output;var vertex=firstVertex;var chainLength=0;do{chainLength++;vertex=vertex.next}while(vertex!=firstVertex);while(chainLength!=0){for(var i=0;i<sampleInterval-1;i++)vertex=vertex.next;vertex.next.validateImportance();output.insert(vertex.next.vertexID,vertex.next.importance,vertex.next.x,vertex.next.y);vertex.next.removeFromChain();
chainLength--}};weavejs.geom.BLGTreeUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'BLGTreeUtils',qName:'weavejs.geom.BLGTreeUtils'}]};goog.provide('weavejs.geom.GeoJSON');weavejs.geom.GeoJSON=function(){};weavejs.geom.GeoJSON.P_TYPE='type';weavejs.geom.GeoJSON.P_CRS='crs';weavejs.geom.GeoJSON.P_BBOX='bbox';weavejs.geom.GeoJSON.G_P_COORDINATES='coordinates';weavejs.geom.GeoJSON.GC_P_GEOMETRIES='geometries';weavejs.geom.GeoJSON.F_P_ID='id';weavejs.geom.GeoJSON.F_P_GEOMETRY='geometry';weavejs.geom.GeoJSON.F_P_PROPERTIES='properties';weavejs.geom.GeoJSON.CRS_P_TYPE='type';weavejs.geom.GeoJSON.CRS_P_PROPERTIES='properties';
weavejs.geom.GeoJSON.CRS_T_NAME='name';weavejs.geom.GeoJSON.CRS_T_LINK='link';weavejs.geom.GeoJSON.CRS_N_P_NAME='name';weavejs.geom.GeoJSON.CRS_L_P_HREF='href';weavejs.geom.GeoJSON.CRS_L_P_TYPE='type';weavejs.geom.GeoJSON.FC_P_FEATURES='features';weavejs.geom.GeoJSON.T_POINT='Point';weavejs.geom.GeoJSON.T_MULTI_POINT='MultiPoint';weavejs.geom.GeoJSON.T_LINE_STRING='LineString';weavejs.geom.GeoJSON.T_MULTI_LINE_STRING='MultiLineString';weavejs.geom.GeoJSON.T_POLYGON='Polygon';
weavejs.geom.GeoJSON.T_MULTI_POLYGON='MultiPolygon';weavejs.geom.GeoJSON.T_GEOMETRY_COLLECTION='GeometryCollection';weavejs.geom.GeoJSON.T_FEATURE='Feature';weavejs.geom.GeoJSON.T_FEATURE_COLLECTION='FeatureCollection';weavejs.geom.GeoJSON.isGeoJSONObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.isFeatureObject(obj)||weavejs.geom.GeoJSON.isFeatureCollectionObject(obj)||weavejs.geom.GeoJSON.isGeometryObject(obj)};
weavejs.geom.GeoJSON.couldBeGeoJSONObject=function(obj){return obj&&obj.hasOwnProperty(weavejs.geom.GeoJSON.P_TYPE)&&(!obj.hasOwnProperty(weavejs.geom.GeoJSON.P_CRS)||weavejs.geom.GeoJSON.isCRSObject(obj[weavejs.geom.GeoJSON.P_CRS]))&&(!obj.hasOwnProperty(weavejs.geom.GeoJSON.P_BBOX)||weavejs.geom.GeoJSON.isBBOXObject(obj[weavejs.geom.GeoJSON.P_BBOX]))};
weavejs.geom.GeoJSON.isFeatureObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.T_FEATURE&&obj.hasOwnProperty(weavejs.geom.GeoJSON.F_P_GEOMETRY)&&(obj[weavejs.geom.GeoJSON.F_P_GEOMETRY]===null||weavejs.geom.GeoJSON.isGeometryObject(obj[weavejs.geom.GeoJSON.F_P_GEOMETRY]))&&obj.hasOwnProperty(weavejs.geom.GeoJSON.F_P_PROPERTIES)&&typeof obj[weavejs.geom.GeoJSON.F_P_PROPERTIES]==
'object'};weavejs.geom.GeoJSON.isFeatureCollectionObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.T_FEATURE_COLLECTION&&obj.hasOwnProperty(weavejs.geom.GeoJSON.FC_P_FEATURES)&&org.apache.flex.utils.Language.is(obj[weavejs.geom.GeoJSON.FC_P_FEATURES],Array)&&org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.FC_P_FEATURES],Array).every(weavejs.geom.GeoJSON.isFeatureObject)};
weavejs.geom.GeoJSON.isGeometryObject=function(obj,_){_=Array.prototype.slice.call(arguments,1);if(!weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj))return false;var coords=obj.hasOwnProperty(weavejs.geom.GeoJSON.G_P_COORDINATES)?org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.G_P_COORDINATES],Array):null;switch(obj[weavejs.geom.GeoJSON.P_TYPE]){case weavejs.geom.GeoJSON.T_POINT:return weavejs.geom.GeoJSON.isPositionCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_POINT:return coords&&coords.every(weavejs.geom.GeoJSON.isPositionCoords);
case weavejs.geom.GeoJSON.T_LINE_STRING:return weavejs.geom.GeoJSON.isLineStringCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_LINE_STRING:return coords&&coords.every(weavejs.geom.GeoJSON.isLineStringCoords);case weavejs.geom.GeoJSON.T_POLYGON:return weavejs.geom.GeoJSON.isPolygonCoords(coords);case weavejs.geom.GeoJSON.T_MULTI_POLYGON:return coords&&coords.every(weavejs.geom.GeoJSON.isPolygonCoords);case weavejs.geom.GeoJSON.T_GEOMETRY_COLLECTION:return weavejs.geom.GeoJSON.isGeometryCollectionObject(obj);
default:return false}};weavejs.geom.GeoJSON.isGeometryCollectionObject=function(obj){return weavejs.geom.GeoJSON.couldBeGeoJSONObject(obj)&&obj.hasOwnProperty(weavejs.geom.GeoJSON.GC_P_GEOMETRIES)&&org.apache.flex.utils.Language.is(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array)&&org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array).every(weavejs.geom.GeoJSON.isGeometryObject)};
weavejs.geom.GeoJSON.isPositionCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=2&&weavejs.util.StandardLib.getArrayType(array)==Number};weavejs.geom.GeoJSON.isLineStringCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=2&&array.every(weavejs.geom.GeoJSON.isPositionCoords)};
weavejs.geom.GeoJSON.isLinearRingCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.length>=4&&array.every(weavejs.geom.GeoJSON.isPositionCoords)&&weavejs.util.StandardLib.compare(array[0],array[array.length-1])==0};weavejs.geom.GeoJSON.isPolygonCoords=function(coords,_){_=Array.prototype.slice.call(arguments,1);var array=org.apache.flex.utils.Language.as(coords,Array);return array&&array.every(weavejs.geom.GeoJSON.isLinearRingCoords)};
weavejs.geom.GeoJSON.isCRSObject=function(obj){if(obj==null)return true;if(!obj.hasOwnProperty(weavejs.geom.GeoJSON.CRS_P_TYPE)||!obj.hasOwnProperty(weavejs.geom.GeoJSON.CRS_P_PROPERTIES))return false;var props=obj[weavejs.geom.GeoJSON.CRS_P_PROPERTIES];switch(obj[weavejs.geom.GeoJSON.CRS_P_TYPE]){case weavejs.geom.GeoJSON.CRS_T_NAME:return props&&props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_N_P_NAME)&&org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_N_P_NAME],String);case weavejs.geom.GeoJSON.CRS_T_LINK:return props&&
props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_L_P_HREF)&&org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_L_P_HREF],String)&&(!props.hasOwnProperty(weavejs.geom.GeoJSON.CRS_L_P_TYPE)||org.apache.flex.utils.Language.is(props[weavejs.geom.GeoJSON.CRS_L_P_TYPE],String));default:return false}};
weavejs.geom.GeoJSON.isBBOXObject=function(obj){var array=org.apache.flex.utils.Language.as(obj,Array);return weavejs.util.StandardLib.getArrayType(array)==Number&&array.length>=4&&array.length%2==0};
weavejs.geom.GeoJSON.asFeatureCollection=function(obj,_){_=Array.prototype.slice.call(arguments,1);if(weavejs.geom.GeoJSON.isFeatureCollectionObject(obj))return obj;var features=null;if(weavejs.geom.GeoJSON.isFeatureObject(obj))features=[obj];if(weavejs.geom.GeoJSON.isGeometryCollectionObject(obj))features=org.apache.flex.utils.Language.as(obj[weavejs.geom.GeoJSON.GC_P_GEOMETRIES],Array).map(weavejs.geom.GeoJSON.geometryAsFeature);if(weavejs.geom.GeoJSON.isGeometryObject(obj))features=[weavejs.geom.GeoJSON.geometryAsFeature(obj)];
var featureCollection={};featureCollection[weavejs.geom.GeoJSON.P_TYPE]=weavejs.geom.GeoJSON.T_FEATURE_COLLECTION;featureCollection[weavejs.geom.GeoJSON.FC_P_FEATURES]=features||[];return featureCollection};
weavejs.geom.GeoJSON.geometryAsFeature=function(obj,id,_){id=typeof id!=='undefined'?id:undefined;_=typeof _!=='undefined'?_:undefined;var feature={};feature[weavejs.geom.GeoJSON.P_TYPE]=feature[weavejs.geom.GeoJSON.T_FEATURE];if(id!==undefined)feature[weavejs.geom.GeoJSON.F_P_ID]=id;feature[weavejs.geom.GeoJSON.F_P_GEOMETRY]=obj;feature[weavejs.geom.GeoJSON.F_P_PROPERTIES]=null;return feature};
weavejs.geom.GeoJSON.getMultiGeomObject=function(geoms){var __localFn0__=function(geom,_){_=Array.prototype.slice.call(arguments,1);return geom[weavejs.geom.GeoJSON.G_P_COORDINATES]};var first=geoms[0];var type=first?first[weavejs.geom.GeoJSON.P_TYPE]:weavejs.geom.GeoJSON.T_MULTI_POINT;var multiType=weavejs.geom.GeoJSON.typeToMultiType(type);var allCoords=geoms.map(__localFn0__);var multiCoords;if(type==multiType){multiCoords=[];multiCoords=multiCoords.concat.apply(multiCoords,allCoords)}else multiCoords=
allCoords;var multiGeom={};multiGeom[weavejs.geom.GeoJSON.P_TYPE]=multiType;multiGeom[weavejs.geom.GeoJSON.G_P_COORDINATES]=multiCoords;return multiGeom};
weavejs.geom.GeoJSON.typeToMultiType=function(type){if(type==weavejs.geom.GeoJSON.T_POINT||type==weavejs.geom.GeoJSON.T_MULTI_POINT)return weavejs.geom.GeoJSON.T_MULTI_POINT;if(type==weavejs.geom.GeoJSON.T_LINE_STRING||type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING)return weavejs.geom.GeoJSON.T_MULTI_LINE_STRING;if(type==weavejs.geom.GeoJSON.T_POLYGON||type==weavejs.geom.GeoJSON.T_MULTI_POLYGON)return weavejs.geom.GeoJSON.T_MULTI_POLYGON;return null};
weavejs.geom.GeoJSON.getProjectionFromURN=function(ogc_crs_urn){var array=ogc_crs_urn.split(':');if(array.length>2)return array[array.length-3]+':'+array[array.length-1];return ogc_crs_urn};weavejs.geom.GeoJSON.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSON',qName:'weavejs.geom.GeoJSON'}]};goog.provide('weavejs.geom.GeometryType');weavejs.geom.GeometryType=function(){};weavejs.geom.GeometryType.POINT='Point';weavejs.geom.GeometryType.LINE='Arc';weavejs.geom.GeometryType.POLYGON='Polygon';
weavejs.geom.GeometryType.toGeoJsonType=function(type,multi){if(type==weavejs.geom.GeometryType.POINT)return multi?weavejs.geom.GeoJSON.T_MULTI_POINT:weavejs.geom.GeoJSON.T_POINT;if(type==weavejs.geom.GeometryType.LINE)return multi?weavejs.geom.GeoJSON.T_MULTI_LINE_STRING:weavejs.geom.GeoJSON.T_LINE_STRING;if(type==weavejs.geom.GeometryType.POLYGON)return multi?weavejs.geom.GeoJSON.T_MULTI_POLYGON:weavejs.geom.GeoJSON.T_POLYGON;return null};
weavejs.geom.GeometryType.fromPostGISType=function(postGISType){switch(postGISType){case 1:case 4:return weavejs.geom.GeometryType.POINT;break;case 2:case 5:return weavejs.geom.GeometryType.LINE;break;case 3:case 6:return weavejs.geom.GeometryType.POLYGON;break;default:return null}};weavejs.geom.GeometryType.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryType',qName:'weavejs.geom.GeometryType'}]};goog.provide('weavejs.api.data.ISimpleGeometry');weavejs.api.data.ISimpleGeometry=function(){};weavejs.api.data.ISimpleGeometry.prototype.isLine=function(){};weavejs.api.data.ISimpleGeometry.prototype.isPoint=function(){};weavejs.api.data.ISimpleGeometry.prototype.isPolygon=function(){};weavejs.api.data.ISimpleGeometry.prototype.getVertices=function(){};weavejs.api.data.ISimpleGeometry.prototype.setVertices=function(o){};
weavejs.api.data.ISimpleGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'ISimpleGeometry',qName:'weavejs.api.data.ISimpleGeometry'}]};goog.provide('weavejs.geom.SimpleGeometry');goog.require('weavejs.api.data.ISimpleGeometry');weavejs.geom.SimpleGeometry=function(type,points){type=typeof type!=='undefined'?type:'Polygon';points=typeof points!=='undefined'?points:null;this.bounds=new weavejs.geom.Bounds2D;this._type=type;if(points)this.setVertices(points)};weavejs.geom.SimpleGeometry.prototype.getVertices=function(){return this._vertices};
weavejs.geom.SimpleGeometry.prototype.setVertices=function(points){this._vertices=points.concat();this.bounds.reset();var foreachiter0_target=this._vertices;for(var foreachiter0 in foreachiter0_target){var obj=foreachiter0_target[foreachiter0];this.bounds.includeCoords(obj.x,obj.y)}};weavejs.geom.SimpleGeometry.prototype.isPolygon=function(){return this._type==weavejs.geom.GeometryType.POLYGON};weavejs.geom.SimpleGeometry.prototype.isLine=function(){return this._type==weavejs.geom.GeometryType.LINE};
weavejs.geom.SimpleGeometry.prototype.isPoint=function(){return this._type==weavejs.geom.GeometryType.POINT};weavejs.geom.SimpleGeometry.prototype.bounds;weavejs.geom.SimpleGeometry.prototype._vertices=null;weavejs.geom.SimpleGeometry.prototype._type='';
weavejs.geom.SimpleGeometry.getNewGeometryFromBounds=function(bounds){var xMin=bounds.getXMin();var xMax=bounds.getXMax();var yMin=bounds.getYMin();var yMax=bounds.getYMax();var geom=new weavejs.geom.SimpleGeometry(weavejs.geom.GeometryType.POLYGON);geom.setVertices([new weavejs.geom.Point(xMin,yMin),new weavejs.geom.Point(xMax,yMin),new weavejs.geom.Point(xMax,yMax),new weavejs.geom.Point(xMin,yMax)]);return geom};
weavejs.geom.SimpleGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'SimpleGeometry',qName:'weavejs.geom.SimpleGeometry'}],interfaces:[weavejs.api.data.ISimpleGeometry]};goog.provide('weavejs.util.ArrayUtils');weavejs.util.ArrayUtils=function(){};weavejs.util.ArrayUtils.map_primitive_lookup=new weavejs.util.JS.Map;weavejs.util.ArrayUtils.map_object_lookup=new weavejs.util.JS.WeakMap;weavejs.util.ArrayUtils._lookupId=0;weavejs.util.ArrayUtils._getLookup=function(key){var lookup=key===null||typeof key!=='object'?weavejs.util.ArrayUtils.map_primitive_lookup:weavejs.util.ArrayUtils.map_object_lookup;return lookup.get(key)};
weavejs.util.ArrayUtils._setLookup=function(key,value){var lookup=key===null||typeof key!=='object'?weavejs.util.ArrayUtils.map_primitive_lookup:weavejs.util.ArrayUtils.map_object_lookup;lookup.set(key,value)};
weavejs.util.ArrayUtils.union=function(arrays){arrays=Array.prototype.slice.call(arguments,0);var result=[];weavejs.util.ArrayUtils._lookupId++;var foreachiter0_target=arrays;for(var foreachiter0 in foreachiter0_target){var array=foreachiter0_target[foreachiter0];var foreachiter1_target=array;for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];if(weavejs.util.ArrayUtils._getLookup(item)!==weavejs.util.ArrayUtils._lookupId){weavejs.util.ArrayUtils._setLookup(item,
weavejs.util.ArrayUtils._lookupId);result.push(item)}}}return result};
weavejs.util.ArrayUtils.intersection=function(firstArray,secondArray,moreArrays){moreArrays=Array.prototype.slice.call(arguments,2);moreArrays.unshift(secondArray);var result=[];var item;var lastArray=moreArrays.pop();weavejs.util.ArrayUtils._lookupId++;var foreachiter2_target=lastArray;for(var foreachiter2 in foreachiter2_target){item=foreachiter2_target[foreachiter2];weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId)}var foreachiter3_target=moreArrays;for(var foreachiter3 in foreachiter3_target){var array=
foreachiter3_target[foreachiter3];var foreachiter4_target=array;for(var foreachiter4 in foreachiter4_target){item=foreachiter4_target[foreachiter4];if(weavejs.util.ArrayUtils._getLookup(item)===weavejs.util.ArrayUtils._lookupId)weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId+1)}weavejs.util.ArrayUtils._lookupId++}var foreachiter5_target=firstArray;for(var foreachiter5 in foreachiter5_target){item=foreachiter5_target[foreachiter5];if(weavejs.util.ArrayUtils._getLookup(item)===
weavejs.util.ArrayUtils._lookupId)result.push(item)}return result};
weavejs.util.ArrayUtils.subtract=function(array,itemsToRemove){var item;weavejs.util.ArrayUtils._lookupId++;var foreachiter6_target=itemsToRemove;for(var foreachiter6 in foreachiter6_target){item=foreachiter6_target[foreachiter6];weavejs.util.ArrayUtils._setLookup(item,weavejs.util.ArrayUtils._lookupId)}var result=[];var i=0;var foreachiter7_target=array;for(var foreachiter7 in foreachiter7_target){item=foreachiter7_target[foreachiter7];if(weavejs.util.ArrayUtils._getLookup(item)!==weavejs.util.ArrayUtils._lookupId)result[i++]=
item}return result};weavejs.util.ArrayUtils.copy=function(source,destination){destination=typeof destination!=='undefined'?destination:null;if(!destination)destination=[];destination.length=source.length;for(var i in source)destination[i]=source[i];return destination};weavejs.util.ArrayUtils.fillKeys=function(output,keys){var foreachiter8_target=keys;for(var foreachiter8 in foreachiter8_target){var key=foreachiter8_target[foreachiter8];output[key]=true}};
weavejs.util.ArrayUtils.isEmpty=function(object){for(var key in object)return false;return true};weavejs.util.ArrayUtils.removeDuplicatesFromSortedArray=function(sorted){var n=sorted.length;if(n==0)return;var write=0;var prev=sorted[0]===undefined?null:undefined;for(var read=0;read<n;++read){var item=sorted[read];if(item!==prev)sorted[write++]=prev=item}sorted.length=write};
weavejs.util.ArrayUtils.randomSort=function(array){var i=array.length;while(i){var j=Math.floor(Math.random()*i--);var temp=array[i];array[i]=array[j];array[j]=temp}};
weavejs.util.ArrayUtils.partition=function(list,firstIndex,lastIndex,pivotIndex,compareFunction){var temp;var pivotValue=list[pivotIndex];temp=list[pivotIndex];list[pivotIndex]=list[lastIndex];list[lastIndex]=temp;var storeIndex=firstIndex;for(var i=firstIndex;i<lastIndex;i++)if(compareFunction(list[i],pivotValue)<0){if(storeIndex!=i){temp=list[storeIndex];list[storeIndex]=list[i];list[i]=temp}storeIndex++}if(storeIndex!=lastIndex){temp=list[storeIndex];list[storeIndex]=list[lastIndex];list[lastIndex]=
temp}return storeIndex};weavejs.util.ArrayUtils.testPartition=function(){var list=[3,7,5,8,2];var pivotIndex=weavejs.util.ArrayUtils.partition(list,0,list.length-1,list.length/2,weavejs.util.StandardLib.compare);for(var i=0;i<list.length;i++)if(i<pivotIndex!=list[i]<list[pivotIndex])throw new Error('assertion fail');};
weavejs.util.ArrayUtils.getMedianIndex=function(list,compareFunction,firstIndex,lastIndex){firstIndex=typeof firstIndex!=='undefined'?firstIndex:0;lastIndex=typeof lastIndex!=='undefined'?lastIndex:-1;var left=firstIndex;var right=lastIndex>=0?lastIndex:list.length-1;if(left>=right)return left;var medianIndex=(left+right)/2;while(true){var pivotIndex=weavejs.util.ArrayUtils.partition(list,left,right,(left+right)/2,compareFunction);if(medianIndex==pivotIndex)break;if(medianIndex<pivotIndex)right=pivotIndex-
1;else left=pivotIndex+1}return medianIndex};
weavejs.util.ArrayUtils.mergeSorted=function(sortedInputA,sortedInputB,mergedOutput,comparator){var indexA=0;var indexB=0;var indexOut=0;var lengthA=sortedInputA.length;var lengthB=sortedInputB.length;while(indexA<lengthA&&indexB<lengthB)if(comparator(sortedInputA[indexA],sortedInputB[indexB])<0)mergedOutput[indexOut++]=sortedInputA[indexA++];else mergedOutput[indexOut++]=sortedInputB[indexB++];while(indexA<lengthA)mergedOutput[indexOut++]=sortedInputA[indexA++];while(indexB<lengthB)mergedOutput[indexOut++]=
sortedInputB[indexB++];mergedOutput.length=indexOut};weavejs.util.ArrayUtils.flatten=function(source,destination){destination=typeof destination!=='undefined'?destination:null;if(destination==null)destination=[];if(source==null)return destination;for(var i=0;i<source.length;i++)if(org.apache.flex.utils.Language.is(source[i],Array))weavejs.util.ArrayUtils.flatten(source[i],destination);else destination.push(source[i]);return destination};
weavejs.util.ArrayUtils.flattenObject=function(input,output,prefix){output=typeof output!=='undefined'?output:null;prefix=typeof prefix!=='undefined'?prefix:'';if(output==null)output={};if(input==null)return output;for(var key in input)if(typeof input[key]=='object')weavejs.util.ArrayUtils.flattenObject(input[key],output,prefix+key+'.');else output[prefix+key]=input[key];return output};
weavejs.util.ArrayUtils.joinItems=function(arrayOfArrays,separator,includeEmptyItems){var maxLength=0;var itemList;var foreachiter9_target=arrayOfArrays;for(var foreachiter9 in foreachiter9_target){itemList=foreachiter9_target[foreachiter9];maxLength=Math.max(maxLength,itemList.length)}var result=[];for(var itemIndex=0;itemIndex<maxLength;itemIndex++){var joinedItem=[];for(var listIndex=0;listIndex<arrayOfArrays.length;listIndex++){itemList=org.apache.flex.utils.Language.as(arrayOfArrays[listIndex],
Array);var item='';if(itemList&&itemIndex<itemList.length)item=itemList[itemIndex]||'';if(item||includeEmptyItems)joinedItem.push(item)}result.push(joinedItem.join(separator))}return result};
weavejs.util.ArrayUtils.binarySearch=function(sortedUniqueValues,item,exactMatchOnly,compare){compare=typeof compare!=='undefined'?compare:null;var i=0,imin=0,imax=sortedUniqueValues.length-1;while(imin<=imax){i=(imin+imax)/2;var a=sortedUniqueValues[i];var c=compare!=null?compare(item,a):item<a?-1:item>a?1:0;if(c<0)imax=i-1;else if(c>0)imin=++i;else return i}return exactMatchOnly?-1:i};
weavejs.util.ArrayUtils.zipObject=function(keys,values){var n=Math.min(keys.length,values.length);var o={};for(var i=0;i<n;i++)o[keys[i]]=values[i];return o};
weavejs.util.ArrayUtils.getItems=function(object,keys,output){output=typeof output!=='undefined'?output:null;if(!output)output=org.apache.flex.utils.Language.is(object,Array)?[]:{};if(!object)return output;var keyIndex,keyValue,item;for(keyIndex in keys){keyValue=keys[keyIndex];item=object[keyValue];if(org.apache.flex.utils.Language.is(output,Array))output[keyIndex]=item;else output[keyValue]=item}if(org.apache.flex.utils.Language.is(output,Array))output.length=keys?keys.length:0;return output};
weavejs.util.ArrayUtils.compareProperties=function(object1,object2,propertyNames){var foreachiter10_target=propertyNames;for(var foreachiter10 in foreachiter10_target){var name=foreachiter10_target[foreachiter10];var result=weavejs.util.StandardLib.compare(object1[name],object2[name]);if(result)return result}return 0};
weavejs.util.ArrayUtils.removeByIndex=function(array,indices){var n=array.length;var skipList=weavejs.util.ArrayUtils.union(indices);var iSkip=0;var skip=skipList[0];var write=skip;for(var read=skip;read<n;++read)if(read==skip)skip=skipList[++iSkip];else array[write++]=array[read];array.length=write};weavejs.util.ArrayUtils.pluck=function(array,property){weavejs.util.ArrayUtils._pluckProperty=property;return array.map(weavejs.util.ArrayUtils._pluck)};weavejs.util.ArrayUtils._pluckProperty;
weavejs.util.ArrayUtils._pluck=function(item,i,a){return item!=null?item[weavejs.util.ArrayUtils._pluckProperty]:undefined};weavejs.util.ArrayUtils.transpose=function(table){var result=[];for(var iCol=0;iCol<table.length;iCol++){var col=table[iCol];for(var iRow=0;iRow<col.length;iRow++){var row=result[iRow]||(result[iRow]=[]);row[iCol]=col[iRow]}}return result};
weavejs.util.ArrayUtils.createLookup=function(array,propertyChain){propertyChain=Array.prototype.slice.call(arguments,1);var lookup=new weavejs.util.JS.Map;for(var key in array){var value=array[key];var foreachiter11_target=propertyChain;for(var foreachiter11 in foreachiter11_target){var prop=foreachiter11_target[foreachiter11];value=value[prop]}lookup[value]=key}return lookup};weavejs.util.ArrayUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'ArrayUtils',qName:'weavejs.util.ArrayUtils'}]};goog.provide('weavejs.geom.GeneralizedGeometry');goog.require('weavejs.geom.BLGNode');goog.require('weavejs.geom.BLGTree');goog.require('weavejs.geom.BLGTreeUtils');goog.require('weavejs.geom.Bounds2D');goog.require('weavejs.geom.GeoJSON');goog.require('weavejs.geom.GeometryType');goog.require('weavejs.geom.SimpleGeometry');goog.require('weavejs.geom.VertexChainLink');goog.require('weavejs.util.ArrayUtils');
weavejs.geom.GeneralizedGeometry=function(geomType){geomType=typeof geomType!=='undefined'?geomType:'Polygon';this.partMarkers=[];this.map_blgTree_receivedPartMarker=new weavejs.util.JS.WeakMap;this.parts=[];this.bounds=new weavejs.geom.Bounds2D;this._simplifiedParts=[];this.geomType=geomType;this.parts[0]=new weavejs.geom.BLGTree};
weavejs.geom.GeneralizedGeometry.fromGeoJson=function(geoJsonGeom){var type=geoJsonGeom[weavejs.geom.GeoJSON.P_TYPE];var coords=geoJsonGeom[weavejs.geom.GeoJSON.G_P_COORDINATES];if(type==weavejs.geom.GeoJSON.T_POINT)type=weavejs.geom.GeometryType.POINT,coords=[[[coords]]];else if(type==weavejs.geom.GeoJSON.T_MULTI_POINT)type=weavejs.geom.GeometryType.POINT,coords=[[coords]];else if(type==weavejs.geom.GeoJSON.T_LINE_STRING)type=weavejs.geom.GeometryType.LINE,coords=[[coords]];else if(type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING)type=
weavejs.geom.GeometryType.LINE,coords=[coords];else if(type==weavejs.geom.GeoJSON.T_POLYGON)type=weavejs.geom.GeometryType.POLYGON,coords=[coords];else if(type==weavejs.geom.GeoJSON.T_MULTI_POLYGON)type=weavejs.geom.GeometryType.POLYGON;var result=[];var foreachiter0_target=coords;for(var foreachiter0 in foreachiter0_target){var poly=foreachiter0_target[foreachiter0];var geom=new weavejs.geom.GeneralizedGeometry(type);var xyCoords=[];var foreachiter1_target=poly;for(var foreachiter1 in foreachiter1_target){var part=
foreachiter1_target[foreachiter1];if(xyCoords.length>0)xyCoords.push(NaN,NaN);var foreachiter2_target=part;for(var foreachiter2 in foreachiter2_target){var point=foreachiter2_target[foreachiter2];xyCoords.push(point[0],point[1])}}geom.setCoordinates(xyCoords,weavejs.geom.BLGTreeUtils.METHOD_SAMPLE);result.push(geom)}return result};
weavejs.geom.GeneralizedGeometry.prototype.toGeoJson=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;var type=weavejs.geom.GeometryType.toGeoJsonType(this.geomType,true);var coords=[];var parts=this.getSimplifiedGeometry(minImportance,visibleBounds);var part;var node;if(type==weavejs.geom.GeoJSON.T_MULTI_POINT){var foreachiter3_target=parts;for(var foreachiter3 in foreachiter3_target){part=
foreachiter3_target[foreachiter3];var foreachiter4_target=part;for(var foreachiter4 in foreachiter4_target){node=foreachiter4_target[foreachiter4];coords.push([node.x,node.y])}}}else if(type==weavejs.geom.GeoJSON.T_MULTI_LINE_STRING){var foreachiter5_target=parts;for(var foreachiter5 in foreachiter5_target){part=foreachiter5_target[foreachiter5];var lineString=[];var foreachiter6_target=part;for(var foreachiter6 in foreachiter6_target){node=foreachiter6_target[foreachiter6];lineString.push([node.x,
node.y])}coords.push(lineString)}}else if(type==weavejs.geom.GeoJSON.T_MULTI_POLYGON){var polygon=[];var foreachiter7_target=parts;for(var foreachiter7 in foreachiter7_target){part=foreachiter7_target[foreachiter7];var linearRing=[];var foreachiter8_target=part;for(var foreachiter8 in foreachiter8_target){node=foreachiter8_target[foreachiter8];linearRing.push([node.x,node.y])}var first=linearRing[0];var last=linearRing[linearRing.length-1];if(first&&!(first[0]==last[0]&&first[1]==last[1]))linearRing.push(first.concat());
polygon.push(linearRing)}coords.push(polygon)}var geom={};geom[weavejs.geom.GeoJSON.P_TYPE]=type;geom[weavejs.geom.GeoJSON.G_P_COORDINATES]=coords;return geom};weavejs.geom.GeneralizedGeometry.prototype.partMarkers;weavejs.geom.GeneralizedGeometry.prototype.map_blgTree_receivedPartMarker;weavejs.geom.GeneralizedGeometry.prototype.parts;weavejs.geom.GeneralizedGeometry.prototype.bounds;weavejs.geom.GeneralizedGeometry.prototype.geomType;
weavejs.geom.GeneralizedGeometry.prototype.isLine=function(){return this.geomType==weavejs.geom.GeometryType.LINE};weavejs.geom.GeneralizedGeometry.prototype.isPoint=function(){return this.geomType==weavejs.geom.GeometryType.POINT};weavejs.geom.GeneralizedGeometry.prototype.isPolygon=function(){return this.geomType==weavejs.geom.GeometryType.POLYGON};
weavejs.geom.GeneralizedGeometry.prototype.getSimpleGeometries=function(minImportance,visibleBounds,output){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;output=typeof output!=='undefined'?output:null;var result=output||[];var parts=this.getSimplifiedGeometry(minImportance,visibleBounds);for(var i=0;i<parts.length;i++){var part=parts[i];var geom=org.apache.flex.utils.Language.as(result[i],weavejs.api.data.ISimpleGeometry)||
new weavejs.geom.SimpleGeometry(this.geomType);geom.setVertices(weavejs.util.ArrayUtils.copy(part,[]));result[i]=geom}return result};
weavejs.geom.GeneralizedGeometry.prototype.getSimplifiedGeometry=function(minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;if(visibleBounds&&visibleBounds.containsBounds(this.bounds))visibleBounds=null;this._simplifiedParts.length=0;var part;for(var i=0;i<this.parts.length;i++){part=org.apache.flex.utils.Language.as(this.parts[i],weavejs.geom.BLGTree);if(this.parts.length>1&&!this.map_blgTree_receivedPartMarker.get(part))continue;
var simplifiedPart=part.getPointVector(minImportance,visibleBounds);if(simplifiedPart.length==0)continue;if(simplifiedPart.length==1&&this.geomType!=weavejs.geom.GeometryType.POINT)continue;if(simplifiedPart.length==2&&this.geomType==weavejs.geom.GeometryType.POLYGON)continue;this._simplifiedParts.push(simplifiedPart)}return this._simplifiedParts};weavejs.geom.GeneralizedGeometry.prototype._simplifiedParts;
weavejs.geom.GeneralizedGeometry.prototype.addPoint=function(vertexID,importance,x,y){var partID=weavejs.util.ArrayUtils.binarySearch(this.partMarkers,vertexID,false);if(partID<this.partMarkers.length&&this.partMarkers[partID]==vertexID)partID++;var part=org.apache.flex.utils.Language.as(this.parts[partID],weavejs.geom.BLGTree);part.insert(vertexID,importance,x,y)};
weavejs.geom.GeneralizedGeometry.prototype.addPartMarker=function(beginIndex,endIndex){this.splitAtIndex(beginIndex);this.splitAtIndex(endIndex);var partID=weavejs.util.ArrayUtils.binarySearch(this.partMarkers,endIndex,false);var part=org.apache.flex.utils.Language.as(this.parts[partID],weavejs.geom.BLGTree);this.map_blgTree_receivedPartMarker.set(part,true)};
weavejs.geom.GeneralizedGeometry.prototype.splitAtIndex=function(vertexID){if(vertexID<=0||vertexID>=Number.MAX_VALUE||weavejs.util.ArrayUtils.binarySearch(this.partMarkers,vertexID,true)>=0)return;for(var i=this.partMarkers.length;i>0;i--){if(vertexID>this.partMarkers[i-1])break;this.partMarkers[i]=this.partMarkers[i-1];this.parts[i+1]=this.parts[i]}this.partMarkers[i]=vertexID;this.parts[i+1]=org.apache.flex.utils.Language.as(this.parts[i],weavejs.geom.BLGTree).splitAtIndex(vertexID)};
weavejs.geom.GeneralizedGeometry.prototype.setCoordinates=function(xyCoordinates,method){method=typeof method!=='undefined'?method:'BLGTreeUtils.METHOD_SAMPLE';this.bounds.reset();this.partMarkers.length=0;this.parts.length=1;var coordinates=org.apache.flex.utils.Language.as(this.parts[0],weavejs.geom.BLGTree);coordinates.clear();this.map_blgTree_receivedPartMarker.set(coordinates,true);var firstVertex=null;var newVertex;var x,y;var firstVertexID=0;var ix=0;if(this.geomType==weavejs.geom.GeometryType.POINT){for(;ix+
1<xyCoordinates.length;ix+=2){x=xyCoordinates[ix];y=xyCoordinates[ix+1];coordinates.insert(ix/2,Infinity,x,y);this.bounds.includeCoords(x,y)}return}while(ix+1<xyCoordinates.length){var numPoints=0;for(;ix+1<xyCoordinates.length;ix+=2){x=xyCoordinates[ix];y=xyCoordinates[ix+1];if(isNaN(x)&&isNaN(y)){if(numPoints>0){ix+=2;break}continue}if(!isFinite(x)||!isFinite(y))continue;newVertex=weavejs.geom.VertexChainLink.getUnusedInstance(firstVertexID+numPoints,x,y);if(numPoints==0)firstVertex=newVertex;else{if(newVertex.equals2D(firstVertex.prev)){weavejs.geom.VertexChainLink.saveUnusedInstance(newVertex);
continue}if(newVertex.equals2D(firstVertex)){ix+=2;weavejs.geom.VertexChainLink.saveUnusedInstance(newVertex);break}firstVertex.insert(newVertex)}this.bounds.includeCoords(x,y);numPoints++}if(numPoints>0){if(this.geomType==weavejs.geom.GeometryType.LINE&&numPoints>0){firstVertex.importance=Infinity;firstVertex.prev.importance=Infinity}if(firstVertexID>0){coordinates=new weavejs.geom.BLGTree;this.map_blgTree_receivedPartMarker.set(coordinates,true);this.parts.push(coordinates);this.partMarkers.push(firstVertexID)}weavejs.geom.BLGTreeUtils.buildBLGTree(firstVertex,
coordinates,method)}firstVertexID+=numPoints}};Object.defineProperties(weavejs.geom.GeneralizedGeometry.prototype,{isEmpty:{get:function(){if(this.partMarkers.length>0)return false;return org.apache.flex.utils.Language.as(this.parts[0],weavejs.geom.BLGTree).isEmpty}}});weavejs.geom.GeneralizedGeometry.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeneralizedGeometry',qName:'weavejs.geom.GeneralizedGeometry'}]};goog.provide('weavejs.data.column.GeometryColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.geom.GeneralizedGeometry');weavejs.data.column.GeometryColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.map_key_geomArray=new weavejs.util.JS.WeakMap;this._geometryVector=[];this._geometryToIndexMapping=new weavejs.util.JS.WeakMap;this._uniqueKeys=new Array;weavejs.data.column.GeometryColumn.base(this,'constructor',metadata)};
goog.inherits(weavejs.data.column.GeometryColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.GeometryColumn.prototype.map_key_geomArray;weavejs.data.column.GeometryColumn.prototype._geometryVector;weavejs.data.column.GeometryColumn.prototype._geometryToIndexMapping;weavejs.data.column.GeometryColumn.prototype._uniqueKeys;weavejs.data.column.GeometryColumn.prototype.containsKey=function(key){return this.map_key_geomArray.has(key)};
weavejs.data.column.GeometryColumn.prototype.setGeometries=function(keys,geometries){if(this._geometryVector.length>0){this.map_key_geomArray=new weavejs.util.JS.WeakMap;this._geometryToIndexMapping=new weavejs.util.JS.WeakMap}if(keys.length!=geometries.length){org.apache.flex.utils.Language.trace('number of keys does not match number of geometires in GeometryColumn.setGeometries()');return}var geom;var key;var uniqueKeyIndex=0;for(var geomIndex=0;geomIndex<geometries.length;geomIndex++){geom=org.apache.flex.utils.Language.as(geometries[geomIndex],
weavejs.geom.GeneralizedGeometry);key=org.apache.flex.utils.Language.as(keys[geomIndex],weavejs.api.data.IQualifiedKey);this._geometryVector[geomIndex]=geom;if(!this.map_key_geomArray.has(key)){this.map_key_geomArray.set(key,[geom]);this._uniqueKeys[uniqueKeyIndex]=key;uniqueKeyIndex++}else org.apache.flex.utils.Language.as(this.map_key_geomArray.get(key),Array).push(geom);this._geometryToIndexMapping[geom]=geomIndex}this._geometryVector.length=geometries.length;this._uniqueKeys.length=uniqueKeyIndex;
this.triggerCallbacks()};
weavejs.data.column.GeometryColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var value=this.map_key_geomArray.get(key);if(dataType==Boolean)value=org.apache.flex.utils.Language.is(value,Array);else if(dataType==Number){var sum=org.apache.flex.utils.Language.is(value,Array)?0:NaN;var foreachiter0_target=value;for(var foreachiter0 in foreachiter0_target){var geom=foreachiter0_target[foreachiter0];sum+=geom.bounds.getArea()}value=sum}else if(dataType==
String)value=value?'Geometry('+key.keyType+'#'+key.localName+')':undefined;return value};Object.defineProperties(weavejs.data.column.GeometryColumn.prototype,{keys:{get:function(){return this._uniqueKeys}}});weavejs.data.column.GeometryColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeometryColumn',qName:'weavejs.data.column.GeometryColumn'}]};goog.provide('weavejs.data.column.NumberColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.NumberColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;weavejs.data.column.NumberColumn.base(this,'constructor',metadata);this.dataTask=new weavejs.data.column.ColumnDataTask(this,isFinite,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'));this.dataCache=new weavejs.util.Dictionary2D};goog.inherits(weavejs.data.column.NumberColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.NumberColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.NUMBER;return weavejs.data.column.NumberColumn.base(this,'getMetadata',propertyName)};
weavejs.data.column.NumberColumn.prototype.setRecords=function(keys,numericData){this.dataTask.begin(keys,numericData);this.numberToStringFunction=null;var stringFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this.numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER,'array'])}catch(e){this.errorHandler(e)}};
weavejs.data.column.NumberColumn.prototype.asyncComplete=function(){this.dataCache=new weavejs.util.Dictionary2D;this.triggerCallbacks()};weavejs.data.column.NumberColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);str=weavejs.util.StandardLib.substitute('Error in script for attribute column {0}:\n{1}',Weave.stringify(this._metadata),str);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.NumberColumn.prototype._lastError;
weavejs.data.column.NumberColumn.prototype.numberToStringFunction=null;weavejs.data.column.NumberColumn.prototype.deriveStringFromNumber=function(number){if(this.numberToStringFunction!=null)return weavejs.util.StandardLib.asString(this.numberToStringFunction(number,[number]));return weavejs.util.StandardLib.formatNumber(number)};
weavejs.data.column.NumberColumn.prototype.generateValue=function(key,dataType){var array=this.dataTask.map_key_arrayData.get(key);if(dataType===Number)return weavejs.data.column.NumberColumn.aggregate(array,this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]:null);if(dataType===String){var number=this.getValueFromKey(key,Number);if(this.numberToStringFunction!=null)return weavejs.util.StandardLib.asString(this.numberToStringFunction(number,array));if(isNaN(number)&&array&&
array.length>1){var aggregation=org.apache.flex.utils.Language.as(this._metadata&&this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION],String)||weavejs.api.data.Aggregation.DEFAULT;if(aggregation==weavejs.api.data.Aggregation.SAME)return Weave.lang(weavejs.api.data.Aggregation.AMBIGUOUS_DATA)}return weavejs.util.StandardLib.formatNumber(number)}if(dataType===weavejs.api.data.IQualifiedKey)return weavejs.WeaveAPI.QKeyManager.getQKey(weavejs.api.data.DataType.NUMBER,this.getValueFromKey(key,
Number));return null};
weavejs.data.column.NumberColumn.aggregate=function(numbers,aggregation){if(!numbers)return NaN;if(!aggregation)aggregation=weavejs.api.data.Aggregation.DEFAULT;switch(aggregation){case weavejs.api.data.Aggregation.SAME:var first=numbers[0];var foreachiter0_target=numbers;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(value!=first)return NaN}return first;case weavejs.api.data.Aggregation.FIRST:return numbers[0];case weavejs.api.data.Aggregation.LAST:return numbers[numbers.length-1];
case weavejs.api.data.Aggregation.COUNT:return numbers.length;case weavejs.api.data.Aggregation.MEAN:return weavejs.util.StandardLib.mean(numbers);case weavejs.api.data.Aggregation.SUM:return weavejs.util.StandardLib.sum(numbers);case weavejs.api.data.Aggregation.MIN:return Math.min.apply(null,numbers);case weavejs.api.data.Aggregation.MAX:return Math.max.apply(null,numbers);default:return NaN}};
weavejs.data.column.NumberColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumberColumn',qName:'weavejs.data.column.NumberColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};goog.provide('weavejs.util.AsyncSort');goog.require('weavejs.api.core.ILinkableObject');weavejs.util.AsyncSort=function(){};weavejs.util.AsyncSort.debug=false;weavejs.util.AsyncSort._immediateSorter;
weavejs.util.AsyncSort.sortImmediately=function(array,compareFunction){compareFunction=typeof compareFunction!=='undefined'?compareFunction:null;if(!weavejs.util.AsyncSort._immediateSorter){weavejs.util.AsyncSort._immediateSorter=new weavejs.util.AsyncSort;weavejs.util.AsyncSort._immediateSorter._immediately=true}var sorter=weavejs.util.AsyncSort._immediateSorter;weavejs.util.AsyncSort._immediateSorter=null;sorter.beginSort(array,compareFunction);weavejs.util.AsyncSort._immediateSorter=sorter};
weavejs.util.AsyncSort.compareCaseInsensitive=function(a,b){return weavejs.util.StandardLib.stringCompare(a,b,true)};
weavejs.util.AsyncSort.primitiveCompare=function(a,b){if(a===b)return 0;if(a==null)return 1;if(b==null)return-1;var typeA=typeof a;var typeB=typeof b;if(typeA!=typeB)return weavejs.util.StandardLib.stringCompare(typeA,typeB);if(typeA=='boolean')return weavejs.util.StandardLib.numericCompare(Number(a),Number(b));if(typeA=='number')return weavejs.util.StandardLib.numericCompare(org.apache.flex.utils.Language.as(a,Number),org.apache.flex.utils.Language.as(b,Number));if(typeA=='string')return weavejs.util.StandardLib.stringCompare(org.apache.flex.utils.Language.as(a,
String),org.apache.flex.utils.Language.as(b,String));if(org.apache.flex.utils.Language.is(a,Date)&&org.apache.flex.utils.Language.is(b,Date))return weavejs.util.StandardLib.dateCompare(org.apache.flex.utils.Language.as(a,Date),org.apache.flex.utils.Language.as(b,Date));return 1};weavejs.util.AsyncSort.prototype.original;weavejs.util.AsyncSort.prototype.source;weavejs.util.AsyncSort.prototype.destination;weavejs.util.AsyncSort.prototype.compare;weavejs.util.AsyncSort.prototype.length;weavejs.util.AsyncSort.prototype.subArraySize;
weavejs.util.AsyncSort.prototype.middle;weavejs.util.AsyncSort.prototype.end;weavejs.util.AsyncSort.prototype.iLeft;weavejs.util.AsyncSort.prototype.iRight;weavejs.util.AsyncSort.prototype.iMerged;weavejs.util.AsyncSort.prototype.elapsed;weavejs.util.AsyncSort.prototype._immediately=false;
weavejs.util.AsyncSort.prototype.beginSort=function(arrayToSort,compareFunction){compareFunction=typeof compareFunction!=='undefined'?compareFunction:null;this.compare=compareFunction||weavejs.util.AsyncSort.primitiveCompare;this.original=arrayToSort||[];this.source=this.original;this.length=this.original.length;var Type=org.apache.flex.utils.Language.as(this.source,Object).constructor;this.destination=new Type;this.destination.length=this.length;this.subArraySize=1;this.iLeft=0;this.iRight=0;this.middle=
0;this.end=0;this.elapsed=0;if(this._immediately){this.iterate(Number.MAX_VALUE);this.done()}else weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.done,this,'done'),Weave.lang('Sorting {0} items',this.original.length))};
weavejs.util.AsyncSort.prototype.abort=function(){this.compare=null;this.source=this.original=this.destination=null;this.length=this.subArraySize=this.iLeft=this.iRight=this.middle=this.end=this.elapsed=0};
weavejs.util.AsyncSort.prototype.iterate=function(stopTime){var time=weavejs.util.JS.now();while(weavejs.util.JS.now()<stopTime)if(this.iLeft<this.middle)if(this.iRight<this.end&&this.compare(this.source[this.iRight],this.source[this.iLeft])<0)this.destination[this.iMerged++]=this.source[this.iRight++];else this.destination[this.iMerged++]=this.source[this.iLeft++];else if(this.iRight<this.end)this.destination[this.iMerged++]=this.source[this.iRight++];else if(this.end<this.length){var start=this.end;
this.middle=Math.min(start+this.subArraySize,this.length);this.end=Math.min(this.middle+this.subArraySize,this.length);this.iLeft=start;this.iRight=this.middle;this.iMerged=start}else{var merged=this.destination;this.destination=this.source;this.source=merged;this.end=0;this.subArraySize*=2;if(this.subArraySize>=this.length)break}this.elapsed+=weavejs.util.JS.now()-time;if(this.subArraySize>=this.length)return 1;return this.subArraySize/this.length};
weavejs.util.AsyncSort.prototype.done=function(){if(this.source!=this.original){var i=this.length;while(i--)this.original[i]=this.source[i]}this.source=null;this.destination=null;if(weavejs.util.AsyncSort.debug&&this.elapsed>0)weavejs.util.DebugUtils.debugTrace(this,this.result.length,'in',this.elapsed/1E3,'seconds');if(!this._immediately)Weave.getCallbacks(this).triggerCallbacks()};weavejs.util.AsyncSort._testArrays;weavejs.util.AsyncSort._testArraysSortOn;weavejs.util.AsyncSort._testType=-1;
weavejs.util.AsyncSort.initTestArrays=function(testType){if(testType!=weavejs.util.AsyncSort._testType){weavejs.util.AsyncSort._testType=testType;weavejs.util.AsyncSort._testArrays=[];weavejs.util.AsyncSort._testArraysSortOn=[];var foreachiter0_target=[0,1,2,3,4,5,50,3E3,6E3,12E3,25E3,5E4];for(var foreachiter0 in foreachiter0_target){var n=foreachiter0_target[foreachiter0];var array=[];var arraySortOn=[];for(var i=0;i<n;i++){var value;if(testType==0)value=org.apache.flex.utils.Language.uint(Math.random()*
100);else if(testType==1)value=Math.random()<.5?NaN:org.apache.flex.utils.Language.uint(Math.random()*100);else if(testType==2)value='a'+Math.random();array.push(value);arraySortOn.push({'value':value})}weavejs.util.AsyncSort._testArrays.push(array);weavejs.util.AsyncSort._testArraysSortOn.push(arraySortOn)}}var desc=['uint','uint and NaN','string'][testType];org.apache.flex.utils.Language.trace('testType \x3d',testType,'('+desc+')')};
weavejs.util.AsyncSort.test=function(compare,testType){testType=typeof testType!=='undefined'?testType:0;weavejs.util.AsyncSort.initTestArrays(testType);weavejs.util.AsyncSort._debugCompareFunction=org.apache.flex.utils.Language.as(compare,Function);var foreachiter1_target=weavejs.util.AsyncSort._testArrays;for(var foreachiter1 in foreachiter1_target){var _array=foreachiter1_target[foreachiter1];var array1=_array.concat();var array2=_array.concat();var start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=
0;if(compare===null)array1.sort(0);else if(org.apache.flex.utils.Language.is(compare,Function))array1.sort(weavejs.util.AsyncSort._debugCompareCounter);else array1.sort(compare);org.apache.flex.utils.Language.trace('Array.sort',array1.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort.sortImmediately(array2,
org.apache.flex.utils.Language.is(compare,Function)?weavejs.util.AsyncSort._debugCompareCounter:null);org.apache.flex.utils.Language.trace('Merge Sort',array2.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');if(array2.length==1&&weavejs.util.StandardLib.compare(array1[0],array2[0])!=0)throw new Error('sort failed on array length 1');weavejs.util.AsyncSort.verifyNumbersSorted(array2)}};
weavejs.util.AsyncSort.testSortOn=function(compare,testType){testType=typeof testType!=='undefined'?testType:0;weavejs.util.AsyncSort.initTestArrays(testType);weavejs.util.AsyncSort._debugCompareFunction=weavejs.util.AsyncSort.newSortOnCompare('value',org.apache.flex.utils.Language.as(compare,Function)||weavejs.util.AsyncSort.primitiveCompare);var foreachiter2_target=weavejs.util.AsyncSort._testArraysSortOn;for(var foreachiter2 in foreachiter2_target){var _array=foreachiter2_target[foreachiter2];
var array1=_array.concat();var array2=_array.concat();var array3=_array.concat();var array4=_array.concat();var start;start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;var plucked=new Array(_array.length);var i=_array.length;while(i--)plucked[i]=_array[i]['value'];if(compare===null)plucked.sort(0);else if(org.apache.flex.utils.Language.is(compare,Function))plucked.sort(weavejs.util.AsyncSort._debugCompareCounter);else plucked.sort(compare);org.apache.flex.utils.Language.trace('Pluck \x26 sort',
plucked.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.StandardLib.sortOn(array3,'value');org.apache.flex.utils.Language.trace('StdLib sortOn',array3.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+
' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.StandardLib.sortOn(array4,['value']);org.apache.flex.utils.Language.trace('StdLib sortOn[]',array4.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');start=weavejs.util.JS.now();weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort.sortImmediately(array2,weavejs.util.AsyncSort._debugCompareCounter);
org.apache.flex.utils.Language.trace('Merge SortOn',array2.length,'numbers;',(weavejs.util.JS.now()-start)/1E3,'seconds;',weavejs.util.AsyncSort._debugCompareCount?weavejs.util.AsyncSort._debugCompareCount+' comparisons':'');if(array2.length==1&&weavejs.util.StandardLib.compare(array1[0],array2[0])!=0)throw new Error('sort failed on array length 1');weavejs.util.AsyncSort.verifyNumbersSorted(array2)}};
weavejs.util.AsyncSort.newSortOnCompare=function(prop,compare){var __localFn0__=function(a,b){return compare(a[prop],b[prop])};return __localFn0__};weavejs.util.AsyncSort.verifyNumbersSorted=function(array){for(var i=1;i<array.length;i++)if(weavejs.util.StandardLib.numericCompare(array[i-1],array[i])>0)throw new Error('ASSERTION FAIL '+array[i-1]+' \x3e '+array[i]);};weavejs.util.AsyncSort._debugCompareCount=0;weavejs.util.AsyncSort._debugCompareFunction=null;
weavejs.util.AsyncSort._debugCompareCounter=function(a,b){weavejs.util.AsyncSort._debugCompareCount++;return weavejs.util.AsyncSort._debugCompareFunction(a,b)};Object.defineProperties(weavejs.util.AsyncSort.prototype,{result:{get:function(){return this.source?null:this.original}}});weavejs.util.AsyncSort.prototype.FLEXJS_CLASS_INFO={names:[{name:'AsyncSort',qName:'weavejs.util.AsyncSort'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.column.StringColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.util.AsyncSort');goog.require('weavejs.api.data.IBaseColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.StringColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this._uniqueStrings=[];this._asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);this._numberToString={};this._stringToNumber={};weavejs.data.column.StringColumn.base(this,'constructor',metadata);this.dataTask=new weavejs.data.column.ColumnDataTask(this,org.apache.flex.utils.Language.closure(this.filterStringValue,this,'filterStringValue'),org.apache.flex.utils.Language.closure(this.handleDataTaskComplete,
this,'handleDataTaskComplete'));this.dataCache=new weavejs.util.Dictionary2D};goog.inherits(weavejs.data.column.StringColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.StringColumn.prototype.getMetadata=function(propertyName){var value=weavejs.data.column.StringColumn.base(this,'getMetadata',propertyName);if(!value&&propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.STRING;return value};weavejs.data.column.StringColumn.prototype._uniqueStrings;
weavejs.data.column.StringColumn.prototype._uniqueStringLookup;
weavejs.data.column.StringColumn.prototype.setRecords=function(keys,stringData){this.dataTask.begin(keys,stringData);this._asyncSort.abort();this._uniqueStrings.length=0;this._uniqueStringLookup={};this._stringToNumberFunction=null;this._numberToStringFunction=null;var numberFormat=this.getMetadata(weavejs.api.data.ColumnMetadata.NUMBER);if(numberFormat)try{this._stringToNumberFunction=weavejs.util.JS.compile(numberFormat,[weavejs.api.data.ColumnMetadata.STRING,'array'])}catch(e){weavejs.util.JS.error(e)}var stringFormat=
this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(stringFormat)try{this._numberToStringFunction=weavejs.util.JS.compile(stringFormat,[weavejs.api.data.ColumnMetadata.NUMBER])}catch(e){weavejs.util.JS.error(e)}};
weavejs.data.column.StringColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);str=weavejs.util.StandardLib.substitute('Error in script for AttributeColumn {0}:\n{1}',Weave.stringify(this._metadata),str);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.StringColumn.prototype._lastError;weavejs.data.column.StringColumn.prototype._stringToNumberFunction=null;
weavejs.data.column.StringColumn.prototype._numberToStringFunction=null;weavejs.data.column.StringColumn.prototype.filterStringValue=function(value){if(!value)return false;if(this._uniqueStringLookup[value]===undefined){this._uniqueStrings.push(value);this._uniqueStringLookup[value]=-1}return true};weavejs.data.column.StringColumn.prototype.handleDataTaskComplete=function(){this._asyncSort.beginSort(this._uniqueStrings,weavejs.util.AsyncSort.compareCaseInsensitive)};weavejs.data.column.StringColumn.prototype._asyncSort;
weavejs.data.column.StringColumn.prototype.handleSortComplete=function(){if(!this._asyncSort.result)return;this._i=0;this._numberToString={};weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._iterate,this,'_iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'))};weavejs.data.column.StringColumn.prototype._i;weavejs.data.column.StringColumn.prototype._numberToString;weavejs.data.column.StringColumn.prototype._stringToNumber;
weavejs.data.column.StringColumn.prototype._iterate=function(stopTime){for(;this._i<this._uniqueStrings.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._uniqueStrings.length;var string=this._uniqueStrings[this._i];this._uniqueStringLookup[string]=this._i;if(this._stringToNumberFunction!=null){var number=weavejs.util.StandardLib.asNumber(this._stringToNumberFunction(string));this._stringToNumber[string]=number;this._numberToString[number]=string}}return 1};
weavejs.data.column.StringColumn.prototype.asyncComplete=function(){this.dataCache=new weavejs.util.Dictionary2D;this.triggerCallbacks()};
weavejs.data.column.StringColumn.prototype.deriveStringFromNumber=function(number){if(this._metadata&&this._metadata[weavejs.api.data.ColumnMetadata.NUMBER]){if(this._numberToString.hasOwnProperty(number))return this._numberToString[number];if(this._numberToStringFunction!=null)return this._numberToString[number]=weavejs.util.StandardLib.asString(this._numberToStringFunction(number))}else if(number==org.apache.flex.utils.Language._int(number)&&0<=number&&number<this._uniqueStrings.length)return this._uniqueStrings[org.apache.flex.utils.Language._int(number)];
return''};
weavejs.data.column.StringColumn.prototype.generateValue=function(key,dataType){var array=this.dataTask.map_key_arrayData.get(key);if(dataType===String)return weavejs.data.column.StringColumn.aggregate(array,this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.AGGREGATION]:null)||'';var string=this.getValueFromKey(key,String);if(dataType===Number){if(this._stringToNumberFunction!=null)return Number(this._stringToNumber[string]);return Number(this._uniqueStringLookup[string])}if(dataType===weavejs.api.data.IQualifiedKey){var type=
this._metadata?this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]:null;if(!type)type=weavejs.api.data.DataType.STRING;return weavejs.WeaveAPI.QKeyManager.getQKey(type,string)}return null};
weavejs.data.column.StringColumn.aggregate=function(strings,aggregation){if(!strings)return undefined;if(!aggregation)aggregation=weavejs.api.data.Aggregation.DEFAULT;switch(aggregation){case weavejs.api.data.Aggregation.SAME:var first=strings[0];var foreachiter0_target=strings;for(var foreachiter0 in foreachiter0_target){var value=foreachiter0_target[foreachiter0];if(value!=first)return Weave.lang(weavejs.api.data.Aggregation.AMBIGUOUS_DATA)}return first;case weavejs.api.data.Aggregation.FIRST:return strings[0];
case weavejs.api.data.Aggregation.LAST:return strings[strings.length-1];default:}return null};weavejs.data.column.StringColumn.getSupportedAggregationModes=function(){return[weavejs.api.data.Aggregation.SAME,weavejs.api.data.Aggregation.FIRST,weavejs.api.data.Aggregation.LAST]};weavejs.data.column.StringColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringColumn',qName:'weavejs.data.column.StringColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn,weavejs.api.data.IBaseColumn]};goog.provide('weavejs.data.CSVParser');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.ICSVParser');weavejs.data.CSVParser=function(asyncMode,delimiter,quote){asyncMode=typeof asyncMode!=='undefined'?asyncMode:false;delimiter=typeof delimiter!=='undefined'?delimiter:',';quote=typeof quote!=='undefined'?quote:'"';this.asyncMode=asyncMode;if(delimiter&&delimiter.length==1)this.delimiter=delimiter;if(quote&&quote.length==1)this.quote=quote};weavejs.data.CSVParser.CR='\r';
weavejs.data.CSVParser.LF='\n';weavejs.data.CSVParser.CRLF='\r\n';weavejs.data.CSVParser.prototype.asyncMode;weavejs.data.CSVParser.prototype.delimiter=',';weavejs.data.CSVParser.prototype.quote='"';weavejs.data.CSVParser.prototype.parseTokens=true;weavejs.data.CSVParser.prototype.csvData;weavejs.data.CSVParser.prototype.csvDataArray;weavejs.data.CSVParser.prototype.i;weavejs.data.CSVParser.prototype.row;weavejs.data.CSVParser.prototype.col;weavejs.data.CSVParser.prototype.escaped;
weavejs.data.CSVParser.prototype.parseCSV=function(csvData){this.csvData=csvData;this.csvDataArray=[];this.i=0;this.row=0;this.col=0;this.escaped=false;if(this.asyncMode)weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.parseIterate,this,'parseIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.parseDone,this,'parseDone'));else{this.parseIterate(Number.MAX_VALUE);this.parseDone()}return this.csvDataArray};
weavejs.data.CSVParser.prototype.parseIterate=function(stopTime){if(this.i==0){if(!this.csvData)return 1;this.csvDataArray[this.row]=['']}while(weavejs.util.JS.now()<stopTime){if(this.i>=this.csvData.length)return 1;var currentChar=this.csvData.charAt(this.i);var twoChar=currentChar+this.csvData.charAt(this.i+1);if(this.escaped)if(twoChar==this.quote+this.quote){this.csvDataArray[this.row][this.col]+=this.parseTokens?currentChar:twoChar;this.i+=1}else if(currentChar==this.quote){this.escaped=false;
if(!this.parseTokens)this.csvDataArray[this.row][this.col]+=currentChar}else this.csvDataArray[this.row][this.col]+=currentChar;else if(twoChar==this.delimiter+this.quote){this.escaped=true;this.col+=1;this.csvDataArray[this.row][this.col]=this.parseTokens?'':this.quote;this.i+=1}else if(currentChar==this.quote&&this.csvDataArray[this.row][this.col]==''){this.escaped=true;if(!this.parseTokens)this.csvDataArray[this.row][this.col]+=currentChar}else if(currentChar==this.delimiter){this.col+=1;this.csvDataArray[this.row][this.col]=
''}else if(twoChar==weavejs.data.CSVParser.CRLF){this.i+=1;this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else if(currentChar==weavejs.data.CSVParser.CR){this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else if(currentChar==weavejs.data.CSVParser.LF){this.row+=1;this.col=0;this.csvDataArray[this.row]=['']}else this.csvDataArray[this.row][this.col]+=currentChar;this.i++}return this.i/this.csvData.length};
weavejs.data.CSVParser.prototype.parseDone=function(){for(var iRow=this.csvDataArray.length;iRow--;){var dataLine=this.csvDataArray[iRow];if(dataLine.length==1&&dataLine[0]=='')this.csvDataArray.splice(iRow,1)}if(this.asyncMode)Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.CSVParser.prototype.createCSV=function(rows){var lines=new Array(rows.length);for(var i=rows.length;i--;){var tokens=new Array(rows[i].length);for(var j=tokens.length;j--;)tokens[j]=this.createCSVToken(rows[i][j]);lines[i]=tokens.join(this.delimiter)}var csvData=lines.join(weavejs.data.CSVParser.LF);return csvData};
weavejs.data.CSVParser.prototype.parseCSVRow=function(csvData){if(csvData==null)return null;var rows=this.parseCSV(csvData);if(rows.length==0)return rows;if(rows.length==1)return rows[0];return[].concat.apply(null,rows)};weavejs.data.CSVParser.prototype.createCSVRow=function(row){return this.createCSV([row])};
weavejs.data.CSVParser.prototype.parseCSVToken=function(token){token=String(token);var parsedToken='';var tokenLength=token.length;if(token.charAt(0)==this.quote){var escaped=true;for(var i=1;i<=tokenLength;i++){var currentChar=token.charAt(i);var twoChar=currentChar+token.charAt(i+1);if(twoChar==this.quote+this.quote){i+=1;parsedToken+=this.quote}else if(currentChar==this.quote&&escaped)escaped=false;else parsedToken+=currentChar}}else parsedToken=token;return parsedToken};
weavejs.data.CSVParser.prototype.createCSVToken=function(str){str=String(str);if(str==null)str='';if(str.length>0&&str.indexOf(this.quote)<0&&str.indexOf(this.delimiter)<0&&str.indexOf(weavejs.data.CSVParser.LF)<0&&str.indexOf(weavejs.data.CSVParser.CR)<0&&str==weavejs.util.StandardLib.trim(str))return str;var token=this.quote;for(var i=0;i<=str.length;i++){var currentChar=str.charAt(i);if(currentChar==this.quote)token+=this.quote+this.quote;else token+=currentChar}return token+this.quote};
weavejs.data.CSVParser.prototype.convertRowsToRecords=function(rows,headerDepth){headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;if(rows.length<headerDepth)throw new Error('headerDepth is greater than the number of rows');weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var records=new Array(rows.length-headerDepth);for(var r=headerDepth;r<rows.length;r++){var record={};var row=rows[r];for(var c=0;c<row.length;c++){var output=record;var cell=row[c];for(var h=0;h<headerDepth;h++){var colName=
rows[h][c];if(h<headerDepth-1){if(!output[colName])output[colName]={};output=output[colName]}else output[colName]=cell}}records[r-headerDepth]=record}return records};
weavejs.data.CSVParser.prototype.getRecordFieldNames=function(records,includeNullFields,headerDepth){includeNullFields=typeof includeNullFields!=='undefined'?includeNullFields:false;headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var nestedFieldNames={};var foreachiter0_target=records;for(var foreachiter0 in foreachiter0_target){var record=foreachiter0_target[foreachiter0];this._outputNestedFieldNames(record,includeNullFields,nestedFieldNames,
headerDepth)}var fields=[];this._collapseNestedFieldNames(nestedFieldNames,fields);return fields};weavejs.data.CSVParser.prototype._outputNestedFieldNames=function(record,includeNullFields,output,depth){for(var field in record)if(includeNullFields||record[field]!=null)if(depth==1)output[field]=false;else{if(!output[field])output[field]={};this._outputNestedFieldNames(record[field],includeNullFields,output[field],depth-1)}};
weavejs.data.CSVParser.prototype._collapseNestedFieldNames=function(nestedFieldNames,output,prefix){prefix=typeof prefix!=='undefined'?prefix:null;for(var field in nestedFieldNames)if(nestedFieldNames[field])this._collapseNestedFieldNames(nestedFieldNames[field],output,prefix?prefix.concat(field):[field]);else if(prefix)output.push(prefix.concat(field));else output.push(field)};
weavejs.data.CSVParser.prototype.convertRecordsToRows=function(records,columnOrder,allowBlankColumns,headerDepth){columnOrder=typeof columnOrder!=='undefined'?columnOrder:null;allowBlankColumns=typeof allowBlankColumns!=='undefined'?allowBlankColumns:false;headerDepth=typeof headerDepth!=='undefined'?headerDepth:1;weavejs.data.CSVParser.assertHeaderDepth(headerDepth);var fields=columnOrder;if(fields==null){fields=this.getRecordFieldNames(records,allowBlankColumns,headerDepth);weavejs.util.AsyncSort.sortImmediately(fields)}var r;
var c;var cell;var row;var rows=new Array(records.length+headerDepth);for(r=0;r<headerDepth;r++){row=new Array(fields.length);for(c=0;c<fields.length;c++)if(headerDepth>1)row[c]=fields[c][r]||'';else row[c]=fields[c]||'';rows[r]=row}for(r=0;r<records.length;r++){var record=records[r];row=new Array(fields.length);for(c=0;c<fields.length;c++){if(headerDepth==1)cell=record[fields[c]];else{cell=record;var foreachiter1_target=fields[c];for(var foreachiter1 in foreachiter1_target){var field=foreachiter1_target[foreachiter1];
if(cell)cell=cell[field]}}row[c]=cell!=null?String(cell):''}rows[headerDepth+r]=row}return rows};weavejs.data.CSVParser.assertHeaderDepth=function(headerDepth){if(headerDepth<1)throw new Error('headerDepth must be \x3e 0');};weavejs.data.CSVParser._tested=false;
weavejs.data.CSVParser.test=function(){if(weavejs.data.CSVParser._tested)return;weavejs.data.CSVParser._tested=true;var _={};_.parser=weavejs.WeaveAPI.CSVParser;_.csv=['internal,internal,public,public,public,private,private,test','id,type,title,keyType,dataType,connection,sqlQuery,empty','2,1,state name,fips,string,resd,'+'"'+'select fips,name from myschema.state_data'+'"'+',','3,1,population,fips,number,resd,'+'"'+'select fips,pop from myschema.state_data'+'"'+',','1,0,state data table'].join('\n');
_.table=_.parser.parseCSV(_.csv);_.records=_.parser.convertRowsToRecords(_.table,2);_.rows=_.parser.convertRecordsToRows(_.records,null,false,2);_.fields=_.parser.getRecordFieldNames(_.records,false,2);_.fieldOrder=_.parser.parseCSV('internal,id\ninternal,type\npublic,title\npublic,keyType\npublic,dataType\nprivate,connection\nprivate,sqlQuery');_.rows2=_.parser.convertRecordsToRows(_.records,_.fieldOrder,false,2);weavejs.util.JS.log(_)};Object.defineProperties(weavejs.data.CSVParser.prototype,{parseResult:{get:function(){return this.csvDataArray}}});
weavejs.data.CSVParser.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVParser',qName:'weavejs.data.CSVParser'}],interfaces:[weavejs.api.data.ICSVParser,weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.key.QKey');goog.require('weavejs.api.data.IQualifiedKey');weavejs.data.key.QKey=function(keyType,localName,toString){this.kt=keyType;this.ln=localName;this._toNumber=weavejs.data.key.QKey.serial++;this._toString=toString};weavejs.data.key.QKey.serial=0;weavejs.data.key.QKey.prototype.kt;weavejs.data.key.QKey.prototype.ln;weavejs.data.key.QKey.prototype._toNumber;weavejs.data.key.QKey.prototype._toString;weavejs.data.key.QKey.prototype.toNumber=function(){return this._toNumber};
weavejs.data.key.QKey.prototype.toString=function(){return this._toString};Object.defineProperties(weavejs.data.key.QKey.prototype,{keyType:{get:function(){return this.kt}},localName:{get:function(){return this.ln}}});weavejs.data.key.QKey.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKey',qName:'weavejs.data.key.QKey'}],interfaces:[weavejs.api.data.IQualifiedKey]};goog.provide('weavejs.data.key.QKeyGetter');goog.require('weavejs.util.WeavePromise');weavejs.data.key.QKeyGetter=function(manager,relevantContext){weavejs.data.key.QKeyGetter.base(this,'constructor',relevantContext);this.manager=manager};goog.inherits(weavejs.data.key.QKeyGetter,weavejs.util.WeavePromise);
weavejs.data.key.QKeyGetter.prototype.asyncStart=function(keyType,keyStrings,outputKeys){outputKeys=typeof outputKeys!=='undefined'?outputKeys:null;if(!keyStrings)keyStrings=[];this.manager=this.manager;this.keyType=keyType;this.keyStrings=keyStrings;this.i=0;this.outputKeys=outputKeys||new Array(keyStrings.length);this.outputKeys.length=keyStrings.length;weavejs.WeaveAPI.Scheduler.startTask(this.relevantContext,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,
org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Initializing {0} record identifiers',keyStrings.length));return this};weavejs.data.key.QKeyGetter.prototype.asyncCallback;weavejs.data.key.QKeyGetter.prototype.i;weavejs.data.key.QKeyGetter.prototype.manager;weavejs.data.key.QKeyGetter.prototype.keyType;weavejs.data.key.QKeyGetter.prototype.keyStrings;weavejs.data.key.QKeyGetter.prototype.outputKeys;weavejs.data.key.QKeyGetter.prototype.batch=5E3;
weavejs.data.key.QKeyGetter.prototype.iterate=function(stopTime){for(;this.i<this.keyStrings.length;this.i+=this.batch){if(weavejs.util.JS.now()>stopTime)return this.i/this.keyStrings.length;this.manager.getQKeys_range(this.keyType,this.keyStrings,this.i,Math.min(this.i+this.batch,this.keyStrings.length),this.outputKeys)}return 1};weavejs.data.key.QKeyGetter.prototype.setResult=function(result){weavejs.data.key.QKeyGetter.base(this,'setResult',result)};
weavejs.data.key.QKeyGetter.prototype.asyncComplete=function(){this.setResult(this.outputKeys)};weavejs.data.key.QKeyGetter.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKeyGetter',qName:'weavejs.data.key.QKeyGetter'}]};goog.provide('weavejs.data.key.QKeyManager');goog.require('weavejs.data.CSVParser');goog.require('weavejs.data.key.QKey');goog.require('weavejs.data.key.QKeyGetter');goog.require('weavejs.api.data.IQualifiedKeyManager');
weavejs.data.key.QKeyManager=function(){this.map_qkey_keyType=new weavejs.util.JS.WeakMap;this.map_qkey_localName=new weavejs.util.JS.WeakMap;this.map_keyType_localName_qkey=new weavejs.util.Dictionary2D;this.map_context_qkeyGetter=new weavejs.util.JS.WeakMap;this._keyBuffer=[];this.array_numberToQKey=[];this.map_qkeyString_qkey=new weavejs.util.JS.Map;this.map_keyType_localName_qkey.map.set(null,this.map_qkeyString_qkey)};weavejs.data.key.QKeyManager.prototype.map_qkey_keyType;weavejs.data.key.QKeyManager.prototype.map_qkey_localName;
weavejs.data.key.QKeyManager.prototype.map_keyType_localName_qkey;weavejs.data.key.QKeyManager.prototype.map_qkeyString_qkey;weavejs.data.key.QKeyManager.prototype.map_context_qkeyGetter;weavejs.data.key.QKeyManager.prototype._keyBuffer;weavejs.data.key.QKeyManager.DELIMITER='#';weavejs.data.key.QKeyManager.prototype.csvParser;weavejs.data.key.QKeyManager.prototype.array_numberToQKey;
weavejs.data.key.QKeyManager.prototype.stringToQKey=function(qkeyString){var qkey=this.map_qkeyString_qkey.get(qkeyString);if(qkey)return qkey;if(!this.csvParser)this.csvParser=new weavejs.data.CSVParser(false,weavejs.data.key.QKeyManager.DELIMITER);var a=this.csvParser.parseCSVRow(qkeyString);if(a.length!=2)throw new Error('qkeyString must be formatted like '+this.csvParser.createCSVRow(['keyType','localName']));return this.getQKey(a[0],a[1])};
weavejs.data.key.QKeyManager.prototype.numberToQKey=function(qkeyNumber){return this.array_numberToQKey[qkeyNumber]};weavejs.data.key.QKeyManager.prototype.getQKey=function(keyType,localName){this._keyBuffer[0]=localName;this.getQKeys_range(keyType,this._keyBuffer,0,1,this._keyBuffer);return org.apache.flex.utils.Language.as(this._keyBuffer[0],weavejs.api.data.IQualifiedKey)};
weavejs.data.key.QKeyManager.prototype.init_map_localName_qkey=function(keyType){var map_localName_qkey=new weavejs.util.JS.Map;this.map_keyType_localName_qkey.map.set(keyType,map_localName_qkey);return map_localName_qkey};
weavejs.data.key.QKeyManager.prototype.getQKeys_range=function(keyType,keyStrings,iStart,iEnd,output){keyType=keyType==null?null:String(keyType);var map_localName_qkey=this.map_keyType_localName_qkey.map.get(keyType);if(!map_localName_qkey)map_localName_qkey=this.init_map_localName_qkey(keyType);if(!this.csvParser)this.csvParser=new weavejs.data.CSVParser(false,weavejs.data.key.QKeyManager.DELIMITER);for(var i=iStart;i<iEnd;i++){var localName=String(keyStrings[i]);var qkey=map_localName_qkey.get(localName);
if(qkey===undefined){var qkeyString;if(keyType)qkeyString=this.csvParser.createCSVRow([keyType,localName]);else qkeyString=localName;var qkeyTyped=qkey=new weavejs.data.key.QKey(keyType,localName,qkeyString);this.array_numberToQKey[qkeyTyped.toNumber()]=qkey;if(map_localName_qkey!==this.map_qkeyString_qkey)map_localName_qkey.set(localName,qkey);this.map_qkeyString_qkey.set(qkeyString,qkey);this.map_qkey_keyType.set(qkey,keyType);this.map_qkey_localName.set(qkey,localName)}output[i]=qkey}};
weavejs.data.key.QKeyManager.prototype.getQKeys=function(keyType,keyStrings){var keys=new Array(keyStrings.length);this.getQKeys_range(keyType,keyStrings,0,keyStrings.length,keys);return keys};weavejs.data.key.QKeyManager.prototype.convertToQKeys=function(objects){var i=objects.length;while(i--){var item=objects[i];if(!org.apache.flex.utils.Language.is(item,weavejs.api.data.IQualifiedKey))objects[i]=this.getQKey(item.keyType,item.localName)}return objects};
weavejs.data.key.QKeyManager.prototype.getQKeysAsync=function(relevantContext,keyType,keyStrings,asyncCallback,outputKeys){var qkg=this.map_context_qkeyGetter.get(relevantContext);if(!qkg)this.map_context_qkeyGetter.set(relevantContext,qkg=new weavejs.data.key.QKeyGetter(this,relevantContext));var promise=qkg.asyncStart(keyType,keyStrings,outputKeys);if(asyncCallback!=null)promise.then(asyncCallback)};
weavejs.data.key.QKeyManager.prototype.getQKeysPromise=function(relevantContext,keyType,keyStrings){var qkg=this.map_context_qkeyGetter.get(relevantContext);if(!qkg)this.map_context_qkeyGetter.set(relevantContext,qkg=new weavejs.data.key.QKeyGetter(this,relevantContext));qkg.asyncStart(keyType,keyStrings);return qkg};weavejs.data.key.QKeyManager.prototype.getAllKeyTypes=function(){return this.map_keyType_localName_qkey.primaryKeys()};weavejs.data.key.QKeyManager.prototype.getAllQKeys=function(keyType){return weavejs.util.JS.mapValues(this.map_keyType_localName_qkey.map.get(keyType))};
weavejs.data.key.QKeyManager.keySortCopy=function(keys){var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);var params=[qkm.map_qkey_keyType,qkm.map_qkey_localName];return weavejs.util.StandardLib.sortOn(keys,params,null,false)};weavejs.data.key.QKeyManager.prototype.FLEXJS_CLASS_INFO={names:[{name:'QKeyManager',qName:'weavejs.data.key.QKeyManager'}],interfaces:[weavejs.api.data.IQualifiedKeyManager]};goog.provide('weavejs.api.data.IColumnWrapper');goog.require('weavejs.api.data.IAttributeColumn');weavejs.api.data.IColumnWrapper=function(){};weavejs.api.data.IColumnWrapper.prototype.getInternalColumn=function(){};weavejs.api.data.IColumnWrapper.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnWrapper',qName:'weavejs.api.data.IColumnWrapper'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.data.column.ProxyColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IColumnWrapper');weavejs.data.column.ProxyColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;weavejs.data.column.ProxyColumn.base(this,'constructor',metadata)};goog.inherits(weavejs.data.column.ProxyColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.ProxyColumn.prototype.containsKey=function(key){return this._internalColumn&&this._internalColumn.containsKey(key)};weavejs.data.column.ProxyColumn.prototype.setMetadata=function(metadata){this._metadata=weavejs.data.column.AbstractAttributeColumn.copyValues(metadata);this.triggerCallbacks()};
weavejs.data.column.ProxyColumn.prototype.getMetadata=function(propertyName){if(propertyName===weavejs.api.data.ColumnMetadata.TITLE&&this._overrideTitle)return this._overrideTitle;var overrideValue=weavejs.data.column.ProxyColumn.base(this,'getMetadata',propertyName);if(overrideValue==null&&this._internalColumn!=null)return this._internalColumn.getMetadata(propertyName);return overrideValue};weavejs.data.column.ProxyColumn.prototype.getProxyMetadata=function(){return weavejs.data.column.AbstractAttributeColumn.copyValues(this._metadata)};
weavejs.data.column.ProxyColumn.prototype.getMetadataPropertyNames=function(){if(this._internalColumn)return weavejs.util.ArrayUtils.union(weavejs.data.column.ProxyColumn.base(this,'getMetadataPropertyNames'),this._internalColumn.getMetadataPropertyNames());return weavejs.data.column.ProxyColumn.base(this,'getMetadataPropertyNames')};weavejs.data.column.ProxyColumn.prototype._internalColumn=null;weavejs.data.column.ProxyColumn.prototype.getInternalColumn=function(){return this._internalColumn};
weavejs.data.column.ProxyColumn.prototype.setInternalColumn=function(newColumn){this._overrideTitle=null;if(newColumn==this){org.apache.flex.utils.Language.trace('WARNING! Attempted to set ProxyColumn.internalAttributeColumn to self: '+this);return}if(this._internalColumn==newColumn)return;if(this._internalColumn!=null)org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).unregisterLinkableChild(this,this._internalColumn);this._internalColumn=newColumn;if(this._internalColumn!=
null)Weave.linkableChild(this,this._internalColumn);this.triggerCallbacks()};weavejs.data.column.ProxyColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._internalColumn)return this._internalColumn.getValueFromKey(key,dataType);return undefined};weavejs.data.column.ProxyColumn.prototype.dispose=function(){weavejs.data.column.ProxyColumn.base(this,'dispose');this._metadata=null;this.setInternalColumn(null)};weavejs.data.column.ProxyColumn.prototype._overrideTitle;
weavejs.data.column.ProxyColumn.prototype.dataUnavailable=function(message){message=typeof message!=='undefined'?message:null;this.delayCallbacks();this.setInternalColumn(null);if(message)this._overrideTitle=message;else{var title=this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE);if(title)this._overrideTitle=Weave.lang('(Data unavailable: {0})',title);else this._overrideTitle=Weave.lang(weavejs.data.column.ProxyColumn.DATA_UNAVAILABLE)}this.triggerCallbacks();this.resumeCallbacks()};
weavejs.data.column.ProxyColumn.DATA_UNAVAILABLE='(Data unavailable)';Object.defineProperties(weavejs.data.column.ProxyColumn.prototype,{keys:{get:function(){var column=this.internalNonProxyColumn;return column?column.keys:[]}},internalNonProxyColumn:{get:function(){var column=this._internalColumn;while(org.apache.flex.utils.Language.is(column,weavejs.data.column.ProxyColumn))column=org.apache.flex.utils.Language.as(column,weavejs.data.column.ProxyColumn)._internalColumn;return column}}});
weavejs.data.column.ProxyColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ProxyColumn',qName:'weavejs.data.column.ProxyColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.provide('weavejs.api.data.IColumnReference');weavejs.api.data.IColumnReference=function(){};weavejs.api.data.IColumnReference.prototype.getDataSource=function(){};weavejs.api.data.IColumnReference.prototype.getColumnMetadata=function(){};weavejs.api.data.IColumnReference.prototype.FLEXJS_CLASS_INFO={names:[{name:'IColumnReference',qName:'weavejs.api.data.IColumnReference'}]};goog.provide('weavejs.api.data.IDataSource_File');goog.require('weavejs.api.data.IDataSource');weavejs.api.data.IDataSource_File=function(){};weavejs.api.data.IDataSource_File.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDataSource_File',qName:'weavejs.api.data.IDataSource_File'}],interfaces:[weavejs.api.data.IDataSource]};goog.provide('weavejs.api.data.IWeaveTreeNodeWithPathFinding');goog.require('weavejs.api.data.IWeaveTreeNode');weavejs.api.data.IWeaveTreeNodeWithPathFinding=function(){};weavejs.api.data.IWeaveTreeNodeWithPathFinding.prototype.findPathToNode=function(descendant){};weavejs.api.data.IWeaveTreeNodeWithPathFinding.prototype.FLEXJS_CLASS_INFO={names:[{name:'IWeaveTreeNodeWithPathFinding',qName:'weavejs.api.data.IWeaveTreeNodeWithPathFinding'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};goog.provide('weavejs.data.hierarchy.HierarchyUtils');weavejs.data.hierarchy.HierarchyUtils=function(){};
weavejs.data.hierarchy.HierarchyUtils.findPathToNode=function(root,descendant){if(!root||!descendant)return null;if(org.apache.flex.utils.Language.is(root,weavejs.api.data.IWeaveTreeNodeWithPathFinding))return org.apache.flex.utils.Language.as(root,weavejs.api.data.IWeaveTreeNodeWithPathFinding).findPathToNode(descendant);if(root.equals(descendant))return[root];var childs=root.getChildren();var foreachiter0_target=childs;for(var foreachiter0 in foreachiter0_target){var child=foreachiter0_target[foreachiter0];
var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(child,descendant);if(path){path.unshift(root);return path}}return null};weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferenceDescendants=function(source){return weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences(source.getHierarchyRoot(),[])};
weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences=function(node,output){var ref=org.apache.flex.utils.Language.as(node,weavejs.api.data.IColumnReference);if(ref&&ref.getColumnMetadata())output.push(ref);if(node){var childs=node.getChildren();var foreachiter1_target=childs;for(var foreachiter1 in foreachiter1_target){var child=foreachiter1_target[foreachiter1];weavejs.data.hierarchy.HierarchyUtils.getAllColumnReferences(child,output)}}return output};
weavejs.data.hierarchy.HierarchyUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'HierarchyUtils',qName:'weavejs.data.hierarchy.HierarchyUtils'}]};goog.provide('weavejs.data.source.AbstractDataSource');goog.require('weavejs.data.column.ProxyColumn');goog.require('weavejs.data.hierarchy.HierarchyUtils');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.data.IDataSource');
weavejs.data.source.AbstractDataSource=function(){this.map_proxyColumn_pending=new weavejs.util.JS.Map;this._hierarchyRefresh=Weave.linkableChild(this,weavejs.core.CallbackCollection,org.apache.flex.utils.Language.closure(this.refreshHierarchy,this,'refreshHierarchy'));var cc=Weave.getCallbacks(this);cc.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.uninitialize,this,'uninitialize'));cc.addGroupedCallback(this,org.apache.flex.utils.Language.closure(this.initialize,this,'initialize'),
true,false)};weavejs.data.source.AbstractDataSource.prototype._initializeCalled=false;weavejs.data.source.AbstractDataSource.prototype._rootNode;weavejs.data.source.AbstractDataSource.prototype.map_proxyColumn_pending;weavejs.data.source.AbstractDataSource.prototype._hierarchyRefresh;weavejs.data.source.AbstractDataSource.prototype.refreshHierarchy=function(){this._rootNode=null};weavejs.data.source.AbstractDataSource.prototype.getHierarchyRoot=function(){return this._rootNode};
weavejs.data.source.AbstractDataSource.prototype.requestColumnFromSource=function(proxyColumn){};weavejs.data.source.AbstractDataSource.prototype.generateHierarchyNode=function(metadata){return null};weavejs.data.source.AbstractDataSource.prototype.uninitialize=function(){this._initializeCalled=false};
weavejs.data.source.AbstractDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;this._initializeCalled=true;if(forceRefresh)this.refreshAllProxyColumns(this.initializationComplete);else this.handleAllPendingColumnRequests(this.initializationComplete)};
weavejs.data.source.AbstractDataSource.prototype.findHierarchyNode=function(metadata){var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(this.getHierarchyRoot(),this.generateHierarchyNode(metadata));if(path)return path[path.length-1];return null};
weavejs.data.source.AbstractDataSource.prototype.getAttributeColumn=function(metadata){var proxyColumn=Weave.disposableChild(this,weavejs.data.column.ProxyColumn);proxyColumn.setMetadata(metadata);var name=Weave.getRoot(this).getName(this)||weavejs.util.DebugUtils.debugId(this);var description=name+' pending column request';weavejs.WeaveAPI.ProgressIndicator.addTask(proxyColumn,this,description);weavejs.WeaveAPI.ProgressIndicator.addTask(proxyColumn,proxyColumn,description);this.handlePendingColumnRequest(proxyColumn);
return proxyColumn};weavejs.data.source.AbstractDataSource.prototype.handlePendingColumnRequest=function(column,forced){forced=typeof forced!=='undefined'?forced:false;if(this.initializationComplete||forced){this.map_proxyColumn_pending.set(column,false);weavejs.WeaveAPI.ProgressIndicator.removeTask(column);this.requestColumnFromSource(column)}else this.map_proxyColumn_pending.set(column,true)};
weavejs.data.source.AbstractDataSource.prototype.handleAllPendingColumnRequests=function(forced){forced=typeof forced!=='undefined'?forced:false;var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter0_target=cols;for(var foreachiter0 in foreachiter0_target){var proxyColumn=foreachiter0_target[foreachiter0];if(this.map_proxyColumn_pending.get(proxyColumn))this.handlePendingColumnRequest(org.apache.flex.utils.Language.as(proxyColumn,weavejs.data.column.ProxyColumn),forced)}};
weavejs.data.source.AbstractDataSource.prototype.refreshAllProxyColumns=function(forced){forced=typeof forced!=='undefined'?forced:false;var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter1_target=cols;for(var foreachiter1 in foreachiter1_target){var proxyColumn=foreachiter1_target[foreachiter1];this.handlePendingColumnRequest(org.apache.flex.utils.Language.as(proxyColumn,weavejs.data.column.ProxyColumn),forced)}};
weavejs.data.source.AbstractDataSource.prototype.dispose=function(){var cols=weavejs.util.JS.mapKeys(this.map_proxyColumn_pending);var foreachiter2_target=cols;for(var foreachiter2 in foreachiter2_target){var column=foreachiter2_target[foreachiter2];weavejs.WeaveAPI.ProgressIndicator.removeTask(column)}this._initializeCalled=false;this.map_proxyColumn_pending=null};
Object.defineProperties(weavejs.data.source.AbstractDataSource.prototype,{hierarchyRefresh:{get:function(){return this._hierarchyRefresh}},initializationComplete:{get:function(){return this._initializeCalled}}});weavejs.data.source.AbstractDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractDataSource',qName:'weavejs.data.source.AbstractDataSource'}],interfaces:[weavejs.api.data.IDataSource,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.data.source.CachedDataSource');goog.require('weavejs.data.source.AbstractDataSource');weavejs.data.source.CachedDataSource=function(){weavejs.data.source.CachedDataSource.base(this,'constructor');this.type=Weave.linkableChild(this,weavejs.core.LinkableString);this.state=Weave.linkableChild(this,weavejs.core.LinkableVariable)};goog.inherits(weavejs.data.source.CachedDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.CachedDataSource.prototype.type;weavejs.data.source.CachedDataSource.prototype.state;
weavejs.data.source.CachedDataSource.prototype.refreshHierarchy=function(){var root=Weave.getRoot(this);var name=root.getName(this);var classDef=Weave.getDefinition(this.type.value);var state=state.state;var dataSource=root.requestObject(name,classDef,false);Weave.setState(dataSource,state)};weavejs.data.source.CachedDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CachedDataSource',qName:'weavejs.data.source.CachedDataSource'}]};goog.provide('weavejs.data.AttributeColumnCache');goog.require('weavejs.api.data.ColumnMetadata');goog.require('weavejs.api.data.DataType');goog.require('weavejs.data.column.DateColumn');goog.require('weavejs.data.column.GeometryColumn');goog.require('weavejs.data.column.NumberColumn');goog.require('weavejs.data.column.StringColumn');goog.require('weavejs.data.key.QKeyManager');goog.require('weavejs.data.source.CachedDataSource');goog.require('weavejs.geom.GeneralizedGeometry');goog.require('weavejs.api.data.IAttributeColumnCache');
weavejs.data.AttributeColumnCache=function(){this.d2d_dataSource_metadataHash_column=new weavejs.util.Dictionary2D};
weavejs.data.AttributeColumnCache.prototype.getColumn=function(dataSource,metadata){var self=this;var __localFn0__=function(){this.d2d_dataSource_metadataHash_column.map['delete'](dataSource)};if(dataSource==null||metadata==null)return null;var hashCode=Weave.stringify(metadata);var column=this.d2d_dataSource_metadataHash_column.get(dataSource,hashCode);if(!column){if(!this.d2d_dataSource_metadataHash_column.map.has(dataSource))Weave.getCallbacks(dataSource).addDisposeCallback(this,__localFn0__);
column=dataSource.getAttributeColumn(metadata);this.d2d_dataSource_metadataHash_column.set(dataSource,hashCode,column)}return column};weavejs.data.AttributeColumnCache.prototype.d2d_dataSource_metadataHash_column;weavejs.data.AttributeColumnCache.prototype.saveCache=null;
weavejs.data.AttributeColumnCache.prototype.convertToCachedDataSources=function(root){var self=this;var __localFn0__=function(_){promise.dispose()};var __localFn1__=function(root){var column;var columns=Weave.getDescendants(root,weavejs.api.data.IAttributeColumn);var foreachiter0_target=columns;for(var foreachiter0 in foreachiter0_target){column=foreachiter0_target[foreachiter0];if(column.keys.length)column.getValueFromKey(column.keys[0]);promise.depend(column)}return root};var promise=new weavejs.util.WeavePromise(root);
promise.setResult(root);var dispose=__localFn0__;return promise.then(__localFn1__).then(org.apache.flex.utils.Language.closure(this._convertToCachedDataSources,this,'_convertToCachedDataSources'),weavejs.util.JS.error).then(dispose,dispose)};
weavejs.data.AttributeColumnCache.prototype._convertToCachedDataSources=function(root){var output=[];var dataSource;var dataSources=this.d2d_dataSource_metadataHash_column.primaryKeys();var foreachiter1_target=dataSources;for(var foreachiter1 in foreachiter1_target){dataSource=foreachiter1_target[foreachiter1];var dataSourceName=root.getName(dataSource);if(!dataSourceName)continue;var metadataHashes=this.d2d_dataSource_metadataHash_column.secondaryKeys(dataSource);var foreachiter2_target=metadataHashes;
for(var foreachiter2 in foreachiter2_target){var metadataHash=foreachiter2_target[foreachiter2];var column=this.d2d_dataSource_metadataHash_column.get(dataSource,metadataHash);if(!column||Weave.wasDisposed(column))continue;var metadata=weavejs.api.data.ColumnMetadata.getAllMetadata(column);var dataType=column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);var keys=[];var data=[];var foreachiter3_target=column.keys;for(var foreachiter3 in foreachiter3_target){var key=foreachiter3_target[foreachiter3];
var values=column.getValueFromKey(key,Array);if(values!=null&&!org.apache.flex.utils.Language.is(values,Array))values=[values];var foreachiter4_target=values;for(var foreachiter4 in foreachiter4_target){var value=foreachiter4_target[foreachiter4];if(dataType==weavejs.api.data.DataType.GEOMETRY){keys.push(key.localName);data.push(org.apache.flex.utils.Language.as(value,weavejs.geom.GeneralizedGeometry).toGeoJson())}else{keys.push(key.localName);data.push(value)}}}output.push([dataSourceName,metadataHash,
metadata,keys,data])}}dataSources=root.getObjects(weavejs.api.data.IDataSource);var foreachiter5_target=dataSources;for(var foreachiter5 in foreachiter5_target){dataSource=foreachiter5_target[foreachiter5];if(dataSource.hasOwnProperty('NO_CACHE_HACK'))continue;var type=Weave.className(dataSource);var state=Weave.getState(dataSource);var cds=root.requestObject(root.getName(dataSource),weavejs.data.source.CachedDataSource,false);cds.type.value=type;cds.state.state=state}this.restoreCache(root,output);
this.saveCache=output;return output};weavejs.data.AttributeColumnCache.prototype.restoreCache=function(root,cacheData){this.saveCache=cacheData;var foreachiter6_target=cacheData;for(var foreachiter6 in foreachiter6_target){var args=foreachiter6_target[foreachiter6];this.addToColumnCache.apply(this,[root].concat(args))}};
weavejs.data.AttributeColumnCache.prototype.addToColumnCache=function(root,dataSourceName,metadataHash,metadata,keyStrings,data){var self=this;var __localFn0__=function(keys){nc.setRecords(keys,data)};var __localFn1__=function(keys){var geomKeys=[];var geoms=[];for(var i=0;i<data.length;i++){var geomsFromGeoJson=weavejs.geom.GeneralizedGeometry.fromGeoJson(data[i]);var foreachiter7_target=geomsFromGeoJson;for(var foreachiter7 in foreachiter7_target){var geom=foreachiter7_target[foreachiter7];geomKeys.push(keys[i]);
geoms.push(geom)}}gc.setGeometries(geomKeys,geoms)};var __localFn2__=function(keys){dc.setRecords(keys,data)};var __localFn3__=function(keys){sc.setRecords(keys,data)};var dataSource=org.apache.flex.utils.Language.as(root.getObject(dataSourceName),weavejs.api.data.IDataSource);if(!dataSource){if(dataSourceName)weavejs.util.JS.error('Data source not found: '+dataSourceName);return}var column;var keyType=metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE];var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];
if(dataType==weavejs.api.data.DataType.NUMBER){var nc=Weave.disposableChild(dataSource,column=new weavejs.data.column.NumberColumn(metadata));org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysPromise(column,keyType,keyStrings).then(__localFn0__)}else if(dataType==weavejs.api.data.DataType.GEOMETRY){var gc=Weave.disposableChild(dataSource,column=new weavejs.data.column.GeometryColumn(metadata));org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,
weavejs.data.key.QKeyManager).getQKeysPromise(column,keyType,keyStrings).then(__localFn1__)}else if(dataType==weavejs.api.data.DataType.DATE){var dc=Weave.disposableChild(dataSource,column=new weavejs.data.column.DateColumn(metadata));org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysPromise(column,keyType,keyStrings).then(__localFn2__)}else{var sc=Weave.disposableChild(dataSource,column=new weavejs.data.column.StringColumn(metadata));org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,
weavejs.data.key.QKeyManager).getQKeysPromise(column,keyType,keyStrings).then(__localFn3__)}this.d2d_dataSource_metadataHash_column.set(dataSource,metadataHash,column)};weavejs.data.AttributeColumnCache.prototype.restoreFromCachedDataSources=function(root){var foreachiter8_target=root.getObjects(weavejs.data.source.CachedDataSource);for(var foreachiter8 in foreachiter8_target){var cds=foreachiter8_target[foreachiter8];this.d2d_dataSource_metadataHash_column.removeAllPrimary(cds);cds.hierarchyRefresh.triggerCallbacks()}};
weavejs.data.AttributeColumnCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'AttributeColumnCache',qName:'weavejs.data.AttributeColumnCache'}],interfaces:[weavejs.api.data.IAttributeColumnCache]};goog.provide('weavejs.data.ColumnStatistics');goog.require('weavejs.api.data.IColumnStatistics');weavejs.data.ColumnStatistics=function(column){this.map_method_result=new weavejs.util.JS.WeakMap;this.column=column;column.addImmediateCallback(this,org.apache.flex.utils.Language.closure(Weave.getCallbacks(this).triggerCallbacks,Weave.getCallbacks(this),'triggerCallbacks'),false,true)};
weavejs.data.ColumnStatistics.prototype.getNorm=function(key){var min=this.validateCache(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'));var max=this.validateCache(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'));var map_numericData=this.validateCache(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'));var value=map_numericData?map_numericData.get(key):NaN;return(value-min)/(max-min)};
weavejs.data.ColumnStatistics.prototype.getMin=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'))};weavejs.data.ColumnStatistics.prototype.getMax=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'))};weavejs.data.ColumnStatistics.prototype.getCount=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getCount,this,'getCount'))};
weavejs.data.ColumnStatistics.prototype.getSum=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSum,this,'getSum'))};weavejs.data.ColumnStatistics.prototype.getSquareSum=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSquareSum,this,'getSquareSum'))};weavejs.data.ColumnStatistics.prototype.getMean=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMean,this,'getMean'))};
weavejs.data.ColumnStatistics.prototype.getVariance=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getVariance,this,'getVariance'))};weavejs.data.ColumnStatistics.prototype.getStandardDeviation=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getStandardDeviation,this,'getStandardDeviation'))};
weavejs.data.ColumnStatistics.prototype.getMedian=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getMedian,this,'getMedian'))};weavejs.data.ColumnStatistics.prototype.getSortIndex=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getSortIndex,this,'getSortIndex'))};weavejs.data.ColumnStatistics.prototype.hack_getNumericData=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'))};
weavejs.data.ColumnStatistics.prototype.getRunningTotals=function(){return this.validateCache(org.apache.flex.utils.Language.closure(this.getRunningTotals,this,'getRunningTotals'))};weavejs.data.ColumnStatistics.prototype.map_method_result;weavejs.data.ColumnStatistics.prototype.column;weavejs.data.ColumnStatistics.prototype.prevTriggerCounter=0;weavejs.data.ColumnStatistics.prototype.busy=false;
weavejs.data.ColumnStatistics.prototype.validateCache=function(statsFunction){if(this.prevTriggerCounter!=this.column.triggerCounter){this.busy=weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this.column);if(!this.busy)this.asyncStart()}return this.map_method_result.get(statsFunction)};weavejs.data.ColumnStatistics.prototype.i;weavejs.data.ColumnStatistics.prototype.keys;weavejs.data.ColumnStatistics.prototype.min;weavejs.data.ColumnStatistics.prototype.max;weavejs.data.ColumnStatistics.prototype.count;
weavejs.data.ColumnStatistics.prototype.sum;weavejs.data.ColumnStatistics.prototype.squareSum;weavejs.data.ColumnStatistics.prototype.mean;weavejs.data.ColumnStatistics.prototype.variance;weavejs.data.ColumnStatistics.prototype.standardDeviation;weavejs.data.ColumnStatistics.prototype.map_key_runningTotal;weavejs.data.ColumnStatistics.prototype.outKeys;weavejs.data.ColumnStatistics.prototype.outNumbers;weavejs.data.ColumnStatistics.prototype.map_key_sortIndex;weavejs.data.ColumnStatistics.prototype.hack_map_key_number;
weavejs.data.ColumnStatistics.prototype.median;
weavejs.data.ColumnStatistics.prototype.asyncStart=function(){this.prevTriggerCounter=this.column.triggerCounter;this.i=0;this.keys=this.column.keys;this.min=Infinity;this.max=-Infinity;this.count=0;this.sum=0;this.squareSum=0;this.mean=NaN;this.variance=NaN;this.standardDeviation=NaN;this.outKeys=new Array(this.keys.length);this.outNumbers=new Array(this.keys.length);this.map_key_sortIndex=new weavejs.util.JS.WeakMap;this.hack_map_key_number=new weavejs.util.JS.WeakMap;this.median=NaN;this.map_key_runningTotal=
new weavejs.util.JS.WeakMap;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Calculating statistics for {0} values in {1}',this.keys.length,weavejs.util.DebugUtils.debugId(this.column)))};
weavejs.data.ColumnStatistics.prototype.iterate=function(stopTime){if(this.busy||this.prevTriggerCounter!=this.column.triggerCounter){this.prevTriggerCounter=0;return 1}for(;this.i<this.keys.length;++this.i){if(weavejs.util.JS.now()>stopTime)return this.i/this.keys.length;var key=org.apache.flex.utils.Language.as(this.keys[this.i],weavejs.api.data.IQualifiedKey);var value=this.column.getValueFromKey(key,Number);if(isFinite(value)){this.sum+=value;this.squareSum+=value*value;if(value<this.min)this.min=
value;if(value>this.max)this.max=value;this.map_key_runningTotal.set(key,this.sum);this.hack_map_key_number.set(key,value);this.outKeys[this.count]=key;this.outNumbers[this.count]=value;++this.count}}return 1};
weavejs.data.ColumnStatistics.prototype.asyncComplete=function(){if(this.busy){Weave.getCallbacks(this).triggerCallbacks();return}if(this.count==0)this.min=this.max=NaN;this.mean=this.sum/this.count;this.variance=this.squareSum/this.count-this.mean*this.mean;this.standardDeviation=Math.sqrt(this.variance);this.outKeys.length=this.count;this.outNumbers.length=this.count;var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);var outIndices=weavejs.util.StandardLib.sortOn(this.outKeys,
[this.outNumbers,qkm.map_qkey_keyType,qkm.map_qkey_localName],null,false,true);this.median=this.outNumbers[outIndices[org.apache.flex.utils.Language._int(this.count/2)]];this.i=this.count;while(--this.i>=0)this.map_key_sortIndex.set(this.outKeys[outIndices[this.i]],this.i);var tempNumber;try{tempNumber=weavejs.util.StandardLib.asNumber(this.column.getMetadata(weavejs.api.data.ColumnMetadata.MIN));if(isFinite(tempNumber))this.min=tempNumber}catch(e){}try{tempNumber=weavejs.util.StandardLib.asNumber(this.column.getMetadata(weavejs.api.data.ColumnMetadata.MAX));
if(isFinite(tempNumber))this.max=tempNumber}catch(e){}this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMin,this,'getMin'),this.min);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMax,this,'getMax'),this.max);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getCount,this,'getCount'),this.count);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSum,this,'getSum'),this.sum);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSquareSum,
this,'getSquareSum'),this.squareSum);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMean,this,'getMean'),this.mean);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getVariance,this,'getVariance'),this.variance);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getStandardDeviation,this,'getStandardDeviation'),this.standardDeviation);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getMedian,this,'getMedian'),
this.median);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getSortIndex,this,'getSortIndex'),this.map_key_sortIndex);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.hack_getNumericData,this,'hack_getNumericData'),this.hack_map_key_number);this.map_method_result.set(org.apache.flex.utils.Language.closure(this.getRunningTotals,this,'getRunningTotals'),this.map_key_runningTotal);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.ColumnStatistics.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnStatistics',qName:'weavejs.data.ColumnStatistics'}],interfaces:[weavejs.api.data.IColumnStatistics]};goog.provide('weavejs.data.StatisticsCache');goog.require('weavejs.data.ColumnStatistics');goog.require('weavejs.api.data.IStatisticsCache');weavejs.data.StatisticsCache=function(){this.map_column_stats=new weavejs.util.JS.WeakMap};weavejs.data.StatisticsCache.prototype.getRunningTotals=function(column){return org.apache.flex.utils.Language.as(this.getColumnStatistics(column),weavejs.data.ColumnStatistics).getRunningTotals()};weavejs.data.StatisticsCache.prototype.map_column_stats;
weavejs.data.StatisticsCache.prototype.getColumnStatistics=function(column){if(column==null)throw new Error('getColumnStatistics(): Column parameter cannot be null.');if(Weave.wasDisposed(column)){this.map_column_stats['delete'](column);throw new Error('Invalid attempt to retrieve statistics for a disposed column.');}var stats=this.map_column_stats.get(column);if(!stats){stats=new weavejs.data.ColumnStatistics(column);this.map_column_stats.set(column,Weave.disposableChild(column,stats))}return stats};
weavejs.data.StatisticsCache.prototype.FLEXJS_CLASS_INFO={names:[{name:'StatisticsCache',qName:'weavejs.data.StatisticsCache'}],interfaces:[weavejs.api.data.IStatisticsCache]};goog.provide('weavejs.net.URLRequestUtils');goog.require('weavejs.api.net.IURLRequestUtils');weavejs.net.URLRequestUtils=function(){this.d2d_context_url_promise=new weavejs.util.Dictionary2D};weavejs.net.URLRequestUtils.METHOD_GET='get';weavejs.net.URLRequestUtils.METHOD_POST='post';weavejs.net.URLRequestUtils.RESPONSE_ARRAYBUFFER='arraybuffer';weavejs.net.URLRequestUtils.RESPONSE_BLOB='blob';weavejs.net.URLRequestUtils.RESPONSE_DOCUMENT='document';weavejs.net.URLRequestUtils.RESPONSE_JSON='json';
weavejs.net.URLRequestUtils.RESPONSE_TEXT='text';weavejs.net.URLRequestUtils.prototype.byteArrayToString=function(byteArray){var CHUNK_SIZE=8192;var n=byteArray.length;if(n<=CHUNK_SIZE)return String.fromCharCode.apply(String,byteArray);var strings=[];for(var i=0;i<byteArray.length;)strings.push(String.fromCharCode.apply(null,byteArray.slice(i,i+=CHUNK_SIZE)));return strings.join('')};
weavejs.net.URLRequestUtils.prototype.request=function(relevantContext,method,url,requestHeaders,data,responseType){var self=this;var __localFn0__=function(byteArray){var __localFn0__=function(resolve,reject){switch(responseType){case weavejs.net.URLRequestUtils.RESPONSE_TEXT:return resolve(self.byteArrayToString(byteArray));case weavejs.net.URLRequestUtils.RESPONSE_JSON:return resolve(JSON.parse(self.byteArrayToString(byteArray)));case weavejs.net.URLRequestUtils.RESPONSE_BLOB:return resolve(new weavejs.util.JS.global.Blob([byteArray.buffer]));
case weavejs.net.URLRequestUtils.RESPONSE_ARRAYBUFFER:return resolve(byteArray.buffer);case weavejs.net.URLRequestUtils.RESPONSE_DOCUMENT:return reject(new Error('responseType '+weavejs.net.URLRequestUtils.RESPONSE_DOCUMENT+' not supported for local files'));default:}};return new weavejs.util.WeavePromise(relevantContext,__localFn0__)};var __localFn1__=function(resolve,reject){var __localFn0__=function(event){resolve(ie9_XHR?request.responseText:request.response);done=true};var __localFn1__=function(event){if(!done)reject(request);
done=true};var __localFn2__=function(){var __localFn0__=function(){if(!done)reject(request);done=true};if(request.readyState==4&&request.status!=200)weavejs.util.JS.setTimeout(__localFn0__,1E3)};var done=false;var ie9_XHR=weavejs.util.JS.global.XDomainRequest;var XHR=ie9_XHR||weavejs.util.JS.global.XMLHttpRequest;var request=new XHR;request.open(method,url,true);for(var name in requestHeaders)request.setRequestHeader(name,requestHeaders[name],false);request.responseType=responseType;request.onload=
__localFn0__;request.onerror=__localFn1__;request.onreadystatechange=__localFn2__;request.send(data)};if(url.indexOf(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME)==0){var weaveRoot=Weave.getRoot(org.apache.flex.utils.Language.as(relevantContext,weavejs.api.core.ILinkableObject));var promise=this.get_d2d_context_url_promise(weaveRoot,url);if(!promise.getResult()&&!promise.getError())promise.setError(Weave.lang('Local file missing: {0}',url.substr(weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME.length)));
return promise.then(__localFn0__)}return new weavejs.util.WeavePromise(relevantContext,__localFn1__)};weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME='local://';weavejs.net.URLRequestUtils.prototype.d2d_context_url_promise;
weavejs.net.URLRequestUtils.prototype.get_d2d_context_url_promise=function(weaveRoot,url){var promise=this.d2d_context_url_promise.get(weaveRoot,url);if(!promise){promise=new weavejs.util.WeavePromise(weaveRoot);promise.setResult(null);this.d2d_context_url_promise.set(weaveRoot,url,promise)}return promise};
weavejs.net.URLRequestUtils.prototype.saveLocalFile=function(weaveRoot,name,byteArray){var url=weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME+name;var promise=this.get_d2d_context_url_promise(weaveRoot,url);promise.setResult(byteArray);return url};weavejs.net.URLRequestUtils.prototype.getLocalFile=function(weaveRoot,name){var url=weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME+name;var promise=this.get_d2d_context_url_promise(weaveRoot,url);var result=promise.getResult();return result};
weavejs.net.URLRequestUtils.prototype.removeLocalFile=function(weaveRoot,name){var url=weavejs.net.URLRequestUtils.LOCAL_FILE_URL_SCHEME+name;var promise=this.get_d2d_context_url_promise(weaveRoot,url);promise.setError(Weave.lang('File removed: {0}',url))};weavejs.net.URLRequestUtils.prototype.getLocalFileNames=function(weaveRoot){return weavejs.util.JS.mapKeys(this.d2d_context_url_promise.map.get(weaveRoot)).sort()};
weavejs.net.URLRequestUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'URLRequestUtils',qName:'weavejs.net.URLRequestUtils'}],interfaces:[weavejs.api.net.IURLRequestUtils]};goog.provide('weavejs.path.WeavePath');weavejs.path.WeavePath=function(weave,basePath){this.weave=weave;this._path=weavejs.path.WeavePath._A(basePath,1);this._parent=null};weavejs.path.WeavePath.prototype.weave;weavejs.path.WeavePath.prototype._path;weavejs.path.WeavePath.prototype._parent;
weavejs.path.WeavePath._A=function(args,option){option=typeof option!=='undefined'?option:0;if(args.length==option&&org.apache.flex.utils.Language.is(args[0],Array))return[].concat(args[0],Array.prototype.slice.call(args,1));return Array.prototype.slice.call(args)};
weavejs.path.WeavePath.prototype.push=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var newWeavePath=new this.constructor(this.weave,this.getPath(relativePath));newWeavePath._parent=this;return newWeavePath};weavejs.path.WeavePath.prototype.pop=function(){if(this._parent)return this._parent;else weavejs.path.WeavePath._failMessage('pop','stack is empty');return null};
weavejs.path.WeavePath.prototype.request=function(relativePath_objectType){relativePath_objectType=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_objectType,2);if(!weavejs.path.WeavePath._assertParams('request',args))return this;var type=args.pop();var relativePath=args;var classDef;var className;if(weavejs.util.JS.isClass(type)){classDef=weavejs.util.JS.asClass(type);className=Weave.className(classDef)}else{className=org.apache.flex.utils.Language.as(type,
String);classDef=Weave.getDefinition(className);if(!classDef)throw new Error('No class definition for {0}',className);}var objectPath=this._path.concat(relativePath);if(!objectPath.length){if(Object(this.weave.root).constructor==classDef)return this;throw new Error('Cannot request an object at the root path');}var parentPath=objectPath.concat();var childName=parentPath.pop();var parent=Weave.followPath(this.weave.root,parentPath);var hashMap=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);
var dynamicObject=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);var child=null;if(hashMap){if(org.apache.flex.utils.Language.is(childName,Number))childName=hashMap.getNames()[childName];child=hashMap.requestObject(org.apache.flex.utils.Language.as(childName,String),classDef,false)}else if(dynamicObject)child=dynamicObject.requestGlobalObject(org.apache.flex.utils.Language.as(childName,String),classDef,false);else child=Weave.followPath(this.weave.root,objectPath);
if(child&&child.constructor==classDef)return this;throw new Error(weavejs.util.StandardLib.substitute('Request for {0} failed at path {1}',org.apache.flex.utils.Language.as(type,String)||Weave.className(type),JSON.stringify(objectPath)));};
weavejs.path.WeavePath.prototype.remove=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);if(this._path.length+relativePath.length==0)throw new Error('Cannot remove root object');var parentPath=this._path.concat(relativePath);var childName=parentPath.pop();var parent=Weave.followPath(this.weave.root,parentPath);var hashMap=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(hashMap){if(org.apache.flex.utils.Language.is(childName,
Number))childName=hashMap.getNames()[childName];if(hashMap.objectIsLocked(org.apache.flex.utils.Language.as(childName,String)))throw new Error('Object is locked and cannot be removed: '+this.push(relativePath));hashMap.removeObject(org.apache.flex.utils.Language.as(childName,String));return this}var dynamicObject=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);if(dynamicObject){if(dynamicObject.locked)throw new Error('Object is locked and cannot be removed: '+this.push(relativePath));
dynamicObject.removeObject();return this}if(parent)throw new Error('Parent object does not support dynamic children, so cannot remove child: '+this.push(relativePath));else throw new Error('No parent from which to remove a child: '+this.push(relativePath));};
weavejs.path.WeavePath.prototype.reorder=function(orderedNames){orderedNames=Array.prototype.slice.call(arguments,0);orderedNames=weavejs.path.WeavePath._A(orderedNames,1);if(weavejs.path.WeavePath._assertParams('reorder',orderedNames)){var hashMap=org.apache.flex.utils.Language.as(this.getObject(),weavejs.api.core.ILinkableHashMap);if(hashMap)if(orderedNames)hashMap.setNameOrder(orderedNames);weavejs.path.WeavePath._failMessage('reorder','path does not refer to an ILinkableHashMap: '+this)}return this};
weavejs.path.WeavePath.prototype.state=function(relativePath_state){relativePath_state=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_state,2);if(weavejs.path.WeavePath._assertParams('state',args)){var state=args.pop();var obj=this.getObject(args);if(obj)Weave.setState(obj,state,true);else weavejs.path.WeavePath._failObject('state',this.getPath(args))}return this};
weavejs.path.WeavePath.prototype.diff=function(relativePath_diff){relativePath_diff=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_diff,2);if(weavejs.path.WeavePath._assertParams('diff',args)){var diff=args.pop();var obj=this.getObject(args);if(obj)Weave.setState(obj,diff,false);else weavejs.path.WeavePath._failObject('diff',this.getPath(args))}return this};
weavejs.path.WeavePath.prototype.addCallback=function(relevantContext,callback,triggerCallbackNow,immediateMode,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;immediateMode=typeof immediateMode!=='undefined'?immediateMode:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;if(typeof relevantContext==='function'&&typeof callback!=='function'){if(arguments.length>3)delayWhileBusy=immediateMode;if(arguments.length>2)immediateMode=
triggerCallbackNow;if(arguments.length>1)triggerCallbackNow=callback;if(arguments.length>0)callback=org.apache.flex.utils.Language.as(relevantContext,Function);relevantContext=null}else if(!weavejs.path.WeavePath._assertParams('addCallback',arguments,2))return this;if(!relevantContext)callback['this']=this;var object=this.getObject();if(!object)throw new Error('No ILinkableObject to which to add a callback: '+this);if(immediateMode)Weave.getCallbacks(object).addImmediateCallback(relevantContext,callback,
triggerCallbackNow,false);else Weave.getCallbacks(object).addGroupedCallback(relevantContext,callback,triggerCallbackNow,delayWhileBusy);return this};
weavejs.path.WeavePath.prototype.removeCallback=function(relevantContext,callback){var object=this.getObject();if(!object)throw new Error('No ILinkableObject from which to remove a callback: '+this);if(arguments.length==1&&typeof relevantContext==='function'){callback=org.apache.flex.utils.Language.as(relevantContext,Function);relevantContext=null}else if(!weavejs.path.WeavePath._assertParams('removeCallback',arguments,2))return this;Weave.getCallbacks(object).removeCallback(relevantContext||this,
callback);return this};weavejs.path.WeavePath.prototype.exec=function(script_or_function,callback){callback=typeof callback!=='undefined'?callback:null;if(weavejs.path.WeavePath._assertParams('exec',arguments)){var result=this.getValue(script_or_function);if(callback!=null)callback.call(this,result)}return this};
weavejs.path.WeavePath.prototype.call=function(func,args){args=Array.prototype.slice.call(arguments,1);if(!func)weavejs.path.WeavePath._assertParams('call',[]);else func.apply(this,args);return this};
weavejs.path.WeavePath.prototype.forEach=function(items,visitorFunction){if(weavejs.path.WeavePath._assertParams('forEach',arguments,2))if(org.apache.flex.utils.Language.is(items,Array)&&Array.prototype.forEach)items.forEach(visitorFunction,this);else for(var key in items)visitorFunction.call(this,items[key],key,items);return this};
weavejs.path.WeavePath.prototype.forEachName=function(relativePath_visitorFunction){relativePath_visitorFunction=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_visitorFunction,2);if(weavejs.path.WeavePath._assertParams('forEachName',args)){var visitorFunction=org.apache.flex.utils.Language.as(args.pop(),Function);this.getNames(args).forEach(visitorFunction,this)}return this};
weavejs.path.WeavePath.prototype.forEachChild=function(relativePath_visitorFunction){relativePath_visitorFunction=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_visitorFunction,2);if(weavejs.path.WeavePath._assertParams('forEachChild',args)){var visitorFunction=args.pop();this.getChildren(args).forEach(visitorFunction,this)}return this};
weavejs.path.WeavePath.prototype.trace=function(args){args=Array.prototype.slice.call(arguments,0);weavejs.util.JS.log.apply(Weave,weavejs.path.WeavePath._A(args));return this};weavejs.path.WeavePath.prototype.getPath=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);return this._path.concat(weavejs.path.WeavePath._A(relativePath,1))};
weavejs.path.WeavePath.prototype._getChildNames=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var object=this.getObject(relativePath);if(object){if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap))return org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap).getNames();if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableDynamicObject))return[null];
return org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).getLinkablePropertyNames(object,true)}throw new Error('No ILinkableObject for which to get child names at '+this);};weavejs.path.WeavePath.prototype.getNames=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return this._getChildNames(relativePath)};
weavejs.path.WeavePath.prototype.getChildren=function(relativePath){var self=this;relativePath=Array.prototype.slice.call(arguments,0);var __localFn0__=function(name){return this.push(relativePath.concat(name))};relativePath=weavejs.path.WeavePath._A(relativePath,1);return this._getChildNames(relativePath).map(__localFn0__,this)};
weavejs.path.WeavePath.prototype.getType=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var object=this.getObject(relativePath);if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableHashMap)&&this.getType('class'))return org.apache.flex.utils.Language.as(this.getState('class'),String);return Weave.className(object)};
weavejs.path.WeavePath.prototype.getSimpleType=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var type=Weave.className(this.getObject(relativePath));return type&&type.split('.').pop().split(':').pop()};
weavejs.path.WeavePath.prototype.getState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var obj=this.getObject(relativePath);if(obj)return Weave.getState(obj);else weavejs.util.JS.error('No ILinkableObject from which to get session state at '+this.push(relativePath));return null};
weavejs.path.WeavePath.prototype.getTypedState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).getTypedStateTree(this.getObject(relativePath))};
weavejs.path.WeavePath.prototype.getUntypedState=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);var state=weavejs.util.JS.copyObject(this.getState(relativePath));return this._removeTypeFromState(state)};
weavejs.path.WeavePath.prototype._removeTypeFromState=function(state){if(weavejs.api.core.DynamicState.isDynamicStateArray(state)){var newState={};var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var typedState=foreachiter0_target[foreachiter0];newState[typedState[weavejs.api.core.DynamicState.OBJECT_NAME]||'']=this._removeTypeFromState(typedState[weavejs.api.core.DynamicState.SESSION_STATE])}return newState}if(typeof state==='object')for(var key in state)state[key]=this._removeTypeFromState(state[key]);
return state};weavejs.path.WeavePath.prototype.getDiff=function(relativePath_previousState){relativePath_previousState=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_previousState,2);if(weavejs.path.WeavePath._assertParams('getDiff',args)){var previousState=args.pop();var obj=this.getObject(args);if(obj)return Weave.computeDiff(previousState,Weave.getState(obj));else weavejs.util.JS.error('No ILinkableObject from which to get diff at '+this.push(args))}return null};
weavejs.path.WeavePath.prototype.getReverseDiff=function(relativePath_otherState){relativePath_otherState=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_otherState,2);if(weavejs.path.WeavePath._assertParams('getReverseDiff',args)){var otherState=args.pop();var obj=this.getObject(args);if(obj)return Weave.computeDiff(Weave.getState(obj),otherState);else weavejs.util.JS.error('No ILinkableObject from which to get reverse diff at '+this.push(args))}return null};
weavejs.path.WeavePath.prototype.getValue=function(script_or_function,args){args=Array.prototype.slice.call(arguments,1);if(!script_or_function)weavejs.path.WeavePath._assertParams('getValue',[]);if(org.apache.flex.utils.Language.is(script_or_function,String))script_or_function=weavejs.util.JS.compile(script_or_function);return script_or_function.apply(this.getObject(),args)};
weavejs.path.WeavePath.prototype.getObject=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);relativePath=weavejs.path.WeavePath._A(relativePath,1);return Weave.followPath(this.weave.root,this.getPath(relativePath))};weavejs.path.WeavePath.prototype.toString=function(){return'WeavePath('+JSON.stringify(this._path)+')'};
weavejs.path.WeavePath._assertParams=function(methodName,args,minLength){minLength=typeof minLength!=='undefined'?minLength:1;if(!minLength)minLength=1;if(args.length<minLength){var min_params=minLength==1?'one parameter':minLength+' parameters';weavejs.path.WeavePath._failMessage(methodName,'requires at least '+min_params);return false}return true};weavejs.path.WeavePath._failPath=function(methodName,path){weavejs.path.WeavePath._failMessage(methodName,'command failed',path)};
weavejs.path.WeavePath._failObject=function(methodName,path){weavejs.path.WeavePath._failMessage(methodName,'object does not exist',path)};weavejs.path.WeavePath._failMessage=function(methodName,message,path){path=typeof path!=='undefined'?path:null;var str='WeavePath.'+methodName+'(): '+message;if(path)str+=' (path: '+JSON.stringify(path)+')';throw new Error(str);};
weavejs.path.WeavePath.migrate=function(source,destination){var typedState=source.getValue('WeaveAPI.SessionManager.getTypedStateTree(this)');var delayed=[];weavejs.path.WeavePath._setTypedState(destination.path(),typedState,delayed);for(var i=delayed.length-1;i>=0;i--){var cc=delayed[i];cc.resumeCallbacks()}};
weavejs.path.WeavePath._setTypedState=function(path,typedState,delayedCallbacks){var type=typedState[weavejs.api.core.DynamicState.CLASS_NAME];var state=typedState[weavejs.api.core.DynamicState.SESSION_STATE];var hasChildren=weavejs.api.core.DynamicState.isDynamicStateArray(state);var def=Weave.getDefinition(type);if(def)path.request(def);else if(hasChildren)path.request(weavejs.core.LinkableHashMap).push('class').request(weavejs.core.LinkableString).state(type);else path.request(weavejs.core.LinkableVariable);
var cc=Weave.getCallbacks(path.getObject());cc.delayCallbacks();delayedCallbacks.push(cc);if(hasChildren){var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){typedState=foreachiter1_target[foreachiter1];type=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(type==='Array')path.state(typedState[weavejs.api.core.DynamicState.SESSION_STATE]);else weavejs.path.WeavePath._setTypedState(path.push(typedState[weavejs.api.core.DynamicState.OBJECT_NAME]),typedState,delayedCallbacks)}}else path.state(state)};
weavejs.path.WeavePath.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePath',qName:'weavejs.path.WeavePath'}]};goog.provide('weavejs.core.LinkableWatcher');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableWatcher=function(typeRestriction,immediateCallback,groupedCallback){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;immediateCallback=typeof immediateCallback!=='undefined'?immediateCallback:null;groupedCallback=typeof groupedCallback!=='undefined'?groupedCallback:null;this._pathDependencies=new weavejs.util.Dictionary2D;this._typeRestriction=typeRestriction;if(immediateCallback!=null)Weave.getCallbacks(this).addImmediateCallback(null,immediateCallback);
if(groupedCallback!=null)Weave.getCallbacks(this).addGroupedCallback(null,groupedCallback)};weavejs.core.LinkableWatcher.prototype._typeRestriction;weavejs.core.LinkableWatcher.prototype._target;weavejs.core.LinkableWatcher.prototype._foundTarget=true;weavejs.core.LinkableWatcher.prototype._targetPath;weavejs.core.LinkableWatcher.prototype._pathDependencies;
weavejs.core.LinkableWatcher.prototype.internalSetTarget=function(newTarget){if(this._foundTarget&&this._typeRestriction)newTarget=org.apache.flex.utils.Language.as(org.apache.flex.utils.Language.as(newTarget,this._typeRestriction),weavejs.api.core.ILinkableObject);if(this._target==newTarget)return;if(this._target){Weave.getCallbacks(this._target).removeCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetTrigger,this,'_handleTargetTrigger'));Weave.getCallbacks(this._target).removeCallback(this,
org.apache.flex.utils.Language.closure(this._handleTargetDispose,this,'_handleTargetDispose'));if(Weave.getOwner(this._target)==this)Weave.dispose(this._target);else org.apache.flex.utils.Language.as(weavejs.WeaveAPI.SessionManager,weavejs.core.SessionManager).unregisterLinkableChild(this,this._target)}this._target=newTarget;if(this._target){Weave.linkableChild(this,this._target);Weave.getCallbacks(this._target).removeCallback(this,org.apache.flex.utils.Language.closure(Weave.getCallbacks(this).triggerCallbacks,
Weave.getCallbacks(this),'triggerCallbacks'));Weave.getCallbacks(this._target).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetTrigger,this,'_handleTargetTrigger'),false,true);Weave.getCallbacks(this._target).addDisposeCallback(this,org.apache.flex.utils.Language.closure(this._handleTargetDispose,this,'_handleTargetDispose'))}if(this._foundTarget)this._handleTargetTrigger()};
weavejs.core.LinkableWatcher.prototype._handleTargetTrigger=function(){if(this._foundTarget)Weave.getCallbacks(this).triggerCallbacks();else this.handlePath()};weavejs.core.LinkableWatcher.prototype._handleTargetDispose=function(){if(this._targetPath)this.handlePath();else{this._target=null;Weave.getCallbacks(this).triggerCallbacks()}};
weavejs.core.LinkableWatcher.prototype.handlePath=function(){if(!this._targetPath){this._foundTarget=true;this.internalSetTarget(null);return}var node=Weave.getRoot(this);var subPath=[];var foreachiter0_target=this._targetPath;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(org.apache.flex.utils.Language.is(node,weavejs.api.core.ILinkableCompositeObject))this.addPathDependency(org.apache.flex.utils.Language.as(node,weavejs.api.core.ILinkableCompositeObject),
name);subPath[0]=name;var child=Weave.followPath(node,subPath);if(child)node=child;else{if(org.apache.flex.utils.Language.is(node,weavejs.api.core.ILinkableHashMap))node=org.apache.flex.utils.Language.as(node,weavejs.api.core.ILinkableHashMap).childListCallbacks;if(org.apache.flex.utils.Language.is(node,weavejs.api.core.ILinkableDynamicObject))node=null;var lostTarget=this._foundTarget;this._foundTarget=false;this.internalSetTarget(node);if(lostTarget)Weave.getCallbacks(this).triggerCallbacks();return}}this._foundTarget=
!this._typeRestriction||org.apache.flex.utils.Language.is(node,this._typeRestriction);this.internalSetTarget(node)};
weavejs.core.LinkableWatcher.prototype.addPathDependency=function(parent,pathElement){var lhm=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(lhm&&org.apache.flex.utils.Language.is(pathElement,String))return;var ldo=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableDynamicObject);if(ldo)pathElement=null;if(!this._pathDependencies.get(parent,pathElement)){var child=Weave.followPath(parent,[pathElement]);this._pathDependencies.set(parent,pathElement,child);
var dependencyCallbacks=this.getDependencyCallbacks(parent);dependencyCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'));dependencyCallbacks.addDisposeCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'))}};
weavejs.core.LinkableWatcher.prototype.getDependencyCallbacks=function(parent){var lhm=org.apache.flex.utils.Language.as(parent,weavejs.api.core.ILinkableHashMap);if(lhm)return lhm.childListCallbacks;return Weave.getCallbacks(parent)};weavejs.core.LinkableWatcher.prototype.handlePathDependencies=function(){this._pathDependencies.forEach(org.apache.flex.utils.Language.closure(this.handlePathDependencies_each,this,'handlePathDependencies_each'),this)};
weavejs.core.LinkableWatcher.prototype.handlePathDependencies_each=function(parent,pathElement,child){var newChild=Weave.followPath(parent,[pathElement]);if(Weave.wasDisposed(parent)||child!=newChild){this.resetPathDependencies();this.handlePath();return true}return false};
weavejs.core.LinkableWatcher.prototype.resetPathDependencies=function(){this._pathDependencies.map.forEach(org.apache.flex.utils.Language.closure(this.resetPathDependencies_each,this,'resetPathDependencies_each'),this);this._pathDependencies=new weavejs.util.Dictionary2D};weavejs.core.LinkableWatcher.prototype.resetPathDependencies_each=function(map_child,parent){this.getDependencyCallbacks(parent).removeCallback(this,org.apache.flex.utils.Language.closure(this.handlePathDependencies,this,'handlePathDependencies'))};
weavejs.core.LinkableWatcher.prototype.dispose=function(){this._targetPath=null;this._target=null};
Object.defineProperties(weavejs.core.LinkableWatcher.prototype,{target:{get:function(){return this._foundTarget?this._target:null},set:function(newTarget){var cc=Weave.getCallbacks(this);cc.delayCallbacks();this.targetPath=null;this.internalSetTarget(newTarget);cc.resumeCallbacks()}},targetPath:{get:function(){return this._targetPath?this._targetPath.concat():null},set:function(path){if(path&&path.length==0)path=null;if(weavejs.util.StandardLib.compare(this._targetPath,path)!=0){var cc=Weave.getCallbacks(this);
cc.delayCallbacks();this.resetPathDependencies();this._targetPath=path;this.handlePath();cc.triggerCallbacks();cc.resumeCallbacks()}}}});weavejs.core.LinkableWatcher.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableWatcher',qName:'weavejs.core.LinkableWatcher'}],interfaces:[weavejs.api.core.ILinkableObject,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.core.LinkableDynamicObject');goog.require('weavejs.core.LinkableWatcher');goog.require('weavejs.api.core.ICallbackCollection');goog.require('weavejs.api.core.ILinkableDynamicObject');weavejs.core.LinkableDynamicObject=function(typeRestriction){typeRestriction=typeof typeRestriction!=='undefined'?typeRestriction:null;this.cc=Weave.disposableChild(this,weavejs.core.CallbackCollection);weavejs.core.LinkableDynamicObject.base(this,'constructor',typeRestriction)};
goog.inherits(weavejs.core.LinkableDynamicObject,weavejs.core.LinkableWatcher);weavejs.core.LinkableDynamicObject.prototype.cc;weavejs.core.LinkableDynamicObject.prototype._locked=false;weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME='Array';
weavejs.core.LinkableDynamicObject.prototype.getSessionState=function(){var obj=this.targetPath||this.target;if(!obj)return[];var className=Weave.className(obj);var sessionState=org.apache.flex.utils.Language.as(obj,Array)||Weave.getState(org.apache.flex.utils.Language.as(obj,weavejs.api.core.ILinkableObject));return[weavejs.api.core.DynamicState.create(null,className,sessionState)]};
weavejs.core.LinkableDynamicObject.prototype.setSessionState=function(newState,removeMissingDynamicObjects){if(newState==null)return;try{this.cc.delayCallbacks();if(!newState.length){if(removeMissingDynamicObjects)this.target=null;return}if(!weavejs.api.core.DynamicState.isDynamicStateArray(newState,true)){this.targetPath=newState;return}if(newState.length>1){this.handleDeprecatedSessionState(newState,removeMissingDynamicObjects);return}var dynamicState=newState[0];var className=dynamicState[weavejs.api.core.DynamicState.CLASS_NAME];
var objectName=dynamicState[weavejs.api.core.DynamicState.OBJECT_NAME];var sessionState=dynamicState[weavejs.api.core.DynamicState.SESSION_STATE];if(className=='weave.core::GlobalObjectReference'||className=='GlobalObjectReference'){className=weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME;sessionState=[objectName]}if(className==weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME||!className&&this.targetPath)this.targetPath=org.apache.flex.utils.Language.as(sessionState,Array);else if(className==
weavejs.core.SessionManager.DIFF_DELETE)this.target=null;else{var prevTarget=this.target;var classDef=Weave.getDefinition(className);if(className||removeMissingDynamicObjects)this.setLocalObjectType(classDef);if(!className&&this.target||classDef&&org.apache.flex.utils.Language.is(this.target,classDef))Weave.setState(this.target,sessionState,prevTarget!=this.target||removeMissingDynamicObjects)}}finally{this.cc.resumeCallbacks()}};
weavejs.core.LinkableDynamicObject.prototype.internalSetTarget=function(newTarget){if(newTarget===this||Weave.getDescendants(newTarget,weavejs.core.LinkableDynamicObject).indexOf(this)>=0)newTarget=null;weavejs.core.LinkableDynamicObject.base(this,'internalSetTarget',newTarget)};
weavejs.core.LinkableDynamicObject.prototype.setLocalObjectType=function(classDef){if(this._locked)return;this.cc.delayCallbacks();this.targetPath=null;if(Weave.isLinkable(classDef)&&(this._typeRestriction==null||org.apache.flex.utils.Language.is(classDef.prototype,this._typeRestriction))){var obj=this.target;if(!obj||obj.constructor!=classDef)org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',new classDef)}else org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,
this,'target',null);this.cc.resumeCallbacks()};weavejs.core.LinkableDynamicObject.prototype.requestLocalObject=function(objectType,lockObject){this.cc.delayCallbacks();if(objectType)this.setLocalObjectType(objectType);else this.target=null;if(lockObject)this._locked=true;this.cc.resumeCallbacks();if(objectType)return org.apache.flex.utils.Language.as(this.target,objectType);return this.target};
weavejs.core.LinkableDynamicObject.prototype.requestGlobalObject=function(name,objectType,lockObject){if(!name)return this.requestLocalObject(objectType,lockObject);if(!this._locked){this.cc.delayCallbacks();this.targetPath=[name];Weave.getRoot(this).requestObject(name,objectType,lockObject);if(lockObject)this._locked=true;this.cc.resumeCallbacks()}if(objectType)return org.apache.flex.utils.Language.as(this.target,objectType);return this.target};
weavejs.core.LinkableDynamicObject.prototype.requestLocalObjectCopy=function(objectToCopy){this.cc.delayCallbacks();var classDef=objectToCopy?Object(objectToCopy).constructor:null;var object=this.requestLocalObject(classDef,false);if(object!=null&&objectToCopy!=null)Weave.copyState(objectToCopy,object);this.cc.resumeCallbacks()};
weavejs.core.LinkableDynamicObject.prototype.handleDeprecatedSessionState=function(newState,removeMissingDynamicObjects){var i=newState.length;while(i--){var item=newState[i];if(org.apache.flex.utils.Language.is(item,String))item=weavejs.api.core.DynamicState.create(null,weavejs.core.LinkableDynamicObject.ARRAY_CLASS_NAME,[item]);if(!weavejs.api.core.DynamicState.isDynamicState(item))break;if(item[weavejs.api.core.DynamicState.CLASS_NAME]==weavejs.core.SessionManager.DIFF_DELETE){if(this.globalName==
(item[weavejs.api.core.DynamicState.OBJECT_NAME]||null))this.target=null}else{this.setSessionState([item],removeMissingDynamicObjects);return}}if(removeMissingDynamicObjects)this.target=null};weavejs.core.LinkableDynamicObject.prototype.lock=function(){this._locked=true};weavejs.core.LinkableDynamicObject.prototype.removeObject=function(){if(!this._locked)org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null)};
weavejs.core.LinkableDynamicObject.prototype.dispose=function(){this.cc.dispose();weavejs.core.LinkableDynamicObject.base(this,'dispose')};weavejs.core.LinkableDynamicObject.prototype.addImmediateCallback=function(relevantContext,callback,runCallbackNow,alwaysCallLast){runCallbackNow=typeof runCallbackNow!=='undefined'?runCallbackNow:false;alwaysCallLast=typeof alwaysCallLast!=='undefined'?alwaysCallLast:false;this.cc.addImmediateCallback(relevantContext,callback,runCallbackNow,alwaysCallLast)};
weavejs.core.LinkableDynamicObject.prototype.addGroupedCallback=function(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy){triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;delayWhileBusy=typeof delayWhileBusy!=='undefined'?delayWhileBusy:true;this.cc.addGroupedCallback(relevantContext,groupedCallback,triggerCallbackNow,delayWhileBusy)};
weavejs.core.LinkableDynamicObject.prototype.addDisposeCallback=function(relevantContext,callback){this.cc.addDisposeCallback(relevantContext,callback)};weavejs.core.LinkableDynamicObject.prototype.removeCallback=function(relevantContext,callback){this.cc.removeCallback(relevantContext,callback)};weavejs.core.LinkableDynamicObject.prototype.triggerCallbacks=function(){this.cc.triggerCallbacks()};weavejs.core.LinkableDynamicObject.prototype.delayCallbacks=function(){this.cc.delayCallbacks()};
weavejs.core.LinkableDynamicObject.prototype.resumeCallbacks=function(){this.cc.resumeCallbacks()};
Object.defineProperties(weavejs.core.LinkableDynamicObject.prototype,{internalObject:{get:function(){return this.target}},target:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.core.LinkableDynamicObject,this,'target')},set:function(newTarget){if(this._locked)return;if(!newTarget){org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null);return}this.cc.delayCallbacks();var path=Weave.findPath(Weave.getRoot(this),newTarget);if(path)this.targetPath=
path;else{var owner=Weave.getOwner(newTarget);if(owner===this||!owner)org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',newTarget);else org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,this,'target',null)}this.cc.resumeCallbacks()}},targetPath:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.core.LinkableDynamicObject,this,'targetPath')},set:function(path){if(this._locked)return;org.apache.flex.utils.Language.superSetter(weavejs.core.LinkableDynamicObject,
this,'targetPath',path)}},globalName:{get:function(){if(this._targetPath&&this._targetPath.length==1)return this._targetPath[0];return null},set:function(newGlobalName){if(this._locked)return;if(!newGlobalName)newGlobalName=null;var oldGlobalName=this.globalName;if(oldGlobalName==newGlobalName)return;this.cc.delayCallbacks();if(newGlobalName==null)this.requestLocalObjectCopy(this.internalObject);else{var root=Weave.getRoot(this);if(this.target&&!this.targetPath&&!root.getObject(newGlobalName))root.requestObjectCopy(newGlobalName,
this.internalObject);this.targetPath=[newGlobalName]}this.cc.resumeCallbacks()}},locked:{get:function(){return this._locked}},triggerCounter:{get:function(){return this.cc.triggerCounter}},callbacksAreDelayed:{get:function(){return this.cc.callbacksAreDelayed}}});weavejs.core.LinkableDynamicObject.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableDynamicObject',qName:'weavejs.core.LinkableDynamicObject'}],interfaces:[weavejs.api.core.ILinkableDynamicObject,weavejs.api.core.ICallbackCollection]};goog.provide('weavejs.data.column.DynamicColumn');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IColumnWrapper');
weavejs.data.column.DynamicColumn=function(columnTypeRestriction){columnTypeRestriction=typeof columnTypeRestriction!=='undefined'?columnTypeRestriction:null;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true);if(columnTypeRestriction==null)columnTypeRestriction=weavejs.api.data.IAttributeColumn;else if(!org.apache.flex.utils.Language.is(columnTypeRestriction.prototype,weavejs.api.data.IAttributeColumn)){weavejs.util.JS.error('DynamicColumn(): columnTypeRestriction does not implement IAttributeColumn:',
columnTypeRestriction);columnTypeRestriction=weavejs.api.data.IAttributeColumn}weavejs.data.column.DynamicColumn.base(this,'constructor',columnTypeRestriction)};goog.inherits(weavejs.data.column.DynamicColumn,weavejs.core.LinkableDynamicObject);weavejs.data.column.DynamicColumn.prototype.getInternalColumn=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn)};
weavejs.data.column.DynamicColumn.prototype.getMetadata=function(propertyName){if(this.internalObject)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn).getMetadata(propertyName);return null};weavejs.data.column.DynamicColumn.prototype.getMetadataPropertyNames=function(){if(this.internalObject)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn).getMetadataPropertyNames();return[]};
weavejs.data.column.DynamicColumn.prototype.containsKey=function(key){var col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);return col?col.containsKey(key):false};weavejs.data.column.DynamicColumn.cache=true;weavejs.data.column.DynamicColumn.prototype.d2d_type_key;weavejs.data.column.DynamicColumn.prototype._cacheCounter=0;
weavejs.data.column.DynamicColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=Array;if(!weavejs.data.column.DynamicColumn.cache){var col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);return col?col.getValueFromKey(key,dataType):undefined}if(this.triggerCounter!=this._cacheCounter){this._cacheCounter=this.triggerCounter;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true)}var value=
this.d2d_type_key.get(dataType,key);if(value===undefined){col=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IAttributeColumn);if(col)value=col.getValueFromKey(key,dataType);this.d2d_type_key.set(dataType,key,value===undefined?weavejs.data.column.DynamicColumn.UNDEFINED:value)}return value===weavejs.data.column.DynamicColumn.UNDEFINED?undefined:value};weavejs.data.column.DynamicColumn.UNDEFINED={};
Object.defineProperties(weavejs.data.column.DynamicColumn.prototype,{keys:{get:function(){return this.getInternalColumn()?this.getInternalColumn().keys:[]}}});weavejs.data.column.DynamicColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicColumn',qName:'weavejs.data.column.DynamicColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.provide('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.data.IColumnWrapper');weavejs.data.column.ExtendedDynamicColumn=function(){this._internalDynamicColumn=Weave.linkableChild(this,weavejs.data.column.DynamicColumn);weavejs.data.column.ExtendedDynamicColumn.base(this,'constructor');Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn))};
goog.inherits(weavejs.data.column.ExtendedDynamicColumn,weavejs.core.CallbackCollection);weavejs.data.column.ExtendedDynamicColumn.prototype.getInternalColumn=function(){return this.internalDynamicColumn.getInternalColumn()};weavejs.data.column.ExtendedDynamicColumn.prototype._internalDynamicColumn;weavejs.data.column.ExtendedDynamicColumn.prototype.getMetadata=function(propertyName){return this.internalDynamicColumn.getMetadata(propertyName)};
weavejs.data.column.ExtendedDynamicColumn.prototype.getMetadataPropertyNames=function(){return this.internalDynamicColumn.getMetadataPropertyNames()};weavejs.data.column.ExtendedDynamicColumn.prototype.containsKey=function(key){return this.internalDynamicColumn.containsKey(key)};weavejs.data.column.ExtendedDynamicColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;return this.internalDynamicColumn.getValueFromKey(key,dataType)};
Object.defineProperties(weavejs.data.column.ExtendedDynamicColumn.prototype,{internalDynamicColumn:{get:function(){return this._internalDynamicColumn}},keys:{get:function(){return this.internalDynamicColumn.keys}}});weavejs.data.column.ExtendedDynamicColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ExtendedDynamicColumn',qName:'weavejs.data.column.ExtendedDynamicColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.provide('weavejs.data.column.CSVColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.CSVColumn=function(){this.title=Weave.linkableChild(this,weavejs.core.LinkableString);this.data=Weave.linkableChild(this,weavejs.core.LinkableVariable,org.apache.flex.utils.Language.closure(this.invalidate,this,'invalidate'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.invalidate,this,'invalidate'));this.numericMode=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.invalidate,
this,'invalidate'));this._keys=[];this._stringValues=[];this._numberValues=[];weavejs.data.column.CSVColumn.base(this,'constructor');this.numericMode.value=false};goog.inherits(weavejs.data.column.CSVColumn,weavejs.data.column.AbstractAttributeColumn);
weavejs.data.column.CSVColumn.prototype.getMetadata=function(propertyName){switch(propertyName){case weavejs.api.data.ColumnMetadata.TITLE:return this.title.value;case weavejs.api.data.ColumnMetadata.KEY_TYPE:return this.keyType.value;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return this.numericMode.value?weavejs.api.data.DataType.NUMBER:weavejs.api.data.DataType.STRING}return weavejs.data.column.CSVColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.CSVColumn.prototype.title;weavejs.data.column.CSVColumn.prototype.data;
weavejs.data.column.CSVColumn.prototype.setDataTable=function(table){var stringTable=[];for(var r=0;r<table.length;r++){var row=org.apache.flex.utils.Language.as(table[r],Array).concat();for(var c=0;c<row.length;c++)row[c]=String(row[c]);stringTable[r]=row}this.data.setSessionState(stringTable)};weavejs.data.column.CSVColumn.prototype.keyType;weavejs.data.column.CSVColumn.prototype.numericMode;weavejs.data.column.CSVColumn.prototype.map_key_index=null;weavejs.data.column.CSVColumn.prototype._keys;
weavejs.data.column.CSVColumn.prototype._stringValues;weavejs.data.column.CSVColumn.prototype._numberValues;weavejs.data.column.CSVColumn.prototype.dirty=true;weavejs.data.column.CSVColumn.prototype.invalidate=function(){this.dirty=true};
weavejs.data.column.CSVColumn.prototype.validate=function(){this.map_key_index=new weavejs.util.JS.Map;this._keys.length=0;this._stringValues.length=0;this._numberValues.length=0;var key;var value;var table=org.apache.flex.utils.Language.as(this.data.getSessionState(),Array)||[];for(var i=0;i<table.length;i++){var row=org.apache.flex.utils.Language.as(table[i],Array);if(row==null||row.length==0)continue;key=weavejs.WeaveAPI.QKeyManager.getQKey(this.keyType.value,String(row[0]));value=String(row.length>
1?row[1]:'');this.map_key_index.set(key,this._keys.length);this._keys.push(key);this._stringValues.push(value);try{this._numberValues.push(Number(value))}catch(e){this._numberValues.push(NaN)}}this.dirty=false};weavejs.data.column.CSVColumn.prototype.containsKey=function(key){if(this.dirty)this.validate();return this.map_key_index.has(key)};
weavejs.data.column.CSVColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this.dirty)this.validate();var keyIndex=this.map_key_index.get(key);if(dataType==Boolean)return!isNaN(keyIndex);if(dataType==Number){if(isNaN(keyIndex))return NaN;return this._numberValues[keyIndex]}if(dataType==String){if(isNaN(keyIndex))return'';return this._stringValues[keyIndex]}if(isNaN(keyIndex))return this.numericMode.value?NaN:'';if(this.numericMode.value)return this._numberValues[keyIndex];
return this._stringValues[keyIndex]};Object.defineProperties(weavejs.data.column.CSVColumn.prototype,{csvData:{set:function(value){this.data.setSessionState(weavejs.WeaveAPI.CSVParser.parseCSV(value))}},keys:{get:function(){if(this.dirty)this.validate();return this._keys}}});weavejs.data.column.CSVColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVColumn',qName:'weavejs.data.column.CSVColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.data.EquationColumnLib');weavejs.data.EquationColumnLib=function(){};weavejs.data.EquationColumnLib.debug=false;weavejs.data.EquationColumnLib.currentRecordKey=null;weavejs.data.EquationColumnLib.getKey=function(column){column=typeof column!=='undefined'?column:null;if(column)return column.getValueFromKey(weavejs.data.EquationColumnLib.currentRecordKey,weavejs.api.data.IQualifiedKey);return weavejs.data.EquationColumnLib.currentRecordKey};
weavejs.data.EquationColumnLib.getValue=function(object,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var key=weavejs.data.EquationColumnLib.currentRecordKey;try{if(org.apache.flex.utils.Language.is(dataType,String))dataType=Weave.getDefinition(dataType);var value=null;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null){if(dataType==null){var dataTypeMetadata=column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);dataType=
weavejs.api.data.DataType.getClass(dataTypeMetadata);if(dataType==String&&dataTypeMetadata!=weavejs.api.data.DataType.STRING)dataType=weavejs.api.data.IQualifiedKey}value=column.getValueFromKey(key,weavejs.util.JS.asClass(dataType))}else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableVariable)){value=org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState();if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType)}else if(dataType!=
null)value=weavejs.data.EquationColumnLib.cast(value,dataType);if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getValue',object,key.localName,String(value));return value}finally{weavejs.data.EquationColumnLib.currentRecordKey=key}};
weavejs.data.EquationColumnLib.getValueFromKey=function(column,key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{weavejs.data.EquationColumnLib.currentRecordKey=key;var value=weavejs.data.EquationColumnLib.getValue(column,dataType);if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getValueFromKey',column,key.localName,String(value));return value}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}};
weavejs.data.EquationColumnLib.getValueFromFilterColumn=function(keyColumn,filter,data,filterValue,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var key=weavejs.data.EquationColumnLib.getKey();var foreignKeyType=keyColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);var ignoreKeyType=!foreignKeyType||foreignKeyType==weavejs.api.data.DataType.STRING;var cubekeys=weavejs.data.EquationColumnLib.getAssociatedKeys(keyColumn,key,ignoreKeyType);if(cubekeys&&cubekeys.length==1){var foreachiter0_target=
cubekeys;for(var foreachiter0 in foreachiter0_target){var cubekey=foreachiter0_target[foreachiter0];if(filter.getValueFromKey(cubekey,String)==filterValue){if(dataType===weavejs.api.data.IQualifiedKey)return cubekey;var val=weavejs.data.EquationColumnLib.getValueFromKey(data,cubekey,dataType);return val}}}return weavejs.data.EquationColumnLib.cast(undefined,dataType)};weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter=new weavejs.util.JS.WeakMap;
weavejs.data.EquationColumnLib.map_reverseKeyLookupCache=new weavejs.util.JS.WeakMap;
weavejs.data.EquationColumnLib.getAssociatedKeys=function(column,keyValue,ignoreKeyType){ignoreKeyType=typeof ignoreKeyType!=='undefined'?ignoreKeyType:false;var map_lookup=weavejs.data.EquationColumnLib.map_reverseKeyLookupCache.get(column);if(map_lookup==null||column.triggerCounter!=weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter.get(column)){weavejs.data.EquationColumnLib.map_reverseKeyLookupTriggerCounter.set(column,column.triggerCounter);weavejs.data.EquationColumnLib.map_reverseKeyLookupCache.set(column,
map_lookup=new weavejs.util.JS.Map);var foreachiter1_target=column.keys;for(var foreachiter1 in foreachiter1_target){var recordKey=foreachiter1_target[foreachiter1];var value=org.apache.flex.utils.Language.as(column.getValueFromKey(recordKey,weavejs.api.data.IQualifiedKey),weavejs.api.data.IQualifiedKey);if(value==null)continue;if(!map_lookup.has(value))map_lookup.set(value,[]);org.apache.flex.utils.Language.as(map_lookup.get(value),Array).push(recordKey);if(!map_lookup.has(value.localName))map_lookup.set(value.localName,
[]);org.apache.flex.utils.Language.as(map_lookup.get[value.localName],Array).push(recordKey)}}return org.apache.flex.utils.Language.as(map_lookup[ignoreKeyType?keyValue.localName:keyValue],Array)};
weavejs.data.EquationColumnLib.getNumber=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn).getValueFromKey(key,Number);else if(org.apache.flex.utils.Language.is(object,
weavejs.api.core.ILinkableVariable))result=weavejs.util.StandardLib.asNumber(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getNumber',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getString=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result='';var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn).getValueFromKey(key,String);else if(org.apache.flex.utils.Language.is(object,
weavejs.api.core.ILinkableVariable))result=weavejs.util.StandardLib.asString(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getString',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getBoolean=function(object,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=false;var column=org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn);if(column!=null)result=weavejs.util.StandardLib.asBoolean(column.getValueFromKey(key,Number));else if(org.apache.flex.utils.Language.is(object,weavejs.api.core.ILinkableVariable))result=
weavejs.util.StandardLib.asBoolean(org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableVariable).getSessionState());else throw new Error('first parameter must be either an IAttributeColumn or an ILinkableVariable');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getBoolean',column,key.localName,String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.getNorm=function(column,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=NaN;if(column!=null)result=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getNorm(key);else throw new Error('first parameter must be an IAttributeColumn');if(weavejs.data.EquationColumnLib.debug)weavejs.util.JS.log('getNorm',column,key.localName,
String(result))}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return result};
weavejs.data.EquationColumnLib.findKeySet=function(keySets,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var keySet=null;for(var i=0;i<keySets.length;i++){keySet=org.apache.flex.utils.Language.as(keySets[i],weavejs.api.data.IKeySet);if(keySet&&keySet.containsKey(key))break;else keySet=null}}finally{weavejs.data.EquationColumnLib.currentRecordKey=previousKey}return keySet};
weavejs.data.EquationColumnLib.getSum=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getSum()};weavejs.data.EquationColumnLib.getMean=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMean()};weavejs.data.EquationColumnLib.getVariance=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getVariance()};weavejs.data.EquationColumnLib.getStandardDeviation=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getStandardDeviation()};
weavejs.data.EquationColumnLib.getMin=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMin()};weavejs.data.EquationColumnLib.getMax=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getMax()};weavejs.data.EquationColumnLib.getCount=function(column){return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getCount()};
weavejs.data.EquationColumnLib.getRunningTotal=function(column,key){key=typeof key!=='undefined'?key:null;var previousKey=weavejs.data.EquationColumnLib.currentRecordKey;try{if(key==null)key=weavejs.data.EquationColumnLib.currentRecordKey;var result=NaN;if(column!=null){var runningTotals=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.StatisticsCache,weavejs.data.StatisticsCache).getRunningTotals(column);if(runningTotals!=null)result=runningTotals.get(key)}}finally{weavejs.data.EquationColumnLib.currentRecordKey=
previousKey}return result};
weavejs.data.EquationColumnLib.cast=function(value,newType){if(newType==null)return value;if(org.apache.flex.utils.Language.is(newType,String))newType=Weave.getDefinition(newType);if(newType==Number)value=weavejs.util.StandardLib.asNumber(value);else if(newType==String)value=weavejs.util.StandardLib.asString(value);else if(newType==Boolean)value=weavejs.util.StandardLib.asBoolean(value);else if(newType==Array)if(value!=null&&!org.apache.flex.utils.Language.is(value,Array))value=[value];return org.apache.flex.utils.Language.as(value,
newType)};weavejs.data.EquationColumnLib.QKey=weavejs.api.data.IQualifiedKey;weavejs.data.EquationColumnLib.prototype.FLEXJS_CLASS_INFO={names:[{name:'EquationColumnLib',qName:'weavejs.data.EquationColumnLib'}]};goog.provide('weavejs.data.column.EquationColumn');goog.require('weavejs.data.EquationColumnLib');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.EquationColumn=function(){this._cachedMetadata={};this.d2d_key_dataType_value=new weavejs.util.Dictionary2D;this.equation=Weave.linkableChild(this,weavejs.core.LinkableString);this.variables=Weave.linkableChild(this,weavejs.core.LinkableHashMap);this.metadata=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyMetadata,this,'verifyMetadata')));this.filterByKeyType=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false));
weavejs.data.column.EquationColumn.base(this,'constructor');this.setMetadataProperty(weavejs.api.data.ColumnMetadata.TITLE,'Untitled Equation');this.variables.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handleVariableListChange,this,'handleVariableListChange'))};goog.inherits(weavejs.data.column.EquationColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.EquationColumn.debug=false;
weavejs.data.column.EquationColumn.prototype.handleVariableListChange=function(){var newColumn=org.apache.flex.utils.Language.as(this.variables.childListCallbacks.lastObjectAdded,weavejs.api.data.IAttributeColumn);if(newColumn)Weave.getCallbacks(weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(newColumn)).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'))};weavejs.data.column.EquationColumn.prototype._allKeys=null;weavejs.data.column.EquationColumn.prototype.map_allKeys;
weavejs.data.column.EquationColumn.prototype._allKeysTriggerCount=0;weavejs.data.column.EquationColumn.prototype._cachedMetadata;weavejs.data.column.EquationColumn.prototype._cachedMetadataTriggerCount=0;weavejs.data.column.EquationColumn.prototype._defaultDataType=null;weavejs.data.column.EquationColumn.prototype.compiledEquation=null;weavejs.data.column.EquationColumn.prototype._lastError;weavejs.data.column.EquationColumn.prototype.d2d_key_dataType_value;
weavejs.data.column.EquationColumn.prototype._cacheTriggerCount=0;weavejs.data.column.EquationColumn.UNDEFINED={};weavejs.data.column.EquationColumn.prototype.equation;weavejs.data.column.EquationColumn.prototype.variables;weavejs.data.column.EquationColumn.prototype.metadata;weavejs.data.column.EquationColumn.prototype.verifyMetadata=function(value){return typeof value=='object'};weavejs.data.column.EquationColumn.prototype.filterByKeyType;
weavejs.data.column.EquationColumn.prototype.getMetadata=function(propertyName){if(this._cachedMetadataTriggerCount!=this.triggerCounter){this._cachedMetadata={};this._cachedMetadataTriggerCount=this.triggerCounter}if(this._cachedMetadata.hasOwnProperty(propertyName))return org.apache.flex.utils.Language.as(this._cachedMetadata[propertyName],String);this._cachedMetadata[propertyName]=undefined;var value=this.metadata.state?org.apache.flex.utils.Language.as(this.metadata.state[propertyName],String):
null;if(value!=null){if(value.charAt(0)=='{'&&value.charAt(value.length-1)=='}')try{var func=weavejs.util.JS.compile(value);value=func.apply(this,arguments)}catch(e){this.errorHandler(e)}}else if(propertyName==weavejs.api.data.ColumnMetadata.KEY_TYPE){var cols=this.variables.getObjects(weavejs.api.data.IAttributeColumn);if(cols.length)value=org.apache.flex.utils.Language.as(cols[0],weavejs.api.data.IAttributeColumn).getMetadata(propertyName)}this._cachedMetadata[propertyName]=value;return value};
weavejs.data.column.EquationColumn.prototype.errorHandler=function(e){var str=org.apache.flex.utils.Language.is(e,Error)?e.message:String(e);if(this._lastError!=str){this._lastError=str;weavejs.util.JS.error(e)}};weavejs.data.column.EquationColumn.prototype.setMetadata=function(value){this.metadata.setSessionState(value)};weavejs.data.column.EquationColumn.prototype.getMetadataPropertyNames=function(){return weavejs.util.JS.objectKeys(this.metadata.getSessionState())};
weavejs.data.column.EquationColumn.prototype.setMetadataProperty=function(propertyName,value){value=weavejs.util.StandardLib.trim(value);var _metadata=this.metadata.state||{};_metadata[propertyName]=value;this.metadata.state=_metadata};weavejs.data.column.EquationColumn.prototype.requestVariable=function(name,classDef,lockObject){lockObject=typeof lockObject!=='undefined'?lockObject:false;return this.variables.requestObject(name,classDef,lockObject)};
weavejs.data.column.EquationColumn.prototype.containsKey=function(key){return this.keys&&this.map_allKeys.has(key)};
weavejs.data.column.EquationColumn.prototype.validateEquation=function(){var self=this;var __localFn0__=function(_){_=Array.prototype.slice.call(arguments,0);return undefined};if(this._cacheTriggerCount==this.triggerCounter)return this._compileError;this._cacheTriggerCount=this.triggerCounter;this._compileError=null;try{this.compiledEquation=weavejs.util.JS.compile(this.equation.value,['key','dataType'].concat(this.variables.getNames()));this.d2d_key_dataType_value=new weavejs.util.Dictionary2D}catch(e){this.compiledEquation=
__localFn0__;this._compileError=e.message}return this._compileError};weavejs.data.column.EquationColumn.prototype._compileError;
weavejs.data.column.EquationColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._cacheTriggerCount!=this.triggerCounter)this.validateEquation();if(dataType==null)dataType=Array;var value=this.d2d_key_dataType_value.get(key,dataType);if(value===undefined){this.d2d_key_dataType_value.set(key,dataType,weavejs.data.column.EquationColumn.UNDEFINED);var prevKey=weavejs.data.EquationColumnLib.currentRecordKey;weavejs.data.EquationColumnLib.currentRecordKey=
key;try{var args=this.variables.getObjects();args.unshift(key,dataType);value=this.compiledEquation.apply(this,args);if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log(this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),key.keyType,key.localName,dataType,value)}catch(e){if(this._lastError!=e.message){this._lastError=e.message;weavejs.util.JS.error(e)}}finally{weavejs.data.EquationColumnLib.currentRecordKey=prevKey}if(value!==undefined)this.d2d_key_dataType_value.set(key,dataType,
value)}else if(value===weavejs.data.column.EquationColumn.UNDEFINED)value=undefined;else if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log('\x3e',this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),key.keyType,key.localName,dataType,value);if(dataType==weavejs.api.data.IQualifiedKey){if(!org.apache.flex.utils.Language.is(value,weavejs.api.data.IQualifiedKey)){if(!org.apache.flex.utils.Language.is(value,String))value=weavejs.util.StandardLib.asString(value);value=weavejs.WeaveAPI.QKeyManager.getQKey(this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE),
value)}}else if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType);return value};weavejs.data.column.EquationColumn.prototype._numberToStringFunction=null;
weavejs.data.column.EquationColumn.prototype.deriveStringFromNumber=function(number){if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.deriveStringFromNumber,this,'deriveStringFromNumber'),this.metadata))try{this._numberToStringFunction=weavejs.util.StandardLib.formatNumber;var n2s=this.getMetadata(weavejs.api.data.ColumnMetadata.STRING);if(n2s)this._numberToStringFunction=weavejs.util.JS.compile(n2s,['number'])}catch(e){this.errorHandler(e)}if(this._numberToStringFunction!=null)try{var string=
this._numberToStringFunction.apply(this,arguments);if(weavejs.data.column.EquationColumn.debug)weavejs.util.JS.log(this,this.getMetadata(weavejs.api.data.ColumnMetadata.TITLE),'deriveStringFromNumber',number,string);return string}catch(e){this.errorHandler(e)}return''};
Object.defineProperties(weavejs.data.column.EquationColumn.prototype,{keys:{get:function(){var self=this;var __localFn0__=function(key,i,a){return key.keyType==keyType};if(this._allKeysTriggerCount!=this.variables.triggerCounter){this._allKeys=null;this.map_allKeys=new weavejs.util.JS.WeakMap;this._allKeysTriggerCount=this.variables.triggerCounter;var variableColumns=this.variables.getObjects(weavejs.api.data.IKeySet);this._allKeys=weavejs.util.ArrayUtils.union.apply(weavejs.util.ArrayUtils,weavejs.util.ArrayUtils.pluck(variableColumns,
'keys'));if(this.filterByKeyType.value&&this._allKeys.length>0){var keyType=this.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);this._allKeys=this._allKeys.filter(__localFn0__)}var foreachiter0_target=this._allKeys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];this.map_allKeys.set(key,true)}}return this._allKeys||[]}}});
weavejs.data.column.EquationColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'EquationColumn',qName:'weavejs.data.column.EquationColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.provide('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.util.WeaveTreeItem');goog.require('weavejs.api.data.IWeaveTreeNode');
weavejs.data.hierarchy.WeaveTreeDescriptorNode=function(params){weavejs.data.hierarchy.WeaveTreeDescriptorNode.base(this,'constructor');this.childItemClass=weavejs.data.hierarchy.WeaveTreeDescriptorNode;if(typeof params==='object')for(var key in params)if(org.apache.flex.utils.Language.is(this[key],Function)&&weavejs.util.JS.hasProperty(this,'_'+key))this['_'+key]=params[key];else this[key]=params[key]};goog.inherits(weavejs.data.hierarchy.WeaveTreeDescriptorNode,weavejs.util.WeaveTreeItem);
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.__hasChildBranches=null;weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.hierarchy.WeaveTreeDescriptorNode);if(!that)return false;if(Object(this).constructor!=Object(that).constructor)return false;if(this.dependency!=that.dependency)return false;if(weavejs.util.StandardLib.compare(this.data,that.data)!=0)return false;return true};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.getLabel=function(){return this.label};weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.isBranch=function(){return this._children!=null};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.hasChildBranches=function(){var id='hasChildBranches';if(this.isCached(id))return this.cache(id);if(this.__hasChildBranches!=null)return this.cache(id,this.getBoolean(this.__hasChildBranches,id));var children=this.getChildren();var foreachiter0_target=children;for(var foreachiter0 in foreachiter0_target){var child=foreachiter0_target[foreachiter0];if(child.isBranch())return this.cache(id,true)}return this.cache(id,false)};
weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.getChildren=function(){return this.children};Object.defineProperties(weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype,{_hasChildBranches:{set:function(value){this._counter['hasChildBranches']=undefined;this.__hasChildBranches=value}}});weavejs.data.hierarchy.WeaveTreeDescriptorNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTreeDescriptorNode',qName:'weavejs.data.hierarchy.WeaveTreeDescriptorNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode]};goog.provide('weavejs.data.hierarchy.ColumnTreeNode');goog.require('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.api.data.IColumnReference');goog.require('weavejs.api.data.IWeaveTreeNodeWithPathFinding');
weavejs.data.hierarchy.ColumnTreeNode=function(params){weavejs.data.hierarchy.ColumnTreeNode.base(this,'constructor',params);this.childItemClass=weavejs.data.hierarchy.ColumnTreeNode;if(!this.dataSource)throw new Error('ColumnTreeNode constructor: "dataSource" parameter is required');if(!this.dependency)this.dependency=this.dataSource.hierarchyRefresh};goog.inherits(weavejs.data.hierarchy.ColumnTreeNode,weavejs.data.hierarchy.WeaveTreeDescriptorNode);
weavejs.data.hierarchy.ColumnTreeNode.prototype.dataSource=null;weavejs.data.hierarchy.ColumnTreeNode.prototype.idFields=null;
weavejs.data.hierarchy.ColumnTreeNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.hierarchy.ColumnTreeNode);if(!that)return false;if(Object(this).constructor!=Object(that).constructor)return false;if(this.dependency!=that.dependency)return false;if(this.dataSource!=that.dataSource)return false;if(weavejs.util.StandardLib.compare(this.idFields,that.idFields)!=0)return false;if(this.idFields){var foreachiter0_target=this.idFields;for(var foreachiter0 in foreachiter0_target){var field=
foreachiter0_target[foreachiter0];if(weavejs.util.StandardLib.compare(this.data[field],that.data[field])!=0)return false}}else if(weavejs.util.StandardLib.compare(this.data,that.data)!=0)return false;return true};weavejs.data.hierarchy.ColumnTreeNode.prototype.getDataSource=function(){return this.dataSource};weavejs.data.hierarchy.ColumnTreeNode.prototype.getColumnMetadata=function(){if(this.isBranch())return null;return this.data};
weavejs.data.hierarchy.ColumnTreeNode.prototype.findPathToNode=function(descendant){if(this.equals(descendant))return[this];var _descendant=org.apache.flex.utils.Language.as(descendant,weavejs.data.hierarchy.ColumnTreeNode);if(_descendant){if(weavejs.util.StandardLib.compare(this.dataSource,_descendant.dataSource)!=0)return null;if(this.idFields&&this.data&&_descendant.data)var foreachiter1_target=this.idFields;for(var foreachiter1 in foreachiter1_target){var field=foreachiter1_target[foreachiter1];
if(this.data[field]!=_descendant.data[field])return null}}var childs=this.getChildren();var foreachiter2_target=childs;for(var foreachiter2 in foreachiter2_target){var child=foreachiter2_target[foreachiter2];var path=weavejs.data.hierarchy.HierarchyUtils.findPathToNode(child,descendant);if(path){path.unshift(this);return path}}return null};
Object.defineProperties(weavejs.data.hierarchy.ColumnTreeNode.prototype,{label:{get:function(){var str=org.apache.flex.utils.Language.superGetter(weavejs.data.hierarchy.ColumnTreeNode,this,'label');if(!str&&this.data)str=typeof this.data=='object'&&this.data.hasOwnProperty(weavejs.api.data.ColumnMetadata.TITLE)?this.data[weavejs.api.data.ColumnMetadata.TITLE]:this.data.toString();return str},set:function(value){org.apache.flex.utils.Language.superSetter(weavejs.data.hierarchy.ColumnTreeNode,this,
'label',value)}}});weavejs.data.hierarchy.ColumnTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnTreeNode',qName:'weavejs.data.hierarchy.ColumnTreeNode'}],interfaces:[weavejs.api.data.IWeaveTreeNodeWithPathFinding,weavejs.api.data.IColumnReference]};goog.provide('weavejs.data.hierarchy.GlobalColumnDataSource');goog.require('weavejs.data.column.CSVColumn');goog.require('weavejs.data.column.EquationColumn');goog.require('weavejs.data.hierarchy.ColumnTreeNode');goog.require('weavejs.api.data.IDataSource');
weavejs.data.hierarchy.GlobalColumnDataSource=function(root){var self=this;var __localFn0__=function(){return root.getObjects(weavejs.data.column.CSVColumn).length?Weave.lang('Generated columns'):Weave.lang('Equations')};var __localFn1__=function(){var __localFn0__=function(column,_){_=Array.prototype.slice.call(arguments,1);Weave.linkableChild(source,column);return self.createColumnNode(root.getName(column))};return self.getGlobalColumns().map(__localFn0__)};this._root=root;Weave.linkableChild(this,
root.childListCallbacks);var source=this;this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:source,label:__localFn0__,hasChildBranches:false,children:__localFn1__})};weavejs.data.hierarchy.GlobalColumnDataSource.getInstance=function(root){var instance=weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance.get(root);if(!instance)weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance.set(root,instance=new weavejs.data.hierarchy.GlobalColumnDataSource(root));return instance};
weavejs.data.hierarchy.GlobalColumnDataSource.map_root_instance=new weavejs.util.JS.Map;weavejs.data.hierarchy.GlobalColumnDataSource.NAME='name';weavejs.data.hierarchy.GlobalColumnDataSource.prototype._root;weavejs.data.hierarchy.GlobalColumnDataSource.prototype._rootNode;
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getGlobalColumns=function(){var csvColumns=this._root.getObjects(weavejs.data.column.CSVColumn);var equationColumns=this._root.getObjects(weavejs.data.column.EquationColumn);return equationColumns.concat(csvColumns)};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.createColumnNode=function(name){var self=this;var __localFn0__=function(){return column.getMetadata(weavejs.api.data.ColumnMetadata.TITLE)};var column=this.getAttributeColumn(name);if(!column)return null;var meta={};meta[weavejs.data.hierarchy.GlobalColumnDataSource.NAME]=name;return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,dependency:column,label:__localFn0__,data:meta,idFields:[weavejs.data.hierarchy.GlobalColumnDataSource.NAME]})};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getHierarchyRoot=function(){return this._rootNode};weavejs.data.hierarchy.GlobalColumnDataSource.prototype.findHierarchyNode=function(metadata){var column=this.getAttributeColumn(metadata);if(!column)return null;var name=this._root.getName(column);var node=this.createColumnNode(name);var path=this._rootNode.findPathToNode(node);if(path)return path[path.length-1];return null};
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.getAttributeColumn=function(metadata){if(!metadata)return null;var name;if(typeof metadata=='object')name=metadata[weavejs.data.hierarchy.GlobalColumnDataSource.NAME];else name=org.apache.flex.utils.Language.as(metadata,String);return org.apache.flex.utils.Language.as(this._root.getObject(name),weavejs.api.data.IAttributeColumn)};Object.defineProperties(weavejs.data.hierarchy.GlobalColumnDataSource.prototype,{hierarchyRefresh:{get:function(){return Weave.getCallbacks(this)}}});
weavejs.data.hierarchy.GlobalColumnDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'GlobalColumnDataSource',qName:'weavejs.data.hierarchy.GlobalColumnDataSource'}],interfaces:[weavejs.api.data.IDataSource]};goog.provide('weavejs.data.column.ReferencedColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.hierarchy.GlobalColumnDataSource');goog.require('weavejs.api.data.IColumnWrapper');
weavejs.data.column.ReferencedColumn=function(){this.dataSourceName=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.updateDataSource,this,'updateDataSource'));this.metadata=Weave.linkableChild(this,weavejs.core.LinkableVariable);this._columnWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher);weavejs.data.column.ReferencedColumn.base(this,'constructor')};goog.inherits(weavejs.data.column.ReferencedColumn,weavejs.core.CallbackCollection);
weavejs.data.column.ReferencedColumn.prototype._initialized=false;weavejs.data.column.ReferencedColumn.prototype._dataSource;
weavejs.data.column.ReferencedColumn.prototype.updateDataSource=function(){var root=Weave.getRoot(this);if(!root)return;if(!this._initialized){root.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.updateDataSource,this,'updateDataSource'));this._initialized=true}var ds=org.apache.flex.utils.Language.as(root.getObject(this.dataSourceName.value),weavejs.api.data.IDataSource);if(!ds)ds=weavejs.data.hierarchy.GlobalColumnDataSource.getInstance(root);if(this._dataSource!=
ds){this._dataSource=ds;this.triggerCallbacks()}};weavejs.data.column.ReferencedColumn.prototype.dataSourceName;weavejs.data.column.ReferencedColumn.prototype.metadata;weavejs.data.column.ReferencedColumn.prototype.getDataSource=function(){return this._dataSource};weavejs.data.column.ReferencedColumn.prototype.setColumnReference=function(dataSource,metadata){this.delayCallbacks();this.dataSourceName.value=Weave.getRoot(this).getName(dataSource);this.metadata.setSessionState(metadata);this.resumeCallbacks()};
weavejs.data.column.ReferencedColumn.prototype._prevTriggerCounter=0;weavejs.data.column.ReferencedColumn.prototype._internalColumn=null;weavejs.data.column.ReferencedColumn.prototype._columnWatcher;
weavejs.data.column.ReferencedColumn.prototype.getInternalColumn=function(){if(this._prevTriggerCounter!=this.triggerCounter){if(Weave.wasDisposed(this._dataSource))this._dataSource=null;this._columnWatcher.target=this._internalColumn=weavejs.WeaveAPI.AttributeColumnCache.getColumn(this._dataSource,this.metadata.state);this._prevTriggerCounter=this.triggerCounter}return this._internalColumn};
weavejs.data.column.ReferencedColumn.prototype.getMetadata=function(attributeName){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getMetadata(attributeName):null};weavejs.data.column.ReferencedColumn.prototype.getMetadataPropertyNames=function(){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getMetadataPropertyNames():[]};
weavejs.data.column.ReferencedColumn.prototype.containsKey=function(key){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn&&this._internalColumn.containsKey(key)};
weavejs.data.column.ReferencedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.getValueFromKey(key,dataType):undefined};
Object.defineProperties(weavejs.data.column.ReferencedColumn.prototype,{keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter)this.getInternalColumn();return this._internalColumn?this._internalColumn.keys:[]}}});weavejs.data.column.ReferencedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ReferencedColumn',qName:'weavejs.data.column.ReferencedColumn'}],interfaces:[weavejs.api.data.IColumnWrapper]};goog.provide('weavejs.data.column.SecondaryKeyNumColumn');goog.require('weavejs.data.column.AbstractAttributeColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.SecondaryKeyNumColumn=function(metadata){metadata=typeof metadata!=='undefined'?metadata:null;this.d2d_qkeyA_keyB_number=new weavejs.util.Dictionary2D;this.map_qkeyAB_number=new weavejs.util.JS.Map;this._uniqueStrings=[];this._uniqueSecondaryKeys=new Array;this._uniqueKeysA=[];this._uniqueKeysAB=[];this.map_qkeyAB_qkeyData=new weavejs.util.JS.WeakMap;weavejs.data.column.SecondaryKeyNumColumn.base(this,'constructor',metadata);weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.addImmediateCallback(this,
org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'));weavejs.data.column.SecondaryKeyNumColumn.useGlobalMinMaxValues.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'))};goog.inherits(weavejs.data.column.SecondaryKeyNumColumn,weavejs.data.column.AbstractAttributeColumn);weavejs.data.column.SecondaryKeyNumColumn.prototype.baseTitle;
weavejs.data.column.SecondaryKeyNumColumn.prototype.getMetadata=function(propertyName){if(weavejs.data.column.SecondaryKeyNumColumn.useGlobalMinMaxValues.value){if(propertyName==weavejs.api.data.ColumnMetadata.MIN)return String(this._minNumber);if(propertyName==weavejs.api.data.ColumnMetadata.MAX)return String(this._maxNumber)}var value=weavejs.data.column.SecondaryKeyNumColumn.base(this,'getMetadata',propertyName);switch(propertyName){case weavejs.api.data.ColumnMetadata.TITLE:value=this.baseTitle||
value;if(value!=null&&weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value&&!weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return value+' ('+weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value+')';break;case weavejs.api.data.ColumnMetadata.KEY_TYPE:if(weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value==null)return value+this.TYPE_SUFFIX;break;case weavejs.api.data.ColumnMetadata.DATA_TYPE:return value||(this._dataType==Number?weavejs.api.data.DataType.NUMBER:
weavejs.api.data.DataType.STRING)}return value};weavejs.data.column.SecondaryKeyNumColumn.prototype.TYPE_SUFFIX=',Year';weavejs.data.column.SecondaryKeyNumColumn.prototype._minNumber=NaN;weavejs.data.column.SecondaryKeyNumColumn.prototype._maxNumber=NaN;weavejs.data.column.SecondaryKeyNumColumn.prototype.d2d_qkeyA_keyB_number;weavejs.data.column.SecondaryKeyNumColumn.prototype.map_qkeyAB_number;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueStrings;weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter;
weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueSecondaryKeys;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueKeysA;weavejs.data.column.SecondaryKeyNumColumn.prototype._uniqueKeysAB;weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=false;
weavejs.data.column.SecondaryKeyNumColumn.prototype.containsKey=function(key){var skfv=weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value;if(skfv==null||weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return this.map_qkeyAB_number[key]!==undefined;return this.d2d_qkeyA_keyB_number.get(key,skfv)!==undefined};
weavejs.data.column.SecondaryKeyNumColumn.prototype.updateRecords=function(qkeysA,keysB,data){if(this._uniqueStrings.length>0)weavejs.util.JS.error('Replacing existing records is not supported');var index,qkeyA,keyB,qkeyAB;var _key;var dataObject=null;if(qkeysA.length!=data.length||keysB.length!=data.length){weavejs.util.JS.error('Array lengths differ');return}this.d2d_qkeyA_keyB_number=new weavejs.util.Dictionary2D;var dataType=weavejs.data.column.SecondaryKeyNumColumn.base(this,'getMetadata',weavejs.api.data.ColumnMetadata.DATA_TYPE);
if(org.apache.flex.utils.Language.is(data[0],String)||dataType&&dataType!=weavejs.api.data.DataType.NUMBER){if(!dataType)dataType=weavejs.api.data.DataType.STRING;for(var i=0;i<data.length;i++)if(this._uniqueStrings.indexOf(data[i])<0)this._uniqueStrings.push(data[i]);weavejs.util.AsyncSort.sortImmediately(this._uniqueStrings);this._minNumber=0;this._maxNumber=this._uniqueStrings.length-1}else{dataType=weavejs.api.data.DataType.NUMBER;this._minNumber=NaN;this._maxNumber=NaN}this._metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=
dataType;this._dataType=dataType==weavejs.api.data.DataType.NUMBER?Number:String;for(index=0;index<qkeysA.length;index++){qkeyA=org.apache.flex.utils.Language.as(qkeysA[index],weavejs.api.data.IQualifiedKey);keyB=String(keysB[index]);dataObject=data[index];qkeyAB=weavejs.WeaveAPI.QKeyManager.getQKey(qkeyA.keyType+this.TYPE_SUFFIX,qkeyA.localName+','+keyB);if(this._uniqueSecondaryKeys.indexOf(keyB)<0)this._uniqueSecondaryKeys.push(keyB);if(org.apache.flex.utils.Language.is(dataObject,String)){var iString=
this._uniqueStrings.indexOf(dataObject);if(iString<0){iString=this._uniqueStrings.length;this._uniqueStrings[iString]=dataObject}this.d2d_qkeyA_keyB_number.set(qkeyA,keyB,iString);this.map_qkeyAB_number.set(qkeyAB,iString)}else{this.d2d_qkeyA_keyB_number.set(qkeyA,keyB,dataObject);this.map_qkeyAB_number.set(qkeyAB,dataObject);this._minNumber=isNaN(this._minNumber)?dataObject:Math.min(this._minNumber,dataObject);this._maxNumber=isNaN(this._maxNumber)?dataObject:Math.max(this._maxNumber,dataObject)}}weavejs.util.AsyncSort.sortImmediately(this._uniqueSecondaryKeys);
this._uniqueKeysA=this.d2d_qkeyA_keyB_number.primaryKeys();this._uniqueKeysAB=weavejs.util.JS.mapKeys(this.map_qkeyAB_number);this.triggerCallbacks()};weavejs.data.column.SecondaryKeyNumColumn.prototype.maxDerivedSignificantDigits=10;
weavejs.data.column.SecondaryKeyNumColumn.prototype.deriveStringFromNumber=function(number){if(org.apache.flex.utils.Language._int(number)==number&&this._uniqueStrings.length>0&&number<this._uniqueStrings.length)return this._uniqueStrings[number];return weavejs.util.StandardLib.formatNumber(weavejs.util.StandardLib.roundSignificant(number,this.maxDerivedSignificantDigits))};weavejs.data.column.SecondaryKeyNumColumn.prototype.map_qkeyAB_qkeyData;weavejs.data.column.SecondaryKeyNumColumn.prototype._dataType;
weavejs.data.column.SecondaryKeyNumColumn.prototype.getValueFromKey=function(qkey,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=this._dataType;var value=NaN;if(this.map_qkeyAB_number.has(qkey))value=this.map_qkeyAB_number.get(qkey);else value=this.d2d_qkeyA_keyB_number.get(qkey,weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value);if(isNaN(value))return weavejs.data.EquationColumnLib.cast(undefined,dataType);if(dataType==weavejs.api.data.IQualifiedKey){if(!this.map_qkeyAB_qkeyData.has(qkey)){var type=
this.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);if(type==weavejs.api.data.DataType.NUMBER)return null;if(type=='')type=weavejs.api.data.DataType.STRING;this.map_qkeyAB_qkeyData.set(qkey,weavejs.WeaveAPI.QKeyManager.getQKey(type,this.deriveStringFromNumber(value)))}return this.map_qkeyAB_qkeyData.get(qkey)}if(dataType==String)return this.deriveStringFromNumber(value);return value};
Object.defineProperties(weavejs.data.column.SecondaryKeyNumColumn.prototype,{secondaryKeys:{get:function(){return this._uniqueSecondaryKeys}},keys:{get:function(){if(weavejs.data.column.SecondaryKeyNumColumn.secondaryKeyFilter.value==null||weavejs.data.column.SecondaryKeyNumColumn.allKeysHack)return this._uniqueKeysAB;return this._uniqueKeysA}}});
Object.defineProperties(weavejs.data.column.SecondaryKeyNumColumn,{secondaryKeyFilter:{get:function(){if(!weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter)weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter=new weavejs.core.LinkableString;return weavejs.data.column.SecondaryKeyNumColumn._secondaryKeyFilter}},useGlobalMinMaxValues:{get:function(){if(!weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues)weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues=
new weavejs.core.LinkableBoolean(true);return weavejs.data.column.SecondaryKeyNumColumn._useGlobalMinMaxValues}}});weavejs.data.column.SecondaryKeyNumColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SecondaryKeyNumColumn',qName:'weavejs.data.column.SecondaryKeyNumColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.provide('weavejs.data.ColumnUtils');goog.require('weavejs.data.column.ReferencedColumn');goog.require('weavejs.data.column.SecondaryKeyNumColumn');weavejs.data.ColumnUtils=function(){};weavejs.data.ColumnUtils.debugKeyTypes=false;
weavejs.data.ColumnUtils.getTitle=function(column){var title=column.getMetadata(weavejs.api.data.ColumnMetadata.TITLE)||Weave.lang('(Data unavailable)');if(weavejs.data.ColumnUtils.debugKeyTypes){var keyType=column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);if(keyType)title+=' (Key type: '+keyType+')';else title+=' (No key type)'}return title};
weavejs.data.ColumnUtils.getColumnListLabel=function(column){var title=weavejs.data.ColumnUtils.getTitle(column);var keyType=weavejs.data.ColumnUtils.getKeyType(column);var dataType=weavejs.data.ColumnUtils.getDataType(column);var projection=column.getMetadata(weavejs.api.data.ColumnMetadata.PROJECTION);var dateFormat=column.getMetadata(weavejs.api.data.ColumnMetadata.DATE_FORMAT);if(dataType==weavejs.api.data.DataType.DATE&&dateFormat)dataType=dataType+'; '+dateFormat;if(dataType==weavejs.api.data.DataType.GEOMETRY&&
projection)dataType=dataType+'; '+projection;if(dataType&&keyType)return weavejs.util.StandardLib.substitute('{0} ({1} -\x3e {2})',title,keyType,dataType);if(keyType)return weavejs.util.StandardLib.substitute('{0} (Key Type: {1})',title,keyType);if(dataType)return weavejs.util.StandardLib.substitute('{0} (Data Type: {1})',title,dataType);return title};
weavejs.data.ColumnUtils.getDataSources=function(column){var sources=[];var name;var nameMap={};var cols;if(org.apache.flex.utils.Language.is(column,weavejs.data.column.ReferencedColumn))cols=[column];else cols=Weave.getDescendants(column,weavejs.data.column.ReferencedColumn);for(var i=0;i<cols.length;i++)sources.push(org.apache.flex.utils.Language.as(cols[i],weavejs.data.column.ReferencedColumn).getDataSource());return weavejs.util.ArrayUtils.union(sources)};
weavejs.data.ColumnUtils.getKeyType=function(column){var keyType=column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);if(keyType==null){var keys=column.keys;if(keys.length>0)keyType=org.apache.flex.utils.Language.as(keys[0],weavejs.api.data.IQualifiedKey).keyType}return keyType};weavejs.data.ColumnUtils.getDataType=function(column){return column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)};
weavejs.data.ColumnUtils.deriveStringFromNumber=function(column,number){var pc=org.apache.flex.utils.Language.as(weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column),weavejs.api.data.IPrimitiveColumn);if(pc)return pc.deriveStringFromNumber(number);return null};
weavejs.data.ColumnUtils.hack_findNonWrapperColumn=function(column){while(org.apache.flex.utils.Language.is(column,weavejs.api.data.IColumnWrapper))column=org.apache.flex.utils.Language.as(column,weavejs.api.data.IColumnWrapper).getInternalColumn();return column};
weavejs.data.ColumnUtils.hack_findInternalDynamicColumn=function(columnWrapper){columnWrapper=org.apache.flex.utils.Language.as(columnWrapper,weavejs.api.data.IColumnWrapper);if(columnWrapper){while(true)if(org.apache.flex.utils.Language.is(columnWrapper.getInternalColumn(),weavejs.data.column.DynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper.getInternalColumn(),weavejs.api.data.IColumnWrapper);else if(org.apache.flex.utils.Language.is(columnWrapper.getInternalColumn(),
weavejs.data.column.ExtendedDynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper.getInternalColumn(),weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn;else break;if(org.apache.flex.utils.Language.is(columnWrapper,weavejs.data.column.ExtendedDynamicColumn))columnWrapper=org.apache.flex.utils.Language.as(columnWrapper,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn}return org.apache.flex.utils.Language.as(columnWrapper,weavejs.data.column.DynamicColumn)};
weavejs.data.ColumnUtils.getQKeysInNumericRange=function(column,min,max,inclusiveRange){inclusiveRange=typeof inclusiveRange!=='undefined'?inclusiveRange:true;var result=[];var keys=column.keys;var foreachiter0_target=keys;for(var foreachiter0 in foreachiter0_target){var qkey=foreachiter0_target[foreachiter0];var number=column.getValueFromKey(qkey,Number);var isInRange=false;if(inclusiveRange)isInRange=min<=number&&number<=max;else isInRange=min<number&&number<max;if(isInRange)result.push(qkey)}return result};
weavejs.data.ColumnUtils.getQKeys=function(genericObjects){return weavejs.WeaveAPI.QKeyManager.convertToQKeys(genericObjects)};weavejs.data.ColumnUtils.getQKey=function(object){if(org.apache.flex.utils.Language.is(object,weavejs.api.data.IQualifiedKey))return org.apache.flex.utils.Language.as(object,weavejs.api.data.IQualifiedKey);return weavejs.WeaveAPI.QKeyManager.getQKey(object.keyType,object.localName)};
weavejs.data.ColumnUtils.getNumber=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return column.getValueFromKey(qkey,Number);return NaN};weavejs.data.ColumnUtils.getString=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return org.apache.flex.utils.Language.as(column.getValueFromKey(qkey,String),String);return''};
weavejs.data.ColumnUtils.getBoolean=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);if(column!=null)return weavejs.util.StandardLib.asBoolean(column.getValueFromKey(qkey,Number));return false};weavejs.data.ColumnUtils.getNorm=function(column,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);return weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column).getNorm(qkey)};
weavejs.data.ColumnUtils.getGeometry=function(geometryColumn,key){var qkey=weavejs.data.ColumnUtils.getQKey(key);var genGeoms=org.apache.flex.utils.Language.as(geometryColumn.getValueFromKey(qkey,Array),Array);if(genGeoms==null)return null;var result=[];for(var iGenGeom;iGenGeom<genGeoms.length;++iGenGeom){var genGeom=genGeoms[iGenGeom];var simplifiedGeom=genGeom.getSimplifiedGeometry();var newSimplifiedGeom=[];for(var iSimplifiedGeom;iSimplifiedGeom<simplifiedGeom.length;++iSimplifiedGeom){var nodeVector=
simplifiedGeom[iSimplifiedGeom];var newNodeVector=[];for(var iNode=0;iNode<nodeVector.length;++iNode){var node=nodeVector[iNode];var point=new weavejs.geom.Point(node.x,node.y);newNodeVector.push(point)}newSimplifiedGeom.push(newNodeVector)}result.push(newSimplifiedGeom)}return result};
weavejs.data.ColumnUtils.getGeoJsonGeometries=function(geometryColumn,keys,minImportance,visibleBounds){minImportance=typeof minImportance!=='undefined'?minImportance:0;visibleBounds=typeof visibleBounds!=='undefined'?visibleBounds:null;var __localFn0__=function(genGeom,_){_=Array.prototype.slice.call(arguments,1);return genGeom.toGeoJson(minImportance,visibleBounds)};var output=new Array(keys.length);for(var i=0;i<keys.length;i++){var key=keys[i];var genGeoms=org.apache.flex.utils.Language.as(geometryColumn.getValueFromKey(key,
Array),Array);var geoJsonGeoms=genGeoms.map(__localFn0__);output[i]=weavejs.geom.GeoJSON.getMultiGeomObject(geoJsonGeoms)}return output};weavejs.data.ColumnUtils.test_getAllValues=function(column,dataType){var t=weavejs.util.JS.now();var keys=column.keys;var values=new Array(keys.length);for(var i in keys)values[i]=column.getValueFromKey(keys[i],dataType);weavejs.util.JS.log(weavejs.util.JS.now()-t);return values};
weavejs.data.ColumnUtils.joinColumns=function(columns,dataType,allowMissingData,keyFilter){dataType=typeof dataType!=='undefined'?dataType:null;allowMissingData=typeof allowMissingData!=='undefined'?allowMissingData:false;keyFilter=typeof keyFilter!=='undefined'?keyFilter:null;var keys;var key;var column;if(org.apache.flex.utils.Language.is(keyFilter,Array))keys=org.apache.flex.utils.Language.as(keyFilter,Array).concat();else if(org.apache.flex.utils.Language.is(keyFilter,weavejs.api.data.IKeySet))keys=
org.apache.flex.utils.Language.as(keyFilter,weavejs.api.data.IKeySet).keys.concat();else{var map_key_count=new weavejs.util.JS.Map;var foreachiter1_target=columns;for(var foreachiter1 in foreachiter1_target){column=foreachiter1_target[foreachiter1];var columnKeys=column?column.keys:null;var foreachiter2_target=columnKeys;for(var foreachiter2 in foreachiter2_target){key=foreachiter2_target[foreachiter2];map_key_count.set(key,(map_key_count.get(key)|0)+1)}}keys=[];var filter=org.apache.flex.utils.Language.as(keyFilter,
weavejs.api.data.IKeyFilter);var mapKeys=weavejs.util.JS.mapKeys(map_key_count);var foreachiter3_target=mapKeys;for(var foreachiter3 in foreachiter3_target){var qkey=foreachiter3_target[foreachiter3];if(allowMissingData||map_key_count.get(qkey)==columns.length)if(!filter||filter.containsKey(qkey))keys.push(qkey)}}if(org.apache.flex.utils.Language.is(dataType,String))dataType=weavejs.api.data.DataType.getClass(org.apache.flex.utils.Language.as(dataType,String));var result=[keys];for(var cIndex=0;cIndex<
columns.length;cIndex++){column=columns[cIndex];var dt=weavejs.util.JS.asClass(dataType);if(!dt&&column)dt=weavejs.api.data.DataType.getClass(column.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE));var values=[];for(var kIndex=0;kIndex<keys.length;kIndex++){var value=column?column.getValueFromKey(org.apache.flex.utils.Language.as(keys[kIndex],weavejs.api.data.IQualifiedKey),dt):undefined;var isUndef=weavejs.util.StandardLib.isUndefined(value);if(!allowMissingData&&isUndef){var foreachiter4_target=
result;for(var foreachiter4 in foreachiter4_target){var array=foreachiter4_target[foreachiter4];array.splice(kIndex,1)}kIndex--}else if(isUndef)values.push(undefined);else values.push(value)}result.push(values)}return result};
weavejs.data.ColumnUtils.getNonWrapperColumnsFromSelectableAttributes=function(attrCols){var __localFn0__=function(item,i,a){return org.apache.flex.utils.Language.is(item,weavejs.api.core.ILinkableHashMap)?org.apache.flex.utils.Language.as(item,weavejs.api.core.ILinkableHashMap).getObjects(weavejs.api.data.IAttributeColumn):org.apache.flex.utils.Language.as(item,weavejs.api.data.IAttributeColumn)};var __localFn1__=function(column,i,a){return weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column)};
var __localFn2__=function(column,i,a){if(!column||map_column.get(column))return false;map_column.set(column,true);return true};var map_column=new weavejs.util.JS.WeakMap;attrCols=attrCols.map(__localFn0__);attrCols=weavejs.util.ArrayUtils.flatten(attrCols);attrCols=attrCols.map(__localFn1__).filter(__localFn2__);return attrCols};
weavejs.data.ColumnUtils.generateTableCSV=function(attrCols,subset,dataType){subset=typeof subset!=='undefined'?subset:null;dataType=typeof dataType!=='undefined'?dataType:null;var __localFn0__=function(column,i,a){return weavejs.data.ColumnUtils.getTitle(column)};var __localFn1__=function(key,idx,arr){return subset.containsKey(key)};weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=true;var records=[];attrCols=weavejs.data.ColumnUtils.getNonWrapperColumnsFromSelectableAttributes(attrCols);var columnTitles=
attrCols.map(__localFn0__);var keys;if(!subset)keys=weavejs.data.ColumnUtils.getAllKeys(attrCols);else keys=weavejs.data.ColumnUtils.getAllKeys(attrCols).filter(__localFn1__);var keyTypeMap={};var foreachiter5_target=keys;for(var foreachiter5 in foreachiter5_target){var key=foreachiter5_target[foreachiter5];var record={};record[key.keyType]=key.localName;keyTypeMap[key.keyType]=true;for(var i=0;i<attrCols.length;i++){var col=org.apache.flex.utils.Language.as(attrCols[i],weavejs.api.data.IAttributeColumn);
var dt=dataType||weavejs.api.data.DataType.getClass(col.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE));var value=col.getValueFromKey(key,dt);if(weavejs.util.StandardLib.isDefined(value))record[columnTitles[i]]=value}records.push(record)}for(var keyType in keyTypeMap)columnTitles.unshift(keyType);weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=false;var rows=weavejs.WeaveAPI.CSVParser.convertRecordsToRows(records,columnTitles);return weavejs.WeaveAPI.CSVParser.createCSV(rows)};
weavejs.data.ColumnUtils.getAllKeys=function(inputKeySets){var map_key=new weavejs.util.JS.WeakMap;var result=[];for(var i=0;i<inputKeySets.length;i++){var keys=org.apache.flex.utils.Language.as(inputKeySets[i],weavejs.api.data.IKeySet).keys;for(var j=0;j<keys.length;j++){var key=org.apache.flex.utils.Language.as(keys[j],weavejs.api.data.IQualifiedKey);if(!map_key.has(key)){map_key.set(key,true);result.push(key)}}}return result};
weavejs.data.ColumnUtils.forceFirstColumnDynamic=function(columnHashMap){var cols=columnHashMap.getObjects(weavejs.api.data.IAttributeColumn);if(cols.length==0)columnHashMap.requestObject(null,weavejs.data.column.DynamicColumn,false);else if(!org.apache.flex.utils.Language.is(cols[0],weavejs.data.column.DynamicColumn)){Weave.getCallbacks(columnHashMap).delayCallbacks();var names=columnHashMap.getNames();var state=columnHashMap.getSessionState();state.length=1;var newCol=columnHashMap.requestObject(names[0],
weavejs.data.column.DynamicColumn,false);newCol.setSessionState(state,true);columnHashMap.setNameOrder(names);Weave.getCallbacks(columnHashMap).resumeCallbacks()}};weavejs.data.ColumnUtils.getCommonMetadata=function(columns,propertyName){var value;for(var i=0;i<columns.length;i++){var column=org.apache.flex.utils.Language.as(columns[i],weavejs.api.data.IAttributeColumn);if(i==0)value=column.getMetadata(propertyName);else if(value!=column.getMetadata(propertyName))return null}return value};
weavejs.data.ColumnUtils.getAllCommonMetadata=function(columns){var output={};if(!columns.length)return output;var foreachiter6_target=columns[0].getMetadataPropertyNames();for(var foreachiter6 in foreachiter6_target){var key=foreachiter6_target[foreachiter6];var value=weavejs.data.ColumnUtils.getCommonMetadata(columns,key);if(value)output[key]=value}return output};weavejs.data.ColumnUtils._preferredMetadataPropertyOrder='title,keyType,dataType,number,string,min,max,year'.split(',');
weavejs.data.ColumnUtils.sortMetadataPropertyNames=function(names){weavejs.util.StandardLib.sortOn(names,[org.apache.flex.utils.Language.closure(weavejs.data.ColumnUtils._preferredMetadataPropertyOrder.indexOf,weavejs.data.ColumnUtils._preferredMetadataPropertyOrder,'indexOf'),names])};
weavejs.data.ColumnUtils.initSelectableAttributes=function(selectableAttributes,input){input=typeof input!=='undefined'?input:null;if(!input)input=weavejs.data.ColumnUtils.getColumnsWithCommonKeyType(Weave.getRoot(selectableAttributes[0]));for(var i=0;i<selectableAttributes.length;i++)weavejs.data.ColumnUtils.initSelectableAttribute(selectableAttributes[i],input[i%input.length])};
weavejs.data.ColumnUtils.getColumnsWithCommonKeyType=function(root,keyType){keyType=typeof keyType!=='undefined'?keyType:null;var columns=Weave.getDescendants(root,weavejs.data.column.ReferencedColumn);if(!keyType){var keyTypeCounts=new Object;var foreachiter7_target=columns;for(var foreachiter7 in foreachiter7_target){var column=foreachiter7_target[foreachiter7];keyTypeCounts[weavejs.data.ColumnUtils.getKeyType(column)]=org.apache.flex.utils.Language._int(keyTypeCounts[weavejs.data.ColumnUtils.getKeyType(column)])+
1}var count=0;for(var kt in keyTypeCounts)if(keyTypeCounts[kt]>count)count=keyTypeCounts[keyType=kt]}var n=0;for(var i=0;i<columns.length;i++)if(weavejs.data.ColumnUtils.getKeyType(columns[i])==keyType)columns[n++]=columns[i];columns.length=n;return columns};
weavejs.data.ColumnUtils.initSelectableAttribute=function(selectableAttribute,column_or_columnReference,clearHashMap){clearHashMap=typeof clearHashMap!=='undefined'?clearHashMap:true;var inputCol=org.apache.flex.utils.Language.as(column_or_columnReference,weavejs.api.data.IAttributeColumn);var inputRef=org.apache.flex.utils.Language.as(column_or_columnReference,weavejs.api.data.IColumnReference);var outputRC=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.ReferencedColumn);
if(outputRC){var inputRC;if(inputCol)inputRC=org.apache.flex.utils.Language.as(inputCol,weavejs.data.column.ReferencedColumn)||org.apache.flex.utils.Language.as(Weave.getDescendants(inputCol,weavejs.data.column.ReferencedColumn)[0],weavejs.data.column.ReferencedColumn);if(inputRC)Weave.copyState(inputRC,outputRC);else if(inputRef)outputRC.setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata());else outputRC.setColumnReference(null,null)}var foundGlobalColumn=false;if(org.apache.flex.utils.Language.is(selectableAttribute,
weavejs.data.column.DynamicColumn))foundGlobalColumn=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.DynamicColumn).targetPath!=null;if(org.apache.flex.utils.Language.is(selectableAttribute,weavejs.data.column.ExtendedDynamicColumn))foundGlobalColumn=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn.targetPath!=null;var outputDC=weavejs.data.ColumnUtils.hack_findInternalDynamicColumn(org.apache.flex.utils.Language.as(selectableAttribute,
weavejs.api.data.IColumnWrapper));if(outputDC&&(outputDC.getInternalColumn()==null||!foundGlobalColumn))if(inputCol)if(org.apache.flex.utils.Language.is(inputCol,weavejs.data.column.DynamicColumn))Weave.copyState(inputCol,outputDC);else outputDC.requestLocalObjectCopy(inputCol);else if(inputRef)org.apache.flex.utils.Language.as(outputDC.requestLocalObject(weavejs.data.column.ReferencedColumn,false),weavejs.data.column.ReferencedColumn,true).setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata());
else outputDC.removeObject();var outputHash=org.apache.flex.utils.Language.as(selectableAttribute,weavejs.api.core.ILinkableHashMap);if(outputHash){if(clearHashMap)outputHash.removeAllObjects();if(inputCol)outputHash.requestObjectCopy(null,inputCol);else if(inputRef)org.apache.flex.utils.Language.as(outputHash.requestObject(null,weavejs.data.column.ReferencedColumn,false),weavejs.data.column.ReferencedColumn,true).setColumnReference(inputRef.getDataSource(),inputRef.getColumnMetadata())}};
weavejs.data.ColumnUtils.unlinkNestedColumns=function(columnWrapper){var col=columnWrapper;while(col){var dc=org.apache.flex.utils.Language.as(col,weavejs.data.column.DynamicColumn);var edc=org.apache.flex.utils.Language.as(col,weavejs.data.column.ExtendedDynamicColumn);if(dc&&dc.globalName){dc.globalName=null;if(dc.globalName)break;col=columnWrapper}else if(edc&&edc.internalDynamicColumn.globalName){edc.internalDynamicColumn.globalName=null;if(edc.internalDynamicColumn.globalName)break;col=columnWrapper}else col=
org.apache.flex.utils.Language.as(col.getInternalColumn(),weavejs.api.data.IColumnWrapper)}};weavejs.data.ColumnUtils.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnUtils',qName:'weavejs.data.ColumnUtils'}]};goog.provide('weavejs.path.WeavePathDataShared');weavejs.path.WeavePathDataShared=function(){this.d2d_keySet_addedKeys=new weavejs.util.Dictionary2D(true);this.d2d_keySet_removedKeys=new weavejs.util.Dictionary2D(true);this.map_keySet_timeoutId=new weavejs.util.JS.WeakMap};weavejs.path.WeavePathDataShared.DEFAULT_PROBE_KEY_SET='defaultProbeKeySet';weavejs.path.WeavePathDataShared.DEFAULT_SELECTION_KEY_SET='defaultSelectionKeySet';weavejs.path.WeavePathDataShared.DEFAULT_SUBSET_KEY_FILTER='defaultSubsetKeyFilter';
weavejs.path.WeavePathDataShared.prototype.init=function(weave){this.weave=weave;this.qkm=weavejs.WeaveAPI.QKeyManager;this.probe_keyset=weave.path(weavejs.path.WeavePathDataShared.DEFAULT_PROBE_KEY_SET);this.selection_keyset=weave.path(weavejs.path.WeavePathDataShared.DEFAULT_SELECTION_KEY_SET);this.subset_filter=weave.path(weavejs.path.WeavePathDataShared.DEFAULT_SUBSET_KEY_FILTER)};weavejs.path.WeavePathDataShared.prototype.qkm;weavejs.path.WeavePathDataShared.prototype.weave;weavejs.path.WeavePathDataShared.prototype.probe_keyset;
weavejs.path.WeavePathDataShared.prototype.selection_keyset;weavejs.path.WeavePathDataShared.prototype.subset_filter;weavejs.path.WeavePathDataShared.prototype.d2d_keySet_addedKeys;weavejs.path.WeavePathDataShared.prototype.d2d_keySet_removedKeys;weavejs.path.WeavePathDataShared.prototype.map_keySet_timeoutId;weavejs.path.WeavePathDataShared.prototype.qkeyToIndex=function(qkey){return qkey.toNumber()};weavejs.path.WeavePathDataShared.prototype.indexToQKey=function(index){return this.qkm.numberToQKey(index)};
weavejs.path.WeavePathDataShared.prototype.qkeyToString=function(qkey){return qkey.toString()};weavejs.path.WeavePathDataShared.prototype.stringToQKey=function(s){return org.apache.flex.utils.Language.as(s,weavejs.api.data.IQualifiedKey)||this.qkm.stringToQKey(s)};
weavejs.path.WeavePathDataShared.prototype._flushKeys=function(keySet){var add_keys=this.d2d_keySet_addedKeys.secondaryKeys(keySet);var remove_keys=this.d2d_keySet_removedKeys.secondaryKeys(keySet);this.d2d_keySet_addedKeys.removeAllPrimary(keySet);this.d2d_keySet_removedKeys.removeAllPrimary(keySet);keySet['addKeys'](add_keys);keySet['removeKeys'](remove_keys);this.map_keySet_timeoutId['delete'](keySet)};
weavejs.path.WeavePathDataShared.prototype._flushKeysLater=function(keySet){if(!this.map_keySet_timeoutId.has(keySet))this.map_keySet_timeoutId.set(keySet,weavejs.util.JS.setTimeout(org.apache.flex.utils.Language.closure(this._flushKeys,this,'_flushKeys'),25,keySet))};
weavejs.path.WeavePathDataShared.prototype._addKeys=function(keySet,qkeyStrings){var self=this;var __localFn0__=function(qkey){self.d2d_keySet_addedKeys.set(keySet,qkey,true);self.d2d_keySet_removedKeys.remove(keySet,qkey)};this.qkm.getQKeys(null,qkeyStrings).forEach(__localFn0__);this._flushKeysLater(keySet)};
weavejs.path.WeavePathDataShared.prototype._removeKeys=function(keySet,qkeyStrings){var self=this;var __localFn0__=function(qkey){self.d2d_keySet_removedKeys.set(keySet,qkey,true);self.d2d_keySet_addedKeys.remove(keySet,qkey)};this.qkm.getQKeys(null,qkeyStrings).forEach(__localFn0__);this._flushKeysLater(keySet)};weavejs.path.WeavePathDataShared.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathDataShared',qName:'weavejs.path.WeavePathDataShared'}]};goog.provide('weavejs.api.data.IKeySetCallbackInterface');goog.require('weavejs.api.core.ICallbackCollection');weavejs.api.data.IKeySetCallbackInterface=function(){};weavejs.api.data.IKeySetCallbackInterface.prototype.flushKeys=function(){};weavejs.api.data.IKeySetCallbackInterface.prototype.keysAdded;weavejs.api.data.IKeySetCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'IKeySetCallbackInterface',qName:'weavejs.api.data.IKeySetCallbackInterface'}],interfaces:[weavejs.api.core.ICallbackCollection]};goog.provide('weavejs.path.WeavePathData');goog.require('weavejs.data.ColumnUtils');goog.require('weavejs.data.column.ReferencedColumn');goog.require('weavejs.path.WeavePath');goog.require('weavejs.path.WeavePathDataShared');
weavejs.path.WeavePathData=function(weave,basePath){weavejs.path.WeavePathData.base(this,'constructor',weave,basePath);var shared=weavejs.path.WeavePathData.map_weave.get(weave);if(!shared){weavejs.path.WeavePathData.map_weave.set(weave,shared=new weavejs.path.WeavePathDataShared);shared.init(weave)}this.shared=shared;this.probe_keyset=shared.probe_keyset;this.selection_keyset=shared.selection_keyset;this.subset_filter=shared.subset_filter;this.qkeyToString=org.apache.flex.utils.Language.closure(shared.qkeyToString,
shared,'qkeyToString');this.stringToQKey=org.apache.flex.utils.Language.closure(shared.stringToQKey,shared,'stringToQKey');this.indexToQKey=org.apache.flex.utils.Language.closure(shared.indexToQKey,shared,'indexToQKey');this.qkeyToIndex=org.apache.flex.utils.Language.closure(shared.qkeyToIndex,shared,'qkeyToIndex')};goog.inherits(weavejs.path.WeavePathData,weavejs.path.WeavePath);weavejs.path.WeavePathData.map_weave=new weavejs.util.JS.WeakMap;weavejs.path.WeavePathData.prototype.shared;weavejs.path.WeavePathData.prototype.probe_keyset;
weavejs.path.WeavePathData.prototype.selection_keyset;weavejs.path.WeavePathData.prototype.subset_filter;weavejs.path.WeavePathData.prototype.qkeyToString;weavejs.path.WeavePathData.prototype.stringToQKey;weavejs.path.WeavePathData.prototype.indexToQKey;weavejs.path.WeavePathData.prototype.qkeyToIndex;
weavejs.path.WeavePathData.prototype._initProperty=function(manifest,callback_pass,property_descriptor){var name=property_descriptor['name']||weavejs.path.WeavePath._failMessage('initProperty','A "name" is required');var label=property_descriptor['label'];var children=property_descriptor['children'];var type=property_descriptor['type'];if(!type)type=children?'LinkableHashMap':'LinkableVariable';var new_prop=org.apache.flex.utils.Language.as(this.push(name),weavejs.path.WeavePathData);if(callback_pass){var callback=
property_descriptor['callback'];var triggerNow=property_descriptor['triggerNow'];var immediate=property_descriptor['immediate'];if(callback)new_prop.addCallback(new_prop,callback,triggerNow!==undefined?triggerNow:true,immediate!==undefined?immediate:false)}else{var oldType=new_prop.getType();type=new_prop.request(type).getType();if(label)new_prop.label(label);if(oldType!=type&&property_descriptor.hasOwnProperty('default'))new_prop.state(property_descriptor['default']);manifest[name]=new_prop}if(children){if(!callback_pass)manifest[name]=
{};children.forEach(this._initProperty.bind(new_prop,manifest[name],callback_pass))}return this};weavejs.path.WeavePathData.prototype.initProperties=function(property_descriptor_array,manifest){manifest=typeof manifest!=='undefined'?manifest:null;if(this.getType()==null)this.request('ExternalTool');if(!manifest)manifest={};property_descriptor_array.forEach(this._initProperty.bind(this,manifest,false));property_descriptor_array.forEach(this._initProperty.bind(this,manifest,true));return manifest};
weavejs.path.WeavePathData.prototype.getProperties=function(relativePath){var self=this;relativePath=Array.prototype.slice.call(arguments,0);var __localFn0__=function(name){result[name]=this.push(name)};var result={};this.getNames.apply(this,relativePath).forEach(__localFn0__,this);return result};
weavejs.path.WeavePathData.prototype.getKeys=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);return org.apache.flex.utils.Language.as(this.getObject(args),weavejs.api.data.IKeySet,true).keys};
weavejs.path.WeavePathData.prototype.flushKeys=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);if(weavejs.path.WeavePath._assertParams('flushKeys',args)){var keySet=this.getObject(args);this.shared._flushKeys(keySet)}return this};
weavejs.path.WeavePathData.prototype.addKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('addKeys',args)){var qkeyStringArray=args.pop();var keySet=this.getObject(args);this.shared._addKeys(keySet,qkeyStringArray)}return this};
weavejs.path.WeavePathData.prototype.removeKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('removeKeys',args)){var qkeyStringArray=args.pop();var keySet=this.getObject(args);this.shared._removeKeys(keySet,qkeyStringArray)}return this};
weavejs.path.WeavePathData.prototype.addKeySetCallback=function(callback,triggerCallbackNow){var self=this;triggerCallbackNow=typeof triggerCallbackNow!=='undefined'?triggerCallbackNow:false;var __localFn0__=function(){callback.call(self,{added:keyCallbacks.keysAdded,removed:keyCallbacks.keysRemoved})};var self=this;var keyCallbacks=org.apache.flex.utils.Language.as(this.getObject('keyCallbacks'),weavejs.api.data.IKeySetCallbackInterface);keyCallbacks.addImmediateCallback(keyCallbacks,__localFn0__);
if(triggerCallbackNow)callback.call(this,{added:this.getKeys(),removed:[]});return this};
weavejs.path.WeavePathData.prototype.setKeys=function(relativePath_qkeyStringArray){relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('setKeys',args)){var qkeyStringArray=args.pop();var keyObjectArray=qkeyStringArray.map(this.stringToQKey);this.getObject(args)['replaceKeys'](keyObjectArray);return this}return this};
weavejs.path.WeavePathData.prototype.filterKeys=function(relativePath_qkeyStringArray){var self=this;relativePath_qkeyStringArray=Array.prototype.slice.call(arguments,0);var __localFn0__=function(key){return obj.containsKey(key)};var args=weavejs.path.WeavePath._A(relativePath_qkeyStringArray,2);if(weavejs.path.WeavePath._assertParams('filterKeys',args)){var qkeyStringArray=args.pop();var keyObjects=qkeyStringArray.map(this.stringToQKey);var obj=this.getObject(args);return weavejs.WeaveAPI.QKeyManager.convertToQKeys(keyObjects).filter(__localFn0__)}return null};
weavejs.path.WeavePathData.prototype.retrieveRecords=function(pathMapping,options){var self=this;var __localFn0__=function(key,iRow,a){var __localFn0__=function(chain,iChain,a){weavejs.path.WeavePathData.setChain(record,chain,results[iChain+1][iRow])};var record={id:key};obj.chains.forEach(__localFn0__);return record};var dataType=options?options['dataType']:null;var keySetPath=options?options['keySet']:null;if(!keySetPath&&org.apache.flex.utils.Language.is(options,weavejs.path.WeavePath))keySetPath=
org.apache.flex.utils.Language.as(options,weavejs.path.WeavePath);if(arguments.length==1&&org.apache.flex.utils.Language.is(pathMapping,weavejs.path.WeavePath)){keySetPath=org.apache.flex.utils.Language.as(pathMapping,weavejs.path.WeavePath);pathMapping=null}if(!pathMapping)pathMapping=this.getNames();if(org.apache.flex.utils.Language.is(pathMapping,Array)){var names=org.apache.flex.utils.Language.as(pathMapping,Array);pathMapping={};var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=
foreachiter0_target[foreachiter0];pathMapping[name]=this.push(name)}}var obj=this.listChainsAndColumns(pathMapping);var results=weavejs.data.ColumnUtils.joinColumns(obj.columns,dataType,true,keySetPath?keySetPath.getObject():null);return results[0].map(__localFn0__)};
weavejs.path.WeavePathData.setChain=function(root,property_chain,value){value=typeof value!=='undefined'?value:undefined;var __localFn0__=function(prop,i,a){root=root[prop]||(root[prop]={})};property_chain=[].concat(property_chain);var last_property=property_chain.pop();property_chain.forEach(__localFn0__);if(value===undefined)return root[last_property];return root[last_property]=value};
weavejs.path.WeavePathData.getChain=function(root,property_chain){return weavejs.path.WeavePathData.setChain(root,property_chain)};
weavejs.path.WeavePathData.prototype.listChainsAndColumns=function(obj,prefix,output){prefix=typeof prefix!=='undefined'?prefix:null;output=typeof output!=='undefined'?output:null;if(!prefix)prefix=[];if(!output)output={chains:[],columns:[]};for(var key in obj){var item=obj[key];if(org.apache.flex.utils.Language.is(item,weavejs.path.WeavePath)){var column=item.getObject();if(org.apache.flex.utils.Language.is(column,weavejs.api.data.IAttributeColumn)){output.chains.push(prefix.concat(key));output.columns.push(column)}}else this.listChainsAndColumns(item,
prefix.concat(key),output)}return output};weavejs.path.WeavePathData.prototype.label=function(relativePath_label){relativePath_label=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath_label,2);if(weavejs.path.WeavePath._assertParams('setLabel',args)){var label=args.pop();weavejs.WeaveAPI.EditorManager.setLabel(this.getObject(args),label)}return this};
weavejs.path.WeavePathData.prototype.getLabel=function(relativePath){relativePath=Array.prototype.slice.call(arguments,0);var args=weavejs.path.WeavePath._A(relativePath,1);return weavejs.WeaveAPI.EditorManager.getLabel(this.getObject(args))};
weavejs.path.WeavePathData.prototype.setColumn=function(metadata,dataSourceName){var object=this.getObject();if(!object)object=this.request(weavejs.data.column.ReferencedColumn).getObject();if(org.apache.flex.utils.Language.is(object,weavejs.data.column.ExtendedDynamicColumn))object=org.apache.flex.utils.Language.as(object,weavejs.data.column.ExtendedDynamicColumn).internalDynamicColumn.requestLocalObject(weavejs.data.column.ReferencedColumn,false);else if(org.apache.flex.utils.Language.is(object,
weavejs.data.column.DynamicColumn))object=org.apache.flex.utils.Language.as(object,weavejs.data.column.DynamicColumn).requestLocalObject(weavejs.data.column.ReferencedColumn,false);if(org.apache.flex.utils.Language.is(object,weavejs.data.column.ReferencedColumn)){if(arguments.length<2)dataSourceName=this.weave.root.getNames(weavejs.api.data.IDataSource)[0];var dataSource=org.apache.flex.utils.Language.as(this.weave.root.getObject(dataSourceName),weavejs.api.data.IDataSource);org.apache.flex.utils.Language.as(object,
weavejs.data.column.ReferencedColumn).setColumnReference(dataSource,metadata)}else weavejs.path.WeavePath._failMessage('setColumn','Not a compatible column object',this._path);return this};
weavejs.path.WeavePathData.prototype.setColumns=function(metadataMapping,dataSourceName){var self=this;var __localFn0__=function(value,key,a){var path=org.apache.flex.utils.Language.as(this.push(key),weavejs.path.WeavePathData);var func=org.apache.flex.utils.Language.is(value,Array)?org.apache.flex.utils.Language.closure(path.setColumns,path,'setColumns'):org.apache.flex.utils.Language.closure(path.setColumn,path,'setColumn');var args=useDataSource?[value,dataSourceName]:[value];func.apply(path,args)};
var useDataSource=arguments.length>1;this.forEach(metadataMapping,__localFn0__);if(org.apache.flex.utils.Language.is(metadataMapping,Array))while(this.getType(metadataMapping.length))this.remove(metadataMapping.length);return this};weavejs.path.WeavePathData.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathData',qName:'weavejs.path.WeavePathData'}]};goog.provide('weavejs.path.WeavePathUI');goog.require('weavejs.path.WeavePathData');weavejs.path.WeavePathUI=function(weave,basePath){weavejs.path.WeavePathUI.base(this,'constructor',weave,basePath)};goog.inherits(weavejs.path.WeavePathUI,weavejs.path.WeavePathData);weavejs.path.WeavePathUI.prototype.pushPlotter=function(plotterName,plotterType){var tool=this;var result=tool.push('children','visualization','plotManager','plotters',plotterName);if(plotterType)result.request(plotterType);return result};
weavejs.path.WeavePathUI.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeavePathUI',qName:'weavejs.path.WeavePathUI'}]};goog.provide('Weave');goog.require('weavejs.WeaveAPI');goog.require('weavejs.core.EditorManager');goog.require('weavejs.core.ProgressIndicator');goog.require('weavejs.core.Scheduler');goog.require('weavejs.core.SessionManager');goog.require('weavejs.core.SessionStateLog');goog.require('weavejs.data.AttributeColumnCache');goog.require('weavejs.data.CSVParser');goog.require('weavejs.data.StatisticsCache');goog.require('weavejs.data.key.QKeyManager');goog.require('weavejs.net.URLRequestUtils');goog.require('weavejs.path.WeavePathUI');
goog.require('weavejs.util.Dictionary2D');goog.require('weavejs.util.JS');goog.require('weavejs.util.StandardLib');goog.require('weavejs.api.core.IDisposableObject');
Weave=function(){weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.net.IURLRequestUtils,weavejs.net.URLRequestUtils);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IAttributeColumnCache,weavejs.data.AttributeColumnCache);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.ISessionManager,weavejs.core.SessionManager);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IQualifiedKeyManager,
weavejs.data.key.QKeyManager);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.IScheduler,weavejs.core.Scheduler);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.core.IProgressIndicator,weavejs.core.ProgressIndicator);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.IStatisticsCache,weavejs.data.StatisticsCache);weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.ui.IEditorManager,weavejs.core.EditorManager);
weavejs.WeaveAPI.ClassRegistry.registerSingletonImplementation(weavejs.api.data.ICSVParser,weavejs.data.CSVParser);Weave.registerClass('FlexibleLayout',weavejs.core.LinkableVariable);Weave.registerClass('ExternalTool',weavejs.core.LinkableHashMap);this['WeavePath']=weavejs.path.WeavePathUI;this.root=Weave.disposableChild(this,weavejs.core.LinkableHashMap);this.history=Weave.disposableChild(this,new weavejs.core.SessionStateLog(this.root,Weave.HISTORY_SYNC_DELAY));Weave.map_root_weave.set(this.root,
this)};Weave.HISTORY_SYNC_DELAY=100;Weave.FRAME_INTERVAL=1E3/30;Weave.prototype.dispose=function(){Weave.dispose(this);Weave.map_root_weave['delete'](this.root);this.root=null;this.history=null};Weave.prototype.root;Weave.prototype.history;
Weave.prototype.path=function(basePath){basePath=Array.prototype.slice.call(arguments,0);if(basePath.length==1&&org.apache.flex.utils.Language.is(basePath[0],Array))basePath=basePath[0];if(basePath.length==1&&Weave.isLinkable(basePath[0]))basePath=Weave.findPath(this.root,basePath[0]);return new weavejs.path.WeavePathUI(this,basePath)};
Weave.prototype.getObject=function(path){path=Array.prototype.slice.call(arguments,0);if(path.length==1){if(org.apache.flex.utils.Language.is(path[0],weavejs.path.WeavePath))return org.apache.flex.utils.Language.as(path[0],weavejs.path.WeavePath).getObject();if(org.apache.flex.utils.Language.is(path[0],Array))path=path[0]}return Weave.followPath(this.root,path)};Weave.map_root_weave=new weavejs.util.JS.Map;Weave.getWeave=function(object){return Weave.map_root_weave.get(Weave.getRoot(object))};
Weave.getPath=function(object){var weave=Weave.getWeave(object);return weave?weave.path(object):null};Weave.findPath=function(root,descendant){return weavejs.WeaveAPI.SessionManager.getPath(root,descendant)};Weave.followPath=function(root,path){return weavejs.WeaveAPI.SessionManager.getObject(root,path)};Weave.getCallbacks=function(linkableObject){return weavejs.WeaveAPI.SessionManager.getCallbackCollection(linkableObject)};
Weave.detectChange=function(observer,linkableObject,moreLinkableObjects){moreLinkableObjects=Array.prototype.slice.call(arguments,2);var changeDetected=false;moreLinkableObjects.unshift(linkableObject);var foreachiter0_target=moreLinkableObjects;for(var foreachiter0 in foreachiter0_target){linkableObject=foreachiter0_target[foreachiter0];if(linkableObject&&Weave._internalDetectChange(observer,linkableObject,true))changeDetected=true}return changeDetected};
Weave._internalDetectChange=function(observer,linkableObject,clearChangedNow){clearChangedNow=typeof clearChangedNow!=='undefined'?clearChangedNow:true;var previousCount=Weave.d2d_linkableObject_observer_triggerCounter.get(linkableObject,observer);var newCount=weavejs.WeaveAPI.SessionManager.getCallbackCollection(linkableObject).triggerCounter;if(previousCount!==newCount){if(clearChangedNow)Weave.d2d_linkableObject_observer_triggerCounter.set(linkableObject,observer,newCount);return true}return false};
Weave.d2d_linkableObject_observer_triggerCounter=new weavejs.util.Dictionary2D(true,true);Weave.getRoot=function(object){var sm=weavejs.WeaveAPI.SessionManager;while(true){var owner=sm.getLinkableOwner(object);if(!owner)break;object=owner}return org.apache.flex.utils.Language.as(object,weavejs.api.core.ILinkableHashMap)};
Weave.getAncestor=function(descendant,ancestorType){var sm=weavejs.WeaveAPI.SessionManager;do descendant=sm.getLinkableOwner(descendant);while(descendant&&!org.apache.flex.utils.Language.is(descendant,ancestorType));return descendant};Weave.getOwner=function(child){return weavejs.WeaveAPI.SessionManager.getLinkableOwner(child)};Weave.getDescendants=function(object,filter){filter=typeof filter!=='undefined'?filter:null;return weavejs.WeaveAPI.SessionManager.getLinkableDescendants(object,filter)};
Weave.getState=function(linkableObject){return weavejs.WeaveAPI.SessionManager.getSessionState(linkableObject)};Weave.setState=function(linkableObject,newState,removeMissingDynamicObjects){removeMissingDynamicObjects=typeof removeMissingDynamicObjects!=='undefined'?removeMissingDynamicObjects:true;weavejs.WeaveAPI.SessionManager.setSessionState(linkableObject,newState,removeMissingDynamicObjects)};
Weave.copyState=function(source,destination){weavejs.WeaveAPI.SessionManager.copySessionState(source,destination)};Weave.linkState=function(primary,secondary){weavejs.WeaveAPI.SessionManager.linkSessionState(primary,secondary)};Weave.unlinkState=function(first,second){weavejs.WeaveAPI.SessionManager.unlinkSessionState(first,second)};Weave.computeDiff=function(oldState,newState){return weavejs.WeaveAPI.SessionManager.computeDiff(oldState,newState)};
Weave.combineDiff=function(baseDiff,diffToAdd){return weavejs.WeaveAPI.SessionManager.combineDiff(baseDiff,diffToAdd)};Weave.disposableChild=function(disposableParent,disposableChildOrType){if(weavejs.util.JS.isClass(disposableChildOrType))return weavejs.WeaveAPI.SessionManager.newDisposableChild(disposableParent,weavejs.util.JS.asClass(disposableChildOrType));return weavejs.WeaveAPI.SessionManager.registerDisposableChild(disposableParent,disposableChildOrType)};
Weave.linkableChild=function(linkableParent,linkableChildOrType,callback,useGroupedCallback){callback=typeof callback!=='undefined'?callback:null;useGroupedCallback=typeof useGroupedCallback!=='undefined'?useGroupedCallback:false;if(weavejs.util.JS.isClass(linkableChildOrType))return weavejs.WeaveAPI.SessionManager.newLinkableChild(linkableParent,weavejs.util.JS.asClass(linkableChildOrType),callback,useGroupedCallback);return weavejs.WeaveAPI.SessionManager.registerLinkableChild(linkableParent,org.apache.flex.utils.Language.as(linkableChildOrType,
weavejs.api.core.ILinkableObject),callback,useGroupedCallback)};Weave.dispose=function(object){weavejs.WeaveAPI.SessionManager.disposeObject(object)};Weave.wasDisposed=function(object){return weavejs.WeaveAPI.SessionManager.objectWasDisposed(object)};Weave.isBusy=function(object){return weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(object)};
Weave.isLinkable=function(objectOrClass){if(org.apache.flex.utils.Language.is(objectOrClass,weavejs.api.core.ILinkableObject)||objectOrClass===weavejs.api.core.ILinkableObject)return true;return objectOrClass&&org.apache.flex.utils.Language.is(objectOrClass.prototype,weavejs.api.core.ILinkableObject)};
Weave.callLater=function(context,func,args){args=typeof args!=='undefined'?args:null;var __localFn0__=function(){if(!Weave.wasDisposed(context))func.apply(context,args)};weavejs.util.JS.setTimeout(__localFn0__,0)};Weave.map_name_class=new weavejs.util.JS.Map;Weave.map_class_name=new weavejs.util.JS.Map;
Weave.defaultPackages=['weavejs','weavejs.api','weavejs.api.core','weavejs.api.data','weavejs.api.service','weavejs.api.ui','weavejs.core','weavejs.data','weavejs.data.bin','weavejs.data.column','weavejs.data.hierarchy','weavejs.data.key','weavejs.data.source','weavejs.geom','weavejs.path','weavejs.util'];
Weave.registerClass=function(name,definition,additionalInterfaces){additionalInterfaces=typeof additionalInterfaces!=='undefined'?additionalInterfaces:null;Weave.map_name_class.set(name,definition);Weave.map_class_name.set(definition,name);var shortName=name.split('.').pop().split(':').pop();if(shortName!=name)Weave.registerClass(shortName,definition);if(!definition.prototype.FLEXJS_CLASS_INFO)definition.prototype.FLEXJS_CLASS_INFO={names:[{name:shortName,qName:name}],interfaces:[weavejs.api.core.ILinkableObject]};
var foreachiter1_target=additionalInterfaces;for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];definition.prototype.FLEXJS_CLASS_INFO.interfaces.push(item)}};Weave.className=function(def){if(!def)return null;if(!def.prototype)def=def.constructor;if(def.prototype&&def.prototype.FLEXJS_CLASS_INFO)return def.prototype.FLEXJS_CLASS_INFO.names[0].qName;if(Weave.map_class_name.has(def))return Weave.map_class_name.get(def);return def.name};
Weave.getDefinition=function(name){if(!name)return undefined;var def=weavejs.util.JS.global;var names=name.split('.');var foreachiter2_target=names;for(var foreachiter2 in foreachiter2_target){var key=foreachiter2_target[foreachiter2];if(def!==undefined)def=def[key];else break}if(def)return def;if(names.length==1){var foreachiter3_target=Weave.defaultPackages;for(var foreachiter3 in foreachiter3_target){var pkg=foreachiter3_target[foreachiter3];def=Weave.getDefinition(pkg+'.'+name);if(def)return def}}def=
Weave.map_name_class.get(name);if(def)return def;if(name.indexOf('::')>0)return Weave.getDefinition(name.split('::').pop())};
Weave.stringify=function(value,replacer,indent,json_values_only){replacer=typeof replacer!=='undefined'?replacer:null;indent=typeof indent!=='undefined'?indent:null;json_values_only=typeof json_values_only!=='undefined'?json_values_only:false;indent=typeof indent==='number'?weavejs.util.StandardLib.lpad('',indent,' '):org.apache.flex.utils.Language.as(indent,String)||'';return Weave._stringify('',value,replacer,indent?'\n':'',indent,json_values_only)};
Weave._stringify=function(key,value,replacer,lineBreak,indent,json_values_only){if(replacer!=null)value=replacer(key,value);var output;var item;if(typeof value==='string')return Weave.encodeString(value);if(value==null||typeof value!='object'){if(json_values_only&&(value===undefined||!isFinite(org.apache.flex.utils.Language.as(value,Number))))value=null;return String(value)||String(null)}var lineBreakIndent=lineBreak+indent;var valueIsArray=org.apache.flex.utils.Language.is(value,Array);output=[];
if(valueIsArray)for(var i=0;i<value.length;i++)output.push(Weave._stringify(String(i),value[i],replacer,lineBreakIndent,indent,json_values_only));else if(typeof value=='object'){for(key in value)output.push(Weave.encodeString(key)+': '+Weave._stringify(key,value[key],replacer,lineBreakIndent,indent,json_values_only));output.sort()}if(output.length==0)return valueIsArray?'[]':'{}';var lb=valueIsArray?'[':'{';var rb=valueIsArray?']':'}';return lb+lineBreakIndent+output.join(indent?','+lineBreakIndent:
', ')+lineBreak+rb};Weave.encodeString=function(string,quote){quote=typeof quote!=='undefined'?quote:'"';if(string==null)return'null';var result=new Array(string.length);for(var i=0;i<string.length;i++){var chr=string.charAt(i);var esc=chr==quote?quote:Weave.ENCODE_LOOKUP[chr];result[i]=esc?'\\'+esc:chr}return quote+result.join('')+quote};Weave.ENCODE_LOOKUP={'\b':'b','\f':'f','\n':'n','\r':'r','\t':'t','\\':'\\'};
Weave.lang=function(text,parameters){parameters=Array.prototype.slice.call(arguments,1);var newText=text;try{newText=weavejs.WeaveAPI.LocaleManager.localize(text);if(weavejs.WeaveAPI.LocaleManager.getLocale()=='developer'){parameters.unshift(text);return'lang("'+parameters.join('", "')+'")'}}catch(e){}if(parameters.length)return weavejs.util.StandardLib.substitute(newText,parameters);return newText};Weave.prototype.FLEXJS_CLASS_INFO={names:[{name:'Weave',qName:'Weave'}],interfaces:[weavejs.api.core.IDisposableObject]};goog.provide('weavejs.core.LinkableCallbackScript');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableCallbackScript=function(){this.variables=Weave.linkableChild(this,new weavejs.core.LinkableHashMap);this.script=Weave.linkableChild(this,new weavejs.core.LinkableString);this.delayWhileBusy=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.groupedCallback=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));var callbacks=Weave.getCallbacks(this);callbacks.addImmediateCallback(null,org.apache.flex.utils.Language.closure(this._immediateCallback,this,
'_immediateCallback'));callbacks.addGroupedCallback(null,org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'))};weavejs.core.LinkableCallbackScript.prototype.variables;weavejs.core.LinkableCallbackScript.prototype.script;weavejs.core.LinkableCallbackScript.prototype.delayWhileBusy;weavejs.core.LinkableCallbackScript.prototype.groupedCallback;weavejs.core.LinkableCallbackScript.prototype._compiledFunction;weavejs.core.LinkableCallbackScript.prototype.get=function(variableName){return this.variables.getObject(variableName)};
weavejs.core.LinkableCallbackScript.prototype._immediateCallback=function(){if(!this.groupedCallback.value)this._runScript()};weavejs.core.LinkableCallbackScript.prototype._groupedCallback=function(){if(this.groupedCallback.value)this._runScript()};
weavejs.core.LinkableCallbackScript.prototype._runScript=function(){if(this.delayWhileBusy.value&&Weave.isBusy(this))return;if(!this.script.value)return;try{if(Weave.detectChange(this,this.script))this._compiledFunction=weavejs.util.JS.compile(this.script.value);this._compiledFunction.call(this)}catch(e){weavejs.util.JS.error(e)}};weavejs.core.LinkableCallbackScript.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableCallbackScript',qName:'weavejs.core.LinkableCallbackScript'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.core.LinkableFunction');goog.require('weavejs.core.LinkableString');
weavejs.core.LinkableFunction=function(defaultValue,ignoreRuntimeErrors,paramNames){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;ignoreRuntimeErrors=typeof ignoreRuntimeErrors!=='undefined'?ignoreRuntimeErrors:false;paramNames=typeof paramNames!=='undefined'?paramNames:null;weavejs.core.LinkableFunction.base(this,'constructor',weavejs.util.StandardLib.unIndent(defaultValue));this._ignoreRuntimeErrors=ignoreRuntimeErrors;this._paramNames=paramNames?paramNames.concat():[]};
goog.inherits(weavejs.core.LinkableFunction,weavejs.core.LinkableString);weavejs.core.LinkableFunction.debug=false;weavejs.core.LinkableFunction.prototype._catchErrors=false;weavejs.core.LinkableFunction.prototype._ignoreRuntimeErrors=false;weavejs.core.LinkableFunction.prototype._compiledMethod=null;weavejs.core.LinkableFunction.prototype._paramNames=null;weavejs.core.LinkableFunction.prototype._isFunctionDefinition=false;weavejs.core.LinkableFunction.prototype._triggerCount=0;
weavejs.core.LinkableFunction.RETURN_UNDEFINED=function(_){_=Array.prototype.slice.call(arguments,0);return undefined};weavejs.core.LinkableFunction.prototype.validate=function(){if(this._triggerCount!=this.triggerCounter){this._triggerCount=this.triggerCounter;this._compiledMethod=weavejs.core.LinkableFunction.RETURN_UNDEFINED;this._isFunctionDefinition=false;this._compiledMethod=weavejs.util.JS.compile(this.value,this._paramNames)}};
weavejs.core.LinkableFunction.prototype.errorHandler=function(e){if(weavejs.core.LinkableFunction.debug)weavejs.util.JS.error(e);if(this._ignoreRuntimeErrors||weavejs.core.LinkableFunction.debug)return true;if(this._catchErrors){weavejs.util.JS.error(e);return false}throw e;};
weavejs.core.LinkableFunction.prototype.apply=function(thisArg,argArray){thisArg=typeof thisArg!=='undefined'?thisArg:null;argArray=typeof argArray!=='undefined'?argArray:null;if(this._triggerCount!=this.triggerCounter)this.validate();return this._compiledMethod.apply(thisArg,argArray)};
weavejs.core.LinkableFunction.prototype.call=function(thisArg,args){args=Array.prototype.slice.call(arguments,1);thisArg=typeof thisArg!=='undefined'?thisArg:null;if(this._triggerCount!=this.triggerCounter)this.validate();return this._compiledMethod.apply(thisArg,args)};Object.defineProperties(weavejs.core.LinkableFunction.prototype,{length:{get:function(){if(this._triggerCount!=this.triggerCounter)this.validate();return this._compiledMethod.length}}});
weavejs.core.LinkableFunction.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableFunction',qName:'weavejs.core.LinkableFunction'}]};goog.provide('weavejs.core.LinkableNumber');goog.require('weavejs.core.LinkableVariable');
weavejs.core.LinkableNumber=function(defaultValue,verifier,defaultValueTriggersCallbacks){defaultValue=typeof defaultValue!=='undefined'?defaultValue:NaN;verifier=typeof verifier!=='undefined'?verifier:null;defaultValueTriggersCallbacks=typeof defaultValueTriggersCallbacks!=='undefined'?defaultValueTriggersCallbacks:true;weavejs.core.LinkableNumber.base(this,'constructor',Number,verifier,arguments.length?defaultValue:undefined,defaultValueTriggersCallbacks)};
goog.inherits(weavejs.core.LinkableNumber,weavejs.core.LinkableVariable);weavejs.core.LinkableNumber.prototype.getSessionState=function(){return Number(this._sessionStateExternal)};weavejs.core.LinkableNumber.prototype.setSessionState=function(value){if(!org.apache.flex.utils.Language.is(value,Number))if(value==null||value==='')value=NaN;else value=Number(value);weavejs.core.LinkableNumber.base(this,'setSessionState',value)};
weavejs.core.LinkableNumber.prototype.sessionStateEquals=function(otherSessionState){if(this._sessionStateInternal==null)this._sessionStateInternal=this._sessionStateExternal=NaN;if(isNaN(this._sessionStateInternal)&&isNaN(otherSessionState))return true;return this._sessionStateInternal==otherSessionState};Object.defineProperties(weavejs.core.LinkableNumber.prototype,{value:{get:function(){return this._sessionStateExternal},set:function(value){this.setSessionState(value)}}});
weavejs.core.LinkableNumber.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableNumber',qName:'weavejs.core.LinkableNumber'}]};goog.provide('weavejs.core.LinkableSynchronizer');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkableSynchronizer=function(){this.primaryPath=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this.setPrimaryPath,this,'setPrimaryPath'));this.secondaryPath=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this.setSecondaryPath,this,'setSecondaryPath'));this.primaryTransform=Weave.linkableChild(this,new weavejs.core.LinkableFunction(null,false,[weavejs.core.LinkableSynchronizer.VAR_STATE,
weavejs.core.LinkableSynchronizer.VAR_PRIMARY,weavejs.core.LinkableSynchronizer.VAR_SECONDARY]),org.apache.flex.utils.Language.closure(this.handlePrimaryTransform,this,'handlePrimaryTransform'));this.secondaryTransform=Weave.linkableChild(this,new weavejs.core.LinkableFunction(null,false,[weavejs.core.LinkableSynchronizer.VAR_STATE,weavejs.core.LinkableSynchronizer.VAR_PRIMARY,weavejs.core.LinkableSynchronizer.VAR_SECONDARY]),org.apache.flex.utils.Language.closure(this.handleSecondaryTransform,this,
'handleSecondaryTransform'));this.primaryWatcher=Weave.disposableChild(this,new weavejs.core.LinkableWatcher(null,org.apache.flex.utils.Language.closure(this.synchronize,this,'synchronize')));this.secondaryWatcher=Weave.disposableChild(this,new weavejs.core.LinkableWatcher(null,org.apache.flex.utils.Language.closure(this.synchronize,this,'synchronize')));this._callbacks=Weave.getCallbacks(this);this._callbacks.addImmediateCallback(null,org.apache.flex.utils.Language.closure(this.selfCallback,this,
'selfCallback'))};weavejs.core.LinkableSynchronizer.VAR_STATE='state';weavejs.core.LinkableSynchronizer.VAR_PRIMARY='primary';weavejs.core.LinkableSynchronizer.VAR_SECONDARY='secondary';weavejs.core.LinkableSynchronizer.prototype.primaryPath;weavejs.core.LinkableSynchronizer.prototype.secondaryPath;weavejs.core.LinkableSynchronizer.prototype.primaryTransform;weavejs.core.LinkableSynchronizer.prototype.secondaryTransform;weavejs.core.LinkableSynchronizer.prototype.primaryWatcher;weavejs.core.LinkableSynchronizer.prototype.secondaryWatcher;
weavejs.core.LinkableSynchronizer.prototype.setPrimaryPath=function(){this.primaryWatcher.targetPath=org.apache.flex.utils.Language.as(this.primaryPath.getSessionState(),Array)};weavejs.core.LinkableSynchronizer.prototype.setSecondaryPath=function(){this.secondaryWatcher.targetPath=org.apache.flex.utils.Language.as(this.secondaryPath.getSessionState(),Array)};weavejs.core.LinkableSynchronizer.prototype._callbacks;weavejs.core.LinkableSynchronizer.prototype._delayedSynchronize=false;weavejs.core.LinkableSynchronizer.prototype._primary;
weavejs.core.LinkableSynchronizer.prototype._secondary;weavejs.core.LinkableSynchronizer.prototype.selfCallback=function(){if(this._delayedSynchronize)this.synchronize()};
weavejs.core.LinkableSynchronizer.prototype.synchronize=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;return}this._delayedSynchronize=false;var primary=this.primaryWatcher.target;var secondary=this.secondaryWatcher.target;if(this._primary!=primary||this._secondary!=secondary){if(this._primary)Weave.getCallbacks(this._primary).removeCallback(this,org.apache.flex.utils.Language.closure(this.primaryCallback,this,'primaryCallback'));if(this._secondary)Weave.getCallbacks(this._secondary).removeCallback(this,
org.apache.flex.utils.Language.closure(this.secondaryCallback,this,'secondaryCallback'));this._primary=primary;this._secondary=secondary;if(primary&&secondary){Weave.getCallbacks(this._secondary).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.secondaryCallback,this,'secondaryCallback'));Weave.getCallbacks(this._primary).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.primaryCallback,this,'primaryCallback'));if(!this.primaryTransform.value&&this.secondaryTransform.value)this.secondaryCallback();
else this.primaryCallback()}}};weavejs.core.LinkableSynchronizer.prototype.handlePrimaryTransform=function(){if(!this._callbacks.callbacksAreDelayed&&this._primary&&this._secondary)this.primaryCallback()};weavejs.core.LinkableSynchronizer.prototype.handleSecondaryTransform=function(){if(!this._callbacks.callbacksAreDelayed&&this._primary&&this._secondary)this.secondaryCallback()};
weavejs.core.LinkableSynchronizer.prototype.primaryCallback=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;this._callbacks.triggerCallbacks();return}if(this.primaryTransform.value)try{var state=Weave.getState(this._primary);var transformedState=this.primaryTransform.apply(null,[state,this._primary,this._secondary]);Weave.setState(this._secondary,transformedState,true)}catch(e){weavejs.util.JS.error('Error evaluating primaryTransform',e)}else if(!this.secondaryTransform.value)Weave.copyState(this._primary,
this._secondary)};
weavejs.core.LinkableSynchronizer.prototype.secondaryCallback=function(){if(this._callbacks.callbacksAreDelayed){this._delayedSynchronize=true;this._callbacks.triggerCallbacks();return}if(this.secondaryTransform.value)try{var state=Weave.getState(this._secondary);var transformedState=this.secondaryTransform.apply(null,[state,this._primary,this._secondary]);Weave.setState(this._primary,transformedState,true)}catch(e){weavejs.util.JS.error('Error evaluating secondaryTransform',e)}else if(!this.primaryTransform.value)Weave.copyState(this._secondary,this._primary)};
weavejs.core.LinkableSynchronizer.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableSynchronizer',qName:'weavejs.core.LinkableSynchronizer'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.util.BackwardsCompatibility');weavejs.util.BackwardsCompatibility=function(){};
weavejs.util.BackwardsCompatibility.updateSessionState=function(state){var key;if(!weavejs.api.core.DynamicState.isDynamicStateArray(state)){if(typeof state==='object')for(key in state)state[key]=weavejs.util.BackwardsCompatibility.updateSessionState(state[key]);return state}var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var typedState=foreachiter0_target[foreachiter0];var className=typedState[weavejs.api.core.DynamicState.CLASS_NAME];if(!weavejs.util.BackwardsCompatibility.isDeprecatedClass(className))continue;
if(!weavejs.util.BackwardsCompatibility.classLookup[className]){typedState[weavejs.api.core.DynamicState.CLASS_NAME]=Weave.className(weavejs.core.LinkableVariable);continue}typedState[weavejs.api.core.DynamicState.CLASS_NAME]=Weave.className(weavejs.core.LinkableHashMap);var classNameState=weavejs.api.core.DynamicState.create('class',Weave.className(weavejs.core.LinkableString),className);var childState=typedState[weavejs.api.core.DynamicState.SESSION_STATE];if(weavejs.api.core.DynamicState.isDynamicStateArray(childState))childState.unshift(classNameState);
else{var typedChildState=[classNameState];var childStateKeys=weavejs.util.JS.objectKeys(childState).sort();var foreachiter1_target=childStateKeys;for(var foreachiter1 in foreachiter1_target){key=foreachiter1_target[foreachiter1];var propType=weavejs.util.BackwardsCompatibility.classLookup[className][key];if(propType.indexOf('weave.api.')==0){var name=propType.split('::').pop();if(name.charAt(0)==='I'&&name.charAt(1)===name.charAt(1).toUpperCase()){name=name.substr(1);var classDef=Weave.getDefinition(name);
if(classDef)propType=Weave.className(classDef)}}if(propType)typedChildState.push(weavejs.api.core.DynamicState.create(key,propType,weavejs.util.BackwardsCompatibility.updateSessionState(childState[key])))}childState=typedChildState}typedState[weavejs.api.core.DynamicState.SESSION_STATE]=weavejs.util.BackwardsCompatibility.updateSessionState(childState)}return state};
weavejs.util.BackwardsCompatibility.isDeprecatedClass=function(qname){return weavejs.util.BackwardsCompatibility.classLookup.hasOwnProperty(qname)&&Weave.getDefinition(qname)==null};
weavejs.util.BackwardsCompatibility.classLookup={'weave.core::CallbackCollection':null,'weave.core::ChildListCallbackInterface':{'lastObjectAdded':'weave.api.core::ILinkableObject','lastObjectRemoved':'weave.api.core::ILinkableObject'},'weave.core::EditorManager':null,'weave.core::ErrorManager':null,'weave.core::GlobalObjectReference':null,'weave.core::LinkableBoolean':null,'weave.core::LinkableCallbackScript':{'delayWhileBusy':'weave.core::LinkableBoolean','groupedCallback':'weave.core::LinkableBoolean',
'script':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap'},'weave.core::LinkableDisplayObject':{'children':'weave.api.core::ILinkableHashMap','className':'weave.core::LinkableString','events':'weave.core::UntypedLinkableVariable','parentLDO':'weave.core::LinkableDisplayObject','properties':'weave.core::UntypedLinkableVariable'},'weave.core::LinkableDynamicDisplayObject':null,'weave.core::LinkableDynamicObject':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.core::LinkableFile':null,'weave.core::LinkableFunction':null,'weave.core::LinkableHashMap':{'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.core::LinkableNumber':null,'weave.core::LinkablePromise':null,'weave.core::LinkableString':null,'weave.core::LinkableSynchronizer':{'primaryPath':'weave.core::LinkableVariable','primaryTransform':'weave.core::LinkableFunction','secondaryPath':'weave.core::LinkableVariable','secondaryTransform':'weave.core::LinkableFunction'},
'weave.core::LinkableVariable':null,'weave.core::LinkableWatcher':{'target':'weave.api.core::ILinkableObject'},'weave.core::LinkableWrapper':{'objectType':'weave.core::LinkableString','properties':'weave.core::UntypedLinkableVariable'},'weave.core::LinkableXML':null,'weave.core::ProgressIndicator':null,'weave.core::SessionStateLog':{'enableLogging':'weave.core::LinkableBoolean'},'weave.core::UntypedLinkableVariable':null,'weave.data.AttributeColumns::AbstractAttributeColumn':null,'weave.data.AttributeColumns::AlwaysDefinedColumn':{'defaultValue':'weave.core::UntypedLinkableVariable',
'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::BinnedColumn':{'binningDefinition':'weave.data.BinningDefinitions::DynamicBinningDefinition','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::CSVColumn':{'data':'weave.core::LinkableVariable','keyType':'weave.core::LinkableString','numericMode':'weave.core::LinkableBoolean','title':'weave.core::LinkableString'},'weave.data.AttributeColumns::ColorColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn',
'ramp':'weave.primitives::ColorRamp','rampCenterAtZero':'weave.core::LinkableBoolean','recordColors':'weave.core::LinkableVariable'},'weave.data.AttributeColumns::CombinedColumn':{'columns':'weave.api.core::ILinkableHashMap','useFirstColumnMetadata':'weave.core::LinkableBoolean'},'weave.data.AttributeColumns::DateColumn':null,'weave.data.AttributeColumns::DynamicColumn':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::EquationColumn':{'equation':'weave.core::LinkableString',
'filterByKeyType':'weave.core::LinkableBoolean','metadata':'weave.core::UntypedLinkableVariable','variables':'weave.core::LinkableHashMap'},'weave.data.AttributeColumns::ExtendedDynamicColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::FilteredColumn':{'filter':'weave.api.data::IDynamicKeyFilter','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::GeometryColumn':null,'weave.data.AttributeColumns::ImageColumn':{'internalObject':'weave.api.core::ILinkableObject',
'target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::KeyColumn':{'keyType':'weave.core::LinkableString'},'weave.data.AttributeColumns::NormalizedColumn':{'internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn','max':'weave.core::LinkableNumber','min':'weave.core::LinkableNumber'},'weave.data.AttributeColumns::NumberColumn':null,'weave.data.AttributeColumns::ProxyColumn':{'internalNonProxyColumn':'weave.api.data::IAttributeColumn'},'weave.data.AttributeColumns::ReferencedColumn':{'dataSourceName':'weave.core::LinkableString',
'metadata':'weave.core::LinkableVariable'},'weave.data.AttributeColumns::ReprojectedGeometryColumn':{'boundingBoxCallbacks':'weave.api.core::ICallbackCollection','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn','projectionSRS':'weave.core::LinkableString'},'weave.data.AttributeColumns::SecondaryKeyNumColumn':null,'weave.data.AttributeColumns::SortedColumn':{'ascending':'weave.core::LinkableBoolean','internalDynamicColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.AttributeColumns::SortedIndexColumn':{'internalObject':'weave.api.core::ILinkableObject',
'target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::StreamedGeometryColumn':{'boundingBoxCallbacks':'weave.api.core::ICallbackCollection'},'weave.data.AttributeColumns::StringColumn':null,'weave.data.AttributeColumns::StringLookup':null,'weave.data.AttributeColumns::StringLookupColumn':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.AttributeColumns::WordCountColumn':{'wordData':'weave.core::LinkableString'},'weave.data.BinClassifiers::NumberClassifier':{'max':'weave.core::LinkableNumber',
'maxInclusive':'weave.core::LinkableBoolean','min':'weave.core::LinkableNumber','minInclusive':'weave.core::LinkableBoolean'},'weave.data.BinClassifiers::SingleValueClassifier':null,'weave.data.BinClassifiers::StringClassifier':null,'weave.data.BinningDefinitions::AbstractBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::CategoryBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::CustomSplitBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber','splitValues':'weave.core::LinkableString'},'weave.data.BinningDefinitions::DynamicBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.BinningDefinitions::EqualIntervalBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','dataInterval':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::ExplicitBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.data.BinningDefinitions::NaturalJenksBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','numOfBins':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::QuantileBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','overrideBinNames':'weave.core::LinkableString',
'overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber','refQuantile':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::SimpleBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection','numberOfBins':'weave.core::LinkableNumber','overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.BinningDefinitions::StandardDeviationBinningDefinition':{'asyncResultCallbacks':'weave.api.core::ICallbackCollection',
'overrideBinNames':'weave.core::LinkableString','overrideInputMax':'weave.core::LinkableNumber','overrideInputMin':'weave.core::LinkableNumber'},'weave.data.DataSources::AbstractDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::AbstractDataSource_old':{'attributeHierarchy':'weave.core::LinkableXML','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::AnnotationDataSource':{'annotations':'weave.core::LinkableVariable','hierarchyRefresh':'weave.api.core::ICallbackCollection'},
'weave.data.DataSources::CKANDataSource':{'apiVersion':'weave.core::LinkableNumber','hierarchyRefresh':'weave.api.core::ICallbackCollection','showGroups':'weave.core::LinkableBoolean','showPackages':'weave.core::LinkableBoolean','showTags':'weave.core::LinkableBoolean','url':'weave.core::LinkableString','useDataStore':'weave.core::LinkableBoolean','useHttpPost':'weave.core::LinkableBoolean'},'weave.data.DataSources::CSVDataSource':{'csvData':'weave.core::LinkableVariable','delimiter':'weave.core::LinkableString',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','metadata':'weave.core::LinkableVariable','url':'weave.core::LinkableFile'},'weave.data.DataSources::CachedDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','state':'weave.core::LinkableVariable','type':'weave.core::LinkableString'},'weave.data.DataSources::CensusApi':null,'weave.data.DataSources::CensusDataSource':{'apiKey':'weave.core::LinkableString',
'dataSet':'weave.core::LinkableString','geographicFilters':'weave.core::LinkableVariable','geographicScope':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyType':'weave.core::LinkableString'},'weave.data.DataSources::DBFDataSource':{'dbfUrl':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','projection':'weave.core::LinkableString','shpUrl':'weave.core::LinkableString'},
'weave.data.DataSources::FREDDataSource':{'apiKey':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::GeoJSONDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyProperty':'weave.core::LinkableString','keyType':'weave.core::LinkableString','projection':'weave.core::LinkableString','url':'weave.core::LinkableFile'},'weave.data.DataSources::GraphMLDataSource':{'edgeKeyPropertyName':'weave.core::LinkableString','edgeKeyType':'weave.core::LinkableString',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','nodeKeyPropertyName':'weave.core::LinkableString','nodeKeyType':'weave.core::LinkableString','sourceUrl':'weave.core::LinkableString'},'weave.data.DataSources::HealthIndicatorsDataSource':{'apiKey':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.DataSources::IDataSource_old':{'attributeHierarchy':'weave.core::LinkableXML'},'weave.data.DataSources::SocrataDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection',
'jsonCache':'weave.services::JsonCache','showCategories':'weave.core::LinkableBoolean','showTags':'weave.core::LinkableBoolean','showViewTypes':'weave.core::LinkableBoolean','url':'weave.core::LinkableString'},'weave.data.DataSources::TransposedDataSource':{'attributeHierarchy':'weave.core::LinkableXML','columns':'weave.api.core::ILinkableHashMap','filteredKeySet':'weave.api.data::IFilteredKeySet','hierarchyRefresh':'weave.api.core::ICallbackCollection','metadata':'weave.api.core::ILinkableHashMap'},
'weave.data.DataSources::WFSDataSource':{'attributeHierarchy':'weave.core::LinkableXML','hierarchyRefresh':'weave.api.core::ICallbackCollection','swapXY':'weave.core::LinkableBoolean','url':'weave.core::LinkableString','useURLsInGetCapabilities':'weave.core::LinkableBoolean'},'weave.data.DataSources::WeaveAnalystDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','inputKeyFilter':'weave.core::LinkableDynamicObject','inputs':'weave.core::LinkableHashMap','outputKeyColumn':'weave.core::LinkableString',
'outputKeyType':'weave.core::LinkableString','scriptName':'weave.core::LinkableString','url':'weave.core::LinkableString'},'weave.data.DataSources::WeaveDataSource':{'attributeHierarchy':'weave.core::LinkableXML','entityCache':'weave.services::EntityCache','hierarchyRefresh':'weave.api.core::ICallbackCollection','hierarchyURL':'weave.core::LinkableString','rootId':'weave.core::LinkableVariable','url':'weave.core::LinkableString'},'weave.data.DataSources::XLSDataSource':{'attributeHierarchy':'weave.core::LinkableXML',
'hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColName':'weave.core::LinkableString','keyType':'weave.core::LinkableString','url':'weave.core::LinkableString'},'weave.data.KeySets::ColumnDataFilter':{'column':'weave.data.AttributeColumns::DynamicColumn','enabled':'weave.core::LinkableBoolean','includeMissingKeyTypes':'weave.core::LinkableBoolean','values':'weave.core::LinkableVariable'},'weave.data.KeySets::DynamicKeyFilter':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.data.KeySets::DynamicKeySet':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.data.KeySets::FilteredKeySet':{'keyFilter':'weave.api.data::IDynamicKeyFilter'},'weave.data.KeySets::KeyFilter':{'excluded':'weave.data.KeySets::KeySet','filters':'weave.api.core::ILinkableHashMap','includeMissingKeyTypes':'weave.core::LinkableBoolean','includeMissingKeys':'weave.core::LinkableBoolean','included':'weave.data.KeySets::KeySet'},'weave.data.KeySets::KeySet':{'keyCallbacks':'weave.api.data::IKeySetCallbackInterface'},
'weave.data.KeySets::KeySetCallbackInterface':null,'weave.data.KeySets::KeySetUnion':{'busyStatus':'weave.api.core::ICallbackCollection'},'weave.data.KeySets::SortedKeySet':null,'weave.data.Transforms::ForeignDataMappingTransform':{'dataColumns':'weave.api.core::ILinkableHashMap','hierarchyRefresh':'weave.api.core::ICallbackCollection','keyColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.Transforms::GroupedDataTransform':{'aggregationModes':'weave.api.core::ILinkableVariable','dataColumns':'weave.api.core::ILinkableHashMap',
'groupByColumn':'weave.data.AttributeColumns::DynamicColumn','groupKeyType':'weave.core::LinkableString','hierarchyRefresh':'weave.api.core::ICallbackCollection'},'weave.data.Transforms::PartitionDataTransform':{'hierarchyRefresh':'weave.api.core::ICallbackCollection','inputColumns':'weave.api.core::ILinkableHashMap','partitionColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.data.hierarchy::EntityNodeSearch':null,'weave.data.hierarchy::GlobalColumnDataSource':{'hierarchyRefresh':'weave.api.core::ICallbackCollection'},
'weave.data.hierarchy::WeaveRootDataTreeNode':{'dependency':'weave.api.core::ILinkableObject'},'weave.data::CSVParser':null,'weave.editors.managers::AddDataSourcePanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.editors.managers::DataSourceManager':{'browser':'weave.editors::DynamicColumnEditor','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors.managers::EditDataGridPanel':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors::DiscreteValuesDataFilterEditor':{'filter':'weave.data.KeySets::ColumnDataFilter','labelFunction':'weave.core::LinkableFunction','layoutMode':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean',
'showToggle':'weave.core::LinkableBoolean','showToggleLabel':'weave.core::LinkableBoolean','thumbColor':'weave.core::LinkableNumber'},'weave.editors::DynamicColumnEditor':{'explorer':'weave.ui::HierarchyExplorer','referencedColumn':'weave.data.AttributeColumns::ReferencedColumn','target':'weave.data.AttributeColumns::DynamicColumn'},'weave.editors::ForeignDataMappingTransformEditor':{'dataColumnsEditor':'weave.ui::ColumnListComponent','keyColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::GroupedDataTransformEditor':{'dataColumnsEditor':'weave.ui::ColumnListComponent',
'groupByColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::NumericRangeDataFilterEditor':{'discreteValueLabelInterval':'weave.core::LinkableNumber','filter':'weave.data.KeySets::ColumnDataFilter','forceDiscreteValues':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','playStep':'weave.core::LinkableNumber','showMaxThumb':'weave.core::LinkableBoolean','showMinThumb':'weave.core::LinkableBoolean','showPlayButton':'weave.core::LinkableBoolean','showToggle':'weave.core::LinkableBoolean',
'showToggleLabel':'weave.core::LinkableBoolean','thumbColor':'weave.core::LinkableNumber'},'weave.editors::PartitionDataTransformEditor':{'inputColumnsEditor':'weave.ui::ColumnListComponent','partitionColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::PrincipalComponentEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.editors::SessionHistorySlider':{'squashActive':'weave.core::LinkableBoolean'},'weave.editors::TransposedDataSourceEditor':{'columns':'weave.api.core::ILinkableHashMap','columnsEditor':'weave.ui::ColumnListComponent','metadata':'weave.api.core::ILinkableHashMap','metadataEditor':'weave.ui::ColumnListComponent',
'titleColumnEditor':'weave.ui::DynamicColumnComponent'},'weave.editors::WeavePropertiesEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.graphs::AbstractGraphAlgorithm':null,'weave.graphs::DynamicGraphAlgorithm':{'internalObject':'weave.api.graphs::IGraphAlgorithm'},
'weave.graphs::ForceDirectedLayout':null,'weave.graphs::GridForceDirectedLayout':null,'weave.graphs::KamadaKawaiLayout':null,'weave.graphs::LargeGraphLayout':null,'weave.primitives::ColorRamp':null,'weave.primitives::LinkableBounds2D':null,'weave.primitives::LinkableNumberFormatter':{'decimalSeparatorFrom':'weave.core::LinkableString','decimalSeparatorTo':'weave.core::LinkableString','precision':'weave.core::LinkableNumber','rounding':'weave.core::LinkableString','thousandsSeparatorFrom':'weave.core::LinkableString',
'thousandsSeparatorTo':'weave.core::LinkableString','useNegativeSign':'weave.core::LinkableBoolean','useThousandsSeparator':'weave.core::LinkableBoolean'},'weave.primitives::ZoomBounds':null,'weave.radviz::AbstractLayoutAlgorithm':null,'weave.radviz::BruteForceLayoutAlgorithm':null,'weave.radviz::ClassDiscriminationLayoutAlgorithm':null,'weave.radviz::GreedyLayoutAlgorithm':null,'weave.radviz::IncrementalLayoutAlgorithm':null,'weave.radviz::NearestNeighborLayoutAlgorithm':null,'weave.radviz::RandomLayoutAlgorithm':{'iterations':'weave.core::LinkableNumber'},
'weave.services.wms::AbstractWMS':null,'weave.services.wms::CustomWMS':{'creditInfo':'weave.core::LinkableString','maxZoom':'weave.core::LinkableNumber','tileBounds':'weave.core::LinkableVariable','tileProjectionSRS':'weave.core::LinkableString','wmsURL':'weave.core::LinkableString'},'weave.services.wms::ModestMapsWMS':{'providerName':'weave.core::LinkableString'},'weave.services.wms::OnEarthProvider':null,'weave.services.wms::WMSTile':null,'weave.services::AMF3Servlet':null,'weave.services::AsyncInvocationQueue':null,
'weave.services::EntityCache':null,'weave.services::JsonCache':null,'weave.services::LocalAsyncService':null,'weave.services::Servlet':null,'weave.services::WFSServlet':null,'weave.services::WeaveDataServlet':null,'weave.services::WeaveRServlet':null,'weave.services::WebServiceWrapper':null,'weave.ui.CustomDataGrid::IFilterComponent':null,'weave.ui.CustomDataGrid::SearchFilterComponent':{'strToSearch':'weave.core::LinkableString'},'weave.ui.CustomDataGrid::SliderFilterComponent':{'maximum':'weave.core::LinkableNumber',
'minimum':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::ClusteringCollection':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::DataMiningPlatter':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','columns':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputVariables':'weave.api.core::ILinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::FuzzyKMeansClustering':{'inputColumns':'weave.core::LinkableHashMap'},'weave.ui.DataMiningEditors::FuzzyKMeansClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','fkMeansColumns':'weave.ui::ColumnListComponent','fuzzyKMeans':'weave.ui.DataMiningEditors::FuzzyKMeansClustering','inputColumns':'weave.core::LinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::KMeansClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','kMeansColumns':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::PamClusteringEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumns':'weave.core::LinkableHashMap','kMeansColumns':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.DataMiningEditors::PartitionAroundMedoidsClustering':{'inputColumns':'weave.core::LinkableHashMap'},'weave.ui.collaboration::CollaborationEditor':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.collaboration::CollaborationTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui.controlBars::VisTaskbar':{'taskbarLargeIconSize':'weave.core::LinkableNumber','taskbarShrinkGrow':'weave.core::LinkableBoolean','taskbarSmallIconSize':'weave.core::LinkableNumber'},'weave.ui::AttributeMenuTool':{'alwaysShowPrompt':'weave.core::LinkableBoolean','autoPlayRepeat':'weave.core::LinkableBoolean',
'buttonRadius':'weave.core::LinkableNumber','choices':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','layoutMode':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString','selectedAttribute':'weave.core::LinkableString',
'showPlayButton':'weave.core::LinkableBoolean','targetAttribute':'weave.core::LinkableVariable','targetToolPath':'weave.core::LinkableVariable','useChoiceIndex':'weave.core::LinkableBoolean','zOrder':'weave.core::LinkableNumber'},'weave.ui::AttributeSelectorPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','editor':'weave.editors::DynamicColumnEditor','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::BasicLinkableLayoutManager':null,'weave.ui::BinningDefinitionEditor':{'_simple':'weave.data.BinningDefinitions::SimpleBinningDefinition'},'weave.ui::CirclePlotterSettings':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel',
'enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::CirclePlotter','zOrder':'weave.core::LinkableNumber'},'weave.ui::ColorController':{'binEditor':'weave.ui::BinningDefinitionEditor','buttonRadius':'weave.core::LinkableNumber','cRampEditor':'weave.ui::ColorRampEditor','closeable':'weave.core::LinkableBoolean',
'colorOverrideEditor':'weave.ui::ColorOverrideEditor','controlPanel':'weave.ui::ControlPanel','dataColumnComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::ColorOverrideEditor':{'recordColors':'weave.core::LinkableVariable'},'weave.ui::ColorRampEditor':{'colorRamp':'weave.primitives::ColorRamp',
'colorRampList':'weave.ui::ColorRampList'},'weave.ui::ColorRampList':{'colorRamp':'weave.primitives::ColorRamp'},'weave.ui::ColumnListComponent':{'hashMap':'weave.api.core::ILinkableHashMap'},'weave.ui::ControlPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::DataFilterTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','editor':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filter':'weave.core::LinkableDynamicObject','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::DimensionDropList':{'hashMap':'weave.core::LinkableHashMap'},'weave.ui::DraggablePanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::DynamicColumnComponent':null,'weave.ui::EquationEditor':{'_EquationEditor_ColumnListComponent1':'weave.ui::ColumnListComponent',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicColumn':'weave.data.AttributeColumns::DynamicColumn','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::ErrorLogPanel':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::FlexibleLayout':null,'weave.ui::HierarchyExplorer':{'fileView':'weave.ui::WeaveTree','folderView':'weave.ui::WeaveTree'},'weave.ui::JRITextEditor':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotTALinkable':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},
'weave.ui::JavaScriptCanvas':{'elementId':'weave.core::LinkableString'},'weave.ui::NumberClassifierEditor':{'binClassifiers':'weave.data.BinningDefinitions::ExplicitBinningDefinition'},'weave.ui::ObjectViewer':{'treeView':'weave.ui::WeaveTree'},'weave.ui::PenTool':{'coords':'weave.core::LinkableString','drawingMode':'weave.core::LinkableString','lineAlpha':'weave.core::LinkableNumber','lineColor':'weave.core::LinkableNumber','lineWidth':'weave.core::LinkableNumber','polygonFillAlpha':'weave.core::LinkableNumber',
'polygonFillColor':'weave.core::LinkableNumber'},'weave.ui::ProbeToolTipEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','headerList':'weave.ui::ColumnListComponent','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::ProbeToolTipWindow':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicKeySet':'weave.core::LinkableDynamicObject','editor':'weave.ui::ProbeToolTipEditor','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','htmlFormatter':'weave.core::LinkableFunction','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','useHtmlText':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::RTextEditor':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','plotTALinkable':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.ui::RecordDataTable':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::SchafersMissingDataTool':{'assignTALinkable':'weave.core::LinkableString','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputColumnList':'weave.ui::ColumnListComponent','inputTALinkable':'weave.core::LinkableString',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','outputTALinkable':'weave.core::LinkableString','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.ui::SelectionManager':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.ui::SelectionSelector':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllRecordsOption':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::SessionNavigator':{'rootObject':'weave.api.core::ILinkableObject'},
'weave.ui::SessionStateEditor':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','sessionNav':'weave.ui::SessionNavigator','zOrder':'weave.core::LinkableNumber'},'weave.ui::SessionStateMenuTool':{'alwaysShowPrompt':'weave.core::LinkableBoolean',
'autoRecord':'weave.core::LinkableBoolean','buttonRadius':'weave.core::LinkableNumber','choices':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','layoutMode':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean',
'minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','promptText':'weave.core::LinkableString','selectedChoice':'weave.core::LinkableString',
'showPlayButton':'weave.core::LinkableBoolean','targets':'weave.core::LinkableHashMap','thumbColor':'weave.core::LinkableNumber','zOrder':'weave.core::LinkableNumber'},'weave.ui::SubsetManager':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::SubsetSelector':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','displayRecordInfo':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllRecordsOption':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','prompt':'weave.core::LinkableString',
'sliderMode':'weave.core::LinkableBoolean','zOrder':'weave.core::LinkableNumber'},'weave.ui::TextTool':{'backgroundAlpha':'weave.core::LinkableNumber','borderColor':'weave.core::LinkableNumber','borderThickness':'weave.core::LinkableNumber','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','cornerRadius':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','htmlText':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','padding':'weave.core::LinkableNumber','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::TranslationPanel':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'zOrder':'weave.core::LinkableNumber'},'weave.ui::UITest':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::UITestBitmapText':{'buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.ui::VariableListController':{'dynamicObject':'weave.api.core::ILinkableDynamicObject','hashMap':'weave.api.core::ILinkableHashMap'},'weave.ui::WeavePodLayoutManager':{'scale':'weave.core::LinkableNumber'},
'weave.ui::WeaveTree':null,'weave.utils::AsyncSort':null,'weave.utils::GeometryStreamDecoder':{'metadataCallbacks':'weave.api.core::ICallbackCollection'},'weave.utils::LinkableTextFormat':{'bold':'weave.core::LinkableBoolean','color':'weave.core::LinkableNumber','font':'weave.core::LinkableString','italic':'weave.core::LinkableBoolean','size':'weave.core::LinkableNumber','underline':'weave.core::LinkableBoolean'},'weave.utils::ShpFileReader':null,'weave.utils::SpatialIndex':null,'weave.utils::VisToolGroup':{'colorColumn':'weave.api.data::IColumnWrapper',
'probeKeySet':'weave.api.data::IDynamicKeySet','selectionKeySet':'weave.api.data::IDynamicKeySet','subsetKeyFilter':'weave.api.data::IDynamicKeyFilter'},'weave.visualization.layers.filters::LinkableDropShadowFilter':{'alpha':'weave.core::LinkableNumber','angle':'weave.core::LinkableNumber','blurX':'weave.core::LinkableNumber','blurY':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','distance':'weave.core::LinkableNumber','strength':'weave.core::LinkableNumber'},'weave.visualization.layers.filters::LinkableGlowFilter':{'alpha':'weave.core::LinkableNumber',
'blurX':'weave.core::LinkableNumber','blurY':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','strength':'weave.core::LinkableNumber'},'weave.visualization.layers::InteractionController':{'defaultDragMode':'weave.core::LinkableString','pan':'weave.core::LinkableString','probe':'weave.core::LinkableString','select':'weave.core::LinkableString','selectAdd':'weave.core::LinkableString','selectAll':'weave.core::LinkableString','selectRemove':'weave.core::LinkableString','zoom':'weave.core::LinkableString',
'zoomIn':'weave.core::LinkableString','zoomOut':'weave.core::LinkableString','zoomToExtent':'weave.core::LinkableString'},'weave.visualization.layers::InteractiveVisualization':{'enableProbe':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean','enableZoomAndPan':'weave.core::LinkableBoolean','plotManager':'weave.visualization.layers::PlotManager','zoomFactor':'weave.core::LinkableNumber'},'weave.visualization.layers::LayerSettings':{'alpha':'weave.core::LinkableNumber','alwaysRenderSelection':'weave.core::LinkableBoolean',
'maxVisibleScale':'weave.core::LinkableNumber','minVisibleScale':'weave.core::LinkableNumber','probeFilter':'weave.api.data::IDynamicKeyFilter','selectable':'weave.core::LinkableBoolean','selectionFilter':'weave.api.data::IDynamicKeyFilter','visible':'weave.core::LinkableBoolean'},'weave.visualization.layers::LinkableEventListener':{'event':'weave.core::LinkableString','script':'weave.core::LinkableFunction','target':'weave.core::LinkableDynamicObject'},'weave.visualization.layers::PlotManager':{'enableAutoZoomToExtent':'weave.core::LinkableBoolean',
'enableAutoZoomToSelection':'weave.core::LinkableBoolean','enableFixedAspectRatio':'weave.core::LinkableBoolean','includeNonSelectableLayersInAutoZoom':'weave.core::LinkableBoolean','layerSettings':'weave.core::LinkableHashMap','marginBottom':'weave.core::LinkableString','marginBottomNumber':'weave.core::LinkableNumber','marginLeft':'weave.core::LinkableString','marginLeftNumber':'weave.core::LinkableNumber','marginRight':'weave.core::LinkableString','marginRightNumber':'weave.core::LinkableNumber',
'marginTop':'weave.core::LinkableString','marginTopNumber':'weave.core::LinkableNumber','maxZoomLevel':'weave.core::LinkableNumber','minScreenSize':'weave.core::LinkableNumber','minZoomLevel':'weave.core::LinkableNumber','overrideXMax':'weave.core::LinkableNumber','overrideXMin':'weave.core::LinkableNumber','overrideYMax':'weave.core::LinkableNumber','overrideYMin':'weave.core::LinkableNumber','plotters':'weave.core::LinkableHashMap','zoomBounds':'weave.primitives::ZoomBounds'},'weave.visualization.layers::PlotTask':null,
'weave.visualization.layers::SimpleInteractiveVisualization':{'axesAlpha':'weave.core::LinkableNumber','axesColor':'weave.core::LinkableNumber','axesThickness':'weave.core::LinkableNumber','bottomMarginClickCallbacks':'weave.api.core::ICallbackCollection','bottomMarginColumn':'weave.api.data::IAttributeColumn','enableAutoZoomXToNiceNumbers':'weave.core::LinkableBoolean','enableAutoZoomYToNiceNumbers':'weave.core::LinkableBoolean','enableProbe':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean',
'enableZoomAndPan':'weave.core::LinkableBoolean','gridLineAlpha':'weave.core::LinkableNumber','gridLineColor':'weave.core::LinkableNumber','gridLineThickness':'weave.core::LinkableNumber','leftMarginClickCallbacks':'weave.api.core::ICallbackCollection','leftMarginColumn':'weave.api.data::IAttributeColumn','plotManager':'weave.visualization.layers::PlotManager','rightMarginClickCallbacks':'weave.api.core::ICallbackCollection','rightMarginColumn':'weave.api.data::IAttributeColumn','topMarginClickCallbacks':'weave.api.core::ICallbackCollection',
'topMarginColumn':'weave.api.data::IAttributeColumn','zoomFactor':'weave.core::LinkableNumber'},'weave.visualization.layers::Visualization':{'plotManager':'weave.visualization.layers::PlotManager'},'weave.visualization.plotters.styles::DynamicFillStyle':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},'weave.visualization.plotters.styles::DynamicLineStyle':{'internalObject':'weave.api.core::ILinkableObject','target':'weave.api.core::ILinkableObject'},
'weave.visualization.plotters.styles::ExtendedFillStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','enableMissingDataGradient':'weave.core::LinkableBoolean','imageURL':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters.styles::ExtendedLineStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','caps':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','joints':'weave.data.AttributeColumns::AlwaysDefinedColumn','miterLimit':'weave.data.AttributeColumns::AlwaysDefinedColumn','normalizedWeightColumn':'weave.data.AttributeColumns::NormalizedColumn','pixelHinting':'weave.data.AttributeColumns::AlwaysDefinedColumn','scaleMode':'weave.data.AttributeColumns::AlwaysDefinedColumn','weight':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters.styles::SolidFillStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean'},'weave.visualization.plotters.styles::SolidLineStyle':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','caps':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','enable':'weave.core::LinkableBoolean','joints':'weave.data.AttributeColumns::AlwaysDefinedColumn','miterLimit':'weave.data.AttributeColumns::AlwaysDefinedColumn','normalizedWeightColumn':'weave.data.AttributeColumns::NormalizedColumn',
'pixelHinting':'weave.data.AttributeColumns::AlwaysDefinedColumn','scaleMode':'weave.data.AttributeColumns::AlwaysDefinedColumn','weight':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::AbstractGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','sourceProjection':'weave.core::LinkableString',
'spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::AbstractPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::AnchorPlotter':{'anchorFillStyle':'weave.visualization.plotters.styles::SolidFillStyle','anchorLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','anchorRadius':'weave.core::LinkableNumber','barycenterFillStyle':'weave.visualization.plotters.styles::SolidFillStyle',
'barycenterLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','barycenterRadius':'weave.core::LinkableNumber','circleLineStyle':'weave.visualization.plotters.styles::SolidLineStyle','colorMap':'weave.primitives::ColorRamp','enableWedgeColoring':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','labelAngleRatio':'weave.core::LinkableNumber','showBarycenter':'weave.core::LinkableBoolean','showConvexHull':'weave.core::LinkableBoolean','showVoronoi':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection','unrestrictAnchors':'weave.core::LinkableBoolean','wordWrap':'weave.core::LinkableNumber'},'weave.visualization.plotters::AnchorPoint':{'classDiscriminationMetric':'weave.core::LinkableNumber','classType':'weave.core::LinkableString','polarRadians':'weave.core::LinkableNumber','radius':'weave.core::LinkableNumber','title':'weave.core::LinkableString','x':'weave.core::LinkableNumber','y':'weave.core::LinkableNumber'},'weave.visualization.plotters::AxisLabelPlotter':{'alignToDataMax':'weave.core::LinkableBoolean',
'alongXAxis':'weave.core::LinkableBoolean','angle':'weave.core::LinkableNumber','begin':'weave.core::LinkableNumber','color':'weave.core::LinkableNumber','end':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','hAlign':'weave.core::LinkableString','hideOverlappingText':'weave.core::LinkableBoolean','interval':'weave.core::LinkableNumber','labelFunction':'weave.core::LinkableFunction','maxWidth':'weave.core::LinkableNumber','offset':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection',
'text':'weave.data.AttributeColumns::DynamicColumn','textFormatAlign':'weave.core::LinkableString','vAlign':'weave.core::LinkableString','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber'},'weave.visualization.plotters::AxisPlotter':{'axisGridLineAlpha':'weave.core::LinkableNumber','axisGridLineColor':'weave.core::LinkableNumber','axisGridLineThickness':'weave.core::LinkableNumber','axisLabelDistance':'weave.core::LinkableNumber','axisLabelRelativeAngle':'weave.core::LinkableNumber',
'axisLineAlpha':'weave.core::LinkableNumber','axisLineColor':'weave.core::LinkableNumber','axisLineDataBounds':'weave.primitives::LinkableBounds2D','axisLineMaxValue':'weave.core::LinkableNumber','axisLineMinValue':'weave.core::LinkableNumber','axisLineThickness':'weave.core::LinkableNumber','axisTickAlpha':'weave.core::LinkableNumber','axisTickColor':'weave.core::LinkableNumber','axisTickLength':'weave.core::LinkableNumber','axisTickThickness':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet',
'forceTickCount':'weave.core::LinkableBoolean','labelDistanceIsVertical':'weave.core::LinkableBoolean','labelHorizontalAlign':'weave.core::LinkableString','labelNumberFormatter':'weave.primitives::LinkableNumberFormatter','labelTextAlignment':'weave.core::LinkableString','labelVerticalAlign':'weave.core::LinkableString','showAxisName':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','tickCountRequested':'weave.core::LinkableNumber','tickMaxValue':'weave.core::LinkableNumber',
'tickMinValue':'weave.core::LinkableNumber'},'weave.visualization.plotters::BackgroundTextPlotter':{'dependency':'weave.core::LinkableDynamicObject','filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection','textFormat':'weave.utils::LinkableTextFormat','textFunction':'weave.core::LinkableFunction'},'weave.visualization.plotters::BarChartLegendPlotter':{'chartColors':'weave.primitives::ColorRamp','colorIndicatesDirection':'weave.core::LinkableBoolean',
'columns':'weave.api.core::ILinkableHashMap','filteredKeySet':'weave.api.data::IFilteredKeySet','itemLabelFunction':'weave.core::LinkableFunction','legendTitleFunction':'weave.core::LinkableFunction','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxColumns':'weave.core::LinkableNumber','reverseOrder':'weave.core::LinkableBoolean','shapeSize':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::BoundsPlotter':{'fill':'weave.visualization.plotters.styles::SolidFillStyle',
'filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','xMaxData':'weave.data.AttributeColumns::DynamicColumn','xMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMinData':'weave.data.AttributeColumns::DynamicColumn','xMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','yMaxData':'weave.data.AttributeColumns::DynamicColumn','yMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'yMinData':'weave.data.AttributeColumns::DynamicColumn','yMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::CircleGlyphPlotter':{'absoluteValueColorEnabled':'weave.core::LinkableBoolean','absoluteValueColorMax':'weave.core::LinkableNumber','absoluteValueColorMin':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','defaultScreenRadius':'weave.core::LinkableNumber','destinationProjection':'weave.core::LinkableString',
'enabledSizeBy':'weave.core::LinkableBoolean','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber','minScreenRadius':'weave.core::LinkableNumber','screenRadius':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},
'weave.visualization.plotters::CirclePlotter':{'dataX':'weave.core::LinkableNumber','dataY':'weave.core::LinkableNumber','fillAlpha':'weave.core::LinkableNumber','fillColor':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','lineAlpha':'weave.core::LinkableNumber','lineColor':'weave.core::LinkableNumber','polygonVertexCount':'weave.core::LinkableNumber','radius':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection','thickness':'weave.core::LinkableNumber'},
'weave.visualization.plotters::ColorBinLegendPlotter':{'dynamicColorColumn':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','itemLabelFunction':'weave.core::LinkableFunction','legendTitleFunction':'weave.core::LinkableFunction','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxColumns':'weave.core::LinkableNumber','reverseOrder':'weave.core::LinkableBoolean','shapeSize':'weave.core::LinkableNumber','shapeType':'weave.core::LinkableString',
'spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::CompoundBarChartPlotter':{'barSpacing':'weave.core::LinkableNumber','chartColors':'weave.primitives::ColorRamp','colorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','colorIndicatesDirection':'weave.core::LinkableBoolean','errorIsRelative':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','groupBySortColumn':'weave.core::LinkableBoolean','groupingMode':'weave.core::LinkableString',
'heightColumns':'weave.core::LinkableHashMap','horizontalMode':'weave.core::LinkableBoolean','labelColor':'weave.core::LinkableNumber','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelDataCoordinate':'weave.core::LinkableNumber','labelFormatter':'weave.core::LinkableFunction','labelHorizontalAlign':'weave.core::LinkableString','labelMaxWidth':'weave.core::LinkableNumber','labelRelativeAngle':'weave.core::LinkableNumber','labelVerticalAlign':'weave.core::LinkableString','line':'weave.visualization.plotters.styles::SolidLineStyle',
'negativeErrorColumns':'weave.core::LinkableHashMap','positiveErrorColumns':'weave.core::LinkableHashMap','recordLabelColoring':'weave.core::LinkableBoolean','recordValueLabelColoring':'weave.core::LinkableBoolean','showLabels':'weave.core::LinkableBoolean','showValueLabels':'weave.core::LinkableBoolean','sortColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','stackedMissingDataGap':'weave.core::LinkableBoolean','valueLabelColor':'weave.core::LinkableNumber',
'valueLabelDataCoordinate':'weave.core::LinkableNumber','valueLabelHorizontalAlign':'weave.core::LinkableString','valueLabelMaxWidth':'weave.core::LinkableNumber','valueLabelRelativeAngle':'weave.core::LinkableNumber','valueLabelVerticalAlign':'weave.core::LinkableString','zoomToSubset':'weave.core::LinkableBoolean','zoomToSubsetBars':'weave.core::LinkableBoolean'},'weave.visualization.plotters::CompoundRadVizPlotter':{'alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','anchors':'weave.core::LinkableHashMap',
'colorMap':'weave.primitives::ColorRamp','columns':'weave.core::LinkableHashMap','currentAlgorithm':'weave.core::LinkableString','enableJitter':'weave.core::LinkableBoolean','enableWedgeColoring':'weave.core::LinkableBoolean','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','iterations':'weave.core::LinkableNumber','jitterLevel':'weave.core::LinkableNumber','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','localNormalization':'weave.core::LinkableBoolean',
'radiusColumn':'weave.data.AttributeColumns::DynamicColumn','radiusConstant':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::CustomGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','function_drawBackground':'weave.core::LinkableFunction','function_drawPlot':'weave.core::LinkableFunction',
'function_getBackgroundDataBounds':'weave.core::LinkableFunction','function_getDataBoundsFromRecordKey':'weave.core::LinkableFunction','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','vars':'weave.api.core::ILinkableHashMap','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::EquationPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection',
'tBegin':'weave.core::LinkableNumber','tEnd':'weave.core::LinkableNumber','tStep':'weave.core::LinkableNumber','xEquation':'weave.core::LinkableFunction','yEquation':'weave.core::LinkableFunction'},'weave.visualization.plotters::GaugePlotter':{'binningDefinition':'weave.data.BinningDefinitions::DynamicBinningDefinition','colorRamp':'weave.primitives::ColorRamp','filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::GeometryLabelPlotter':{'angle':'weave.data.AttributeColumns::AlwaysDefinedColumn','bold':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','font':'weave.data.AttributeColumns::AlwaysDefinedColumn','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn',
'hAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','hideOverlappingText':'weave.core::LinkableBoolean','italic':'weave.data.AttributeColumns::AlwaysDefinedColumn','maxWidth':'weave.core::LinkableNumber','size':'weave.data.AttributeColumns::AlwaysDefinedColumn','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','text':'weave.data.AttributeColumns::DynamicColumn','underline':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'vAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::GeometryPlotter':{'fill':'weave.visualization.plotters.styles::ExtendedFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn','iconSize':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::ExtendedLineStyle',
'pixellation':'weave.core::LinkableNumber','pointDataImageColumn':'weave.data.AttributeColumns::ImageColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','symbolPlotters':'weave.api.core::ILinkableHashMap','useFixedImageSize':'weave.core::LinkableBoolean','zOrderAscending':'weave.core::LinkableBoolean','zOrderColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::GeometryRelationPlotter':{'destinationKeyColumn':'weave.data.AttributeColumns::DynamicColumn',
'filteredKeySet':'weave.api.data::IFilteredKeySet','fontColor':'weave.core::LinkableNumber','fontSize':'weave.core::LinkableNumber','geometryColumn':'weave.data.AttributeColumns::ReprojectedGeometryColumn','lineWidth':'weave.core::LinkableNumber','negLineColor':'weave.core::LinkableNumber','posLineColor':'weave.core::LinkableNumber','showValue':'weave.core::LinkableBoolean','sourceKeyColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','valueColumn':'weave.data.AttributeColumns::DynamicColumn'},
'weave.visualization.plotters::GraphLabelPlotter':{'currentAlgorithm':'weave.core::LinkableString','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','labelColumn':'weave.data.AttributeColumns::DynamicColumn','layoutAlgorithm':'weave.api.graphs::IGraphAlgorithm','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'nodesColumn':'weave.data.AttributeColumns::DynamicColumn','radius':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::GraphPlotter':{'algorithmRunning':'weave.core::LinkableBoolean','alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','colorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','currentAlgorithm':'weave.core::LinkableString','drawCurvedLines':'weave.core::LinkableBoolean','edgeColorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeStyle':'weave.core::LinkableString','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','labelColumn':'weave.data.AttributeColumns::DynamicColumn','layoutAlgorithm':'weave.core::LinkableDynamicObject','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodesColumn':'weave.data.AttributeColumns::DynamicColumn','radius':'weave.core::LinkableNumber','shouldStop':'weave.core::LinkableBoolean','sizeColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::GridLinePlotter':{'bounds':'weave.primitives::LinkableBounds2D','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle',
'spatialCallbacks':'weave.api.core::ICallbackCollection','xInterval':'weave.core::LinkableNumber','xOffset':'weave.core::LinkableNumber','yInterval':'weave.core::LinkableNumber','yOffset':'weave.core::LinkableNumber'},'weave.visualization.plotters::Histogram2DPlotter':{'binColors':'weave.primitives::ColorRamp','colorColumn':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','showAverageColorData':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection','xBinnedColumn':'weave.data.AttributeColumns::BinnedColumn','xColumn':'weave.data.AttributeColumns::DynamicColumn','yBinnedColumn':'weave.data.AttributeColumns::BinnedColumn','yColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::HistogramPlotter':{'aggregationMethod':'weave.core::LinkableString','binnedColumn':'weave.data.AttributeColumns::BinnedColumn','columnToAggregate':'weave.data.AttributeColumns::DynamicColumn',
'drawPartialBins':'weave.core::LinkableBoolean','fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalMode':'weave.core::LinkableBoolean','internalColorColumn':'weave.data.AttributeColumns::ColorColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','showValueLabels':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','valueLabelColor':'weave.core::LinkableNumber','valueLabelHorizontalAlign':'weave.core::LinkableString',
'valueLabelMaxWidth':'weave.core::LinkableNumber','valueLabelRelativeAngle':'weave.core::LinkableNumber','valueLabelVerticalAlign':'weave.core::LinkableString'},'weave.visualization.plotters::ImageGlyphPlotter':{'alpha':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataInDegrees':'weave.core::LinkableBoolean','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString',
'filteredKeySet':'weave.api.data::IFilteredKeySet','imageSize':'weave.data.AttributeColumns::AlwaysDefinedColumn','imageURL':'weave.data.AttributeColumns::AlwaysDefinedColumn','reverseRotation':'weave.core::LinkableBoolean','rotation':'weave.data.AttributeColumns::DynamicColumn','rotationOffset':'weave.core::LinkableNumber','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::LineChartPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn',
'dataY':'weave.data.AttributeColumns::DynamicColumn','filteredKeySet':'weave.api.data::IFilteredKeySet','group':'weave.data.AttributeColumns::DynamicColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','order':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','useFilteredDataGaps':'weave.core::LinkableBoolean'},'weave.visualization.plotters::LinePlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle',
'spatialCallbacks':'weave.api.core::ICallbackCollection','x1Data':'weave.data.AttributeColumns::DynamicColumn','x1ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','x2Data':'weave.data.AttributeColumns::DynamicColumn','x2ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','y1Data':'weave.data.AttributeColumns::DynamicColumn','y1ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','y2Data':'weave.data.AttributeColumns::DynamicColumn','y2ScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},
'weave.visualization.plotters::MeterPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::OldParallelCoordinatesPlotter':{'columns':'weave.core::LinkableHashMap','curveType':'weave.core::LinkableString','enableGroupBy':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','groupBy':'weave.data.AttributeColumns::DynamicColumn',
'groupKeyType':'weave.core::LinkableString','lineStyle':'weave.visualization.plotters.styles::ExtendedLineStyle','normalize':'weave.core::LinkableBoolean','shapeBorderAlpha':'weave.core::LinkableNumber','shapeBorderColor':'weave.core::LinkableNumber','shapeBorderThickness':'weave.core::LinkableNumber','shapeSize':'weave.core::LinkableNumber','shapeToDraw':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','xColumns':'weave.core::LinkableHashMap','xData':'weave.data.AttributeColumns::DynamicColumn',
'xValues':'weave.core::LinkableString','yData':'weave.data.AttributeColumns::DynamicColumn','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::PieChartHistogramPlotter':{'_beginRadians':'weave.data.AttributeColumns::EquationColumn','_binLookup':'weave.data.AttributeColumns::StringLookupColumn','_binLookupStats':'weave.api.data::IColumnStatistics','_binnedData':'weave.data.AttributeColumns::BinnedColumn','_filteredData':'weave.data.AttributeColumns::FilteredColumn','_spanRadians':'weave.data.AttributeColumns::EquationColumn',
'binnedData':'weave.data.AttributeColumns::BinnedColumn','chartColors':'weave.primitives::ColorRamp','filteredKeySet':'weave.api.data::IFilteredKeySet','innerRadius':'weave.core::LinkableNumber','labelAngleRatio':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','unfilteredData':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::PieChartPlotter':{'data':'weave.data.AttributeColumns::DynamicColumn',
'fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','innerRadius':'weave.core::LinkableNumber','label':'weave.data.AttributeColumns::DynamicColumn','labelAngleRatio':'weave.core::LinkableNumber','line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::ProbeLinePlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::RadVizPlotter':{'RSampling':'weave.core::LinkableBoolean','absNorm':'weave.core::LinkableBoolean','alphaColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','anchorLabelFunction':'weave.core::LinkableFunction','anchors':'weave.core::LinkableHashMap','colorMap':'weave.primitives::ColorRamp','columns':'weave.core::LinkableHashMap','currentAlgorithm':'weave.core::LinkableString','dataSetName':'weave.core::LinkableString','enableJitter':'weave.core::LinkableBoolean',
'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','iterations':'weave.core::LinkableNumber','jitterLevel':'weave.core::LinkableNumber','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','localNormalization':'weave.core::LinkableBoolean','normMax':'weave.core::LinkableNumber','normMin':'weave.core::LinkableNumber','pointSensitivitySelection':'weave.core::LinkableVariable','probeLineNormalizedThreshold':'weave.core::LinkableNumber',
'radiusColumn':'weave.data.AttributeColumns::DynamicColumn','radiusConstant':'weave.core::LinkableNumber','regularSampling':'weave.core::LinkableBoolean','sampleSizeColumns':'weave.core::LinkableNumber','sampleSizeRows':'weave.core::LinkableNumber','sampleTitle':'weave.core::LinkableString','showAnchorProbeLines':'weave.core::LinkableBoolean','showAnnulusCenter':'weave.core::LinkableBoolean','showValuesForAnchorProbeLines':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection'},
'weave.visualization.plotters::RamachandranBackgroundPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::RectanglePlotter':{'centerX':'weave.core::LinkableBoolean','centerY':'weave.core::LinkableBoolean','drawEllipse':'weave.core::LinkableBoolean','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','heightData':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'line':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','widthData':'weave.data.AttributeColumns::AlwaysDefinedColumn','xData':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','xMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn','yData':'weave.data.AttributeColumns::AlwaysDefinedColumn','yMaxScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'yMinScreenOffset':'weave.data.AttributeColumns::AlwaysDefinedColumn'},'weave.visualization.plotters::RegressionLinePlotter':{'currentTrendline':'weave.core::LinkableString','drawLine':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','polynomialDegree':'weave.core::LinkableNumber','spatialCallbacks':'weave.api.core::ICallbackCollection','xColumn':'weave.data.AttributeColumns::DynamicColumn','yColumn':'weave.data.AttributeColumns::DynamicColumn'},
'weave.visualization.plotters::ScatterPlotPlotter':{'colorBySize':'weave.core::LinkableBoolean','colorNegative':'weave.core::LinkableNumber','colorPositive':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','defaultScreenRadius':'weave.core::LinkableNumber','destinationProjection':'weave.core::LinkableString','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet',
'line':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber','minScreenRadius':'weave.core::LinkableNumber','showSquaresForMissingSize':'weave.core::LinkableBoolean','sizeBy':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::SimpleAxisPlotter':{'axesAlpha':'weave.core::LinkableNumber',
'axesColor':'weave.core::LinkableNumber','axesThickness':'weave.core::LinkableNumber','axisGridLineAlpha':'weave.core::LinkableNumber','axisGridLineColor':'weave.core::LinkableNumber','axisGridLineThickness':'weave.core::LinkableNumber','axisLabelHorizontalDistance':'weave.core::LinkableNumber','axisLabelRelativeAngle':'weave.core::LinkableNumber','axisLabelVerticalDistance':'weave.core::LinkableNumber','axisLineDataBounds':'weave.primitives::LinkableBounds2D','axisLineMaxValue':'weave.core::LinkableNumber',
'axisLineMinValue':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','forceTickCount':'weave.core::LinkableBoolean','labelFunction':'weave.core::LinkableFunction','labelHorizontalAlign':'weave.core::LinkableString','labelNumberFormatter':'weave.primitives::LinkableNumberFormatter','labelTextAlignment':'weave.core::LinkableString','labelVerticalAlign':'weave.core::LinkableString','labelWordWrapSize':'weave.core::LinkableNumber','overrideAxisName':'weave.core::LinkableString',
'showAxisName':'weave.core::LinkableBoolean','showLabels':'weave.core::LinkableBoolean','spatialCallbacks':'weave.api.core::ICallbackCollection','tickCountRequested':'weave.core::LinkableNumber','tickMaxValue':'weave.core::LinkableNumber','tickMinValue':'weave.core::LinkableNumber'},'weave.visualization.plotters::SimpleGlyphPlotter':{'dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','drawEllipse':'weave.core::LinkableBoolean',
'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalPosition':'weave.core::LinkableString','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','screenSize':'weave.data.AttributeColumns::AlwaysDefinedColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','verticalPosition':'weave.core::LinkableString','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::SimpleParallelCoordinatesAxesPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet',
'lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','mainPlotter':'weave.core::LinkableDynamicObject','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::SimpleParallelCoordinatesPlotter':{'columns':'weave.core::LinkableHashMap','curvedLines':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','normalize':'weave.core::LinkableBoolean','selectableLines':'weave.core::LinkableBoolean',
'spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::SingleImagePlotter':{'dataHeight':'weave.core::LinkableNumber','dataWidth':'weave.core::LinkableNumber','dataX':'weave.core::LinkableNumber','dataY':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','horizontalAlign':'weave.core::LinkableString','imageURL':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','useImageSize':'weave.core::LinkableBoolean',
'verticalAlign':'weave.core::LinkableString'},'weave.visualization.plotters::SizeBinLegendPlotter':{'colorBySize':'weave.core::LinkableBoolean','colorNegative':'weave.core::LinkableNumber','colorPositive':'weave.core::LinkableNumber','customCircleRadiuses':'weave.core::LinkableString','defaultScreenRadius':'weave.core::LinkableNumber','filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','maxScreenRadius':'weave.core::LinkableNumber',
'minScreenRadius':'weave.core::LinkableNumber','numberOfCircles':'weave.core::LinkableNumber','radiusColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection','typeRadio':'weave.core::LinkableString'},'weave.visualization.plotters::StickFigureGlyphPlotter':{'curvature':'weave.core::LinkableNumber','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString',
'filteredKeySet':'weave.api.data::IFilteredKeySet','limbLength':'weave.data.AttributeColumns::AlwaysDefinedColumn','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','theta1':'weave.data.AttributeColumns::DynamicColumn','theta2':'weave.data.AttributeColumns::DynamicColumn','theta3':'weave.data.AttributeColumns::DynamicColumn','theta4':'weave.data.AttributeColumns::DynamicColumn',
'zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::TextGlyphPlotter':{'angle':'weave.data.AttributeColumns::AlwaysDefinedColumn','bold':'weave.data.AttributeColumns::AlwaysDefinedColumn','color':'weave.data.AttributeColumns::AlwaysDefinedColumn','dataX':'weave.data.AttributeColumns::DynamicColumn','dataY':'weave.data.AttributeColumns::DynamicColumn','destinationProjection':'weave.core::LinkableString','filteredKeySet':'weave.api.data::IFilteredKeySet','font':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'hAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','hideOverlappingText':'weave.core::LinkableBoolean','italic':'weave.data.AttributeColumns::AlwaysDefinedColumn','maxWidth':'weave.core::LinkableNumber','size':'weave.data.AttributeColumns::AlwaysDefinedColumn','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sourceProjection':'weave.core::LinkableString','spatialCallbacks':'weave.api.core::ICallbackCollection','text':'weave.data.AttributeColumns::DynamicColumn','underline':'weave.data.AttributeColumns::AlwaysDefinedColumn',
'vAlign':'weave.data.AttributeColumns::AlwaysDefinedColumn','xScreenOffset':'weave.core::LinkableNumber','yScreenOffset':'weave.core::LinkableNumber','zoomToSubset':'weave.core::LinkableBoolean'},'weave.visualization.plotters::ThermometerPlotter':{'filteredKeySet':'weave.api.data::IFilteredKeySet','meterColumn':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.plotters::WMSPlotter':{'creditInfoAlpha':'weave.core::LinkableNumber',
'creditInfoBackgroundColor':'weave.core::LinkableNumber','creditInfoTextColor':'weave.core::LinkableNumber','displayMissingImage':'weave.core::LinkableBoolean','filteredKeySet':'weave.api.data::IFilteredKeySet','gridSpacing':'weave.core::LinkableNumber','preferLowerQuality':'weave.core::LinkableBoolean','service':'weave.core::LinkableDynamicObject','spatialCallbacks':'weave.api.core::ICallbackCollection','srs':'weave.core::LinkableString','styles':'weave.core::LinkableString'},'weave.visualization.plotters::WeaveWordlePlotter':{'fillStyle':'weave.visualization.plotters.styles::SolidFillStyle',
'filteredKeySet':'weave.api.data::IFilteredKeySet','lineStyle':'weave.visualization.plotters.styles::SolidLineStyle','spatialCallbacks':'weave.api.core::ICallbackCollection','wordColumn':'weave.data.AttributeColumns::DynamicColumn'},'weave.visualization.plotters::WedgePlotter':{'beginRadians':'weave.data.AttributeColumns::DynamicColumn','fill':'weave.visualization.plotters.styles::SolidFillStyle','filteredKeySet':'weave.api.data::IFilteredKeySet','line':'weave.visualization.plotters.styles::SolidLineStyle',
'spanRadians':'weave.data.AttributeColumns::DynamicColumn','spatialCallbacks':'weave.api.core::ICallbackCollection'},'weave.visualization.tools::AdvancedTableTool':{'backgroundColor1':'weave.core::LinkableNumber','backgroundColor2':'weave.core::LinkableNumber','buttonRadius':'weave.core::LinkableNumber','cellColorFunction':'weave.core::LinkableFunction','closeable':'weave.core::LinkableBoolean','colorRamp':'weave.primitives::ColorRamp','columnWidths':'weave.core::LinkableHashMap','columns':'weave.core::LinkableHashMap',
'controlPanel':'weave.ui::ControlPanel','dataGridHorizontalScrollPosition':'weave.core::LinkableNumber','dataGridVerticalScrollPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterComponents':'weave.core::LinkableHashMap','filteredKeySet':'weave.data.KeySets::FilteredKeySet',
'lockedColumns':'weave.core::LinkableNumber','maxHeaderHeight':'weave.core::LinkableNumber','maxRows':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString',
'panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showColors':'weave.core::LinkableBoolean','showControls':'weave.core::LinkableBoolean','showFilters':'weave.core::LinkableBoolean','show_clearSelection':'weave.core::LinkableBoolean','show_editColumns':'weave.core::LinkableBoolean','show_exportData':'weave.core::LinkableBoolean','show_moveSelectedToTop':'weave.core::LinkableBoolean','sortFieldIndex':'weave.core::LinkableNumber','sortInDescendingOrder':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::BarChartLegendTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','dynamicBarChartTool':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ColorBinLegendTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean',
'enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString',
'panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ColormapHistogramTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisTickCountRequested':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CompoundBarChartTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber',
'chartColors':'weave.primitives::ColorRamp','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorIndicatesDirection':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisForceTickCount':'weave.core::LinkableBoolean',
'heightAxisTickCountRequested':'weave.core::LinkableNumber','heightColumns':'weave.api.core::ILinkableHashMap','linkHeightAndColorColumns':'weave.core::LinkableBoolean','linkHeightAndSortColumns':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::CompoundBarChartPlotter','showAllLabels':'weave.core::LinkableBoolean','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CompoundRadVizTool':{'buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorComponent':'weave.ui::DynamicColumnComponent','colormapGrid':'weave.ui::ColorRampList','columnList':'weave.ui::ColumnListComponent','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','size':'weave.ui::DynamicColumnComponent',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CustomGraphicsTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','drawScript':'weave.core::LinkableFunction','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'vars':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CustomTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::CytoscapeWebTool':{'_cytoscapeReady':'weave.core::LinkableBoolean','_edgeFilteredKeys':'weave.data.KeySets::FilteredKeySet','_nodeFilteredKeys':'weave.data.KeySets::FilteredKeySet','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','edgeColorColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeLabelColumn':'weave.data.AttributeColumns::DynamicColumn','edgeLabelComponent':'weave.ui::DynamicColumnComponent','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeSourceComponent':'weave.ui::DynamicColumnComponent','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetComponent':'weave.ui::DynamicColumnComponent','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn','edgeThicknessComponent':'weave.ui::DynamicColumnComponent','edgeWeightColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeWeightComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','layoutSeed':'weave.core::LinkableNumber','layoutType':'weave.core::LinkableString','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','nodeColorColumn':'weave.data.AttributeColumns::DynamicColumn','nodeColorComponent':'weave.ui::DynamicColumnComponent','nodeLabelColumn':'weave.data.AttributeColumns::DynamicColumn','nodeLabelComponent':'weave.ui::DynamicColumnComponent','nodeParentColumn':'weave.data.AttributeColumns::DynamicColumn','nodeParentComponent':'weave.ui::DynamicColumnComponent','nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodeRadiusComponent':'weave.ui::DynamicColumnComponent',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DataStatisticsTool':{'_variables':'weave.api.core::ILinkableHashMap',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','inputVariables':'weave.api.core::ILinkableHashMap','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DatagridDisplay':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::DimensionSliderTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString','linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean','maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::ExternalTool':{'childListCallbacks':'weave.api.core::IChildListCallbackInterface'},'weave.visualization.tools::GaugeTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::GraphTool':{'_labelPlotter':'weave.visualization.plotters::GraphLabelPlotter','_plotter':'weave.visualization.plotters::GraphPlotter','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorColumn':'weave.data.AttributeColumns::DynamicColumn',
'colorComponent':'weave.ui::DynamicColumnComponent','controlPanel':'weave.ui::ControlPanel','edgeColorColumn':'weave.data.AttributeColumns::AlwaysDefinedColumn','edgeColorComponent':'weave.ui::DynamicColumnComponent','edgeSourceColumn':'weave.data.AttributeColumns::DynamicColumn','edgeSourceComponent':'weave.ui::DynamicColumnComponent','edgeTargetColumn':'weave.data.AttributeColumns::DynamicColumn','edgeTargetComponent':'weave.ui::DynamicColumnComponent','edgeThicknessColumn':'weave.data.AttributeColumns::DynamicColumn',
'edgeThicknessComponent':'weave.ui::DynamicColumnComponent','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelComponent':'weave.ui::DynamicColumnComponent','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','nodeComponent':'weave.ui::DynamicColumnComponent','nodeRadiusColumn':'weave.data.AttributeColumns::DynamicColumn','nodeRadiusComponent':'weave.ui::DynamicColumnComponent','nodesColumn':'weave.data.AttributeColumns::DynamicColumn','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::Histogram2DTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','customTickCounts':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::HistogramTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable',
'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','heightAxisTickCountRequested':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::KeyMappingTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSelection':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','isBidirectional':'weave.core::LinkableBoolean',
'limitRecursion':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','sourceKeyType':'weave.core::LinkableString','sourceLocalNameColumn':'weave.data.AttributeColumns::DynamicColumn','sourceLocalNameColumnComponent':'weave.ui::DynamicColumnComponent','targetKeyType':'weave.core::LinkableString','targetLocalNameColumn':'weave.data.AttributeColumns::DynamicColumn','targetLocalNameColumnComponent':'weave.ui::DynamicColumnComponent','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::LayerSettingsTool':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','listForegroundFirst':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber',
'panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showAlphaSlider':'weave.core::LinkableBoolean','showSelectableCheck':'weave.core::LinkableBoolean','showVisibleCheck':'weave.core::LinkableBoolean','shownLayers':'weave.core::LinkableVariable','targetPath':'weave.core::LinkableVariable',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::LineChartTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString',
'visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::MapOverviewWindow':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','parentZoomBounds':'weave.primitives::ZoomBounds','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::MapTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBackground':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableOverview':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','overviewPanel':'weave.visualization.tools::MapOverviewWindow',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','projectionSRS':'weave.core::LinkableString','showMouseModeControls':'weave.core::LinkableBoolean','showZoomControls':'weave.core::LinkableBoolean','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber','zoomControlsLocation':'weave.core::LinkableString','zoomSliderHeight':'weave.core::LinkableNumber','zoomToBaseMap':'weave.core::LinkableBoolean'},'weave.visualization.tools::ParallelCoordinatesTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeAllAttributesInProbe':'weave.core::LinkableBoolean','includeColorAttributeInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::PieChartHistogramTool':{'_plotter':'weave.visualization.plotters::PieChartHistogramPlotter','attributesToIncludeInProbe':'weave.core::LinkableVariable',
'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean',
'minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::PieChartTool':{'_plotter':'weave.visualization.plotters::PieChartPlotter','attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean',
'enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RInterfaceTool':{'RPlotscriptTALinkabletext':'weave.core::LinkableString','RScriptTAtext':'weave.core::LinkableString','Rservice':'weave.services::WeaveRServlet','buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','queryObjectDisplayString':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RScriptTool':{'_RScriptTool_DynamicColumnComponent1':'weave.ui::DynamicColumnComponent','_RScriptTool_DynamicColumnComponent2':'weave.ui::DynamicColumnComponent','buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','xRcolumn':'weave.data.AttributeColumns::DynamicColumn','yRcolumn':'weave.data.AttributeColumns::DynamicColumn','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RadVizTool':{'_anchorPlotter':'weave.visualization.plotters::AnchorPlotter',
'_plotter':'weave.visualization.plotters::RadVizPlotter','buttonRadius':'weave.core::LinkableNumber','cdLayout':'weave.radviz::ClassDiscriminationLayoutAlgorithm','children':'weave.core::LinkableHashMap','classDiscriminatorColumn':'weave.data.AttributeColumns::DynamicColumn','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enabelAnnuliCircles':'weave.core::LinkableBoolean','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean',
'enableProbeLines':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::RamachandranPlotTool':{'_RamachandranPlotTool_DynamicColumnComponent1':'weave.ui::DynamicColumnComponent','_plotter':'weave.visualization.plotters::ScatterPlotPlotter','buttonRadius':'weave.core::LinkableNumber',
'children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','colorColumn':'weave.data.AttributeColumns::DynamicColumn','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','histogramColumn':'weave.data.AttributeColumns::DynamicColumn','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ScatterPlotTool':{'attributesToIncludeInProbe':'weave.core::LinkableVariable','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean',
'isVisibleEquationTextBoolean':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString',
'panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','plotter':'weave.visualization.plotters::ScatterPlotPlotter','regressionPlotter':'weave.visualization.plotters::RegressionLinePlotter','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SimpleVisTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel',
'enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SizeBinLegendTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','dynamicScatterPlotTool':'weave.core::LinkableDynamicObject','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::SliderTool':{'buttonRadius':'weave.core::LinkableNumber',
'closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString','linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean',
'maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString',
'panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::StickFigureGlyphTool':{'_plotter':'weave.visualization.plotters::StickFigureGlyphPlotter','buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','includeToolAttributesInProbe':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber',
'panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TableTool':{'backgroundColor1':'weave.core::LinkableNumber','backgroundColor2':'weave.core::LinkableNumber',
'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','colorRamp':'weave.primitives::ColorRamp','columnWidths':'weave.core::LinkableHashMap','columns':'weave.core::LinkableHashMap','controlPanel':'weave.ui::ControlPanel','dataGridHorizontalScrollPosition':'weave.core::LinkableNumber','dataGridVerticalScrollPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean',
'enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filteredKeySet':'weave.data.KeySets::FilteredKeySet','lockedColumns':'weave.core::LinkableNumber','maxHeaderHeight':'weave.core::LinkableNumber','maxRows':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','mouseoverKeySet':'weave.data.KeySets::DynamicKeySet',
'panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','selectionKeySet':'weave.data.KeySets::DynamicKeySet','sortFieldIndex':'weave.core::LinkableNumber','sortInDescendingOrder':'weave.core::LinkableBoolean',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::ThermometerTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization',
'zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TimeSliderTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','currentSliderPosition':'weave.core::LinkableNumber','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','filterValues':'weave.core::LinkableVariable','layoutMode':'weave.core::LinkableString',
'linkGlobalColumns':'weave.core::LinkableBoolean','linkLineCharts':'weave.core::LinkableBoolean','maxLabelCount':'weave.core::LinkableNumber','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','showPlayButton':'weave.core::LinkableBoolean','timerDelay':'weave.core::LinkableNumber','unlinkedTools':'weave.core::LinkableVariable','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::TransposedTableTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','columns':'weave.core::LinkableHashMap',
'controlPanel':'weave.ui::ControlPanel','dataColumnWidth':'weave.core::LinkableString','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','headerAttributeColumn':'weave.data.AttributeColumns::DynamicColumn','headerColumnWidth':'weave.core::LinkableString','headerText':'weave.core::LinkableString','keySet':'weave.data.KeySets::FilteredKeySet','maximizable':'weave.core::LinkableBoolean',
'maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','zOrder':'weave.core::LinkableNumber'},
'weave.visualization.tools::TreeTool':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableProbing':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','expandToShowSelected':'weave.core::LinkableBoolean','expandedItems':'weave.data.KeySets::KeySet','iconColumn':'weave.data.AttributeColumns::DynamicColumn',
'iconColumnComponent':'weave.ui::DynamicColumnComponent','labelColumn':'weave.data.AttributeColumns::DynamicColumn','labelColumnComponent':'weave.ui::DynamicColumnComponent','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','parentColumn':'weave.data.AttributeColumns::DynamicColumn','parentColumnComponent':'weave.ui::DynamicColumnComponent','probeIncludesChildren':'weave.core::LinkableBoolean','selectIncludesChildren':'weave.core::LinkableBoolean','sortColumn':'weave.data.AttributeColumns::DynamicColumn','sortColumnComponent':'weave.ui::DynamicColumnComponent',
'valueToIconMapping':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::WeaveAnalyst':{'analystMap':'weave.core::LinkableHashMap','inputColumnList':'weave.ui::ColumnListComponent','inputColumns':'weave.core::LinkableHashMap','results':'weave.core::LinkableHashMap','statModule':'weave.visualization.tools::WeaveAnalystStatisticsModule'},'weave.visualization.tools::WeaveAnalystStatisticsModule':{'buttonRadius':'weave.core::LinkableNumber','closeable':'weave.core::LinkableBoolean',
'controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean','enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString',
'panelStyleList':'weave.core::LinkableString','panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','variables':'weave.core::LinkableHashMap','zOrder':'weave.core::LinkableNumber'},'weave.visualization.tools::WeaveWordleTool':{'buttonRadius':'weave.core::LinkableNumber','children':'weave.core::LinkableHashMap','closeable':'weave.core::LinkableBoolean','controlPanel':'weave.ui::ControlPanel','enableBorders':'weave.core::LinkableBoolean',
'enableMoveResize':'weave.core::LinkableBoolean','enableSubMenu':'weave.core::LinkableBoolean','enableTitle':'weave.core::LinkableBoolean','enableZOrder':'weave.core::LinkableBoolean','maximizable':'weave.core::LinkableBoolean','maximized':'weave.core::LinkableBoolean','minimizable':'weave.core::LinkableBoolean','minimized':'weave.core::LinkableBoolean','panelBackgroundColor':'weave.core::LinkableNumber','panelBorderColor':'weave.core::LinkableNumber','panelHeight':'weave.core::LinkableString','panelStyleList':'weave.core::LinkableString',
'panelTitle':'weave.core::LinkableString','panelWidth':'weave.core::LinkableString','panelX':'weave.core::LinkableString','panelY':'weave.core::LinkableString','visualization':'weave.visualization.layers::SimpleInteractiveVisualization','zOrder':'weave.core::LinkableNumber'},'weave::WeaveProperties':{'SecondaryKeyNumColumn_useGlobalMinMaxValues':'weave.core::LinkableBoolean','axisTitleTextFormat':'weave.utils::LinkableTextFormat','backgroundColor':'weave.core::LinkableNumber','collabServerIP':'weave.core::LinkableString',
'collabServerName':'weave.core::LinkableString','collabServerPort':'weave.core::LinkableString','collabServerRoom':'weave.core::LinkableString','collabSpectating':'weave.core::LinkableBoolean','cssStyleSheetName':'weave.core::LinkableString','dashboardMode':'weave.core::LinkableBoolean','dashedLengths':'weave.core::LinkableVariable','dashedSelectionColor':'weave.core::LinkableNumber','dashedZoomColor':'weave.core::LinkableNumber','dataInfoURL':'weave.core::LinkableString','debugScreenBounds':'weave.core::LinkableBoolean',
'enableAnnuliCircles':'weave.core::LinkableBoolean','enableAxisToolTips':'weave.core::LinkableBoolean','enableBitmapFilters':'weave.core::LinkableBoolean','enableBrowseData':'weave.core::LinkableBoolean','enableCascadeAllWindows':'weave.core::LinkableBoolean','enableClearCurrentSelection':'weave.core::LinkableBoolean','enableCloseAllWindows':'weave.core::LinkableBoolean','enableCollaborationBar':'weave.core::LinkableBoolean','enableCreateSubsets':'weave.core::LinkableBoolean','enableDataMenu':'weave.core::LinkableBoolean',
'enableDrawCircle':'weave.core::LinkableBoolean','enableDynamicTools':'weave.core::LinkableBoolean','enableExportApplicationScreenshot':'weave.core::LinkableBoolean','enableExportCSV':'weave.core::LinkableBoolean','enableExportToolImage':'weave.core::LinkableBoolean','enableFullScreen':'weave.core::LinkableBoolean','enableGeometryProbing':'weave.core::LinkableBoolean','enableManageDataSources':'weave.core::LinkableBoolean','enableManagePlugins':'weave.core::LinkableBoolean','enableManageSavedSelections':'weave.core::LinkableBoolean',
'enableManageSavedSubsets':'weave.core::LinkableBoolean','enableMarker':'weave.core::LinkableBoolean','enableMenuBar':'weave.core::LinkableBoolean','enableMinimizeAllWindows':'weave.core::LinkableBoolean','enableMouseWheel':'weave.core::LinkableBoolean','enablePenTool':'weave.core::LinkableBoolean','enableProbeLines':'weave.core::LinkableBoolean','enableProbeToolTip':'weave.core::LinkableBoolean','enableRefreshHierarchies':'weave.core::LinkableBoolean','enableRemoveSubsets':'weave.core::LinkableBoolean',
'enableRestoreAllMinimizedWindows':'weave.core::LinkableBoolean','enableRightClick':'weave.core::LinkableBoolean','enableSaveCurrentSelection':'weave.core::LinkableBoolean','enableSaveCurrentSubset':'weave.core::LinkableBoolean','enableSearchForRecord':'weave.core::LinkableBoolean','enableSelectionSelectorBox':'weave.core::LinkableBoolean','enableSelectionsMenu':'weave.core::LinkableBoolean','enableSessionHistoryControls':'weave.core::LinkableBoolean','enableSessionMenu':'weave.core::LinkableBoolean',
'enableShowAllRecords':'weave.core::LinkableBoolean','enableSubsetControls':'weave.core::LinkableBoolean','enableSubsetSelectionBox':'weave.core::LinkableBoolean','enableSubsetsMenu':'weave.core::LinkableBoolean','enableTileAllWindows':'weave.core::LinkableBoolean','enableToolAttributeEditing':'weave.core::LinkableBoolean','enableToolControls':'weave.core::LinkableBoolean','enableToolProbe':'weave.core::LinkableBoolean','enableToolSelection':'weave.core::LinkableBoolean','enableUserPreferences':'weave.core::LinkableBoolean',
'enableWeaveAnalystMode':'weave.core::LinkableBoolean','enableWindowMenu':'weave.core::LinkableBoolean','eventListeners':'weave.core::LinkableHashMap','externalTools':'weave.core::LinkableHashMap','filter_callbacks':'weave.api.core::ICallbackCollection','geometryMetadataRequestMode':'weave.core::LinkableString','geometryMinimumScreenArea':'weave.core::LinkableNumber','isTemplate':'weave.core::LinkableBoolean','macroLibraries':'weave.core::LinkableVariable','macros':'weave.api.core::ILinkableHashMap',
'maxComputationTimePerFrame':'weave.core::LinkableNumber','maxTooltipRecordsShown':'weave.core::LinkableNumber','menuToggles':'weave.api.core::ILinkableHashMap','mouseoverTextFormat':'weave.utils::LinkableTextFormat','panelBackgroundColor':'weave.core::LinkableNumber','panelTitleTextFormat':'weave.utils::LinkableTextFormat','pdbServiceURL':'weave.core::LinkableString','probeBufferSize':'weave.core::LinkableNumber','probeHeaderSeparator':'weave.core::LinkableString','probeInnerGlow':'weave.visualization.layers.filters::LinkableGlowFilter',
'probeLineFormatter':'weave.core::LinkableFunction','probeOuterGlow':'weave.visualization.layers.filters::LinkableGlowFilter','probeToolTipBackgroundAlpha':'weave.core::LinkableNumber','probeToolTipBackgroundColor':'weave.core::LinkableNumber','probeToolTipFontColor':'weave.core::LinkableNumber','probeToolTipMaxWidth':'weave.core::LinkableNumber','rServiceURL':'weave.core::LinkableString','recordsTooltipLocation':'weave.core::LinkableString','searchServiceURLs':'weave.core::LinkableString','selectionAlphaAmount':'weave.core::LinkableNumber',
'selectionDropShadow':'weave.visualization.layers.filters::LinkableDropShadowFilter','selectionMode':'weave.core::LinkableString','showAddExternalTools':'weave.core::LinkableBoolean','showBackgroundImage':'weave.core::LinkableBoolean','showCollaborationEditor':'weave.core::LinkableBoolean','showCollaborationMenuItem':'weave.core::LinkableBoolean','showColorController':'weave.core::LinkableBoolean','showCreateTemplateMenuItem':'weave.core::LinkableBoolean','showEmptyProbeRecordIdentifiers':'weave.core::LinkableBoolean',
'showEquationEditor':'weave.core::LinkableBoolean','showErrors':'weave.core::LinkableBoolean','showKMeansClustering':'weave.core::LinkableBoolean','showKeyTypeInColumnTitle':'weave.core::LinkableBoolean','showProbeToolTipEditor':'weave.core::LinkableBoolean','showProbeWindow':'weave.core::LinkableBoolean','showSelectedRecordsText':'weave.core::LinkableBoolean','showVisToolCloseDialog':'weave.core::LinkableBoolean','startupJavaScript':'weave.core::LinkableString','toolInteractions':'weave.visualization.layers::InteractionController',
'version':'weave.core::LinkableString','visTextFormat':'weave.utils::LinkableTextFormat','visTitleTextFormat':'weave.utils::LinkableTextFormat','windowSnapGridSize':'weave.core::LinkableString','workspaceHeight':'weave.core::LinkableNumber','workspaceMultiplier':'weave.core::LinkableNumber','workspaceWidth':'weave.core::LinkableNumber'}};weavejs.util.BackwardsCompatibility.prototype.FLEXJS_CLASS_INFO={names:[{name:'BackwardsCompatibility',qName:'weavejs.util.BackwardsCompatibility'}]};goog.provide('weavejs.util.StringView');
weavejs.util.StringView=function(vInput,sEncoding,nOffset,nLength){sEncoding=typeof sEncoding!=='undefined'?sEncoding:undefined;nOffset=typeof nOffset!=='undefined'?nOffset:undefined;nLength=typeof nLength!=='undefined'?nLength:undefined;var fTAView,aWhole,aRaw,fPutOutptCode,fGetOutptChrSize,nInptLen,nStartIdx=isFinite(nOffset)?nOffset:0,nTranscrType=15;var nChrCode,nChrIdx;if(sEncoding)this.encoding=sEncoding.toString();encSwitch:switch(this.encoding){case 'UTF-8':fPutOutptCode=weavejs.util.StringView.putUTF8CharCode;
fGetOutptChrSize=weavejs.util.StringView.getUTF8CharLength;fTAView=weavejs.util.StringView.Uint8Array;break encSwitch;case 'UTF-16':fPutOutptCode=weavejs.util.StringView.putUTF16CharCode;fGetOutptChrSize=weavejs.util.StringView.getUTF16CharLength;fTAView=weavejs.util.StringView.Uint16Array;break encSwitch;case 'UTF-32':fTAView=weavejs.util.StringView.Uint32Array;nTranscrType&=14;break encSwitch;default:fTAView=weavejs.util.StringView.Uint8Array;nTranscrType&=14}typeSwitch:switch(typeof vInput){case 'string':nTranscrType&=
7;break typeSwitch;case 'object':classSwitch:switch(vInput.constructor){case weavejs.util.StringView:nTranscrType&=3;break typeSwitch;case String:nTranscrType&=7;break typeSwitch;case weavejs.util.StringView.ArrayBuffer:aWhole=new fTAView(vInput);nInptLen=this.encoding==='UTF-32'?vInput.byteLength>>>2:this.encoding==='UTF-16'?vInput.byteLength>>>1:vInput.byteLength;aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===nInptLen)?aWhole:new fTAView(vInput,nStartIdx,!isFinite(nLength)?nInptLen-nStartIdx:
nLength);break typeSwitch;case weavejs.util.StringView.Uint32Array:case weavejs.util.StringView.Uint16Array:case weavejs.util.StringView.Uint8Array:fTAView=vInput.constructor;nInptLen=vInput.length;aWhole=vInput.byteOffset===0&&vInput.length===(fTAView===weavejs.util.StringView.Uint32Array?vInput.buffer.byteLength>>>2:fTAView===weavejs.util.StringView.Uint16Array?vInput.buffer.byteLength>>>1:vInput.buffer.byteLength)?vInput:new fTAView(vInput.buffer);aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===
nInptLen)?vInput:vInput.subarray(nStartIdx,isFinite(nLength)?nStartIdx+nLength:nInptLen);break typeSwitch;default:aWhole=new fTAView(vInput);nInptLen=aWhole.length;aRaw=nStartIdx===0&&(!isFinite(nLength)||nLength===nInptLen)?aWhole:aWhole.subarray(nStartIdx,isFinite(nLength)?nStartIdx+nLength:nInptLen)}break typeSwitch;default:aWhole=aRaw=new fTAView(Number(vInput)||0)}if(nTranscrType<8){var vSource,nOutptLen,nCharStart,nCharEnd,nEndIdx,fGetInptChrSize,fGetInptChrCode;if(nTranscrType&4){vSource=vInput;
nOutptLen=nInptLen=vSource.length;nTranscrType^=this.encoding==='UTF-32'?0:2;nStartIdx=nCharStart=nOffset?Math.max((nOutptLen+nOffset)%nOutptLen,0):0;nEndIdx=nCharEnd=(weavejs.util.StringView.Number_isInteger(nLength)?Math.min(Math.max(nLength,0)+nStartIdx,nOutptLen):nOutptLen)-1}else{vSource=vInput.rawData;nInptLen=vInput.makeIndex();nStartIdx=nCharStart=nOffset?Math.max((nInptLen+nOffset)%nInptLen,0):0;nOutptLen=weavejs.util.StringView.Number_isInteger(nLength)?Math.min(Math.max(nLength,0),nInptLen-
nCharStart):nInptLen;nEndIdx=nCharEnd=nOutptLen+nCharStart;if(vInput.encoding==='UTF-8'){fGetInptChrSize=weavejs.util.StringView.getUTF8CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF8CharCode}else if(vInput.encoding==='UTF-16'){fGetInptChrSize=weavejs.util.StringView.getUTF16CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF16CharCode}else nTranscrType&=1}if(nOutptLen===0||nTranscrType<4&&vSource.encoding===this.encoding&&nCharStart===0&&nOutptLen===nInptLen)nTranscrType=7;conversionSwitch:switch(nTranscrType){case 0:aWhole=
new fTAView(nOutptLen);for(var nOutptIdx=0;nOutptIdx<nOutptLen;aWhole[nOutptIdx]=vSource[nStartIdx+nOutptIdx++])break conversionSwitch;case 1:nOutptLen=0;for(var nInptIdx=nStartIdx;nInptIdx<nEndIdx;nInptIdx++)nOutptLen+=fGetOutptChrSize(vSource[nInptIdx]);aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx++)nOutptIdx=fPutOutptCode(aWhole,vSource[nInptIdx],nOutptIdx);break conversionSwitch;case 2:nStartIdx=0;for(nChrIdx=0;nChrIdx<nCharStart;nChrIdx++){nChrCode=
fGetInptChrCode(vSource,nStartIdx);nStartIdx+=fGetInptChrSize(nChrCode)}aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx+=fGetInptChrSize(nChrCode),nOutptIdx++){nChrCode=fGetInptChrCode(vSource,nInptIdx);aWhole[nOutptIdx]=nChrCode}break conversionSwitch;case 3:nOutptLen=0;for(nChrIdx=0,nInptIdx=0;nChrIdx<nCharEnd;nInptIdx+=fGetInptChrSize(nChrCode)){nChrCode=fGetInptChrCode(vSource,nInptIdx);if(nChrIdx===nCharStart)nStartIdx=nInptIdx;if(++nChrIdx>nCharStart)nOutptLen+=
fGetOutptChrSize(nChrCode)}aWhole=new fTAView(nOutptLen);for(nInptIdx=nStartIdx,nOutptIdx=0;nOutptIdx<nOutptLen;nInptIdx+=fGetInptChrSize(nChrCode)){nChrCode=fGetInptChrCode(vSource,nInptIdx);nOutptIdx=fPutOutptCode(aWhole,nChrCode,nOutptIdx)}break conversionSwitch;case 4:aWhole=new fTAView(nOutptLen);for(var nIdx=0;nIdx<nOutptLen;nIdx++)aWhole[nIdx]=vSource.charCodeAt(nIdx)&255;break conversionSwitch;case 5:nOutptLen=0;for(var nMapIdx=0;nMapIdx<nInptLen;nMapIdx++){if(nMapIdx===nCharStart)nStartIdx=
nOutptLen;nOutptLen+=fGetOutptChrSize(vSource.charCodeAt(nMapIdx));if(nMapIdx===nCharEnd)nEndIdx=nOutptLen}aWhole=new fTAView(nOutptLen);for(nOutptIdx=0,nChrIdx=0;nOutptIdx<nOutptLen;nChrIdx++)nOutptIdx=fPutOutptCode(aWhole,vSource.charCodeAt(nChrIdx),nOutptIdx);break conversionSwitch;case 6:aWhole=new fTAView(nOutptLen);for(nIdx=0;nIdx<nOutptLen;nIdx++)aWhole[nIdx]=vSource.charCodeAt(nIdx);break conversionSwitch;case 7:aWhole=new fTAView(nOutptLen?vSource:0);break conversionSwitch}aRaw=nTranscrType>
3&&(nStartIdx>0||nEndIdx<aWhole.length-1)?aWhole.subarray(nStartIdx,nEndIdx):aWhole}this.buffer=aWhole.buffer;this.bufferView=aWhole;this.rawData=aRaw};weavejs.util.StringView.ArrayBuffer=weavejs.util.JS.global.ArrayBuffer;weavejs.util.StringView.Uint32Array=weavejs.util.JS.global.Uint32Array;weavejs.util.StringView.Uint16Array=weavejs.util.JS.global.Uint16Array;weavejs.util.StringView.Uint8Array=weavejs.util.JS.global.Uint8Array;weavejs.util.StringView.prototype.buffer;weavejs.util.StringView.prototype.bufferView;
weavejs.util.StringView.prototype.rawData;weavejs.util.StringView.Number_isInteger=function(nVal){return typeof nVal==='number'&&isFinite(nVal)&&nVal>-9007199254740992&&nVal<9007199254740992&&Math.floor(nVal)===nVal};
weavejs.util.StringView.loadUTF8CharCode=function(aChars,nIdx){var nLen=aChars.length,nPart=aChars[nIdx];return nPart>251&&nPart<254&&nIdx+5<nLen?(nPart-252)*1073741824+(aChars[nIdx+1]-128<<24)+(aChars[nIdx+2]-128<<18)+(aChars[nIdx+3]-128<<12)+(aChars[nIdx+4]-128<<6)+aChars[nIdx+5]-128:nPart>247&&nPart<252&&nIdx+4<nLen?(nPart-248<<24)+(aChars[nIdx+1]-128<<18)+(aChars[nIdx+2]-128<<12)+(aChars[nIdx+3]-128<<6)+aChars[nIdx+4]-128:nPart>239&&nPart<248&&nIdx+3<nLen?(nPart-240<<18)+(aChars[nIdx+1]-128<<
12)+(aChars[nIdx+2]-128<<6)+aChars[nIdx+3]-128:nPart>223&&nPart<240&&nIdx+2<nLen?(nPart-224<<12)+(aChars[nIdx+1]-128<<6)+aChars[nIdx+2]-128:nPart>191&&nPart<224&&nIdx+1<nLen?(nPart-192<<6)+aChars[nIdx+1]-128:nPart};
weavejs.util.StringView.putUTF8CharCode=function(aTarget,nChar,nPutAt){var nIdx=nPutAt;if(nChar<128)aTarget[nIdx++]=nChar;else if(nChar<2048){aTarget[nIdx++]=192+(nChar>>>6);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<65536){aTarget[nIdx++]=224+(nChar>>>12);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<2097152){aTarget[nIdx++]=240+(nChar>>>18);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else if(nChar<67108864){aTarget[nIdx++]=
248+(nChar>>>24);aTarget[nIdx++]=128+(nChar>>>18&63);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}else{aTarget[nIdx++]=252+nChar/1073741824;aTarget[nIdx++]=128+(nChar>>>24&63);aTarget[nIdx++]=128+(nChar>>>18&63);aTarget[nIdx++]=128+(nChar>>>12&63);aTarget[nIdx++]=128+(nChar>>>6&63);aTarget[nIdx++]=128+(nChar&63)}return nIdx};
weavejs.util.StringView.getUTF8CharLength=function(nChar){return nChar<128?1:nChar<2048?2:nChar<65536?3:nChar<2097152?4:nChar<67108864?5:6};weavejs.util.StringView.loadUTF16CharCode=function(aChars,nIdx){var nFrstChr=aChars[nIdx];return nFrstChr>55231&&nIdx+1<aChars.length?(nFrstChr-55296<<10)+aChars[nIdx+1]+9216:nFrstChr};
weavejs.util.StringView.putUTF16CharCode=function(aTarget,nChar,nPutAt){var nIdx=nPutAt;if(nChar<65536)aTarget[nIdx++]=nChar;else{aTarget[nIdx++]=55232+(nChar>>>10);aTarget[nIdx++]=56320+(nChar&1023)}return nIdx};weavejs.util.StringView.getUTF16CharLength=function(nChar){return nChar<65536?1:2};weavejs.util.StringView.b64ToUint6=function(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:nChr===43?62:nChr===47?63:0};
weavejs.util.StringView.uint6ToB64=function(nUint6){return nUint6<26?nUint6+65:nUint6<52?nUint6+71:nUint6<62?nUint6-4:nUint6===62?43:nUint6===63?47:65};
weavejs.util.StringView.bytesToBase64=function(aBytes){var sB64Enc='';var nMod3,nLen=aBytes.length,nUint24=0,nIdx=0;for(;nIdx<nLen;nIdx++){nMod3=nIdx%3;if(nIdx>0&&nIdx*4/3%76===0)sB64Enc+='\r\n';nUint24|=aBytes[nIdx]<<(16>>>nMod3&24);if(nMod3===2||aBytes.length-nIdx===1){sB64Enc+=String.fromCharCode(weavejs.util.StringView.uint6ToB64(nUint24>>>18&63),weavejs.util.StringView.uint6ToB64(nUint24>>>12&63),weavejs.util.StringView.uint6ToB64(nUint24>>>6&63),weavejs.util.StringView.uint6ToB64(nUint24&63));
nUint24=0}}return sB64Enc.replace(/A(?=A$|$)/g,'\x3d')};
weavejs.util.StringView.base64ToBytes=function(sBase64,nBlockBytes){nBlockBytes=typeof nBlockBytes!=='undefined'?nBlockBytes:undefined;var sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,''),nInLen=sB64Enc.length,nOutLen=nBlockBytes?Math.ceil((nInLen*3+1>>>2)/nBlockBytes)*nBlockBytes:nInLen*3+1>>>2,aBytes=new weavejs.util.StringView.Uint8Array(nOutLen);var nMod3,nMod4,nUint24=0,nOutIdx=0,nInIdx=0;for(;nInIdx<nInLen;nInIdx++){nMod4=nInIdx&3;nUint24|=weavejs.util.StringView.b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<
18-6*nMod4;if(nMod4===3||nInLen-nInIdx===1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++)aBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255;nUint24=0}}return aBytes};weavejs.util.StringView.makeFromBase64=function(sB64Inpt,sEncoding,nByteOffset,nLength){return new weavejs.util.StringView(sEncoding==='UTF-16'||sEncoding==='UTF-32'?weavejs.util.StringView.base64ToBytes(sB64Inpt,sEncoding==='UTF-16'?2:4).buffer:weavejs.util.StringView.base64ToBytes(sB64Inpt),sEncoding,nByteOffset,nLength)};
weavejs.util.StringView.prototype.encoding='UTF-8';
weavejs.util.StringView.prototype.makeIndex=function(nChrLength,nStartFrom){nChrLength=typeof nChrLength!=='undefined'?nChrLength:undefined;nStartFrom=typeof nStartFrom!=='undefined'?nStartFrom:undefined;var aTarget=this.rawData,nChrEnd,nRawLength=aTarget.length,nStartIdx=nStartFrom||0,nIdxEnd=nStartIdx,nStopAtChr=isNaN(nChrLength)?Infinity:nChrLength;if(nChrLength+1>aTarget.length)throw new RangeError("public function makeIndex - The offset can't be major than the length of the array - 1.");switch(this.encoding){case 'UTF-8':var nPart;
for(nChrEnd=0;nIdxEnd<nRawLength&&nChrEnd<nStopAtChr;nChrEnd++){nPart=aTarget[nIdxEnd];nIdxEnd+=nPart>251&&nPart<254&&nIdxEnd+5<nRawLength?6:nPart>247&&nPart<252&&nIdxEnd+4<nRawLength?5:nPart>239&&nPart<248&&nIdxEnd+3<nRawLength?4:nPart>223&&nPart<240&&nIdxEnd+2<nRawLength?3:nPart>191&&nPart<224&&nIdxEnd+1<nRawLength?2:1}break;case 'UTF-16':for(nChrEnd=nStartIdx;nIdxEnd<nRawLength&&nChrEnd<nStopAtChr;nChrEnd++)nIdxEnd+=aTarget[nIdxEnd]>55231&&nIdxEnd+1<aTarget.length?2:1;break;default:nIdxEnd=nChrEnd=
isFinite(nChrLength)?nChrLength:nRawLength-1}if(nChrLength)return nIdxEnd;return nChrEnd};
weavejs.util.StringView.prototype.toBase64=function(bWholeBuffer){return weavejs.util.StringView.bytesToBase64(bWholeBuffer?this.bufferView.constructor===weavejs.util.StringView.Uint8Array?this.bufferView:new weavejs.util.StringView.Uint8Array(this.buffer):this.rawData.constructor===weavejs.util.StringView.Uint8Array?this.rawData:new weavejs.util.StringView.Uint8Array(this.buffer,this.rawData.byteOffset,this.rawData.length<<(this.rawData.constructor===weavejs.util.StringView.Uint16Array?1:2)))};
weavejs.util.StringView.prototype.subview=function(nCharOffset,nCharLength){var nChrLen,nCharStart,nStrLen,bVariableLen=this.encoding==='UTF-8'||this.encoding==='UTF-16',nStartOffset=nCharOffset,nStringLength,nRawLen=this.rawData.length;if(nRawLen===0)return new weavejs.util.StringView(this.buffer,this.encoding);nStringLength=bVariableLen?this.makeIndex():nRawLen;nCharStart=nCharOffset?Math.max((nStringLength+nCharOffset)%nStringLength,0):0;nStrLen=weavejs.util.StringView.Number_isInteger(nCharLength)?
Math.max(nCharLength,0)+nCharStart>nStringLength?nStringLength-nCharStart:nCharLength:nStringLength;if(nCharStart===0&&nStrLen===nStringLength)return this;if(bVariableLen){nStartOffset=this.makeIndex(nCharStart);nChrLen=this.makeIndex(nStrLen,nStartOffset)-nStartOffset}else{nStartOffset=nCharStart;nChrLen=nStrLen-nCharStart}if(this.encoding==='UTF-16')nStartOffset<<=1;else if(this.encoding==='UTF-32')nStartOffset<<=2;return new weavejs.util.StringView(this.buffer,this.encoding,nStartOffset,nChrLen)};
weavejs.util.StringView.prototype.forEachChar=function(fCallback,oThat,nChrOffset,nChrLen){var aSource=this.rawData,nRawEnd,nRawIdx;if(this.encoding==='UTF-8'||this.encoding==='UTF-16'){var fGetInptChrSize,fGetInptChrCode;if(this.encoding==='UTF-8'){fGetInptChrSize=weavejs.util.StringView.getUTF8CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF8CharCode}else if(this.encoding==='UTF-16'){fGetInptChrSize=weavejs.util.StringView.getUTF16CharLength;fGetInptChrCode=weavejs.util.StringView.loadUTF16CharCode}nRawIdx=
isFinite(nChrOffset)?this.makeIndex(nChrOffset):0;nRawEnd=isFinite(nChrLen)?this.makeIndex(nChrLen,nRawIdx):aSource.length;var nChrCode,nChrIdx=0;for(;nRawIdx<nRawEnd;nChrIdx++){nChrCode=fGetInptChrCode(aSource,nRawIdx);fCallback.call(oThat||null,nChrCode,nChrIdx,nRawIdx,aSource);nRawIdx+=fGetInptChrSize(nChrCode)}}else{nRawIdx=isFinite(nChrOffset)?nChrOffset:0;nRawEnd=isFinite(nChrLen)?nChrLen+nRawIdx:aSource.length;for(;nRawIdx<nRawEnd;nRawIdx++)fCallback.call(oThat||null,aSource[nRawIdx],nRawIdx,
nRawIdx,aSource)}};
weavejs.util.StringView.prototype.toString=function(){if(this.encoding!=='UTF-8'&&this.encoding!=='UTF-16')return String.fromCharCode.apply(null,this.rawData);var fGetCode,fGetIncr,sView='';if(this.encoding==='UTF-8'){fGetIncr=weavejs.util.StringView.getUTF8CharLength;fGetCode=weavejs.util.StringView.loadUTF8CharCode}else if(this.encoding==='UTF-16'){fGetIncr=weavejs.util.StringView.getUTF16CharLength;fGetCode=weavejs.util.StringView.loadUTF16CharCode}var nChr,nLen=this.rawData.length,nIdx=0;for(;nIdx<
nLen;nIdx+=fGetIncr(nChr)){nChr=fGetCode(this.rawData,nIdx);sView+=String.fromCharCode(nChr)}return sView};weavejs.util.StringView.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringView',qName:'weavejs.util.StringView'}]};goog.provide('weavejs.util.JSByteArray');goog.require('weavejs.util.StringView');
weavejs.util.JSByteArray=function(data,endian){var self=this;data=typeof data!=='undefined'?data:undefined;endian=typeof endian!=='undefined'?endian:undefined;this.data=[];this.endian=weavejs.util.JSByteArray.ENDIAN_BIG;this.objectEncoding=weavejs.util.JSByteArray.ENCODING_AMF3;this.stringTable=[];this.objectTable=[];this.traitTable=[];var __localFn0__=function(c){return c.charCodeAt(0)};if(typeof data=='string')data=data.split('').map(__localFn0__);this.data=data!==undefined?data:[];if(endian!==
undefined)this.endian=endian;this.length=data.length;this.stringTable=[];this.objectTable=[];this.traitTable=[]};weavejs.util.JSByteArray.ENDIAN_BIG=0;weavejs.util.JSByteArray.ENDIAN_LITTLE=1;weavejs.util.JSByteArray.ENCODING_AMF0=0;weavejs.util.JSByteArray.ENCODING_AMF3=3;weavejs.util.JSByteArray.Amf0Types_kNumberType=0;weavejs.util.JSByteArray.Amf0Types_kBooleanType=1;weavejs.util.JSByteArray.Amf0Types_kStringType=2;weavejs.util.JSByteArray.Amf0Types_kObjectType=3;
weavejs.util.JSByteArray.Amf0Types_kMovieClipType=4;weavejs.util.JSByteArray.Amf0Types_kNullType=5;weavejs.util.JSByteArray.Amf0Types_kUndefinedType=6;weavejs.util.JSByteArray.Amf0Types_kReferenceType=7;weavejs.util.JSByteArray.Amf0Types_kECMAArrayType=8;weavejs.util.JSByteArray.Amf0Types_kObjectEndType=9;weavejs.util.JSByteArray.Amf0Types_kStrictArrayType=10;weavejs.util.JSByteArray.Amf0Types_kDateType=11;weavejs.util.JSByteArray.Amf0Types_kLongStringType=12;
weavejs.util.JSByteArray.Amf0Types_kUnsupportedType=13;weavejs.util.JSByteArray.Amf0Types_kRecordsetType=14;weavejs.util.JSByteArray.Amf0Types_kXMLObjectType=15;weavejs.util.JSByteArray.Amf0Types_kTypedObjectType=16;weavejs.util.JSByteArray.Amf0Types_kAvmPlusObjectType=17;weavejs.util.JSByteArray.Amf3Types_kUndefinedType=0;weavejs.util.JSByteArray.Amf3Types_kNullType=1;weavejs.util.JSByteArray.Amf3Types_kFalseType=2;weavejs.util.JSByteArray.Amf3Types_kTrueType=3;
weavejs.util.JSByteArray.Amf3Types_kIntegerType=4;weavejs.util.JSByteArray.Amf3Types_kDoubleType=5;weavejs.util.JSByteArray.Amf3Types_kStringType=6;weavejs.util.JSByteArray.Amf3Types_kXMLType=7;weavejs.util.JSByteArray.Amf3Types_kDateType=8;weavejs.util.JSByteArray.Amf3Types_kArrayType=9;weavejs.util.JSByteArray.Amf3Types_kObjectType=10;weavejs.util.JSByteArray.Amf3Types_kAvmPlusXmlType=11;weavejs.util.JSByteArray.Amf3Types_kByteArrayType=12;weavejs.util.JSByteArray.TWOeN23=Math.pow(2,-23);
weavejs.util.JSByteArray.TWOeN52=Math.pow(2,-52);weavejs.util.JSByteArray.prototype.data;weavejs.util.JSByteArray.prototype.length=0;weavejs.util.JSByteArray.prototype.pos=0;weavejs.util.JSByteArray.prototype.endian;weavejs.util.JSByteArray.prototype.objectEncoding;weavejs.util.JSByteArray.prototype.stringTable;weavejs.util.JSByteArray.prototype.objectTable;weavejs.util.JSByteArray.prototype.traitTable;weavejs.util.JSByteArray.prototype.readByte=function(){var cc=this.data[this.pos++];return cc&255};
weavejs.util.JSByteArray.prototype.writeByte=function(byte){this.data.push(byte)};weavejs.util.JSByteArray.prototype.readBoolean=function(){return this.data[this.pos++]&255?true:false};weavejs.util.JSByteArray.prototype.readUInt30=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readUInt30LE();var ch1=this.readByte();var ch2=this.readByte();var ch3=this.readByte();var ch4=this.readByte();if(ch1>=64)return undefined;return ch4|ch3<<8|ch2<<16|ch1<<24};
weavejs.util.JSByteArray.prototype.readUnsignedInt=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readUInt32LE();var data=this.data,pos=(this.pos+=4)-4;return(data[pos]&255)<<24|(data[++pos]&255)<<16|(data[++pos]&255)<<8|data[++pos]&255};
weavejs.util.JSByteArray.prototype.readInt=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readInt32LE();var data=this.data,pos=(this.pos+=4)-4;var x=(data[pos]&255)<<24|(data[++pos]&255)<<16|(data[++pos]&255)<<8|data[++pos]&255;return x>=2147483648?x-4294967296:x};
weavejs.util.JSByteArray.prototype.readUnsignedShort=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readUInt16LE();var data=this.data,pos=(this.pos+=2)-2;return(data[pos]&255)<<8|data[++pos]&255};weavejs.util.JSByteArray.prototype.readShort=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readInt16LE();var data=this.data,pos=(this.pos+=2)-2;var x=(data[pos]&255)<<8|data[++pos]&255;return x>=32768?x-65536:x};
weavejs.util.JSByteArray.prototype.readFloat=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readFloat32LE();var data=this.data,pos=(this.pos+=4)-4;var b1=data[pos]&255,b2=data[++pos]&255,b3=data[++pos]&255,b4=data[++pos]&255;var sign=1-(b1>>7<<1);var exp=(b1<<1&255|b2>>7)-127;var sig=(b2&127)<<16|b3<<8|b4;if(sig==0&&exp==-127)return 0;return sign*(1+weavejs.util.JSByteArray.TWOeN23*sig)*Math.pow(2,exp)};
weavejs.util.JSByteArray.prototype.readDouble=function(){if(this.endian==weavejs.util.JSByteArray.ENDIAN_LITTLE)return this.readFloat64LE();var b1=this.readByte();var b2=this.readByte();var b3=this.readByte();var b4=this.readByte();var b5=this.readByte();var b6=this.readByte();var b7=this.readByte();var b8=this.readByte();var sign=1-(b1>>7<<1);var exp=(b1<<4&2047|b2>>4)-1023;var sig1=((b2&15)<<16|b3<<8|b4).toString(2);var sig2=b5>>7?'1':'0';var sig3=((b5&127)<<24|b6<<16|b7<<8|b8).toString(2);while(sig3.length<
31)sig3='0'+sig3;var sig=parseInt(sig1+sig2+sig3,2);if(sig==0&&exp==-1023)return 0;return sign*(1+weavejs.util.JSByteArray.TWOeN52*sig)*Math.pow(2,exp)};weavejs.util.JSByteArray.prototype.readUInt29=function(){var value;var b=this.readByte()&255;if(b<128)return b;value=(b&127)<<7;b=this.readByte()&255;if(b<128)return value|b;value=(value|b&127)<<7;b=this.readByte()&255;if(b<128)return value|b;value=(value|b&127)<<8;b=this.readByte()&255;return value|b};
weavejs.util.JSByteArray.prototype.readUInt30LE=function(){var ch1=this.readByte();var ch2=this.readByte();var ch3=this.readByte();var ch4=this.readByte();if(ch4>=64)return undefined;return ch1|ch2<<8|ch3<<16|ch4<<24};weavejs.util.JSByteArray.prototype.readUInt32LE=function(){var data=this.data,pos=this.pos+=4;return(data[--pos]&255)<<24|(data[--pos]&255)<<16|(data[--pos]&255)<<8|data[--pos]&255};
weavejs.util.JSByteArray.prototype.readInt32LE=function(){var data=this.data,pos=this.pos+=4;var x=(data[--pos]&255)<<24|(data[--pos]&255)<<16|(data[--pos]&255)<<8|data[--pos]&255;return x>=2147483648?x-4294967296:x};weavejs.util.JSByteArray.prototype.readUInt16LE=function(){var data=this.data,pos=this.pos+=2;return(data[--pos]&255)<<8|data[--pos]&255};
weavejs.util.JSByteArray.prototype.readInt16LE=function(){var data=this.data,pos=this.pos+=2;var x=(data[--pos]&255)<<8|data[--pos]&255;return x>=32768?x-65536:x};
weavejs.util.JSByteArray.prototype.readFloat32LE=function(){var data=this.data,pos=this.pos+=4;var b1=data[--pos]&255,b2=data[--pos]&255,b3=data[--pos]&255,b4=data[--pos]&255;var sign=1-(b1>>7<<1);var exp=(b1<<1&255|b2>>7)-127;var sig=(b2&127)<<16|b3<<8|b4;if(sig==0&&exp==-127)return 0;return sign*(1+weavejs.util.JSByteArray.TWOeN23*sig)*Math.pow(2,exp)};
weavejs.util.JSByteArray.prototype.readFloat64LE=function(){var data=this.data,pos=this.pos+=8;var b1=data[--pos]&255,b2=data[--pos]&255,b3=data[--pos]&255,b4=data[--pos]&255,b5=data[--pos]&255,b6=data[--pos]&255,b7=data[--pos]&255,b8=data[--pos]&255;var sign=1-(b1>>7<<1);var exp=(b1<<4&2047|b2>>4)-1023;var sig1=((b2&15)<<16|b3<<8|b4).toString(2);var sig2=b5>>7?'1':'0';var sig3=((b5&127)<<24|b6<<16|b7<<8|b8).toString(2);while(sig3.length<31)sig3='0'+sig3;var sig=parseInt(sig1+sig2+sig3,2);if(sig==
0&&exp==-1023)return 0;return sign*(1+weavejs.util.JSByteArray.TWOeN52*sig)*Math.pow(2,exp)};weavejs.util.JSByteArray.prototype.readDate=function(){var time_ms=this.readDouble();var tz_min=this.readUnsignedShort();return new Date(time_ms+tz_min*60*1E3)};weavejs.util.JSByteArray.prototype.readString=function(len){var str=(new weavejs.util.StringView(this.data,'UTF-8',this.pos,len)).toString();this.pos+=len;return str};weavejs.util.JSByteArray.prototype.readUTF=function(){return this.readString(this.readUnsignedShort())};
weavejs.util.JSByteArray.prototype.readLongUTF=function(){return this.readString(this.readUInt30())};weavejs.util.JSByteArray.prototype.stringToXML=function(str){var xmlDoc;if(weavejs.util.JS.global.DOMParser){var parser=new weavejs.util.JS.global.DOMParser;xmlDoc=parser.parseFromString(str,'text/xml')}else{xmlDoc=new weavejs.util.JS.global.ActiveXObject('Microsoft.XMLDOM');xmlDoc.async=false;xmlDoc.loadXML(str)}return xmlDoc};
weavejs.util.JSByteArray.prototype.readXML=function(){var xml=this.readLongUTF();return this.stringToXML(xml)};weavejs.util.JSByteArray.prototype.readStringAMF3=function(){var ref=this.readUInt29();if((ref&1)==0)return this.stringTable[ref>>1];var len=ref>>1;if(0==len)return'';var str=this.readString(len);this.stringTable.push(str);return str};
weavejs.util.JSByteArray.prototype.readTraits=function(ref){var traitInfo={};traitInfo.properties=[];if((ref&3)==1)return this.traitTable[ref>>2];traitInfo.externalizable=(ref&4)==4;traitInfo.dynamic=(ref&8)==8;traitInfo.count=ref>>4;traitInfo.className=this.readStringAMF3();this.traitTable.push(traitInfo);for(var i=0;i<traitInfo.count;i++){var propName=this.readStringAMF3();traitInfo.properties.push(propName)}return traitInfo};weavejs.util.JSByteArray.prototype.readExternalizable=function(className){return this.readObject()};
weavejs.util.JSByteArray.prototype.readObject=function(){if(this.objectEncoding==weavejs.util.JSByteArray.ENCODING_AMF0)return this.readAMF0Object();else if(this.objectEncoding==weavejs.util.JSByteArray.ENCODING_AMF3)return this.readAMF3Object();return undefined};
weavejs.util.JSByteArray.prototype.readAMF0Object=function(){var marker=this.readByte();var value,o;if(marker==weavejs.util.JSByteArray.Amf0Types_kNumberType)return this.readDouble();else if(marker==weavejs.util.JSByteArray.Amf0Types_kBooleanType)return this.readBoolean();else if(marker==weavejs.util.JSByteArray.Amf0Types_kStringType)return this.readUTF();else if(marker==weavejs.util.JSByteArray.Amf0Types_kObjectType||marker==weavejs.util.JSByteArray.Amf0Types_kECMAArrayType){o={};var ismixed=marker==
weavejs.util.JSByteArray.Amf0Types_kECMAArrayType;if(ismixed)this.readUInt30();while(true){var c1=this.readByte();var c2=this.readByte();var name=this.readString(c1<<8|c2);var k=this.readByte();if(k==weavejs.util.JSByteArray.Amf0Types_kObjectEndType)break;this.pos--;o[name]=this.readObject()}return o}else if(marker==weavejs.util.JSByteArray.Amf0Types_kStrictArrayType){var size=this.readInt();var a=[];for(var i=0;i<size;++i)a.push(this.readObject());return a}else if(marker==weavejs.util.JSByteArray.Amf0Types_kTypedObjectType){o=
{};var typeName=this.readUTF();var propertyName=this.readUTF();var type=this.readByte();while(type!=weavejs.util.JSByteArray.Amf0Types_kObjectEndType){value=this.readObject();o[propertyName]=value;propertyName=this.readUTF();type=this.readByte()}return o}else if(marker==weavejs.util.JSByteArray.Amf0Types_kAvmPlusObjectType)return this.readAMF3Object();else if(marker==weavejs.util.JSByteArray.Amf0Types_kNullType)return null;else if(marker==weavejs.util.JSByteArray.Amf0Types_kUndefinedType)return undefined;
else if(marker==weavejs.util.JSByteArray.Amf0Types_kReferenceType){var refNum=this.readUnsignedShort();value=this.objectTable[refNum];return value}else if(marker==weavejs.util.JSByteArray.Amf0Types_kDateType)return this.readDate();else if(marker==weavejs.util.JSByteArray.Amf0Types_kLongStringType)return this.readLongUTF();else if(marker==weavejs.util.JSByteArray.Amf0Types_kXMLObjectType)return this.readXML();return undefined};
weavejs.util.JSByteArray.prototype.readAMF3Object=function(){var marker=this.readByte();var ref,len,i,value;if(marker==weavejs.util.JSByteArray.Amf3Types_kUndefinedType)return undefined;else if(marker==weavejs.util.JSByteArray.Amf3Types_kNullType)return null;else if(marker==weavejs.util.JSByteArray.Amf3Types_kFalseType)return false;else if(marker==weavejs.util.JSByteArray.Amf3Types_kTrueType)return true;else if(marker==weavejs.util.JSByteArray.Amf3Types_kIntegerType)return this.readUInt29();else if(marker==
weavejs.util.JSByteArray.Amf3Types_kDoubleType)return this.readDouble();else if(marker==weavejs.util.JSByteArray.Amf3Types_kStringType)return this.readStringAMF3();else if(marker==weavejs.util.JSByteArray.Amf3Types_kXMLType)return this.readXML();else if(marker==weavejs.util.JSByteArray.Amf3Types_kDateType){ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];var d=this.readDouble();value=new Date(d);this.objectTable.push(value);return value}else if(marker==weavejs.util.JSByteArray.Amf3Types_kArrayType){ref=
this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];len=ref>>1;var key=this.readStringAMF3();if(key==''){var a=[];for(i=0;i<len;i++){value=this.readObject();a.push(value)}return a}var result={};while(key!=''){result[key]=this.readObject();key=this.readStringAMF3()}for(i=0;i<len;i++)result[i]=this.readObject();return result}else if(marker==weavejs.util.JSByteArray.Amf3Types_kObjectType){var o={};this.objectTable.push(o);ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];
var ti=this.readTraits(ref);var className=ti.className;var externalizable=ti.externalizable;if(externalizable)o=this.readExternalizable(className);else{len=ti.properties.length;for(i=0;i<len;i++){var propName=ti.properties[i];value=this.readObject();o[propName]=value}if(ti.dynamic)for(;;){var name=this.readStringAMF3();if(name==null||name.length==0)break;value=this.readObject();o[name]=value}}return o}else if(marker==weavejs.util.JSByteArray.Amf3Types_kAvmPlusXmlType){ref=this.readUInt29();if((ref&
1)==0)return this.stringToXML(this.objectTable[ref>>1]);len=ref>>1;if(0==len)return null;var str=this.readString(len);var xml=this.stringToXML(str);this.objectTable.push(xml);return xml}else if(marker==weavejs.util.JSByteArray.Amf3Types_kByteArrayType){ref=this.readUInt29();if((ref&1)==0)return this.objectTable[ref>>1];len=ref>>1;var ba=new weavejs.util.JSByteArray;this.objectTable.push(ba);for(i=0;i<len;i++)ba.writeByte(this.readByte());return ba}return undefined};
weavejs.util.JSByteArray.prototype.FLEXJS_CLASS_INFO={names:[{name:'JSByteArray',qName:'weavejs.util.JSByteArray'}]};goog.provide('weavejs.core.WeaveArchive');goog.require('weavejs.util.BackwardsCompatibility');goog.require('weavejs.util.JSByteArray');weavejs.core.WeaveArchive=function(byteArray){byteArray=typeof byteArray!=='undefined'?byteArray:null;this.files={};this.objects={};if(byteArray)this._readArchive(byteArray)};weavejs.core.WeaveArchive.prototype.files;weavejs.core.WeaveArchive.prototype.objects;weavejs.core.WeaveArchive.FOLDER_AMF='weave-amf';weavejs.core.WeaveArchive.FOLDER_JSON='weave-json';
weavejs.core.WeaveArchive.FOLDER_FILES='weave-files';
weavejs.core.WeaveArchive.prototype._readArchive=function(byteArray){var zip=new weavejs.util.JS.JSZip(byteArray);for(var filePath in zip.files){var fileName=filePath.substr(filePath.indexOf('/')+1);var file=zip.files[filePath];if(filePath.indexOf(weavejs.core.WeaveArchive.FOLDER_JSON+'/')==0)this.objects[fileName]=JSON.parse(file.asText());else if(filePath.indexOf(weavejs.core.WeaveArchive.FOLDER_AMF+'/')==0){var amf=new weavejs.util.JSByteArray(file.asUint8Array());this.objects[fileName]=amf.readObject()}else this.files[fileName]=
file.asUint8Array()}};weavejs.core.WeaveArchive.prototype.serialize=function(){var zip=new weavejs.util.JS.JSZip;var name;var folder;folder=zip.folder(weavejs.core.WeaveArchive.FOLDER_FILES);for(name in this.files)folder.file(name,this.files[name]);folder=zip.folder(weavejs.core.WeaveArchive.FOLDER_JSON);for(name in this.objects)folder.file(name,JSON.stringify(this.objects[name]));return zip.generate({type:'uint8array'})};weavejs.core.WeaveArchive.ARCHIVE_HISTORY_AMF='history.amf';
weavejs.core.WeaveArchive.ARCHIVE_HISTORY_JSON='history.json';weavejs.core.WeaveArchive.ARCHIVE_COLUMN_CACHE_AMF='column-cache.amf';weavejs.core.WeaveArchive.ARCHIVE_COLUMN_CACHE_JSON='column-cache.json';
weavejs.core.WeaveArchive.loadUrl=function(weave,fileUrl){var promise=new weavejs.util.WeavePromise(weave.root);promise.setResult(weavejs.WeaveAPI.URLRequestUtils.request(weave.root,weavejs.net.URLRequestUtils.METHOD_GET,fileUrl,null,null,weavejs.net.URLRequestUtils.RESPONSE_ARRAYBUFFER).then(weavejs.core.WeaveArchive.loadFileContent.bind(weavejs.core.WeaveArchive,weave),weavejs.util.JS.error));return promise};
weavejs.core.WeaveArchive.loadFileContent=function(weave,fileContent){var archive=new weavejs.core.WeaveArchive(fileContent);var history=archive.objects[weavejs.core.WeaveArchive.ARCHIVE_HISTORY_AMF]||archive.objects[weavejs.core.WeaveArchive.ARCHIVE_HISTORY_JSON];if(history)weave.history.setSessionState(weavejs.util.BackwardsCompatibility.updateSessionState(history));else throw new Error('No session history found');var columnCache=archive.objects[weavejs.core.WeaveArchive.ARCHIVE_COLUMN_CACHE_AMF]||
archive.objects[weavejs.core.WeaveArchive.ARCHIVE_COLUMN_CACHE_JSON];if(columnCache)org.apache.flex.utils.Language.as(weavejs.WeaveAPI.AttributeColumnCache,weavejs.data.AttributeColumnCache).restoreCache(weave.root,columnCache);var fileName;for(fileName in archive.files)weavejs.WeaveAPI.URLRequestUtils.saveLocalFile(weave.root,fileName,archive.files[fileName]);var foreachiter0_target=weavejs.WeaveAPI.URLRequestUtils.getLocalFileNames(weave.root);for(var foreachiter0 in foreachiter0_target){fileName=
foreachiter0_target[foreachiter0];if(!archive.files[fileName])weavejs.WeaveAPI.URLRequestUtils.removeLocalFile(weave.root,fileName)}};
weavejs.core.WeaveArchive.createArchive=function(weave){var archive=new weavejs.core.WeaveArchive;var foreachiter1_target=weavejs.WeaveAPI.URLRequestUtils.getLocalFileNames(weave.root);for(var foreachiter1 in foreachiter1_target){var fileName=foreachiter1_target[foreachiter1];archive.files[fileName]=weavejs.WeaveAPI.URLRequestUtils.getLocalFile(weave.root,fileName)}var _history=weave.history.getSessionState();archive.objects[weavejs.core.WeaveArchive.ARCHIVE_HISTORY_AMF]=_history;if(weavejs.WeaveAPI.AttributeColumnCache['saveCache'])archive.objects[weavejs.core.WeaveArchive.ARCHIVE_COLUMN_CACHE_AMF]=
weavejs.WeaveAPI.AttributeColumnCache['saveCache'];return archive};weavejs.core.WeaveArchive.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveArchive',qName:'weavejs.core.WeaveArchive'}]};goog.provide('weavejs.api.data.IBinClassifier');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IBinClassifier=function(){};weavejs.api.data.IBinClassifier.prototype.contains=function(value){};weavejs.api.data.IBinClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBinClassifier',qName:'weavejs.api.data.IBinClassifier'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.api.data.IBinningDefinition');goog.require('weavejs.api.core.ILinkableObject');weavejs.api.data.IBinningDefinition=function(){};weavejs.api.data.IBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){};weavejs.api.data.IBinningDefinition.prototype.asyncResultCallbacks;weavejs.api.data.IBinningDefinition.prototype.getBinClassifiers=function(){};weavejs.api.data.IBinningDefinition.prototype.getBinNames=function(){};
weavejs.api.data.IBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'IBinningDefinition',qName:'weavejs.api.data.IBinningDefinition'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.api.data.IBinningDefinition');
weavejs.data.bin.AbstractBinningDefinition=function(allowOverrideBinNames,allowOverrideInputRange){this.output=Weave.disposableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IBinClassifier));this._asyncResultCallbacks=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._overrideBinNamesArray=[];if(allowOverrideBinNames)this._overrideBinNames=Weave.linkableChild(this,new weavejs.core.LinkableString(''));if(allowOverrideInputRange){this._overrideInputMin=Weave.linkableChild(this,
weavejs.core.LinkableNumber);this._overrideInputMax=Weave.linkableChild(this,weavejs.core.LinkableNumber)}};weavejs.data.bin.AbstractBinningDefinition.prototype.output;weavejs.data.bin.AbstractBinningDefinition.prototype._asyncResultCallbacks;weavejs.data.bin.AbstractBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){throw new Error('Not implemented');};weavejs.data.bin.AbstractBinningDefinition.prototype.getBinNames=function(){if(Weave.isBusy(this))return null;return this.output.getNames()};
weavejs.data.bin.AbstractBinningDefinition.prototype.getBinClassifiers=function(){if(Weave.isBusy(this))return null;return this.output.getObjects()};weavejs.data.bin.AbstractBinningDefinition.prototype._overrideBinNames;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideInputMin;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideInputMax;weavejs.data.bin.AbstractBinningDefinition.prototype._overrideBinNamesArray;
weavejs.data.bin.AbstractBinningDefinition.prototype.getOverrideNames=function(){if(this.overrideBinNames&&Weave.detectChange(org.apache.flex.utils.Language.closure(this.getOverrideNames,this,'getOverrideNames'),this.overrideBinNames))this._overrideBinNamesArray=weavejs.WeaveAPI.CSVParser.parseCSVRow(this.overrideBinNames.value)||[];return this._overrideBinNamesArray};
Object.defineProperties(weavejs.data.bin.AbstractBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return this._asyncResultCallbacks}},overrideBinNames:{get:function(){return this._overrideBinNames}},overrideInputMin:{get:function(){return this._overrideInputMin}},overrideInputMax:{get:function(){return this._overrideInputMax}}});
weavejs.data.bin.AbstractBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'AbstractBinningDefinition',qName:'weavejs.data.bin.AbstractBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};goog.provide('weavejs.data.bin.SingleValueClassifier');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.api.data.IBinClassifier');weavejs.data.bin.SingleValueClassifier=function(){weavejs.data.bin.SingleValueClassifier.base(this,'constructor')};goog.inherits(weavejs.data.bin.SingleValueClassifier,weavejs.core.LinkableVariable);weavejs.data.bin.SingleValueClassifier.prototype.contains=function(value){return this.sessionStateEquals(value)};
weavejs.data.bin.SingleValueClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'SingleValueClassifier',qName:'weavejs.data.bin.SingleValueClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.provide('weavejs.data.bin.CategoryBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.data.bin.SingleValueClassifier');
weavejs.data.bin.CategoryBinningDefinition=function(){this._iterateAll=weavejs.core.Scheduler.generateCompoundIterativeTask(org.apache.flex.utils.Language.closure(this._iterate1,this,'_iterate1'),org.apache.flex.utils.Language.closure(this._iterate2,this,'_iterate2'));this.asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);weavejs.data.bin.CategoryBinningDefinition.base(this,'constructor',false,false)};goog.inherits(weavejs.data.bin.CategoryBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.CategoryBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this.output.removeAllObjects();this._sortMap={};this.strArray=new Array(column.keys.length);this.column=column;this.i=this.iout=0;this.keys=column.keys;this._iterateAll(-1);weavejs.WeaveAPI.Scheduler.startTask(this.asyncResultCallbacks,this._iterateAll,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._done,this,'_done'))};weavejs.data.bin.CategoryBinningDefinition.prototype._sortMap;
weavejs.data.bin.CategoryBinningDefinition.prototype.strArray;weavejs.data.bin.CategoryBinningDefinition.prototype.i;weavejs.data.bin.CategoryBinningDefinition.prototype.iout;weavejs.data.bin.CategoryBinningDefinition.prototype.str;weavejs.data.bin.CategoryBinningDefinition.prototype.column;weavejs.data.bin.CategoryBinningDefinition.prototype.keys;weavejs.data.bin.CategoryBinningDefinition.prototype._iterateAll;weavejs.data.bin.CategoryBinningDefinition.prototype.asyncSort;
weavejs.data.bin.CategoryBinningDefinition.prototype._iterate1=function(stopTime){for(;this.i<this.keys.length;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.keys.length;this.str=org.apache.flex.utils.Language.as(this.column.getValueFromKey(this.keys[this.i],String),String);if(this.str&&!this._sortMap.hasOwnProperty(this.str)){this.strArray[org.apache.flex.utils.Language._int(this.iout++)]=this.str;this._sortMap[this.str]=this.column.getValueFromKey(this.keys[this.i],Number)}}this.strArray.length=
this.iout;this.asyncSort.beginSort(this.strArray,org.apache.flex.utils.Language.closure(this._sortFunc,this,'_sortFunc'));this.i=0;return 1};
weavejs.data.bin.CategoryBinningDefinition.prototype._iterate2=function(stopTime){if(Weave.isBusy(this.asyncSort))return 0;for(;this.i<this.strArray.length;this.i++){if(weavejs.util.JS.now()>stopTime)return this.i/this.strArray.length;this.str=org.apache.flex.utils.Language.as(this.strArray[this.i],String);var svc=this.output.requestObject(this.str,weavejs.data.bin.SingleValueClassifier,false);svc.state=this.strArray[this.i]}return 1};weavejs.data.bin.CategoryBinningDefinition.prototype._done=function(){this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.CategoryBinningDefinition.prototype._sortFunc=function(str1,str2){return weavejs.util.StandardLib.numericCompare(this._sortMap[str1],this._sortMap[str2])||weavejs.util.StandardLib.stringCompare(str1,str2)};weavejs.data.bin.CategoryBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'CategoryBinningDefinition',qName:'weavejs.data.bin.CategoryBinningDefinition'}]};goog.provide('weavejs.data.bin.NumberClassifier');goog.require('weavejs.api.data.IBinClassifier');
weavejs.data.bin.NumberClassifier=function(min,max,minInclusive,maxInclusive){min=typeof min!=='undefined'?min:NaN;max=typeof max!=='undefined'?max:NaN;minInclusive=typeof minInclusive!=='undefined'?minInclusive:true;maxInclusive=typeof maxInclusive!=='undefined'?maxInclusive:true;this.min=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.max=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.minInclusive=Weave.linkableChild(this,weavejs.core.LinkableBoolean);this.maxInclusive=Weave.linkableChild(this,
weavejs.core.LinkableBoolean);this._callbacks=Weave.getCallbacks(this);this.min.value=min;this.max.value=max;this.minInclusive.value=minInclusive;this.maxInclusive.value=maxInclusive};weavejs.data.bin.NumberClassifier.prototype.min;weavejs.data.bin.NumberClassifier.prototype.max;weavejs.data.bin.NumberClassifier.prototype.minInclusive;weavejs.data.bin.NumberClassifier.prototype.maxInclusive;weavejs.data.bin.NumberClassifier.prototype._callbacks;
weavejs.data.bin.NumberClassifier.prototype._triggerCount=0;weavejs.data.bin.NumberClassifier.prototype._min;weavejs.data.bin.NumberClassifier.prototype._max;weavejs.data.bin.NumberClassifier.prototype._minInclusive;weavejs.data.bin.NumberClassifier.prototype._maxInclusive;
weavejs.data.bin.NumberClassifier.prototype.contains=function(value){if(this._triggerCount!=this._callbacks.triggerCounter){this._min=this.min.value;this._max=this.max.value;this._minInclusive=this.minInclusive.value;this._maxInclusive=this.maxInclusive.value;this._triggerCount=this._callbacks.triggerCounter}if(this._minInclusive?value>=this._min:value>this._min)if(this._maxInclusive?value<=this._max:value<this._max)return true;return false};
weavejs.data.bin.NumberClassifier.prototype.generateBinLabel=function(toStringColumn){toStringColumn=typeof toStringColumn!=='undefined'?toStringColumn:null;var minStr=null;var maxStr=null;minStr=weavejs.data.ColumnUtils.deriveStringFromNumber(toStringColumn,this.min.value)||'';maxStr=weavejs.data.ColumnUtils.deriveStringFromNumber(toStringColumn,this.max.value)||'';if(!minStr&&!maxStr){minStr=weavejs.util.StandardLib.formatNumber(this.min.value);maxStr=weavejs.util.StandardLib.formatNumber(this.max.value)}if(minStr&&
maxStr&&minStr==maxStr)return minStr;if(toStringColumn&&toStringColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE)==weavejs.api.data.DataType.STRING){minStr=Weave.lang('"{0}"',minStr);maxStr=Weave.lang('"{0}"',maxStr)}else{if(!this.minInclusive.value)minStr=Weave.lang('\x3e {0}',minStr);if(!this.maxInclusive.value)maxStr=Weave.lang('\x3c {0}',maxStr)}if(minStr=='')minStr=Weave.lang('Undefined');if(maxStr=='')maxStr=Weave.lang('Undefined');return Weave.lang('{0} to {1}',minStr,maxStr)};
weavejs.data.bin.NumberClassifier.prototype.toString=function(){return(this.minInclusive.value?'[':'(')+this.min.value+', '+this.max.value+(this.maxInclusive.value?']':')')};weavejs.data.bin.NumberClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'NumberClassifier',qName:'weavejs.data.bin.NumberClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.provide('weavejs.data.bin.CustomSplitBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');goog.require('weavejs.data.bin.NumberClassifier');weavejs.data.bin.CustomSplitBinningDefinition=function(){this.splitValues=Weave.linkableChild(this,weavejs.core.LinkableString);this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.CustomSplitBinningDefinition.base(this,'constructor',true,false)};
goog.inherits(weavejs.data.bin.CustomSplitBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);weavejs.data.bin.CustomSplitBinningDefinition.prototype.splitValues;
weavejs.data.bin.CustomSplitBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){Weave.getCallbacks(this.output).delayCallbacks();var name;this.output.removeAllObjects();var i;var values=String(this.splitValues.value||'').split(',');for(i=values.length;i--;){var number=weavejs.util.StandardLib.asNumber(values[i]);if(!isFinite(number))values.splice(i,1);else values[i]=number}weavejs.util.AsyncSort.sortImmediately(values);for(i=0;i<values.length-1;i++){this.tempNumberClassifier.min.value=
values[i];this.tempNumberClassifier.max.value=values[i+1];this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=i==values.length-2;name=this.getOverrideNames()[i];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}Weave.getCallbacks(this.output).resumeCallbacks();this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.CustomSplitBinningDefinition.prototype.tempNumberClassifier;
Object.defineProperties(weavejs.data.bin.CustomSplitBinningDefinition.prototype,{binRange:{set:function(value){this.splitValues.value=value}},dataMin:{set:function(value){this.splitValues.value=value+','+this.splitValues.value}},dataMax:{set:function(value){this.splitValues.value+=','+value}}});weavejs.data.bin.CustomSplitBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'CustomSplitBinningDefinition',qName:'weavejs.data.bin.CustomSplitBinningDefinition'}]};goog.provide('weavejs.data.bin.StringClassifier');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.api.data.IBinClassifier');weavejs.data.bin.StringClassifier=function(){weavejs.data.bin.StringClassifier.base(this,'constructor',Array,org.apache.flex.utils.Language.closure(this.isStringArray,this,'isStringArray'))};goog.inherits(weavejs.data.bin.StringClassifier,weavejs.core.LinkableVariable);
weavejs.data.bin.StringClassifier.prototype.setSessionState=function(value){if(org.apache.flex.utils.Language.is(value,String))value=weavejs.WeaveAPI.CSVParser.parseCSVRow(org.apache.flex.utils.Language.as(value,String));weavejs.data.bin.StringClassifier.base(this,'setSessionState',value)};weavejs.data.bin.StringClassifier.prototype.isStringArray=function(array){return weavejs.util.StandardLib.getArrayType(array)==String};weavejs.data.bin.StringClassifier.prototype._valueMap=null;
weavejs.data.bin.StringClassifier.prototype._triggerCount=0;weavejs.data.bin.StringClassifier.prototype.contains=function(value){if(this._triggerCount!=this.triggerCounter){this._triggerCount=this.triggerCounter;this._valueMap={};var foreachiter0_target=this._sessionStateInternal;for(var foreachiter0 in foreachiter0_target){var str=foreachiter0_target[foreachiter0];this._valueMap[str]=true}}return this._valueMap[value]!=undefined};
weavejs.data.bin.StringClassifier.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringClassifier',qName:'weavejs.data.bin.StringClassifier'}],interfaces:[weavejs.api.data.IBinClassifier]};goog.provide('weavejs.data.bin.DynamicBinningDefinition');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.data.bin.StringClassifier');goog.require('weavejs.api.data.IBinningDefinition');
weavejs.data.bin.DynamicBinningDefinition=function(lockFirstColumn){lockFirstColumn=typeof lockFirstColumn!=='undefined'?lockFirstColumn:false;this.internalResultWatcher=Weave.disposableChild(this,weavejs.core.LinkableWatcher);this.internalObjectWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.handleInternalObjectChange,this,'handleInternalObjectChange'));this.columnWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.generateBins,
this,'generateBins'));this.statsWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher,org.apache.flex.utils.Language.closure(this.generateBins,this,'generateBins'));this.overrideBinsOutput=Weave.disposableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IBinClassifier));weavejs.data.bin.DynamicBinningDefinition.base(this,'constructor',weavejs.api.data.IBinningDefinition);this.addImmediateCallback(null,org.apache.flex.utils.Language.closure(this.watchInternalObject,this,'watchInternalObject'));
this._columnLocked=lockFirstColumn};goog.inherits(weavejs.data.bin.DynamicBinningDefinition,weavejs.core.LinkableDynamicObject);weavejs.data.bin.DynamicBinningDefinition.prototype._columnLocked=false;weavejs.data.bin.DynamicBinningDefinition.prototype.internalResultWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.internalObjectWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.columnWatcher;weavejs.data.bin.DynamicBinningDefinition.prototype.statsWatcher;
weavejs.data.bin.DynamicBinningDefinition.prototype.watchInternalObject=function(){this.internalObjectWatcher.target=this.internalObject};weavejs.data.bin.DynamicBinningDefinition.prototype.handleInternalObjectChange=function(){if(this.internalObject)this.internalResultWatcher.target=org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).asyncResultCallbacks;this.generateBins()};weavejs.data.bin.DynamicBinningDefinition.prototype._updatingTargets=false;
weavejs.data.bin.DynamicBinningDefinition.prototype.generateBins=function(){if(this._updatingTargets)return;this._updatingTargets=true;var column=org.apache.flex.utils.Language.as(this.columnWatcher.target,weavejs.api.data.IAttributeColumn);this.statsWatcher.target=column?weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column):null;this._updatingTargets=false;var overrideBins=column?column.getMetadata(weavejs.api.data.ColumnMetadata.OVERRIDE_BINS):null;if(overrideBins&&weavejs.data.bin.DynamicBinningDefinition.getBinsFromJson(overrideBins,
this.overrideBinsOutput,column))this.asyncResultCallbacks.triggerCallbacks();else this.overrideBinsOutput.removeAllObjects();if(this.internalObject&&column)org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).generateBinClassifiersForColumn(column);else this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.DynamicBinningDefinition.getBinsFromJson=function(json,output,toStringColumn){toStringColumn=typeof toStringColumn!=='undefined'?toStringColumn:null;if(!weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier)weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier=new weavejs.data.bin.NumberClassifier;Weave.getCallbacks(output).delayCallbacks();output.removeAllObjects();var array;try{array=org.apache.flex.utils.Language.as(JSON.parse(json),Array);var foreachiter0_target=
array;for(var foreachiter0 in foreachiter0_target){var item=foreachiter0_target[foreachiter0];var label;if(org.apache.flex.utils.Language.is(item,String)||weavejs.util.StandardLib.getArrayType(org.apache.flex.utils.Language.as(item,Array))==String){label=org.apache.flex.utils.Language.as(org.apache.flex.utils.Language.as(item,Array)||[item],Array).join(', ');var sc=output.requestObject(label,weavejs.data.bin.StringClassifier,false);sc.setSessionState(org.apache.flex.utils.Language.as(item,Array)||
[item])}else{weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=-Infinity;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=Infinity;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.minInclusive.value=true;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.maxInclusive.value=true;if(org.apache.flex.utils.Language.is(item,Array)){weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=item[0];weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=
item[1]}else if(org.apache.flex.utils.Language.is(item,Number)){weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.min.value=org.apache.flex.utils.Language.as(item,Number);weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.max.value=org.apache.flex.utils.Language.as(item,Number)}else weavejs.WeaveAPI.SessionManager.setSessionState(weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier,item);if(item&&typeof item=='object'&&item['label'])label=item['label'];else label=
weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier.generateBinLabel(toStringColumn);output.requestObjectCopy(label,weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier)}}}catch(e){weavejs.util.JS.error('Invalid JSON bin specification: '+json,null,e);Weave.getCallbacks(output).resumeCallbacks();return false}Weave.getCallbacks(output).resumeCallbacks();return true};
weavejs.data.bin.DynamicBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){if(this._columnLocked&&this.columnWatcher.target)throw new Error('generateBinClassifiersForColumn(): Column was locked upon creation of this DynamicBinningDefinition.');this.columnWatcher.target=column};
weavejs.data.bin.DynamicBinningDefinition.prototype.getBinClassifiers=function(){var override=this.overrideBinsOutput.getObjects();if(override.length)return override;if(this.internalObject&&this.columnWatcher.target)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).getBinClassifiers();return[]};
weavejs.data.bin.DynamicBinningDefinition.prototype.getBinNames=function(){var override=this.overrideBinsOutput.getNames();if(override.length)return override;if(this.internalObject&&this.columnWatcher.target)return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IBinningDefinition).getBinNames();return[]};weavejs.data.bin.DynamicBinningDefinition.prototype.overrideBinsOutput;weavejs.data.bin.DynamicBinningDefinition.tempNumberClassifier;
Object.defineProperties(weavejs.data.bin.DynamicBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return Weave.getCallbacks(this.internalResultWatcher)}},binsOverridden:{get:function(){return this.overrideBinsOutput.getNames().length>0}}});weavejs.data.bin.DynamicBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicBinningDefinition',qName:'weavejs.data.bin.DynamicBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};goog.provide('weavejs.data.bin.EqualIntervalBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.EqualIntervalBinningDefinition=function(){this.dataInterval=Weave.linkableChild(this,new weavejs.core.LinkableNumber);this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.EqualIntervalBinningDefinition.base(this,'constructor',true,true)};goog.inherits(weavejs.data.bin.EqualIntervalBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.EqualIntervalBinningDefinition.prototype.dataInterval;
weavejs.data.bin.EqualIntervalBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var dataMin=isFinite(this.overrideInputMin.value)?this.overrideInputMin.value:stats.getMin();var dataMax=isFinite(this.overrideInputMax.value)?this.overrideInputMax.value:stats.getMax();var binMin;var binMax=dataMin;var maxInclusive;var numberOfBins=Math.ceil((dataMax-dataMin)/this.dataInterval.value);
for(var iBin=0;iBin<numberOfBins;iBin++){binMin=binMax;if(iBin==numberOfBins-1){binMax=dataMax;maxInclusive=true}else{maxInclusive=false;binMax=binMin+this.dataInterval.value;binMax=weavejs.util.StandardLib.roundSignificant(binMax,4)}if(iBin>0)binMin=weavejs.util.StandardLib.roundSignificant(binMin,4);if(binMin==binMax&&!maxInclusive)continue;this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=binMax;this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=
maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.EqualIntervalBinningDefinition.prototype.tempNumberClassifier;weavejs.data.bin.EqualIntervalBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'EqualIntervalBinningDefinition',qName:'weavejs.data.bin.EqualIntervalBinningDefinition'}]};goog.provide('weavejs.data.bin.ExplicitBinningDefinition');goog.require('weavejs.core.LinkableHashMap');goog.require('weavejs.api.data.IBinningDefinition');weavejs.data.bin.ExplicitBinningDefinition=function(){weavejs.data.bin.ExplicitBinningDefinition.base(this,'constructor',weavejs.api.data.IBinClassifier)};goog.inherits(weavejs.data.bin.ExplicitBinningDefinition,weavejs.core.LinkableHashMap);weavejs.data.bin.ExplicitBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){};
weavejs.data.bin.ExplicitBinningDefinition.prototype.getBinClassifiers=function(){return this.getObjects()};weavejs.data.bin.ExplicitBinningDefinition.prototype.getBinNames=function(){return this.getNames()};Object.defineProperties(weavejs.data.bin.ExplicitBinningDefinition.prototype,{asyncResultCallbacks:{get:function(){return this}}});
weavejs.data.bin.ExplicitBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'ExplicitBinningDefinition',qName:'weavejs.data.bin.ExplicitBinningDefinition'}],interfaces:[weavejs.api.data.IBinningDefinition]};goog.provide('weavejs.data.bin.NaturalJenksBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');
weavejs.data.bin.NaturalJenksBinningDefinition=function(){this.numOfBins=Weave.linkableChild(this,new weavejs.core.LinkableNumber(5));this._tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);this.asyncSort=Weave.disposableChild(this,weavejs.util.AsyncSort);this._compoundIterateAll=weavejs.core.Scheduler.generateCompoundIterativeTask(org.apache.flex.utils.Language.closure(this._getValueFromKeys,this,'_getValueFromKeys'),org.apache.flex.utils.Language.closure(this._iterateSortedKeys,
this,'_iterateSortedKeys'),org.apache.flex.utils.Language.closure(this._iterateJenksBreaks,this,'_iterateJenksBreaks'));this._keys=[];this._lower_class_limits=[];this._variance_combinations=[];this._previousSortedValues=[];this._sortedValues=[];weavejs.data.bin.NaturalJenksBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.NaturalJenksBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);weavejs.data.bin.NaturalJenksBinningDefinition.prototype.numOfBins;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._tempNumberClassifier;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._column=null;weavejs.data.bin.NaturalJenksBinningDefinition.prototype.asyncSort;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this._column=column;if(column){var nonWrapperColumn=weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column);if(org.apache.flex.utils.Language.is(nonWrapperColumn,weavejs.data.column.SecondaryKeyNumColumn)){weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=true;var noChange=this._keys===nonWrapperColumn.keys;this._keys=nonWrapperColumn.keys;weavejs.data.column.SecondaryKeyNumColumn.allKeysHack=
false;if(noChange){this.asyncResultCallbacks.triggerCallbacks();return}}else this._keys=column.keys.concat()}else this._keys=[];this._sortedValues=new Array;this._numOfBins=this.numOfBins.value;this._keyCount=0;this._previousSortedValues.length=0;this.output.removeAllObjects();this.asyncSort.beginSort(this._previousSortedValues);this._compoundIterateAll(-1);weavejs.WeaveAPI.Scheduler.startTask(this.asyncResultCallbacks,this._compoundIterateAll,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this._handleJenksBreaks,
this,'_handleJenksBreaks'),Weave.lang('Computing Natural Breaks binning for {0} values',this._keys.length))};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._compoundIterateAll;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._numOfBins;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._keyCount=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._keys;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._getValueFromKeys=function(stopTime){var currValue;for(;this._keyCount<this._keys.length;this._keyCount++){if(weavejs.util.JS.now()>stopTime)return this._keyCount/this._keys.length;currValue=this._column.getValueFromKey(this._keys[this._keyCount],Number);if(isFinite(currValue))this._sortedValues.push(currValue)}this.asyncSort.beginSort(this._sortedValues,weavejs.util.StandardLib.numericCompare);return 1};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._lower_class_limits;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._variance_combinations;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._iterateSortedKeys=function(returnTime){if(this.asyncSort.result==null)return 0;weavejs.util.ArrayUtils.copy(this._sortedValues,this._previousSortedValues);if(this._sortedValues.length==0)return 1;this._lower_class_limits=[];this._variance_combinations=[];for(var i=0;i<this._sortedValues.length+1;i++){var temp1=[];var temp2=[];for(var j=0;j<this._numOfBins+1;j++){temp1.push(0);temp2.push(0)}this._lower_class_limits.push(temp1);this._variance_combinations.push(temp2)}for(var k=
1;k<this._numOfBins+1;k++){this._lower_class_limits[1][k]=1;this._variance_combinations[1][k]=0;for(var t=2;t<this._sortedValues.length+1;t++)this._variance_combinations[t][k]=Number.POSITIVE_INFINITY}this._variance=0;this._count=2;this._m=0;return 1};weavejs.data.bin.NaturalJenksBinningDefinition.prototype._previousSortedValues;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sortedValues;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._count=2;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._m=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._p=2;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._variance=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sum=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._sum_squares=0;weavejs.data.bin.NaturalJenksBinningDefinition.prototype._w=0;
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._iterateJenksBreaks=function(returnTime){for(;this._count<this._sortedValues.length+1;this._count++){if(this._m==0){this._sum=0;this._sum_squares=0;this._w=0;this._m=1}for(;this._m<this._count+1;this._m++){if(weavejs.util.JS.now()>returnTime)return this._count/(this._sortedValues.length+1);var lower_class_limit=this._count-this._m+1;var val=this._sortedValues[lower_class_limit-1];this._sum_squares+=val*val;this._sum+=val;this._w+=1;this._variance=
this._sum_squares-this._sum*this._sum/this._w;var i4=lower_class_limit-1;if(i4!=0){this._p=2;for(;this._p<this._numOfBins+1;this._p++)if(this._variance_combinations[this._count][this._p]>=this._variance+this._variance_combinations[i4][this._p-1]){this._lower_class_limits[this._count][this._p]=lower_class_limit;this._variance_combinations[this._count][this._p]=this._variance+this._variance_combinations[i4][this._p-1]}}}this._m=0;this._lower_class_limits[this._count][1]=1;this._variance_combinations[this._count][1]=
this._variance}return 1};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype._handleJenksBreaks=function(){var k,value,data=this._sortedValues,kclass=[],countNum=1;value=data[0];for(k=1;k<data.length;k++)if(value!=data[k]){value=data[k];countNum++;if(countNum>=this._numOfBins)break}kclass[countNum]=data[data.length-1];kclass[0]=data[0];k=data.length-1;while(countNum>1){kclass[countNum-1]=data[this._lower_class_limits[k][countNum]-2];k=this._lower_class_limits[k][countNum]-1;countNum--}for(var iBin=0;iBin<kclass.length-
1;iBin++){var minIndex;if(iBin==0)minIndex=0;else{minIndex=this._previousSortedValues.lastIndexOf(kclass[iBin]);minIndex=minIndex+1}this._tempNumberClassifier.min.value=this._previousSortedValues[minIndex];var maxIndex;if(iBin==this._numOfBins-1)maxIndex=this._previousSortedValues.length-1;else maxIndex=this._previousSortedValues.lastIndexOf(kclass[iBin+1]);if(maxIndex==-1)this._tempNumberClassifier.max.value=this._tempNumberClassifier.min.value;else this._tempNumberClassifier.max.value=this._previousSortedValues[maxIndex];
this._tempNumberClassifier.minInclusive.value=true;this._tempNumberClassifier.maxInclusive.value=true;if(this._tempNumberClassifier.min.value>this._tempNumberClassifier.max.value)continue;var name=this.getOverrideNames()[iBin];if(!name)name=this._tempNumberClassifier.generateBinLabel(this._column);this.output.requestObjectCopy(name,this._tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.fixMinMaxInclusive=function(){var a=this.output.getObjects(weavejs.data.bin.NumberClassifier);for(var i=0;i<a.length;i++){var nc1=a[i];var nc2=a[i+1];if(nc1&&nc2&&nc1.max.value==nc2.min.value)nc2.minInclusive.value=!(nc1.maxInclusive.value=nc1.min.value==nc1.max.value||!nc1.minInclusive.value);var newName1=this.getOverrideNames()[i]||nc1.generateBinLabel(this._column);this.output.renameObject(this.output.getName(nc1),newName1)}};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.getSumOfNumbers=function(list){var result=0;try{var foreachiter0_target=list;for(var foreachiter0 in foreachiter0_target){var num=foreachiter0_target[foreachiter0];result+=num}}catch(e){weavejs.util.JS.error(e,'Error adding numbers in array');return 0}return result};
weavejs.data.bin.NaturalJenksBinningDefinition.prototype.getSortedNumbersFromColumn=function(column){var keys=column?column.keys:[];var sortedColumn=new Array(keys.length);for(var i=0;i<keys.length;i++)sortedColumn[i]=Number(column.getValueFromKey(keys[i],Number));weavejs.util.AsyncSort.sortImmediately(sortedColumn);return sortedColumn};weavejs.data.bin.NaturalJenksBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'NaturalJenksBinningDefinition',qName:'weavejs.data.bin.NaturalJenksBinningDefinition'}]};goog.provide('weavejs.data.bin.QuantileBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.QuantileBinningDefinition=function(){this.refQuantile=Weave.linkableChild(this,new weavejs.core.LinkableNumber(.3));this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.QuantileBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.QuantileBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.QuantileBinningDefinition.prototype.refQuantile;
weavejs.data.bin.QuantileBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var sortedColumn=this.getSortedColumn(column);var binMin;var binMax=sortedColumn[0];var maxInclusive;var refBinSize=Math.ceil(stats.getCount()*this.refQuantile.value);var numberOfBins=Math.ceil(stats.getCount()/refBinSize);var binRecordCount=refBinSize;for(var iBin=0;iBin<numberOfBins;iBin++){binRecordCount=
(iBin+1)*refBinSize;binMin=binMax;if(iBin==numberOfBins-1){binMax=sortedColumn[sortedColumn.length-1];maxInclusive=true}else{binMax=sortedColumn[binRecordCount-1];maxInclusive=binMax==binMin}this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=binMax;this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,
this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.QuantileBinningDefinition.prototype.tempNumberClassifier;
weavejs.data.bin.QuantileBinningDefinition.prototype.getSortedColumn=function(column){var keys=column?column.keys:[];var _sortedColumn=new Array(keys.length);var i=0;var foreachiter0_target=keys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];var n=column.getValueFromKey(key,Number);if(isFinite(n))_sortedColumn[i++]=n}_sortedColumn.length=i;weavejs.util.AsyncSort.sortImmediately(_sortedColumn);return _sortedColumn};
weavejs.data.bin.QuantileBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'QuantileBinningDefinition',qName:'weavejs.data.bin.QuantileBinningDefinition'}]};goog.provide('weavejs.data.bin.SimpleBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.SimpleBinningDefinition=function(){this.numberOfBins=Weave.linkableChild(this,new weavejs.core.LinkableNumber(5));this.tempNumberClassifier=Weave.disposableChild(this,weavejs.data.bin.NumberClassifier);weavejs.data.bin.SimpleBinningDefinition.base(this,'constructor',true,true)};goog.inherits(weavejs.data.bin.SimpleBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.SimpleBinningDefinition.prototype.numberOfBins;
weavejs.data.bin.SimpleBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){var name;this.output.removeAllObjects();var integerValuesOnly=false;var nonWrapperColumn=weavejs.data.ColumnUtils.hack_findNonWrapperColumn(column);if(nonWrapperColumn){var dataType=nonWrapperColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);if(dataType&&dataType!=weavejs.api.data.DataType.NUMBER)integerValuesOnly=true}var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);
var dataMin=isFinite(this.overrideInputMin.value)?this.overrideInputMin.value:stats.getMin();var dataMax=isFinite(this.overrideInputMax.value)?this.overrideInputMax.value:stats.getMax();if(isNaN(dataMin)){this.asyncResultCallbacks.triggerCallbacks();return}var binMin;var binMax=dataMin;var maxInclusive;for(var iBin=0;iBin<this.numberOfBins.value;iBin++){if(integerValuesOnly){maxInclusive=true;if(iBin==0)binMin=dataMin;else binMin=binMax+1;if(iBin==this.numberOfBins.value-1)binMax=dataMax;else binMax=
Math.floor(dataMin+(iBin+1)*(dataMax-dataMin)/this.numberOfBins.value);if(binMin>binMax)continue}else{binMin=binMax;if(iBin==this.numberOfBins.value-1){binMax=dataMax;maxInclusive=true}else{maxInclusive=false;binMax=dataMin+(iBin+1)*(dataMax-dataMin)/this.numberOfBins.value;binMax=weavejs.util.StandardLib.roundSignificant(binMax,4)}if(iBin>0)binMin=weavejs.util.StandardLib.roundSignificant(binMin,4);if(binMin==binMax&&!maxInclusive)continue}this.tempNumberClassifier.min.value=binMin;this.tempNumberClassifier.max.value=
binMax;this.tempNumberClassifier.minInclusive.value=true;this.tempNumberClassifier.maxInclusive.value=maxInclusive;name=this.getOverrideNames()[iBin];if(!name)name=this.tempNumberClassifier.generateBinLabel(column);this.output.requestObjectCopy(name,this.tempNumberClassifier)}this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.SimpleBinningDefinition.prototype.tempNumberClassifier;
weavejs.data.bin.SimpleBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'SimpleBinningDefinition',qName:'weavejs.data.bin.SimpleBinningDefinition'}]};goog.provide('weavejs.data.bin.StandardDeviationBinningDefinition');goog.require('weavejs.data.bin.AbstractBinningDefinition');weavejs.data.bin.StandardDeviationBinningDefinition=function(){weavejs.data.bin.StandardDeviationBinningDefinition.base(this,'constructor',true,false)};goog.inherits(weavejs.data.bin.StandardDeviationBinningDefinition,weavejs.data.bin.AbstractBinningDefinition);
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.generateBinClassifiersForColumn=function(column){this.output.removeAllObjects();var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(column);var mean=stats.getMean();var stdDev=stats.getStandardDeviation();var binNumber=0;for(var i=-weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD;i<=weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD;i++)if(i!=0)this.addBin(this.output,Math.abs(i),i<0,stdDev,mean,this.getOverrideNames()[binNumber++]);
this.asyncResultCallbacks.triggerCallbacks()};weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD=3;
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.addBin=function(output,absSDNumber,belowMean,stdDev,mean,overrideName){var name=overrideName;if(!name){var nameFormat=absSDNumber<weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD?'{0} - {1} SD {2} mean':'\x3e {0} SD {2} mean';name=weavejs.util.StandardLib.substitute(nameFormat,absSDNumber-1,absSDNumber,belowMean?'below':'above')}var bin=output.requestObject(name,weavejs.data.bin.NumberClassifier,false);if(belowMean){if(absSDNumber==
weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD)bin.min.value=-Infinity;else bin.min.value=mean-absSDNumber*stdDev;bin.max.value=mean-(absSDNumber-1)*stdDev}else{bin.min.value=mean+(absSDNumber-1)*stdDev;if(absSDNumber==weavejs.data.bin.StandardDeviationBinningDefinition.MAX_SD)bin.max.value=Infinity;else bin.max.value=mean+absSDNumber*stdDev}bin.minInclusive.value=true;bin.maxInclusive.value=true};
weavejs.data.bin.StandardDeviationBinningDefinition.prototype.FLEXJS_CLASS_INFO={names:[{name:'StandardDeviationBinningDefinition',qName:'weavejs.data.bin.StandardDeviationBinningDefinition'}]};goog.provide('weavejs.data.column.AlwaysDefinedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');
weavejs.data.column.AlwaysDefinedColumn=function(defaultValue,defaultValueVerifier){defaultValue=typeof defaultValue!=='undefined'?defaultValue:undefined;defaultValueVerifier=typeof defaultValueVerifier!=='undefined'?defaultValueVerifier:null;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true);weavejs.data.column.AlwaysDefinedColumn.base(this,'constructor');this._defaultValue=new weavejs.core.LinkableVariable(defaultValue,defaultValueVerifier);Weave.linkableChild(this,this._defaultValue,org.apache.flex.utils.Language.closure(this.handleDefaultValueChange,
this,'handleDefaultValueChange'))};goog.inherits(weavejs.data.column.AlwaysDefinedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.AlwaysDefinedColumn.prototype.containsKey=function(key){return true};weavejs.data.column.AlwaysDefinedColumn.prototype._defaultValue;weavejs.data.column.AlwaysDefinedColumn.prototype.handleDefaultValueChange=function(){this._cachedDefaultValue=this.defaultValue.state};weavejs.data.column.AlwaysDefinedColumn.prototype._cachedDefaultValue;weavejs.data.column.AlwaysDefinedColumn.prototype.d2d_type_key;
weavejs.data.column.AlwaysDefinedColumn.prototype._cacheCounter=0;weavejs.data.column.AlwaysDefinedColumn.UNDEFINED={};
weavejs.data.column.AlwaysDefinedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(!dataType)dataType=Array;if(!weavejs.data.column.DynamicColumn.cache){var value=this.internalDynamicColumn.getValueFromKey(key,dataType);if(weavejs.util.StandardLib.isUndefined(value)){value=this._cachedDefaultValue;if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType)}return value}if(this.triggerCounter!=this._cacheCounter){this._cacheCounter=
this.triggerCounter;this.d2d_type_key=new weavejs.util.Dictionary2D(true,true)}value=this.d2d_type_key.get(dataType,key);if(value===undefined){value=this.internalDynamicColumn.getValueFromKey(key,dataType);if(weavejs.util.StandardLib.isUndefined(value)){value=this._cachedDefaultValue;if(dataType!=null)value=weavejs.data.EquationColumnLib.cast(value,dataType)}this.d2d_type_key.set(dataType,key,value===undefined?weavejs.data.column.AlwaysDefinedColumn.UNDEFINED:value)}return value===weavejs.data.column.AlwaysDefinedColumn.UNDEFINED?
undefined:value};Object.defineProperties(weavejs.data.column.AlwaysDefinedColumn.prototype,{defaultValue:{get:function(){return this._defaultValue}}});weavejs.data.column.AlwaysDefinedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'AlwaysDefinedColumn',qName:'weavejs.data.column.AlwaysDefinedColumn'}]};goog.provide('weavejs.data.column.BinnedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.BinnedColumn=function(){this.binningDefinition=Weave.linkableChild(this,new weavejs.data.bin.DynamicBinningDefinition(true));this._binNames=[];this._binClassifiers=[];this.map_key_binIndex=new weavejs.util.JS.Map;this._binnedKeysArray=[];this._binnedKeysMap={};weavejs.data.column.BinnedColumn.base(this,'constructor');this.binningDefinition.requestLocalObject(weavejs.data.bin.SimpleBinningDefinition,false);this.binningDefinition.generateBinClassifiersForColumn(this.internalDynamicColumn);
Weave.linkableChild(this,this.binningDefinition.asyncResultCallbacks)};goog.inherits(weavejs.data.column.BinnedColumn,weavejs.data.column.ExtendedDynamicColumn);
weavejs.data.column.BinnedColumn.prototype.getMetadata=function(propertyName){this.validateBins();if(this._binClassifiers&&this._binClassifiers.length)switch(propertyName){case weavejs.api.data.ColumnMetadata.MIN:return this.numberOfBins>0?'0':null;case weavejs.api.data.ColumnMetadata.MAX:var binCount=this.numberOfBins;return binCount>0?String(binCount-1):null}return weavejs.data.column.BinnedColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.BinnedColumn.prototype.binningDefinition;
weavejs.data.column.BinnedColumn.prototype._binNames;weavejs.data.column.BinnedColumn.prototype._binClassifiers;weavejs.data.column.BinnedColumn.prototype.map_key_binIndex;weavejs.data.column.BinnedColumn.prototype._binnedKeysArray;weavejs.data.column.BinnedColumn.prototype._binnedKeysMap;weavejs.data.column.BinnedColumn.prototype._largestBinSize=0;weavejs.data.column.BinnedColumn.prototype._resultTriggerCount=0;
weavejs.data.column.BinnedColumn.prototype.validateBins=function(){if(this._resultTriggerCount!=this.binningDefinition.asyncResultCallbacks.triggerCounter){if(weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this))return;this._resultTriggerCount=this.binningDefinition.asyncResultCallbacks.triggerCounter;this._column=this.internalDynamicColumn.getInternalColumn();this.map_key_binIndex=new weavejs.util.JS.Map;this._binnedKeysArray=[];this._binnedKeysMap={};this._largestBinSize=0;this._binNames=
this.binningDefinition.getBinNames();this._binClassifiers=this.binningDefinition.getBinClassifiers();if(this._binNames)for(var i=0;i<this._binNames.length;i++)this._binnedKeysMap[this._binNames[i]]=this._binnedKeysArray[i]=[];this._keys=this.internalDynamicColumn.keys;this._i=0;if(weavejs.util.StandardLib.getArrayType(this._binClassifiers)==weavejs.data.bin.NumberClassifier)this._dataType=Number;else this._dataType=String;if(this._column&&this._binClassifiers)weavejs.WeaveAPI.Scheduler.startTask(this,
org.apache.flex.utils.Language.closure(this._asyncIterate,this,'_asyncIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'),Weave.lang('Binning {0} records in {1}',this._keys.length,weavejs.util.DebugUtils.debugId(this)))}};weavejs.data.column.BinnedColumn.prototype._dataType;weavejs.data.column.BinnedColumn.prototype._column;weavejs.data.column.BinnedColumn.prototype._i;weavejs.data.column.BinnedColumn.prototype._keys;
weavejs.data.column.BinnedColumn.prototype._asyncIterate=function(stopTime){if(this._resultTriggerCount!=this.binningDefinition.asyncResultCallbacks.triggerCounter)return 1;for(;this._i<this._keys.length;this._i++){if(weavejs.util.JS.now()>stopTime)return this._i/this._keys.length;var key=this._keys[this._i];var value=this._column.getValueFromKey(key,this._dataType);var binIndex=0;for(;binIndex<this._binClassifiers.length;binIndex++)if(org.apache.flex.utils.Language.as(this._binClassifiers[binIndex],
weavejs.api.data.IBinClassifier).contains(value)){this.map_key_binIndex.set(key,binIndex);var array=org.apache.flex.utils.Language.as(this._binnedKeysArray[binIndex],Array);if(array.push(key)>this._largestBinSize)this._largestBinSize=array.length;break}}return 1};weavejs.data.column.BinnedColumn.prototype.getKeysFromBinIndex=function(binIndex){this.validateBins();if(binIndex<this._binnedKeysArray.length)return this._binnedKeysArray[binIndex];return null};
weavejs.data.column.BinnedColumn.prototype.getKeysFromBinName=function(binName){this.validateBins();return org.apache.flex.utils.Language.as(this._binnedKeysMap[binName],Array)};weavejs.data.column.BinnedColumn.prototype.getBinIndexFromDataValue=function(value){this.validateBins();if(this._binClassifiers)for(var i=0;i<this._binClassifiers.length;i++)if(org.apache.flex.utils.Language.as(this._binClassifiers[i],weavejs.api.data.IBinClassifier).contains(value))return i;return NaN};
weavejs.data.column.BinnedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;this.validateBins();if(!this._binClassifiers||!this._binClassifiers.length)return weavejs.data.column.BinnedColumn.base(this,'getValueFromKey',key,dataType);var binIndex=Number(this.map_key_binIndex.get(key));if(dataType==Number)return binIndex;if(dataType==String)return isNaN(binIndex)?'':this._binNames[binIndex];if(isNaN(binIndex))return undefined;if(dataType==Array)return org.apache.flex.utils.Language.as(this._binnedKeysArray[binIndex],
Array);return this._binClassifiers&&this._binClassifiers[binIndex]};weavejs.data.column.BinnedColumn.prototype.deriveStringFromNumber=function(value){this.validateBins();if(!this._binClassifiers||!this._binClassifiers.length)return weavejs.data.ColumnUtils.deriveStringFromNumber(this.internalDynamicColumn,value);try{return this._binNames[value]}catch(e){}return''};
Object.defineProperties(weavejs.data.column.BinnedColumn.prototype,{numberOfBins:{get:function(){this.validateBins();return this._binNames.length}},largestBinSize:{get:function(){this.validateBins();return this._largestBinSize}}});weavejs.data.column.BinnedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'BinnedColumn',qName:'weavejs.data.column.BinnedColumn'}],interfaces:[weavejs.api.data.IPrimitiveColumn]};goog.provide('weavejs.util.ColorNode');weavejs.util.ColorNode=function(position,color){this.position=position;this.color=color};weavejs.util.ColorNode.prototype.position;weavejs.util.ColorNode.prototype.color;weavejs.util.ColorNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorNode',qName:'weavejs.util.ColorNode'}]};goog.provide('weavejs.util.ColorRamp');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.util.ColorNode');weavejs.util.ColorRamp=function(sessionState){sessionState=typeof sessionState!=='undefined'?sessionState:null;this._colorNodes=[];weavejs.util.ColorRamp.base(this,'constructor',null,org.apache.flex.utils.Language.closure(this.verifyState,this,'verifyState'),sessionState||weavejs.util.ColorRamp.getColorRampByName('Blues').colors)};goog.inherits(weavejs.util.ColorRamp,weavejs.core.LinkableVariable);
weavejs.util.ColorRamp.COLOR='color';weavejs.util.ColorRamp.POSITION='position';
weavejs.util.ColorRamp.prototype.verifyState=function(state){if(org.apache.flex.utils.Language.is(state,String)){var reversed=false;var colors=weavejs.WeaveAPI.CSVParser.parseCSVRow(org.apache.flex.utils.Language.as(state,String));if(reversed)colors.reverse();this.setSessionState(colors);return false}var type=weavejs.util.StandardLib.getArrayType(org.apache.flex.utils.Language.as(state,Array));if(type==Number){var array=[];var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){var number=
foreachiter0_target[foreachiter0];array.push('0x'+weavejs.util.StandardLib.numberToBase(number,16,6).toUpperCase())}this.setSessionState(array);return false}return type==String||type==Object};weavejs.util.ColorRamp.prototype._validateTriggerCount=0;
weavejs.util.ColorRamp.prototype.validate=function(){if(this._validateTriggerCount==this.triggerCounter)return;this._validateTriggerCount=this.triggerCounter;this._colorNodes=[];var foreachiter1_target=this.getSessionState();for(var foreachiter1 in foreachiter1_target){var item=foreachiter1_target[foreachiter1];if(typeof item=='object')this._colorNodes.push(new weavejs.util.ColorNode(item[weavejs.util.ColorRamp.POSITION],item[weavejs.util.ColorRamp.COLOR]));else this._colorNodes.push(new weavejs.util.ColorNode(this._colorNodes.length,
weavejs.util.StandardLib.asNumber(item)))}var positions=weavejs.util.ArrayUtils.pluck(this._colorNodes,weavejs.util.ColorRamp.POSITION);var minPos=Math.min.apply(null,positions);var maxPos=Math.max.apply(null,positions);var foreachiter2_target=this._colorNodes;for(var foreachiter2 in foreachiter2_target){var node=foreachiter2_target[foreachiter2];node.position=weavejs.util.StandardLib.normalize(node.position,minPos,maxPos)}weavejs.util.StandardLib.sortOn(this._colorNodes,'position')};
weavejs.util.ColorRamp.prototype.reverse=function(){var array=org.apache.flex.utils.Language.as(this.getSessionState(),Array);if(array)this.setSessionState(array.reverse())};weavejs.util.ColorRamp.prototype._colorNodes;weavejs.util.ColorRamp.prototype.getColors=function(){this.validate();var colors=[];for(var i=0;i<this._colorNodes.length;i++)colors.push(org.apache.flex.utils.Language.as(this._colorNodes[i],weavejs.util.ColorNode).color);return colors};
weavejs.util.ColorRamp.prototype.getColorFromNorm=function(normValue){this.validate();if(isNaN(normValue)||normValue<0||normValue>1||this._colorNodes.length==0)return NaN;var rightIndex=0;while(rightIndex<this._colorNodes.length&&normValue>=org.apache.flex.utils.Language.as(this._colorNodes[rightIndex],weavejs.util.ColorNode).position)rightIndex++;var leftIndex=Math.max(0,rightIndex-1);var leftNode=org.apache.flex.utils.Language.as(this._colorNodes[leftIndex],weavejs.util.ColorNode);var rightNode=
org.apache.flex.utils.Language.as(this._colorNodes[rightIndex],weavejs.util.ColorNode);if(rightIndex==0)return rightNode.color;if(rightIndex==this._colorNodes.length)return leftNode.color;var interpolationValue=(normValue-leftNode.position)/(rightNode.position-leftNode.position);return weavejs.util.StandardLib.interpolateColor(interpolationValue,leftNode.color,rightNode.color)};
weavejs.util.ColorRamp.getColorRampByName=function(rampName){var foreachiter3_target=weavejs.util.ColorRamp.allColorRamps;for(var foreachiter3 in foreachiter3_target){var ramp=foreachiter3_target[foreachiter3];if(ramp.name===rampName)return ramp}return null};
weavejs.util.ColorRamp.findMatchingColorRamp=function(ramp){var colors=ramp.getColors();var foreachiter4_target=weavejs.util.ColorRamp.allColorRamps;for(var foreachiter4 in foreachiter4_target){var obj=foreachiter4_target[foreachiter4];if(weavejs.util.StandardLib.compare(obj.colors,colors)==0)return obj}return null};
weavejs.util.ColorRamp.allColorRamps=[{name:'Campfire',tags:'OIC,aesthetic',colors:[6684672,16711680,16776960]},{name:'Pink Rose',tags:'OIC,aesthetic',colors:[16762874,16384148,6684774]},{name:'Linear Gray',tags:'OIC,visualization,colorblind-safe,single-hue',colors:[0,16777215]},{name:'Blue Green Red',tags:'OIC,visualization',colors:[255,65280,16711680]},{name:'Red Scale',tags:'OIC,visualization,single-hue',colors:[0,16711680,16764108]},{name:'Blue To Cyan',tags:'OIC,visualization',colors:[0,47094,
771327,6881279,16777215]},{name:'Blue To Yellow',tags:'OIC,visualization',colors:[255,16776960]},{name:'Heated',tags:'OIC,visualization,single-hue',colors:[1245184,6362369,11692801,15765550,16497670,16711422]},{name:'MCH - Brown',tags:'OIC,visualization,single-hue',colors:[6362369,11692801,15765550,16497670]},{name:'Jet',tags:'OIC,visualization,qualitative',colors:[134,255,65535,16776960,16711680,8781824]},{name:'Linearized Optimal',tags:'OIC,visualization',colors:[0,8847360,8912384,8912895,16777215]},
{name:'Rainbow',tags:'OIC,visualization',colors:[0,4653143,1525135,6275142,10537036,16757646,16777215]},{name:'Traffic Light',tags:'OIC,basic',colors:[65280,16776960,16711680]},{name:'Arizona Skyline',tags:'OIC,aesthetic',colors:[5669817,16773281,14719259,12727808,5255168]},{name:'Watermelon',tags:'OIC,aesthetic',colors:[4086547,6402317,13421830,16748424,6488064]},{name:'Thunderstorm',tags:'OIC,aesthetic',colors:[5789236,4686261,7322367,16776960]},{name:'Old Leather',tags:'OIC,aesthetic',colors:[4211488,
7427342,9004849,14537216,6068154,6068154]},{name:'Autumn',tags:'OIC,aesthetic',colors:[1703936,7416576,16760712,16739072,16384E3]},{name:'Eggplant',tags:'OIC,aesthetic',colors:[262153,5111925,8257701,14853392,16777113]},{name:'Antique Flag',tags:'OIC,aesthetic',colors:[1133384,45047,14416367,11253865,16711680]},{name:'Agate',tags:'OIC,aesthetic',colors:[7228760,9542054,16768183,16677405,13303808]},{name:'Bee',tags:'OIC,aesthetic,single-hue',colors:[0,16776960]},{name:'Ornamental Cabbage',tags:'OIC,aesthetic',
colors:[4074084,6404114,12896075,13419931,11810682,11810682]},{name:'Neon',tags:'OIC,aesthetic',colors:[3360819,14113679,16711808,16776960,53504]},{name:'High Desert',tags:'OIC,aesthetic',colors:[11825222,7496042,13748168,16777215,10414]},{name:'Vermilion Cliffs',tags:'OIC,aesthetic',colors:[6558464,13837568,16741632,16763517,210,210]},{name:'Papaya',tags:'OIC,aesthetic',colors:[1055745,4163409,3697664,16621056,15663104]},{name:'Van Gogh',tags:'OIC,aesthetic',colors:[3227994,6331853,16776960,15315968,
12463616]},{name:'Outer Banks',tags:'OIC,aesthetic',colors:[6770488,14035456,16231680,16444091,38596]},{name:'Desert Sands',tags:'OIC,aesthetic',colors:[16311144,13548032,8481536,11884544,5513216,2367488]},{name:'Moonlight',tags:'OIC,aesthetic',colors:[263429,3552821,656680,13758692,14468096,14468096]},{name:'Twilight',tags:'OIC,aesthetic',colors:[3089697,13151486,16777215,15007488]},{name:'Rosebud',tags:'OIC,aesthetic',colors:[6904142,11382600,16707838,15925387,13434910]},{name:'Morning Glory',tags:'OIC,aesthetic',
colors:[5834323,16761343,16776960,6095103,3932377]},{name:'Cloudy Night',tags:'OIC,aesthetic',colors:[459793,6763438,16777215,16739840]},{name:'Vintage Map',tags:'OIC,aesthetic',colors:[16447974,16512626,16767391,11846482,9627082,16620971]},{name:'Doppler Radar',tags:'OIC,aesthetic,qualitative',colors:[322023,40436,131572,130049,50176,35840,16644097,16355840,16580608,12320768,16253181,9983174]},{name:'Bu Gn',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15595771,11723490,6734500,2925151,
27948]},{name:'Bu Pu',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15595771,11783651,9213638,8935079,8458108]},{name:'Gn Bu',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[15792616,12248252,8113348,4432586,551084]},{name:'Or Rd',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16707801,16632970,16551257,14895667,11730944]},{name:'Pu Bu',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[15855350,12437985,7645647,2854078,285325]},{name:'Pu Bu Gn',
tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16183287,12437985,6793679,1872025,93273]},{name:'Pu Rd',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[15855350,14136792,14640560,14490743,9961539]},{name:'Rd Pu',tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[16706530,16495801,16214177,12917642,7995767]},{name:'Yl Gn',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777164,12773017,7915129,3253076,26679]},{name:'Yl Gn Bu',
tags:'ColorBrewer,basic,sequential,printer-friendly,colorblind-safe',colors:[16777164,10607284,4306628,2916280,2438292]},{name:'Yl Or Br',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777172,16701838,16685353,14245646,10040324]},{name:'Yl Or Rd',tags:'ColorBrewer,basic,sequential,colorblind-safe',colors:[16777138,16698460,16616764,15743776,12386342]},{name:'Blues',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15725567,12441575,7057110,3244733,545180]},{name:'Greens',
tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15595753,12248243,7652470,3253076,27948]},{name:'Greys',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16250871,13421772,9868950,6513507,2434341]},{name:'Oranges',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16707038,16629381,16616764,15095053,10892803]},{name:'Purples',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[15921399,13355490,10394312,7695281,5515151]},
{name:'Reds',tags:'ColorBrewer,basic,sequential,single-hue,colorblind-safe',colors:[16704985,16559761,16476746,14560550,10817301]},{name:'Br BG',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[10903834,14664317,16119285,8441281,99697]},{name:'Pi YG',tags:'ColorBrewer,basic,diverging,colorblind-safe',colors:[13638795,15840986,16250871,12116358,5090342]},{name:'PR Gn',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[8073876,12756431,16250871,10935200,
34871]},{name:'Pu Or',tags:'ColorBrewer,basic,diverging,colorblind-safe',colors:[15098113,16627811,16250871,11709394,6175897]},{name:'Rd Bu',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[13238304,16033154,16250871,9618910,356784]},{name:'Rd Gy',tags:'ColorBrewer,basic,diverging,printer-friendly',colors:[13238304,16033154,16777215,12237498,4210752]},{name:'Rd Yl Bu',tags:'ColorBrewer,basic,diverging,colorblind-safe,printer-friendly',colors:[14096668,16625249,16777151,
11262441,2915254]},{name:'Rd Yl Gn',tags:'ColorBrewer,basic,diverging,printer-friendly',colors:[14096668,16625249,16777151,10934634,1742401]},{name:'Spectral',tags:'ColorBrewer,basic,diverging,printer-friendly,photocopy-friendly',colors:[14096668,16625249,16777151,11263396,2851770]},{name:'Accent',tags:'ColorBrewer,basic,qualitative',colors:[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886]},{name:'Dark2',tags:'ColorBrewer,basic,qualitative,printer-friendly',colors:[1810039,14245634,
7696563,15149450,6727198,15117058,10909213,6710886]},{name:'Paired',tags:'ColorBrewer,basic,qualitative',colors:[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192]},{name:'Pastel 1',tags:'ColorBrewer,basic,qualitative',colors:[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652]},{name:'Pastel 2',tags:'ColorBrewer,basic,qualitative',colors:[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772]},{name:'Set 1',tags:'ColorBrewer,basic,qualitative,printer-friendly',
colors:[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607]},{name:'Set 2',tags:'ColorBrewer,basic,qualitative',colors:[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]},{name:'Set 3',tags:'ColorBrewer,basic,qualitative,printer-friendly',colors:[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781]}];weavejs.util.ColorRamp.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorRamp',qName:'weavejs.util.ColorRamp'}]};goog.provide('weavejs.data.column.ColorColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.util.ColorRamp');
weavejs.data.column.ColorColumn=function(){this.ramp=Weave.linkableChild(this,weavejs.util.ColorRamp);this.rampCenterAtZero=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(false),org.apache.flex.utils.Language.closure(this.cacheState,this,'cacheState'));this.recordColors=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyRecordColors,this,'verifyRecordColors')));weavejs.data.column.ColorColumn.base(this,'constructor');this._internalColumnStats=
Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn))};goog.inherits(weavejs.data.column.ColorColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.ColorColumn.prototype.getMetadata=function(propertyName){if(propertyName==weavejs.api.data.ColumnMetadata.DATA_TYPE)return weavejs.api.data.DataType.STRING;return weavejs.data.column.ColorColumn.base(this,'getMetadata',propertyName)};weavejs.data.column.ColorColumn.prototype._internalColumnStats;
weavejs.data.column.ColorColumn.prototype.ramp;weavejs.data.column.ColorColumn.prototype.rampCenterAtZero;weavejs.data.column.ColorColumn.prototype._rampCenterAtZero;weavejs.data.column.ColorColumn.prototype.cacheState=function(){this._rampCenterAtZero=this.rampCenterAtZero.value};
weavejs.data.column.ColorColumn.prototype.getDataMin=function(){if(this._rampCenterAtZero){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();return-Math.max(Math.abs(dataMin),Math.abs(dataMax))}return this._internalColumnStats.getMin()};weavejs.data.column.ColorColumn.prototype.getDataMax=function(){if(this._rampCenterAtZero){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();return Math.max(Math.abs(dataMin),Math.abs(dataMax))}return this._internalColumnStats.getMax()};
weavejs.data.column.ColorColumn.prototype.getColorFromDataValue=function(value){var dataMin=this._internalColumnStats.getMin();var dataMax=this._internalColumnStats.getMax();var norm;if(dataMin==dataMax)norm=isFinite(value)?.5:NaN;else if(this._rampCenterAtZero){var absMax=Math.max(Math.abs(dataMin),Math.abs(dataMax));norm=(value+absMax)/(2*absMax)}else norm=(value-dataMin)/(dataMax-dataMin);return this.ramp.getColorFromNorm(norm)};weavejs.data.column.ColorColumn.prototype.recordColors;
weavejs.data.column.ColorColumn.prototype.verifyRecordColors=function(value){if(org.apache.flex.utils.Language.is(value,String)){value=weavejs.WeaveAPI.CSVParser.parseCSV(org.apache.flex.utils.Language.as(value,String));this.recordColors.setSessionState(value);return false}if(value==null)return true;return org.apache.flex.utils.Language.is(value,Array)&&weavejs.util.StandardLib.arrayIsType(org.apache.flex.utils.Language.as(value,Array),Array)};weavejs.data.column.ColorColumn.prototype.map_key_recordColor;
weavejs.data.column.ColorColumn.prototype.handleRecordColors=function(){var rows=org.apache.flex.utils.Language.as(this.recordColors.getSessionState(),Array);this.map_key_recordColor=new weavejs.util.JS.Map;var foreachiter0_target=rows;for(var foreachiter0 in foreachiter0_target){var row=foreachiter0_target[foreachiter0];if(row.length!=3)continue;try{var key=weavejs.WeaveAPI.QKeyManager.getQKey(row[0],row[1]);var color=weavejs.util.StandardLib.asNumber(row[2]);this.map_key_recordColor.set(key,color)}catch(e){weavejs.util.JS.error(e)}}};
weavejs.data.column.ColorColumn.prototype._recordColorsTriggerCounter=0;
weavejs.data.column.ColorColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._recordColorsTriggerCounter!=this.recordColors.triggerCounter){this._recordColorsTriggerCounter=this.recordColors.triggerCounter;this.handleRecordColors()}var color;var recordColor=this.map_key_recordColor.get(key);if(recordColor!==undefined)color=recordColor;else{var value=this.internalDynamicColumn.getValueFromKey(key,Number);color=this.getColorFromDataValue(value)}if(dataType==
Number)return color;if(isFinite(color))return'#'+weavejs.util.StandardLib.numberToBase(color,16,6);return''};weavejs.data.column.ColorColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColorColumn',qName:'weavejs.data.column.ColorColumn'}]};goog.provide('weavejs.data.key.KeySetUnion');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.KeySetUnion=function(keyInclusionLogic){keyInclusionLogic=typeof keyInclusionLogic!=='undefined'?keyInclusionLogic:null;this._keySets=[];this._allKeys=[];this.map_key=new weavejs.util.JS.WeakMap;this.busyStatus=Weave.disposableChild(this,weavejs.core.CallbackCollection);this._keyInclusionLogic=keyInclusionLogic;if(weavejs.data.key.KeySetUnion.debug)Weave.getCallbacks(this).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._firstCallback,this,'_firstCallback'))};
weavejs.data.key.KeySetUnion.debug=false;weavejs.data.key.KeySetUnion.prototype._firstCallback=function(){weavejs.util.DebugUtils.debugTrace(this,'trigger',this.keys.length,'keys')};weavejs.data.key.KeySetUnion.prototype._keyInclusionLogic=null;
weavejs.data.key.KeySetUnion.prototype.addKeySetDependency=function(keySet){if(this._keySets.indexOf(keySet)<0){this._keySets.push(keySet);Weave.getCallbacks(keySet).addDisposeCallback(this,org.apache.flex.utils.Language.closure(this.asyncStart,this,'asyncStart'));Weave.getCallbacks(keySet).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.asyncStart,this,'asyncStart'),true)}};weavejs.data.key.KeySetUnion.prototype.containsKey=function(key){return this.map_key.get(key)===true};
weavejs.data.key.KeySetUnion.prototype._keySets;weavejs.data.key.KeySetUnion.prototype._allKeys;weavejs.data.key.KeySetUnion.prototype.map_key;weavejs.data.key.KeySetUnion.prototype.busyStatus;weavejs.data.key.KeySetUnion.prototype._asyncKeys;weavejs.data.key.KeySetUnion.prototype._asyncKeySetIndex;weavejs.data.key.KeySetUnion.prototype._asyncKeyIndex;weavejs.data.key.KeySetUnion.prototype._prevCompareCounter;weavejs.data.key.KeySetUnion.prototype._async_map_key;weavejs.data.key.KeySetUnion.prototype._asyncAllKeys;
weavejs.data.key.KeySetUnion.prototype.asyncStart=function(){for(var i=this._keySets.length;i--;)if(Weave.wasDisposed(this._keySets[i]))this._keySets.splice(i,1);this._prevCompareCounter=0;this._asyncAllKeys=[];this._async_map_key=new weavejs.util.JS.WeakMap;this._asyncKeys=null;this._asyncKeySetIndex=0;this._asyncKeyIndex=0;weavejs.WeaveAPI.Scheduler.startTask(this.busyStatus,org.apache.flex.utils.Language.closure(this.asyncIterate,this,'asyncIterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,
this,'asyncComplete'),Weave.lang('Computing the union of {0} key sets',this._keySets.length))};
weavejs.data.key.KeySetUnion.prototype.asyncIterate=function(stopTime){for(;this._asyncKeySetIndex<this._keySets.length;this._asyncKeySetIndex++){if(this._asyncKeys==null){this._asyncKeys=org.apache.flex.utils.Language.as(this._keySets[this._asyncKeySetIndex],weavejs.api.data.IKeySet).keys;this._asyncKeyIndex=0}for(;this._asyncKeys&&this._asyncKeyIndex<this._asyncKeys.length;this._asyncKeyIndex++){if(weavejs.util.JS.now()>stopTime)return(this._asyncKeySetIndex+this._asyncKeyIndex/this._asyncKeys.length)/
this._keySets.length;var key=org.apache.flex.utils.Language.as(this._asyncKeys[this._asyncKeyIndex],weavejs.api.data.IQualifiedKey);if(!this._async_map_key.has(key)){var includeKey=this._keyInclusionLogic==null?true:this._keyInclusionLogic(key);this._async_map_key.set(key,includeKey);if(includeKey){this._asyncAllKeys.push(key);if(this.map_key.get(key)===true)this._prevCompareCounter++}}}this._asyncKeys=null}return 1};
weavejs.data.key.KeySetUnion.prototype.asyncComplete=function(){if(this._allKeys.length!=this._asyncAllKeys.length||this._allKeys.length!=this._prevCompareCounter){this._allKeys=this._asyncAllKeys;this.map_key=this._async_map_key;Weave.getCallbacks(this).triggerCallbacks()}this.busyStatus.triggerCallbacks()};weavejs.data.key.KeySetUnion.prototype.dispose=function(){this._keySets=null;this._allKeys=null;this.map_key=null;this._async_map_key=null};
Object.defineProperties(weavejs.data.key.KeySetUnion.prototype,{keys:{get:function(){return this._allKeys}}});weavejs.data.key.KeySetUnion.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySetUnion',qName:'weavejs.data.key.KeySetUnion'}],interfaces:[weavejs.api.data.IKeySet,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.data.column.CombinedColumn');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.key.KeySetUnion');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.CombinedColumn=function(){this.useFirstColumnMetadata=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this.columns=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IAttributeColumn));this.keySetUnion=Weave.linkableChild(this,weavejs.data.key.KeySetUnion);this._columnsArray=[];weavejs.data.column.CombinedColumn.base(this,'constructor');Weave.linkableChild(this,this.keySetUnion.busyStatus);this.columns.childListCallbacks.addImmediateCallback(this,
org.apache.flex.utils.Language.closure(this.handleColumnsList,this,'handleColumnsList'))};goog.inherits(weavejs.data.column.CombinedColumn,weavejs.core.CallbackCollection);weavejs.data.column.CombinedColumn.prototype.useFirstColumnMetadata;weavejs.data.column.CombinedColumn.prototype.columns;weavejs.data.column.CombinedColumn.prototype.keySetUnion;weavejs.data.column.CombinedColumn.prototype._columnsArray;
weavejs.data.column.CombinedColumn.prototype.handleColumnsList=function(){this._columnsArray=this.columns.getObjects();if(this.columns.childListCallbacks.lastObjectAdded)this.keySetUnion.addKeySetDependency(org.apache.flex.utils.Language.as(this.columns.childListCallbacks.lastObjectAdded,weavejs.api.data.IKeySet))};
weavejs.data.column.CombinedColumn.prototype.getMetadata=function(propertyName){if(this.useFirstColumnMetadata.value){var firstColumn=org.apache.flex.utils.Language.as(this._columnsArray[0],weavejs.api.data.IAttributeColumn);return firstColumn?firstColumn.getMetadata(propertyName):null}return weavejs.data.ColumnUtils.getCommonMetadata(this._columnsArray,propertyName)};
weavejs.data.column.CombinedColumn.prototype.getMetadataPropertyNames=function(){var firstColumn=org.apache.flex.utils.Language.as(this._columnsArray[0],weavejs.api.data.IAttributeColumn);return firstColumn?firstColumn.getMetadataPropertyNames():null};weavejs.data.column.CombinedColumn.prototype.containsKey=function(key){return this.keySetUnion.containsKey(key)};
weavejs.data.column.CombinedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var foreachiter0_target=this._columnsArray;for(var foreachiter0 in foreachiter0_target){var column=foreachiter0_target[foreachiter0];if(column.containsKey(key))return column.getValueFromKey(key,dataType)}return dataType==String?'':undefined};Object.defineProperties(weavejs.data.column.CombinedColumn.prototype,{keys:{get:function(){return this.keySetUnion.keys}}});
weavejs.data.column.CombinedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'CombinedColumn',qName:'weavejs.data.column.CombinedColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.api.data.IDynamicKeyFilter');goog.require('weavejs.api.core.ILinkableDynamicObject');weavejs.api.data.IDynamicKeyFilter=function(){};weavejs.api.data.IDynamicKeyFilter.prototype.getInternalKeyFilter=function(){};weavejs.api.data.IDynamicKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDynamicKeyFilter',qName:'weavejs.api.data.IDynamicKeyFilter'}],interfaces:[weavejs.api.core.ILinkableDynamicObject]};goog.provide('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IDynamicKeyFilter');weavejs.data.key.DynamicKeyFilter=function(){weavejs.data.key.DynamicKeyFilter.base(this,'constructor',weavejs.api.data.IKeyFilter)};goog.inherits(weavejs.data.key.DynamicKeyFilter,weavejs.core.LinkableDynamicObject);
weavejs.data.key.DynamicKeyFilter.prototype.getInternalKeyFilter=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IKeyFilter)};weavejs.data.key.DynamicKeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicKeyFilter',qName:'weavejs.data.key.DynamicKeyFilter'}],interfaces:[weavejs.api.data.IDynamicKeyFilter]};goog.provide('weavejs.data.key.SortedKeySet');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.SortedKeySet=function(keySet,sortCopyFunction,dependencies){sortCopyFunction=typeof sortCopyFunction!=='undefined'?sortCopyFunction:null;dependencies=typeof dependencies!=='undefined'?dependencies:null;this._dependencies=Weave.linkableChild(this,weavejs.core.CallbackCollection);this._sortCopyFunction=weavejs.data.key.QKeyManager.keySortCopy;this._sortedKeys=[];this._keySet=keySet;this._sortCopyFunction=org.apache.flex.utils.Language.as(sortCopyFunction,Function)||org.apache.flex.utils.Language.as(weavejs.data.key.QKeyManager.keySortCopy,
Function);var foreachiter0_target=dependencies;for(var foreachiter0 in foreachiter0_target){var object=foreachiter0_target[foreachiter0];Weave.linkableChild(this._dependencies,object);if(org.apache.flex.utils.Language.is(object,weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(object,weavejs.api.data.IAttributeColumn));Weave.linkableChild(this._dependencies,stats)}}Weave.linkableChild(this._dependencies,this._keySet)};
weavejs.data.key.SortedKeySet.prototype._triggerCounter=0;weavejs.data.key.SortedKeySet.prototype._dependencies;weavejs.data.key.SortedKeySet.prototype._keySet;weavejs.data.key.SortedKeySet.prototype._sortCopyFunction;weavejs.data.key.SortedKeySet.prototype._sortedKeys;weavejs.data.key.SortedKeySet.prototype.containsKey=function(key){return this._keySet.containsKey(key)};
weavejs.data.key.SortedKeySet.prototype._validate=function(){this._triggerCounter=this._dependencies.triggerCounter;if(Weave.isBusy(this))return;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this._asyncTask,this,'_asyncTask'),weavejs.WeaveAPI.TASK_PRIORITY_NORMAL,org.apache.flex.utils.Language.closure(this._asyncComplete,this,'_asyncComplete'))};weavejs.data.key.SortedKeySet.EMPTY_ARRAY=[];
weavejs.data.key.SortedKeySet.prototype._asyncTask=function(){this._sortCopyFunction(weavejs.data.key.SortedKeySet.EMPTY_ARRAY);if(Weave.isBusy(this._dependencies))return 1;this._sortedKeys=this._sortCopyFunction(this._keySet.keys);return 1};weavejs.data.key.SortedKeySet.prototype._asyncComplete=function(){if(Weave.isBusy(this._dependencies)||this._triggerCounter!=this._dependencies.triggerCounter)return;Weave.getCallbacks(this).triggerCallbacks()};
weavejs.data.key.SortedKeySet.generateSortCopyFunction=function(columns,sortDirections){sortDirections=typeof sortDirections!=='undefined'?sortDirections:null;var __localFn0__=function(keys){var params=[];var directions=[];var lastDirection=1;for(var i=0;i<columns.length;i++){var param=columns[i];if(Weave.wasDisposed(param))continue;if(org.apache.flex.utils.Language.is(param,weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(param,
weavejs.api.data.IAttributeColumn));param=stats.hack_getNumericData()}if(!param||org.apache.flex.utils.Language.is(param,weavejs.api.data.IKeySet))continue;if(sortDirections&&!sortDirections[i])continue;lastDirection=sortDirections?sortDirections[i]:1;params.push(param);directions.push(lastDirection)}var qkm=org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager);params.push(qkm.map_qkey_keyType,qkm.map_qkey_localName);directions.push(lastDirection,lastDirection);
var result=weavejs.util.StandardLib.sortOn(keys,params,directions,false);return result};return __localFn0__};Object.defineProperties(weavejs.data.key.SortedKeySet.prototype,{keys:{get:function(){if(this._triggerCounter!=this._dependencies.triggerCounter)this._validate();return this._sortedKeys}}});weavejs.data.key.SortedKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedKeySet',qName:'weavejs.data.key.SortedKeySet'}],interfaces:[weavejs.api.data.IKeySet]};goog.provide('weavejs.api.data.IFilteredKeySet');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.IKeySet');weavejs.api.data.IFilteredKeySet=function(){};weavejs.api.data.IFilteredKeySet.prototype.keyFilter;weavejs.api.data.IFilteredKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IFilteredKeySet',qName:'weavejs.api.data.IFilteredKeySet'}],interfaces:[weavejs.api.data.IKeySet,weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.key.FilteredKeySet');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.data.key.SortedKeySet');goog.require('weavejs.api.data.IFilteredKeySet');
weavejs.data.key.FilteredKeySet=function(){this._dynamicKeyFilter=Weave.linkableChild(this,weavejs.data.key.DynamicKeyFilter);this._filteredKeys=[];this.map_key=new weavejs.util.JS.WeakMap;this.inverseFilter=Weave.linkableChild(this,weavejs.core.LinkableBoolean);weavejs.data.key.FilteredKeySet.base(this,'constructor');if(weavejs.data.key.FilteredKeySet.debug)this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._firstCallback,this,'_firstCallback'))};
goog.inherits(weavejs.data.key.FilteredKeySet,weavejs.core.CallbackCollection);weavejs.data.key.FilteredKeySet.debug=false;weavejs.data.key.FilteredKeySet.prototype._firstCallback=function(){weavejs.util.DebugUtils.debugTrace(this,'trigger',this.keys.length,'keys')};weavejs.data.key.FilteredKeySet.prototype.dispose=function(){weavejs.data.key.FilteredKeySet.base(this,'dispose');this.setColumnKeySources(null)};weavejs.data.key.FilteredKeySet.prototype._baseKeySet=null;weavejs.data.key.FilteredKeySet.prototype._dynamicKeyFilter;
weavejs.data.key.FilteredKeySet.prototype._filteredKeys;weavejs.data.key.FilteredKeySet.prototype.map_key;weavejs.data.key.FilteredKeySet.prototype._generatedKeySets;weavejs.data.key.FilteredKeySet.prototype._setColumnKeySources_arguments;weavejs.data.key.FilteredKeySet.prototype.inverseFilter;
weavejs.data.key.FilteredKeySet.prototype.setColumnKeySources=function(columns,sortDirections,keySortCopy,keyInclusionLogic){sortDirections=typeof sortDirections!=='undefined'?sortDirections:null;keySortCopy=typeof keySortCopy!=='undefined'?keySortCopy:null;keyInclusionLogic=typeof keyInclusionLogic!=='undefined'?keyInclusionLogic:null;if(weavejs.util.StandardLib.compare(this._setColumnKeySources_arguments,arguments)==0)return;var keySet;if(this._generatedKeySets){var foreachiter0_target=this._generatedKeySets;
for(var foreachiter0 in foreachiter0_target){keySet=foreachiter0_target[foreachiter0];Weave.dispose(keySet)}this._generatedKeySets=null}else this.setSingleKeySource(null);this._setColumnKeySources_arguments=arguments;if(columns){var union=Weave.disposableChild(this,new weavejs.data.key.KeySetUnion(keyInclusionLogic));var foreachiter1_target=columns;for(var foreachiter1 in foreachiter1_target){keySet=foreachiter1_target[foreachiter1];union.addKeySetDependency(keySet);if(org.apache.flex.utils.Language.is(keySet,
weavejs.api.data.IAttributeColumn)){var stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(org.apache.flex.utils.Language.as(keySet,weavejs.api.data.IAttributeColumn));Weave.linkableChild(union,stats)}}if(weavejs.data.key.FilteredKeySet.debug&&keySortCopy==null)org.apache.flex.utils.Language.trace(weavejs.util.DebugUtils.debugId(this),'sort by [',columns,']');var sortCopy=keySortCopy||weavejs.data.key.SortedKeySet.generateSortCopyFunction(columns,sortDirections);var sorted=Weave.linkableChild(this,
new weavejs.data.key.SortedKeySet(union,sortCopy,columns));this._generatedKeySets=[union,sorted];this._baseKeySet=sorted}else this._baseKeySet=null;this.triggerCallbacks()};
weavejs.data.key.FilteredKeySet.prototype.setSingleKeySource=function(keySet){if(this._generatedKeySets)this.setColumnKeySources(null);if(this._baseKeySet==keySet)return;if(this._baseKeySet!=null)Weave.getCallbacks(this._baseKeySet).removeCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,this,'triggerCallbacks'));this._baseKeySet=keySet;if(this._baseKeySet!=null)Weave.getCallbacks(this._baseKeySet).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,
this,'triggerCallbacks'),false,true);this.triggerCallbacks()};weavejs.data.key.FilteredKeySet.prototype.containsKey=function(key){if(this._prevTriggerCounter!=this.triggerCounter)this.validateFilteredKeys();return this.map_key.has(key)};weavejs.data.key.FilteredKeySet.prototype._prevTriggerCounter;
weavejs.data.key.FilteredKeySet.prototype.validateFilteredKeys=function(){this._prevTriggerCounter=this.triggerCounter;this._asyncFilter=this._dynamicKeyFilter.getInternalKeyFilter();if(this._baseKeySet==null){this._filteredKeys=[];this.map_key=new weavejs.util.JS.WeakMap;return}if(!this._asyncFilter){this._filteredKeys=this._baseKeySet.keys;this.map_key=new weavejs.util.JS.WeakMap;var foreachiter2_target=this._filteredKeys;for(var foreachiter2 in foreachiter2_target){var key=foreachiter2_target[foreachiter2];
this.map_key.set(key,true)}return}this._i=0;this._asyncInput=this._baseKeySet.keys;this._asyncOutput=[];this._async_map_key=new weavejs.util.JS.WeakMap;this._asyncInverse=this.inverseFilter.value;weavejs.WeaveAPI.Scheduler.startTask(this,org.apache.flex.utils.Language.closure(this.iterate,this,'iterate'),weavejs.WeaveAPI.TASK_PRIORITY_HIGH,org.apache.flex.utils.Language.closure(this.asyncComplete,this,'asyncComplete'),Weave.lang('Filtering {0} keys in {1}',this._asyncInput.length,weavejs.util.DebugUtils.debugId(this)))};
weavejs.data.key.FilteredKeySet.prototype._i;weavejs.data.key.FilteredKeySet.prototype._asyncInverse;weavejs.data.key.FilteredKeySet.prototype._asyncFilter;weavejs.data.key.FilteredKeySet.prototype._asyncInput;weavejs.data.key.FilteredKeySet.prototype._asyncOutput;weavejs.data.key.FilteredKeySet.prototype._async_map_key;
weavejs.data.key.FilteredKeySet.prototype.iterate=function(stopTime){if(this._prevTriggerCounter!=this.triggerCounter)return 1;for(;this._i<this._asyncInput.length;++this._i){if(!this._asyncFilter)return 1;if(weavejs.util.JS.now()>stopTime)return this._i/this._asyncInput.length;var key=org.apache.flex.utils.Language.as(this._asyncInput[this._i],weavejs.api.data.IQualifiedKey);var contains=this._asyncFilter.containsKey(key);if(contains!=this._asyncInverse){this._asyncOutput.push(key);this._async_map_key.set(key,
true)}}return 1};weavejs.data.key.FilteredKeySet.prototype.asyncComplete=function(){if(this._prevTriggerCounter!=this.triggerCounter){this.validateFilteredKeys();return}this._prevTriggerCounter++;this._filteredKeys=this._asyncOutput;this.map_key=this._async_map_key;this.triggerCallbacks()};
Object.defineProperties(weavejs.data.key.FilteredKeySet.prototype,{keyFilter:{get:function(){return this._dynamicKeyFilter}},keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter)this.validateFilteredKeys();return this._filteredKeys}}});weavejs.data.key.FilteredKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'FilteredKeySet',qName:'weavejs.data.key.FilteredKeySet'}],interfaces:[weavejs.api.data.IFilteredKeySet]};goog.provide('weavejs.data.column.FilteredColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.data.key.FilteredKeySet');weavejs.data.column.FilteredColumn=function(){this._filteredKeySet=Weave.linkableChild(this,weavejs.data.key.FilteredKeySet);this.filter=Weave.linkableChild(this,this._filteredKeySet.keyFilter);weavejs.data.column.FilteredColumn.base(this,'constructor');this._filteredKeySet.setSingleKeySource(this.internalDynamicColumn)};
goog.inherits(weavejs.data.column.FilteredColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.FilteredColumn.prototype._filteredKeySet;weavejs.data.column.FilteredColumn.prototype.filter;weavejs.data.column.FilteredColumn.prototype._keys;weavejs.data.column.FilteredColumn.prototype.containsKey=function(key){this.internalDynamicColumn.containsKey(key);return this._filteredKeySet.containsKey(key)};
weavejs.data.column.FilteredColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;var column=this.internalDynamicColumn.getInternalColumn();var keyFilter=this.filter.getInternalKeyFilter();if(column){var value=column.getValueFromKey(key,dataType);if(!keyFilter||keyFilter.containsKey(key))return value}if(dataType)return weavejs.data.EquationColumnLib.cast(undefined,dataType);return undefined};
Object.defineProperties(weavejs.data.column.FilteredColumn.prototype,{keys:{get:function(){if(this.internalDynamicColumn.keys)return this._filteredKeySet.keys;return[]}}});weavejs.data.column.FilteredColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'FilteredColumn',qName:'weavejs.data.column.FilteredColumn'}]};goog.provide('weavejs.data.column.NormalizedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');
weavejs.data.column.NormalizedColumn=function(min,max){min=typeof min!=='undefined'?min:0;max=typeof max!=='undefined'?max:1;this.min=Weave.linkableChild(this,weavejs.core.LinkableNumber);this.max=Weave.linkableChild(this,weavejs.core.LinkableNumber);weavejs.data.column.NormalizedColumn.base(this,'constructor');this._stats=weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn);Weave.getCallbacks(this._stats).addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.triggerCallbacks,
this,'triggerCallbacks'));this.min.value=min;this.max.value=max};goog.inherits(weavejs.data.column.NormalizedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.NormalizedColumn.prototype._stats;weavejs.data.column.NormalizedColumn.prototype.min;weavejs.data.column.NormalizedColumn.prototype.max;
weavejs.data.column.NormalizedColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(dataType==null)dataType=Number;if(dataType==Number){var norm=this._stats.getNorm(key);return this.min.value+norm*(this.max.value-this.min.value)}return weavejs.data.column.NormalizedColumn.base(this,'getValueFromKey',key,dataType)};weavejs.data.column.NormalizedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'NormalizedColumn',qName:'weavejs.data.column.NormalizedColumn'}]};goog.provide('weavejs.data.column.SortedColumn');goog.require('weavejs.data.column.ExtendedDynamicColumn');goog.require('weavejs.api.data.IAttributeColumn');
weavejs.data.column.SortedColumn=function(){this.ascending=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true));this._keys=[];weavejs.data.column.SortedColumn.base(this,'constructor');Weave.linkableChild(this,weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this.internalDynamicColumn));this.sortCopyAscending=weavejs.data.key.SortedKeySet.generateSortCopyFunction([this.internalDynamicColumn],[1]);this.sortCopyDescending=weavejs.data.key.SortedKeySet.generateSortCopyFunction([this.internalDynamicColumn],
[-1])};goog.inherits(weavejs.data.column.SortedColumn,weavejs.data.column.ExtendedDynamicColumn);weavejs.data.column.SortedColumn.prototype.ascending;weavejs.data.column.SortedColumn.prototype._keys;weavejs.data.column.SortedColumn.prototype._prevTriggerCounter=0;weavejs.data.column.SortedColumn.prototype.sortCopyAscending;weavejs.data.column.SortedColumn.prototype.sortCopyDescending;
Object.defineProperties(weavejs.data.column.SortedColumn.prototype,{keys:{get:function(){if(this._prevTriggerCounter!=this.triggerCounter){if(this.ascending.value)this._keys=this.sortCopyAscending(org.apache.flex.utils.Language.superGetter(weavejs.data.column.SortedColumn,this,'keys'));else this._keys=this.sortCopyDescending(org.apache.flex.utils.Language.superGetter(weavejs.data.column.SortedColumn,this,'keys'));this._prevTriggerCounter=this.triggerCounter}return this._keys}}});
weavejs.data.column.SortedColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedColumn',qName:'weavejs.data.column.SortedColumn'}],interfaces:[weavejs.api.data.IAttributeColumn]};goog.provide('weavejs.data.column.SortedIndexColumn');goog.require('weavejs.data.column.DynamicColumn');goog.require('weavejs.api.data.IAttributeColumn');goog.require('weavejs.api.data.IPrimitiveColumn');
weavejs.data.column.SortedIndexColumn=function(){this.map_key_sortIndex=new weavejs.util.JS.Map;this._statsWatcher=Weave.linkableChild(this,weavejs.core.LinkableWatcher);weavejs.data.column.SortedIndexColumn.base(this,'constructor');this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._updateStats,this,'_updateStats'))};goog.inherits(weavejs.data.column.SortedIndexColumn,weavejs.data.column.DynamicColumn);weavejs.data.column.SortedIndexColumn.prototype._sortedKeys;weavejs.data.column.SortedIndexColumn.prototype.map_key_sortIndex;
weavejs.data.column.SortedIndexColumn.prototype._column;weavejs.data.column.SortedIndexColumn.prototype._triggerCount=0;weavejs.data.column.SortedIndexColumn.prototype._statsWatcher;weavejs.data.column.SortedIndexColumn.prototype._updateStats=function(){this._column=this.getInternalColumn();this._statsWatcher.target=this._column&&weavejs.WeaveAPI.StatisticsCache.getColumnStatistics(this._column)};
weavejs.data.column.SortedIndexColumn.prototype.validate=function(){if(this._column){this.map_key_sortIndex=this._stats.getSortIndex();if(this.map_key_sortIndex)this._sortedKeys=weavejs.util.StandardLib.sortOn(this._column.keys,this.map_key_sortIndex,null,false);else this._sortedKeys=this._column.keys}else{this.map_key_sortIndex=null;this._sortedKeys=[]}this._triggerCount=this.triggerCounter};
weavejs.data.column.SortedIndexColumn.prototype.getValueFromKey=function(key,dataType){dataType=typeof dataType!=='undefined'?dataType:null;if(this._triggerCount!=this.triggerCounter)this.validate();if(!this._column)return dataType==String?'':undefined;if(dataType==Number)return this.map_key_sortIndex?Number(this.map_key_sortIndex.get(key)):NaN;return this._column.getValueFromKey(key,dataType)};
weavejs.data.column.SortedIndexColumn.prototype.deriveStringFromNumber=function(index){if(this._triggerCount!=this.triggerCounter)this.validate();if(!this._column||index<0||index>=this._sortedKeys.length||org.apache.flex.utils.Language._int(index)!=index)return'';return this._column.getValueFromKey(this._sortedKeys[index],String)};
Object.defineProperties(weavejs.data.column.SortedIndexColumn.prototype,{_stats:{get:function(){return org.apache.flex.utils.Language.as(this._statsWatcher.target,weavejs.api.data.IColumnStatistics)}},keys:{get:function(){if(this._triggerCount!=this.triggerCounter)this.validate();return this._sortedKeys}}});
weavejs.data.column.SortedIndexColumn.prototype.FLEXJS_CLASS_INFO={names:[{name:'SortedIndexColumn',qName:'weavejs.data.column.SortedIndexColumn'}],interfaces:[weavejs.api.data.IAttributeColumn,weavejs.api.data.IPrimitiveColumn]};goog.provide('weavejs.data.column.StringLookup');goog.require('weavejs.api.core.ILinkableObject');weavejs.data.column.StringLookup=function(column){this._uniqueStringValues=new Array;this.internalColumn=column;column.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.handleInternalColumnChange,this,'handleInternalColumnChange'));if(org.apache.flex.utils.Language.is(column,weavejs.api.core.ILinkableObject))Weave.linkableChild(this,org.apache.flex.utils.Language.as(column,weavejs.api.core.ILinkableObject))};
weavejs.data.column.StringLookup.prototype.internalColumn;weavejs.data.column.StringLookup.prototype.handleInternalColumnChange=function(){this._stringToKeysMap=null;this._stringToNumberMap=null;this._uniqueStringValues.length=0};weavejs.data.column.StringLookup.prototype._stringToKeysMap=null;weavejs.data.column.StringLookup.prototype._stringToNumberMap=null;weavejs.data.column.StringLookup.prototype._uniqueStringValues;
weavejs.data.column.StringLookup.prototype.createLookupTable=function(){this._uniqueStringValues.length=0;this._stringToKeysMap=new Object;this._stringToNumberMap=new Object;var keys=this.internalColumn?this.internalColumn.keys:[];for(var i=0;i<keys.length;i++){var key=keys[i];var stringValue=org.apache.flex.utils.Language.as(this.internalColumn.getValueFromKey(key,String),String);if(stringValue==null)continue;if(org.apache.flex.utils.Language.is(this._stringToKeysMap[stringValue],Array))org.apache.flex.utils.Language.as(this._stringToKeysMap[stringValue],
Array).push(key);else{this._stringToKeysMap[stringValue]=[key];this._uniqueStringValues.push(stringValue)}var numberValue=this.internalColumn.getValueFromKey(key,Number);if(this._stringToNumberMap[stringValue]==undefined)this._stringToNumberMap[stringValue]=numberValue;else if(!isNaN(this._stringToNumberMap[stringValue])&&this._stringToNumberMap[stringValue]!=numberValue)this._stringToNumberMap[stringValue]=NaN}weavejs.util.StandardLib.sortOn(this._uniqueStringValues,[this._stringToNumberMap,this._uniqueStringValues])};
weavejs.data.column.StringLookup.prototype.getKeysFromString=function(stringValue){if(this._stringToKeysMap==null)this.createLookupTable();return org.apache.flex.utils.Language.as(this._stringToKeysMap[stringValue],Array)||(this._stringToKeysMap[stringValue]=[])};weavejs.data.column.StringLookup.prototype.getNumberFromString=function(stringValue){if(this._stringToNumberMap==null)this.createLookupTable();return this._stringToNumberMap[stringValue]};
Object.defineProperties(weavejs.data.column.StringLookup.prototype,{uniqueStrings:{get:function(){if(this._stringToKeysMap==null)this.createLookupTable();return this._uniqueStringValues}}});weavejs.data.column.StringLookup.prototype.FLEXJS_CLASS_INFO={names:[{name:'StringLookup',qName:'weavejs.data.column.StringLookup'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.hierarchy.WeaveRootDataTreeNode');goog.require('weavejs.data.hierarchy.WeaveTreeDescriptorNode');goog.require('weavejs.api.core.ILinkableObject');
weavejs.data.hierarchy.WeaveRootDataTreeNode=function(root){var self=this;var __localFn0__=function(){var __localFn0__=function(ds,_){_=Array.prototype.slice.call(arguments,1);Weave.linkableChild(rootNode,ds);return ds.getHierarchyRoot()};var sources=root.getObjects(weavejs.api.data.IDataSource).concat(self.globalColumnDataSource);var nodes=sources.map(__localFn0__);var globalColumnsNode=nodes[nodes.length-1];if(!globalColumnsNode.getChildren().length)nodes.pop();return nodes};var rootNode=this;Weave.linkableChild(this,
root.childListCallbacks);this.globalColumnDataSource=Weave.linkableChild(this,weavejs.data.hierarchy.GlobalColumnDataSource.getInstance(root));weavejs.data.hierarchy.WeaveRootDataTreeNode.base(this,'constructor',{'dependency':rootNode,'label':Weave.lang('Data Sources'),'hasChildBranches':true,'children':__localFn0__})};goog.inherits(weavejs.data.hierarchy.WeaveRootDataTreeNode,weavejs.data.hierarchy.WeaveTreeDescriptorNode);weavejs.data.hierarchy.WeaveRootDataTreeNode.prototype.globalColumnDataSource;
weavejs.data.hierarchy.WeaveRootDataTreeNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveRootDataTreeNode',qName:'weavejs.data.hierarchy.WeaveRootDataTreeNode'}],interfaces:[weavejs.api.core.ILinkableObject]};goog.provide('weavejs.data.key.ColumnDataFilterRange');
weavejs.data.key.ColumnDataFilterRange=function(obj){var prop;var foreachiter0_target=[weavejs.data.key.ColumnDataFilterRange.MIN,weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE,weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE];for(var foreachiter0 in foreachiter0_target){prop=foreachiter0_target[foreachiter0];if(obj.hasOwnProperty(prop))this.min=Math.max(this.min,obj[prop])}var foreachiter1_target=[weavejs.data.key.ColumnDataFilterRange.MAX,weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE,
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE];for(var foreachiter1 in foreachiter1_target){prop=foreachiter1_target[foreachiter1];if(obj.hasOwnProperty(prop))this.max=Math.min(this.max,obj[prop])}if(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE))this.minInclusive=false;if(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE))this.maxInclusive=false};
weavejs.data.key.ColumnDataFilterRange.isRange=function(obj){var count=0;var prop;var foreachiter2_target=[weavejs.data.key.ColumnDataFilterRange.MIN,weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE,weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE];for(var foreachiter2 in foreachiter2_target){prop=foreachiter2_target[foreachiter2];if(obj.hasOwnProperty(prop))count++}if(!count)return false;count=0;var foreachiter3_target=[weavejs.data.key.ColumnDataFilterRange.MAX,weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE,
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE];for(var foreachiter3 in foreachiter3_target){prop=foreachiter3_target[foreachiter3];if(obj.hasOwnProperty(prop))count++}return count>0};weavejs.data.key.ColumnDataFilterRange.MIN='min';weavejs.data.key.ColumnDataFilterRange.MIN_INCLUSIVE='minInclusive';weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE='minExclusive';weavejs.data.key.ColumnDataFilterRange.MAX='max';weavejs.data.key.ColumnDataFilterRange.MAX_INCLUSIVE='maxInclusive';
weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE='maxExclusive';weavejs.data.key.ColumnDataFilterRange.prototype.min=-Infinity;weavejs.data.key.ColumnDataFilterRange.prototype.max=Infinity;weavejs.data.key.ColumnDataFilterRange.prototype.minInclusive=true;weavejs.data.key.ColumnDataFilterRange.prototype.maxInclusive=true;
weavejs.data.key.ColumnDataFilterRange.prototype.getState=function(){var state={};state[this.minInclusive?weavejs.data.key.ColumnDataFilterRange.MIN:weavejs.data.key.ColumnDataFilterRange.MIN_EXCLUSIVE]=this.min;state[this.maxInclusive?weavejs.data.key.ColumnDataFilterRange.MAX:weavejs.data.key.ColumnDataFilterRange.MAX_EXCLUSIVE]=this.max;return state};weavejs.data.key.ColumnDataFilterRange.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataFilterRange',qName:'weavejs.data.key.ColumnDataFilterRange'}]};goog.provide('weavejs.api.ui.IObjectWithDescription');weavejs.api.ui.IObjectWithDescription=function(){};weavejs.api.ui.IObjectWithDescription.prototype.getDescription=function(){};weavejs.api.ui.IObjectWithDescription.prototype.FLEXJS_CLASS_INFO={names:[{name:'IObjectWithDescription',qName:'weavejs.api.ui.IObjectWithDescription'}]};goog.provide('weavejs.data.key.ColumnDataFilter');goog.require('weavejs.data.key.ColumnDataFilterRange');goog.require('weavejs.api.core.ILinkableObjectWithNewProperties');goog.require('weavejs.api.data.IKeyFilter');goog.require('weavejs.api.ui.IObjectWithDescription');
weavejs.data.key.ColumnDataFilter=function(){this.enabled=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this._cacheVars,this,'_cacheVars'));this.includeMissingKeyTypes=Weave.linkableChild(this,new weavejs.core.LinkableBoolean(true),org.apache.flex.utils.Language.closure(this._cacheVars,this,'_cacheVars'));this.column=Weave.linkableChild(this,weavejs.data.column.DynamicColumn,org.apache.flex.utils.Language.closure(this._resetKeyLookup,this,'_resetKeyLookup'));
this.values=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array),org.apache.flex.utils.Language.closure(this._resetKeyLookup,this,'_resetKeyLookup'));this.map_key=new weavejs.util.JS.WeakMap};weavejs.data.key.ColumnDataFilter.prototype.getDescription=function(){return Weave.lang('Filter for {0}',weavejs.data.ColumnUtils.getTitle(this.column))};weavejs.data.key.ColumnDataFilter.REGEXP='regexp';weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY='regex';weavejs.data.key.ColumnDataFilter.prototype.enabled;
weavejs.data.key.ColumnDataFilter.prototype.includeMissingKeyTypes;weavejs.data.key.ColumnDataFilter.prototype.column;weavejs.data.key.ColumnDataFilter.prototype.values;weavejs.data.key.ColumnDataFilter.prototype._enabled;weavejs.data.key.ColumnDataFilter.prototype._includeMissingKeyTypes;weavejs.data.key.ColumnDataFilter.prototype._stringLookup;weavejs.data.key.ColumnDataFilter.prototype._numberLookup;weavejs.data.key.ColumnDataFilter.prototype._ranges;weavejs.data.key.ColumnDataFilter.prototype._regexps;
weavejs.data.key.ColumnDataFilter.prototype._keyType;weavejs.data.key.ColumnDataFilter.prototype.map_key;weavejs.data.key.ColumnDataFilter.prototype._cacheVars=function(){this._enabled=this.enabled.value;this._includeMissingKeyTypes=this.includeMissingKeyTypes.value};
weavejs.data.key.ColumnDataFilter.prototype._resetKeyLookup=function(){var state=org.apache.flex.utils.Language.as(this.values.getSessionState(),Array);var value;var range;var regexp;this._keyType=this.column.getMetadata(weavejs.api.data.ColumnMetadata.KEY_TYPE);this.map_key=new weavejs.util.JS.WeakMap;this._numberLookup=null;this._stringLookup=null;this._ranges=null;this._regexps=null;var foreachiter0_target=state;for(var foreachiter0 in foreachiter0_target){value=foreachiter0_target[foreachiter0];
if(org.apache.flex.utils.Language.is(value,Number)){if(!this._numberLookup)this._numberLookup={};this._numberLookup[value]=true}else if(org.apache.flex.utils.Language.is(value,String)){if(!this._stringLookup)this._stringLookup={};this._stringLookup[value]=true}else if(weavejs.data.key.ColumnDataFilterRange.isRange(value))try{range=new weavejs.data.key.ColumnDataFilterRange(value);if(!this._ranges)this._ranges=[];this._ranges.push(range)}catch(e){}else if(weavejs.data.key.ColumnDataFilter.isRegExp(value)){if(!this._regexps)this._regexps=
[];regexp=weavejs.data.key.ColumnDataFilter.toRegExp(value);this._regexps.push(regexp)}}if(this._ranges){var newState=[];var foreachiter1_target=state;for(var foreachiter1 in foreachiter1_target){value=foreachiter1_target[foreachiter1];if(org.apache.flex.utils.Language.is(value,Number)||org.apache.flex.utils.Language.is(value,String))newState.push(value)}var foreachiter2_target=this._ranges;for(var foreachiter2 in foreachiter2_target){range=foreachiter2_target[foreachiter2];newState.push(range.getState())}var foreachiter3_target=
this._regexps;for(var foreachiter3 in foreachiter3_target){regexp=foreachiter3_target[foreachiter3];value={};value[weavejs.data.key.ColumnDataFilter.REGEXP]=regexp.source;newState.push(value)}this.values.setSessionState(newState)}};
weavejs.data.key.ColumnDataFilter.prototype.containsKey=function(key){if(!this._enabled)return true;var number;var string;var result=this.map_key.get(key);if(result===undefined){result=false;if(this._numberLookup||this._ranges)number=this.column.getValueFromKey(key,Number);if(this._stringLookup||this._regexps)string=this.column.getValueFromKey(key,String);if(this._numberLookup)result=this._numberLookup.hasOwnProperty(number);if(!result&&this._stringLookup)result=this._stringLookup.hasOwnProperty(string);
if(!result&&this._includeMissingKeyTypes&&key.keyType!=this._keyType)result=true;if(!result&&this._ranges){var foreachiter4_target=this._ranges;for(var foreachiter4 in foreachiter4_target){var range=foreachiter4_target[foreachiter4];if(range.minInclusive?number<range.min:number<=range.min)continue;if(range.maxInclusive?number>range.max:number>=range.max)continue;result=true;break}}if(!result&&this._regexps){var foreachiter5_target=this._regexps;for(var foreachiter5 in foreachiter5_target){var regexp=
foreachiter5_target[foreachiter5];if(regexp.test(string)){result=true;break}}}this.map_key.set(key,result)}return result};weavejs.data.key.ColumnDataFilter.prototype.stringifyValues=function(){var result=org.apache.flex.utils.Language.as(this.values.getSessionState(),Array)||[];return result.map(org.apache.flex.utils.Language.closure(this.stringifyValue,this,'stringifyValue'))};
weavejs.data.key.ColumnDataFilter.prototype.stringifyValue=function(value,_){_=Array.prototype.slice.call(arguments,1);if(org.apache.flex.utils.Language.is(value,String))return value;else if(org.apache.flex.utils.Language.is(value,Number))return weavejs.data.ColumnUtils.deriveStringFromNumber(this.column,value);else if(weavejs.data.key.ColumnDataFilterRange.isRange(value)){var range=new weavejs.data.key.ColumnDataFilterRange(value);var leftBracket=range.minInclusive?'[':'(';var rightBracket=range.maxInclusive?
']':')';return leftBracket+this.stringifyValue(range.min)+', '+this.stringifyValue(range.max)+rightBracket}else if(weavejs.data.key.ColumnDataFilter.isRegExp(value))return weavejs.data.key.ColumnDataFilter.toRegExp(value).toString();return null};weavejs.data.key.ColumnDataFilter.isRegExp=function(obj){return obj!=null&&typeof obj=='object'&&(obj.hasOwnProperty(weavejs.data.key.ColumnDataFilter.REGEXP)||obj.hasOwnProperty(weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY))};
weavejs.data.key.ColumnDataFilter.toRegExp=function(value){return new RegExp(value[weavejs.data.key.ColumnDataFilter.REGEXP]||value[weavejs.data.key.ColumnDataFilter.ALTERNATE_REGEX_PROPERTY])};weavejs.data.key.ColumnDataFilter.prototype._deprecatedRangeState;
weavejs.data.key.ColumnDataFilter.prototype.handleMissingSessionStateProperties=function(newState){var STRING_VALUE='stringValue';if(newState.hasOwnProperty(STRING_VALUE))this.values.setSessionState([newState[STRING_VALUE]]);var STRING_VALUES='stringValues';if(newState.hasOwnProperty(STRING_VALUES))this.values.setSessionState(newState[STRING_VALUES]);var foreachiter6_target=['min','max'];for(var foreachiter6 in foreachiter6_target){var property=foreachiter6_target[foreachiter6];if(newState.hasOwnProperty(property)){if(!this._deprecatedRangeState)this._deprecatedRangeState=
{};this._deprecatedRangeState[property]=newState[property];this.values.setSessionState([this._deprecatedRangeState])}}};weavejs.data.key.ColumnDataFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'ColumnDataFilter',qName:'weavejs.data.key.ColumnDataFilter'}],interfaces:[weavejs.api.data.IKeyFilter,weavejs.api.core.ILinkableObjectWithNewProperties,weavejs.api.ui.IObjectWithDescription]};goog.provide('weavejs.api.data.IDynamicKeySet');goog.require('weavejs.api.core.ILinkableDynamicObject');weavejs.api.data.IDynamicKeySet=function(){};weavejs.api.data.IDynamicKeySet.prototype.getInternalKeySet=function(){};weavejs.api.data.IDynamicKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'IDynamicKeySet',qName:'weavejs.api.data.IDynamicKeySet'}],interfaces:[weavejs.api.core.ILinkableDynamicObject]};goog.provide('weavejs.data.key.DynamicKeySet');goog.require('weavejs.core.LinkableDynamicObject');goog.require('weavejs.api.data.IDynamicKeySet');weavejs.data.key.DynamicKeySet=function(){weavejs.data.key.DynamicKeySet.base(this,'constructor',weavejs.api.data.IKeySet)};goog.inherits(weavejs.data.key.DynamicKeySet,weavejs.core.LinkableDynamicObject);weavejs.data.key.DynamicKeySet.prototype.getInternalKeySet=function(){return org.apache.flex.utils.Language.as(this.internalObject,weavejs.api.data.IKeySet)};
weavejs.data.key.DynamicKeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'DynamicKeySet',qName:'weavejs.data.key.DynamicKeySet'}],interfaces:[weavejs.api.data.IDynamicKeySet]};goog.provide('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.core.CallbackCollection');goog.require('weavejs.api.data.IKeySetCallbackInterface');weavejs.data.key.KeySetCallbackInterface=function(){this._keysAdded=[];this._keysRemoved=[];weavejs.data.key.KeySetCallbackInterface.base(this,'constructor',org.apache.flex.utils.Language.closure(this.setCallbackVariables,this,'setCallbackVariables'))};goog.inherits(weavejs.data.key.KeySetCallbackInterface,weavejs.core.CallbackCollection);
weavejs.data.key.KeySetCallbackInterface.prototype._keysAdded;weavejs.data.key.KeySetCallbackInterface.prototype._keysRemoved;weavejs.data.key.KeySetCallbackInterface.prototype.setCallbackVariables=function(keysAdded,keysRemoved){this._keysAdded=keysAdded;this._keysRemoved=keysRemoved};
weavejs.data.key.KeySetCallbackInterface.prototype.flushKeys=function(){if(this._keysAdded.length||this._keysRemoved.length)this._runCallbacksImmediately(this._keysAdded,this._keysRemoved);this.setCallbackVariables([],[])};Object.defineProperties(weavejs.data.key.KeySetCallbackInterface.prototype,{keysAdded:{get:function(){return this._keysAdded},set:function(qkeys){this._keysAdded=qkeys}},keysRemoved:{get:function(){return this._keysRemoved},set:function(qkeys){this._keysRemoved=qkeys}}});
weavejs.data.key.KeySetCallbackInterface.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySetCallbackInterface',qName:'weavejs.data.key.KeySetCallbackInterface'}],interfaces:[weavejs.api.data.IKeySetCallbackInterface]};goog.provide('weavejs.data.key.KeySet');goog.require('weavejs.core.LinkableVariable');goog.require('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.api.data.IKeySet');
weavejs.data.key.KeySet=function(){this.keyCallbacks=Weave.linkableChild(this,weavejs.data.key.KeySetCallbackInterface);this.map_key_index=new weavejs.util.JS.Map;this._keys=new Array;weavejs.data.key.KeySet.base(this,'constructor',Array,org.apache.flex.utils.Language.closure(this.verifySessionState,this,'verifySessionState'));this.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'))};goog.inherits(weavejs.data.key.KeySet,weavejs.core.LinkableVariable);
weavejs.data.key.KeySet.prototype.keyCallbacks;weavejs.data.key.KeySet.prototype.verifySessionState=function(value){var foreachiter0_target=value;for(var foreachiter0 in foreachiter0_target){var row=foreachiter0_target[foreachiter0];if(!org.apache.flex.utils.Language.is(row,Array))return false}return true};weavejs.data.key.KeySet.prototype._currentlyUpdating=false;
weavejs.data.key.KeySet.prototype.updateKeys=function(){if(this._currentlyUpdating)return;var newKeys=[];var foreachiter1_target=this._sessionStateInternal;for(var foreachiter1 in foreachiter1_target){var row=foreachiter1_target[foreachiter1];newKeys.push.apply(newKeys,weavejs.WeaveAPI.QKeyManager.getQKeys(row[0],row.slice(1)))}this.delayCallbacks();this._currentlyUpdating=true;this.replaceKeys(newKeys);this.keyCallbacks.flushKeys();this._currentlyUpdating=false;this.resumeCallbacks()};
weavejs.data.key.KeySet.prototype.updateSessionState=function(){if(this._currentlyUpdating)return;var _keyTypeToKeysMap={};var foreachiter2_target=this._keys;for(var foreachiter2 in foreachiter2_target){var key=foreachiter2_target[foreachiter2];if(_keyTypeToKeysMap[key.keyType]==undefined)_keyTypeToKeysMap[key.keyType]=[];org.apache.flex.utils.Language.as(_keyTypeToKeysMap[key.keyType],Array).push(key.localName)}var keyTable=[];for(var keyType in _keyTypeToKeysMap){var newKeys=_keyTypeToKeysMap[keyType];
newKeys.unshift(keyType);keyTable.push(newKeys)}this.delayCallbacks();this._currentlyUpdating=true;this.setSessionState(keyTable);this.keyCallbacks.flushKeys();this._currentlyUpdating=false;this.resumeCallbacks()};weavejs.data.key.KeySet.prototype.map_key_index;weavejs.data.key.KeySet.prototype._keys;
weavejs.data.key.KeySet.prototype.replaceKeys=function(newKeys){if(this._locked)return false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(newKeys);if(newKeys==this._keys)this._keys=this._keys.concat();var key;var changeDetected=false;var prevKeyIndex=this.map_key_index;this.map_key_index=new weavejs.util.JS.Map;this._keys.length=newKeys.length;var outputIndex=0;for(var inputIndex=0;inputIndex<newKeys.length;inputIndex++){key=org.apache.flex.utils.Language.as(newKeys[inputIndex],weavejs.api.data.IQualifiedKey);
if(this.map_key_index.has(key))continue;this._keys[outputIndex]=key;this.map_key_index.set(key,outputIndex);if(prevKeyIndex[key]==undefined){changeDetected=true;this.keyCallbacks.keysAdded.push(key)}outputIndex++}this._keys.length=outputIndex;var oldKeys=weavejs.util.JS.mapKeys(prevKeyIndex);var foreachiter3_target=oldKeys;for(var foreachiter3 in foreachiter3_target){key=foreachiter3_target[foreachiter3];if(!this.map_key_index.has(key)){changeDetected=true;this.keyCallbacks.keysRemoved.push(key)}}if(changeDetected)this.updateSessionState();
return changeDetected};weavejs.data.key.KeySet.prototype.clearKeys=function(){if(this._locked)return false;if(this._keys.length==0)return false;this.keyCallbacks.keysRemoved=this.keyCallbacks.keysRemoved.concat(this._keys);this.map_key_index=new weavejs.util.JS.Map;this._keys=[];this.updateSessionState();return true};weavejs.data.key.KeySet.prototype.containsKey=function(key){return this.map_key_index.has(key)};
weavejs.data.key.KeySet.prototype.addKeys=function(additionalKeys){if(this._locked)return false;var changeDetected=false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(additionalKeys);var foreachiter4_target=additionalKeys;for(var foreachiter4 in foreachiter4_target){var key=foreachiter4_target[foreachiter4];if(!this.map_key_index.has(key)){var newIndex=this._keys.length;this._keys[newIndex]=key;this.map_key_index.set(key,newIndex);changeDetected=true;this.keyCallbacks.keysAdded.push(key)}}if(changeDetected)this.updateSessionState();
return changeDetected};
weavejs.data.key.KeySet.prototype.removeKeys=function(unwantedKeys){if(this._locked)return false;if(unwantedKeys==this._keys)return this.clearKeys();var changeDetected=false;weavejs.WeaveAPI.QKeyManager.convertToQKeys(unwantedKeys);var foreachiter5_target=unwantedKeys;for(var foreachiter5 in foreachiter5_target){var key=foreachiter5_target[foreachiter5];if(this.map_key_index.has(key)){var droppedIndex=this.map_key_index.get(key);if(droppedIndex<this._keys.length-1){var lastKey=org.apache.flex.utils.Language.as(this._keys[this.keys.length-
1],weavejs.api.data.IQualifiedKey);this._keys[droppedIndex]=lastKey;this.map_key_index.set(lastKey,droppedIndex)}this._keys.length--;this.map_key_index['delete'](key);changeDetected=true;this.keyCallbacks.keysRemoved.push(key)}}if(changeDetected)this.updateSessionState();return changeDetected};
weavejs.data.key.KeySet.prototype.setSessionState=function(value){if(!org.apache.flex.utils.Language.is(value,String)&&!org.apache.flex.utils.Language.is(value,Array)&&value!=null){var keysProperty='sessionedKeys';var keyTypeProperty='sessionedKeyType';if(value.hasOwnProperty(keysProperty)&&value.hasOwnProperty(keyTypeProperty))if(value[keyTypeProperty]!=null&&value[keysProperty]!=null)value=weavejs.WeaveAPI.CSVParser.createCSVRow([value[keyTypeProperty]])+','+value[keysProperty]}if(org.apache.flex.utils.Language.is(value,
String))value=weavejs.WeaveAPI.CSVParser.parseCSV(org.apache.flex.utils.Language.as(value,String));weavejs.data.key.KeySet.base(this,'setSessionState',value)};
weavejs.data.key.KeySet.test=function(){var __localFn0__=function(){weavejs.data.key.KeySet.traceKeySet(k)};var k=new weavejs.data.key.KeySet;var k2=new weavejs.data.key.KeySet;k.addImmediateCallback(null,__localFn0__);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'create k','t',['a','b','c'],'t',['a','b','c']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add','t',['b','c','d','e'],
't',['a','b','c','d','e']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.removeKeys,k,'removeKeys'),'remove','t',['d','e','f','g'],'t',['a','b','c']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'replace','t',['b','x'],'t',['b','x']);k2.replaceKeys(weavejs.WeaveAPI.QKeyManager.getQKeys('t',['a','b','x','y']));org.apache.flex.utils.Language.trace('copy k2 to k');weavejs.WeaveAPI.SessionManager.copySessionState(k2,
k);weavejs.data.key.KeySet.assert(k,weavejs.WeaveAPI.QKeyManager.getQKeys('t',['a','b','x','y']));org.apache.flex.utils.Language.trace('test deprecated session state');weavejs.WeaveAPI.SessionManager.setSessionState(k,{sessionedKeyType:'t2',sessionedKeys:'a,b,x,y'},true);weavejs.data.key.KeySet.assert(k,weavejs.WeaveAPI.QKeyManager.getQKeys('t2',['a','b','x','y']));weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.replaceKeys,k,'replaceKeys'),'replace k','t',['1'],'t',
['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add k','t2',['1'],'t',['1'],'t2',['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.removeKeys,k,'removeKeys'),'remove k','t',['1'],'t2',['1']);weavejs.data.key.KeySet.testFunction(k,org.apache.flex.utils.Language.closure(k.addKeys,k,'addKeys'),'add k','t2',['1'],'t2',['1']);var foreachiter6_target=weavejs.WeaveAPI.QKeyManager.getAllKeyTypes();for(var foreachiter6 in foreachiter6_target){var t=
foreachiter6_target[foreachiter6];org.apache.flex.utils.Language.trace('all keys ('+t+'):',weavejs.data.key.KeySet.getKeyStrings(weavejs.WeaveAPI.QKeyManager.getAllQKeys(t)))}};weavejs.data.key.KeySet.getKeyStrings=function(qkeys){var keyStrings=[];var foreachiter7_target=qkeys;for(var foreachiter7 in foreachiter7_target){var key=foreachiter7_target[foreachiter7];keyStrings.push(key.keyType+'#'+key.localName)}return keyStrings};
weavejs.data.key.KeySet.traceKeySet=function(keySet){org.apache.flex.utils.Language.trace(' -\x3e',weavejs.data.key.KeySet.getKeyStrings(keySet.keys));org.apache.flex.utils.Language.trace('   ',Weave.stringify(weavejs.WeaveAPI.SessionManager.getSessionState(keySet)))};
weavejs.data.key.KeySet.testFunction=function(keySet,func,comment,keyType,keys,expectedResultKeyType,expectedResultKeys,expectedResultKeyType2,expectedResultKeys2){expectedResultKeyType2=typeof expectedResultKeyType2!=='undefined'?expectedResultKeyType2:null;expectedResultKeys2=typeof expectedResultKeys2!=='undefined'?expectedResultKeys2:null;org.apache.flex.utils.Language.trace(comment,keyType,keys);func(weavejs.WeaveAPI.QKeyManager.getQKeys(keyType,keys));var keys1=expectedResultKeys?weavejs.WeaveAPI.QKeyManager.getQKeys(expectedResultKeyType,
expectedResultKeys):[];var keys2=expectedResultKeys2?weavejs.WeaveAPI.QKeyManager.getQKeys(expectedResultKeyType2,expectedResultKeys2):[];weavejs.data.key.KeySet.assert(keySet,keys1,keys2)};
weavejs.data.key.KeySet.assert=function(keySet,expectedKeys1,expectedKeys2){expectedKeys2=typeof expectedKeys2!=='undefined'?expectedKeys2:null;var qkey;var map_key=new weavejs.util.JS.Map;var foreachiter8_target=[expectedKeys1,expectedKeys2];for(var foreachiter8 in foreachiter8_target){var keys=foreachiter8_target[foreachiter8];var foreachiter9_target=keys;for(var foreachiter9 in foreachiter9_target){qkey=foreachiter9_target[foreachiter9];if(!keySet.containsKey(qkey))throw new Error('KeySet does not contain expected keys');
map_key.set(qkey,true)}}var foreachiter10_target=keySet.keys;for(var foreachiter10 in foreachiter10_target){qkey=foreachiter10_target[foreachiter10];if(!map_key.has(qkey))throw new Error('KeySet contains unexpected keys');}};Object.defineProperties(weavejs.data.key.KeySet.prototype,{keys:{get:function(){return this._keys}}});weavejs.data.key.KeySet.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeySet',qName:'weavejs.data.key.KeySet'}],interfaces:[weavejs.api.data.IKeySet]};goog.provide('weavejs.data.key.KeyFilter');goog.require('weavejs.data.key.KeySet');goog.require('weavejs.api.core.ILinkableObject');goog.require('weavejs.api.data.IKeyFilter');
weavejs.data.key.KeyFilter=function(){this.includeMissingKeys=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.cacheValues,this,'cacheValues'));this.includeMissingKeyTypes=Weave.linkableChild(this,weavejs.core.LinkableBoolean,org.apache.flex.utils.Language.closure(this.cacheValues,this,'cacheValues'));this.included=Weave.linkableChild(this,weavejs.data.key.KeySet,org.apache.flex.utils.Language.closure(this.handleIncludeChange,this,'handleIncludeChange'));
this.excluded=Weave.linkableChild(this,weavejs.data.key.KeySet,org.apache.flex.utils.Language.closure(this.handleExcludeChange,this,'handleExcludeChange'));this.filters=Weave.linkableChild(this,new weavejs.core.LinkableHashMap(weavejs.api.data.IKeyFilter));this._includedKeyTypeMap=new Object;this._excludedKeyTypeMap=new Object;this.includeMissingKeys.value=false;this.includeMissingKeyTypes.value=true;this.filters.childListCallbacks.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this.cacheValues,
this,'cacheValues'))};weavejs.data.key.KeyFilter.prototype.includeMissingKeys;weavejs.data.key.KeyFilter.prototype.includeMissingKeyTypes;weavejs.data.key.KeyFilter.prototype.included;weavejs.data.key.KeyFilter.prototype.excluded;weavejs.data.key.KeyFilter.prototype.filters;weavejs.data.key.KeyFilter.prototype._includeMissingKeys;weavejs.data.key.KeyFilter.prototype._includeMissingKeyTypes;weavejs.data.key.KeyFilter.prototype._filters;
weavejs.data.key.KeyFilter.prototype.cacheValues=function(){this._includeMissingKeys=this.includeMissingKeys.value;this._includeMissingKeyTypes=this.includeMissingKeyTypes.value;this._filters=this.filters.getObjects()};
weavejs.data.key.KeyFilter.prototype.replaceKeys=function(includeMissingKeys,includeMissingKeyTypes,includeKeys,excludeKeys){includeKeys=typeof includeKeys!=='undefined'?includeKeys:null;excludeKeys=typeof excludeKeys!=='undefined'?excludeKeys:null;Weave.getCallbacks(this).delayCallbacks();this.includeMissingKeys.value=includeMissingKeys;this.includeMissingKeyTypes.value=includeMissingKeyTypes;if(includeKeys)this.included.replaceKeys(includeKeys);else this.included.clearKeys();if(excludeKeys)this.excluded.replaceKeys(excludeKeys);
else this.excluded.clearKeys();Weave.getCallbacks(this).resumeCallbacks()};weavejs.data.key.KeyFilter.prototype.includeKeys=function(keys){this.included.addKeys(keys)};weavejs.data.key.KeyFilter.prototype.excludeKeys=function(keys){this.excluded.addKeys(keys)};weavejs.data.key.KeyFilter.prototype._includedKeyTypeMap;weavejs.data.key.KeyFilter.prototype._excludedKeyTypeMap;
weavejs.data.key.KeyFilter.prototype.handleIncludeChange=function(){var includedKeys=this.included.keys;this._includedKeyTypeMap=new Object;var foreachiter0_target=includedKeys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];this._includedKeyTypeMap[key.keyType]=true}this.excluded.removeKeys(includedKeys)};
weavejs.data.key.KeyFilter.prototype.handleExcludeChange=function(){var excludedKeys=this.excluded.keys;this._excludedKeyTypeMap=new Object;var foreachiter1_target=excludedKeys;for(var foreachiter1 in foreachiter1_target){var key=foreachiter1_target[foreachiter1];this._excludedKeyTypeMap[key.keyType]=true}this.included.removeKeys(excludedKeys)};
weavejs.data.key.KeyFilter.prototype.containsKey=function(key){var foreachiter2_target=this._filters;for(var foreachiter2 in foreachiter2_target){var filter=foreachiter2_target[foreachiter2];if(!filter.containsKey(key))return false}if(this._includeMissingKeys||this._includeMissingKeyTypes&&!this._includedKeyTypeMap[key.keyType]){if(this.excluded.containsKey(key))return false;if(!this._includeMissingKeyTypes&&this._excludedKeyTypeMap[key.keyType])return false;return true}else{if(this.included.containsKey(key))return true;
if(this._includeMissingKeyTypes&&!this._includedKeyTypeMap[key.keyType]&&!this._excludedKeyTypeMap[key.keyType])return true;return false}};weavejs.data.key.KeyFilter.prototype.handleDeprecatedSessionedProperty=function(propertyName,value){if(this._deprecatedState==null){this._deprecatedState={};Weave.callLater(this,org.apache.flex.utils.Language.closure(this._applyDeprecatedSessionState,this,'_applyDeprecatedSessionState'))}this._deprecatedState[propertyName]=value};
weavejs.data.key.KeyFilter.prototype._deprecatedState=null;weavejs.data.key.KeyFilter.prototype._applyDeprecatedSessionState=function(){this._deprecatedState.sessionedKeys=this._deprecatedState.includedKeys;this.included.setSessionState(this._deprecatedState);this._deprecatedState.sessionedKeys=this._deprecatedState.excludedKeys;this.excluded.setSessionState(this._deprecatedState)};
Object.defineProperties(weavejs.data.key.KeyFilter.prototype,{sessionedKeyType:{set:function(value){this.handleDeprecatedSessionedProperty('sessionedKeyType',value)}},includedKeys:{set:function(value){this.handleDeprecatedSessionedProperty('includedKeys',value)}},excludedKeys:{set:function(value){this.handleDeprecatedSessionedProperty('excludedKeys',value)}}});
weavejs.data.key.KeyFilter.prototype.FLEXJS_CLASS_INFO={names:[{name:'KeyFilter',qName:'weavejs.data.key.KeyFilter'}],interfaces:[weavejs.api.data.IKeyFilter,weavejs.api.core.ILinkableObject]};goog.provide('weavejs.core.LinkablePromise');goog.require('weavejs.api.core.IDisposableObject');goog.require('weavejs.api.core.ILinkableObject');
weavejs.core.LinkablePromise=function(task,description,validateNow){description=typeof description!=='undefined'?description:null;validateNow=typeof validateNow!=='undefined'?validateNow:false;this._task=task;this._description=description;this._callbackCollection=weavejs.WeaveAPI.SessionManager.getCallbackCollection(this);this._callbackCollection.addImmediateCallback(this,org.apache.flex.utils.Language.closure(this._immediateCallback,this,'_immediateCallback'));this._callbackCollection.addGroupedCallback(this,
org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'),validateNow,false);if(validateNow){this._lazy=false;this._immediateCallback()}};
weavejs.core.LinkablePromise.fromIterativeTask=function(initialize,iterativeTask,priority,description,validateNow){description=typeof description!=='undefined'?description:null;validateNow=typeof validateNow!=='undefined'?validateNow:false;var __localFn0__=function(){var __localFn0__=function(resolve,reject){weavejs.WeaveAPI.Scheduler.startTask(linkablePromise,iterativeTask,priority,resolve)};if(initialize!=null)initialize();return new weavejs.util.JS.Promise(__localFn0__)};var linkablePromise;var asyncStart=
__localFn0__;return linkablePromise=new weavejs.core.LinkablePromise(asyncStart,description,validateNow)};weavejs.core.LinkablePromise.prototype._task;weavejs.core.LinkablePromise.prototype._description;weavejs.core.LinkablePromise.prototype._callbackCollection;weavejs.core.LinkablePromise.prototype._lazy=true;weavejs.core.LinkablePromise.prototype._invalidated=true;weavejs.core.LinkablePromise.prototype._jsPromise;weavejs.core.LinkablePromise.prototype._selfTriggeredCount=0;weavejs.core.LinkablePromise.prototype._result;
weavejs.core.LinkablePromise.prototype._error;weavejs.core.LinkablePromise.prototype.validate=function(){if(!this._lazy)return;this._lazy=false;if(this._invalidated)this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype._immediateCallback=function(){if(this._callbackCollection.triggerCounter==this._selfTriggeredCount)return;this._invalidated=true;this._jsPromise=null;this._result=null;this._error=null;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(this._lazy)return;if(weavejs.WeaveAPI.SessionManager.linkableObjectIsBusy(this)){this._invalidated=false;return}var _tmp_description=null;if(org.apache.flex.utils.Language.is(this._description,
Function))_tmp_description=org.apache.flex.utils.Language.as(this._description,Function)();else _tmp_description=org.apache.flex.utils.Language.as(this._description,String);weavejs.WeaveAPI.ProgressIndicator.addTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'),this,_tmp_description)};
weavejs.core.LinkablePromise.prototype._groupedCallback=function(){try{if(this._lazy||!this._invalidated)return;var invokeResult=this._task.apply(null);if(!this._invalidated)return;this._invalidated=false;if(org.apache.flex.utils.Language.is(invokeResult,weavejs.util.WeavePromise))this._jsPromise=org.apache.flex.utils.Language.as(invokeResult,weavejs.util.WeavePromise).getPromise();else this._jsPromise=org.apache.flex.utils.Language.as(invokeResult,weavejs.util.JS.Promise);if(this._jsPromise)this._jsPromise.then(this._handleResult.bind(this,
this._jsPromise),this._handleFault.bind(this,this._jsPromise));else{this._result=invokeResult;weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._handleResult,this,'_handleResult'))}}catch(invokeError){this._invalidated=false;this._jsPromise=null;this._error=invokeError;weavejs.WeaveAPI.Scheduler.callLater(this,org.apache.flex.utils.Language.closure(this._handleFault,this,'_handleFault'))}};
weavejs.core.LinkablePromise.prototype._handleResult=function(jsPromise,result){jsPromise=typeof jsPromise!=='undefined'?jsPromise:null;result=typeof result!=='undefined'?result:undefined;if(this._invalidated||this._jsPromise!=jsPromise)return;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(jsPromise)this._result=result;this._selfTriggeredCount=this._callbackCollection.triggerCounter+1;this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype._handleFault=function(jsPromise,error){jsPromise=typeof jsPromise!=='undefined'?jsPromise:null;error=typeof error!=='undefined'?error:undefined;if(this._invalidated||this._jsPromise!=jsPromise)return;weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));if(jsPromise)this._error=error;this._selfTriggeredCount=this._callbackCollection.triggerCounter+1;this._callbackCollection.triggerCallbacks()};
weavejs.core.LinkablePromise.prototype.depend=function(dependency,otherDependencies){otherDependencies=Array.prototype.slice.call(arguments,1);otherDependencies.unshift(dependency);var foreachiter0_target=otherDependencies;for(var foreachiter0 in foreachiter0_target){dependency=foreachiter0_target[foreachiter0];Weave.linkableChild(this,dependency)}return this};
weavejs.core.LinkablePromise.prototype.dispose=function(){weavejs.WeaveAPI.ProgressIndicator.removeTask(org.apache.flex.utils.Language.closure(this._groupedCallback,this,'_groupedCallback'));this._lazy=true;this._invalidated=true;this._jsPromise=null;this._result=null;this._error=null};Object.defineProperties(weavejs.core.LinkablePromise.prototype,{result:{get:function(){this.validate();return this._result}},error:{get:function(){this.validate();return this._error}}});
weavejs.core.LinkablePromise.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkablePromise',qName:'weavejs.core.LinkablePromise'}],interfaces:[weavejs.api.core.ILinkableObject,weavejs.api.core.IDisposableObject]};goog.provide('weavejs.core.LinkableFile');goog.require('weavejs.core.LinkablePromise');goog.require('weavejs.api.core.ILinkableVariable');
weavejs.core.LinkableFile=function(defaultValue,taskDescription,responseType){defaultValue=typeof defaultValue!=='undefined'?defaultValue:null;taskDescription=typeof taskDescription!=='undefined'?taskDescription:null;responseType=typeof responseType!=='undefined'?responseType:'arraybuffer';this.responseType=responseType;this.linkablePromise=Weave.linkableChild(this,new weavejs.core.LinkablePromise(org.apache.flex.utils.Language.closure(this.requestContent,this,'requestContent'),taskDescription));
this.url=Weave.linkableChild(this.linkablePromise,new weavejs.core.LinkableString(defaultValue))};weavejs.core.LinkableFile.prototype.linkablePromise;weavejs.core.LinkableFile.prototype.url;weavejs.core.LinkableFile.prototype.responseType;weavejs.core.LinkableFile.prototype.requestContent=function(){if(!this.url.value)return null;return weavejs.WeaveAPI.URLRequestUtils.request(this.linkablePromise,weavejs.net.URLRequestUtils.METHOD_GET,this.url.value,null,null,this.responseType)};
weavejs.core.LinkableFile.prototype.setSessionState=function(value){this.url.setSessionState(value)};weavejs.core.LinkableFile.prototype.getSessionState=function(){return this.url.getSessionState()};
Object.defineProperties(weavejs.core.LinkableFile.prototype,{result:{get:function(){return org.apache.flex.utils.Language.as(this.linkablePromise.result,Object)}},error:{get:function(){return this.linkablePromise.error}},value:{get:function(){return this.url.value},set:function(new_value){this.url.value=new_value}}});weavejs.core.LinkableFile.prototype.FLEXJS_CLASS_INFO={names:[{name:'LinkableFile',qName:'weavejs.core.LinkableFile'}],interfaces:[weavejs.api.core.ILinkableVariable]};goog.provide('weavejs.data.source.CSVDataSource');goog.require('weavejs.core.LinkableFile');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.api.data.IDataSource_File');
weavejs.data.source.CSVDataSource=function(){this.csvData=Weave.linkableChild(this,new weavejs.core.LinkableVariable(Array,org.apache.flex.utils.Language.closure(this.verifyRows,this,'verifyRows')),org.apache.flex.utils.Language.closure(this.handleCSVDataChange,this,'handleCSVDataChange'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString,org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'));this.keyColName=Weave.linkableChild(this,weavejs.core.LinkableString,
org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'));this.metadata=Weave.linkableChild(this,new weavejs.core.LinkableVariable(null,org.apache.flex.utils.Language.closure(this.verifyMetadata,this,'verifyMetadata')));this.url=Weave.linkableChild(this,new weavejs.core.LinkableFile(null,null,weavejs.net.URLRequestUtils.RESPONSE_TEXT),org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'));this.delimiter=Weave.linkableChild(this,new weavejs.core.LinkableString(',',
org.apache.flex.utils.Language.closure(this.verifyDelimiter,this,'verifyDelimiter')),org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'));this.cachedDataTypes={};this.columnIds=[];this.keysCallbacks=Weave.linkableChild(this,weavejs.core.CallbackCollection);this.nullValues=[null,'','null','\\N','NaN'];weavejs.data.source.CSVDataSource.base(this,'constructor');Weave.linkableChild(this.hierarchyRefresh,this.metadata)};goog.inherits(weavejs.data.source.CSVDataSource,weavejs.data.source.AbstractDataSource);
weavejs.data.source.CSVDataSource.prototype.csvData;weavejs.data.source.CSVDataSource.prototype.verifyRows=function(rows){return weavejs.util.StandardLib.arrayIsType(rows,Array)};weavejs.data.source.CSVDataSource.prototype.keyType;weavejs.data.source.CSVDataSource.prototype.keyColName;weavejs.data.source.CSVDataSource.prototype.metadata;weavejs.data.source.CSVDataSource.prototype.verifyMetadata=function(value){return typeof value=='object'};weavejs.data.source.CSVDataSource.prototype.url;weavejs.data.source.CSVDataSource.prototype.delimiter;
weavejs.data.source.CSVDataSource.prototype.verifyDelimiter=function(value){return value&&value.length==1&&value!='"'};
weavejs.data.source.CSVDataSource.prototype.parseRawData=function(){if(!this.url.value)return;if(this.url.error)weavejs.util.JS.error(this.url.error);if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.parseRawData,this,'parseRawData'),this.delimiter)){if(this.csvParser)Weave.dispose(this.csvParser);this.csvParser=Weave.linkableChild(this,new weavejs.data.CSVParser(true,this.delimiter.value),org.apache.flex.utils.Language.closure(this.handleCSVParser,this,'handleCSVParser'))}this.csvParser.parseCSV(String(this.url.result||
''))};weavejs.data.source.CSVDataSource.prototype.csvParser;weavejs.data.source.CSVDataSource.prototype.handleCSVParser=function(){if(this.url.value)this.handleParsedRows(this.csvParser.parseResult);else this.csvData.setSessionState(this.csvParser.parseResult)};weavejs.data.source.CSVDataSource.prototype.handleCSVDataChange=function(){var rows=org.apache.flex.utils.Language.as(this.csvData.getSessionState(),Array);if(this.url.value&&rows!=null&&rows.length)this.url.value=null;if(!this.url.value)this.handleParsedRows(rows)};
weavejs.data.source.CSVDataSource.prototype.parsedRows;weavejs.data.source.CSVDataSource.prototype.cachedDataTypes;weavejs.data.source.CSVDataSource.prototype.columnIds;weavejs.data.source.CSVDataSource.prototype.keysArray;weavejs.data.source.CSVDataSource.prototype.keysCallbacks;
weavejs.data.source.CSVDataSource.prototype.handleParsedRows=function(rows){if(!rows)rows=[];this.cachedDataTypes={};this.parsedRows=rows;this.columnIds=org.apache.flex.utils.Language.is(rows[0],Array)?org.apache.flex.utils.Language.as(rows[0],Array).concat():[];var nameLookup={};for(var i=0;i<this.columnIds.length;i++)if(!this.columnIds[i]||nameLookup.hasOwnProperty(this.columnIds[i]))this.columnIds[i]=i;else nameLookup[this.columnIds[i]]=true;this.updateKeys(true);this.hierarchyRefresh.triggerCallbacks()};
weavejs.data.source.CSVDataSource.prototype.updateKeys=function(forced){forced=typeof forced!=='undefined'?forced:false;var changed=Weave.detectChange(org.apache.flex.utils.Language.closure(this.updateKeys,this,'updateKeys'),this.keyType,this.keyColName);if(this.parsedRows&&(forced||changed)){var colNames=this.parsedRows[0]||[];var keyColIndex=-1;if(this.keyColName.value){keyColIndex=colNames.indexOf(this.keyColName.value);if(keyColIndex<0)keyColIndex=-2}var keyStrings=this.getColumnValues(this.parsedRows,
keyColIndex,[]);var keyTypeString=this.keyType.value;this.keysArray=[];org.apache.flex.utils.Language.as(weavejs.WeaveAPI.QKeyManager,weavejs.data.key.QKeyManager).getQKeysAsync(this.keysCallbacks,this.keyType.value,keyStrings,null,this.keysArray)}};weavejs.data.source.CSVDataSource.prototype.setCSVData=function(rows){if(!this.verifyRows(rows))throw new Error('Invalid data format. Expecting nested Arrays.');this.csvData.setSessionState(rows)};
weavejs.data.source.CSVDataSource.prototype.getCSVData=function(){return org.apache.flex.utils.Language.as(this.csvData.getSessionState(),Array)};weavejs.data.source.CSVDataSource.prototype.setCSVDataString=function(csvDataString){this.csvData.setSessionState(weavejs.WeaveAPI.CSVParser.parseCSV(csvDataString))};weavejs.data.source.CSVDataSource.prototype.getColumnNames=function(){if(this.parsedRows&&this.parsedRows.length)return this.parsedRows[0].concat();return[]};
weavejs.data.source.CSVDataSource.prototype.getColumnIds=function(){return this.columnIds.concat()};
weavejs.data.source.CSVDataSource.prototype.getColumnMetadata=function(id){try{if(org.apache.flex.utils.Language.is(id,Number))id=this.columnIds[id];var meta=this.metadata.getSessionState();if(org.apache.flex.utils.Language.is(meta,Array)){var array=org.apache.flex.utils.Language.as(meta,Array);for(var i=0;i<array.length;i++){var item=array[i];var itemId=item[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME]||item[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX];if(itemId===undefined)itemId=
this.columnIds[i];if(itemId===id)return item}return null}else if(meta)return meta[id]}catch(e){weavejs.util.JS.error(e)}return null};weavejs.data.source.CSVDataSource.prototype.getColumnTitle=function(id){var meta=this.getColumnMetadata(id);var title=meta?meta[weavejs.api.data.ColumnMetadata.TITLE]:null;if(!title&&typeof id=='number'&&this.parsedRows&&this.parsedRows.length)title=this.parsedRows[0][id];if(!title)title=String(id);return title};
weavejs.data.source.CSVDataSource.prototype.generateMetadataForColumnId=function(id){var metadata={};metadata[weavejs.api.data.ColumnMetadata.TITLE]=this.getColumnTitle(id);metadata[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.keyType.value||weavejs.api.data.DataType.STRING;if(this.cachedDataTypes[id])metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.cachedDataTypes[id];var meta=this.getColumnMetadata(id);for(var key in meta)metadata[key]=meta[key];if(typeof id=='number')metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX]=
id;else metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME]=id;return metadata};weavejs.data.source.CSVDataSource.prototype.getAttributeColumn=function(metadata){if(typeof metadata!='object')metadata=this.generateMetadataForColumnId(metadata);return weavejs.data.source.CSVDataSource.base(this,'getAttributeColumn',metadata)};weavejs.data.source.CSVDataSource.prototype.getColumnById=function(columnNameOrIndex){return weavejs.WeaveAPI.AttributeColumnCache.getColumn(this,columnNameOrIndex)};
weavejs.data.source.CSVDataSource.prototype.putColumnInHashMap=function(columnNameOrIndex,destinationHashMap){var sourceOwner=org.apache.flex.utils.Language.as(Weave.getOwner(this),weavejs.api.core.ILinkableHashMap);if(!sourceOwner)return null;Weave.getCallbacks(destinationHashMap).delayCallbacks();var refCol=destinationHashMap.requestObject(null,weavejs.data.column.ReferencedColumn,false);refCol.setColumnReference(this,this.generateMetadataForColumnId(columnNameOrIndex));Weave.getCallbacks(destinationHashMap).resumeCallbacks();
return refCol};weavejs.data.source.CSVDataSource.prototype.putColumn=function(columnNameOrIndex,dynamicColumn){var sourceOwner=org.apache.flex.utils.Language.as(Weave.getOwner(this),weavejs.api.core.ILinkableHashMap);if(!sourceOwner||!dynamicColumn)return false;dynamicColumn.delayCallbacks();var refCol=dynamicColumn.requestLocalObject(weavejs.data.column.ReferencedColumn,false);refCol.setColumnReference(this,this.generateMetadataForColumnId(columnNameOrIndex));dynamicColumn.resumeCallbacks();return true};
weavejs.data.source.CSVDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;if(this.url.value)this.csvData.setSessionState(null);weavejs.data.source.CSVDataSource.base(this,'initialize',true)};
weavejs.data.source.CSVDataSource.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(root){var items=org.apache.flex.utils.Language.as(self.metadata.getSessionState(),Array);if(!items)items=self.getColumnIds();var children=[];for(var i=0;i<items.length;i++){var item=items[i];children[i]=self.generateHierarchyNode(item)||self.generateHierarchyNode(i)}return children};if(!this._rootNode)this._rootNode=new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,label:Weave.getRoot(this).getName(this),
children:__localFn0__});return this._rootNode};
weavejs.data.source.CSVDataSource.prototype.generateHierarchyNode=function(metadata){if(typeof metadata!='object')metadata=this.generateMetadataForColumnId(metadata);if(!metadata)return null;if(metadata.hasOwnProperty(weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX)||metadata.hasOwnProperty(weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME))return new weavejs.data.hierarchy.ColumnTreeNode({dataSource:this,label:org.apache.flex.utils.Language.closure(this.getColumnNodeLabel,this,'getColumnNodeLabel'),
idFields:[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX,weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME],data:metadata});return null};weavejs.data.source.CSVDataSource.prototype.getColumnNodeLabel=function(node){var title=node.data[weavejs.api.data.ColumnMetadata.TITLE]||node.data[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME];if(!title&&node.data['name']){title=node.data['name'];if(node.data['year'])title=weavejs.util.StandardLib.substitute('{0} ({1})',title,node.data['year'])}return title};
weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX='csvColumnIndex';weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME='csvColumn';
weavejs.data.source.CSVDataSource.prototype.requestColumnFromSource=function(proxyColumn){var metadata=proxyColumn.getProxyMetadata();var columnId=metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_INDEX];if(columnId!=null)columnId=org.apache.flex.utils.Language._int(columnId);else{columnId=metadata[weavejs.data.source.CSVDataSource.METADATA_COLUMN_NAME];if(!columnId){for(var i=0;i<this.columnIds.length;i++){var meta=this.getColumnMetadata(this.columnIds[i]);if(!meta)continue;var found=0;
for(var key in metadata){if(meta[key]!=metadata[key]){found=0;break}found++}if(found){columnId=i;break}}if(!columnId)columnId=metadata['name']}}var colNames=this.parsedRows[0]||[];var colIndex,colName;if(typeof columnId=='number'){colIndex=org.apache.flex.utils.Language._int(columnId);colName=colNames[columnId]}else{colIndex=colNames.indexOf(columnId);colName=String(columnId)}if(colIndex<0){proxyColumn.dataUnavailable(Weave.lang('No such column: {0}',columnId));return}metadata=this.generateMetadataForColumnId(columnId);
proxyColumn.setMetadata(metadata);var strings=this.getColumnValues(this.parsedRows,colIndex,[]);var numbers=null;var dateFormats=null;if(!this.keysArray||strings.length!=this.keysArray.length){proxyColumn.setInternalColumn(null);return}var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==null||dataType==weavejs.api.data.DataType.NUMBER)numbers=this.stringsToNumbers(strings,dataType==weavejs.api.data.DataType.NUMBER);if(!numbers&&dataType==null||dataType==weavejs.api.data.DataType.DATE)dateFormats=
weavejs.data.column.DateColumn.detectDateFormats(strings);var newColumn;if(numbers){newColumn=new weavejs.data.column.NumberColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.NumberColumn).setRecords(this.keysArray,numbers)}else if(dataType==weavejs.api.data.DataType.DATE||dateFormats&&dateFormats.length>0){newColumn=new weavejs.data.column.DateColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.DateColumn).setRecords(this.keysArray,strings)}else{newColumn=
new weavejs.data.column.StringColumn(metadata);org.apache.flex.utils.Language.as(newColumn,weavejs.data.column.StringColumn).setRecords(this.keysArray,strings)}this.cachedDataTypes[columnId]=newColumn.getMetadata(weavejs.api.data.ColumnMetadata.DATA_TYPE);proxyColumn.setInternalColumn(newColumn)};
weavejs.data.source.CSVDataSource.prototype.getColumnValues=function(rows,columnIndex,outputArray){outputArray.length=Math.max(0,rows.length-1);var i;if(columnIndex==-1)for(i=1;i<rows.length;i++)outputArray[i-1]=i;else for(i=1;i<rows.length;i++)outputArray[i-1]=rows[i][columnIndex];return outputArray};
weavejs.data.source.CSVDataSource.prototype.stringsToNumbers=function(strings,forced){var numbers=new Array(strings.length);var i=strings.length;outerLoop:while(i--){var string=weavejs.util.StandardLib.trim(String(strings[i]));var foreachiter0_target=this.nullValues;for(var foreachiter0 in foreachiter0_target){var nullValue=foreachiter0_target[foreachiter0];var a=nullValue&&nullValue.toLocaleLowerCase();var b=string&&string.toLocaleLowerCase();if(a==b){numbers[i]=NaN;continue outerLoop}}if(!forced&&
string.length>1&&string.charAt(0)=='0'&&string.charAt(1)!='.')return null;if(string.indexOf(',')>=0)string=string.split(',').join('');var number=Number(string);if(isNaN(number)&&!forced)return null;numbers[i]=number}return numbers};weavejs.data.source.CSVDataSource.prototype.nullValues;weavejs.data.source.CSVDataSource.prototype.getColumnByName=function(name){return this.getColumnById(name)};
Object.defineProperties(weavejs.data.source.CSVDataSource.prototype,{initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.CSVDataSource,this,'initializationComplete')&&this.parsedRows&&this.keysArray&&!Weave.isBusy(this.keysCallbacks)}},csvDataString:{set:function(value){this.setCSVDataString(value)}}});weavejs.data.source.CSVDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'CSVDataSource',qName:'weavejs.data.source.CSVDataSource'}],interfaces:[weavejs.api.data.IDataSource_File]};goog.provide('weavejs.data.source.GeoJSONDataSourceData');
weavejs.data.source.GeoJSONDataSourceData=function(obj,keyType,keyPropertyName){var self=this;var __localFn0__=function(item,i,a){return item===undefined};var __localFn1__=function(o,i,a){return i};var __localFn2__=function(props,i,a){for(var key in props){var value=props[key];var oldType=self.propertyTypes[key];var newType=value==null?oldType:typeof value;if(!self.propertyTypes.hasOwnProperty(key)){self.propertyTypes[key]=newType;self.propertyNames.push(key)}else if(oldType!=newType)self.propertyTypes[key]=
'object'}};var crs=obj[weavejs.geom.GeoJSON.P_CRS];if(crs&&crs[weavejs.geom.GeoJSON.P_TYPE]==weavejs.geom.GeoJSON.CRS_T_NAME)this.projection=weavejs.geom.GeoJSON.getProjectionFromURN(crs[weavejs.geom.GeoJSON.CRS_P_PROPERTIES][weavejs.geom.GeoJSON.CRS_N_P_NAME]);var featureCollection=weavejs.geom.GeoJSON.asFeatureCollection(obj);var features=featureCollection[weavejs.geom.GeoJSON.FC_P_FEATURES];this.ids=weavejs.util.ArrayUtils.pluck(features,weavejs.geom.GeoJSON.F_P_ID);this.geometries=weavejs.util.ArrayUtils.pluck(features,
weavejs.geom.GeoJSON.F_P_GEOMETRY);this.properties=weavejs.util.ArrayUtils.pluck(features,weavejs.geom.GeoJSON.F_P_PROPERTIES);if(this.ids.every(__localFn0__))this.ids=features.map(__localFn1__);this.propertyNames=[];this.propertyTypes={};this.properties.forEach(__localFn2__);weavejs.util.AsyncSort.sortImmediately(this.propertyNames);this.resetQKeys(keyType,keyPropertyName)};weavejs.data.source.GeoJSONDataSourceData.prototype.projection=null;
weavejs.data.source.GeoJSONDataSourceData.prototype.ids=null;weavejs.data.source.GeoJSONDataSourceData.prototype.geometries=null;weavejs.data.source.GeoJSONDataSourceData.prototype.properties=null;weavejs.data.source.GeoJSONDataSourceData.prototype.propertyNames=null;weavejs.data.source.GeoJSONDataSourceData.prototype.propertyTypes=null;weavejs.data.source.GeoJSONDataSourceData.prototype.qkeys=null;
weavejs.data.source.GeoJSONDataSourceData.prototype.resetQKeys=function(keyType,propertyName){var values=this.ids;if(propertyName&&this.propertyNames.indexOf(propertyName)>=0)values=weavejs.util.ArrayUtils.pluck(this.properties,propertyName);this.qkeys=weavejs.WeaveAPI.QKeyManager.getQKeys(keyType,values)};weavejs.data.source.GeoJSONDataSourceData.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSourceData',qName:'weavejs.data.source.GeoJSONDataSourceData'}]};goog.provide('weavejs.data.source.GeoJSONDataSourceNode');goog.require('weavejs.api.data.IColumnReference');goog.require('weavejs.api.data.IWeaveTreeNode');weavejs.data.source.GeoJSONDataSourceNode=function(source,metadata,children,idFields){children=typeof children!=='undefined'?children:null;idFields=typeof idFields!=='undefined'?idFields:null;this.source=source;this.metadata=metadata||{};this.children=children;this.idFields=idFields};weavejs.data.source.GeoJSONDataSourceNode.prototype.idFields;
weavejs.data.source.GeoJSONDataSourceNode.prototype.source;weavejs.data.source.GeoJSONDataSourceNode.prototype.metadata;weavejs.data.source.GeoJSONDataSourceNode.prototype.children;
weavejs.data.source.GeoJSONDataSourceNode.prototype.equals=function(other){var that=org.apache.flex.utils.Language.as(other,weavejs.data.source.GeoJSONDataSourceNode);if(that&&this.source==that.source&&weavejs.util.StandardLib.compare(this.idFields,that.idFields)==0){if(this.idFields&&this.idFields.length){var foreachiter0_target=this.idFields;for(var foreachiter0 in foreachiter0_target){var field=foreachiter0_target[foreachiter0];if(this.metadata[field]!=that.metadata[field])return false}return true}return weavejs.util.StandardLib.compare(this.metadata,
that.metadata)==0}return false};weavejs.data.source.GeoJSONDataSourceNode.prototype.getLabel=function(){return this.metadata[weavejs.api.data.ColumnMetadata.TITLE]};weavejs.data.source.GeoJSONDataSourceNode.prototype.isBranch=function(){return this.children!=null};weavejs.data.source.GeoJSONDataSourceNode.prototype.hasChildBranches=function(){return false};weavejs.data.source.GeoJSONDataSourceNode.prototype.getChildren=function(){return this.children};
weavejs.data.source.GeoJSONDataSourceNode.prototype.getDataSource=function(){return this.source};weavejs.data.source.GeoJSONDataSourceNode.prototype.getColumnMetadata=function(){return this.children?null:this.metadata};weavejs.data.source.GeoJSONDataSourceNode.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSourceNode',qName:'weavejs.data.source.GeoJSONDataSourceNode'}],interfaces:[weavejs.api.data.IWeaveTreeNode,weavejs.api.data.IColumnReference]};goog.provide('weavejs.data.source.GeoJSONDataSource');goog.require('weavejs.data.source.AbstractDataSource');goog.require('weavejs.data.source.GeoJSONDataSourceData');goog.require('weavejs.data.source.GeoJSONDataSourceNode');goog.require('weavejs.api.data.IDataSource_File');
weavejs.data.source.GeoJSONDataSource=function(){weavejs.data.source.GeoJSONDataSource.base(this,'constructor');this.url=Weave.linkableChild(this,new weavejs.core.LinkableFile(null,null,weavejs.net.URLRequestUtils.RESPONSE_JSON),org.apache.flex.utils.Language.closure(this.handleFile,this,'handleFile'));this.keyType=Weave.linkableChild(this,weavejs.core.LinkableString);this.keyProperty=Weave.linkableChild(this,weavejs.core.LinkableString);this.projection=Weave.linkableChild(this,weavejs.core.LinkableString)};
goog.inherits(weavejs.data.source.GeoJSONDataSource,weavejs.data.source.AbstractDataSource);weavejs.data.source.GeoJSONDataSource.prototype.url;weavejs.data.source.GeoJSONDataSource.prototype.keyType;weavejs.data.source.GeoJSONDataSource.prototype.keyProperty;weavejs.data.source.GeoJSONDataSource.prototype.projection;weavejs.data.source.GeoJSONDataSource.prototype.jsonData=null;
weavejs.data.source.GeoJSONDataSource.prototype.getProjection=function(){return this.projection.value||(this.jsonData?this.jsonData.projection:null)||'EPSG:4326'};weavejs.data.source.GeoJSONDataSource.prototype.getKeyType=function(){var kt=this.keyType.value;if(!kt){kt=this.url.value;if(this.keyProperty.value)kt+='#'+this.keyProperty.value}return kt};
weavejs.data.source.GeoJSONDataSource.prototype.initialize=function(forceRefresh){forceRefresh=typeof forceRefresh!=='undefined'?forceRefresh:false;this._rootNode=null;if(Weave.detectChange(org.apache.flex.utils.Language.closure(this.initialize,this,'initialize'),this.keyType,this.keyProperty))if(this.jsonData)this.jsonData.resetQKeys(this.getKeyType(),this.keyProperty.value);weavejs.data.source.GeoJSONDataSource.base(this,'initialize',true)};
weavejs.data.source.GeoJSONDataSource.prototype.handleFile=function(){if(Weave.isBusy(this.url))return;this.jsonData=null;if(!this.url.result){this.hierarchyRefresh.triggerCallbacks();if(this.url.error)weavejs.util.JS.error(this.url.error);return}try{var obj=this.url.result;if(!weavejs.geom.GeoJSON.isGeoJSONObject(obj))throw new Error('Invalid GeoJSON file: '+this.url.value);this.jsonData=new weavejs.data.source.GeoJSONDataSourceData(obj,this.getKeyType(),this.keyProperty.value);this.hierarchyRefresh.triggerCallbacks()}catch(e){weavejs.util.JS.error(e)}};
weavejs.data.source.GeoJSONDataSource.prototype.getHierarchyRoot=function(){var self=this;var __localFn0__=function(n,i,a){return self.generateHierarchyNode(n)};var __localFn1__=function(n,_){_=Array.prototype.slice.call(arguments,1);return n!=null};if(!org.apache.flex.utils.Language.is(this._rootNode,weavejs.data.source.GeoJSONDataSourceNode)){var meta={};meta[weavejs.api.data.ColumnMetadata.TITLE]=Weave.getRoot(this).getName(this);var rootChildren=[];if(this.jsonData)rootChildren=[''].concat(this.jsonData.propertyNames).map(__localFn0__).filter(__localFn1__);
this._rootNode=new weavejs.data.source.GeoJSONDataSourceNode(this,meta,rootChildren)}return this._rootNode};
weavejs.data.source.GeoJSONDataSource.prototype.generateHierarchyNode=function(metadata){if(metadata==null||!this.jsonData)return null;if(org.apache.flex.utils.Language.is(metadata,String)){var str=org.apache.flex.utils.Language.as(metadata,String);metadata={};metadata[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]=str}if(metadata&&metadata.hasOwnProperty(weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME)){metadata=this.getMetadataForProperty(metadata[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]);
return new weavejs.data.source.GeoJSONDataSourceNode(this,metadata,null,[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME])}return null};
weavejs.data.source.GeoJSONDataSource.prototype.requestColumnFromSource=function(proxyColumn){var self=this;var __localFn0__=function(stopTime){if(!self.jsonData){proxyColumn.dataUnavailable();return 1}for(;i<self.jsonData.qkeys.length;i++){if(weavejs.util.JS.now()>stopTime)return i/self.jsonData.qkeys.length;var geomsFromJson=weavejs.geom.GeneralizedGeometry.fromGeoJson(self.jsonData.geometries[i]);var foreachiter0_target=geomsFromJson;for(var foreachiter0 in foreachiter0_target){var geom=foreachiter0_target[foreachiter0];
qkeys.push(self.jsonData.qkeys[i]);geoms.push(geom)}}return 1};var __localFn1__=function(){var gc=new weavejs.data.column.GeometryColumn(metadata);gc.setGeometries(qkeys,geoms);proxyColumn.setInternalColumn(gc)};var propertyName=proxyColumn.getMetadata(weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME);var metadata=this.getMetadataForProperty(propertyName);if(!metadata||!this.jsonData||propertyName&&this.jsonData.propertyNames.indexOf(propertyName)<0){proxyColumn.dataUnavailable();return}proxyColumn.setMetadata(metadata);
var dataType=metadata[weavejs.api.data.ColumnMetadata.DATA_TYPE];if(dataType==weavejs.api.data.DataType.GEOMETRY){var qkeys=[];var geoms=[];var i=0;var initGeoms=__localFn0__;var setGeoms=__localFn1__;weavejs.WeaveAPI.Scheduler.startTask(proxyColumn,initGeoms,weavejs.WeaveAPI.TASK_PRIORITY_HIGH,setGeoms)}else{var data=weavejs.util.ArrayUtils.pluck(this.jsonData.properties,propertyName);var type=this.jsonData.propertyTypes[propertyName];if(type=='number'){var nc=new weavejs.data.column.NumberColumn(metadata);
nc.setRecords(this.jsonData.qkeys,data);proxyColumn.setInternalColumn(nc)}else{var sc=new weavejs.data.column.StringColumn(metadata);sc.setRecords(this.jsonData.qkeys,data);proxyColumn.setInternalColumn(sc)}}};
weavejs.data.source.GeoJSONDataSource.prototype.getMetadataForProperty=function(propertyName){if(!this.jsonData)return null;var meta=null;if(!propertyName){meta={};meta[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]='';meta[weavejs.api.data.ColumnMetadata.TITLE]=this.getGeomColumnTitle();meta[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.getKeyType();meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=weavejs.api.data.DataType.GEOMETRY;meta[weavejs.api.data.ColumnMetadata.PROJECTION]=this.getProjection()}else if(this.jsonData.propertyNames.indexOf(propertyName)>=
0){meta={};meta[weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME]=propertyName;meta[weavejs.api.data.ColumnMetadata.TITLE]=propertyName;meta[weavejs.api.data.ColumnMetadata.KEY_TYPE]=this.getKeyType();if(propertyName==this.keyProperty.value)meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.getKeyType();else meta[weavejs.api.data.ColumnMetadata.DATA_TYPE]=this.jsonData.propertyTypes[propertyName]}return meta};weavejs.data.source.GeoJSONDataSource.GEOJSON_PROPERTY_NAME='geoJsonPropertyName';
weavejs.data.source.GeoJSONDataSource.prototype.getGeomColumnTitle=function(){return Weave.lang('{0} geometry',Weave.getRoot(this).getName(this))};Object.defineProperties(weavejs.data.source.GeoJSONDataSource.prototype,{initializationComplete:{get:function(){return org.apache.flex.utils.Language.superGetter(weavejs.data.source.GeoJSONDataSource,this,'initializationComplete')&&!Weave.isBusy(this.url)&&this.jsonData}}});
weavejs.data.source.GeoJSONDataSource.prototype.FLEXJS_CLASS_INFO={names:[{name:'GeoJSONDataSource',qName:'weavejs.data.source.GeoJSONDataSource'}],interfaces:[weavejs.api.data.IDataSource_File]};goog.provide('weavejs.geom.ZoomBounds');goog.require('weavejs.api.core.ILinkableVariable');weavejs.geom.ZoomBounds=function(){this._tempBounds=new weavejs.geom.Bounds2D;this._dataBounds=new weavejs.geom.Bounds2D;this._screenBounds=new weavejs.geom.Bounds2D};weavejs.geom.ZoomBounds.prototype._tempBounds;weavejs.geom.ZoomBounds.prototype._dataBounds;weavejs.geom.ZoomBounds.prototype._screenBounds;weavejs.geom.ZoomBounds.prototype._useFixedAspectRatio=false;
weavejs.geom.ZoomBounds.prototype.getSessionState=function(){if(this._useFixedAspectRatio)return{xCenter:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getXCenter()),yCenter:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getYCenter()),area:weavejs.util.StandardLib.roundSignificant(this._dataBounds.getArea())};else return{xMin:this._dataBounds.getXMin(),yMin:this._dataBounds.getYMin(),xMax:this._dataBounds.getXMax(),yMax:this._dataBounds.getYMax()}};
weavejs.geom.ZoomBounds.prototype.setSessionState=function(state){var cc=Weave.getCallbacks(this);cc.delayCallbacks();if(state==null){if(!this._dataBounds.isUndefined())cc.triggerCallbacks();this._dataBounds.reset()}else{var useFixedAspectRatio=false;if(state.hasOwnProperty('xCenter')){useFixedAspectRatio=true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getXCenter())!=state.xCenter){this._dataBounds.setXCenter(state.xCenter);cc.triggerCallbacks()}}if(state.hasOwnProperty('yCenter')){useFixedAspectRatio=
true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getYCenter())!=state.yCenter){this._dataBounds.setYCenter(state.yCenter);cc.triggerCallbacks()}}if(state.hasOwnProperty('area')){useFixedAspectRatio=true;if(weavejs.util.StandardLib.roundSignificant(this._dataBounds.getArea())!=state.area){var Ad=state.area;var HsWsRatio=this._screenBounds.getYCoverage()/this._screenBounds.getXCoverage();if(!isFinite(HsWsRatio))HsWsRatio=1;var Hd=Math.sqrt(Ad*HsWsRatio);var Wd=Ad/Hd;this._dataBounds.centeredResize(Wd,
Hd);cc.triggerCallbacks()}}if(!useFixedAspectRatio){var names=['xMin','yMin','xMax','yMax'];var foreachiter0_target=names;for(var foreachiter0 in foreachiter0_target){var name=foreachiter0_target[foreachiter0];if(state.hasOwnProperty(name)&&this._dataBounds[name]!=state[name]){this._dataBounds[name]=state[name];cc.triggerCallbacks()}}}this._useFixedAspectRatio=useFixedAspectRatio}cc.resumeCallbacks()};weavejs.geom.ZoomBounds.prototype.getDataBounds=function(outputDataBounds){outputDataBounds.copyFrom(this._dataBounds)};
weavejs.geom.ZoomBounds.prototype.getScreenBounds=function(outputScreenBounds){outputScreenBounds.copyFrom(this._screenBounds)};weavejs.geom.ZoomBounds.prototype.projectDataToScreen=function(inputAndOutput){this._dataBounds.projectPointTo(inputAndOutput,this._screenBounds)};weavejs.geom.ZoomBounds.prototype.projectScreenToData=function(inputAndOutput){this._screenBounds.projectPointTo(inputAndOutput,this._dataBounds)};
weavejs.geom.ZoomBounds.prototype.setBounds=function(dataBounds,screenBounds,useFixedAspectRatio){if(this._dataBounds.equals(dataBounds)&&this._screenBounds.equals(screenBounds)&&this._useFixedAspectRatio==useFixedAspectRatio)return;this._dataBounds.copyFrom(dataBounds);this._screenBounds.copyFrom(screenBounds);this._useFixedAspectRatio=useFixedAspectRatio;this._fixAspectRatio();Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype.setDataBounds=function(dataBounds,zoomOutIfNecessary){zoomOutIfNecessary=typeof zoomOutIfNecessary!=='undefined'?zoomOutIfNecessary:false;if(this._dataBounds.equals(dataBounds))return;this._dataBounds.copyFrom(dataBounds);this._fixAspectRatio(zoomOutIfNecessary);Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype.setScreenBounds=function(screenBounds,useFixedAspectRatio){if(this._useFixedAspectRatio==useFixedAspectRatio&&this._screenBounds.equals(screenBounds))return;this._useFixedAspectRatio=useFixedAspectRatio;this._screenBounds.copyFrom(screenBounds);this._fixAspectRatio();Weave.getCallbacks(this).triggerCallbacks()};
weavejs.geom.ZoomBounds.prototype._fixAspectRatio=function(zoomOutIfNecessary){zoomOutIfNecessary=typeof zoomOutIfNecessary!=='undefined'?zoomOutIfNecessary:false;if(this._useFixedAspectRatio&&!this._screenBounds.isEmpty()){var xInvScale=this._dataBounds.getXCoverage()/this._screenBounds.getXCoverage();var yInvScale=this._dataBounds.getYCoverage()/this._screenBounds.getYCoverage();if(xInvScale!=yInvScale){var scale=zoomOutIfNecessary?Math.max(xInvScale,yInvScale):Math.sqrt(xInvScale*yInvScale);this._dataBounds.centeredResize(this._screenBounds.getXCoverage()*
scale,this._screenBounds.getYCoverage()*scale)}}};weavejs.geom.ZoomBounds.prototype.getXScale=function(){return this._screenBounds.getXCoverage()/this._dataBounds.getXCoverage()};weavejs.geom.ZoomBounds.prototype.getYScale=function(){return this._screenBounds.getYCoverage()/this._dataBounds.getYCoverage()};weavejs.geom.ZoomBounds.prototype.FLEXJS_CLASS_INFO={names:[{name:'ZoomBounds',qName:'weavejs.geom.ZoomBounds'}],interfaces:[weavejs.api.core.ILinkableVariable]};goog.provide('WeaveTest');goog.require('weavejs.core.LinkableCallbackScript');goog.require('weavejs.core.LinkableFunction');goog.require('weavejs.core.LinkableNumber');goog.require('weavejs.core.LinkableSynchronizer');goog.require('weavejs.core.WeaveArchive');goog.require('weavejs.data.bin.CategoryBinningDefinition');goog.require('weavejs.data.bin.CustomSplitBinningDefinition');goog.require('weavejs.data.bin.DynamicBinningDefinition');goog.require('weavejs.data.bin.EqualIntervalBinningDefinition');
goog.require('weavejs.data.bin.ExplicitBinningDefinition');goog.require('weavejs.data.bin.NaturalJenksBinningDefinition');goog.require('weavejs.data.bin.NumberClassifier');goog.require('weavejs.data.bin.QuantileBinningDefinition');goog.require('weavejs.data.bin.SimpleBinningDefinition');goog.require('weavejs.data.bin.SingleValueClassifier');goog.require('weavejs.data.bin.StandardDeviationBinningDefinition');goog.require('weavejs.data.bin.StringClassifier');goog.require('weavejs.data.column.AlwaysDefinedColumn');
goog.require('weavejs.data.column.BinnedColumn');goog.require('weavejs.data.column.ColorColumn');goog.require('weavejs.data.column.CombinedColumn');goog.require('weavejs.data.column.FilteredColumn');goog.require('weavejs.data.column.NormalizedColumn');goog.require('weavejs.data.column.SortedColumn');goog.require('weavejs.data.column.SortedIndexColumn');goog.require('weavejs.data.column.StringLookup');goog.require('weavejs.data.hierarchy.WeaveRootDataTreeNode');goog.require('weavejs.data.key.ColumnDataFilter');
goog.require('weavejs.data.key.DynamicKeyFilter');goog.require('weavejs.data.key.DynamicKeySet');goog.require('weavejs.data.key.FilteredKeySet');goog.require('weavejs.data.key.KeyFilter');goog.require('weavejs.data.key.KeySet');goog.require('weavejs.data.key.KeySetCallbackInterface');goog.require('weavejs.data.key.KeySetUnion');goog.require('weavejs.data.key.SortedKeySet');goog.require('weavejs.data.source.CSVDataSource');goog.require('weavejs.data.source.GeoJSONDataSource');goog.require('weavejs.geom.ZoomBounds');
WeaveTest=function(){};
WeaveTest.dependencies=[weavejs.api.core.ILinkableVariable,weavejs.core.LinkableNumber,weavejs.core.LinkableString,weavejs.core.LinkableBoolean,weavejs.core.LinkableVariable,weavejs.core.LinkableHashMap,weavejs.core.LinkableDynamicObject,weavejs.core.LinkableWatcher,weavejs.core.LinkableCallbackScript,weavejs.core.LinkableSynchronizer,weavejs.core.LinkableFunction,weavejs.data.key.ColumnDataFilter,weavejs.data.key.DynamicKeyFilter,weavejs.data.key.DynamicKeySet,weavejs.data.key.FilteredKeySet,weavejs.data.key.KeyFilter,
weavejs.data.key.KeySet,weavejs.data.key.KeySetCallbackInterface,weavejs.data.key.KeySetUnion,weavejs.data.key.SortedKeySet,weavejs.data.bin.AbstractBinningDefinition,weavejs.data.bin.CategoryBinningDefinition,weavejs.data.bin.CustomSplitBinningDefinition,weavejs.data.bin.DynamicBinningDefinition,weavejs.data.bin.EqualIntervalBinningDefinition,weavejs.data.bin.ExplicitBinningDefinition,weavejs.data.bin.NaturalJenksBinningDefinition,weavejs.data.bin.NumberClassifier,weavejs.data.bin.QuantileBinningDefinition,
weavejs.data.bin.SimpleBinningDefinition,weavejs.data.bin.SingleValueClassifier,weavejs.data.bin.StandardDeviationBinningDefinition,weavejs.data.bin.StringClassifier,weavejs.data.column.AbstractAttributeColumn,weavejs.data.column.AlwaysDefinedColumn,weavejs.data.column.BinnedColumn,weavejs.data.column.ColorColumn,weavejs.data.column.ColumnDataTask,weavejs.data.column.CombinedColumn,weavejs.data.column.CSVColumn,weavejs.data.column.DateColumn,weavejs.data.column.DynamicColumn,weavejs.data.column.EquationColumn,
weavejs.data.column.ExtendedDynamicColumn,weavejs.data.column.FilteredColumn,weavejs.data.column.GeometryColumn,weavejs.data.column.NormalizedColumn,weavejs.data.column.NumberColumn,weavejs.data.column.ProxyColumn,weavejs.data.column.ReferencedColumn,weavejs.data.column.SecondaryKeyNumColumn,weavejs.data.column.SortedColumn,weavejs.data.column.SortedIndexColumn,weavejs.data.column.StringColumn,weavejs.data.column.StringLookup,weavejs.data.source.GeoJSONDataSource,weavejs.geom.ZoomBounds,weavejs.core.WeaveArchive,
weavejs.data.hierarchy.WeaveRootDataTreeNode,null];
WeaveTest.test=function(weave){var __localFn0__=function(){weavejs.util.JS.log('immediate',lv.state)};var __localFn1__=function(){weavejs.util.JS.log('grouped',lv.state)};var __localFn2__=function(){weavejs.util.JS.log(this+'',this.getState())};var __localFn3__=function(){weavejs.util.JS.log(this.weave.path('ls2').getState())};var __localFn4__=function(){weavejs.util.JS.log('column',this.getMetadata('title'));var foreachiter0_target=this.keys;for(var foreachiter0 in foreachiter0_target){var key=foreachiter0_target[foreachiter0];
weavejs.util.JS.log(key,this.getValueFromKey(key),this.getValueFromKey(key,Number),this.getValueFromKey(key,String))}};var __localFn5__=function(){weavejs.util.JS.log(this+'');var csv=org.apache.flex.utils.Language.as(this.getObject(),weavejs.data.source.CSVDataSource);var ids=csv.getColumnIds();var foreachiter1_target=ids;for(var foreachiter1 in foreachiter1_target){var id=foreachiter1_target[foreachiter1];var col=csv.getColumnById(id);col.addGroupedCallback(col,print,true)}};weavejs.core.SessionStateLog.debug=
true;var lv=weave.root.requestObject('ls',weavejs.core.LinkableString,false);lv.addImmediateCallback(weave,__localFn0__,true);lv.addGroupedCallback(weave,__localFn1__,true);lv.state='hello';lv.state='hello';weave.path('ls').state('hi').addCallback(null,__localFn2__);lv.state='world';weave.path('script').request('LinkableCallbackScript').state('script','console.log(Weave.className(this), this.get("ldo").target.value, Weave.getState(this));').push('variables','ldo').request('LinkableDynamicObject').state(['ls']);
lv.state='2';lv.state=2;lv.state='3';weave.path('ls2').request('LinkableString');weave.path('sync').request('LinkableSynchronizer').state('primaryPath',['ls']).state('primaryTransform','state + "_transformed"').state('secondaryPath',['ls2']).call(__localFn3__);var print=__localFn4__;weave.path('csv').request(weavejs.data.source.CSVDataSource).state('csvData',[['a','b'],[1,'one'],[2,'two']]).addCallback(null,__localFn5__)};WeaveTest.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveTest',qName:'WeaveTest'}]};goog.provide('org.apache.flex.utils.Language');org.apache.flex.utils.Language=function(){};
org.apache.flex.utils.Language.as=function(leftOperand,rightOperand,coercion){coercion=typeof coercion!=='undefined'?coercion:null;var error,itIs,message;coercion=coercion!==undefined?coercion:false;itIs=org.apache.flex.utils.Language.is(leftOperand,rightOperand);if(!itIs&&coercion){message='Type Coercion failed';if(TypeError)error=new TypeError(message);else error=new Error(message);throw error;}return itIs?leftOperand:null};org.apache.flex.utils.Language._int=function(value){return value>>0};
org.apache.flex.utils.Language.is=function(leftOperand,rightOperand){var superClass;if(leftOperand==null||rightOperand==null)return false;if(leftOperand instanceof rightOperand)return true;if(rightOperand===Object)return true;if(typeof leftOperand==='string')return rightOperand===String;if(typeof leftOperand==='number')return rightOperand===Number;if(typeof leftOperand==='boolean')return rightOperand===Boolean;if(rightOperand===Array)return Array.isArray(leftOperand);if(leftOperand.FLEXJS_CLASS_INFO===
undefined)return false;if(leftOperand.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(leftOperand,rightOperand))return true;superClass=leftOperand.constructor;superClass=superClass.superClass_;if(superClass)while(superClass&&superClass.FLEXJS_CLASS_INFO){if(superClass.FLEXJS_CLASS_INFO.interfaces)if(org.apache.flex.utils.Language.checkInterfaces(superClass,rightOperand))return true;superClass=superClass.constructor;superClass=superClass.superClass_}return false};
org.apache.flex.utils.Language.checkInterfaces=function(leftOperand,rightOperand){var i,interfaces;interfaces=leftOperand.FLEXJS_CLASS_INFO.interfaces;for(i=interfaces.length-1;i>-1;i--){if(interfaces[i]===rightOperand)return true;if(interfaces[i].prototype.FLEXJS_CLASS_INFO.interfaces){var isit=org.apache.flex.utils.Language.checkInterfaces(interfaces[i].prototype,rightOperand);if(isit)return true}}return false};
org.apache.flex.utils.Language.prototype.isClass=function(classDef){return typeof classDef==='function'&&classDef.prototype&&classDef.prototype.constructor===classDef};org.apache.flex.utils.Language.prototype.asClass=function(classDef){return this.isClass(classDef)?classDef:null};org.apache.flex.utils.Language.postdecrement=function(obj,prop){var value=obj[prop];obj[prop]=value-1;return value};org.apache.flex.utils.Language.postincrement=function(obj,prop){var value=obj[prop];obj[prop]=value+1;return value};
org.apache.flex.utils.Language.predecrement=function(obj,prop){var value=obj[prop]-1;obj[prop]=value;return value};org.apache.flex.utils.Language.preincrement=function(obj,prop){var value=obj[prop]+1;obj[prop]=value;return value};
org.apache.flex.utils.Language.superGetter=function(clazz,pthis,prop){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}return superdesc.get.call(pthis)};
org.apache.flex.utils.Language.superSetter=function(clazz,pthis,prop,value){var superClass=clazz.superClass_;var superdesc=Object.getOwnPropertyDescriptor(superClass,prop);while(superdesc==null){superClass=superClass.constructor;superClass=superClass.superClass_;superdesc=Object.getOwnPropertyDescriptor(superClass,prop)}superdesc.set.apply(pthis,[value])};
org.apache.flex.utils.Language.trace=function(rest){rest=Array.prototype.slice.call(arguments,0);var theConsole;var windowConsole=window.console;theConsole=goog.global.console;if(theConsole===undefined&&windowConsole!==undefined)theConsole=windowConsole;try{if(theConsole&&theConsole.log)theConsole.log.apply(theConsole,rest)}catch(e){}};org.apache.flex.utils.Language.uint=function(value){return value>>>0};
org.apache.flex.utils.Language.closure=function(fn,object,boundMethodName){if(object.hasOwnProperty(boundMethodName))return object[boundMethodName];var boundMethod=goog.bind(fn,object);Object.defineProperty(object,boundMethodName,{value:boundMethod});return boundMethod};org.apache.flex.utils.Language.prototype.FLEXJS_CLASS_INFO={names:[{name:'Language',qName:'org.apache.flex.utils.Language'}]};goog.provide('WeaveJS');goog.require('Weave');goog.require('WeaveTest');goog.require('weavejs.data.ColumnUtils');goog.require('weavejs.util.JS');goog.require('org.apache.flex.utils.Language');WeaveJS=function(){};WeaveJS.WEAVE_EXTERNAL_TOOLS='WeaveExternalTools';
WeaveJS.prototype.start=function(){var self=this;var __localFn0__=function(columns,dataType,allowMissingData){dataType=typeof dataType!=='undefined'?dataType:null;allowMissingData=typeof allowMissingData!=='undefined'?allowMissingData:false;return joinColumns.call(weavejs.data.ColumnUtils,columns,dataType,allowMissingData)};var window=weavejs.util.JS.global;var joinColumns=weavejs.data.ColumnUtils.joinColumns;weavejs.data.ColumnUtils['joinColumns']=__localFn0__;if(window.opener&&window.opener[WeaveJS.WEAVE_EXTERNAL_TOOLS]&&
window.opener[WeaveJS.WEAVE_EXTERNAL_TOOLS][window.name]){weavejs.util.JS.log('using WeaveJS');var weave=new Weave;var ownerPath=window.opener.WeaveExternalTools[window.name].path;weavejs.path.WeavePath.migrate(ownerPath,weave);window.weave=weave}else WeaveTest};WeaveJS.prototype.FLEXJS_CLASS_INFO={names:[{name:'WeaveJS',qName:'WeaveJS'}]};goog.exportSymbol('WeaveJS',WeaveJS);
//# sourceMappingURL=./WeaveJS.js.map